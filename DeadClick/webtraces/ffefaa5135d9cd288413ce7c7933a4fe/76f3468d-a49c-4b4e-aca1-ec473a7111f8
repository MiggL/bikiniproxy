window.gtm={initMetrics:function(){window.datalayer=window.datalayer||{};try{console.log("defining data layer",this);zm.listeners.push({initView:gtm.initMetrics,trackEvent:gtm.trackEvent,trackGeneric:gtm.trackGeneric,productView:gtm.productView,removedItem:gtm.removedItem,checkoutEvent:gtm.checkoutOption})}catch(a){console.error("error itializing datalayer:",a)}},trackEvent:function(a){window.dataLayer.push(a)},trackGeneric:function(a){window.dataLayer.push(a)},productView:function(f){var a,b,d;if(window.dataLayer){for(var c in window.dataLayer){d=window.dataLayer[c];if(d.currency&&d.currencySymbol){a=d.currency;b=d.currencySymbol;break}}}window.dataLayer.push({event:"productDetailView",ecommerce:{currencyCode:a?a:null,currencySymbol:b?b:null,detail:{actionField:{list:f.pageId},products:[{id:f.productId,sku:f.productId,bundleID:f.bundleId?f.bundleId:null,productID:f.productId?f.productId:null,itemID:f.itemId?f.itemId:null,name:f.productName,brand:"",category:f.categoryId?f.categoryId:"Misc",variant:f.definingAttributes?f.definingAttributes:"",price:f.price?parseFloat(f.price):0,numReviews:f.numReviews?f.numReviews:0,badge:f.badgeDescription?f.badgeDescription:null,avgRating:f.avgRating?f.avgRating:0}]}}});var e={sku:f.productId,name:f.productName,category:f.categoryId?f.categoryId:"Misc",parentId:f.parentProductId?f.parentProductId:"",bundlePartNumber:f.bundlePartNumber?f.bundlePartNumber:"",productOrigination:f.productOrigination?f.productOrigination:"search",seoCategory:f.seoCategory?f.seoCategory:""};if(f.isSearch===true){window.dataLayer.push({event:"productview",productViewType:f.productViewType,searchProductClick:e})}else{window.dataLayer.push({event:"productview",productViewType:f.productViewType,gridProductClick:e})}},removedItem:function(e){var a,b,d;if(window.dataLayer){for(var c in window.dataLayer){d=window.dataLayer[c];if(d.currency&&d.currencySymbol){a=d.currency;b=d.currencySymbol;break}}}window.dataLayer.push({event:"removeFromCart",ecommerce:{currencyCode:e.currency?e.currency:null,currencySymbol:b?b:null,remove:{products:[{name:e.productName,id:e.productId,bundleID:e.bundleId?e.bundleId:null,productID:e.productId?e.productId:null,itemID:e.itemId?e.itemId:null,vn:e.itemId?e.itemId:null,price:parseFloat(e.unitPrice),brand:"",category:e.categoryId?e.categoryId:"Misc",variant:e.definingAttributes?e.definingAttributes:"",quantity:e.quantity}]}}})},checkoutOption:function(a){window.dataLayer.push({event:"checkoutOption",ecommerce:{checkout_option:{actionField:{step:a.checkoutStep,option:a.event}}}})}};