var CWParser_informaworld={name:"Taylor & Francis Online",webPageAsObject:!1,extractReference:!0,isCogent:!1,getSearchQuery:function(e){try{Utility.validateArgs(e)||(e=Callbacks);var t=CwZ("form[name='quickSearchLineForm']");t.length>0&&t.find("input#XuiTxtSubjectSearch").length>0?e.success(t.find("input#XuiTxtSubjectSearch").val()):e.success("")}catch(t){e.success(""),Utility.log(t)}},next:function(e){Utility.validateArgs(e)||(e=Callbacks);try{var t=CwZ(".paginationLinkContainer ul li.pageLink-with-arrow a.nextPage");t.length>0?(e.success(!0),setTimeout(function(){window.location.href=t[0].href},500)):e.success(!1)}catch(t){e.success(!1),Utility.log(t)}},matchFigAndData:function(e){var t=e.replace(/\s+/,"").match(/(section|figure|equation|table|fig)\s?[.\-–(\[{]?\s?(\d{1,3}\b)/gi);if(t){var a=t[0].match(/\d+/);if(!e.replace(a[0],"").match(/\d+/))return!0}return!1},parsePDFText:function(e,t,a,i,n,r,d,o,l,s,f,c){var p="",w=r;r.length>15?r=p=(p=r).substr(0,e+5):p=i;var h="",u="",C=(p=p.replace(/,/g,"").trim()).length,m=p.lastIndexOf("(");C-1!=m&&-1!=m&&(p=p.substr(m+1,C)),h=p,u=r;var g=-1;if(/^(\d{4}[a-z]?)$/.test(r))-1!=(g=this.searchReference(s,u,h))?CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,dest:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,dest:d,view:"pdfFrame"},"pdfFrame"):CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame");else{var b=r.replace(/\d*/g,""),Z="",v=r.match(/(\d{4})/g);if(v&&(Z=v.pop()),-1!=(g=this.searchReference(s,Z,b)))CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame");else{var y=w.match(/(\[|\()\d+((-|–)\d+)?(,\d+((-|–)\d+)?)*(\]|\))/g);if(y){for(var P=y[0].replace(/(\[|\]|\(|\))/g,""),x=["-",",","–"],k=!1,D=0;D<x.length;D++)if(P.indexOf(x[D])>-1){k=!0;break}var L=e;isNaN(w.charAt(e))&&(CwZ.inArray(e,x)||e.match(/(\[|\()/)?L=e+1:e.match(/(\]|\))/)&&(L=e-1));var U=P;if(k){var I=w.indexOf(P),W=P.split(new RegExp(x.join("|")));if(U=W[0],0!=L)for(D=0;D<W.length;D++){var O=W[D],F=P.indexOf(O);if(L==F+I||L>F+I&&L<F+(O.length-1)+I){U=O;break}}}g=U,CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame")}else{var _=(i+r+n).match(/\[\d+\]/g);_?1==_.length?(g=_[0].replace(/(\[|\])/g,""),CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:g,annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame")):CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWParser_informaworld.matchFigAndData(r)?CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):r.match(/\d+/g)?(i=i.toLowerCase()).match(/section|figure|equation|table|fig.|\d{4,}/gi)?CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:r.match(/\d+/g)[0],annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:r.match(/\d+/g)[0],annotLinkX:f,annotLinkY:c,view:"pdfFrame"},"pdfFrame"):CWPDFReader.CWComManager?CWPDFReader.CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame"):CWComManager.tell("referenceID",{referenceId:d,view:"pdfFrame"},"pdfFrame")}}}},searchReference:function(e,t,a){var i=-1;if(e.hasOwnProperty(t))if(Object.keys(e[t]).length>1){var n={},r=(a=(a=(a=a.replace(" et al.","").replace(/[&|;|(|)|,|"]/g,"")).replace(" and "," ").replace("  "," ")).replace(/([a-z])([A-Z])/g,"$1 $2")).split(" "),d=0;for(var o in e[t]){var l=Utility.matchAuthors(r,e[t][o]);l>d&&(d=l),n[l]=o}d>0&&(i=n[Object.keys(n)[Object.keys(n).length-1]])}else i=Object.keys(e[t])[0];return i},getReference:function(e,t){var a=CwZ.Deferred(),i=[],n=e.find("ul.references li");if(void 0!=n&&n.length>0)if(Utility.checkIssnParser(t))Utility.referenceParser(Utility.checkIssnParser(t),n).then(function(e){i=e,a.resolve(i)});else CwZ(n).each(function(e){var t={};if(t.id=e+1,t.title="",t.journal="",t.author="",CWParser.isCogent){var a=CwZ(this).text();a=a.trim().replace(/[0-9]+\./,"").trim(),t.author=a.replace(/^(.*?)(\(|\d{4}).*/,"$1").replace(/[\.\(\):-]+/g,""),t.author=t.author.trim();var n=t.author.length;if(t.author.lastIndexOf(",")===n-1&&(t.author=t.author.substr(0,n-1),t.author=t.author.substr(0,n-1)),t.year=a.replace(/(\r\n|\n|\r)/gm,"").replace(/.*?(\d{4}[a-z]?).*/,"$1"),t.year||(t.year=CwZ(this).contents().text().replace(/(\r\n|\n|\r)/gm,"").replace(/.*?(\d{4}[a-z]?).*/,"$1")),t.year.match(/(18|19|20)\d{2}[a-z]?/)||(t.year=""),CwZ(this).contents().text().match(/.*\)\.(.*?)$/)){CwZ(this).contents().remove("script");var r=CwZ(this).contents().text().match(/.*\)\.(.*?)$/)[1];t.title=r}else t.title="";if(CwZ(this).contents().text().match(/(\d{4}\)|n\.d\.\)|\d{4})\.(.*?)$/))try{t.title=CwZ(this).contents().text().match(/(\d{4}\)|n\.d\.\)|\d{4})\.(.*?)$/)[2]}catch(e){console.log(e)}else CwZ(this).contents().text().match(/(\d{4}\)|n\.d\.\)|\d{4})\.(.*?)\..*/)&&(t.title=CwZ(this).contents().text().match(/(\d{4}\)|n\.d\.\)|\d{4})\.(.*?)\..*/)[2]);""!=t.title&&(t.title=t.title.replace(/[\.\(\):-]+/g,"")),CwZ(this).find("i").length&&(t.journal=CwZ(this).find("i").text().replace(/[\.\(\):-]+/g,""),t.journal.match(/\d{1,2}$/)&&(t.journal=t.journal.replace(/\d{1,3}$/,"")),t.journal.match(/,$/)&&(t.journal=t.journal.replace(/,$/,"")),""===t.title&&""!==t.journal&&(t.title=t.journal,t.journal="")),""===t.title&&(t.title=CwZ(this).find("a").text()),t.title=CWUtils.removeTags(t.title).trim(),t.title=t.title.trim(),t.author&&""!==t.title&&t.author.indexOf(t.title)>=0&&(t.author=""),t.journal&&""!==t.title&&t.journal.indexOf(t.title)>=0&&(t.journal=t.journal.replace("“"+t.title+"”",""));var d=t.title.indexOf(t.journal);d>10?(t.title=t.title.substr(0,d).trim(),t.title.match(/in$/i)&&(t.title=t.title.replace(/in$/i,"").trim())):d>-1&&(t.journal=""),CwZ(this).find("a.ref").length&&(CwZ(this).find("a.ref").attr("href").indexOf("popRefLink")>0?t.doi=decodeURIComponent(CwZ(this).find(".ref").attr("href").replace(/.*?\,.*\,\s*'(.*)'.*/,"$1")):CwZ(this).find("a.ref").attr("href").indexOf("newWindow")>0&&(t.doi=decodeURIComponent(CwZ(this).find(".ref").attr("href").replace(/.*(org|abs)\/(.*)'\)/,"$2")))),t.doi||(t.doi=CWUtils.findDoi(this,"NLM_pub-id",a))}else(""==t.title||""==t.author||t.title.replace(/[^a-zA-Z]/g,"").length<=3)&&(t.bad=!0,t.refText=CWUtils.removeTags(CwZ(this).text()).trim());i.push(t)}),a.resolve(i);else{var r={};r.refsNotFound=!0,i.push(r),a.resolve(i)}return a.promise()},search:function(e){Utility.validateArgs(e)||(e=Callbacks);try{var t=CwZ("form[name='quickSearch']");t.length>0?(CwZ("input#searchText").val(e.query),e.success(!0),setTimeout(function(){t.submit()},100)):e.success(!1)}catch(t){e.success(!1),Utility.log(t)}},injectLink:function(e){try{var t=CwZ(".accessmodule");if(t.length&&!t.hasClass(".cw-done")){t.closest(".gutter").addClass("cw-tandf-a");this.getFilter();if(CWParser_informaworld.isPubPage()){if(i=(i=CwZ("#breadcrumb a:contains('List of Issues')").attr("href")).replace("/loi/",""),Utility.filter(i,"informaworld")){var a=CwZ(".pdf")[0].href;!t.hasClass("cw-done")&&a&&a.length>0&&(Utility.log(a),t.prepend(e.addButton({pdfUrl:a,index:0,inline:!1,class:"btn-tandf"})),t.addClass("cw-done"),Utility.log("link injected"))}}else if(CWParser_informaworld.isListingPage()){var i=CwZ("#breadcrumb a:contains('List of Issues')").attr("href");i=i.replace("/loi/",""),Utility.filter(i,"informaworld")&&CwZ(".article").each(function(t){var a=CwZ(this);if(a.find(".pdf").length>0){var i=a.find("a[href*='pdf']")[0].href,n=a.find(".accessmodule");n.closest(".gutter").addClass("cw-tandf-a"),!n.hasClass("cw-done")&&i&&i.length>0&&(n.addClass("cw-done"),n.prepend(e.addButton({pdfUrl:i,index:t,inline:!1,class:"btn-tandf"})))}})}else CWParser_informaworld.isSearchingPage()&&CwZ(".bd").each(function(t){var a=CwZ(this);if(a.find(".resultTitle").length>0){var i=a.find("a.searchResultJournal").attr("href").replace("/toc/","");if(i=i.substr(0,i.lastIndexOf("/")),Utility.filter(i,"informaworld")&&a.find(".filesLinks").length>0){var n=a.find("a[href*='pdf']")[0].href,r=a.find(".accessmodule");r.closest(".gutter").addClass("cw-tandf-a"),!r.hasClass("cw-done")&&n&&n.length>0&&(Utility.log(n),r.prepend(e.addButton({pdfUrl:n,index:t,inline:!1,class:"btn-tandf"})),r.addClass("cw-done"))}}CwZ(".iconLabel").length>0&&CwZ(".iconLabel").addClass("cw-tandf-b")})}e.success(CwZ(".cw-btnContainer").length)}catch(e){Utility.log(e)}},isSearchingPage:function(){var e=this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body");return e.find("#standardResults").length>0||e.find("#oaArticles .bd").length>0},isListingPage:function(){var e=this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body");return(e.find(".article").length>0||e.find(".topArticleDisplay").length>0)&&!CWParser_informaworld.isPbPubPage()},isPubPage:function(){return(this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body")).find(".pageArticle").length>0},isPbPubPage:function(){return(this.webPageAsObject?this.webPageAsObject.html.find("body"):CwZ("body")).find(".literatumPublicationTitle").length>0&&!CWParser_informaworld.isPbListingPage()},isPbListingPage:function(){return CwZ(".tocContent").length>0},isPbSearchPage:function(){return CwZ("ol.search-results").length>0},parsePage:function(e){Utility.validateArgs(e)||(e=Callbacks);var t=CWParser_informaworld,a=[];parsedHtml=!1,t.webPageAsObject=e.webPageAsObject||!1,t.webPageAsObject&&(parsedHtml=t.webPageAsObject.html=CwZ(Utility.parseHTML(t.webPageAsObject.data)));var i=Utility.getPageDomain(this.webPageAsObject.url),n=document.domain.replace(/[\.-]/g,"");if(t.isPubPage())try{var r="",d="",o="",l="",s="",f="",c="",p="",w="",h="",u=CwZ("#breadcrumb a:contains('List of Issues')").attr("href")||CwZ("#JournalNavigator ul li a:contains(All volumes & issues)").attr("href"),C=CwZ(".accessmodule").hasClass("access_free");u&&(u=u.replace("/loi/","")),0===u.indexOf("oa")&&(t.isCogent=!0),r=Utility.trim(CwZ(".description h1").text())||Utility.trim(CwZ("#ArticleInfo h1").text()),(d=CwZ(".doiMeta a").map(function(){if(CwZ(this).attr("href").indexOf("author")>=0)return Utility.trim(CwZ(this).text())}).get().join("; "))||(d=Utility.selectorAttributeGetter("meta[name='dc.Creator']","content",!1,"; ")),f=Utility.trim(CwZ(".doiMeta dl dd").text().replace(/(^.*DOI:)([a-zA-Z0-9_./-]+)?$/g,"$2"))||CwZ("meta[scheme=doi]").attr("content")||Utility.trim(CwZ(".articleInfoDOI").eq(0).text().replace(/(^.*DOI)([a-zA-Z0-9_./]+)?$/g,"$2")),c="doi";var m=CwZ(".accessmodule:first").length?CwZ(".accessmodule:first"):CwZ("#DownloadOptions").length?CwZ("#DownloadOptions"):null,g="",b="";(o=g=(g=/cogentoa/.test(n)?(CwZ(m).find("a:contains('PDF')").attr("href").indexOf("http")>-1?"":i)+CwZ(m).find("a:contains('PDF')").attr("href"):(CwZ(m).find(".pdf").attr("href").indexOf("http")>-1?"":i)+CwZ(m).find(".pdf").attr("href")).split("#")[0].replace("/abs/","/pdf/")).match(/\/\d{7}/)&&(b=o.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),b=Utility.getIssnCheck(b)),s=g.replace("/doi/pdf/","/doi/abs/"),l=g.replace("/doi/pdf/","/doi/ref/"),p=i+"/action/downloadCitation?doi="+encodeURIComponent(f)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",w="ris",_=Utility.trim(CwZ(".gutter table h2").text()),(x=Utility.selectorAttributeGetter("meta[name='dc.Date']","content"))&&(h=new Date(x).getFullYear());k=new CWMetaData({title:r,authors:d,identifier:f,identifierType:c,pubLink:s,refLink:l,pdfLink:o,dataUrl:p,type:w,issn:b,journal:_,openaccess:C,year:h});a.push(k),0==(D=m.find(".showDownloadPopup,.cw-btnContainer")).length?/(tandfonlinecom|tandfqaliteratumonlinecom|tandftestliteratumonlinecom|tandfstagliteratumonlinecom)/.test(n)?Utility.filter(i,u,"informaworld")&&(m.find(".accessIconWrapper").before(e.addButton({pdfUrl:o,index:0,inline:!0,class:" tandf-detail tip_bm",buttonCB:function(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(n)){var i='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");m=CwZ("#DownloadOptionsContainer");var d=CwZ(m).find("#DownloadOptions a").eq(0).text(),o=CwZ(m).find("#DownloadOptions a").get(0);i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(i).insertBefore(CwZ("#DownloadOptions .dropdown-toggle")),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}else if(0==CwZ(".showDownloadPopup").length){var i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),d=CwZ(m).find(".pdf").text(),l=CwZ(m).find(".pdf").index(),o=CwZ(m).find(".pdf");i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(i).insertBefore(CwZ(".accessmodule").children().eq(l)),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove(),m=CwZ(".top_article_links"),i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',d=CwZ(m).find(".pdf").text(),l=CwZ(m).find(".pdf").closest("li").index(),o=CwZ(m).find(".pdf"),i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(m).children().eq(l).append(i),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}},metaData:k})),""==o&&m.find("a.cw-openPdfReader").hide(),m.find(".cw-btnContainer").data("metadata",k)):(m.find(".accessIconWrapper").before(e.addButton({pdfUrl:o,index:0,inline:!0,class:" tandf-detail tip_bm"})),""==o&&m.find("a.cw-openPdfReader").hide(),m.find(".cw-btnContainer").data("metadata",k)):0!=D.length&&void 0===D.data("metadata")&&D.data("metadata",k);L=Utility.getPageUrl(this.webPageAsObject.url);if("1"==(U=Utility.parseQueryStr(L)).redirect||~L.indexOf("redirect=1")){if((I=CwZ("body").find('form[name="frmLogin"]'))&&I.length>0){W=s.replace("abs/","full/")+"#"+Base64.encode(o+"@@@0");I.find("[name='redirectUri']").attr("value",W)}if(O=CwZ("body").find("ul.externalLogin a"))for(var Z=encodeURIComponent("/doi/full/"+f+"#")+Base64.encode(o+"@@@0"),v=encodeURIComponent("/doi/pdf/"+f+"?redirect=1"),y=0;y<O.length;y++)O[y].href=O[y].href.replace(v,Z)}}catch(e){Utility.log(e)}else if(t.isPbPubPage())try{var r="",d="",o="",l="",s="",f="",c="",p="",w="",h="",u=CwZ("body").find(".info").find("a").attr("href"),C=CwZ("body").find(".accessLogo").find("img").length;u&&(u=u.replace("/toc/",""),u=u.replace(/\/\d+\/\d+/g,"")),0===u.indexOf("oa")&&(t.isCogent=!0);var P=CwZ("body");r=(r=P.find(".literatumPublicationTitle h1 span.NLM_article-title.hlFld-title").text()||P.find(".literatumPublicationTitle h1 span").text()||P.find(".literatumPublicationTitle h1").text()).trim(),(d=CwZ(CwZ(".publicationContentAuthors")[0]).find(".entryAuthor").map(function(){if(CwZ(this).attr("href").indexOf("author")>=0){var e=CwZ(this).clone();return e.find("span").remove(),Utility.trim(e.text())}}).get().join("; "))||(d=Utility.selectorAttributeGetter("meta[name='dc.Creator']","content",!1,"; ")),CwZ(".show-pdf").length&&CwZ(".show-pdf").attr("href").match(/\/doi\/pdf/)?f=CwZ(".show-pdf").attr("href").replace("/doi/pdf/","").split("?")[0]:CwZ(".show-pdf").length?CwZ(".show-pdf").attr("href").match(/\/abs\/(.*)\#/)?f=CwZ(".show-pdf").attr("href").match(/\/abs\/(.*)\#/)[1].split("?")[0]:CwZ(".show-pdf").attr("href").match(/\/abs\/(.*)/)&&(f=CwZ(".show-pdf").attr("href").match(/\/abs\/(.*)/).split("?")[0]):CwZ(".show-full").length&&(f=CwZ(".show-full").attr("href").replace("/doi/full/","").replace(/\?(.*)/g,"")),c="doi";var m=CwZ(".tab-nav"),g="",b="";(o=g=(g=/cogentoa/.test(n)?(CwZ(m).find("a:contains('PDF')").attr("href").indexOf("http")>-1?"":i)+CwZ(m).find("a:contains('PDF')").attr("href"):CwZ(m).find(".show-pdf").length?(CwZ(m).find(".show-pdf").attr("href").indexOf("http")>-1?"":i)+CwZ(m).find(".show-pdf").attr("href"):(g=(CwZ(".show-full").attr("href").replace(/\?(.*)/g,"").indexOf("http")>-1?"":i)+CwZ(".show-full").attr("href").replace(/\?(.*)/g,"")).replace("/full/","/pdf/")).split("#")[0].replace("/abs/","/pdf/")).match(/\/\d{7}/)&&(b=o.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),b=Utility.getIssnCheck(b)),s=g.replace("/doi/pdf/","/doi/abs/"),l=g.replace("/doi/pdf/","/doi/ref/"),p=i+"/action/downloadCitation?doi="+encodeURIComponent(f)+"&include=cit&direct=true&format=ris&submit=Download+article+citation+data",w="ris",(_=CwZ("body").find(".info").find("a").eq(0).text())&&(_=_.trim());var x=Utility.selectorAttributeGetter("meta[name='dc.Date']","content");x&&(h=new Date(x).getFullYear());var k=new CWMetaData({title:r,authors:d,identifier:f,identifierType:c,pubLink:s,refLink:l,pdfLink:o,dataUrl:p,issn:b,type:w,journal:_,openaccess:C,year:h});a.push(k);var D=m.find(".showDownloadPopup,.cw-btnContainer");0==D.length&&Utility.filter(i,u,"informaworld")&&(m.find(".accessIconWrapper").before(e.addButton({pdfUrl:o,index:0,inline:!0,class:" tandf-detail tip_bm",buttonCB:function(e){navigator.userAgent.match(/Trident.*rv[ :]*11\./);if(navigator.userAgent.indexOf("MSIE"),/cogentoa/.test(n)){var t='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',a=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");m=CwZ("#DownloadOptionsContainer");var i=CwZ(m).find("#DownloadOptions a").eq(0).text(),r=CwZ(m).find("#DownloadOptions a").get(0);t=(t=t.replace("@@btntext@@",i)).replace("@@pdfLink@@",a),CwZ(t).insertBefore(CwZ("#DownloadOptions .dropdown-toggle")),CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(r).remove()}else if(0==CwZ(".showDownloadPopup").length){var t='<a class="showDownloadPopup show-pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',a=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),d=m.length,i=1===d?CwZ(m).find(".show-pdf").text():CwZ(m).find(".show-pdf").eq(1).text(),o=CwZ(m).find(".show-pdf").closest("li").index(),r=CwZ(m).find(".show-pdf");if(t=t.replace("@@btntext@@",i),t=t.replace("@@pdfLink@@",a),CwZ(m).find(".show-pdf").closest("span").length)CwZ(m).find(".show-pdf").closest("span").children().eq(o).append(t);else if(1===d)CwZ(m).find(".show-pdf").closest("ul").children().eq(o).append(t);else if(2===d){var l=CwZ(m).find(".show-pdf").eq(0).closest("li").index();CwZ(m).find(".show-pdf").closest("ul").eq(0).children().eq(l).append(t),CwZ(m).find(".show-pdf").closest("ul").eq(1).children().eq(l).append(t)}CwZ(m).find(".showDownloadPopup").data("metadata",e),CwZ(r).remove()}},metaData:k})),""==o&&m.find("a.cw-openPdfReader").hide(),m.find(".cw-btnContainer").data("metadata",k));var L=Utility.getPageUrl(this.webPageAsObject.url),U=Utility.parseQueryStr(L);if("1"==U.redirect||~L.indexOf("redirect=1")){var I=CwZ("body").find('form[name="frmLogin"]');if(I&&I.length>0){var W=s.replace("abs/","full/")+"#"+Base64.encode(o+"@@@0");I.find("[name='redirectUri']").attr("value",W)}var O=CwZ("body").find("ul.externalLogin a");if(O)for(var Z=encodeURIComponent("/doi/full/"+f+"#")+Base64.encode(o+"@@@0"),v=encodeURIComponent("/doi/pdf/"+f+"?redirect=1"),y=0;y<O.length;y++)O[y].href=O[y].href.replace(v,Z)}CwZ(".pb-ui").on("DOMNodeInserted DOMNodeRemoved",function(){CwZ(".pb-ui > .fixed-tabs").length&&CWPDFReader.bindPopupEvents()})}catch(e){Utility.log(e)}else if(t.isPbSearchPage()&&!CwZ(".semi-transparent-layer").length){F=".search-results-body";(A=t.webPageAsObject?parsedHtml.find(F):CwZ(F)).find("ol.search-results li").each(function(t){var r="",d="",o="",l="",s="",f="",c="",p="",w="",h=CwZ(this);if(r=Utility.trim(h.find(".art_title a").text()),d=h.find(".access-icon").length>0,o=h.find(".author span").map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),0!==h.find(".art_title a.ref").length){p=h.find(".art_title a.ref").attr("href").replace("/doi/abs/","").replace("/doi/full/",""),"doi";var C=(h.find(".art_title a.ref").attr("href").indexOf("http")>-1?"":i)+h.find(".art_title a.ref").attr("href"),m="";(s=C=C.split("#")[0].replace(/\/full\/|\/abs\//,"/pdf/")).match(/\/\d{7}/)&&(m=s.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),m=Utility.getIssnCheck(m)),f=C.replace("/doi/pdf/","/doi/abs/"),c=C.replace("/doi/pdf/","/doi/ref/"),w=i+"/action/downloadCitation?doi="+encodeURIComponent(p)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data","ris",_=Utility.trim(h.find(".searchResultJournal").text());try{l=new Date(h.find(".publication-year")).getFullYear()}catch(e){}var g=new CWMetaData({title:r,authors:o,identifier:p,identifierType:"doi",pubLink:f,issn:m,refLink:c,pdfLink:s,dataUrl:w,year:l,type:"ris",journal:_,listingPage:!0,openaccess:d});a.push(g);var b=h.find(".showDownloadPopup,.cw-btnContainer");0==b.length?/(tandfonlinecom|tandfqaliteratumonlinecom|tandftestliteratumonlinecom|tandfstagliteratumonlinecom)/.test(n)?Utility.filter(i,u,"informaworld")&&(h.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:s,index:t,inline:!0,class:" tandf-list tip_bm",buttonCB:function(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(n)){var i='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");h=h.find(".access");var d=CwZ(h).find(".pdf").eq(0).text(),o=CwZ(h).find(".pdf").get(0);i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(h).append(i),CwZ(h).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}else{var i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),d=CwZ(h).find(".pdf").text(),o=(CwZ(h).find(".pdf").index(),CwZ(h).find(".pdf"));i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(i).insertBefore(o),CwZ(h).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove();var l=h.find(".filesLinks");i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',d=CwZ(l).find(".firstEntryLink a").text(),o=CwZ(l).find(".firstEntryLink a"),i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(l).find(".firstEntryLink").append(i),CwZ(l).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}},metaData:g})),""==s&&h.find("a.cw-openPdfReader").hide(),h.find(".cw-btnContainer").data("metadata",g)):(h.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:s,index:t,inline:!0,class:" tandf-list tip_bm"})),""==s&&h.find("a.cw-openPdfReader").hide(),h.find(".cw-btnContainer").data("metadata",g)):0!=b.length&&void 0===b.data("metadata")&&b.data("metadata",g)}}),console.log("")}else if(t.isPbListingPage())try{F=".tocContent";(A=t.webPageAsObject?parsedHtml.find(F):CwZ(F)).find("table").each(function(r){var d="",o="",l="",s="",f="",c="",p="",w="",h="",u=CwZ(this),C=CwZ(".loi-issues-scroller a.open").attr("href").replace("/toc/","").replace("/journal/","");0===(C=-1==C.lastIndexOf("/")?C:C.substr(0,C.lastIndexOf("/"))).indexOf("oa")&&(t.isCogent=!0),d=Utility.trim(u.find(".art_title").text()),o=u.find(".access-icon").length>0,l=u.find(".articleEntryAuthorsLinks").find("a").map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),w=u.find(".art_title a.ref").attr("href").replace("/doi/full/","").replace("/doi/abs/","");var m=(u.find(".art_title a.ref").attr("href").indexOf("http")>-1?"":i)+u.find(".art_title a.ref").attr("href"),g="";(f=m=m.split("#")[0].replace(/\/full\/|\/abs\//,"/pdf/")).match(/\/\d{7}/)&&(g=f.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),g=Utility.getIssnCheck(g)),c=m.replace("/doi/pdf/","/doi/abs/"),p=m.replace("/doi/pdf/","/doi/ref/"),h=i+"/action/downloadCitation?doi="+encodeURIComponent(w)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",_=Utility.trim(CwZ(".journalMetaTitle").text()),s=new Date(u.find("p:contains(Published online:):first").text().split("Published online:")[1]).getFullYear();var b=new CWMetaData({title:d,authors:l,identifier:w,identifierType:"doi",pubLink:c,issn:g,refLink:p,pdfLink:f,dataUrl:h,year:s,type:"ris",journal:_,listingPage:!0,openaccess:o});a.push(b);var Z=u.find(".showDownloadPopup,.cw-btnContainer");0==Z.length?/(tandfonlinecom|tandfqaliteratumonlinecom|tandftestliteratumonlinecom|tandfstagliteratumonlinecom)/.test(n)?Utility.filter(i,C,"informaworld")&&(u.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:r,inline:!0,class:" tandf-list tip_bm",buttonCB:function(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(n)){var i='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");u=u.find(".access");var d=CwZ(u).find(".pdf").eq(0).text(),o=CwZ(u).find(".pdf").get(0);i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(u).append(i),CwZ(u).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}else{var i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),d=CwZ(u).find(".pdf").text(),o=(CwZ(u).find(".pdf").index(),CwZ(u).find(".pdf"));i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(i).insertBefore(o),CwZ(u).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove();var l=u.find(".filesLinks");i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',d=CwZ(l).find(".firstEntryLink a").text(),o=CwZ(l).find(".firstEntryLink a"),i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(l).find(".firstEntryLink").append(i),CwZ(l).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}},metaData:b})),""==f&&u.find("a.cw-openPdfReader").hide(),u.find(".cw-btnContainer").data("metadata",b)):(u.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:r,inline:!0,class:" tandf-list tip_bm"})),""==f&&u.find("a.cw-openPdfReader").hide(),u.find(".cw-btnContainer").data("metadata",b)):0!=Z.length&&void 0===Z.data("metadata")&&Z.data("metadata",b)})}catch(e){Utility.log(e)}else if(t.isSearchingPage())try{var F=".bd";(A=t.webPageAsObject?parsedHtml.find(F):CwZ(F)).has('input[name="doi"]').each(function(r){var d="",o="",l="",s="",f="",c="",p="",w="",h="",u=CwZ(this),C=u.find("a.searchResultJournal").attr("href").replace("/toc/","").replace("/journal/","");0===(C=-1==C.lastIndexOf("/")?C:C.substr(0,C.lastIndexOf("/"))).indexOf("oa")&&(t.isCogent=!0),d=Utility.trim(u.find(".resultTitle a").text()),o=u.find(".accessmodule").hasClass("access_free"),l=u.find(".author a").map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),w=Utility.selectorAttributeGetter('input[name="doi"]',"value",u);var m=(CwZ(u).find(".pdf").attr("href").indexOf("http")>-1?"":i)+CwZ(u).find(".pdf").attr("href"),g="";(f=m=m.split("#")[0].replace("/abs/","/pdf/")).match(/\/\d{7}/)&&(g=f.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),g=Utility.getIssnCheck(g)),c=m.replace("/doi/pdf/","/doi/abs/"),p=m.replace("/doi/pdf/","/doi/ref/"),h=i+"/action/downloadCitation?doi="+encodeURIComponent(w)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data",_=Utility.trim(u.find("a.searchResultJournal").text()),s=new Date(u.find("p:contains(Published online:):first").text().split("Published online:")[1]).getFullYear();var b=new CWMetaData({title:d,authors:l,identifier:w,identifierType:"doi",pubLink:c,issn:g,refLink:p,pdfLink:f,dataUrl:h,year:s,type:"ris",journal:_,listingPage:!0,openaccess:o});a.push(b);var Z=u.find(".showDownloadPopup,.cw-btnContainer");0==Z.length?/(tandfonlinecom|tandfqaliteratumonlinecom|tandftestliteratumonlinecom|tandfstagliteratumonlinecom)/.test(n)?Utility.filter(i,C,"informaworld")&&(u.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:r,inline:!0,class:" tandf-list tip_bm",buttonCB:function(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a=navigator.userAgent.indexOf("MSIE")>0||t?"btns_bold_face-IE":"btns_bold_face";if(/cogentoa/.test(n)){var i='<a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0");u=u.find(".access");var d=CwZ(u).find(".pdf").eq(0).text(),o=CwZ(u).find(".pdf").get(0);i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(u).append(i),CwZ(u).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}else{var i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',r=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),d=CwZ(u).find(".pdf").text(),o=(CwZ(u).find(".pdf").index(),CwZ(u).find(".pdf"));i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(i).insertBefore(o),CwZ(u).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove();var l=u.find(".filesLinks");i='<div class="showDownloadPopup-detail'+a+'"><a class="showDownloadPopup" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',d=CwZ(l).find(".firstEntryLink a").text(),o=CwZ(l).find(".firstEntryLink a"),i=(i=i.replace("@@btntext@@",d)).replace("@@pdfLink@@",r),CwZ(l).find(".firstEntryLink").append(i),CwZ(l).find(".showDownloadPopup").data("metadata",e),CwZ(o).remove()}},metaData:b})),""==f&&u.find("a.cw-openPdfReader").hide(),u.find(".cw-btnContainer").data("metadata",b)):(u.find(".access:first .accessIconWrapper").before(e.addButton({pdfUrl:f,index:r,inline:!0,class:" tandf-list tip_bm"})),""==f&&u.find("a.cw-openPdfReader").hide(),u.find(".cw-btnContainer").data("metadata",b)):0!=Z.length&&void 0===Z.data("metadata")&&Z.data("metadata",b)})}catch(e){Utility.log(e)}else if(t.isListingPage())try{var _=Utility.trim(CwZ("h1.topArticleMetaTitle").text());(u=CwZ("#breadcrumb a:contains('List of Issues')").attr("href"))&&(u=u.replace("/loi/","")),0===u.indexOf("oa")&&(t.isCogent=!0);var A=CwZ(".article").has('input[name="doi"]').length>0?CwZ(".article").has('input[name="doi"]'):CwZ(".topArticleDisplay");A.each(function(t){var r="",d="",o="",l="",s="",f="",c="",p="",w=CwZ(this);d=w.find(".accessmodule").hasClass("access_free"),r=Utility.trim(w.find(".entryTitle h3").text())||Utility.trim(w.find(".entryTitle h4").text()),o=(w.find("h4 a").length>0?w.find("h4 a"):w.find(".entryAuthor")).map(function(){return Utility.trim(CwZ(this).text())}).get().join("; "),c=w.find('input[name="doi"]').length?Utility.selectorAttributeGetter('input[name="doi"]',"value",w):w.find("a.entryTitle").attr("href").replace(/.*doi\/full\/(.*)/,"$1");var h=(CwZ(w).find(".pdf").attr("href").indexOf("http")>-1?"":i)+CwZ(w).find(".pdf").attr("href"),C="";(l=h=h.split("#")[0].replace("/abs/","/pdf/")).match(/\/\d{7}/)&&(C=l.match(/\/\d{7}/)[0].replace(/[\/\.]/g,""),C=Utility.getIssnCheck(C)),s=h.replace("/doi/pdf/","/doi/abs/"),f=h.replace("/doi/pdf/","/doi/ref/"),p=i+"/action/downloadCitation?doi="+encodeURIComponent(c)+"&include=ref&direct=true&format=ris&submit=Download+article+citation+data";var m=new CWMetaData({title:r,authors:o,identifier:c,identifierType:"doi",pubLink:s,refLink:f,pdfLink:l,dataUrl:p,type:"ris",listingPage:!0,issn:C,journal:_,openaccess:d});a.push(m);var g=w.find(".showDownloadPopup,.cw-btnContainer");0==g.length?/(tandfonlinecom|tandfqaliteratumonlinecom|tandftestliteratumonlinecom|tandfstagliteratumonlinecom)/.test(n)?Utility.filter(i,u,"informaworld")&&(w.find(".access:first .accessIconWrapper ").before(e.addButton({pdfUrl:l,index:t,inline:!0,class:" tandf-list tip_bm",buttonCB:function(e){var t=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./),a='<div class="showDownloadPopup-detail'+(navigator.userAgent.indexOf("MSIE")>0||t?"btns_bold_face-IE":"btns_bold_face")+'"><a class="showDownloadPopup pdf" style="position:relative;" href="@@pdfLink@@">@@btntext@@</a></div>',i=e.pdfLink.replace("/pdf/","/abs/")+"#"+btoa(e.pdfLink+"@@@0"),n=CwZ(w).find(".pdf").text(),r=(CwZ(w).find(".pdf").index(),CwZ(w).find(".pdf"));a=(a=a.replace("@@btntext@@",n)).replace("@@pdfLink@@",i),CwZ(a).insertBefore(r),CwZ(w).find(".showDownloadPopup").data("metadata",e),CwZ(r).remove()},metaData:m})),""==l&&w.find("a.cw-openPdfReader").hide(),w.find(".cw-btnContainer").data("metadata",m)):(w.find(".access:first .accessIconWrapper ").before(e.addButton({pdfUrl:l,index:t,inline:!0,class:" tandf-list tip_bm"})),""==l&&w.find("a.cw-openPdfReader").hide(),w.find(".cw-btnContainer").data("metadata",m)):0!=g.length&&void 0===g.data("metadata")&&g.data("metadata",m)})}catch(e){Utility.log(e)}e.success(a)},insertClassInAuthorsLink:function(e){if(this.isPubPage()){var t=(self.webPageAsObject?parsedHtml.find("body"):CwZ("body")).find(".doiMeta span.hlFld-ContribAuthor");t.each(function(a){var i=CwZ(t[a]).find("a");e[0].authors[a]?i.attr("auid",e[0].authors[a].id):i.attr("auid",-1),i.attr("pubid",publisher.appId),i.attr("cw-autitle",i.text()),i.addClass("cw-showTip"),i.addClass("cw-authorLink")})}},getData:function(e){return Utility.getData(e)},extractHTML:function(e,t){try{var a="",i="",n="",r="",d="",o="",l="",s="",f="",c="",p="",w="",h="",u="",C="",m="",g="",b="",Z="",v="",y=(this.webPageAsObject?this.webPageAsObject.html.find(e.target):CwZ(e.target)).find("#journal_content #unit2");Z=Utility.trim(y.find(".gutter table tr:first td:first h2").text());var P=Utility.trim(y.find(".gutter table tr:first td:first h3").text());P=P.split(",");for(D=0;D<P.length;D++){var x=Utility.trim(P[D]).toLowerCase().split(" ");switch(x[0]){case"volume":w=x[1];break;case"issue":h=x[1];break;default:f=Utility.trim(P[D])}}for(var k=y.find(".doiMeta > a"),D=0;D<k.length;D++)Utility.trim(k[D].text)+" ; ";c=Utility.trim(y.find(".gutter .last").text());var L=y.find(".doiMeta > p").text();(L=L.split(" "))&&"2"==L.length&&(pages=L[1],C=pages.replace(/^([\d]+)-([\d]+)/,"$1"),m=pages.replace(/^([\d]+)-([\d]+)/,"$2"))}catch(e){Utility.log(e)}return{title:t.title,isedited:i,author:t.authors,series_name:r,publisher:d,keywords:o,handle:l,year:f,date:s,description:c,redif_type:p,volume:w,issue:h,number:u,page_start:C,page_end:m,edition:g,book_editor:b,book_title:Z,chapter:v,url:t.pubLink,placeofpublication:n,identifier:t.identifier,isbn:a,doi:"doi"==t.identifierType?t.identifier:""}},getSupplementalContent:function(){function e(){var e=CwZ.Deferred();if(CWParser_informaworld.isPbPubPage())CwZ(".figuresContent").length>0?e.resolve(CwZ(".figuresContent")):CwZ.get(CwZ(".show-figure").attr("href")).done(function(t){e.resolve(t)});else if(CwZ("#figuresTablesPanel").length>0)0==CwZ("#figuresTablesPanel").html().trim().length?CwZ.get(CwZ("#figuresTablesTab a").attr("href")).done(function(t){e.resolve(t)}):e.resolve(CwZ("#figuresTablesPanel"));else if(CWParser_informaworld.isSearchingPage()||CWParser_informaworld.isListingPage()){var t;t="undefined"!=typeof CWDataCenterClass?CWDataCenterClass.getInstance().pubSelected:CWDataCenter.pubSelected,CwZ.get(t.pdfLink.replace("/pdf/","/figure/")).done(function(t){e.resolve(t)}).fail(function(){e.resolve([])})}else e.resolve([]);return e.promise()}function t(e){return e.replace(/\(.*KB.*/g,"").replace(/\(.*MB.*/g,"").trim()}var a={},i=CwZ.Deferred();try{(function(){var e=CwZ.Deferred();if(CwZ("#supplementaryPanel").length>0)0==CwZ("#supplementaryPanel").html().trim().length?CwZ.get(CwZ("#supplementaryTab a").attr("href")).done(function(t){e.resolve(t)}):e.resolve(CwZ("#supplementaryPanel"));else if(CWParser_informaworld.isSearchingPage()||CWParser_informaworld.isListingPage()){var t;t="undefined"!=typeof CWDataCenterClass?CWDataCenterClass.getInstance().pubSelected:CWDataCenter.pubSelected,CwZ.get(t.pdfLink.replace("/pdf/","/suppl/")).done(function(t){e.resolve(t)}).fail(function(){e.resolve([])})}else e.resolve([]);return e.promise()})().done(function(n){(n=CwZ(n)).length>0&&(a.files={},n.find(".SupplDownload a").each(function(){var e=CwZ(this);if("#"!=e.attr("href"))try{var i=t(e.text().trim());if(a.files[i]){var n=/\((\d+)\)/g,r=n.exec(i);if(r&&r.length>0){var d=parseInt(r[1]);i=i.replace(n,"("+d+"1)")}else i+="(1)"}a.files[i]=e.attr("href")}catch(e){}})),e().done(function(e){if(e=CwZ(e),CWParser_informaworld.isPbPubPage()){if(e.find(".figuresContent .figure").length>0)var n=e.find(".figuresContent .figure"),r=e.find(".figuresContent .tableView");else var n=e.find(".figure"),r=e.find(".tableView");var d=1,o=1;suppCount=1,(n.length>0||r.length>0)&&(a.figures={}),CwZ(n).each(function(){var e=CwZ(this).find(".figureThumbnailContainer .figureDownloadOptions"),i=e.length,n=1;e.each(function(){var e=CwZ(this).find('a:contains("Original")');if("#"!=e.attr("href"))try{var r=e.text().trim(),o=t(r);if("PowerPoint slide"!==o){o="Figure "+d,i>1&&(o+="-"+n,n++);var l=r.match(/\(.*\)/g);l&&(o+=" "+l),a.figures[o]=e.attr("href")}}catch(e){}}),d++;CwZ(this).find('.figureDownloadOptions a:contains("Original")')}),CwZ(e).find(".figuresContent #supplementaryPanel .supplement-box").each(function(){var e=CwZ(this).find("a");if("#"!=e.attr("href"))try{var t=e.text().trim();a.figures[t]=e.attr("href")}catch(e){}}),CwZ(r).each(function(){try{var e=CwZ(this).find("a#CSVdownloadButton").attr("href");e&&(k="Table "+o,a.figures[k]=e),o++}catch(e){}})}else if(e.length>0){a.figures={};var d=1,o=1;e.find(".figureDownloadOptions a").each(function(){var e=CwZ(this);if("#"!=e.attr("href"))try{var i=e.text().trim(),n=t(i);if("PowerPoint slide"!==n){n="Figure "+d;var r=i.match(/\(.*\)/g);r&&(n+=" "+r),d++,a.figures[n]=e.attr("href")}}catch(e){}}),e.find(".tableDownloadOption a").each(function(){var e=CwZ(this);if(void 0!==e.attr("href")&&""!==e.attr("href")&&"#"!=e.attr("href"))try{var i=t(e.text().trim());"CSV"!==i&&"CSV"!==i&&("PDF"==i&&(i="Table "+o,o++),a.figures[i]=e.attr("href"))}catch(e){}})}i.resolve(a)})})}catch(e){i.reject(a)}return i.promise()},getDetails:function(){var e={};try{if(CWParser_informaworld.isPbPubPage()){"undefined"!=typeof CWDataCenter?i=CWDataCenter.pubSelected:"undefined"!=typeof CWDataCenterClass&&(i=CWDataCenterClass.getInstance().pubSelected);var t=CwZ("body");if(e.title=t.find(".literatumPublicationTitle h1 span.NLM_article-title.hlFld-title").text()||t.find(".literatumPublicationTitle h1 span").text()||t.find(".literatumPublicationTitle h1").text()||Base64.decode(i.title),e.title=e.title.trim(),e.authors=i.authors.replace(/;/g,","),i.listingPage)e.title=Base64.decode(i.title);else if(/cogentoa/.test(n=document.domain.replace(/[\.-]/g,"")))e.abs=CwZ("#abstract").next().text(),e.keywords="<ul class='keywords'>",CwZ(".articleKeywords li").each(function(){e.keywords+="<li>"+CwZ(this).find("a").parent().html().trim()+",</li>"}),e.keywords+="</ul>",e.keywords=CwZ(e.keywords.replace(/(.*),(.*)$/,"$1$2"));else{if(0!=CwZ(".abstractKeywords").find(".hlFld-KeywordText a").length){e.keywords="<ul class='keywords'>";var a=!1;CwZ(".abstractKeywords .hlFld-KeywordText").contents().each(function(t){(3===this.nodeType||CwZ(this).is("b"))&&(a=!!CwZ(this).text().match(/key\s?word/gi)),CwZ(this).is("a")&&a&&(CwZ(this).attr("target","_blank"),e.keywords+="<li>"+CwZ(this).prop("outerHTML"),CwZ(this).next().hasClass("comma")&&(e.keywords+=",&nbsp;"),e.keywords+="</li>")}),e.keywords+="</ul>",e.keywords=CwZ(e.keywords).find("li").length>0?CwZ(e.keywords):null}CwZ(".abstractSection").find(".MathJax").length>0||CwZ(".abstractSection").find(".MathJax_Preview").length>0?e.abs=Utility.removeMathJaxFromText(CwZ(".abstractSection").not(".summary-title")):e.abs=CwZ(".abstractSection").find('p:not(".summary-title")').map(function(){return CwZ(this).text()}).get().join("<br><br>")}}else{var i;if("undefined"!=typeof CWDataCenter?i=CWDataCenter.pubSelected:"undefined"!=typeof CWDataCenterClass&&(i=CWDataCenterClass.getInstance().pubSelected),e.title=CwZ(".description h1").text()||Base64.decode(i.title),e.authors=i.authors.replace(/;/g,","),i.listingPage)e.title=Base64.decode(i.title);else{var n=document.domain.replace(/[\.-]/g,"");if(/cogentoa/.test(n))e.abs=CwZ("#abstract").next().text(),e.keywords="<ul class='keywords'>",CwZ(".articleKeywords li").each(function(){CwZ(this).find("a").attr("target","_blank"),e.keywords+="<li>"+CwZ(this).find("a").parent().html().trim()+",</li>"}),e.keywords+="</ul>",e.keywords=CwZ(e.keywords.replace(/(.*),(.*)$/,"$1$2"));else{var r=CwZ(".abstract .bd .gutter");e.abs=r.find(".paragraph").text(),e.keywords=r.find(".keywords").clone(),e.keywords.find("a").each(function(e){CwZ(this).attr("target","_blank")})}}}}catch(e){}return e},insertRelatedPublications:function(e,t){var a=CwZ(e),i=CwZ(t),n="",r="";if(-1===e.indexOf("no-result-cw")&&-1===e.indexOf("no-result-cw")&&(a.each(function(){var e=CwZ(this);CwZ(e.find("a")[0]).attr("href",e.find(".viewArticle").attr("href")),CwZ(e.find("a")[0]).attr("target","_blank");var t=e.find(".year").text();t.match(/(18|19|20)\d{2}/g)&&e.find(".year").text(t.match(/(18|19|20)\d{2}/g)[0]);e.find(".title").text().length;n+="<li>"+e.html()+"</li>"}),i.each(function(e){var t=CwZ(this);CwZ(t.find("a")[0]).attr("href",t.find(".viewArticle").attr("href")),CwZ(t.find("a")[0]).attr("target","_blank");var a=t.find(".year").text();a.match(/(18|19|20)\d{2}/g)&&t.find(".year").text(a.match(/(18|19|20)\d{2}/g)[0]);t.find(".title").text().length;r+="<li>"+t.html()+"</li>"}),a.length>0||i.length>0)){var d='<div class="hlFld-Related cw-rec-wrapper"><h2>We Recommend</h2><div class="cw-list-column"><ul data-attr="cw-leftPanel">'+n+'</ul><ul data-attr="cw-rightPanel">'+r+'</ul><div class="cw-rec-footer"><span>Powered by</span><i class="cw-rec-logo"></i></div></div></div>';CwZ(".article").append(d),CwZ(".cw-rec-wrapper").find("h3.title").each(function(){var e=CwZ(CwZ(this)[0]),t=parseInt(e.css("line-height").replace("px",""));e.height()>2*t&&e.height(2*t),e.dotdotdot()}),CWDataCenterClass.getInstance().postToTracker("recPubsRendered"),CwZ(".cw-list-column ul li>a").off("click").on("click",function(e){var t=CwZ(this).attr("source");t&&CWDataCenterClass.getInstance().postToTracker(t)}),CwZ(document).on("scroll",function(){if(!CWPDFReader.recommendedViewed)try{var e=CwZ(window).height();CwZ(".cw-rec-wrapper")[0].getClientRects()[0].top<e&&(CWPDFReader.recommendedViewed=!0,CWDataCenterClass.getInstance().postToTracker("recPubsViewed"))}catch(e){}})}}};
//# sourceMappingURL=https://www.colwiz.com/sourcemaps/js/extraction/informaworld.js.map
