GrahamTechnology.ui.Button=function(b){GrahamTechnology.ui.AbstractComponent.call(this,b);if(navigator.userAgent.toLowerCase().indexOf("msie")>-1){var a=this.element();var d=GrahamTechnology.DOM.getElementsByTagAndClass(a,"img","natural");if(d&&d[0]){var c=GrahamTechnology.DOM.getElementsByTagAndClass(a,"span","text");if(c&&c.length>0&&c[0].innerHTML.length>0){GrahamTechnology.DOM.Element.setStyles(d,{top:"0px"})}GrahamTechnology.DOM.Element.setStyles(d,{left:"0px"})}}this._isValidImage=function(f,e){return !(GrahamTechnology.Base.isUndefinedOrNull(f)||GrahamTechnology.Base.isUndefinedOrNull(f[e])||f[e]=="")};this.isAlreadyShowingImage=function(e){var f=this.element();var g=null;if(this._isValidImage(this.images,e)){g="url("+this.images[e]+")"}else{return false}var h=f.style.backgroundImage;return h==g};this.showImage=function(l){var k=this.element();var f=GrahamTechnology.DOM.getElementsByTagAndClass(k,"span","text");var j=null;if(this._isValidImage(this.images,l)){var j=this.images[l]}if(j!=null){GrahamTechnology.DOM.Element.setStyles(k,{"background-image":"url("+j+")"});GrahamTechnology.DOM.Element.removeClass(k,"GTTextButton");GrahamTechnology.DOM.Element.addClass(k,"GTImageButton");var e=GrahamTechnology.DOM.getElementsByTagAndClass(k,"img","natural");if(e&&e[0]){e[0].src=j}}else{var g=k.style.backgroundColor;if(g==""){GrahamTechnology.DOM.Element.setStyles(k,{"background-image":""})}else{GrahamTechnology.DOM.Element.setStyles(k,{"background-image":"none"})}GrahamTechnology.DOM.Element.removeClass(k,"GTImageButton");GrahamTechnology.DOM.Element.addClass(k,"GTTextButton")}var h=null;if(this._isValidImage(this.icons,l)){var h=this.icons[l]}var m=null;var i=GrahamTechnology.DOM.getElementsByTagAndClass(k,"img","icon");if(i.length>0){m=i[0]}if(h!=null){if(m==null){m=document.createElement("img");GrahamTechnology.DOM.Element.addClass(m,"icon");m.alt="icon";if(this.valign>0){GrahamTechnology.DOM.Element.insertSiblingElementsAfter(m,f)}else{GrahamTechnology.DOM.Element.insertSiblingElementsBefore(m,f)}}m.src=h}else{if(m!=null){k.removeChild(m)}}};this.updateImage=function(f,g){var h=this.performBasePictureAction(g);if(GrahamTechnology.Base.isUndefinedOrNull(this.images)){this.images=new Array()}var e="";if(h.imageOriginalURI!=""){e=h.imageOriginalURI}else{if(h.imageURI!=""){e=h.imageURI}}this.images[f]=e;if(GrahamTechnology.Base.isUndefinedOrNull(this.icons)){this.icons=new Array()}this.icons[f]=h.imageIcon};this.enable=function(e){if((GrahamTechnology.Base.isUndefinedOrNull(e))){this.enabled=true}this.performEnabledAction("TRUE")};this.disable=function(e){if((GrahamTechnology.Base.isUndefinedOrNull(e))){this.enabled=false}this.performEnabledAction("FALSE")};this.performEnabledAction=function(g){var f=this.element();var e=GrahamTechnology.DOM.Element.hasClass(f,"GTHREFButton");if(g.equalsIgnoreCase("TRUE")){f.removeAttribute("disabled");if(e){this.removeGlass()}else{this.showImage(GrahamTechnology.ui.Button.PICTURE)}}else{GrahamTechnology.DOM.Element.setAttribute(f,"disabled","disabled");if(e){this.addHREFGlass()}else{this.showImage(GrahamTechnology.ui.Button.DISABLED_IMAGE)}}};this.addHREFGlass=function(){var f=GrahamTechnology.DOM.getElementById(this.id+"_GlassHolder");var e=f.parentNode;if(!GrahamTechnology.Base.isUndefinedOrNull(f)&&GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.DOM.getElementById(this.glassID))){var g=GrahamTechnology.DOM.createElement("div",{id:this.glassID,"class":"GTInvisibleGlass",style:{position:"absolute",left:0,top:0,right:0,height:e.offsetHeight+"px",zIndex:7000}});GrahamTechnology.DOM.appendChildElements(f,g)}};this.performBasePictureAction=function(m){var h="";var l=this.element();var e=GrahamTechnology.DOM.Element.getAttribute(l,"id");var k="";var i="";if(!GrahamTechnology.Base.isUndefinedOrNull(m)&&m!=""){h=GrahamTechnology.util.constructFullImageURL(m);var g=unescape(h);g=g.replaceAll("][","&");g=g.replaceAll("[","?");var j=g.indexOf("?");if(j>0){i=g.substring(0,g.indexOf("?"));if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.util.AJAXSessionProperties.logicalSessionID)){i+=g.substring(g.lastIndexOf("?"))}g=GrahamTechnology.util.parseQueryString(g);if(!GrahamTechnology.Base.isUndefinedOrNull(g.icon)){k=GrahamTechnology.util.constructFullImageURL(g.icon)}}}var f={imageIcon:k,imageOriginalURI:i,imageURI:h,imageButton:l,imageButtonID:e};return f};this.performVisibleAction=function(f){var e=this.element();if(f.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.setStyles(e,{visibility:"visible"});if(GrahamTechnology.util.Browsers.isFirefox()){GrahamTechnology.DOM.Element.setStyles(e,{display:"block"})}else{GrahamTechnology.DOM.Element.setStyles(e,{display:"inline-block"})}}else{GrahamTechnology.DOM.Element.setStyles(e,{visibility:"hidden"});GrahamTechnology.DOM.Element.setStyles(e,{display:"none"})}};this.performPictureAction=function(f){this.updateImage(GrahamTechnology.ui.Button.PICTURE,f);var e=this.element();if(!e.disabled){this.showImage(GrahamTechnology.ui.Button.PICTURE)}};this.performRolloverAction=function(e){this.updateImage(GrahamTechnology.ui.Button.ROLLOVER_IMAGE,e)};this.performClickedImageAction=function(e){this.updateImage(GrahamTechnology.ui.Button.CLICKED_IMAGE,e)};this.performDisabledImageAction=function(f){this.updateImage(GrahamTechnology.ui.Button.DISABLED_IMAGE,f);var e=this.element();if(e.disabled){this.showImage(GrahamTechnology.ui.Button.DISABLED_IMAGE)}};this.changeLabelText=function(f){var e=this.element();if(GrahamTechnology.DOM.Element.hasClass(e,"GTHREFButton")){e.innerHTML=f}else{var g=GrahamTechnology.DOM.getElementsByTagAndClass(e,"span","text");if(!GrahamTechnology.Base.isUndefinedOrNull(g)&&g.length!=0){g[0].innerHTML=f}}};this.changeAccessKey=function(i){if(GrahamTechnology.Base.isUndefinedOrNull(i)){return}var g=i.toLowerCase();var f=this.element();GrahamTechnology.DOM.Element.setAttribute(f,"accesskey",g);var e="";if(GrahamTechnology.DOM.Element.hasClass(f,"GTHREFButton")){e=f.innerHTML;f.innerHTML=this.setMnemonicLabel(e,g)}else{var h=GrahamTechnology.DOM.getElementsByTagAndClass(f,"span","text");if(!GrahamTechnology.Base.isUndefinedOrNull(h)&&h.length!=0){e=h[0].innerHTML;h[0].innerHTML=this.setMnemonicLabel(e,g)}}};this.setMnemonicLabel=function(e,h){var g=e;g=g.replace(/(<([^>]+)>)/ig,"");var f=g.toLowerCase().indexOf(h);if(f==-1){return e}g=g.substring(0,f)+"<span style='text-decoration:underline;'>"+g.charAt(f)+"</span>"+g.substring(f+1);return g}};GrahamTechnology.ui.Button.prototype=new GrahamTechnology.ui.AbstractComponent;GrahamTechnology.ui.Button.PICTURE=0;GrahamTechnology.ui.Button.ROLLOVER_IMAGE=1;GrahamTechnology.ui.Button.CLICKED_IMAGE=2;GrahamTechnology.ui.Button.DISABLED_IMAGE=3;GrahamTechnology.ui.Button.getImageFieldName=function(b,c){if(b==null){logger.log("buttonID provided was null","error","Button.getImageFieldName");return null}var a=null;switch(c){case this.PICTURE:a=b+"_PICTURE";break;case this.ROLLOVER_IMAGE:a=b+"_ROLLOVER_IMAGE";break;case this.CLICKED_IMAGE:a=b+"_CLICKED_IMAGE";break;case this.DISABLED_IMAGE:a=b+"_DISABLED_IMAGE";break}return a};