/**
 * Video Background Pro
 * Copyright 2017 Blake Wilson and Push Labs
 * @license Push Labs Standard license
 * @link https://pushlabs.co/video-background-pro
 * @preserve
 */
!function($){$.vidbg=function(o,t){function e(o){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;o=o.replace(t,function(o,t,e,n){return t+t+e+e+n+n});var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function n(o){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,e=o.match(t);return!(!e||11!=e[7].length)&&e[7]}function i(){var o=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return"vidbg-ref-"+(o()+o())+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o()}var s=this,a="Not implemented";s.$el=$(o),s.el=o,s.$el.data("vidbg",s),s.init=function(){s.options=$.extend({},$.vidbg.defaultOptions,t),s.container(),s.displayPoster(),s.selfHostVideo(),s.overlay(),s.loader()},s.isMobile=function(){return!!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)},s.container=function(){var o=s.$container=$('<div class="vidbg-container">'),t=s.uniqueRef=i(),e=s.$iframeHolder=$('<div class="vidbgYT" id="'+t+'">'),n=s.$endFrame=$('<div class="vidbg-end-frame">');"static"===s.$el.css("position")&&s.$el.css("position","relative"),s.$el.css("z-index","1"),$(s.$el).prepend(o),!0===s.options.endFramePoster&&"#"!==s.options.poster&&!1===s.isMobile()&&(n.css("background-image","url("+s.options.poster+")"),o.prepend(n)),"youtube"===s.options.type&&o.prepend(e),s.$el.is("body")&&o.css({position:"fixed"})},s.overlay=function(){var o=s.$container,t=s.$overlay=$('<div class="vidbg-overlay">');!0===s.options.overlay&&t.css({background:"rgba("+e(s.options.overlayColor).r+", "+e(s.options.overlayColor).g+", "+e(s.options.overlayColor).b+", "+s.options.overlayAlpha+")"}),"#"!==s.options.overlayTexture&&!0===s.options.overlay&&t.css({background:"url("+s.options.overlayTexture+")"}),o.append(t)},s.displayPoster=function(){var o=s.$container;"#"!==s.options.poster&&(!0===s.isMobile()?o.css("background-image","url("+s.options.poster+")"):("self-host"===s.options.type&&"#"===s.options.mp4&&"#"===s.options.webm&&o.css("background-image","url("+s.options.poster+")"),"youtube"===s.options.type&&"#"===s.options.youtubeLink&&o.css("background-image","url("+s.options.poster+")")))},s.selfHostVideo=function(){if(!0!==s.isMobile()&&"youtube"!==s.options.type){var o=s.$container,t=s.$selfHostVideo=$('<video playsinline><source src="'+s.options.mp4+'" type="video/mp4"><source src="'+s.options.webm+'" type="video/webm"></video>');try{t.prop({autoplay:!0,loop:s.options.repeat,volume:1,muted:s.options.mute,defaultMuted:s.options.mute,playbackRate:1,defaultPlaybackRate:1})}catch(o){throw new Error("Not implemented")}t.one("canplaythrough.vidbg",function(){s.resize()}),s.frontOptions(),t.one("playing.vidbg",function(){t.css({visibility:"visible",opacity:1}),!0===s.options.enableLoader&&s.$loader.css({visibility:"hidden",opacity:0}),!0!==s.options.frontPlay&&!0!==s.options.frontMute||s.$frontContainer.css("opacity",1)}),t.on("playing.vidbg",function(){!0===s.options.endFramePoster&&"#"!==s.options.poster&&s.$endFrame.css("opacity",0)}),o.append(t),!1===s.options.repeat&&t.on("ended.vidbg",function(){!0===s.options.frontPlay&&(s.$frontPlayButtonAnchor.removeClass("vidbg-toggle-pause"),s.$frontPlayButtonAnchor.addClass("vidbg-toggle-play")),!0===s.options.endFramePoster&&"#"!==s.options.poster&&($("#"+s.uniqueRef).hide(),s.$endFrame.css("opacity",1))})}},s.onYouTubePlayer=function(){var o=s.uniqueRef,t=s.YTPlayerDefaults={autoplay:0,autohide:0,modestbranding:0,rel:0,loop:1,showinfo:0,controls:0,disablekb:0,enablejsapi:0,iv_load_policy:3},e=s.theYTPlayer=new YT.Player(o,{events:{onReady:s.onPlayerReady,onStateChange:s.onPlayerStateChange},playerVars:t});s.resize()},s.onPlayerReady=function(o){var t=s.options.youtubeStart,e=s.options.youtubeEnd;s.theYTPlayer.loadVideoById({videoId:n(s.options.youtubeLink),suggestedQuality:"hd720",startSeconds:t,endSeconds:e}),!0===s.options.mute&&s.theYTPlayer.mute(),s.frontOptions()},s.onPlayerStateChange=function(o){var t=s.theYTPlayer;1===o.data&&(s.options.enableLoader&&s.$loader.css({visibility:"hidden",opacity:0}),!0===s.options.endFramePoster&&"#"!==s.options.poster&&($("#"+s.uniqueRef).show(),s.$endFrame.css("opacity",0)),!0!==s.options.frontPlay&&!0!==s.options.frontMute||s.$frontContainer.css("opacity",1)),0===o.data&&(!0===s.options.repeat?t.seekTo(s.options.youtubeStart):(t.pauseVideo(),t.seekTo(s.options.youtubeStart),!0===s.options.endFramePoster&&"#"!==s.options.poster&&($("#"+s.uniqueRef).hide(),s.$endFrame.css("opacity",1)),!0===s.options.frontPlay&&(s.$frontPlayButtonAnchor.removeClass("vidbg-toggle-pause"),s.$frontPlayButtonAnchor.addClass("vidbg-toggle-play")))),myPlayerState=o.data},s.resize=function(){if(!0!==s.isMobile()){var o=s.$container,t=s.uniqueRef,e=o.outerHeight(),n=o.outerWidth(),i=16/9,a;"self-host"===s.options.type?a=s.$selfHostVideo:"youtube"===s.options.type&&(a=$("#"+t));var r,l;"self-host"===s.options.type?(r=a[0].videoHeight,l=a[0].videoWidth):"youtube"===s.options.type&&(o=s.$el,r=Math.ceil(n/(16/9)),l=Math.ceil(e*(16/9))),"self-host"===s.options.type?n/l>e/r?a.css({width:n+2,height:"auto"}):a.css({width:"auto",height:e+2}):"youtube"===s.options.type&&(n/(16/9)<e?a.outerWidth(l).outerHeight(e).css({left:(n-l)/2,top:0}):a.outerWidth(n).outerHeight(r).css({left:0,top:(e-r)/2}))}},s.frontOptions=function(){if(!0!==s.isMobile()&&(!1!==s.options.frontPlay||!1!==s.options.frontMute)&&!("self-host"===s.options.type&&"#"===s.options.mp4&&"#"===s.options.webm||"youtube"===s.options.type&&"#"===s.options.youtubeLink)){var o=s.$frontContainer=$('<ul class="vidbg-frontend-buttons">');s.$el.append(o),$.inArray(s.options.frontPosition,["top-right","bottom-right","bottom-left","top-left"])>=0&&o.addClass(s.options.frontPosition),s.frontOptionPlay(),s.frontOptionMute()}},s.frontOptionPlay=function(){if(!1!==s.options.frontPlay){var o;"self-host"===s.options.type?o=s.$selfHostVideo:"youtube"===s.options.type&&(o=s.theYTPlayer);var t=s.$frontContainer,e=s.$frontPlayButton=$('<li class="vidbg-frontend-button vidbg-play-button">'),n=s.$frontPlayButtonAnchor=$('<a class="vidbg-toggle-pause">'),i,a=s.options.type;t.append(e),e.append(n),e.on("click",function(t){t.preventDefault(),"self-host"===a?i=!0===o[0].paused?"playing":"paused":"youtube"===a&&(i=2===myPlayerState?"playing":"paused"),"paused"===i?("self-host"===a&&o[0].pause(),"youtube"===a&&o.pauseVideo(),!0===s.options.frontPlay&&(n.removeClass("vidbg-toggle-pause"),n.addClass("vidbg-toggle-play"))):"playing"===i&&("self-host"===a&&o[0].play(),"youtube"===a&&o.playVideo(),!0===s.options.frontPlay&&(n.removeClass("vidbg-toggle-play"),n.addClass("vidbg-toggle-pause")))})}},s.frontOptionMute=function(){if(!1!==s.options.frontMute){var o;"self-host"===s.options.type?o=s.$selfHostVideo:"youtube"===s.options.type&&(o=s.theYTPlayer);var t;t=!0===s.options.mute?"mute":"unmute";var e=s.$frontContainer,n=s.$frontMuteButton=$('<li class="vidbg-frontend-button vidbg-mute-button">'),i=s.$frontMuteButtonAnchor=$('<a class="vidbg-toggle-'+t+'">'),a=s.options.type;e.append(n),n.append(i),n.on("click",function(e){e.preventDefault(),"self-host"===a?t=o.prop("muted")?"mute":"unmute":"youtube"===a&&(t=!0===o.isMuted()?"mute":"unmute"),"mute"===t?("self-host"===a&&o.prop("muted",!1),"youtube"===a&&o.unMute(),!0===s.options.frontMute&&(i.removeClass("vidbg-toggle-mute"),i.addClass("vidbg-toggle-unmute"))):"unmute"===t&&("self-host"===a&&o.prop("muted",!0),"youtube"===a&&o.mute(),!0===s.options.frontMute&&(i.removeClass("vidbg-toggle-unmute"),i.addClass("vidbg-toggle-mute")))})}},s.loader=function(){if(!0!==s.isMobile()&&!1!==s.options.enableLoader){var o=s.$container,t=s.$loader=$('<div class="vidbg-loader"><div class="vidbg-loader-animation"></div></div>');o.append(t)}},s.init()},$.vidbg.defaultOptions={type:"self-host",youtubeLink:"#",youtubeStart:0,youtubeEnd:null,mp4:"#",webm:"#",poster:"#",endFramePoster:!1,mute:!0,repeat:!0,overlay:!1,overlayColor:"#000",overlayAlpha:"0.3",overlayTexture:"#",frontPlay:!1,frontMute:!1,frontPosition:"bottom-right",enableLoader:!1},$.vidbg.instanceCollection={instance:[]},$.fn.vidbg=function(o){return this.each(function(){var t=$.data(this,"vidbg");t=new $.vidbg(this,o),t.index=$.vidbg.instanceCollection.instance.push(t)-1,$.data(this,"vidbg",t)})},$(document).ready(function(){$(window).on("resize.vidbg",function(){for(var o=$.vidbg.instanceCollection.instance.length,t=0,e;t<o;t++)(e=$.vidbg.instanceCollection.instance[t])&&e.resize()}),function(){for(var o=0,t=$.vidbg.instanceCollection.instance.length,e=0,n;e<t;e++)(n=$.vidbg.instanceCollection.instance[e])&&"youtube"===n.options.type&&o++;if(o>=1){var i=document.createElement("script");i.src="//www.youtube.com/iframe_api";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(i,s)}o>=1&&(window.onYouTubePlayerAPIReady=function(){for(var o=$.vidbg.instanceCollection.instance.length,t=0,e;t<o;t++)(e=$.vidbg.instanceCollection.instance[t])&&"youtube"===e.options.type&&!navigator.userAgent.match(/(Android|iPod|iPhone|iPad|BlackBerry|IEMobile|Opera Mini)/)&&e.onYouTubePlayer()})}()})}(jQuery);