"use strict";!function(e,t){window._pxam=window._pxam||[];var i=e(".slideshow-background"),n=function m(e,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;n&&t.dataLayer.page.attributes.promotions&&t.dataLayer.page.attributes.promotions.hasOwnProperty(n)?t.pushToGtmDataLayer(_.extend(t.dataLayer.page.attributes.promotions[n],a(e,i,n,o,r))):n&&setTimeout(function(){m(e,i,n,o,r)},500)},a=function(e,t,i,n,a){var o=e.closest("[data-widget-id]"),r=o.find("[data-promo-id='"+i+"']");return{event:"specialsEvent",specialCta:"promotion"===n?void 0:n,specialCtaType:"promotion"===a?void 0:a,specialId:i,specialEvent:t,specialLocationX:r.offset().left,specialLocationY:r.offset().top,specialSlidePosition:r.data("slickIndex")+1||void 0,specialPlacementType:r.hasClass("promotion-details-content")?"details":"slideshow",specialTrim:e.data("trimName")}},o=function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;return t.isComposer?!1:void e(document).trigger("trackEvent",[{widgetName:"slideshow-background: "+i.data("widget-id"),eventName:n.toLowerCase().replace("_"," "),data:a,noninteraction:o}])},r=function(e,i,n,a){return t.isComposer?!1:void window._pxam.push({type:"event",eventType:e,description:n,contentId:i,contentType:a})},s=function(e,t,i,a,s){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!1,l="PROMO_CLICK"==t?"click":t;n(e,l,i,a,s),o(t,a),d!==!1&&(t="click"==t?"SLIDE_CLICK":t,r(t,i,a,s))},d=function(e,t,i,a){t.viewedSlides||(t.viewedSlides=[]);var s=i?i.replace("slide-",""):"";if(-1==t.viewedSlides.indexOf(s)){var d=a?"PROMO_VIEW":"SLIDE_VIEW",l=a?"PROMO_SLIDE":"SLIDE";t.viewedSlides.push(s),o(d,"",!0),r(d,s,"",l),n(e,"impression",a)}},l=function(e,t){var i=t||"_self";window.setTimeout(function(){window.open(e,i)},100)},c=function(i,n){if(!t.client.isMobile){var a=.165*n||.165*e(i).height(),o=e(i).find(".promotion-container").css("font-size");a=Math.ceil(a),o&&a<o.replace("px","")&&e(i).find(".promotion-container").css("font-size",a)}},u=function(e,i){if(!t.client.isMobile){var n=i||e.height();e.find(".slide, .slide-background").height(n)}},f=function(t){var i=e(t).find(".placeholder-image"),n=e(t).find(".slide-background"),a=function(e){n.width(e)};i.on("load",function(t){e(t.currentTarget).addClass("image-loaded"),a(t.currentTarget.width)}),i.hasClass("image-loaded")&&a(i.width())},g=function(t,i,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;e(i).each(function(e,i){t&&f(t,i),a&&c(i,n)})},p=function(i){i.each(function(i,n){e(n)[0].hasAttribute("data-url-href")&&e(n).on("click",function(i){e(i.target).is("div")&&t.redirect(e(n).attr("data-url-href"))})})},v=function(){i.each(function(i,n){var a=e(n),o=a.find(".slide-container"),r=a.find(".slide"),c=a.find(".promo-slide"),f=a.find(".html-slide"),v=a.find(".slideControls"),m=v.find(".pager a"),h=v.find(".play"),k=h.attr("data-label-pause"),w=h.attr("data-label-resume"),C=v.find(".next"),y=v.find(".prev"),P=r.find(".btn"),b=r.find(".promo-text-link"),L=r.find(".promo-inventory-link"),S=e.getDataAttributes(o),I=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0,O={autoplay:S.autoPlay,autoplaySpeed:1e3*S.delay,arrows:S.showControls,fade:"fade"==S.transition,lazyLoad:"progressive",speed:1e3*S.interval,prevArrow:y,nextArrow:C,adaptiveHeight:t.client.isMobile};o.on("init",function(){u(a,S.height),g(I,f,S.height,!0),v.fadeIn("fast");var i=o.find(".slick-active"),n=i.data("promo-id");e.subscribe("ddc-event-tracking-ready",function(){d(a,o,i.attr("id"),n)}),b.on("click",function(i){var n=e(i.target).parents().closest(".promo-slide").data("promo-id"),r=function(){e(".promo-extra-details a").on("click",function(t){s(e(t.target),"PROMO_CLICK",n,"trim listing","link",!0)})};s(a,"PROMO_CLICK",n,"details","dialog",!0),o.slick("slickPause"),t.client.isMobile?(e(document).on("slideOpen",function(){r()}),S.autoPlay&&e(document).on("slideClose",function(){o.slick("slickPlay")})):e(document).on("ajaxDialogComplete",function(i,n,a){r(),S.autoPlay&&e(t.dialogs[a]).on("dialogclose",function(){o.slick("slickPlay")})})}),L.on("click",function(t){var i=e(t.target).attr("href"),n=e(t.target).attr("target"),o=e(t.target).parents().closest(".promo-slide").data("promo-id");s(a,"PROMO_CLICK",o,"inventory","button",!0),l(i,n),t.preventDefault()})}),p(c),e(window).on("resize",function(){u(a,S.height),g(I,f,S.height)}),t.client.isMobile&&r.length>1&&e(window).on("orientationchange",function(){var e=o.slick("slickCurrentSlide");o.slick("unslick").slick(O).slick("slickGoTo",e)}),S.pager&&(m.on("click",function(t){var i=e(t.target).data("index");o.slick("slickGoTo",i),h.removeClass("paused"),s(a,"Pager: Jump to slide "+(i+1),!1),t.preventDefault()}),o.on("afterChange",function(t,i){m.removeClass("activeSlide"),e(m[i.currentSlide]).addClass("activeSlide")})),S.showPause&&(h.on("click",function(t){var i=e(t.target),n=i.hasClass("paused"),r=function(e){i.find("span").text(e).end().toggleClass("paused")};n?(o.slick("slickPlay"),r(k),s(a,"Play",!1)):(o.slick("slickPause"),r(w),s(a,"Pause",!1)),t.preventDefault()}),o.on("beforeChange",function(){h.removeClass("paused")})),y.on("click",function(e){s(a,"Previous Slide",!1),e.preventDefault()}),C.on("click",function(e){s(a,"Next Slide",!1),e.preventDefault(e)}),o.on("swipe",function(e,t){var i=0,n=1;t.currentDirection==i?s(a,"Next Slide",!1):t.currentDirection==n&&s(a,"Previous Slide",!1)}),P.on("click",function(t){{var i=e(t.target).closest(".slide"),n=i.data("promo-id");i[0].id.replace("slide-","")}if(!n){var o=e(t.target).attr("href"),r=e(t.target).attr("target");s(a,"click",i.attr("id").replace("slide-",""),o,"Button",!0),l(o,r)}}),o.on("click",function(t){if(!t.target.href){var i=o.slick("slickCurrentSlide")+1,n=e(t.target).closest(".slide"),r=n.data("label"),d=n.data("link"),c=n.data("target")||"_self",u=n.data("promo-id"),f=u?"PROMO_CLICK":"SLIDE_CLICK";if(dataLayer.push({event:"ddc.slideshow.click",eventData:{type:"html",position:i,name:r}}),d){var g=d,p=n[0].id,v=void 0;p&&(v=p.replace("slide-","")),s(a,f,v,g,"SLIDE",!0),l(d,c)}}}),o.on("afterChange",function(){var t=e(this).find(".slick-active")[0],i=t.getAttribute("data-promo-id");t.id&&d(a,o,t.id,i)}),o.slick(O)})};e(document).ready(function(){v()})}(jQuery,window.DDC);