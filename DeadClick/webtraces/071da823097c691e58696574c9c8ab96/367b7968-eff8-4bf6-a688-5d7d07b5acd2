var CWUtilsClass=function(){function d(){this.isIframe=window!==window.parent;this.bParserTest=!1;this.browser={adobeAir:!1,ie:!1,ie9:!1,ie8:!1,ie7:!1,ie6:!1,chrome:!1,firefox:!1,opera:!1,safari:!1};this.sentry={};this.ajax={post:function(a,b,c,e){void 0===c&&(c=function(){});void 0===e&&(e=function(){});void 0===b&&(b={});CwZ.ajax({url:a,type:"POST",dataType:"text",data:b,success:c,error:e})},get:function(a,b,c,e){void 0===c&&(c=function(){});void 0===e&&(e=function(){});void 0===b&&(b={});CwZ.ajax({url:a,
type:"GET",dataType:"text",data:b,success:c,error:e})}}}d.prototype.removeTags=function(a){return a.replace(RegExp("(\\[(CSA|CrossRef|PubMed|Web of Science \u00ae|Taylor & Francis Online|Google Scholar)\\],?)","g"),"")};d.prototype.matchDoi=function(a){return a?(a=a.match(/\b(10[.][0-9]{4,}(?:[.][0-9]+)*\/(?:\S)+)/g))?a[0]:null:null};d.prototype.findDoi=function(a,b,c){a=CwZ(a).find("."+b).text();!a&&c&&(a=c);return CWUtils.matchDoi(a)};d.prototype.isValidURL=function(a){return/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(a)?
!0:!1};d.prototype.getPageUrl=function(){return window.parent.location.href};d.prototype.getPageDomain=function(){var a=window.parent.location;return a.protocol+"//"+a.host};d.prototype.getDomainFromURL=function(a){a=a.replace(/^(.*\/\/)(.*?)(\/.*)$/,"$2");var b=/(.*?)(\w+)(\.[a-z]{2,3})(\.[a-z]{2})?$/;a.replace(b,"$1").replace(/\./g,"");return a=a.replace(b,"$2")};d.prototype.getQueryParam=function(a,b){void 0==b&&(b=location.search);a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=(new RegExp("[\\?&]"+
a+"=([^&#]*)")).exec(b);return null==c?"":decodeURIComponent(c[1].replace(/\+/g," "))};d.prototype.getFileTitle=function(a){var b=a.pdfLink,c=b.indexOf("#"),e=b.indexOf("?"),c=Math.min(0<c?c:b.length,0<e?e:b.length),b=b.substring(b.lastIndexOf("/",c)+1,c),c="";""!=a.identifier&&("number"==typeof a.identifier&&(a.identifier=a.identifier.toString()),c=a.identifier.replace(/[\\\/:\*\?\"<>|]/g,""));a="";a=0<=c.indexOf(b)?c:c+"_"+b;180<a.length&&(a=a.substr(0,180));return 0<=a.toLowerCase().indexOf(".pdf")?
a:a+".pdf"};d.prototype.updateScrollbar=function(a,b){CwZ(a).each(function(){var a=CwZ(this),e=!1;a.is(":visible")||(e=!0,a.show());e&&a.hide();b&&b(a)})};d.prototype.getEditDistance=function(a,b){if(0===a.length)return b.length;if(0===b.length)return a.length;var c=[],e;for(e=0;e<=b.length;e++)c[e]=[e];var f;for(f=0;f<=a.length;f++)c[0][f]=f;for(e=1;e<=b.length;e++)for(f=1;f<=a.length;f++)b.charAt(e-1)==a.charAt(f-1)?c[e][f]=c[e-1][f-1]:c[e][f]=Math.min(c[e-1][f-1]+1,Math.min(c[e][f-1]+1,c[e-1][f]+
1));return c[b.length][a.length]};d.prototype.moveScrollbarTo=function(a,b,c,e){void 0==c&&(c=!0);CwZ(a).each(function(){var a=CwZ(this);c?a.animate({scrollTop:b},400):a.scrollTop(parseInt(b))})};d.prototype.copyToClipboard=function(a){var b="INPUT"===a.tagName||"TEXTAREA"===a.tagName,c,e,f;b?(f=a,c=a.selectionStart,e=a.selectionEnd):(f=document.getElementById("_hiddenCopyText_"),f||(f=document.createElement("textarea"),f.style.position="absolute",f.style.left="-10000px",f.id="_hiddenCopyText_",CwZ(a).append(f)),
f.textContent=a.textContent);var d=document.activeElement;f.focus();f.setSelectionRange(0,f.value.length);var g;try{g=document.execCommand("copy")}catch(k){g=!1}d&&"function"===typeof d.focus&&d.focus();b?a.setSelectionRange(c,e):f.textContent="";return g};d.prototype.increaseProgress=function(){function a(){setTimeout(function(){if(CwZ("#cw-loader").is(":visible")){var b=CwZ("#cw-loader .cw-bar").width()/CwZ(".cw-progress").width()*100;CwZ("#cw-loader .cw-redirecting").hasClass("cw-hidden")&&("undefined"!==
typeof CWPDFReader_Publisher&&!CWPDFReader_Publisher.getInstance().progressComplete||"undefined"!==typeof CWPDFReader&&!CWPDFReader.progressComplete)&&(50>b?(CwZ(".cw-progress").addClass("cw-shine"),b+=12.5):75>b?b+=6.25:99>b+3?b+=3:99<b+3&&100!=b&&(b=99),CwZ("#cw-loader .cw-bar").width(b+"%"),CWUtils.log("progress: "+b),99>b&&a());90<b&&CWPDFReaderConfig.readerMode==CWPDFReaderMode.Webimporter&&CwZ("#bmkApp").addClass("minimize")}else CwZ("#cw-loader .cw-bar").width("0%")},1E3)}a()};d.prototype.moveScrollbarToXY=
function(a,b,c){CwZ(a).each(function(){var a=CwZ(this),f=a.scrollTop(),d=a.scrollLeft();a.scrollTop(f+-1*c,60);a.scrollLeft(d+-1*b,60)})};d.prototype.convertStrToBlob=function(a){var b;try{b=new Blob([a])}catch(c){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,b=new BlobBuilder,b.append(a),b=b.getBlob()}return b};d.prototype.log=function(a){a="object"==typeof a?a.message:a;CWPDFReaderConfig.debug&&(this.browser.ie7&&(this.browser.ie8||this.browser.webkit)?console.log("log:"+
a):console.info(a))};d.prototype.generateEntLinks=function(a,b,c,e){"undefined"==typeof e&&(e=!0);if("undefined"==typeof c||""==c)c=parseInt(a,16).toString().substring(0,3);c=function(a){switch(a){case "100":case "101":return"/profile";case "109":return"/publication";case "110":return"/publisher";case "111":return"/institute";case "161":return"/group";case "163":return"/journal";case "199":return"/author";default:return""}}(c);""==b.trim()&&(b=c.substring(1));e&&(c="/public"+c);return c+"/"+a+"/"+
encodeURIComponent(b.toLowerCase().substring(0,500).trim().replace(/\s+/g,"_"))};d.prototype.getAvatarColor=function(a){try{var b="#626be0 #e06277 #b467da #e09862 #1abc9c #f44336 #3498db #673ab7 #34495e #8bc24a #27ae60 #2980b9 #8e44ad #6c3244 #f1c40f #2266e6 #e74c3c #50e3c2 #4498ae #f39c12 #2c5e1c #ea1e63 #62b6e0 #484d9c".split(" "),c=" A B C D E F G H I J K L M N O P Q R S T U V W X Y Z".split(" "),e=c.slice();e.shift();var f="";c.forEach(function(c,d){e.forEach(function(e,d){a==c+e&&(f=b[d%b.length])})});
return f}catch(d){return"#000000"}};d.prototype.trim=function(a){if(null==a||void 0===a)a="";return CwZ.trim(a)};d.prototype.stripTags=function(a){return a=a.replace(/(<([^>]+)>)/ig,"")};d.prototype.timeDifference=function(a,b,c){void 0==b&&(b="Updated ");void 0==c&&(c="");a=new Date(a);var e=((new Date).getTime()-a.getTime())/1E3,d=Math.round(e/60),h=Math.round(d/60),g=Math.round(h/24),e=Math.round(e),d=Math.round(d),h=Math.round(h),g=Math.round(g);b=0<g?7<g?b+("JanFebMarAprMayJunJulAugSepOctNovDec".substr(3*
a.getMonth(),3)+" "+a.getDate()+", "+a.getFullYear()):b+(g+" day"+(1<g?"s":"")+" ago"):0<h?b+(h+" hour"+(1<h?"s":"")+" ago"):0<d?b+(d+" minute"+(1<d?"s":"")+" ago"):10>e?b+"Few secs ago":b+(e+" sec"+(1<e?"s":"")+" ago");return b+c};d.prototype.Compare=function(a,b){return a<=b+2&&a>=b-2};d.prototype.utf16to8=function(a){var b,c,e,d;b="";e=a.length;for(c=0;c<e;c++)d=a.charCodeAt(c),1<=d&&127>=d?b+=a.charAt(c):(2047<d?(b+=String.fromCharCode(224|d>>12&15),b+=String.fromCharCode(128|d>>6&63)):b+=String.fromCharCode(192|
d>>6&31),b+=String.fromCharCode(128|d>>0&63));return b};d.prototype.utf8to16=function(a){var b,c,e,d,h,g;b="";e=a.length;for(c=0;c<e;)switch(d=a.charCodeAt(c++),d>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:b+=a.charAt(c-1);break;case 12:case 13:h=a.charCodeAt(c++);b+=String.fromCharCode((d&31)<<6|h&63);break;case 14:h=a.charCodeAt(c++),g=a.charCodeAt(c++),b+=String.fromCharCode((d&15)<<12|(h&63)<<6|(g&63)<<0)}return b};d.prototype.stringToByteArray=function(a){var b=new (void 0!==
window.Uint8Array?Uint8Array:Array)(a.length),c,d;c=0;for(d=a.length;c<d;++c)b[c]=a.charCodeAt(c)&255;return b};d.prototype.decompress=function(a){a=a.replace(/\n/g,"");a=a.replace(/ \/ /g,"/");a=atob(a);a=a.split("").map(function(a){return a.charCodeAt(0)});a=(new Zlib.Gunzip(a)).decompress();for(var b=[],c=0;c<a.byteLength;c++)b.push(String.fromCharCode(a[c]));return b=CWUtils.utf8to16(b.join(""))};d.prototype.compress=function(a){a=CWUtils.stringToByteArray(CWUtils.utf16to8(a));a=(new Zlib.Gzip(a)).compress();
for(var b="",c=0;c<a.byteLength;c++)b+=String.fromCharCode(a[c]);b=btoa(b);return CWUtils.insertBN(b)};d.prototype.insertBN=function(a){for(var b="";0<a.length;){var c=a.slice(0,76),b=b+c;76===c.length&&(b+="\n");a=a.replace(c,"")}return b};d.prototype.writeCookie=function(a,b,c){var d="";c&&(d=new Date,d.setTime(d.getTime()+864E5*c),d="; expires="+d.toGMTString());document.cookie=a+"="+b+d+"; path=/"};d.prototype.readCookie=function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c++){for(var d=
b[c];" "==d.charAt(0);)d=d.substring(1,d.length);if(0==d.indexOf(a))return d.substring(a.length,d.length)}return null};d.prototype.deleteCookie=function(a){this.writeCookie(a,"",-1)};return d}(),Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){try{var a="",b=void 0,c=void 0,e=void 0,f=void 0,h=void 0,g=void 0,k=void 0,l=0;for(d=Base64._utf8_encode(d);l<d.length;)b=d.charCodeAt(l++),c=d.charCodeAt(l++),e=d.charCodeAt(l++),f=b>>2,h=(b&3)<<4|c>>4,
g=(c&15)<<2|e>>6,k=e&63,isNaN(c)?g=k=64:isNaN(e)&&(k=64),a=a+this._keyStr.charAt(f)+this._keyStr.charAt(h)+this._keyStr.charAt(g)+this._keyStr.charAt(k);return a}catch(m){return""}},decode:function(d){var a="",b,c,e,f,h,g=0;for(d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");g<d.length;)b=this._keyStr.indexOf(d.charAt(g++)),c=this._keyStr.indexOf(d.charAt(g++)),f=this._keyStr.indexOf(d.charAt(g++)),h=this._keyStr.indexOf(d.charAt(g++)),b=b<<2|c>>4,c=(c&15)<<4|f>>2,e=(f&3)<<6|h,a+=String.fromCharCode(b),64!=
f&&(a+=String.fromCharCode(c)),64!=h&&(a+=String.fromCharCode(e));return a=Base64._utf8_decode(a)},_utf8_encode:function(d){d=d.replace(/\r\n/g,"\n");for(var a="",b=0;b<d.length;b++){var c=d.charCodeAt(b);128>c?a+=String.fromCharCode(c):(127<c&&2048>c?a+=String.fromCharCode(c>>6|192):(a+=String.fromCharCode(c>>12|224),a+=String.fromCharCode(c>>6&63|128)),a+=String.fromCharCode(c&63|128))}return a},_utf8_decode:function(d){for(var a="",b=0,c,e,f=0;b<d.length;)c=d.charCodeAt(b),128>c?(a+=String.fromCharCode(c),
b++):191<c&&224>c?(e=d.charCodeAt(b+1),a+=String.fromCharCode((c&31)<<6|e&63),b+=2):(e=d.charCodeAt(b+1),f=d.charCodeAt(b+2),a+=String.fromCharCode((c&15)<<12|(e&63)<<6|f&63),b+=3);return a}},CWUtils=new CWUtilsClass;
