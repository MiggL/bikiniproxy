(function queryWorkerFunction(){var e=this,t=function(){return function(e,t,n,i){void 0===i&&(i={}),this.id=e,this.hasChanged=t,this.result=n,this.activations=i}}(),n=function(){function e(e,t,n,i){var r=this;this.id=e,this.query=t;var o=function(){return new Date},s=function(){return n};this.effects={getCurrentTime:o,getCurrentSession:s,getThirdPartySegments:function(){return{}},setThirdPartyActivation:function(e,t){}},this.effectsWithTpd={getCurrentTime:o,getCurrentSession:s,getThirdPartySegments:function(){return i},setThirdPartyActivation:function(e,t){e in r.thirdPartyActivations?-1!==r.thirdPartyActivations[e].indexOf(t)||r.thirdPartyActivations[e].push(t):r.thirdPartyActivations[e]=[t]}},this.reset()}return e.prototype.reset=function(e,t){this.thirdPartyActivations={},this.state=this.query.initial(this.effects),this.hasRunCache=!1},e.prototype.update=function(e,n){if(n=n||{},n.fromCache=n.fromCache||!1,n.initEvent=n.initEvent||!1,!(this.hasRunCache||n.fromCache||n.initEvent))throw new Error("Update called prematurely before query initialised");var i=this.result(this.hasRunCache);try{this.state=this.query.update(this.effects,this.state,e);var r=this.result(this.hasRunCache||n.initEvent),o=!this.areResultsEqual(i,r);return new t(this.id,o,r,this.thirdPartyActivations)}catch(e){throw e.message="Skipping event causing runtime error: "+e.message,e}},e.prototype.setReady=function(){this.hasRunCache=!0},e.prototype.initialResult=function(){return this.query.result(this.effects,this.query.initial(this.effects))},e.prototype.result=function(e){return this.query.result(e?this.effectsWithTpd:this.effects,this.state)},e.prototype.areResultsEqual=function(e,t){var n=!0;for(var i in e)if(!(n=n&&e[i]===t[i]))break;return n},e}();this.rawQueries=function(){var e=function(e,t,n){return{initial:function(t){var n={};for(var i in e)n[i]=e[i].initial(t);return n},update:function(n,i,r){if(!t(r))return i;var o={};for(var s in e)o[s]=i[s],o[s]=e[s].update(n,o[s],r);return o},result:function(t,i){var r={};for(var o in e)r[o]=e[o].result(t,i[o]);return n(t,r)}}},t=function(e){var t=Object.prototype.toString.call(e);return"[object Array]"===t?"array":"[object Object]"===t?"object":"[object String]"===t?"string":"[object Number]"===t?"number":"[object Boolean]"===t?"boolean":"[object Null]"===t?"null":"[object Date]"===t?"date":"undefined"},n=function(e,t){return"string"==typeof e&&null!=e&&"string"==typeof t&&null!=t&&t.toLowerCase().indexOf(e.toLowerCase())>-1},i=function(e,t,n){var i=e.getCurrentTime();return null===t||null===i?null:i.getTime()-t.getTime()<=n},r=function(e){return e.getCurrentSession()},o={number:{add:function(e,t){return e+t},sub:function(e,t){return e-t},mul:function(e,t){return e*t},div:function(e,t){return e/t},lt:function(e,t){return e<t},gt:function(e,t){return e>t},lte:function(e,t){return e<=t},gte:function(e,t){return e>=t}},util:{nullSafe:function(e,t,n){return null===t||null===n?null:e(t,n)}}},s={"05163b1d-03de-4f93-b61d-e1f650cf944d":e({result:e({0:{initial:function(e){return 0},update:function(e,i,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.session_id)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&"string"===t(s.session_id)&&t(s.session_id)===t(s.session_id)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===s.name&&s.session_id===r(e)&&n("utm_medium=social",s.properties.client.url)?1:0):i},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)})},function(e){return!0},function(e,t){return t}),"10271e10-a4fe-46a3-8892-e9a68ee91966":e({result:e({0:{initial:function(e){return 0},update:function(e,r,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.time)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&t(s.time)===t(s.time)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)?o.util.nullSafe(o.number.add,r,"Pageview"===s.name&&i(e,s.time,6048e5)&&n("business",s.properties.client.url)?1:0):r},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],3)})},function(e){return!0},function(e,t){return t}),"1b88b39b-4be7-4d2e-8f44-3f4f62423db9":e({result:e({0:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.url)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.url)&&t(r.properties.client.url)===t(r.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===r.name&&n("hotels-resorts-spas",r.properties.client.url)?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"object"===t(i.properties)&&"undefined"!==t(i.properties.segment_name)&&"string"===t(i.name)&&t(i.name)===t(i.name)&&"string"===t(i.properties.segment_name)&&t(i.properties.segment_name)===t(i.properties.segment_name)?o.util.nullSafe(o.number.add,n,"SegmentEntry"===i.name&&"EliteTraveler"===i.properties.segment_name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)&&o.util.nullSafe(o.number.gte,t[1],1)})},function(e){return!0},function(e,t){return t}),"25d061af-a299-4395-91d1-52a2a8aa109f":e({result:e({0:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"string"===t(i.name)&&t(i.name)===t(i.name)?o.util.nullSafe(o.number.add,n,"Pageview"===i.name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)})},function(e){return!0},function(e,t){return t}),"4e445742-b2c3-43cf-831e-6efdfc0b6c3f":e({result:e({0:{initial:function(e){return 0},update:function(e,i,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.session_id)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&"string"===t(s.session_id)&&t(s.session_id)===t(s.session_id)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===s.name&&s.session_id===r(e)&&n("utm_medium=email",s.properties.client.url)?1:0):i},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)})},function(e){return!0},function(e,t){return t}),"5a7235d9-5a9e-4fff-a5db-aec0863e4597":e({result:e({0:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.referrer)&&"undefined"!==t(r.properties.client.url)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.referrer)&&t(r.properties.client.referrer)===t(r.properties.client.referrer)&&"string"===t(r.properties.client.url)&&t(r.properties.client.url)===t(r.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===r.name&&(n("newstatesman.com/long-reads",r.properties.client.referrer)||n("newstatesman.com/long-reads",r.properties.client.url))?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.referrer)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.referrer)&&t(r.properties.client.referrer)===t(r.properties.client.referrer)?o.util.nullSafe(o.number.add,i,"LinkClick"===r.name&&n("newstatesman.com/long-reads",r.properties.client.referrer)?1:0):i},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)||o.util.nullSafe(o.number.gte,t[1],1)})},function(e){return!0},function(e,t){return t}),"61543bc3-8d72-43e6-8688-63a1fbc2b4b3":e({result:e({0:{initial:function(e){return 0},update:function(e,n,r){return"undefined"!==t(r.name)&&"undefined"!==t(r.time)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&t(r.time)===t(r.time)?o.util.nullSafe(o.number.add,n,"PageviewEngagement"===r.name&&i(e,r.time,2592e6)?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],12)})},function(e){return!0},function(e,t){return t}),"68ff61ca-2244-4866-8a18-dd3e00494b6e":e({result:e({0:{initial:function(e){return 0},update:function(e,r,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.time)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"undefined"!==t(s.properties.client.domain)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&t(s.time)===t(s.time)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)&&"string"===t(s.properties.client.domain)&&t(s.properties.client.domain)===t(s.properties.client.domain)?o.util.nullSafe(o.number.add,r,"Pageview"===s.name&&i(e,s.time,24192e5)&&n("politic",s.properties.client.url)&&n("newstatesman",s.properties.client.domain)?1:0):r},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],3)})},function(e){return!0},function(e,t){return t}),"6dba9647-a73f-4651-8e60-a38bb2de3b42":e({result:e({0:{initial:function(e){return 0},update:function(e,i,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.session_id)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&"string"===t(s.session_id)&&t(s.session_id)===t(s.session_id)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===s.name&&s.session_id===r(e)&&n("utm_source=twitter.com",s.properties.client.url)?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"object"===t(i.properties)&&"undefined"!==t(i.properties.segment_name)&&"string"===t(i.name)&&t(i.name)===t(i.name)&&"string"===t(i.properties.segment_name)&&t(i.properties.segment_name)===t(i.properties.segment_name)?o.util.nullSafe(o.number.add,n,"SegmentEntry"===i.name&&"Social Traffic"===i.properties.segment_name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)&&o.util.nullSafe(o.number.gte,t[1],1)})},function(e){return!0},function(e,t){return t}),"6de40117-6867-4dd2-b66a-0761b9c34dc1":e({result:e({0:{initial:function(e){return 0},update:function(e,n,r){return"undefined"!==t(r.name)&&"undefined"!==t(r.time)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&t(r.time)===t(r.time)?o.util.nullSafe(o.number.add,n,"Pageview"===r.name&&i(e,r.time,2592e6)?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],3)})},function(e){return!0},function(e,t){return t}),"8ff37adc-bfe3-45bf-bb84-a397f505e8b8":e({result:e({0:{initial:function(e){return 0},update:function(e,n,r){return"undefined"!==t(r.name)&&"undefined"!==t(r.time)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&t(r.time)===t(r.time)?o.util.nullSafe(o.number.add,n,"PageviewEngagement"===r.name&&i(e,r.time,2592e6)?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],6)})},function(e){return!0},function(e,t){return t}),"a1ce530d-c6f0-4f3b-a4d0-35f7f07c3614":e({result:e({0:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.url)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.url)&&t(r.properties.client.url)===t(r.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===r.name&&n("luxury-transport",r.properties.client.url)?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"object"===t(i.properties)&&"undefined"!==t(i.properties.segment_name)&&"string"===t(i.name)&&t(i.name)===t(i.name)&&"string"===t(i.properties.segment_name)&&t(i.properties.segment_name)===t(i.properties.segment_name)?o.util.nullSafe(o.number.add,n,"SegmentEntry"===i.name&&"EliteTraveler"===i.properties.segment_name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)&&o.util.nullSafe(o.number.gte,t[1],1)})},function(e){return!0},function(e,t){return t}),"a5eb161c-950c-4a34-8818-b76e9d9efb9f":e({result:e({0:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.title)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.title)&&t(r.properties.client.title)===t(r.properties.client.title)?o.util.nullSafe(o.number.add,i,"Pageview"===r.name&&n("security",r.properties.client.title)?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"string"===t(i.name)&&t(i.name)===t(i.name)?o.util.nullSafe(o.number.add,n,"PageviewEngagement"===i.name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)&&o.util.nullSafe(o.number.gte,t[1],12)})},function(e){return!0},function(e,t){return t}),"a6d84eea-8e80-4479-82e8-abf79fc02281":e({result:e({0:{initial:function(e){return 0},update:function(e,i,s){return"undefined"!==t(s.name)&&"undefined"!==t(s.session_id)&&"object"===t(s.properties)&&"object"===t(s.properties.client)&&"undefined"!==t(s.properties.client.url)&&"string"===t(s.name)&&t(s.name)===t(s.name)&&"string"===t(s.session_id)&&t(s.session_id)===t(s.session_id)&&"string"===t(s.properties.client.url)&&t(s.properties.client.url)===t(s.properties.client.url)?o.util.nullSafe(o.number.add,i,"Pageview"===s.name&&s.session_id===r(e)&&n("utm_source=facebook.com",s.properties.client.url)?1:0):i},result:function(e,t){return t}},1:{initial:function(e){return 0},update:function(e,n,i){return"undefined"!==t(i.name)&&"object"===t(i.properties)&&"undefined"!==t(i.properties.segment_name)&&"string"===t(i.name)&&t(i.name)===t(i.name)&&"string"===t(i.properties.segment_name)&&t(i.properties.segment_name)===t(i.properties.segment_name)?o.util.nullSafe(o.number.add,n,"SegmentEntry"===i.name&&"Social Traffic"===i.properties.segment_name?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)&&o.util.nullSafe(o.number.gte,t[1],1)})},function(e){return!0},function(e,t){return t}),"d09aff6a-78a9-4c4b-a403-d2b56a43c02f":e({result:e({0:{initial:function(e){return 0},update:function(e,n,r){return"undefined"!==t(r.name)&&"undefined"!==t(r.time)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&t(r.time)===t(r.time)?o.util.nullSafe(o.number.add,n,"Pageview"===r.name&&i(e,r.time,2592e6)?1:0):n},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],5)})},function(e){return!0},function(e,t){return t}),"e433e384-842e-4272-88dc-867eb6a7b1e3":e({result:e({0:{initial:function(e){return 0},update:function(e,i,r){return"undefined"!==t(r.name)&&"object"===t(r.properties)&&"object"===t(r.properties.client)&&"undefined"!==t(r.properties.client.domain)&&"string"===t(r.name)&&t(r.name)===t(r.name)&&"string"===t(r.properties.client.domain)&&t(r.properties.client.domain)===t(r.properties.client.domain)?o.util.nullSafe(o.number.add,i,"Pageview"===r.name&&n("elitetraveler",r.properties.client.domain)?1:0):i},result:function(e,t){return t}}},function(e){return!0},function(e,t){return o.util.nullSafe(o.number.gte,t[0],1)})},function(e){return!0},function(e,t){return t})};return void 0!==s?s:{}}(),this.configuration={"5a7235d9-5a9e-4fff-a5db-aec0863e4597":{code:2637,name:"NewStatesman_long-read-enthusiasts",is_segment:!0},"25d061af-a299-4395-91d1-52a2a8aa109f":{code:2491,name:"Everyone",is_segment:!0},"61543bc3-8d72-43e6-8688-63a1fbc2b4b3":{code:2495,name:"Engaged_Time_60s+_30Days",is_segment:!0},"e433e384-842e-4272-88dc-867eb6a7b1e3":{code:2646,name:"EliteTraveler",is_segment:!0},"d09aff6a-78a9-4c4b-a403-d2b56a43c02f":{code:2493,name:"Engaged_Pageviews_5+_30Days",is_segment:!0},"05163b1d-03de-4f93-b61d-e1f650cf944d":{code:2650,name:"Social Traffic",is_segment:!0},"4e445742-b2c3-43cf-831e-6efdfc0b6c3f":{code:2655,name:"Email Traffic",is_segment:!0},"10271e10-a4fe-46a3-8892-e9a68ee91966":{code:2631,name:"High Engaged Business Interest",is_segment:!0},"a5eb161c-950c-4a34-8818-b76e9d9efb9f":{code:2482,name:"Interests: Security",is_segment:!0},"a6d84eea-8e80-4479-82e8-abf79fc02281":{code:2651,name:"Social Traffic_Facebook",is_segment:!0},"6dba9647-a73f-4651-8e60-a38bb2de3b42":{code:2652,name:"Social Traffic_Twitter",is_segment:!0},"68ff61ca-2244-4866-8a18-dd3e00494b6e":{code:2584,name:"Interest_Politics_NewStatesman",is_segment:!0},"1b88b39b-4be7-4d2e-8f44-3f4f62423db9":{code:2648,name:"EliteTraveler_Hotels Resorts & Spas",is_segment:!0},"a1ce530d-c6f0-4f3b-a4d0-35f7f07c3614":{code:2647,name:"EliteTraveler_Luxury Transport",is_segment:!0},"8ff37adc-bfe3-45bf-bb84-a397f505e8b8":{code:2494,name:"Engaged_Time_30s+_30Days",is_segment:!0},"6de40117-6867-4dd2-b66a-0761b9c34dc1":{code:2492,name:"Engaged_Pageviews_3+_30Days",is_segment:!0}},this.queries={},this.descriptors={},this.thirdPartySegments={},this.buildQueryDescriptors=function(t,i){for(var r in e.rawQueries)if(e.rawQueries.hasOwnProperty(r)){var o=e.configuration[r],s=new n(o.code,e.rawQueries[r],i,e.thirdPartySegments);e.queries[o.code]=s;var a=!(o.code in t);e.descriptors[o.code]={id:r,code:o.code,name:o.name,isSegment:o.is_segment,isNew:a,hasRunCache:!1,initialResult:s.initialResult()}}return e.descriptors},e.updateQueries=function(t,n){var i={},r=[],o=function(t,n,o){var s=void 0;try{s=t.update(n,o)}catch(e){r.push(e.toString())}if(void 0!==s&&void 0!==s.result&&s.hasChanged){var a=JSON.parse(JSON.stringify(e.descriptors[s.id]));i[t.id]={descriptor:a,result:s.result,activations:s.activations}}};for(var s in t)for(var a in e.queries)e.queries.hasOwnProperty(a)&&o(u=e.queries[a],t[s],n);if(!0===n.fromCache)for(var a in e.queries)if(e.queries.hasOwnProperty(a)){var u=e.queries[a];o(u,{},{initEvent:!0}),u.setReady(),e.descriptors[u.id].hasRunCache=!0}var c=[];for(var l in i)i.hasOwnProperty(l)&&c.push(i[l]);return[c,r,n]},e.resetQueries=function(){for(var t in e.queries)e.queries.hasOwnProperty(t)&&e.queries[t].reset()},e.onmessage=function(t){if("buildQueryDescriptors"===t.data.type)e.postMessage({type:"setQueryDescriptors",value:e.buildQueryDescriptors.apply(e,t.data.arguments)});else if("updateQueries"===t.data.type){var n=e.updateQueries.apply(e,t.data.arguments);e.postMessage({type:"queryResultChanges",value:{changes:n[0],options:t.data.arguments[1]}}),n[1].length>0&&e.postMessage({type:"logErrors",value:n[1]})}else"resetQueries"===t.data.type?e.resetQueries():"thirdPartySegments"===t.data.type&&(e.thirdPartySegments=t.data.arguments[0])}})();