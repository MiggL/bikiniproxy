define(["jquery","wcs.context"],function(e,b){window.LANG_MSG=window.LANG_MSG||{};var a=new e.Deferred(),d=WCS_CONFIG.get("global::storeMessagesURL")||e('link[rel="vf-store-messages"]').attr("data-href");if(window.isEditMode){console.debug("CMS authoring mode detected. Skipping load of Store Messages.");a.resolve();return a.promise()}if(typeof(d)==="undefined"){console.error("No store message translations found.");a.reject();return a.promise()}a.fail(function(){e(window).scrollTop(0);var g=e(".page-contents");if(g.children(".page-messaging-js").length===0){var i='<section class="page-messaging page-messaging-js"><div></div></section>';g.prepend(i)}var h='<p class="message error">ERROR LOADING CONTENTS, PLEASE REFRESH THE PAGE.</p>';g.find(".page-messaging-js div").html(h)});var f=d.search("isJSONPEnabled"),c={url:b.getURLWithContextRoot(d),type:"GET",timeout:15000,dataType:(f)?"jsonp":null,crossDomain:(f),jsonpCallback:(f)?"jsonpCallback":null,error:function(g,h){console.error("Error loading store message translations: "+h);a.reject()},success:function(g){window.LANG_MSG=g;a.resolve()}};e.ajax(c);return a.promise()});