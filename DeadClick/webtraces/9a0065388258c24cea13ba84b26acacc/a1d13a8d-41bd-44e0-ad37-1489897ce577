define(["jquery","wcs.selector-cache","wcs.context","domReady","shared.main.plugins","pubsub"],function(e,b,a,d,c){e(function(){var j=e(window),g=e(".upper");g.find(".unav-email-sign-up-js").on("click",function(l){l.preventDefault();var k=e(".footer").find("input.email");e("html, body").animate({scrollTop:k.offset().top},500);k.focus()});if(a.getUserType()=="R"){if(a.getLoyaltyOptIn()=="1"){b.get(".unav-loyalty").removeClass("hidden");b.get(".loyalty-program-points").html(a.getLoyaltyPoints());b.get(".product-loyalty-points-message.member").removeClass("hide")}else{b.get(".unav-loyalty-join").removeClass("hidden");b.get('.product-loyalty-points-message:not(".member")').removeClass("hide").find(".loyalty-form-hopup").addClass("hide")}if(WCS_CONFIG.get("topnav::navHeaderSignInLabelEnabled")===true){myAccountLabel=e(".unav-myaccount-title-js",".unav-myaccount").attr("data-user");b.get(".unav-myaccount-label-js span",".unav-myaccount").not(".icon").html(myAccountLabel)}b.get(".unav-signing").show();b.fresh(".unav-myaccount").show();var i="";e.each(document.cookie.split(/; */),function(){var k=this.split("=");if(k[0].indexOf("DISPLAYNAME")>-1){i=WCS_CONFIG.get("topnav::headerNavGreeting")+k[1]}});e("#btn-username span").html(i);b.get(".unav-greetname").show();loyaltyUserStatusCookie=a.getLoyaltyProgramStatusCookie();if(loyaltyUserStatusCookie=="full"){b.get(".unav-loyalty-program-dashboard").removeClass("hidden")}else{b.get(".unav-loyalty-program-join").removeClass("hidden")}var f=e(".btn-myaccount-js");f.attr({href:f.data("account-href")}).removeAttr("data-reveal-ajax data-reveal-id").off("click.fndtn.reveal")}else{if(WCS_CONFIG.get("topnav::navHeaderSignInLabelEnabled")===true){myAccountLabel=e(".unav-myaccount-label-js",".unav-myaccount").attr("data-guest");b.get(".unav-myaccount-label-js span",".unav-myaccount").not(".icon").html(myAccountLabel)}b.get(".unav-signing").hide();b.get(".unav-greetname").hide();b.fresh(".unav-myaccount").show();b.get(".unav-loyalty-join").removeClass("hidden");b.get(".unav-loyalty-program-join").removeClass("hidden");b.get('.product-loyalty-points-message:not(".member")').removeClass("hide")}var h=e(".loyalty-enrollment .account-registration-js");h.on("submit",function(){h.find("#WC_VFMyAccountRegistrationForm_FormInput_email1_In_Register_1").val(h.find("#WC_VFMyAccountRegistrationForm_FormInput_logonId_In_Register_1").val())})});d(function(){var f=[{name:"cms.utilityNav.cart",initFunction:"utilityNavCart",selector:".unav-shoppingbag-js",options:{replaceSelector:".nav-shoppingbag-qty-js"}},{name:"cms.utilityNav.wishlist",initFunction:"utilityNavWishlist",selector:".nav-wishlist-qty-js",context:e(".topnav-util-js"),options:{replaceString:"",replaceElement:'<span class="nav-wishlist-qty-js"/>',quantitySelector:".nav-wishlist-qty-js"}}];c.loadPlugins(f)})});