define("wcs.zmetrics",["jquery"],function(e){var c=new e.Deferred(),d=new e.Deferred(),a=new e.Deferred();window.zm=window.zm||{listeners:[],trackPageView:function(h){for(var g in zm.listeners){if(zm.listeners[g].pageView){zm.listeners[g].pageView(h)}}},trackProductView:function(h){for(var g in zm.listeners){if(zm.listeners[g].productView){zm.listeners[g].productView(h)}}},trackAddedItem:function(h){for(var g in zm.listeners){if(zm.listeners[g].addedItem){zm.listeners[g].addedItem(h)}}},trackRemovedItem:function(h){for(var g in zm.listeners){if(zm.listeners[g].removedItem){zm.listeners[g].removedItem(h)}}},trackShoppingCart:function(h){for(var g in zm.listeners){if(zm.listeners[g].shoppingCart){zm.listeners[g].shoppingCart(h)}}},trackCheckoutStep:function(i,h){for(var g in zm.listeners){if(zm.listeners[g].checkoutStep){zm.listeners[g].checkoutStep(i,h)}}},trackCheckoutEvent:function(h){for(var g in zm.listeners){if(zm.listeners[g].checkoutEvent){zm.listeners[g].checkoutEvent(h)}}},trackOrder:function(i,h){for(var g in zm.listeners){if(zm.listeners[g].orderView){zm.listeners[g].orderView(i,h)}}},trackLogin:function(h){for(var g in zm.listeners){if(zm.listeners[g].registrationView){zm.listeners[g].registrationView(h)}}},trackEvent:function(h){for(var g in zm.listeners){if(zm.listeners[g].trackEvent){zm.listeners[g].trackEvent(h)}}},trackGeneric:function(h){for(var g in zm.listeners){if(zm.listeners[g].trackGeneric){zm.listeners[g].trackGeneric(h)}}}};var b=WCS_CONFIG.get("ANALYTICS::cmEnabled"),f=WCS_CONFIG.get("ANALYTICS::gtmEnabled");if(b){require(["wcs.cm-listener"],function(h){var g={clientId:WCS_CONFIG.get("ANALYTICS::cmClientId"),cmManaged:WCS_CONFIG.get("ANALYTICS::cmManaged"),dcDomain:WCS_CONFIG.get("ANALYTICS::dcDomain"),cookieDomain:WCS_CONFIG.get("ANALYTICS::cmCookieDomain")};window.cm.initMetrics(g);d.resolve()})}else{d.resolve()}if(f){require(["wcs.gtm-listener"],function(g){window.gtm.initMetrics();a.resolve()})}else{a.resolve()}e.when(d,a).done(function(){c.resolve(window.zm)}).fail(function(){console.error("Problems loading analytics modules");c.reject(null)});return c.promise()});