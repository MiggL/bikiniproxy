var weekday=new Array(7);weekday[0]="Dimanche";weekday[1]="Lundi";weekday[2]="Mardi";weekday[3]="Mercredi";weekday[4]="Jeudi";weekday[5]="Vendredi";weekday[6]="Samedi";$(document).ready(function(){if($('.cutoffExpress').length>0){var current=new Date;var tomorrow=new Date(current.getFullYear(),current.getMonth(),current.getDate()+1,0,0,0);var cutoff=new Date(current.getFullYear(),current.getMonth(),current.getDate()+1,16,0,0);if(current.getHours()>16||(current.getHours()==16&&current.getMinutes()>=0)){cutoff.setDate(cutoff.getDate()+1);}
if(testHoliday(cutoff)||testHoliday(current)){cutoff.setDate(cutoff.getDate()+1);if(cutoff.getDay()==0)
cutoff.setDate(cutoff.getDate()+1);}
if((current.getDay()>=5&&(current.getHours()>16||(current.getHours()==16&&current.getMinutes()>=0)))||(current.getDay()==6)||(current.getDay()==0&&current.getHours()<16)||(testHoliday(tomorrow)&&current.getHours()>=16&&current.getDay()==4)){$('.cutoffExpress').hide();$('.cutoffExpressWeekend').show();}else{$('.cutoffExpress').show();$('.cutoffExpressWeekend').hide();$('.dateLivraisonExpress').html(getCutOff(current,cutoff));}
setInterval(function(){current=new Date;tomorrow=new Date(current.getFullYear(),current.getMonth(),current.getDate()+1,0,0,0);var timeDiff=Math.abs(cutoff.getTime()-current.getTime());var cutoffin=new Date(timeDiff);var hours=cutoffin.getHours()-1;if(hours<0)
hours=23;if(current.getDay()==5&&(current.getHours()>16||(current.getHours()==16&&current.getMinutes()>=0))){hours+=48;}else if(current.getDay()==6){hours+=24;}
if((current.getDay()>=5&&(current.getHours()>16||(current.getHours()==16&&current.getMinutes()>=0)))||(current.getDay()==6)||(current.getDay()==0&&current.getHours()<16)||(testHoliday(tomorrow)&&current.getHours()>=16&&current.getDay()==4)){$('.cutoffExpress').hide();$('.cutoffExpressWeekend').show();}else{if(cutoffin.getHours()==0&&cutoffin.getMinutes()==0&cutoffin.getSeconds()==0){$('.dateLivraisonExpress').html(getCutOff(current,cutoff));}
var minutes="0"+cutoffin.getMinutes();var seconds="0"+cutoffin.getSeconds();$('.timerExpress').html('<span class="timeExpress">'+hours+'</span>h <span class="timeExpress">'+minutes.substr(-2)+'</span>m <span class="timeExpress">'
+seconds.substr(-2)+'</span>s');}
return;},1000);}});function getHolidays(year){var jourAn=new Date(year,"00","01");var feteTravail=new Date(year,"04","01");var victoire1945=new Date(year,"04","08");var feteNationale=new Date(year,"06","14");var assomption=new Date(year,"07","15");var toussaint=new Date(year,"10","01");var armistice=new Date(year,"10","11");var g=year%19;var c=Math.floor(year/100);var h=(c-Math.floor(c/4)-Math.floor((8*c+13)/25)+19*g+15)%30;var i=h-Math.floor(h/28)*(1-Math.floor(h/28)*Math.floor(29/(h+1))*Math.floor((21-g)/11));var j=(year*1+Math.floor(year/4)+i+2-c+Math.floor(c/4))%7;var l=i-j;var moisPaques=3+Math.floor((l+40)/44);var jourPaques=l+28-31*Math.floor(moisPaques/4);var paques=new Date(year,moisPaques-1,jourPaques);var vendrediSaint=new Date(year,moisPaques-1,jourPaques-2);var lundiPaques=new Date(year,moisPaques-1,jourPaques+1);var ascension=new Date(year,moisPaques-1,jourPaques+39);var pentecote=new Date(year,moisPaques-1,jourPaques+49);var lundiPentecote=new Date(year,moisPaques-1,jourPaques+50);return new Array(jourAn,vendrediSaint,paques,lundiPaques,feteTravail,victoire1945,ascension,pentecote,lundiPentecote,feteNationale,assomption,toussaint,armistice);}
function testHoliday(date){var holidays=getHolidays(date.getYear());for(var i=0;i<holidays.length;i++){if(holidays[i].getDate()==date.getDate()&&holidays[i].getMonth()==date.getMonth()){return true;}}
return false;}
function getCutOff(current,cutoff){if(current.getDay()==5&&(current.getHours()>16||(current.getHours()==16&&current.getMinutes()>=0))){date="0"+(cutoff.getDate()+3);}
else if(current.getDay()==6){date="0"+(cutoff.getDate()+2);}
else if(current.getDay()==0){date="0"+(cutoff.getDate()+1);}
else{var date="0"+(cutoff.getDate());}
var day=cutoff.getDay();if(day==0)
day=1;var month="0"+(cutoff.getMonth()+1);return weekday[day]+" "+date.substr(-2)+'/'+month.substr(-2);}