var vidConfig=[];var cnnEnableCL=true;var is_iOS=((navigator.userAgent.indexOf("iPad")!==-1)||(navigator.userAgent.indexOf("iPhone")!==-1)||(navigator.userAgent.indexOf("iPod")!==-1));var cnnDocDomain="";if(location.hostname.indexOf("cnn.com")>0){cnnDocDomain="cnn.com";}if(location.hostname.indexOf("turner.com")>0){if(document.layers){cnnDocDomain="turner.com:"+location.port;}else{cnnDocDomain="turner.com";}}if(cnnDocDomain){document.domain=cnnDocDomain;}function getQSParam(c){c=c.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+c+"=([^&#]*)";var d=new RegExp(a);var b=d.exec(window.location.href);if(b==null){return"";}else{return decodeURIComponent(b[1].replace(/\+/g," "));}}function chooseMagOFIE(){}var twitter_popup=function(){jQuery(".soc-twtname").click(function(){var g="scrollbars=yes,resizable=yes,toolbar=no,location=yes",d=550,a=420,c=screen.height,b=screen.width;var f=Math.round((b/2)-(d/2));var e=0;if(c>a){e=Math.round((c/2)-(a/2));}window.open(this.href,"intent",g+",width="+d+",height="+a+",left="+f+",top="+e);return false;});};var cnnm_sourcing={sourceTypes:{cnnmoney:"CNN",fortune:"FORT",moneymag:"MONEY"},getURLSource:function(a){source=this.sourceTypes.cnnmoney;var b=a.split("http://");if(b.length>1){b=b[1].split("/");b=b[0];}if(a.indexOf(".fortune")!=-1||a.indexOf("magazines/fortune")!=-1){source=this.sourceTypes.fortune;}if(a.indexOf(".moneymag")!=-1||a.indexOf("magazines/moneymag")!=-1){source=this.sourceTypes.moneymag;}switch(b){case ("features.blogs.fortune.cnn.com"):case ("finance.fortune.cnn.com"):case ("management.fortune.cnn.com"):case ("postcards.blogs.fortune.cnn.com"):case ("tech.fortune.cnn.com"):case ("techland.blogs.fortune.cnn.com"):case ("thewheeldeal.blogs.fortune.cnn.com"):case ("stanleybing.blogs.fortune.cnn.com"):source=this.sourceTypes.fortune;break;case ("moremoney.blogs.money.cnn.com"):case ("readerschoice.blogs.money.cnn.com"):case ("helpdesk.blogs.money.cnn.com"):source=this.sourceTypes.moneymag;break;case ("cnnmoneytest.wordpress.com"):case ("cnnmoneytalkback.blogs.cnnmoney.cnn.com"):case ("smallbusiness.blogs.cnnmoney.cnn.com"):default:}return source;}};function cnnm_setCookie(c,e,a,g,d,f){var b=0;if(a){if((typeof(a)=="string")&&Date.parse(a)){b=a;}else{if(a==""){b="";}else{if(typeof(a)=="number"){b=(new Date((new Date()).getTime()+a*3600000)).toGMTString();}}}}document.cookie=c+"="+e+((b)?(";expires="+b):"")+((g)?";path="+g:"")+((d)?";domain="+d:"")+((f&&(f===true))?"; secure":"");}function cnnm_getCookie(c){var b,d,a=document.cookie.split(";");for(i=0;i<a.length;i++){b=a[i].substr(0,a[i].indexOf("="));d=a[i].substr(a[i].indexOf("=")+1);b=b.replace(/^\s+|\s+$/g,"");if(b==c){return unescape(d);}}}"use strict";function amzn_ads(e){try{amznads.updateAds(e);}catch(d){try{}catch(f){}}}function aax_write(d,c){d.write(c),d.close();}function amznMatchCookie(e){function d(g){if(!f){f=!0;var c=document.createElement("iframe");c.style.display="none",c.src=g,document.body.appendChild(c);}}var f=!1;document.readyState&&"loading"==document.readyState?document.addEventListener?document.addEventListener("DOMContentLoaded",function(){d(e);},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"==document.readyState&&d(e);}):d(e);}function aax_render_ad(v){var u,t,s,r,q,p,o,n;if(v&&v.cmp&&""!=v.cmp&&"undefined"!=v.cmp&&amznMatchCookie(v.cmp),v.passback){return void aax_write(document,v.html);}if(u=v.slotSize,!u){return void aax_write(document,v.html);}t=u.indexOf("x"),s=u.substring(0,t),r=u.substring(t+1),q="amznad"+Math.round(1000000*Math.random()),aax_write(document,'<iframe id="'+q+'" width="'+s+'" height="'+r+'" src="javascript:\'\'" scrolling="no" frameborder="0" marginwidth="0" marginheight="0" bgcolor="#FFFFFF" topmargin="0" leftmargin="0" rightmargin="0" bottommargin="0"></iframe>');try{p=document.getElementById(q),o=p.contentWindow||p.contentDocument,o.document&&(o=o.document),aax_write(o,v.html);try{v.iid&&(document.write('<script type="text/javascript" src="'+amznpassback.CSM_JS+'"><\/script>'),document.write('<script type="text/javascript">'),n="aax.amazon-adsystem.com",document.write('  amzncsm.host="'+n+'";\n'),document.write('  amzncsm.rmC(document.getElementById("'+q+'"), "'+v.iid+'", window, document);'),document.write("<\/script>"),document.close());}catch(m){console&&console.log;}}catch(l){p&&(p.style.display="none");}}var amznads,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(b){return typeof b;}:function(b){return b&&"function"==typeof Symbol&&b.constructor===Symbol?"symbol":typeof b;},amznpassback=amznpassback||{};amznpassback.CPM_JS||(amznpassback.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz"),Date.now||(Date.now=function(){return(new Date).getTime();}),amznads=function(r,q,p){function o(a,f,d){this.startTime=null,this.stopTime=null,this.sourceId=f,this.sync=a,this.mode=d,this.latency=null,o.prototype.startTimer=function(){this.startTime=Date.now();},o.prototype.stopTimer=function(){this.stopTime=Date.now();},o.prototype.stopTimerAndReportLatency=function(){this.stopTimer(),this.calculateLatency(),this.isThrottled()||this.reportLatency();},o.prototype.calculateLatency=function(){this.latency=this.stopTime-this.startTime;},o.prototype.isThrottled=function(){var e,g=parseInt(r.latencySamplingRate,10);if(!isNaN(g)){if(0==g){return !0;}if(100==g){return !1;}if(e=100*Math.random(),g>=e){return !1;}}return !0;},o.prototype.reportLatency=function(){var e,g;null!=this.latency&&this.latency>0&&(e='/{"c":"dtb","src":"'+this.sourceId+'","'+(this.sync?"bls":"bla")+'":"'+this.latency+'","m":"'+this.mode+'"}',g=r.protocol+r.host+r.px_svc+"PH"+e,(new Image).src=g);};}function n(){this.metrics={},this.t0=Date.now(),this.i=0,this.addTimer=function(d,c){c||(c=Date.now()),this.metrics[d]=c-this.t0;},this.set=function(d,c){this.metrics[d]=c;},this.schedule=function(a,f){var e=this;a||(a=5000),f||(f="PH"),f+="/",setTimeout(function(){var c,d;e.metrics.i=e.i,e.metrics.t0=e.t0,e.metrics.site=e.getTopDomain(r),c=JSON.stringify(e.metrics),d=r.protocol+r.host+r.px_svc+f+encodeURIComponent(c),(new Image).src=d,e.metrics={},e.t0=Date.now(),e.i++;},a);},this.getTopDomain=function(e){var d,f=decodeURIComponent(e.getReferrerURL());return d=f.indexOf("://")>-1?f.split("/")[2]:f.split("/")[0],d=d.split(":")[0];};}var m,l,k,j="https:"===q.location.protocol;return r.latencyUtil=r.latencyUtil||null,r.protocol=j?"https://":"http://",r.DEFAULT_HOST="aax.amazon-adsystem.com",r.host=r.DEFAULT_HOST,r.dtb_svc="/e/dtb/bid",r.pb_svc="/x/getad",r.px_svc="/x/px/",r.debug_mode=r.debug_mode||!1,r.MIN_TIMEOUT=0,r.DEFAULT_TIMEOUT=1000,r.targetingKey="amznslots",r.latencySamplingRate=1,r.vidKey="amzn_vid",r.tasks=r.tasks||[],r.VIEWABILITY_CUTOFF_AREA=r.VIEWABILITY_CUTOFF_AREA||0.5,r.VIEWABILITY_CUTOFF_DURATION_SEC=r.VIEWABILITY_CUTOFF_DURATION_SEC||1,r.CSM_JS="//c.amazon-adsystem.com/aax2/csm.js.gz",r.vads={},m="_d",l=!1,k=new n,k.addTimer("tlt"),r.ads||(r.ads={}),r.updateAds=function(a){var h,g;if(a&&a.cmp&&""!=a.cmp&&"undefined"!=a.cmp&&amznMatchCookie(a.cmp),l=!0,r.ads=a.ads,r.ev=a.ev,a.vads){r.vads=a.vads,r.ads||(r.ads={}),g=!1;for(h in a.vads){a.vads.hasOwnProperty(h)&&-1!=h.indexOf(m)&&(r.ads[h]=a.vads[h],r.amzn_vid=a.vads[h],g=!0);}if(!g){for(h in a.vads){a.vads.hasOwnProperty(h)&&(r.ads[h]=a.vads[h],r.amzn_vid=a.vads[h]);}}}r.doAllTasks(),r.tasks.push=function(c){r.doTask(c);};try{a.lsr&&(r.latencySamplingRate=a.lsr),a.rm&&(k.addTimer("br"),k.set("brs","1"),k.schedule(a.to,a.id)),null!=r.latencyUtil&&r.latencyUtil.stopTimerAndReportLatency();}catch(f){}},r.aaxPunt=function(d){try{d&&d.cmp&&""!=d.cmp&&"undefined"!=d.cmp&&amznMatchCookie(d.cmp),l=!0,k.addTimer("br"),k.set("brs","0"),d&&d.rm&&k.schedule(d.to,d.id);}catch(c){}},r.saveAds=function(a){r.saved_ads=a.ads,r.updateAds(a);},r.getAdForSlot=function(w,v,u){var t,s,b,a;r.src_id=w,t=t||{},s=t.u,r.host=3000==w?"aax-cpm.amazon-adsystem.com":r.host,s||(s=r.getReferrerURL()),s&&-1!==s.indexOf("amzn_debug_mode")&&(r.debug_mode=!0),b="src="+r.src_id+"&slot_uuid="+v+"&c=100&u="+s+"&cb="+Math.round(10000000*Math.random()),a=r.protocol+r.host+r.pb_svc+"?jsd=1&"+b,u?r.appendScriptTag(a):aax_write(q,"<script type='text/javascript' src='"+a+"'><\/script>");
},r.getAdsCallback=function(a,x,w,v,u){var t=null;u=u||{};try{x&&"function"==typeof x&&(t=r.handleCallBack(x,w));}catch(s){}u.to||(u.to=w),r.doGetAdsAsync(a,v,u,t);},r.getVideoAdsCallback=function(a,t,s,h,g){var g=g||{};g.mt="V",r.getAdsCallback(a,t,s,h,g);},r.getDisplayAdsCallback=function(a,t,s,h,g){var g=g||{};g.mt="D",r.getAdsCallback(a,t,s,h,g);},r.getAdsAsync=function(a,f,e){r.doGetAdsAsync(a,f,e);},r.getVideoAdsAsync=function(a,f,e){var e=e||{};e.mt="V",r.getAdsAsync(a,f,e);},r.getDisplayAdsAsync=function(a,f,e){var e=e||{};e.mt="D",r.getAdsAsync(a,f,e);},r.handleCallBack=function(a,u){var t=!1,s=null,h=function(b){if(!t){try{a(b),s&&clearTimeout(s),b||k.set("to","1");}catch(d){}t=!0;}},c=r.getValidMilliseconds(u);return s=c?p.setTimeout(h,c):p.setTimeout(h,r.DEFAULT_TIMEOUT),h;},r.getValidMilliseconds=function(a){if(!a){return !1;}try{var f=~~Number(a);if(f>r.MIN_TIMEOUT){return f;}}catch(e){return !1;}return !1;},r.getAds=function(s,h,g,d){if(l=!1,d){return void r.doGetAdsAsync(s,h,g);}var b=r.getScriptSource(s,h,g);try{r.latencyUtil=new o(!0,s,g&&g.mt?g.mt:"DV"),r.latencyUtil.startTimer(),k.addTimer("sb"),k.set("src",s);}catch(a){}b&&aax_write(q,"<script type='text/javascript' src='"+b+"'><\/script>");},r.getVideoAds=function(a,h,g,f){var g=g||{};g.mt="V",r.getAds(a,h,g,f);},r.getDisplayAds=function(a,h,g,f){var g=g||{};g.mt="D",r.getAds(a,h,g,f);},r.doGetAdsAsync=function(a,t,s,h){l=!1;var g=r.getScriptSource(a,t,s);try{r.latencyUtil=new o(!1,a,s&&s.mt?s.mt:"DV"),r.latencyUtil.startTimer(),k.addTimer("ab"),k.set("src",a);}catch(d){}r.appendScriptTag(g,h);},r.getScriptSource=function(y,x,w){var v,u,t,s,h,b;if(!r.ssb){if(r.src_id=y,w=w||{},v=w.u,u=w.d,t=w.to,s=w.mt,v||(v=r.getReferrerURL()),v&&-1!==v.indexOf("amzn_debug_mode")&&(r.debug_mode=!0),w.mt&&"V"!=w.mt&&"DV"!=w.mt||r.vads&&(r.vads={},delete r.amzn_vid),r.ads&&(r.clearTargetingFromGPTAsync(),r.ads={}),r.startTime&&_typeof("number"==r.startTime)&&k.addTimer("st",r.startTime),r.saved_ads&&(r.ads=r.saved_ads),u){try{q.domain=u;}catch(a){}}return h="src="+y+"&u="+v+"&cb="+Math.round(10000000*Math.random()),x&&(h+="&sz="+x),t&&(h+="&t="+t),s&&(h+="&mt="+s),b=r.protocol+r.host+r.dtb_svc+"?"+h;}r.ssb=!1;},r.getReferrerURL=function(){var b=encodeURIComponent(q.documentURI);try{b=encodeURIComponent(p.top.location.href),b&&"undefined"!=b||(b=r.detectIframeAndGetURL());}catch(a){b=r.detectIframeAndGetURL();}return b;},r.detectIframeAndGetURL=function(){try{if(p.top!==p.self){return encodeURIComponent(q.referrer);}}catch(b){return encodeURIComponent(q.documentURI);}},r.appendScriptTag=function(b,t){var s,h;if(!b&&t&&"function"==typeof t){return void t.apply(this,[!0]);}s=q.getElementsByTagName("script")[0],h=q.createElement("script"),h.type="text/javascript",h.async=!0,b&&(h.src=b);try{t&&"function"==typeof t&&(h.readyState?h.onreadystatechange=function(){("loaded"==h.readyState||"complete"==h.readyState)&&(h.onreadystatechange=null,t(!0));}:h.onload=function(){t(!0);});}catch(g){}s.parentNode.insertBefore(h,s);},r.renderAd=function(y,x){var w,v,u,t,s,h;if(r.ads[x]){k.addTimer("imp"),w=r.ads[x],r.ev&&(v="amznad"+Math.round(1000000*Math.random()),w=w.replace("window.top.amznads.detectViewability","window.amzncsm.rmD"),w=w.replace(/id=[^ ]*/,'id="'+v+'"'),u="<script type='text/javascript' src='"+r.CSM_JS+"'><\/script>\n",r.host!=r.DEFAULT_HOST&&(u+="<script type='text/javascript'>try{amzncsm.host=window.top.amznads.host;}catch(e){amzncsm.host=amznads.host;}<\/script>\n"),w=u+w),aax_write(y,w);}else{k.set("kvm","1"),t=new Object,t.c="dtb",t.src=r.src_id,t.kvmismatch=1,t.pubReturnedKey=x,t.aaxReturnedKeys=r.getTokens(),t.cb=Math.round(10000000*Math.random());try{t.u=encodeURIComponent(location.host+location.pathname),navigator&&(t.ua=encodeURIComponent(navigator.userAgent));}catch(a){}s=encodeURIComponent(JSON.stringify(t)),h=r.protocol+r.host+"/x/px/p/0/"+s,aax_write(y,"<img src='"+h+"'/>");}},r.hasAds=function(a){var f;if(!a){try{return Object.keys(r.ads).length>0;}catch(e){for(f in r.ads){if(r.ads.hasOwnProperty(f)){return !0;}}}}for(f in r.ads){if(r.ads.hasOwnProperty(f)&&f.indexOf(a)>0){return !0;}}return !1;},r.getTargeting=function(a){var h={},g=0;r.getTokens()&&r.getTokens().length>0?(g=1,h[r.targetingKey]=r.getTokens(),r.amzn_vid&&(h[r.vidKey]=r.amzn_vid)):l||(g=2);try{k.addTimer("gk"),k.set("gks",g);}catch(f){}return h;},r.setTargeting=function(a,f){var e;for(e in r.ads){if(r.ads.hasOwnProperty(e)){if(f&&e.indexOf(f)<0){continue;}a(e,"1");}}},r.setTargetingForGPTAsync=function(a){var h,g;try{if(a){r.targetingKey=a,h=r.getTokens(),"undefined"!=typeof h&&h.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(a,h),r.amzn_vid&&googletag.pubads().setTargeting(r.vidKey,r.amzn_vid);});}else{for(g in r.ads){r.ads.hasOwnProperty(g)&&!function(){var c=g;googletag.cmd.push(function(){amznads.debug_mode,googletag.pubads().setTargeting(c,"1"),r.amzn_vid&&googletag.pubads().setTargeting(r.vidKey,r.amzn_vid);});}();}}}catch(f){}},r.setTargetingForGPTSync=function(a){var h,g;try{if(a){r.targetingKey=a,h=r.getTokens(),"undefined"!=typeof h&&h.length>0&&(googletag.pubads().setTargeting(a,h),r.amzn_vid&&googletag.pubads().setTargeting(r.vidKey,r.amzn_vid));}else{for(g in r.ads){r.ads.hasOwnProperty(g)&&(googletag.pubads().setTargeting(g,"1"),r.amzn_vid&&googletag.pubads().setTargeting(r.vidKey,r.amzn_vid));}}}catch(f){}},r.clearTargetingFromGPTAsync=function(){try{googletag&&googletag.pubads()&&googletag.pubads().clearTargeting(r.targetingKey),googletag.pubads().clearTargeting(r.vidKey);}catch(a){}},r.appendTargetingToAdServerUrl=function(a){var f;try{-1===a.indexOf("?")&&(a+="?");for(f in r.ads){r.ads.hasOwnProperty(f)&&(a+="&"+f+"=1");}}catch(e){}return a;},r.appendTargetingToQueryString=function(a){var f;try{for(f in r.ads){r.ads.hasOwnProperty(f)&&(a+="&"+f+"=1");}}catch(e){}return a;},r.getTokens=function(a){var h,g=[];try{for(h in r.ads){if(r.ads.hasOwnProperty(h)){if(a&&h.indexOf(a)<0){continue;}g.push(h);}}}catch(f){}return g;},r.getKeys=r.getTokens,r.getVid=function(){return r.amzn_vid;},r.doAllTasks=function(){for(;r.tasks.length>0;){var a=r.tasks.shift();r.doTask(a);}},r.doTask=function(d){try{d.call();}catch(c){}},r.tryGetAdsAsync=function(){r.ssb&&r.__ads&&r.updateAds(r.__ads),r.asyncParams&&(r.startTime=r.asyncParams.startTime,r.getAdsCallback(r.asyncParams.id,r.asyncParams.callbackFn,r.asyncParams.timeout,r.asyncParams.size,r.asyncParams.data));},r;}(amznads||{},document,window),amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads;function CSIManager(){if((CSIManager.caller&&CSIManager.getInstance)&&(CSIManager.caller!=CSIManager.getInstance)){if((navigator.userAgent.indexOf("Safari")==-1)&&(navigator.userAgent.indexOf("Opera")==-1)){throw new Error("There is no public constructor for CSIManager.");}}this.CSIObjects=new Array();this.delayedCSIList=new Array();this.domIDConfig=new Array();this.domOnLoad=new Array();this.domOnBeforeLoad=new Array();this.useDelayedCSI=false;this.numberofRequests=0;var a=new Date();this.iframeOffset=0;this.queueAllCalls=false;this.queuedCallArray=new Array();this.eventTypes=new Array();this.currentEventType="";this.eventTypeFunctions=new Array();this.watchEventTypeNodes=new Array();this.isPolling=false;this.pollingInterval=10000;this.minimumInterval=9999;this.domRefreshHook=false;this.pollingUrl=false;var d=navigator.userAgent.toLowerCase();if((d.indexOf("msie")>-1)&&(d.indexOf("mac")>-1)){this.useDelayedCSI=true;}this.dojoSupport=(typeof dojo=="undefined")?false:true;this.prototypeSupport=(typeof Prototype=="undefined")?false:true;this.noFramework=(!this.dojoSupport&&!this.prototypeSupport)?true:false;var e=this;var c=function(){e.initialize();};var b=function(g){if(g.persisted){window.setTimeout("CSIManager.getInstance().delayedProcessing();",2000);}};if(this.prototypeSupport){Event.observe(window,"load",c);Event.observe(window,"pageshow",b);}else{if(this.dojoSupport){dojo.addOnLoad(c);}else{if(this.noFramework){if(window.addEventListener){window.addEventListener("load",c,false);
window.addEventListener("pageshow",b,false);}else{if(window.attachEvent){window.attachEvent("onload",c);}else{var f=null;if(window.onload){f=window.onload;}window.onload=function(){c();if(f!=null){f();}};}}}}}}CSIManager.prototype.initialize=function(){if(!this.useDelayedCSI){this.queueAllCalls=true;var a=document.createElement("div");a.setAttribute("id","csimanagerdiv");document.body.appendChild(a);var a=document.createElement("div");a.setAttribute("id","csimanagerdivdelayed");document.body.appendChild(a);this.useDelayedCSI=true;this.queueAllCalls=false;this.processAnyQueuedCalls();this.queuedCallArray=null;}};CSIManager.prototype.processAnyQueuedCalls=function(){if(this.queuedCallArray&&this.queuedCallArray!=null){for(var b=0;b<this.queuedCallArray.length;b++){var a=this.queuedCallArray[b];this.queuedCallArray[b]="";if(a){this.call(a.url,a.args,a.domId,a.funcObj,a.breakCache,a.overrideID);}}}};CSIManager.__instance__=null;CSIManager.getInstance=function(){if(this.__instance__==null){this.__instance__=new CSIManager();}return this.__instance__;};CSIManager.prototype.addOnLoadById=function(c,b){var a=this.domOnLoad[c];if(!a){a=new Array();}a.push(b);this.domOnLoad[c]=a;};CSIManager.prototype.addOnBeforeLoadById=function(c,b){var a=this.domOnBeforeLoad[c];if(!a){a=new Array();}a.push(b);this.domOnBeforeLoad[c]=a;};CSIManager.prototype.setConfigForId=function(b,a){this.domIDConfig[b]=a;};CSIManager.prototype.getConfigForId=function(b){var a=this.domIDConfig[b];if(!a){a=new Object();}return a;};CSIManager.prototype.registerEventType=function(b,a){if(b&&a){this.eventTypes[b]=a;}};CSIManager.prototype.callObject=function(callObj,eventType){var resultObj;var url;var args;var domId;var decoratingFunction;var breakCache;var overrideID;var callEventType=eventType;var forcediframe;this.currentEventType=eventType;if(callObj){resultObj=callObj;url=resultObj.url;args=resultObj.args;domId=resultObj.domId;funcObj=resultObj.funcObj;breakCache=resultObj.breakCache;overrideID=resultObj.overrideID;forcediframe=resultObj.isIframeForced;if(this.queueAllCalls){var queuedObj=new Object();queuedObj.url=url;queuedObj.args=args;queuedObj.domId=domId;queuedObj.funcObj=funcObj;queuedObj.breakCache=breakCache;queuedObj.overrideId=overrideId;this.queuedCallArray.push(queuedObj);}else{if((!this.useDelayedCSI)&&(document&&document.readyState&&(document.readyState=="complete"))){this.initialize();}if(forcediframe===undefined||forcediframe===false){forcediframe=false;if(url.indexOf("http")==0){forcediframe=true;if(url.indexOf(window.location.hostname)>-1){forcediframe=false;}}}this.numberofRequests++;var internalDomId="csi"+(this.iframeOffset+this.numberofRequests);if(overrideID){internalDomId=overrideID;}var domList=new Array();var functionList=new Array();if(url.indexOf(document.domain)==-1&&url.indexOf("http")>-1){return false;}if(domId.join){domList=domId;}else{domList.push(domId);}if(funcObj){if(funcObj.join){functionList=funcObj;}else{functionList.push(funcObj);}}this.CSIObjects[internalDomId]={functionList:functionList,dom:domList,url:url,args:args,csiRequestNum:this.numberofRequests,disableCache:breakCache};var newCSI=new Object();newCSI.src=url;newCSI.id=internalDomId;newCSI.domId=domList;newCSI.args=args;newCSI.breakCache=breakCache;newCSI.csiRequestNum=this.numberofRequests;this.delayedCSIList[this.delayedCSIList.length]=newCSI;var today=new Date();var currTime=today.getTime()%60;var iframeArgs=(breakCache)?"time="+currTime:"";if(args){iframeArgs=(iframeArgs)?iframeArgs+"&":"";iframeArgs+=args;}if(forcediframe===false){try{if(funcObj){var xhrObject=null;if(this.dojoSupport){try{if(navigator.userAgent.toLowerCase().indexOf("msie 7.0")!=-1){throw new Error("NoDojoSupport");}var bindArgs={url:url+"?"+iframeArgs+"&csiID="+internalDomId,mimetype:"text/html",transport:"IframeTransport"};xhrObject=dojo.io.bind(bindArgs);}catch(err){throw new Error("DojoFailure");}}else{if(this.prototypeSupport){try{if(navigator.userAgent.toLowerCase().indexOf("safari")!=-1){throw new Error("SafariCrossDomainFailure");}var csiMgr=this;xhrObject=new Ajax.Request(url,{method:"get",parameters:iframeArgs+"&csiID="+internalDomId,onComplete:function(response){if(response&&response.responseText&&response.responseText.indexOf('id="jsCode"')!=-1){var startStr='id="jsCode"';var startPos=response.responseText.indexOf(startStr)+startStr.length;var firstSlice=response.responseText.slice(startPos,response.responseText.indexOf("</textarea>"));var beginningNode=firstSlice.indexOf(">")+1;var myCode=firstSlice.substring(beginningNode);var obj=eval("("+myCode+")");csiMgr.callBackJS(obj,internalDomId);}if(response&&(!response.responseText)){callObj.isIframeForced=true;CSIManager.getInstance().callObject(callObj,eventType);}},onException:function(x,o){throw new Error("PrototypeException for url ["+url+"]: "+o.messageText);},onFailure:function(x,o){throw new Error("PrototypeFailure");}});}catch(err){throw new Error("PrototypeFailure");}}else{throw new Error("NoXHRFramework");}}}else{throw new Error("NoCallBackFunction");}}catch(err){forcediframe=true;}}if(forcediframe){if(this.useDelayedCSI){var realIframeUrl=url+"?"+iframeArgs+"&csiID="+internalDomId;var iframeObj=document.createElement("iframe");iframeObj.setAttribute("src",realIframeUrl);iframeObj.setAttribute("id","csiDataIframe"+internalDomId);iframeObj.setAttribute("name","csiDataIframe"+internalDomId);iframeObj.setAttribute("width","10");iframeObj.setAttribute("height","10");iframeObj.setAttribute("style","visibility:hidden;position:absolute;top:0px;left:-100px;");iframeObj.style.top="0px";iframeObj.style.left="-100px";iframeObj.style.position="absolute";var containerDiv=document.createElement("div");containerDiv.setAttribute("id","csiIframeObjs"+internalDomId);containerDiv.appendChild(iframeObj);if(document.getElementById("csimanagerdiv")){document.getElementById("csimanagerdiv").appendChild(containerDiv);if(navigator.userAgent.indexOf("MSIE")!=-1){window.setTimeout("var tmpIframObj=document.getElementById('csiDataIframe"+internalDomId+"');if(tmpIframObj.readyState=='uninitialized'){tmpIframObj.src=tmpIframObj.getAttribute('src');tmpIframObj.position='absolute';tmpIframObj.style.left='-100px';}",500);}}}else{var iframeHtmlSrc='<div id="csiIframeObjs'+internalDomId+'"><iframe src="'+url+"?"+iframeArgs+"&csiID="+internalDomId+'" name="csiDataIframe'+internalDomId+'" id="csiDataIframe'+internalDomId+'" width="10" height="10" style="visibility:hidden;position:absolute;top:0px;left:-100px;"></iframe></div>';document.write(iframeHtmlSrc);}}}}};CSIManager.prototype.call=function(a,g,c,b,h,d,j,e){var f=new Object();f.url=a;f.args=g;f.domId=c;f.funcObj=b;f.breakCache=h;f.overrideID=d;f.isIframeForced=e;revertToCallObject(f,j);};CSIManager.prototype.callBackHtml=function(b,e){var a=false;if(document.getElementById){a=document.getElementById(e);if(!a){if(this.CSIObjects[e]&&this.CSIObjects[e].dom){e=this.CSIObjects[e].dom;a=document.getElementById(e);}}}else{if(document.all){a=document.all[e];if(!a){if(this.CSIObjects[e]&&this.CSIObjects[e].dom){e=this.CSIObjects[e].dom;a=document.all[e];}}}}if(a){a.innerHTML=b;}var c=0;if(c){var d=c.style.top||"0px";c.style.top="1px";c.style.top=d;}};CSIManager.prototype.callBackJS=function(o,m){if(this.CSIObjects[m]){var b=this.CSIObjects[m].functionList;var l=this.CSIObjects[m].dom;if(b){var p=b.length;var c=l.length;if(p!=c){if(c<p){var k=l[c-1];for(var g=c;g<p;g++){l.push(k);}c=l.length;}else{var a=b[p-1];for(var g=p;g<c;g++){b.push(a);}p=b.length;}}for(var h=0;h<b.length;h++){var j=b[h];if(j){var e=this.getConfigForId(l[h]);var n=this.domOnBeforeLoad[l[h]];if(n){for(var g=0;g<n.length;g++){var d=n[g];d(o,l[h],e);}}this.callBackHtml(j(o,l[h],e,this.currentEventType),l[h]);var f=this.domOnLoad[l[h]];if(f){for(var g=0;g<f.length;g++){var d=f[g];d(o,l[h],e);}}}}this.CSIObjects[m]="";}}};CSIManager.prototype.delayedProcessing=function(){if(document.body&&document.body.innerHTML&&this.useDelayedCSI){var d=document.getElementById("csimanagerdivdelayed")||document.all["csimanagerdivdelayed"];
var j="";for(var f=0;f<this.delayedCSIList.length;f++){var a=this.delayedCSIList[f].src;var b=this.delayedCSIList[f].id;var h=new Date();var g=this.delayedCSIList[f].breakCache;var c=h.getTime()%60;var e=(g)?"&time="+c:"";if(this.delayedCSIList[f].args){e=e+"&"+this.delayedCSIList[f].args;}j+='<iframe src="'+a+"?csiID="+b+e+'" name="csiDataIframe'+b+'" id="csiDataIframe'+b+'" width="10" height="10" style="visibility:hidden;position:absolute;top:0px;left:-100px;"></iframe>';}if(d){d.innerHTML=j;}}};CSIManager.prototype.handleClientData=function(cliWinbj,cliDoc){var targetWindow=top;try{if(parent.CSIManager){targetWindow=parent;}}catch(err){}var docId="";var paramStr=cliWinbj.location.hash;if(!paramStr){paramStr=cliWinbj.location.search.substring(1);}var queryId="";var keyValPairs=paramStr.split("&");if(!keyValPairs){keyValPairs=new Array();keyValPairs[keyValPairs.length]=query;}for(var counter=0;counter<keyValPairs.length;counter++){var keyVal=keyValPairs[counter].split("=");if(keyVal[0]=="csiID"){queryId=keyVal[1];counter=keyValPairs.length+1;}}var wId="";if(cliWinbj.name&&(cliWinbj.name.indexOf("csiDataIframe")==0)){wId=cliWinbj.name.substring(13);}if(wId==""&&cliWinbj.frameElement&&cliWinbj.frameElement.id&&(cliWinbj.frameElement.id.indexOf("csiDataIframe")==0)){wId=cliWinbj.frameElement.id.substring(13);}docId=wId;if(cliDoc.mainForm.htmlArea&&cliDoc.mainForm.htmlArea.value){var rawHtml=cliDoc.mainForm.htmlArea.value;if(rawHtml){targetWindow.CSIManager.getInstance().callBackHtml(rawHtml,docId);}}else{if(cliDoc.mainForm.jsCode.value){var rawJS=cliDoc.mainForm.jsCode.value;if(rawJS){targetWindow.CSIManager.getInstance().callBackJS(eval("("+rawJS+")"),docId);}}}};CSIManager.prototype.registerEventTypeNode=function(b,a){if(this.eventTypes[a]){this.watchEventTypeNodes[b]=a;}if(!this.isPolling){this.startPoll();}};CSIManager.prototype.setPollingUrl=function(b,a){this.pollingUrl=b;if(a&&a>this.minimumInterval){this.pollingInterval=a;}};CSIManager.prototype.startPoll=function(){if(!this.isPolling&&(this.pollingUrl)){this.pollingId=window.setTimeout("CSIManager.getInstance().poll()",this.pollingInterval);this.isPolling=true;}};CSIManager.prototype.poll=function(){if(!this.domRefreshHook){var a=document.createElement("iframe");this.domRefreshHook=document.body.appendChild(a);}this.domRefreshHook.setAttribute("src",this.pollingUrl);};CSIManager.prototype.handleData=function(d){this.isPolling=false;if(d.intervalTime){if(d.intervalTime>this.minimumInterval){this.pollingInterval=d.intervalTime;}}if(d.entries){for(var a=0;a<d.entries.length;a++){var e=d.entries[a];var c=this.watchEventTypeNodes[e];if(c){var b=this.eventTypes[c];b(c,e);}}}this.startPoll();};CSIManager.prototype.reset=function(){this.eventTypes=new Array();this.currentEventType="";this.eventTypeFunctions=new Array();this.watchEventTypeNodes=new Array();};CSIManager.getInstance();function revertToCallObject(b,a){CSIManager.getInstance().callObject(b,a);}