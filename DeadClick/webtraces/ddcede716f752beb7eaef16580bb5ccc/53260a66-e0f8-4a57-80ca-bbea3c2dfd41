/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.colorbox-1.3.29.js **************************************************************/ 
(function($,document,window){var defaults={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:0.9,preloading:true,className:false,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",
imgError:"This image failed to load.",open:false,returnFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},colorbox="colorbox",prefix="cbox",boxElement=prefix+"Element",event_open=prefix+"_open",event_load=
prefix+"_load",event_complete=prefix+"_complete",event_cleanup=prefix+"_cleanup",event_closed=prefix+"_closed",event_purge=prefix+"_purge",isIE=!$.support.leadingWhitespace,isIE6=isIE&&!window.XMLHttpRequest,event_ie6=prefix+"_IE6",$overlay,$box,$wrap,$content,$topBorder,$leftBorder,$rightBorder,$bottomBorder,$related,$window,$loaded,$loadingBay,$loadingOverlay,$title,$current,$slideshow,$next,$prev,$close,$groupControls,settings,interfaceHeight,interfaceWidth,loadedHeight,loadedWidth,element,index,
photo,open,active,closing,loadingTimer,publicMethod,div="div",className,init;function $tag(tag,id,css){var element=document.createElement(tag);if(id)element.id=prefix+id;if(css)element.style.cssText=css;return $(element)}function getIndex(increment){var max=$related.length,newIndex=(index+increment)%max;return newIndex<0?max+newIndex:newIndex}function setSize(size,dimension){return Math.round((/%/.test(size)?(dimension==="x"?$window.width():$window.height())/100:1)*parseInt(size,10))}function isImage(url){return settings.photo||
/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(url)}function makeSettings(){var i,data=$.data(element,colorbox);if(data==null){settings=$.extend({},defaults);if(console&&console.log)console.log("Error: cboxElement missing settings object")}else settings=$.extend({},data);for(i in settings)if($.isFunction(settings[i])&&i.slice(0,2)!=="on")settings[i]=settings[i].call(element);settings.rel=settings.rel||element.rel||$(element).data("rel")||"nofollow";settings.href=settings.href||$(element).attr("href");
settings.title=settings.title||element.title;if(typeof settings.href==="string")settings.href=$.trim(settings.href)}function trigger(event,callback){$(document).trigger(event);$("*",$box).trigger(event);if(callback)callback.call(element)}function slideshow(){var timeOut,className=prefix+"Slideshow_",click="click."+prefix,start,stop;if(settings.slideshow&&$related[1]){start=function(){$slideshow.html(settings.slideshowStop).unbind(click).bind(event_complete,function(){if(settings.loop||$related[index+
1])timeOut=setTimeout(publicMethod.next,settings.slideshowSpeed)}).bind(event_load,function(){clearTimeout(timeOut)}).one(click+" "+event_cleanup,stop);$box.removeClass(className+"off").addClass(className+"on");timeOut=setTimeout(publicMethod.next,settings.slideshowSpeed)};stop=function(){clearTimeout(timeOut);$slideshow.html(settings.slideshowStart).unbind([event_complete,event_load,event_cleanup,click].join(" ")).one(click,function(){publicMethod.next();start()});$box.removeClass(className+"on").addClass(className+
"off")};if(settings.slideshowAuto)start();else stop()}else $box.removeClass(className+"off "+className+"on")}function launch(target){if(!closing){element=target;makeSettings();$related=$(element);index=0;if(settings.rel!=="nofollow"){$related=$("."+boxElement).filter(function(){var data=$.data(this,colorbox),relRelated;if(data)relRelated=$(this).data("rel")||data.rel||this.rel;return relRelated===settings.rel});index=$related.index(element);if(index===-1){$related=$related.add(element);index=$related.length-
1}}if(!open){open=active=true;$box.show();if(settings.returnFocus){$(element).blur();$(document).one(event_closed,function(){$(element).focus()})}$overlay.css({opacity:parseFloat(settings.opacity),cursor:settings.overlayClose?"pointer":"auto"}).show();settings.w=setSize(settings.initialWidth,"x");settings.h=setSize(settings.initialHeight,"y");publicMethod.position();if(isIE6)$window.bind("resize."+event_ie6+" scroll."+event_ie6,function(){$overlay.css({width:$window.width(),height:$window.height(),
top:$window.scrollTop(),left:$window.scrollLeft()})}).trigger("resize."+event_ie6);trigger(event_open,settings.onOpen);$groupControls.add($title).hide();$close.html(settings.close).show()}publicMethod.load(true)}}function appendHTML(){if(!$box&&document.body){init=false;$window=$(window);$box=$tag(div).attr({id:colorbox,"class":isIE?prefix+(isIE6?"IE6":"IE"):""}).hide();$overlay=$tag(div,"Overlay",isIE6?"position:absolute":"").hide();$loadingOverlay=$tag(div,"LoadingOverlay").add($tag(div,"LoadingGraphic"));
$wrap=$tag(div,"Wrapper");$content=$tag(div,"Content").append($loaded=$tag(div,"LoadedContent","width:0; height:0; overflow:hidden"),$title=$tag(div,"Title"),$current=$tag(div,"Current"),$next=$tag(div,"Next"),$prev=$tag(div,"Previous"),$slideshow=$tag(div,"Slideshow").bind(event_open,slideshow),$close=$tag(div,"Close"));$wrap.append($tag(div).append($tag(div,"TopLeft"),$topBorder=$tag(div,"TopCenter"),$tag(div,"TopRight")),$tag(div,false,"clear:left").append($leftBorder=$tag(div,"MiddleLeft"),$content,
$rightBorder=$tag(div,"MiddleRight")),$tag(div,false,"clear:left").append($tag(div,"BottomLeft"),$bottomBorder=$tag(div,"BottomCenter"),$tag(div,"BottomRight"))).find("div div").css({"float":"left"});$loadingBay=$tag(div,false,"position:absolute; width:9999px; visibility:hidden; display:none");$groupControls=$next.add($prev).add($current).add($slideshow);$(document.body).append($overlay,$box.append($wrap,$loadingBay))}}function addBindings(){function clickHandler(e){if(!(e.which>1||e.shiftKey||e.altKey||
e.metaKey)){e.preventDefault();launch(this)}}if($box){if(!init){init=true;$box.css({visibility:"hidden",display:"block"});interfaceHeight=$topBorder.height()+$bottomBorder.height()+$content.outerHeight(true)-$content.height();interfaceWidth=$leftBorder.width()+$rightBorder.width()+$content.outerWidth(true)-$content.width();loadedHeight=$loaded.outerHeight(true);loadedWidth=$loaded.outerWidth(true);$box.css({visibility:"visible",display:"none"});$next.click(function(){publicMethod.next()});$prev.click(function(){publicMethod.prev()});
$close.click(function(){publicMethod.close()});$overlay.click(function(){if(settings.overlayClose)publicMethod.close()});$(document).bind("keydown."+prefix,function(e){var key=e.keyCode;if(open&&settings.escKey&&key===27){e.preventDefault();publicMethod.close()}if(open&&settings.arrowKey&&$related[1])if(key===37){e.preventDefault();$prev.click()}else if(key===39){e.preventDefault();$next.click()}});if($.isFunction($.fn.on))$(document).on("click."+prefix,"."+boxElement,clickHandler);else $("."+boxElement).live("click."+
prefix,clickHandler)}return true}return false}if($.colorbox)return;$(appendHTML);publicMethod=$.fn[colorbox]=$[colorbox]=function(options,callback){var $this=this;options=options||{};appendHTML();if(addBindings()){if($.isFunction($this)){$this=$("<a/>");options.open=true}else if(!$this[0])return $this;if(callback)options.onComplete=callback;$this.each(function(){$.data(this,colorbox,$.extend({},$.data(this,colorbox)||defaults,options))}).addClass(boxElement);if($.isFunction(options.open)&&options.open.call($this)||
options.open)launch($this[0])}return $this};publicMethod.position=function(speed,loadedCallback){var css,top=0,left=0,offset=$box.offset(),scrollTop,scrollLeft;$window.unbind("resize."+prefix);$box.css({top:-9E4,left:-9E4});scrollTop=$window.scrollTop();scrollLeft=$window.scrollLeft();if(settings.fixed&&!isIE6){offset.top-=scrollTop;offset.left-=scrollLeft;$box.css({position:"fixed"})}else{top=scrollTop;left=scrollLeft;$box.css({position:"absolute"})}if(settings.right!==false)left+=Math.max($window.width()-
settings.w-loadedWidth-interfaceWidth-setSize(settings.right,"x"),0);else if(settings.left!==false)left+=setSize(settings.left,"x");else left+=Math.round(Math.max($window.width()-settings.w-loadedWidth-interfaceWidth,0)/2);if(settings.bottom!==false)top+=Math.max($window.height()-settings.h-loadedHeight-interfaceHeight-setSize(settings.bottom,"y"),0);else if(settings.top!==false)top+=setSize(settings.top,"y");else top+=Math.round(Math.max($window.height()-settings.h-loadedHeight-interfaceHeight,0)/
2);$box.css({top:offset.top,left:offset.left});speed=$box.width()===settings.w+loadedWidth&&$box.height()===settings.h+loadedHeight?0:speed||0;$wrap[0].style.width=$wrap[0].style.height="9999px";function modalDimensions(that){$topBorder[0].style.width=$bottomBorder[0].style.width=$content[0].style.width=parseInt(that.style.width,10)-interfaceWidth+"px";$content[0].style.height=$leftBorder[0].style.height=$rightBorder[0].style.height=parseInt(that.style.height,10)-interfaceHeight+"px"}css={width:settings.w+
loadedWidth+interfaceWidth,height:settings.h+loadedHeight+interfaceHeight,top:top,left:left};if(speed===0)$box.css(css);$box.dequeue().animate(css,{duration:speed,complete:function(){modalDimensions(this);active=false;$wrap[0].style.width=settings.w+loadedWidth+interfaceWidth+"px";$wrap[0].style.height=settings.h+loadedHeight+interfaceHeight+"px";if(settings.reposition)setTimeout(function(){$window.bind("resize."+prefix,publicMethod.position)},1);if(loadedCallback)loadedCallback()},step:function(){modalDimensions(this)}})};
publicMethod.resize=function(options){if(open){options=options||{};if(options.width)settings.w=setSize(options.width,"x")-loadedWidth-interfaceWidth;if(options.innerWidth)settings.w=setSize(options.innerWidth,"x");$loaded.css({width:settings.w});if(options.height)settings.h=setSize(options.height,"y")-loadedHeight-interfaceHeight;if(options.innerHeight)settings.h=setSize(options.innerHeight,"y");if(!options.innerHeight&&!options.height){$loaded.css({height:"auto"});settings.h=$loaded.height()}$loaded.css({height:settings.h});
publicMethod.position(settings.transition==="none"?0:settings.speed)}};publicMethod.prep=function(object){if(!open)return;var callback,speed=settings.transition==="none"?0:settings.speed;$loaded.empty().remove();$loaded=$tag(div,"LoadedContent").append(object);function getWidth(){settings.w=settings.w||$loaded.width();settings.w=settings.mw&&settings.mw<settings.w?settings.mw:settings.w;return settings.w}function getHeight(){settings.h=settings.h||$loaded.height();settings.h=settings.mh&&settings.mh<
settings.h?settings.mh:settings.h;return settings.h}$loaded.hide().appendTo($loadingBay.show()).css({width:getWidth(),overflow:settings.scrolling?"auto":"hidden"}).css({height:getHeight()}).prependTo($content);$loadingBay.hide();$(photo).css({"float":"none"});callback=function(){var total=$related.length,iframe,frameBorder="frameBorder",allowTransparency="allowTransparency",complete;if(!open)return;function removeFilter(){if(isIE)$box[0].style.removeAttribute("filter")}complete=function(){clearTimeout(loadingTimer);
$loadingOverlay.remove();trigger(event_complete,settings.onComplete)};if(isIE)if(photo)$loaded.fadeIn(100);$title.html(settings.title).add($loaded).show();if(total>1){if(typeof settings.current==="string")$current.html(settings.current.replace("{current}",index+1).replace("{total}",total)).show();$next[settings.loop||index<total-1?"show":"hide"]().html(settings.next);$prev[settings.loop||index?"show":"hide"]().html(settings.previous);if(settings.slideshow)$slideshow.show();if(settings.preloading)$.each([getIndex(-1),
getIndex(1)],function(){var src,img,i=$related[this],data=$.data(i,colorbox);if(data&&data.href){src=data.href;if($.isFunction(src))src=src.call(i)}else src=i.href;if(isImage(src)){img=new Image;img.src=src}})}else $groupControls.hide();if(settings.iframe){iframe=$tag("iframe")[0];if(frameBorder in iframe)iframe[frameBorder]=0;if(allowTransparency in iframe)iframe[allowTransparency]="true";if(!settings.scrolling)iframe.scrolling="no";$(iframe).attr({src:settings.href,name:(new Date).getTime(),"class":prefix+
"Iframe",allowFullScreen:true,webkitAllowFullScreen:true,mozallowfullscreen:true}).one("load",complete).appendTo($loaded);$(document).one(event_purge,function(){iframe.src="//about:blank"});if(settings.fastIframe)$(iframe).trigger("load")}else complete();if(settings.transition==="fade")$box.fadeTo(speed,1,removeFilter);else removeFilter()};if(settings.transition==="fade")$box.fadeTo(speed,0,function(){publicMethod.position(0,callback)});else publicMethod.position(speed,callback)};publicMethod.load=
function(launched){var href,setResize,prep=publicMethod.prep,$inline;active=true;photo=false;element=$related[index];if(!launched)makeSettings();if(className)$box.add($overlay).removeClass(className);if(settings.className)$box.add($overlay).addClass(settings.className);className=settings.className;trigger(event_purge);trigger(event_load,settings.onLoad);settings.h=settings.height?setSize(settings.height,"y")-loadedHeight-interfaceHeight:settings.innerHeight&&setSize(settings.innerHeight,"y");settings.w=
settings.width?setSize(settings.width,"x")-loadedWidth-interfaceWidth:settings.innerWidth&&setSize(settings.innerWidth,"x");settings.mw=settings.w;settings.mh=settings.h;if(settings.maxWidth){settings.mw=setSize(settings.maxWidth,"x")-loadedWidth-interfaceWidth;settings.mw=settings.w&&settings.w<settings.mw?settings.w:settings.mw}if(settings.maxHeight){settings.mh=setSize(settings.maxHeight,"y")-loadedHeight-interfaceHeight;settings.mh=settings.h&&settings.h<settings.mh?settings.h:settings.mh}href=
settings.href;loadingTimer=setTimeout(function(){$loadingOverlay.appendTo($content)},100);if(settings.inline){$inline=$tag(div).hide().insertBefore($(href)[0]);$(document).one(event_purge,function(){$inline.replaceWith($loaded.children())});prep($(href))}else if(settings.iframe)prep(" ");else if(settings.html)prep(settings.html);else if(isImage(href)){$(photo=new Image).addClass(prefix+"Photo").bind("error",function(){settings.title=false;prep($tag(div,"Error").html(settings.imgError))}).one("load",
function(){var percent;if(settings.scalePhotos){setResize=function(){photo.height-=photo.height*percent;photo.width-=photo.width*percent};if(settings.mw&&photo.width>settings.mw){percent=(photo.width-settings.mw)/photo.width;setResize()}if(settings.mh&&photo.height>settings.mh){percent=(photo.height-settings.mh)/photo.height;setResize()}}if(settings.h)photo.style.marginTop=Math.max(settings.h-photo.height,0)/2+"px";if($related[1]&&(settings.loop||$related[index+1])){photo.style.cursor="pointer";photo.onclick=
function(){publicMethod.next()}}if(isIE)photo.style.msInterpolationMode="bicubic";setTimeout(function(){prep(photo)},1)});setTimeout(function(){photo.src=href},1)}else if(href)$loadingBay.load(href,settings.data,function(data,status){prep(status==="error"?$tag(div,"Error").html(settings.xhrError):$(this).contents())})};publicMethod.next=function(){if(!active&&$related[1]&&(settings.loop||$related[index+1])){index=getIndex(1);publicMethod.load()}};publicMethod.prev=function(){if(!active&&$related[1]&&
(settings.loop||index)){index=getIndex(-1);publicMethod.load()}};publicMethod.close=function(){if(open&&!closing){closing=true;open=false;trigger(event_cleanup,settings.onCleanup);$window.unbind("."+prefix+" ."+event_ie6);$overlay.fadeTo(200,0);$box.stop().fadeTo(300,0,function(){$box.add($overlay).css({"opacity":1,cursor:"auto"}).hide();trigger(event_purge);$loaded.empty().remove();setTimeout(function(){closing=false;trigger(event_closed,settings.onClosed)},1)})}};publicMethod.remove=function(){$([]).add($box).add($overlay).remove();
$box=null;$("."+boxElement).removeData(colorbox).removeClass(boxElement);$(document).undelegate("."+boxElement)};publicMethod.element=function(){return $(element)};publicMethod.settings=defaults})(jQuery,document,window);
jQuery.fn.extend({initColorboxLinkFicheInfo:function(){var liensFicheDetail=this;if(liensFicheDetail.length>0){liensFicheDetail.unbind("click");liensFicheDetail.colorbox({iframe:true,ajax:true,width:"100%",height:"95%",className:"popupFiche",href:function(){var href=$(this).attr("href");if(href.indexOf("?")>-1)if(href.indexOf("#")>-1)href=href.replace("#","&popup=1#");else href+="&popup=POPUP";else if(href.indexOf("#")>-1)href=href.replace("#","?popup=1#");else href+="?popup=1";return href},onOpen:function(){$("html").addClass("colorboxOn")},
onClosed:function(){$("html").removeClass("colorboxOn")}})}}});

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.cookie-1.1.js **************************************************************/ 
(function($,document){var pluses=/\+/g;function raw(s){return s}function decoded(s){return decodeURIComponent(s.replace(pluses," "))}$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value==null)){options=$.extend({},$.cookie.defaults,options);if(value==null)options.expires=-1;if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date;t.setDate(t.getDate()+days)}value=String(value);return document.cookie=
[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join("")}options=value||$.cookie.defaults||{};var decode=options.raw?raw:decoded;var cookies=document.cookie.split("; ");for(var i=0,parts;parts=cookies[i]&&cookies[i].split("=");i++)if(decode(parts.shift())===key)return decode(parts.join("="));return null};
$.cookie.defaults={}})(jQuery,document);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/10-jquery.fv2.core.js **************************************************************/ 
(function($,undefined){$.fv2=$.fv2||{};$.extend($.fv2,{})})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/20-jquery.fv2-noreload.js **************************************************************/ 
(function($){$.fv2.noreload=function(el,options,myFunctionParam){var base=this;base.$el=$(el);base.el=el;base.$el.data("fv2.noreload",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=$.extend({},$.fv2.noreload.defaultOptions,options);base.$el.bind("click",base._charge)};base._charge=function(event){base._attente();var path=base.$el.attr("href");var callback_function=base._callback;if(base.options.decalageAgenda===true)callback_function=base._callbackAgenda;$.ajax({url:path,
data:{avecdesign:"non"},dataType:"html",complete:function(jqXHR,textStatus){condition=typeof jqXHR.isResolved!=="undefined"?jqXHR.isResolved():textStatus==="success"||textStatus==="notmodified";condition?callback_function(jqXHR.responseText):instance._error("end")}});return false};base._callbackAgenda=function(data){var decalage;data="<div>"+data+"</div>";data_semaine=$(data).find(".semaine-encours");data_liste=$(data).find(base.options.container);if(base.options.sens=="passe"){$(".semaine-precedente").html(data_semaine);
$(".deplacable").css("margin-left","-100%");decalage={"margin-left":"0%"}}if(base.options.sens=="futur"){$(".semaine-suivante").html(data_semaine);decalage={"margin-left":"-100%"}}$(".deplacable").animate(decalage,1E3,"linear",function(){$(base.options.container).html(data_liste.html());if(base.options.callback!=undefined)base.options.callback()})};base._callback=function(data){data="<div>"+data+"</div>";data=$(data).find(base.options.container);$(base.options.container).html(data.html());if(base.options.callback!=
undefined)base.options.callback()};base._attente=function(){if(base.options.container_blank!=""){$(base.options.container_blank).css("position","relative");$(base.options.container_blank).append('<div id="fv2-norelad-loader" ><img src="https://static.ingenie.fr/images/ajax/chargement-moyen-rond.gif" /></div>');$("#fv2-norelad-loader").css("text-align","center");$("#fv2-norelad-loader").fadeTo("fast",0.3);$("#fv2-norelad-loader").css("background","#fff");$("#fv2-norelad-loader").css("position","absolute");
$("#fv2-norelad-loader").css("top","0");$("#fv2-norelad-loader").css("left","0");$("#fv2-norelad-loader").css("height","100%");$("#fv2-norelad-loader").css("width","100%");$("#fv2-norelad-loader").css("z-index","1000")}};base.init()};$.fv2.noreload.defaultOptions={container:"container",container_blank:"",callback:undefined,decalageAgenda:false,sens:undefined};$.fn.fv2_noreload=function(options,myFunctionParam){return this.each(function(){new $.fv2.noreload(this,options,myFunctionParam)})}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/30-jquery.fv2-anchor.js **************************************************************/ 
(function($){$.fv2.anchor=function(el,options,myFunctionParam){var base=this;base.$el=$(el);base.el=el;var defauts={"ScrollTopMargin":0};var parametres=$.extend(defauts,options);console.log(parametres.ScrollTopMargin);base.$el.data("fv2.anchor",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=$.extend({},$.fv2.anchor.defaultOptions,options);base.$el.bind("click",base._go)};base._go=function(event){var path="";if(base.$el.attr("href"))path=base.$el.attr("href");else base.$el.find("a").each(function(){path=
$(this).attr("href")});console.log("fv2_anchor path",path);if(path!=""){var explodePath=path.split("#");try{$("html,body").animate({scrollTop:$("#"+explodePath[1]).offset().top-parametres.ScrollTopMargin});console.log("fv2_anchor animate scrollTop",$("#"+explodePath[1]).offset().top-parametres.ScrollTopMargin)}catch(err){console.log("err animate animate :",err.message)}try{if(window.parent.socket!=undefined){var socketMessage="{action: 'scrollTo', params: {top: '"+$("#"+explodePath[1]).offset().top+
"'}}";window.parent.socket.postMessage("##"+socketMessage);console.log("window.parent.socket ok")}else console.log("window.parent.socket undefined")}catch(err){console.log("err window.parent.socket :",err.message)}}return false};base.init()};$.fv2.anchor.defaultOptions={container:"container",callback:undefined};$.fn.fv2_anchor=function(options,myFunctionParam){return this.each(function(){new $.fv2.anchor(this,options,myFunctionParam)})}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/40-jquery.fv2.stats.js **************************************************************/ 
(function($){$.fv2.stats=function(el,options,myFunctionParam){var base=this;base.$el=$(el);base.el=el;base.$el.data("fv2.stats",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=$.extend({},$.fv2.stats.defaultOptions,options);base.$el.bind("click",base._stat)};base._stat=function(event){if(base.options.organisme&&base.options.site&&base.options.langue&&base.options.url_stat){var path=base.$el.attr("href");var contexte=base.$el.attr("data-contexte");if(path&&contexte&&contexte!=
""){var explodeContexte=contexte.split("-");var gsw_organisme=base.options.organisme;var gsw_site=base.options.site;var gsw_langue=base.options.langue;var gsw_url="http://"+base.options.url_stat+"/scripts/stats/web/stats.php";var gsw_vars=Array();gsw_vars["activer_redirection"]="NON";if(explodeContexte[0]=="PRESTATAIRE"||explodeContexte[0]=="PRESTATION"){gsw_vars["TYPEPRESTATAIRE"]=explodeContexte[1];gsw_vars["CODEPRESTATAIRE"]=explodeContexte[2];if(explodeContexte[0]=="PRESTATION")gsw_vars["CODEPRESTATION"]=
explodeContexte[3];gsw_vars["lien_prestataire"]=path}if(explodeContexte[0]=="PAGE"){gsw_vars["TYPAGE"]=explodeContexte[1];gsw_vars["CODEPAGE"]=explodeContexte[2];gsw_vars["lien_page"]=path}gsw_log(gsw_organisme,gsw_site,gsw_langue,gsw_url,gsw_vars)}}else;return true};base.init()};$.fv2.stats.defaultOptions={organisme:undefined,site:undefined,langue:undefined,url_stat:undefined};$.fn.fv2_stats=function(options,myFunctionParam){return this.each(function(){new $.fv2.stats(this,options,myFunctionParam)})}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/50-jquery.fv2.responsive-menu.js **************************************************************/ 
(function($){$.fv2.responsiveMenu=function(el,options,myFunctionParam){var base=this;base.$el=$(el);base.el=el;if(base.$el.data("fv2.responsiveMenu")!=undefined)return;base.$el.data("fv2.responsiveMenu",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=$.extend({},$.fv2.responsiveMenu.defaultOptions,options);base._run()};base._run=function(){if($(".responsiveMenu.tablet").length>0)_is_touch_device=true;else _is_touch_device=false;var pull=$(base.$el.find("#pull"));menu=
$(base.$el.find("ul:first"));width=$(window).width();$(pull).on("click",function(e){menu.slideToggle();e.preventDefault()});$(window).resize(function(){if((width>768||_is_touch_device==true)&&menu.is(":hidden"))menu.removeAttr("style")});if(width<768||_is_touch_device==true)$(base.$el.find("ul:first > li > a")).on("click",function(e){if($(this).next("ul").children().length>0){$(base.$el.find("ul:first > li > ul")).slideUp();if($(this).next("ul").is(":hidden"))$(this).next("ul").slideDown();else $(this).next("ul").slideUp()}else{var url=
$(this).attr("href");$(location).attr("href",url)}e.preventDefault()});if(_is_touch_device==true)$(base.$el.find("ul:first > li > ul")).hide()};base.init()};$.fv2.responsiveMenu.defaultOptions={};$.fn.fv2_responsiveMenu=function(options,myFunctionParam){return this.each(function(){new $.fv2.responsiveMenu(this,options,myFunctionParam)})}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.ingenie-unique/60-jquery.fv2.responsive-bandeau.js **************************************************************/ 
(function($){$.fv2.responsiveBandeau=function(el,options,myFunctionParam){var base=this;base.$el=$(el);base.el=el;base.$el.data("fv2.responsiveBandeau",base);base.init=function(){base.myFunctionParam=myFunctionParam;base.options=$.extend({},$.fv2.responsiveBandeau.defaultOptions,options);base._run()};base._run=function(){var pull=$(base.$el.find("#pull_bandeau"));bandeau=$(base.$el.find("ul:first"));width=$(window).width();$(pull).on("click",function(e){bandeau.slideToggle(function(){if($(pull).next("ul").is(":hidden"))$(pull).removeClass("on");
else $(pull).addClass("on")});e.preventDefault()});$(window).resize(function(){if(width>768&&bandeau.is(":hidden"))bandeau.removeAttr("style")});if(width<768)$(base.$el.find("ul:first > li > a")).on("click",function(e){if($(this).next("ul").children().length>0){$(base.$el.find("ul:first > li > ul")).slideUp();if($(this).next("ul").is(":hidden"))$(this).next("ul").slideDown();else $(this).next("ul").slideUp()}else{var url=$(this).attr("href");$(location).attr("href",url)}e.preventDefault()})};base.init()};
$.fv2.responsiveBandeau.defaultOptions={};$.fn.fv2_responsiveBandeau=function(options,myFunctionParam){return this.each(function(){new $.fv2.responsiveBandeau(this,options,myFunctionParam)})}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.qtip-2.0.1-31.js **************************************************************/ 
(function(window,document,undefined){(function(factory){if(typeof define==="function"&&define.amd)define(["jquery"],factory);else if(jQuery&&!jQuery.fn.qtip)factory(jQuery)})(function($){var TRUE=true,FALSE=false,NULL=null,X="x",Y="y",WIDTH="width",HEIGHT="height",TOP="top",LEFT="left",BOTTOM="bottom",RIGHT="right",CENTER="center",FLIP="flip",FLIPINVERT="flipinvert",SHIFT="shift",BLANKIMG="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",QTIP,PLUGINS,MOUSE,NAMESPACE="qtip",
HASATTR="data-hasqtip",usedIDs={},widget=["ui-widget","ui-tooltip"],selector="div.qtip."+NAMESPACE,defaultClass=NAMESPACE+"-default",focusClass=NAMESPACE+"-focus",hoverClass=NAMESPACE+"-hover",replaceSuffix="_replacedByqTip",oldtitle="oldtitle",trackingBound;function storeMouse(event){MOUSE={pageX:event.pageX,pageY:event.pageY,type:"mousemove",scrollX:window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,scrollY:window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop}}
function sanitizeOptions(opts){var invalid=function(a){return a===NULL||"object"!==typeof a},invalidContent=function(c){return!$.isFunction(c)&&(!c&&!c.attr||c.length<1||"object"===typeof c&&!c.jquery&&!c.then)};if(!opts||"object"!==typeof opts)return FALSE;if(invalid(opts.metadata))opts.metadata={type:opts.metadata};if("content"in opts){if(invalid(opts.content)||opts.content.jquery)opts.content={text:opts.content};if(invalidContent(opts.content.text||FALSE))opts.content.text=FALSE;if("title"in opts.content){if(invalid(opts.content.title))opts.content.title=
{text:opts.content.title};if(invalidContent(opts.content.title.text||FALSE))opts.content.title.text=FALSE}}if("position"in opts&&invalid(opts.position))opts.position={my:opts.position,at:opts.position};if("show"in opts&&invalid(opts.show))opts.show=opts.show.jquery?{target:opts.show}:opts.show===TRUE?{ready:TRUE}:{event:opts.show};if("hide"in opts&&invalid(opts.hide))opts.hide=opts.hide.jquery?{target:opts.hide}:{event:opts.hide};if("style"in opts&&invalid(opts.style))opts.style={classes:opts.style};
$.each(PLUGINS,function(){if(this.sanitize)this.sanitize(opts)});return opts}function QTip(target,options,id,attr){var self=this,docBody=document.body,tooltipID=NAMESPACE+"-"+id,isPositioning=0,isDrawing=0,tooltip=$(),namespace=".qtip-"+id,disabledClass="qtip-disabled",elements,cache;self.id=id;self.rendered=FALSE;self.destroyed=FALSE;self.elements=elements={target:target};self.timers={img:{}};self.options=options;self.checks={};self.plugins={};self.cache=cache={event:{},target:$(),disabled:FALSE,
attr:attr,onTarget:FALSE,lastClass:""};function convertNotation(notation){var i=0,obj,option=options,levels=notation.split(".");while(option=option[levels[i++]])if(i<levels.length)obj=option;return[obj||options,levels.pop()]}function createWidgetClass(cls){return widget.concat("").join(cls?"-"+cls+" ":" ")}function setWidget(){var on=options.style.widget,disabled=tooltip.hasClass(disabledClass);tooltip.removeClass(disabledClass);disabledClass=on?"ui-state-disabled":"qtip-disabled";tooltip.toggleClass(disabledClass,
disabled);tooltip.toggleClass("ui-helper-reset "+createWidgetClass(),on).toggleClass(defaultClass,options.style.def&&!on);if(elements.content)elements.content.toggleClass(createWidgetClass("content"),on);if(elements.titlebar)elements.titlebar.toggleClass(createWidgetClass("header"),on);if(elements.button)elements.button.toggleClass(NAMESPACE+"-icon",!on)}function removeTitle(reposition){if(elements.title){elements.titlebar.remove();elements.titlebar=elements.title=elements.button=NULL;if(reposition!==
FALSE)self.reposition()}}function createButton(){var button=options.content.title.button,isString=typeof button==="string",close=isString?button:"Close tooltip";if(elements.button)elements.button.remove();if(button.jquery)elements.button=button;else elements.button=$("<a />",{"class":"qtip-close "+(options.style.widget?"":NAMESPACE+"-icon"),"title":close,"aria-label":close}).prepend($("<span />",{"class":"ui-icon ui-icon-close","html":"&times;"}));elements.button.appendTo(elements.titlebar||tooltip).attr("role",
"button").click(function(event){if(!tooltip.hasClass(disabledClass))self.hide(event);return FALSE})}function createTitle(){var id=tooltipID+"-title";if(elements.titlebar)removeTitle();elements.titlebar=$("<div />",{"class":NAMESPACE+"-titlebar "+(options.style.widget?createWidgetClass("header"):"")}).append(elements.title=$("<div />",{"id":id,"class":NAMESPACE+"-title","aria-atomic":TRUE})).insertBefore(elements.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(event){$(this).toggleClass("ui-state-active ui-state-focus",
event.type.substr(-4)==="down")}).delegate(".qtip-close","mouseover mouseout",function(event){$(this).toggleClass("ui-state-hover",event.type==="mouseover")});if(options.content.title.button)createButton()}function updateButton(button){var elem=elements.button;if(!self.rendered)return FALSE;if(!button)elem.remove();else createButton()}function updateTitle(content,reposition){var elem=elements.title;if(!self.rendered||!content)return FALSE;if($.isFunction(content))content=content.call(target,cache.event,
self);if(content===FALSE||!content&&content!=="")return removeTitle(FALSE);else if(content.jquery&&content.length>0)elem.empty().append(content.css({display:"block"}));else elem.html(content);if(reposition!==FALSE&&self.rendered&&tooltip[0].offsetWidth>0)self.reposition(cache.event)}function deferredContent(deferred){if(deferred&&$.isFunction(deferred.done))deferred.done(function(c){updateContent(c,null,FALSE)})}function updateContent(content,reposition,checkDeferred){var elem=elements.content;if(!self.rendered||
!content)return FALSE;if($.isFunction(content))content=content.call(target,cache.event,self)||"";if(checkDeferred!==FALSE)deferredContent(options.content.deferred);if(content.jquery&&content.length>0)elem.empty().append(content.css({display:"block"}));else elem.html(content);function imagesLoaded(next){var elem=$(this),images=elem.find("img").add(elem.filter("img")),loaded=[];function imgLoaded(img){if(img.src===BLANKIMG||$.inArray(img,loaded)!==-1)return;loaded.push(img);$.data(img,"imagesLoaded",
{src:img.src});if(images.length===loaded.length){setTimeout(next);images.unbind(".imagesLoaded")}}if(!images.length)return next();images.bind("load.imagesLoaded error.imagesLoaded",function(event){imgLoaded(event.target)}).each(function(i,el){var src=el.src,cached=$.data(el,"imagesLoaded");if(cached&&cached.src===src||el.complete&&el.naturalWidth)imgLoaded(el);else if(el.readyState||el.complete){el.src=BLANKIMG;el.src=src}})}if(self.rendered<0)tooltip.queue("fx",imagesLoaded);else{isDrawing=0;imagesLoaded.call(tooltip[0],
$.noop)}return self}function assignEvents(){var posOptions=options.position,targets={show:options.show.target,hide:options.hide.target,viewport:$(posOptions.viewport),document:$(document),body:$(document.body),window:$(window)},events={show:$.trim(""+options.show.event).split(" "),hide:$.trim(""+options.hide.event).split(" ")},IE6=PLUGINS.ie===6;function showMethod(event){if(tooltip.hasClass(disabledClass))return FALSE;clearTimeout(self.timers.show);clearTimeout(self.timers.hide);var callback=function(){self.toggle(TRUE,
event)};if(options.show.delay>0)self.timers.show=setTimeout(callback,options.show.delay);else callback()}function hideMethod(event){if(tooltip.hasClass(disabledClass)||isPositioning||isDrawing)return FALSE;var relatedTarget=$(event.relatedTarget),ontoTooltip=relatedTarget.closest(selector)[0]===tooltip[0],ontoTarget=relatedTarget[0]===targets.show[0];clearTimeout(self.timers.show);clearTimeout(self.timers.hide);if(this!==relatedTarget[0]&&posOptions.target==="mouse"&&ontoTooltip||options.hide.fixed&&
/mouse(out|leave|move)/.test(event.type)&&(ontoTooltip||ontoTarget)){try{event.preventDefault();event.stopImmediatePropagation()}catch(e){}return}if(options.hide.delay>0)self.timers.hide=setTimeout(function(){self.hide(event)},options.hide.delay);else self.hide(event)}function inactiveMethod(event){if(tooltip.hasClass(disabledClass))return FALSE;clearTimeout(self.timers.inactive);self.timers.inactive=setTimeout(function(){self.hide(event)},options.hide.inactive)}function repositionMethod(event){if(self.rendered&&
tooltip[0].offsetWidth>0)self.reposition(event)}tooltip.bind("mouseenter"+namespace+" mouseleave"+namespace,function(event){var state=event.type==="mouseenter";if(state)self.focus(event);tooltip.toggleClass(hoverClass,state)});if(/mouse(out|leave)/i.test(options.hide.event))if(options.hide.leave==="window")targets.document.bind("mouseout"+namespace+" blur"+namespace,function(event){if(!/select|option/.test(event.target.nodeName)&&!event.relatedTarget)self.hide(event)});if(options.hide.fixed){targets.hide=
targets.hide.add(tooltip);tooltip.bind("mouseover"+namespace,function(){if(!tooltip.hasClass(disabledClass))clearTimeout(self.timers.hide)})}else if(/mouse(over|enter)/i.test(options.show.event))targets.hide.bind("mouseleave"+namespace,function(event){clearTimeout(self.timers.show)});if((""+options.hide.event).indexOf("unfocus")>-1)posOptions.container.closest("html").bind("mousedown"+namespace+" touchstart"+namespace,function(event){var elem=$(event.target),enabled=self.rendered&&!tooltip.hasClass(disabledClass)&&
tooltip[0].offsetWidth>0,isAncestor=elem.parents(selector).filter(tooltip[0]).length>0;if(elem[0]!==target[0]&&elem[0]!==tooltip[0]&&!isAncestor&&!target.has(elem[0]).length&&enabled)self.hide(event)});if("number"===typeof options.hide.inactive){targets.show.bind("qtip-"+id+"-inactive",inactiveMethod);$.each(QTIP.inactiveEvents,function(index,type){targets.hide.add(elements.tooltip).bind(type+namespace+"-inactive",inactiveMethod)})}$.each(events.hide,function(index,type){var showIndex=$.inArray(type,
events.show),targetHide=$(targets.hide);if(showIndex>-1&&targetHide.add(targets.show).length===targetHide.length||type==="unfocus"){targets.show.bind(type+namespace,function(event){if(tooltip[0].offsetWidth>0)hideMethod(event);else showMethod(event)});delete events.show[showIndex]}else targets.hide.bind(type+namespace,hideMethod)});$.each(events.show,function(index,type){targets.show.bind(type+namespace,showMethod)});if("number"===typeof options.hide.distance)targets.show.add(tooltip).bind("mousemove"+
namespace,function(event){var origin=cache.origin||{},limit=options.hide.distance,abs=Math.abs;if(abs(event.pageX-origin.pageX)>=limit||abs(event.pageY-origin.pageY)>=limit)self.hide(event)});if(posOptions.target==="mouse"){targets.show.bind("mousemove"+namespace,storeMouse);if(posOptions.adjust.mouse){if(options.hide.event){tooltip.bind("mouseleave"+namespace,function(event){if((event.relatedTarget||event.target)!==targets.show[0])self.hide(event)});elements.target.bind("mouseenter"+namespace+" mouseleave"+
namespace,function(event){cache.onTarget=event.type==="mouseenter"})}targets.document.bind("mousemove"+namespace,function(event){if(self.rendered&&cache.onTarget&&!tooltip.hasClass(disabledClass)&&tooltip[0].offsetWidth>0)self.reposition(event||MOUSE)})}}if(posOptions.adjust.resize||targets.viewport.length)($.event.special.resize?targets.viewport:targets.window).bind("resize"+namespace,repositionMethod);if(posOptions.adjust.scroll)targets.window.add(posOptions.container).bind("scroll"+namespace,repositionMethod)}
function unassignEvents(){var targets=[options.show.target[0],options.hide.target[0],self.rendered&&elements.tooltip[0],options.position.container[0],options.position.viewport[0],options.position.container.closest("html")[0],window,document];if(self.rendered)$([]).pushStack($.grep(targets,function(i){return typeof i==="object"})).unbind(namespace);else options.show.target.unbind(namespace+"-create")}self.checks.builtin={"^id$":function(obj,o,v){var id=v===TRUE?QTIP.nextid:v,tooltipID=NAMESPACE+"-"+
id;if(id!==FALSE&&id.length>0&&!$("#"+tooltipID).length){tooltip[0].id=tooltipID;elements.content[0].id=tooltipID+"-content";elements.title[0].id=tooltipID+"-title"}},"^content.text$":function(obj,o,v){updateContent(options.content.text)},"^content.deferred$":function(obj,o,v){deferredContent(options.content.deferred)},"^content.title.text$":function(obj,o,v){if(!v)return removeTitle();if(!elements.title&&v)createTitle();updateTitle(v)},"^content.title.button$":function(obj,o,v){updateButton(v)},
"^position.(my|at)$":function(obj,o,v){if("string"===typeof v)obj[o]=new PLUGINS.Corner(v)},"^position.container$":function(obj,o,v){if(self.rendered)tooltip.appendTo(v)},"^show.ready$":function(){if(!self.rendered)self.render(1);else self.toggle(TRUE)},"^style.classes$":function(obj,o,v){tooltip.attr("class",NAMESPACE+" qtip "+v)},"^style.width|height":function(obj,o,v){tooltip.css(o,v)},"^style.widget|content.title":setWidget,"^events.(render|show|move|hide|focus|blur)$":function(obj,o,v){tooltip[($.isFunction(v)?
"":"un")+"bind"]("tooltip"+o,v)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var posOptions=options.position;tooltip.attr("tracking",posOptions.target==="mouse"&&posOptions.adjust.mouse);unassignEvents();assignEvents()}};$.extend(self,{_triggerEvent:function(type,args,event){var callback=$.Event("tooltip"+type);callback.originalEvent=(event?$.extend({},event):NULL)||cache.event||NULL;tooltip.trigger(callback,[self].concat(args||[]));return!callback.isDefaultPrevented()},
render:function(show){if(self.rendered)return self;var text=options.content.text,title=options.content.title,posOptions=options.position;$.attr(target[0],"aria-describedby",tooltipID);tooltip=elements.tooltip=$("<div/>",{"id":tooltipID,"class":[NAMESPACE,defaultClass,options.style.classes,NAMESPACE+"-pos-"+options.position.my.abbrev()].join(" "),"width":options.style.width||"","height":options.style.height||"","tracking":posOptions.target==="mouse"&&posOptions.adjust.mouse,"role":"alert","aria-live":"polite",
"aria-atomic":FALSE,"aria-describedby":tooltipID+"-content","aria-hidden":TRUE}).toggleClass(disabledClass,cache.disabled).data("qtip",self).appendTo(options.position.container).append(elements.content=$("<div />",{"class":NAMESPACE+"-content","id":tooltipID+"-content","aria-atomic":TRUE}));self.rendered=-1;isPositioning=1;if(title.text){createTitle();if(!$.isFunction(title.text))updateTitle(title.text,FALSE)}else if(title.button)createButton();if(!$.isFunction(text)||text.then)updateContent(text,
FALSE);self.rendered=TRUE;setWidget();$.each(options.events,function(name,callback){if($.isFunction(callback))tooltip.bind(name==="toggle"?"tooltipshow tooltiphide":"tooltip"+name,callback)});$.each(PLUGINS,function(){if(this.initialize==="render")this(self)});assignEvents();tooltip.queue("fx",function(next){self._triggerEvent("render");isPositioning=0;if(options.show.ready||show)self.toggle(TRUE,cache.event,FALSE);next()});return self},get:function(notation){var result,o;switch(notation.toLowerCase()){case "dimensions":result=
{height:tooltip.outerHeight(FALSE),width:tooltip.outerWidth(FALSE)};break;case "offset":result=PLUGINS.offset(tooltip,options.position.container);break;default:o=convertNotation(notation.toLowerCase());result=o[0][o[1]];result=result.precedance?result.string():result;break}return result},set:function(option,value){var rmove=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,rdraw=/^content\.(title|attr)|style/i,reposition=FALSE,checks=self.checks,name;function callback(notation,
args){var category,rule,match;for(category in checks)for(rule in checks[category])if(match=(new RegExp(rule,"i")).exec(notation)){args.push(match);checks[category][rule].apply(self,args)}}if("string"===typeof option){name=option;option={};option[name]=value}else option=$.extend(TRUE,{},option);$.each(option,function(notation,value){var obj=convertNotation(notation.toLowerCase()),previous;previous=obj[0][obj[1]];obj[0][obj[1]]="object"===typeof value&&value.nodeType?$(value):value;option[notation]=
[obj[0],obj[1],value,previous];reposition=rmove.test(notation)||reposition});sanitizeOptions(options);isPositioning=1;$.each(option,callback);isPositioning=0;if(self.rendered&&tooltip[0].offsetWidth>0&&reposition)self.reposition(options.position.target==="mouse"?NULL:cache.event);return self},toggle:function(state,event){if(event){if(/over|enter/.test(event.type)&&/out|leave/.test(cache.event.type)&&options.show.target.add(event.target).length===options.show.target.length&&tooltip.has(event.relatedTarget).length)return self;
cache.event=$.extend({},event)}if(!self.rendered)return state?self.render(1):self;var type=state?"show":"hide",opts=options[type],otherOpts=options[!state?"show":"hide"],posOptions=options.position,contentOptions=options.content,width=tooltip.css("width"),visible=tooltip[0].offsetWidth>0,animate=state||opts.target.length===1,sameTarget=!event||opts.target.length<2||cache.target[0]===event.target,showEvent,delay;if((typeof state).search("boolean|number"))state=!visible;if(!tooltip.is(":animated")&&
visible===state&&sameTarget)return self;if(!self._triggerEvent(type,[90]))return self;$.attr(tooltip[0],"aria-hidden",!!!state);if(state){cache.origin=$.extend({},MOUSE);self.focus(event);if($.isFunction(contentOptions.text))updateContent(contentOptions.text,FALSE);if($.isFunction(contentOptions.title.text))updateTitle(contentOptions.title.text,FALSE);if(!trackingBound&&posOptions.target==="mouse"&&posOptions.adjust.mouse){$(document).bind("mousemove.qtip",storeMouse);trackingBound=TRUE}if(!width)tooltip.css("width",
tooltip.outerWidth());self.reposition(event,arguments[2]);if(!width)tooltip.css("width","");if(!!opts.solo)(typeof opts.solo==="string"?$(opts.solo):$(selector,opts.solo)).not(tooltip).not(opts.target).qtip("hide",$.Event("tooltipsolo"))}else{clearTimeout(self.timers.show);delete cache.origin;if(trackingBound&&!$(selector+'[tracking="true"]:visible',opts.solo).not(tooltip).length){$(document).unbind("mousemove.qtip");trackingBound=FALSE}self.blur(event)}function after(){if(state){if(PLUGINS.ie)tooltip[0].style.removeAttribute("filter");
tooltip.css("overflow","");if("string"===typeof opts.autofocus)$(opts.autofocus,tooltip).focus();opts.target.trigger("qtip-"+id+"-inactive")}else tooltip.css({display:"",visibility:"",opacity:"",left:"",top:""});self._triggerEvent(state?"visible":"hidden")}if(opts.effect===FALSE||animate===FALSE){tooltip[type]();after.call(tooltip)}else if($.isFunction(opts.effect)){tooltip.stop(1,1);opts.effect.call(tooltip,self);tooltip.queue("fx",function(n){after();n()})}else tooltip.fadeTo(90,state?1:0,after);
if(state)opts.target.trigger("qtip-"+id+"-inactive");return self},show:function(event){return self.toggle(TRUE,event)},hide:function(event){return self.toggle(FALSE,event)},focus:function(event){if(!self.rendered)return self;var qtips=$(selector),curIndex=parseInt(tooltip[0].style.zIndex,10),newIndex=QTIP.zindex+qtips.length,cachedEvent=$.extend({},event),focusedElem;if(!tooltip.hasClass(focusClass))if(self._triggerEvent("focus",[newIndex],cachedEvent)){if(curIndex!==newIndex){qtips.each(function(){if(this.style.zIndex>
curIndex)this.style.zIndex=this.style.zIndex-1});qtips.filter("."+focusClass).qtip("blur",cachedEvent)}tooltip.addClass(focusClass)[0].style.zIndex=newIndex}return self},blur:function(event){tooltip.removeClass(focusClass);self._triggerEvent("blur",[tooltip.css("zIndex")],event);return self},reposition:function(event,effect){if(!self.rendered||isPositioning)return self;isPositioning=1;var target=options.position.target,posOptions=options.position,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,
method=adjust.method.split(" "),elemWidth=tooltip.outerWidth(FALSE),elemHeight=tooltip.outerHeight(FALSE),targetWidth=0,targetHeight=0,type=tooltip.css("position"),viewport=posOptions.viewport,position={left:0,top:0},container=posOptions.container,visible=tooltip[0].offsetWidth>0,isScroll=event&&event.type==="scroll",win=$(window),adjusted,offset;if($.isArray(target)&&target.length===2){at={x:LEFT,y:TOP};position={left:target[0],top:target[1]}}else if(target==="mouse"&&(event&&event.pageX||cache.event.pageX)){at=
{x:LEFT,y:TOP};event=MOUSE&&MOUSE.pageX&&(adjust.mouse||!event||!event.pageX)?{pageX:MOUSE.pageX,pageY:MOUSE.pageY}:(event&&(event.type==="resize"||event.type==="scroll")?cache.event:event&&event.pageX&&event.type==="mousemove"?event:(!adjust.mouse||options.show.distance)&&cache.origin&&cache.origin.pageX?cache.origin:event)||event||cache.event||MOUSE||{};if(type!=="static")position=container.offset();position={left:event.pageX-position.left,top:event.pageY-position.top};if(adjust.mouse&&isScroll){position.left-=
MOUSE.scrollX-win.scrollLeft();position.top-=MOUSE.scrollY-win.scrollTop()}}else{if(target==="event"&&event&&event.target&&event.type!=="scroll"&&event.type!=="resize")cache.target=$(event.target);else if(target!=="event")cache.target=$(target.jquery?target:elements.target);target=cache.target;target=$(target).eq(0);if(target.length===0)return self;else if(target[0]===document||target[0]===window){targetWidth=PLUGINS.iOS?window.innerWidth:target.width();targetHeight=PLUGINS.iOS?window.innerHeight:
target.height();if(target[0]===window)position={top:(viewport||target).scrollTop(),left:(viewport||target).scrollLeft()}}else if(PLUGINS.imagemap&&target.is("area"))adjusted=PLUGINS.imagemap(self,target,at,PLUGINS.viewport?method:FALSE);else if(PLUGINS.svg&&target[0].ownerSVGElement)adjusted=PLUGINS.svg(self,target,at,PLUGINS.viewport?method:FALSE);else{targetWidth=target.outerWidth(FALSE);targetHeight=target.outerHeight(FALSE);position=target.offset()}if(adjusted){targetWidth=adjusted.width;targetHeight=
adjusted.height;offset=adjusted.offset;position=adjusted.position}position=PLUGINS.offset(target,position,container);if(PLUGINS.iOS>3.1&&PLUGINS.iOS<4.1||PLUGINS.iOS>=4.3&&PLUGINS.iOS<4.33||!PLUGINS.iOS&&type==="fixed"){position.left-=win.scrollLeft();position.top-=win.scrollTop()}position.left+=at.x===RIGHT?targetWidth:at.x===CENTER?targetWidth/2:0;position.top+=at.y===BOTTOM?targetHeight:at.y===CENTER?targetHeight/2:0}position.left+=adjust.x+(my.x===RIGHT?-elemWidth:my.x===CENTER?-elemWidth/2:0);
position.top+=adjust.y+(my.y===BOTTOM?-elemHeight:my.y===CENTER?-elemHeight/2:0);if(PLUGINS.viewport){position.adjusted=PLUGINS.viewport(self,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight);if(offset&&position.adjusted.left)position.left+=offset.left;if(offset&&position.adjusted.top)position.top+=offset.top}else position.adjusted={left:0,top:0};if(!self._triggerEvent("move",[position,viewport.elem||viewport],event))return self;delete position.adjusted;if(effect===FALSE||!visible||
isNaN(position.left)||isNaN(position.top)||target==="mouse"||!$.isFunction(posOptions.effect))tooltip.css(position);else if($.isFunction(posOptions.effect)){posOptions.effect.call(tooltip,self,$.extend({},position));tooltip.queue(function(next){$(this).css({opacity:"",height:""});if(PLUGINS.ie)this.style.removeAttribute("filter");next()})}isPositioning=0;return self},disable:function(state){if("boolean"!==typeof state)state=!(tooltip.hasClass(disabledClass)||cache.disabled);if(self.rendered){tooltip.toggleClass(disabledClass,
state);$.attr(tooltip[0],"aria-disabled",state)}else cache.disabled=!!state;return self},enable:function(){return self.disable(FALSE)},destroy:function(immediate){if(self.destroyed)return;self.destroyed=TRUE;function process(){var t=target[0],title=$.attr(t,oldtitle),elemAPI=target.data("qtip");if(self.rendered){$.each(self.plugins,function(name){if(this.destroy)this.destroy();delete self.plugins[name]});tooltip.stop(1,0).find("*").remove().end().remove();self.rendered=FALSE}clearTimeout(self.timers.show);
clearTimeout(self.timers.hide);unassignEvents();if(!elemAPI||self===elemAPI){target.removeData("qtip").removeAttr(HASATTR);if(options.suppress&&title){target.attr("title",title);target.removeAttr(oldtitle)}target.removeAttr("aria-describedby")}target.unbind(".qtip-"+id);delete usedIDs[self.id];delete self.options;delete self.elements;delete self.cache;delete self.timers;delete self.checks}if(immediate===TRUE)process();else{tooltip.bind("tooltiphidden",process);self.hide()}return target}})}function init(elem,
id,opts){var obj,posOptions,attr,config,title,docBody=$(document.body),newTarget=elem[0]===document?docBody:elem,metadata=elem.metadata?elem.metadata(opts.metadata):NULL,metadata5=opts.metadata.type==="html5"&&metadata?metadata[opts.metadata.name]:NULL,html5=elem.data(opts.metadata.name||"qtipopts");try{html5=typeof html5==="string"?$.parseJSON(html5):html5}catch(e){}config=$.extend(TRUE,{},QTIP.defaults,opts,typeof html5==="object"?sanitizeOptions(html5):NULL,sanitizeOptions(metadata5||metadata));
posOptions=config.position;config.id=id;if("boolean"===typeof config.content.text){attr=elem.attr(config.content.attr);if(config.content.attr!==FALSE&&attr)config.content.text=attr;else return FALSE}if(!posOptions.container.length)posOptions.container=docBody;if(posOptions.target===FALSE)posOptions.target=newTarget;if(config.show.target===FALSE)config.show.target=newTarget;if(config.show.solo===TRUE)config.show.solo=posOptions.container.closest("body");if(config.hide.target===FALSE)config.hide.target=
newTarget;if(config.position.viewport===TRUE)config.position.viewport=posOptions.container;posOptions.container=posOptions.container.eq(0);posOptions.at=new PLUGINS.Corner(posOptions.at);posOptions.my=new PLUGINS.Corner(posOptions.my);if(elem.data("qtip"))if(config.overwrite)elem.qtip("destroy");else if(config.overwrite===FALSE)return FALSE;elem.attr(HASATTR,true);if(config.suppress&&(title=elem.attr("title")))elem.removeAttr("title").attr(oldtitle,title).attr("title","");obj=new QTip(elem,config,
id,!!attr);elem.data("qtip",obj);elem.one("remove.qtip-"+id+" removeqtip.qtip-"+id,function(){var api;if(api=$(this).data("qtip"))api.destroy()});return obj}QTIP=$.fn.qtip=function(options,notation,newValue){var command=(""+options).toLowerCase(),returned=NULL,args=$.makeArray(arguments).slice(1),event=args[args.length-1],opts=this[0]?$.data(this[0],"qtip"):NULL;if(!arguments.length&&opts||command==="api")return opts;else if("string"===typeof options){this.each(function(){var api=$.data(this,"qtip");
if(!api)return TRUE;if(event&&event.timeStamp)api.cache.event=event;if((command==="option"||command==="options")&&notation)if($.isPlainObject(notation)||newValue!==undefined)api.set(notation,newValue);else{returned=api.get(notation);return FALSE}else if(api[command])api[command].apply(api[command],args)});return returned!==NULL?returned:this}else if("object"===typeof options||!arguments.length){opts=sanitizeOptions($.extend(TRUE,{},options));return QTIP.bind.call(this,opts,event)}};QTIP.bind=function(opts,
event){return this.each(function(i){var options,targets,events,namespace,api,id;id=$.isArray(opts.id)?opts.id[i]:opts.id;id=!id||id===FALSE||id.length<1||usedIDs[id]?QTIP.nextid++:usedIDs[id]=id;namespace=".qtip-"+id+"-create";api=init($(this),id,opts);if(api===FALSE)return TRUE;options=api.options;$.each(PLUGINS,function(){if(this.initialize==="initialize")this(api)});targets={show:options.show.target,hide:options.hide.target};events={show:$.trim(""+options.show.event).replace(/ /g,namespace+" ")+
namespace,hide:$.trim(""+options.hide.event).replace(/ /g,namespace+" ")+namespace};if(/mouse(over|enter)/i.test(events.show)&&!/mouse(out|leave)/i.test(events.hide))events.hide+=" mouseleave"+namespace;targets.show.bind("mousemove"+namespace,function(event){storeMouse(event);api.cache.onTarget=TRUE});function hoverIntent(event){function render(){api.render(typeof event==="object"||options.show.ready);targets.show.add(targets.hide).unbind(namespace)}if(api.cache.disabled)return FALSE;api.cache.event=
$.extend({},event);api.cache.target=event?$(event.target):[undefined];if(options.show.delay>0){clearTimeout(api.timers.show);api.timers.show=setTimeout(render,options.show.delay);if(events.show!==events.hide)targets.hide.bind(events.hide,function(){clearTimeout(api.timers.show)})}else render()}targets.show.bind(events.show,hoverIntent);if(options.show.ready||options.prerender)hoverIntent(event)})};PLUGINS=QTIP.plugins={Corner:function(corner){corner=(""+corner).replace(/([A-Z])/," $1").replace(/middle/gi,
CENTER).toLowerCase();this.x=(corner.match(/left|right/i)||corner.match(/center/)||["inherit"])[0].toLowerCase();this.y=(corner.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var f=corner.charAt(0);this.precedance=f==="t"||f==="b"?Y:X;this.string=function(){return this.precedance===Y?this.y+this.x:this.x+this.y};this.abbrev=function(){var x=this.x.substr(0,1),y=this.y.substr(0,1);return x===y?x:this.precedance===Y?y+x:x+y};this.invertx=function(center){this.x=this.x===LEFT?RIGHT:this.x===
RIGHT?LEFT:center||this.x};this.inverty=function(center){this.y=this.y===TOP?BOTTOM:this.y===BOTTOM?TOP:center||this.y};this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone,invertx:this.invertx,inverty:this.inverty}}},offset:function(elem,pos,container){var docBody=elem.closest("body"),quirks=PLUGINS.ie&&document.compatMode!=="CSS1Compat",parent=container,scrolled,coffset,overflow;function scroll(e,i){pos.left+=i*e.scrollLeft();
pos.top+=i*e.scrollTop()}if(parent){do if(parent.css("position")!=="static"){coffset=parent.position();pos.left-=coffset.left+(parseInt(parent.css("borderLeftWidth"),10)||0)+(parseInt(parent.css("marginLeft"),10)||0);pos.top-=coffset.top+(parseInt(parent.css("borderTopWidth"),10)||0)+(parseInt(parent.css("marginTop"),10)||0);if(!scrolled&&(overflow=parent.css("overflow"))!=="hidden"&&overflow!=="visible")scrolled=parent}while((parent=$(parent[0].offsetParent)).length);if(scrolled&&scrolled[0]!==docBody[0]||
quirks)scroll(scrolled||docBody,1)}return pos},ie:function(){var v=3,div=document.createElement("div");while(div.innerHTML="<\!--[if gt IE "+ ++v+"]><i></i><![endif]--\>")if(!div.getElementsByTagName("i")[0])break;return v>4?v:FALSE}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||FALSE,fn:{attr:function(attr,val){if(this.length){var self=this[0],title="title",api=$.data(self,
"qtip");if(attr===title&&api&&"object"===typeof api&&api.options.suppress){if(arguments.length<2)return $.attr(self,oldtitle);if(api&&api.options.content.attr===title&&api.cache.attr)api.set("content.text",val);return this.attr(oldtitle,val)}}return $.fn["attr"+replaceSuffix].apply(this,arguments)},clone:function(keepData){var titles=$([]),title="title",elems=$.fn["clone"+replaceSuffix].apply(this,arguments);if(!keepData)elems.filter("["+oldtitle+"]").attr("title",function(){return $.attr(this,oldtitle)}).removeAttr(oldtitle);
return elems}}};$.each(PLUGINS.fn,function(name,func){if(!func||$.fn[name+replaceSuffix])return TRUE;var old=$.fn[name+replaceSuffix]=$.fn[name];$.fn[name]=function(){return func.apply(this,arguments)||old.apply(this,arguments)}});if(!$.ui){$["cleanData"+replaceSuffix]=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!==undefined&&elem.getAttribute(HASATTR);i++)try{$(elem).triggerHandler("removeqtip")}catch(e){}$["cleanData"+replaceSuffix](elems)}}QTIP.version="2.0.1-31-";QTIP.nextid=
0;QTIP.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" ");QTIP.zindex=15E3;QTIP.defaults={prerender:FALSE,id:FALSE,overwrite:TRUE,suppress:TRUE,content:{text:TRUE,attr:"title",deferred:FALSE,title:{text:FALSE,button:FALSE}},position:{my:"top left",at:"bottom right",target:FALSE,container:FALSE,viewport:FALSE,adjust:{x:0,y:0,mouse:TRUE,scroll:TRUE,resize:TRUE,method:"flipinvert flipinvert"},effect:function(api,pos,viewport){$(this).animate(pos,{duration:200,
queue:FALSE})}},show:{target:FALSE,event:"mouseenter",effect:TRUE,delay:90,solo:FALSE,ready:FALSE,autofocus:FALSE},hide:{target:FALSE,event:"mouseleave",effect:TRUE,delay:0,fixed:FALSE,inactive:FALSE,leave:"window",distance:FALSE},style:{classes:"",widget:FALSE,width:FALSE,height:FALSE,def:TRUE},events:{render:NULL,move:NULL,show:NULL,hide:NULL,toggle:NULL,visible:NULL,hidden:NULL,focus:NULL,blur:NULL}};PLUGINS.svg=function(api,svg,corner,adjustMethod){var doc=$(document),elem=svg[0],result={width:0,
height:0,position:{top:1E10,left:1E10}},box,mtx,root,point,tPoint;while(!elem.getBBox)elem=elem.parentNode;if(elem.getBBox&&elem.parentNode){box=elem.getBBox();mtx=elem.getScreenCTM();root=elem.farthestViewportElement||elem;if(!root.createSVGPoint)return result;point=root.createSVGPoint();point.x=box.x;point.y=box.y;tPoint=point.matrixTransform(mtx);result.position.left=tPoint.x;result.position.top=tPoint.y;point.x+=box.width;point.y+=box.height;tPoint=point.matrixTransform(mtx);result.width=tPoint.x-
result.position.left;result.height=tPoint.y-result.position.top;result.position.left+=doc.scrollLeft();result.position.top+=doc.scrollTop()}return result};var AJAX,AJAXNS=".qtip-ajax",RSCRIPT=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;function Ajax(api){var self=this,tooltip=api.elements.tooltip,opts=api.options.content.ajax,defaults=QTIP.defaults.content.ajax,first=TRUE,stop=FALSE,xhr;api.checks.ajax={"^content.ajax":function(obj,name,v){if(name==="ajax")opts=v;if(name==="once")self.init();
else if(opts&&opts.url)self.load();else tooltip.unbind(AJAXNS)}};$.extend(self,{init:function(){if(opts&&opts.url)tooltip.unbind(AJAXNS)[opts.once?"one":"bind"]("tooltipshow"+AJAXNS,self.load);return self},load:function(event){if(stop){stop=FALSE;return}var hasSelector=opts.url.lastIndexOf(" "),url=opts.url,selector,hideFirst=!opts.loading&&first;if(hideFirst)try{event.preventDefault()}catch(e){}else if(event&&event.isDefaultPrevented())return self;if(xhr&&xhr.abort)xhr.abort();if(hasSelector>-1){selector=
url.substr(hasSelector);url=url.substr(0,hasSelector)}function after(){var complete;if(api.destroyed)return;first=FALSE;if(hideFirst){stop=TRUE;api.show(event.originalEvent)}if((complete=defaults.complete||opts.complete)&&$.isFunction(complete))complete.apply(opts.context||api,arguments)}function successHandler(content,status,jqXHR){var success;if(api.destroyed)return;if(selector&&"string"===typeof content)content=$("<div/>").append(content.replace(RSCRIPT,"")).find(selector);if((success=defaults.success||
opts.success)&&$.isFunction(success))success.call(opts.context||api,content,status,jqXHR);else api.set("content.text",content)}function errorHandler(xhr,status,error){if(api.destroyed||xhr.status===0)return;api.set("content.text",status+": "+error)}xhr=$.ajax($.extend({error:defaults.error||errorHandler,context:api},opts,{url:url,success:successHandler,complete:after}))},destroy:function(){if(xhr&&xhr.abort)xhr.abort();api.destroyed=TRUE}});self.init()}AJAX=PLUGINS.ajax=function(api){var self=api.plugins.ajax;
return"object"===typeof self?self:api.plugins.ajax=new Ajax(api)};AJAX.initialize="render";AJAX.sanitize=function(options){var content=options.content,opts;if(content&&"ajax"in content){opts=content.ajax;if(typeof opts!=="object")opts=options.content.ajax={url:opts};if("boolean"!==typeof opts.once&&opts.once)opts.once=!!opts.once}};$.extend(TRUE,QTIP.defaults,{content:{ajax:{loading:TRUE,once:TRUE}}});var TIP,TIPNS=".qtip-tip",HASCANVAS=!!document.createElement("canvas").getContext;function calculateTip(corner,
width,height){var width2=Math.ceil(width/2),height2=Math.ceil(height/2),tips={bottomright:[[0,0],[width,height],[width,0]],bottomleft:[[0,0],[width,0],[0,height]],topright:[[0,height],[width,0],[width,height]],topleft:[[0,0],[0,height],[width,height]],topcenter:[[0,height],[width2,0],[width,height]],bottomcenter:[[0,0],[width,0],[width2,height]],rightcenter:[[0,0],[width,height2],[0,height]],leftcenter:[[width,0],[width,height],[0,height2]]};tips.lefttop=tips.bottomright;tips.righttop=tips.bottomleft;
tips.leftbottom=tips.topright;tips.rightbottom=tips.topleft;return tips[corner.string()]}function Tip(qTip,command){var self=this,opts=qTip.options.style.tip,elems=qTip.elements,tooltip=elems.tooltip,cache={top:0,left:0},size={width:opts.width,height:opts.height},color={},border=opts.border||0,tiphtml;self.corner=NULL;self.mimic=NULL;self.border=border;self.offset=opts.offset;self.size=size;qTip.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){if(!self.init())self.destroy();
qTip.reposition()},"^style.tip.(height|width)$":function(){size={width:opts.width,height:opts.height};self.create();self.update();qTip.reposition()},"^content.title.text|style.(classes|widget)$":function(){if(elems.tip&&elems.tip.length)self.update()}};function whileVisible(callback){var visible=tooltip.is(":visible");tooltip.show();callback();tooltip.toggle(visible)}function swapDimensions(){size.width=opts.height;size.height=opts.width}function resetDimensions(){size.width=opts.width;size.height=
opts.height}function reposition(event,api,pos,viewport){if(!elems.tip)return;var newCorner=self.corner.clone(),adjust=pos.adjusted,method=qTip.options.position.adjust.method.split(" "),horizontal=method[0],vertical=method[1]||method[0],shift={left:FALSE,top:FALSE,x:0,y:0},offset,css={},props;if(self.corner.fixed!==TRUE){if(horizontal===SHIFT&&newCorner.precedance===X&&adjust.left&&newCorner.y!==CENTER)newCorner.precedance=newCorner.precedance===X?Y:X;else if(horizontal!==SHIFT&&adjust.left)newCorner.x=
newCorner.x===CENTER?adjust.left>0?LEFT:RIGHT:newCorner.x===LEFT?RIGHT:LEFT;if(vertical===SHIFT&&newCorner.precedance===Y&&adjust.top&&newCorner.x!==CENTER)newCorner.precedance=newCorner.precedance===Y?X:Y;else if(vertical!==SHIFT&&adjust.top)newCorner.y=newCorner.y===CENTER?adjust.top>0?TOP:BOTTOM:newCorner.y===TOP?BOTTOM:TOP;if(newCorner.string()!==cache.corner.string()&&(cache.top!==adjust.top||cache.left!==adjust.left))self.update(newCorner,FALSE)}offset=self.position(newCorner,adjust);offset[newCorner.x]+=
parseWidth(newCorner,newCorner.x);offset[newCorner.y]+=parseWidth(newCorner,newCorner.y);if(offset.right!==undefined)offset.left=-offset.right;if(offset.bottom!==undefined)offset.top=-offset.bottom;offset.user=Math.max(0,opts.offset);if(shift.left=horizontal===SHIFT&&!!adjust.left)if(newCorner.x===CENTER)css["margin-left"]=shift.x=offset["margin-left"]-adjust.left;else{props=offset.right!==undefined?[adjust.left,-offset.left]:[-adjust.left,offset.left];if((shift.x=Math.max(props[0],props[1]))>props[0]){pos.left-=
adjust.left;shift.left=FALSE}css[offset.right!==undefined?RIGHT:LEFT]=shift.x}if(shift.top=vertical===SHIFT&&!!adjust.top)if(newCorner.y===CENTER)css["margin-top"]=shift.y=offset["margin-top"]-adjust.top;else{props=offset.bottom!==undefined?[adjust.top,-offset.top]:[-adjust.top,offset.top];if((shift.y=Math.max(props[0],props[1]))>props[0]){pos.top-=adjust.top;shift.top=FALSE}css[offset.bottom!==undefined?BOTTOM:TOP]=shift.y}elems.tip.css(css).toggle(!(shift.x&&shift.y||newCorner.x===CENTER&&shift.y||
newCorner.y===CENTER&&shift.x));pos.left-=offset.left.charAt?offset.user:horizontal!==SHIFT||shift.top||!shift.left&&!shift.top?offset.left:0;pos.top-=offset.top.charAt?offset.user:vertical!==SHIFT||shift.left||!shift.left&&!shift.top?offset.top:0;cache.left=adjust.left;cache.top=adjust.top;cache.corner=newCorner.clone()}function parseCorner(){var corner=opts.corner,posOptions=qTip.options.position,at=posOptions.at,my=posOptions.my.string?posOptions.my.string():posOptions.my;if(corner===FALSE||my===
FALSE&&at===FALSE)return FALSE;else if(corner===TRUE)self.corner=new PLUGINS.Corner(my);else if(!corner.string){self.corner=new PLUGINS.Corner(corner);self.corner.fixed=TRUE}cache.corner=new PLUGINS.Corner(self.corner.string());return self.corner.string()!=="centercenter"}function parseWidth(corner,side,use){side=!side?corner[corner.precedance]:side;var isTitleTop=elems.titlebar&&corner.y===TOP,elem=isTitleTop?elems.titlebar:tooltip,borderSide="border-"+side+"-width",css=function(elem){return parseInt(elem.css(borderSide),
10)},val;whileVisible(function(){val=(use?css(use):css(elems.content)||css(elem)||css(tooltip))||0});return val}function parseRadius(corner){var isTitleTop=elems.titlebar&&corner.y===TOP,elem=isTitleTop?elems.titlebar:elems.content,mozPrefix="-moz-",webkitPrefix="-webkit-",nonStandard="border-radius-"+corner.y+corner.x,standard="border-"+corner.y+"-"+corner.x+"-radius",css=function(c){return parseInt(elem.css(c),10)||parseInt(tooltip.css(c),10)},val;whileVisible(function(){val=css(standard)||css(nonStandard)||
css(mozPrefix+standard)||css(mozPrefix+nonStandard)||css(webkitPrefix+standard)||css(webkitPrefix+nonStandard)||0});return val}function parseColours(actual){var i,fill,border,tip=elems.tip.css("cssText",""),corner=actual||self.corner,invalid=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,borderSide="border-"+corner[corner.precedance]+"-color",bgColor="background-color",transparent="transparent",important=" !important",titlebar=elems.titlebar,useTitle=titlebar&&(corner.y===TOP||corner.y===CENTER&&tip.position().top+
size.height/2+opts.offset<titlebar.outerHeight(TRUE)),colorElem=useTitle?titlebar:elems.content;function css(elem,prop,compare){var val=elem.css(prop)||transparent;if(compare&&val===elem.css(compare))return FALSE;else return invalid.test(val)?FALSE:val}whileVisible(function(){color.fill=css(tip,bgColor)||css(colorElem,bgColor)||css(elems.content,bgColor)||css(tooltip,bgColor)||tip.css(bgColor);color.border=css(tip,borderSide,"color")||css(colorElem,borderSide,"color")||css(elems.content,borderSide,
"color")||css(tooltip,borderSide,"color")||tooltip.css(borderSide);$("*",tip).add(tip).css("cssText",bgColor+":"+transparent+important+";border:0"+important+";")})}function calculateSize(corner){var y=corner.precedance===Y,width=size[y?WIDTH:HEIGHT],height=size[y?HEIGHT:WIDTH],isCenter=corner.string().indexOf(CENTER)>-1,base=width*(isCenter?0.5:1),pow=Math.pow,round=Math.round,bigHyp,ratio,result,smallHyp=Math.sqrt(pow(base,2)+pow(height,2)),hyp=[border/base*smallHyp,border/height*smallHyp];hyp[2]=
Math.sqrt(pow(hyp[0],2)-pow(border,2));hyp[3]=Math.sqrt(pow(hyp[1],2)-pow(border,2));bigHyp=smallHyp+hyp[2]+hyp[3]+(isCenter?0:hyp[0]);ratio=bigHyp/smallHyp;result=[round(ratio*height),round(ratio*width)];return{height:result[y?0:1],width:result[y?1:0]}}function createVML(tag,props,style){return"<qvml:"+tag+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(props||"")+' style="behavior: url(#default#VML); '+(style||"")+'" />'}$.extend(self,{init:function(){var enabled=parseCorner()&&(HASCANVAS||
PLUGINS.ie);if(enabled){self.create();self.update();tooltip.unbind(TIPNS).bind("tooltipmove"+TIPNS,reposition)}return enabled},create:function(){var width=size.width,height=size.height,vml;if(elems.tip)elems.tip.remove();elems.tip=$("<div />",{"class":"qtip-tip"}).css({width:width,height:height}).prependTo(tooltip);if(HASCANVAS)$("<canvas />").appendTo(elems.tip)[0].getContext("2d").save();else{vml=createVML("shape",'coordorigin="0,0"',"position:absolute;");elems.tip.html(vml+vml);$("*",elems.tip).bind("click"+
TIPNS+" mousedown"+TIPNS,function(event){event.stopPropagation()})}},update:function(corner,position){var tip=elems.tip,inner=tip.children(),width=size.width,height=size.height,mimic=opts.mimic,round=Math.round,precedance,context,coords,translate,newSize;if(!corner)corner=cache.corner||self.corner;if(mimic===FALSE)mimic=corner;else{mimic=new PLUGINS.Corner(mimic);mimic.precedance=corner.precedance;if(mimic.x==="inherit")mimic.x=corner.x;else if(mimic.y==="inherit")mimic.y=corner.y;else if(mimic.x===
mimic.y)mimic[corner.precedance]=corner[corner.precedance]}precedance=mimic.precedance;if(corner.precedance===X)swapDimensions();else resetDimensions();elems.tip.css({width:width=size.width,height:height=size.height});parseColours(corner);if(color.border!=="transparent"){border=parseWidth(corner,NULL);if(opts.border===0&&border>0)color.fill=color.border;self.border=border=opts.border!==TRUE?opts.border:border}else self.border=border=0;coords=calculateTip(mimic,width,height);self.size=newSize=calculateSize(corner);
tip.css(newSize).css("line-height",newSize.height+"px");if(corner.precedance===Y)translate=[round(mimic.x===LEFT?border:mimic.x===RIGHT?newSize.width-width-border:(newSize.width-width)/2),round(mimic.y===TOP?newSize.height-height:0)];else translate=[round(mimic.x===LEFT?newSize.width-width:0),round(mimic.y===TOP?border:mimic.y===BOTTOM?newSize.height-height-border:(newSize.height-height)/2)];if(HASCANVAS){inner.attr(newSize);context=inner[0].getContext("2d");context.restore();context.save();context.clearRect(0,
0,3E3,3E3);context.fillStyle=color.fill;context.strokeStyle=color.border;context.lineWidth=border*2;context.lineJoin="miter";context.miterLimit=100;context.translate(translate[0],translate[1]);context.beginPath();context.moveTo(coords[0][0],coords[0][1]);context.lineTo(coords[1][0],coords[1][1]);context.lineTo(coords[2][0],coords[2][1]);context.closePath();if(border){if(tooltip.css("background-clip")==="border-box"){context.strokeStyle=color.fill;context.stroke()}context.strokeStyle=color.border;
context.stroke()}context.fill()}else{coords="m"+coords[0][0]+","+coords[0][1]+" l"+coords[1][0]+","+coords[1][1]+" "+coords[2][0]+","+coords[2][1]+" xe";translate[2]=border&&/^(r|b)/i.test(corner.string())?PLUGINS.ie===8?2:1:0;inner.css({coordsize:width+border+" "+(height+border),antialias:""+(mimic.string().indexOf(CENTER)>-1),left:translate[0],top:translate[1],width:width+border,height:height+border}).each(function(i){var $this=$(this);$this[$this.prop?"prop":"attr"]({coordsize:width+border+" "+
(height+border),path:coords,fillcolor:color.fill,filled:!!i,stroked:!i}).toggle(!!(border||i));if(!i&&$this.html()==="")$this.html(createVML("stroke",'weight="'+border*2+'px" color="'+color.border+'" miterlimit="1000" joinstyle="miter"'))})}setTimeout(function(){elems.tip.css({display:"inline-block",visibility:"visible"})},1);if(position!==FALSE)self.position(corner)},position:function(corner){var tip=elems.tip,position={},userOffset=Math.max(0,opts.offset),precedance,dimensions,corners;if(opts.corner===
FALSE||!tip)return FALSE;corner=corner||self.corner;precedance=corner.precedance;dimensions=calculateSize(corner);corners=[corner.x,corner.y];if(precedance===X)corners.reverse();$.each(corners,function(i,side){var b,bc,br;if(side===CENTER){b=precedance===Y?LEFT:TOP;position[b]="50%";position["margin-"+b]=-Math.round(dimensions[precedance===Y?WIDTH:HEIGHT]/2)+userOffset}else{b=parseWidth(corner,side);bc=parseWidth(corner,side,elems.content);br=parseRadius(corner);position[side]=i?bc:userOffset+(br>
b?br:-b)}});position[corner[precedance]]-=dimensions[precedance===X?WIDTH:HEIGHT];tip.css({top:"",bottom:"",left:"",right:"",margin:""}).css(position);return position},destroy:function(){tooltip.unbind(TIPNS);if(elems.tip)elems.tip.find("*").remove().end().remove();delete self.corner;delete self.mimic;delete self.size}});self.init()}TIP=PLUGINS.tip=function(api){var self=api.plugins.tip;return"object"===typeof self?self:api.plugins.tip=new Tip(api)};TIP.initialize="render";TIP.sanitize=function(options){var style=
options.style,opts;if(style&&"tip"in style){opts=options.style.tip;if(typeof opts!=="object")options.style.tip={corner:opts};if(!/string|boolean/i.test(typeof opts.corner))opts.corner=TRUE;if(typeof opts.width!=="number")delete opts.width;if(typeof opts.height!=="number")delete opts.height;if(typeof opts.border!=="number"&&opts.border!==TRUE)delete opts.border;if(typeof opts.offset!=="number")delete opts.offset}};$.extend(TRUE,QTIP.defaults,{style:{tip:{corner:TRUE,mimic:FALSE,width:6,height:6,border:TRUE,
offset:0}}});var MODAL,OVERLAY,MODALATTR="is-modal-qtip",MODALSELECTOR=selector+"["+MODALATTR+"]",MODALNS=".qtipmodal";OVERLAY=function(){var self=this,focusableElems={},current,onLast,prevState,elem;function focusable(element){if($.expr[":"].focusable)return $.expr[":"].focusable;var isTabIndexNotNaN=!isNaN($.attr(element,"tabindex")),nodeName=element.nodeName.toLowerCase(),map,mapName,img;if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!==
"map")return false;img=$("img[usemap=#"+mapName+"]")[0];return!!img&&img.is(":visible")}return/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN}function focusInputs(blurElems){if(focusableElems.length<1&&blurElems.length)blurElems.not("body").blur();else focusableElems.first().focus()}function stealFocus(event){if(!elem.is(":visible"))return;var target=$(event.target),tooltip=current.elements.tooltip,container=target.closest(selector),
targetOnTop;targetOnTop=container.length<1?FALSE:parseInt(container[0].style.zIndex,10)>parseInt(tooltip[0].style.zIndex,10);if(!targetOnTop&&target.closest(selector)[0]!==tooltip[0])focusInputs(target);onLast=event.target===focusableElems[focusableElems.length-1]}$.extend(self,{init:function(){elem=self.elem=$("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return FALSE}}).hide();function resize(){var win=$(this);elem.css({height:win.height(),width:win.width()})}$(window).bind("resize"+
MODALNS,resize);resize();$(document.body).bind("focusin"+MODALNS,stealFocus);$(document).bind("keydown"+MODALNS,function(event){if(current&&current.options.show.modal.escape&&event.keyCode===27)current.hide(event)});elem.bind("click"+MODALNS,function(event){if(current&&current.options.show.modal.blur)current.hide(event)});return self},update:function(api){current=api;if(api.options.show.modal.stealfocus!==FALSE)focusableElems=api.elements.tooltip.find("*").filter(function(){return focusable(this)});
else focusableElems=[]},toggle:function(api,state,duration){var docBody=$(document.body),tooltip=api.elements.tooltip,options=api.options.show.modal,effect=options.effect,type=state?"show":"hide",visible=elem.is(":visible"),modals=$(MODALSELECTOR).filter(":visible:not(:animated)").not(tooltip),zindex;self.update(api);if(state&&options.stealfocus!==FALSE)focusInputs($(":focus"));elem.toggleClass("blurs",options.blur);if(state)elem.css({left:0,top:0}).appendTo(document.body);if(elem.is(":animated")&&
visible===state&&prevState!==FALSE||!state&&modals.length)return self;elem.stop(TRUE,FALSE);if($.isFunction(effect))effect.call(elem,state);else if(effect===FALSE)elem[type]();else elem.fadeTo(parseInt(duration,10)||90,state?1:0,function(){if(!state)elem.hide()});if(!state)elem.queue(function(next){elem.css({left:"",top:""});if(!modals.length)elem.detach();next()});prevState=state;if(current.destroyed)current=NULL;return self}});self.init()};OVERLAY=new OVERLAY;function Modal(api){var self=this,options=
api.options.show.modal,elems=api.elements,tooltip=elems.tooltip,namespace=MODALNS+api.id,overlay;api.checks.modal={"^show.modal.(on|blur)$":function(){self.destroy();self.init();overlay.toggle(tooltip.is(":visible"))}};$.extend(self,{init:function(){if(!options.on)return self;overlay=elems.overlay=OVERLAY.elem;tooltip.attr(MODALATTR,TRUE).css("z-index",PLUGINS.modal.zindex+$(MODALSELECTOR).length).bind("tooltipshow"+namespace+" tooltiphide"+namespace,function(event,api,duration){var oEvent=event.originalEvent;
if(event.target===tooltip[0])if(oEvent&&event.type==="tooltiphide"&&/mouse(leave|enter)/.test(oEvent.type)&&$(oEvent.relatedTarget).closest(overlay[0]).length)try{event.preventDefault()}catch(e){}else if(!oEvent||oEvent&&!oEvent.solo)self.toggle(event,event.type==="tooltipshow",duration)}).bind("tooltipfocus"+namespace,function(event,api){if(event.isDefaultPrevented()||event.target!==tooltip[0])return;var qtips=$(MODALSELECTOR),newIndex=PLUGINS.modal.zindex+qtips.length,curIndex=parseInt(tooltip[0].style.zIndex,
10);overlay[0].style.zIndex=newIndex-1;qtips.each(function(){if(this.style.zIndex>curIndex)this.style.zIndex-=1});qtips.filter("."+focusClass).qtip("blur",event.originalEvent);tooltip.addClass(focusClass)[0].style.zIndex=newIndex;OVERLAY.update(api);try{event.preventDefault()}catch(e){}}).bind("tooltiphide"+namespace,function(event){if(event.target===tooltip[0])$(MODALSELECTOR).filter(":visible").not(tooltip).last().qtip("focus",event)});return self},toggle:function(event,state,duration){if(event&&
event.isDefaultPrevented())return self;OVERLAY.toggle(api,!!state,duration);return self},destroy:function(){$([document,tooltip]).removeAttr(MODALATTR).unbind(namespace);OVERLAY.toggle(api,FALSE);delete elems.overlay}});self.init()}MODAL=PLUGINS.modal=function(api){var self=api.plugins.modal;return"object"===typeof self?self:api.plugins.modal=new Modal(api)};MODAL.sanitize=function(opts){if(opts.show)if(typeof opts.show.modal!=="object")opts.show.modal={on:!!opts.show.modal};else if(typeof opts.show.modal.on===
"undefined")opts.show.modal.on=TRUE};MODAL.zindex=QTIP.zindex-200;MODAL.initialize="render";$.extend(TRUE,QTIP.defaults,{show:{modal:{on:FALSE,effect:TRUE,blur:TRUE,stealfocus:TRUE,escape:TRUE}}});PLUGINS.viewport=function(api,position,posOptions,targetWidth,targetHeight,elemWidth,elemHeight){var target=posOptions.target,tooltip=api.elements.tooltip,my=posOptions.my,at=posOptions.at,adjust=posOptions.adjust,method=adjust.method.split(" "),methodX=method[0],methodY=method[1]||method[0],viewport=posOptions.viewport,
container=posOptions.container,cache=api.cache,tip=api.plugins.tip,adjusted={left:0,top:0},fixed,newMy,newClass;if(!viewport.jquery||target[0]===window||target[0]===document.body||adjust.method==="none")return adjusted;fixed=tooltip.css("position")==="fixed";viewport={elem:viewport,height:viewport[(viewport[0]===window?"h":"outerH")+"eight"](),width:viewport[(viewport[0]===window?"w":"outerW")+"idth"](),scrollleft:fixed?0:viewport.scrollLeft(),scrolltop:fixed?0:viewport.scrollTop(),offset:viewport.offset()||
{left:0,top:0}};container={elem:container,scrollLeft:container.scrollLeft(),scrollTop:container.scrollTop(),offset:container.offset()||{left:0,top:0}};function calculate(side,otherSide,type,adjust,side1,side2,lengthName,targetLength,elemLength){var initialPos=position[side1],mySide=my[side],atSide=at[side],isShift=type===SHIFT,viewportScroll=-container.offset[side1]+viewport.offset[side1]+viewport["scroll"+side1],myLength=mySide===side1?elemLength:mySide===side2?-elemLength:-elemLength/2,atLength=
atSide===side1?targetLength:atSide===side2?-targetLength:-targetLength/2,tipLength=tip&&tip.size?tip.size[lengthName]||0:0,tipAdjust=tip&&tip.corner&&tip.corner.precedance===side&&!isShift?tipLength:0,overflow1=viewportScroll-initialPos+tipAdjust,overflow2=initialPos+elemLength-viewport[lengthName]-viewportScroll+tipAdjust,offset=myLength-(my.precedance===side||mySide===my[otherSide]?atLength:0)-(atSide===CENTER?targetLength/2:0);if(isShift){tipAdjust=tip&&tip.corner&&tip.corner.precedance===otherSide?
tipLength:0;offset=(mySide===side1?1:-1)*myLength-tipAdjust;position[side1]+=overflow1>0?overflow1:overflow2>0?-overflow2:0;position[side1]=Math.max(-container.offset[side1]+viewport.offset[side1]+(tipAdjust&&tip.corner[side]===CENTER?tip.offset:0),initialPos-offset,Math.min(Math.max(-container.offset[side1]+viewport.offset[side1]+viewport[lengthName],initialPos+offset),position[side1]))}else{adjust*=type===FLIPINVERT?2:0;if(overflow1>0&&(mySide!==side1||overflow2>0)){position[side1]-=offset+adjust;
newMy["invert"+side](side1)}else if(overflow2>0&&(mySide!==side2||overflow1>0)){position[side1]-=(mySide===CENTER?-offset:offset)+adjust;newMy["invert"+side](side2)}if(position[side1]<viewportScroll&&-position[side1]>overflow2){position[side1]=initialPos;newMy=my.clone()}}return position[side1]-initialPos}if(methodX!=="shift"||methodY!=="shift")newMy=my.clone();adjusted={left:methodX!=="none"?calculate(X,Y,methodX,adjust.x,LEFT,RIGHT,WIDTH,targetWidth,elemWidth):0,top:methodY!=="none"?calculate(Y,
X,methodY,adjust.y,TOP,BOTTOM,HEIGHT,targetHeight,elemHeight):0};if(newMy&&cache.lastClass!==(newClass=NAMESPACE+"-pos-"+newMy.abbrev()))tooltip.removeClass(api.cache.lastClass).addClass(api.cache.lastClass=newClass);return adjusted};PLUGINS.imagemap=function(api,area,corner,adjustMethod){if(!area.jquery)area=$(area);var cache=api.cache.areas={},shape=(area[0].shape||area.attr("shape")).toLowerCase(),coordsString=area[0].coords||area.attr("coords"),baseCoords=coordsString.split(","),coords=[],image=
$('img[usemap="#'+area.parent("map").attr("name")+'"]'),imageOffset=image.offset(),result={width:0,height:0,position:{top:1E10,right:0,bottom:0,left:1E10}},i=0,next=0,dimensions;function polyCoordinates(result,coords,corner){var i=0,compareX=1,compareY=1,realX=0,realY=0,newWidth=result.width,newHeight=result.height;while(newWidth>0&&newHeight>0&&compareX>0&&compareY>0){newWidth=Math.floor(newWidth/2);newHeight=Math.floor(newHeight/2);if(corner.x===LEFT)compareX=newWidth;else if(corner.x===RIGHT)compareX=
result.width-newWidth;else compareX+=Math.floor(newWidth/2);if(corner.y===TOP)compareY=newHeight;else if(corner.y===BOTTOM)compareY=result.height-newHeight;else compareY+=Math.floor(newHeight/2);i=coords.length;while(i--){if(coords.length<2)break;realX=coords[i][0]-result.position.left;realY=coords[i][1]-result.position.top;if(corner.x===LEFT&&realX>=compareX||corner.x===RIGHT&&realX<=compareX||corner.x===CENTER&&(realX<compareX||realX>result.width-compareX)||corner.y===TOP&&realY>=compareY||corner.y===
BOTTOM&&realY<=compareY||corner.y===CENTER&&(realY<compareY||realY>result.height-compareY))coords.splice(i,1)}}return{left:coords[0][0],top:coords[0][1]}}imageOffset.left+=Math.ceil((image.outerWidth()-image.width())/2);imageOffset.top+=Math.ceil((image.outerHeight()-image.height())/2);if(shape==="poly"){i=baseCoords.length;while(i--){next=[parseInt(baseCoords[--i],10),parseInt(baseCoords[i+1],10)];if(next[0]>result.position.right)result.position.right=next[0];if(next[0]<result.position.left)result.position.left=
next[0];if(next[1]>result.position.bottom)result.position.bottom=next[1];if(next[1]<result.position.top)result.position.top=next[1];coords.push(next)}}else{i=-1;while(i++<baseCoords.length)coords.push(parseInt(baseCoords[i],10))}switch(shape){case "rect":result={width:Math.abs(coords[2]-coords[0]),height:Math.abs(coords[3]-coords[1]),position:{left:Math.min(coords[0],coords[2]),top:Math.min(coords[1],coords[3])}};break;case "circle":result={width:coords[2]+2,height:coords[2]+2,position:{left:coords[0],
top:coords[1]}};break;case "poly":result.width=Math.abs(result.position.right-result.position.left);result.height=Math.abs(result.position.bottom-result.position.top);if(corner.abbrev()==="c")result.position={left:result.position.left+result.width/2,top:result.position.top+result.height/2};else{if(!cache[corner+coordsString]){result.position=polyCoordinates(result,coords.slice(),corner);if(adjustMethod&&(adjustMethod[0]==="flip"||adjustMethod[1]==="flip")){result.offset=polyCoordinates(result,coords.slice(),
{x:corner.x===LEFT?RIGHT:corner.x===RIGHT?LEFT:CENTER,y:corner.y===TOP?BOTTOM:corner.y===BOTTOM?TOP:CENTER});result.offset.left-=result.position.left;result.offset.top-=result.position.top}cache[corner+coordsString]=result}result=cache[corner+coordsString]}result.width=result.height=0;break}result.position.left+=imageOffset.left;result.position.top+=imageOffset.top;return result};var IE6;function Ie6(api){var self=this,elems=api.elements,options=api.options,tooltip=elems.tooltip,namespace=".ie6-"+
api.id,bgiframe=$("select, object").length<1,isDrawing=0,modalProcessed=FALSE,redrawContainer;api.checks.ie6={"^content|style$":function(obj,o,v){redraw()}};$.extend(self,{init:function(){var win=$(window),scroll;if(bgiframe){elems.bgiframe=$('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';" '+' style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); '+'-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>');elems.bgiframe.appendTo(tooltip);
tooltip.bind("tooltipmove"+namespace,self.adjustBGIFrame)}redrawContainer=$("<div/>",{id:"qtip-rcontainer"}).appendTo(document.body);self.redraw();if(elems.overlay&&!modalProcessed){scroll=function(){elems.overlay[0].style.top=win.scrollTop()+"px"};win.bind("scroll.qtip-ie6, resize.qtip-ie6",scroll);scroll();elems.overlay.addClass("qtipmodal-ie6fix");modalProcessed=TRUE}},adjustBGIFrame:function(){var dimensions=api.get("dimensions"),plugin=api.plugins.tip,tip=elems.tip,tipAdjust,offset;offset=parseInt(tooltip.css("border-left-width"),
10)||0;offset={left:-offset,top:-offset};if(plugin&&tip){tipAdjust=plugin.corner.precedance==="x"?["width","left"]:["height","top"];offset[tipAdjust[1]]-=tip[tipAdjust[0]]()}elems.bgiframe.css(offset).css(dimensions)},redraw:function(){if(api.rendered<1||isDrawing)return self;var style=options.style,container=options.position.container,perc,width,max,min;isDrawing=1;if(style.height)tooltip.css(HEIGHT,style.height);if(style.width)tooltip.css(WIDTH,style.width);else{tooltip.css(WIDTH,"").appendTo(redrawContainer);
width=tooltip.width();if(width%2<1)width+=1;max=tooltip.css("max-width")||"";min=tooltip.css("min-width")||"";perc=(max+min).indexOf("%")>-1?container.width()/100:0;max=(max.indexOf("%")>-1?perc:1)*parseInt(max,10)||width;min=(min.indexOf("%")>-1?perc:1)*parseInt(min,10)||0;width=max+min?Math.min(Math.max(width,min),max):width;tooltip.css(WIDTH,Math.round(width)).appendTo(container)}isDrawing=0;return self},destroy:function(){if(bgiframe)elems.bgiframe.remove();tooltip.unbind(namespace)}});self.init()}
IE6=PLUGINS.ie6=function(api){var self=api.plugins.ie6;if(PLUGINS.ie!==6)return FALSE;return"object"===typeof self?self:api.plugins.ie6=new Ie6(api)};IE6.initialize="render"})})(window,document);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.infinitescroll-2.0b2.120519.js **************************************************************/ 
(function(window,$,undefined){$.infinitescroll=function infscr(options,callback,element){this.element=$(element);if(!this._create(options,callback))this.failed=true};$.infinitescroll.defaults={loading:{finished:undefined,finishedMsg:"<em>Congratulations, you've reached the end of the internet.</em>",img:"data:image/gif;base64,R0lGODlh3AATAPQeAPDy+MnQ6LW/4N3h8MzT6rjC4sTM5r/I5NHX7N7j8c7U6tvg8OLl8uXo9Ojr9b3G5MfP6Ovu9tPZ7PT1+vX2+tbb7vf4+8/W69jd7rC73vn5/O/x+K243ai02////wAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQECgD/ACwAAAAA3AATAAAF/6AnjmRpnmiqrmzrvnAsz3Rt33iu73zv/8CgcEj0BAScpHLJbDqf0Kh0Sq1ar9isdioItAKGw+MAKYMFhbF63CW438f0mg1R2O8EuXj/aOPtaHx7fn96goR4hmuId4qDdX95c4+RBIGCB4yAjpmQhZN0YGYGXitdZBIVGAsLoq4BBKQDswm1CQRkcG6ytrYKubq8vbfAcMK9v7q7EMO1ycrHvsW6zcTKsczNz8HZw9vG3cjTsMIYqQkCLBwHCgsMDQ4RDAYIqfYSFxDxEfz88/X38Onr16+Bp4ADCco7eC8hQYMAEe57yNCew4IVBU7EGNDiRn8Z831cGLHhSIgdFf9chIeBg7oA7gjaWUWTVQAGE3LqBDCTlc9WOHfm7PkTqNCh54rePDqB6M+lR536hCpUqs2gVZM+xbrTqtGoWqdy1emValeXKzggYBBB5y1acFNZmEvXAoN2cGfJrTv3bl69Ffj2xZt3L1+/fw3XRVw4sGDGcR0fJhxZsF3KtBTThZxZ8mLMgC3fRatCbYMNFCzwLEqLgE4NsDWs/tvqdezZf13Hvk2A9Szdu2X3pg18N+68xXn7rh1c+PLksI/Dhe6cuO3ow3NfV92bdArTqC2Ebd3A8vjf5QWfH6Bg7Nz17c2fj69+fnq+8N2Lty+fuP78/eV2X13neIcCeBRwxorbZrA1ANoCDGrgoG8RTshahQ9iSKEEzUmYIYfNWViUhheCGJyIP5E4oom7WWjgCeBFAJNv1DVV01MAdJhhjdkplWNzO/5oXI846njjVEIqR2OS2B1pE5PVscajkxhMycqLJghQSwT40PgfAl4GqNSXYdZXJn5gSkmmmmJu1aZYb14V51do+pTOCmA40AqVCIhG5IJ9PvYnhIFOxmdqhpaI6GeHCtpooisuutmg+Eg62KOMKuqoTaXgicQWoIYq6qiklmoqFV0UoeqqrLbq6quwxirrrLTWauutJ4QAACH5BAUKABwALAcABADOAAsAAAX/IPd0D2dyRCoUp/k8gpHOKtseR9yiSmGbuBykler9XLAhkbDavXTL5k2oqFqNOxzUZPU5YYZd1XsD72rZpBjbeh52mSNnMSC8lwblKZGwi+0QfIJ8CncnCoCDgoVnBHmKfByGJimPkIwtiAeBkH6ZHJaKmCeVnKKTHIihg5KNq4uoqmEtcRUtEREMBggtEr4QDrjCuRC8h7/BwxENeicSF8DKy82pyNLMOxzWygzFmdvD2L3P0dze4+Xh1Arkyepi7dfFvvTtLQkZBC0T/FX3CRgCMOBHsJ+EHYQY7OinAGECgQsB+Lu3AOK+CewcWjwxQeJBihtNGHSoQOE+iQ3//4XkwBBhRZMcUS6YSXOAwIL8PGqEaSJCiYt9SNoCmnJPAgUVLChdaoFBURN8MAzl2PQphwQLfDFd6lTowglHve6rKpbjhK7/pG5VinZP1qkiz1rl4+tr2LRwWU64cFEihwEtZgbgR1UiHaMVvxpOSwBA37kzGz9e8G+B5MIEKLutOGEsAH2ATQwYfTmuX8aETWdGPZmiZcccNSzeTCA1Sw0bdiitC7LBWgu8jQr8HRzqgpK6gX88QbrB14z/kF+ELpwB8eVQj/JkqdylAudji/+ts3039vEEfK8Vz2dlvxZKG0CmbkKDBvllRd6fCzDvBLKBDSCeffhRJEFebFk1k/Mv9jVIoIJZSeBggwUaNeB+Qk34IE0cXlihcfRxkOAJFFhwGmKlmWDiakZhUJtnLBpnWWcnKaAZcxI0piFGGLBm1mc90kajSCveeBVWKeYEoU2wqeaQi0PetoE+rr14EpVC7oAbAUHqhYExbn2XHHsVqbcVew9tx8+XJKk5AZsqqdlddGpqAKdbAYBn1pcczmSTdWvdmZ17c1b3FZ99vnTdCRFM8OEcAhLwm1NdXnWcBBSMRWmfkWZqVlsmLIiAp/o1gGV2vpS4lalGYsUOqXrddcKCmK61aZ8SjEpUpVFVoCpTj4r661Km7kBHjrDyc1RAIQAAIfkEBQoAGwAsBwAEAM4ACwAABf/gtmUCd4goQQgFKj6PYKi0yrrbc8i4ohQt12EHcal+MNSQiCP8gigdz7iCioaCIvUmZLp8QBzW0EN2vSlCuDtFKaq4RyHzQLEKZNdiQDhRDVooCwkbfm59EAmKi4SGIm+AjIsKjhsqB4mSjT2IOIOUnICeCaB/mZKFNTSRmqVpmJqklSqskq6PfYYCDwYHDC4REQwGCBLGxxIQDsHMwhAIX8bKzcENgSLGF9PU1j3Sy9zX2NrgzQziChLk1BHWxcjf7N046tvN82715czn9Pryz6Ilc4ACj4EBOCZM8KEnAYYADBRKnACAYUMFv1wotIhCEcaJCisqwJFgAUSQGyX/kCSVUUTIdKMwJlyo0oXHlhskwrTJciZHEXsgaqS4s6PJiCAr1uzYU8kBBSgnWFqpoMJMUjGtDmUwkmfVmVypakWhEKvXsS4nhLW5wNjVroJIoc05wSzTr0PtiigpYe4EC2vj4iWrFu5euWIMRBhacaVJhYQBEFjA9jHjyQ0xEABwGceGAZYjY0YBOrRLCxUp29QM+bRkx5s7ZyYgVbTqwwti2ybJ+vLtDYpycyZbYOlptxdx0kV+V7lC5iJAyyRrwYKxAdiz82ng0/jnAdMJFz0cPi104Ec1Vj9/M6F173vKL/feXv156dw11tlqeMMnv4V5Ap53GmjQQH97nFfg+IFiucfgRX5Z8KAgbUlQ4IULIlghhhdOSB6AgX0IVn8eReghen3NRIBsRgnH4l4LuEidZBjwRpt6NM5WGwoW0KSjCwX6yJSMab2GwwAPDXfaBCtWpluRTQqC5JM5oUZAjUNS+VeOLWpJEQ7VYQANW0INJSZVDFSnZphjSikfmzE5N4EEbQI1QJmnWXCmHulRp2edwDXF43txukenJwvI9xyg9Q26Z3MzGUcBYFEChZh6DVTq34AU8Iflh51Sd+CnKFYQ6mmZkhqfBKfSxZWqA9DZanWjxmhrWwi0qtCrt/43K6WqVjjpmhIqgEGvculaGKklKstAACEAACH5BAUKABwALAcABADOAAsAAAX/ICdyQmaMYyAUqPgIBiHPxNpy79kqRXH8wAPsRmDdXpAWgWdEIYm2llCHqjVHU+jjJkwqBTecwItShMXkEfNWSh8e1NGAcLgpDGlRgk7EJ/6Ae3VKfoF/fDuFhohVeDeCfXkcCQqDVQcQhn+VNDOYmpSWaoqBlUSfmowjEA+iEAEGDRGztAwGCDcXEA60tXEiCrq8vREMEBLIyRLCxMWSHMzExnbRvQ2Sy7vN0zvVtNfU2tLY3rPgLdnDvca4VQS/Cpk3ABwSLQkYAQwT/P309vcI7OvXr94jBQMJ/nskkGA/BQBRLNDncAIAiDcG6LsxAWOLiQzmeURBKWSLCQbv/1F0eDGinJUKR47YY1IEgQASKk7Yc7ACRwZm7mHweRJoz59BJUogisKCUaFMR0x4SlJBVBFTk8pZivTR0K73rN5wqlXEAq5Fy3IYgHbEzQ0nLy4QSoCjXLoom96VOJEeCosK5n4kkFfqXjl94wa+l1gvAcGICbewAOAxY8l/Ky/QhAGz4cUkGxu2HNozhwMGBnCUqUdBg9UuW9eUynqSwLHIBujePef1ZGQZXcM+OFuEBeBhi3OYgLyqcuaxbT9vLkf4SeqyWxSQpKGB2gQpm1KdWbu72rPRzR9Ne2Nu9Kzr/1Jqj0yD/fvqP4aXOt5sW/5qsXXVcv1Nsp8IBUAmgswGF3llGgeU1YVXXKTN1FlhWFXW3gIE+DVChApysACHHo7Q4A35lLichh+ROBmLKAzgYmYEYDAhCgxKGOOMn4WR4kkDaoBBOxJtdNKQxFmg5JIWIBnQc07GaORfUY4AEkdV6jHlCEISSZ5yTXpp1pbGZbkWmcuZmQCaE6iJ0FhjMaDjTMsgZaNEHFRAQVp3bqXnZED1qYcECOz5V6BhSWCoVJQIKuKQi2KFKEkEFAqoAo7uYSmO3jk61wUUMKmknJ4SGimBmAa0qVQBhAAAIfkEBQoAGwAsBwAEAM4ACwAABf/gJm5FmRlEqhJC+bywgK5pO4rHI0D3pii22+Mg6/0Ej96weCMAk7cDkXf7lZTTnrMl7eaYoy10JN0ZFdco0XAuvKI6qkgVFJXYNwjkIBcNBgR8TQoGfRsJCRuCYYQQiI+ICosiCoGOkIiKfSl8mJkHZ4U9kZMbKaI3pKGXmJKrngmug4WwkhA0lrCBWgYFCCMQFwoQDRHGxwwGCBLMzRLEx8iGzMMO0cYNeCMKzBDW19lnF9DXDIY/48Xg093f0Q3s1dcR8OLe8+Y91OTv5wrj7o7B+7VNQqABIoRVCMBggsOHE36kSoCBIcSH3EbFangxogJYFi8CkJhqQciLJEf/LDDJEeJIBT0GsOwYUYJGBS0fjpQAMidGmyVP6sx4Y6VQhzs9VUwkwqaCCh0tmKoFtSMDmBOf9phg4SrVrROuasRQAaxXpVUhdsU6IsECZlvX3kwLUWzRt0BHOLTbNlbZG3vZinArge5Dvn7wbqtQkSYAAgtKmnSsYKVKo2AfW048uaPmG386i4Q8EQMBAIAnfB7xBxBqvapJ9zX9WgRS2YMpnvYMGdPK3aMjt/3dUcNI4blpj7iwkMFWDXDvSmgAlijrt9RTR78+PS6z1uAJZIe93Q8g5zcsWCi/4Y+C8bah5zUv3vv89uft30QP23punGCx5954oBBwnwYaNCDY/wYrsYeggnM9B2Fpf8GG2CEUVWhbWAtGouEGDy7Y4IEJVrbSiXghqGKIo7z1IVcXIkKWWR361QOLWWnIhwERpLaaCCee5iMBGJQmJGyPFTnbkfHVZGRtIGrg5HALEJAZbu39BuUEUmq1JJQIPtZilY5hGeSWsSk52G9XqsmgljdIcABytq13HyIM6RcUA+r1qZ4EBF3WHWB29tBgAzRhEGhig8KmqKFv8SeCeo+mgsF7YFXa1qWSbkDpom/mqR1PmHCqJ3fwNRVXjC7S6CZhFVCQ2lWvZiirhQq42SACt25IK2hv8TprriUV1usGgeka7LFcNmCldMLi6qZMgFLgpw16Cipb7bC1knXsBiEAACH5BAUKABsALAcABADOAAsAAAX/4FZsJPkUmUGsLCEUTywXglFuSg7fW1xAvNWLF6sFFcPb42C8EZCj24EJdCp2yoegWsolS0Uu6fmamg8n8YYcLU2bXSiRaXMGvqV6/KAeJAh8VgZqCX+BexCFioWAYgqNi4qAR4ORhRuHY408jAeUhAmYYiuVlpiflqGZa5CWkzc5fKmbbhIpsAoQDRG8vQwQCBLCwxK6vb5qwhfGxxENahvCEA7NzskSy7vNzzzK09W/PNHF1NvX2dXcN8K55cfh69Luveol3vO8zwi4Yhj+AQwmCBw4IYclDAAJDlQggVOChAoLKkgFkSCAHDwWLKhIEOONARsDKryogFPIiAUb/95gJNIiw4wnI778GFPhzBKFOAq8qLJEhQpiNArjMcHCmlTCUDIouTKBhApELSxFWiGiVKY4E2CAekPgUphDu0742nRrVLJZnyrFSqKQ2ohoSYAMW6IoDpNJ4bLdILTnAj8KUF7UeENjAKuDyxIgOuGiOI0EBBMgLNew5AUrDTMGsFixwBIaNCQuAXJB57qNJ2OWm2Aj4skwCQCIyNkhhtMkdsIuodE0AN4LJDRgfLPtn5YDLdBlraAByuUbBgxQwICxMOnYpVOPej074OFdlfc0TqC62OIbcppHjV4o+LrieWhfT8JC/I/T6W8oCl29vQ0XjLdBaA3s1RcPBO7lFvpX8BVoG4O5jTXRQRDuJ6FDTzEWF1/BCZhgbyAKE9qICYLloQYOFtahVRsWYlZ4KQJHlwHS/IYaZ6sZd9tmu5HQm2xi1UaTbzxYwJk/wBF5g5EEYOBZeEfGZmNdFyFZmZIR4jikbLThlh5kUUVJGmRT7sekkziRWUIACABk3T4qCsedgO4xhgGcY7q5pHJ4klBBTQRJ0CeHcoYHHUh6wgfdn9uJdSdMiebGJ0zUPTcoS286FCkrZxnYoYYKWLkBowhQoBeaOlZAgVhLidrXqg2GiqpQpZ4apwSwRtjqrB3muoF9BboaXKmshlqWqsWiGt2wphJkQbAU5hoCACH5BAUKABsALAcABADOAAsAAAX/oGFw2WZuT5oZROsSQnGaKjRvilI893MItlNOJ5v5gDcFrHhKIWcEYu/xFEqNv6B1N62aclysF7fsZYe5aOx2yL5aAUGSaT1oTYMBwQ5VGCAJgYIJCnx1gIOBhXdwiIl7d0p2iYGQUAQBjoOFSQR/lIQHnZ+Ue6OagqYzSqSJi5eTpTxGcjcSChANEbu8DBAIEsHBChe5vL13G7fFuscRDcnKuM3H0La3EA7Oz8kKEsXazr7Cw9/Gztar5uHHvte47MjktznZ2w0G1+D3BgirAqJmJMAQgMGEgwgn5Ei0gKDBhBMALGRYEOJBb5QcWlQo4cbAihZz3GgIMqFEBSM1/4ZEOWPAgpIIJXYU+PIhRG8ja1qU6VHlzZknJNQ6UanCjQkWCIGSUGEjAwVLjc44+DTqUQtPPS5gejUrTa5TJ3g9sWCr1BNUWZI161StiQUDmLYdGfesibQ3XMq1OPYthrwuA2yU2LBs2cBHIypYQPPlYAKFD5cVvNPtW8eVGbdcQADATsiNO4cFAPkvHpedPzc8kUcPgNGgZ5RNDZG05reoE9s2vSEP79MEGiQGy1qP8LA4ZcdtsJE48ONoLTBtTV0B9LsTnPceoIDBDQvS7W7vfjVY3q3eZ4A339J4eaAmKqU/sV58HvJh2RcnIBsDUw0ABqhBA5aV5V9XUFGiHfVeAiWwoFgJJrIXRH1tEMiDFV4oHoAEGlaWhgIGSGBO2nFomYY3mKjVglidaNYJGJDkWW2xxTfbjCbVaOGNqoX2GloR8ZeTaECS9pthRGJH2g0b3Agbk6hNANtteHD2GJUucfajCQBy5OOTQ25ZgUPvaVVQmbKh9510/qQpwXx3SQdfk8tZJOd5b6JJFplT3ZnmmX3qd5l1eg5q00HrtUkUn0AKaiGjClSAgKLYZcgWXwocGRcCFGCKwSB6ceqphwmYRUFYT/1WKlOdUpipmxW0mlCqHjYkAaeoZlqrqZ4qd+upQKaapn/AmgAegZ8KUtYtFAQQAgAh+QQFCgAbACwHAAQAzgALAAAF/+C2PUcmiCiZGUTrEkKBis8jQEquKwU5HyXIbEPgyX7BYa5wTNmEMwWsSXsqFbEh8DYs9mrgGjdK6GkPY5GOeU6ryz7UFopSQEzygOGhJBjoIgMDBAcBM0V/CYqLCQqFOwobiYyKjn2TlI6GKC2YjJZknouaZAcQlJUHl6eooJwKooobqoewrJSEmyKdt59NhRKFMxLEEA4RyMkMEAjDEhfGycqAG8TQx9IRDRDE3d3R2ctD1RLg0ttKEnbY5wZD3+zJ6M7X2RHi9Oby7u/r9g38UFjTh2xZJBEBMDAboogAgwkQI07IMUORwocSJwCgWDFBAIwZOaJIsOBjRogKJP8wTODw5ESVHVtm3AhzpEeQElOuNDlTZ0ycEUWKWFASqEahGwYUPbnxoAgEdlYSqDBkgoUNClAlIHbSAoOsqCRQnQHxq1axVb06FWFxLIqyaze0Tft1JVqyE+pWXMD1pF6bYl3+HTqAWNW8cRUFzmih0ZAAB2oGKukSAAGGRHWJgLiR6AylBLpuHKKUMlMCngMpDSAa9QIUggZVVvDaJobLeC3XZpvgNgCmtPcuwP3WgmXSq4do0DC6o2/guzcseECtUoO0hmcsGKDgOt7ssBd07wqesAIGZC1YIBa7PQHvb1+SFo+++HrJSQfB33xfav3i5eX3Hnb4CTJgegEq8tH/YQEOcIJzbm2G2EoYRLgBXFpVmFYDcREV4HIcnmUhiGBRouEMJGJGzHIspqgdXxK0yCKHRNXoIX4uorCdTyjkyNtdPWrA4Up82EbAbzMRxxZRR54WXVLDIRmRcag5d2R6ugl3ZXzNhTecchpMhIGVAKAYpgJjjsSklBEd99maZoo535ZvdamjBEpusJyctg3h4X8XqodBMx0tiNeg/oGJaKGABpogS40KSqiaEgBqlQWLUtqoVQnytekEjzo0hHqhRorppOZt2p923M2AAV+oBtpAnnPNoB6HaU6mAAIU+IXmi3j2mtFXuUoHKwXpzVrsjcgGOauKEjQrwq157hitGq2NoWmjh7z6Wmxb0m5w66+2VRAuXN/yFUAIACH5BAUKABsALAcABADOAAsAAAX/4CZuRiaM45MZqBgIRbs9AqTcuFLE7VHLOh7KB5ERdjJaEaU4ClO/lgKWjKKcMiJQ8KgumcieVdQMD8cbBeuAkkC6LYLhOxoQ2PF5Ys9PKPBMen17f0CCg4VSh32JV4t8jSNqEIOEgJKPlkYBlJWRInKdiJdkmQlvKAsLBxdABA4RsbIMBggtEhcQsLKxDBC2TAS6vLENdJLDxMZAubu8vjIbzcQRtMzJz79S08oQEt/guNiyy7fcvMbh4OezdAvGrakLAQwyABsELQkY9BP+//ckyPDD4J9BfAMh1GsBoImMeQUN+lMgUJ9CiRMa5msxoB9Gh/o8GmxYMZXIgxtR/yQ46S/gQAURR0pDwYDfywoyLPip5AdnCwsMFPBU4BPFhKBDi444quCmDKZOfwZ9KEGpCKgcN1jdALSpPqIYsabS+nSqvqplvYqQYAeDPgwKwjaMtiDl0oaqUAyo+3TuWwUAMPpVCfee0cEjVBGQq2ABx7oTWmQk4FglZMGN9fGVDMCuiH2AOVOu/PmyxM630gwM0CCn6q8LjVJ8GXvpa5Uwn95OTC/nNxkda1/dLSK475IjCD6dHbK1ZOa4hXP9DXs5chJ00UpVm5xo2qRpoxptwF2E4/IbJpB/SDz9+q9b1aNfQH08+p4a8uvX8B53fLP+ycAfemjsRUBgp1H20K+BghHgVgt1GXZXZpZ5lt4ECjxYR4ScUWiShEtZqBiIInRGWnERNnjiBglw+JyGnxUmGowsyiiZg189lNtPGACjV2+S9UjbU0JWF6SPvEk3QZEqsZYTk3UAaRSUnznJI5LmESCdBVSyaOWUWLK4I5gDUYVeV1T9l+FZClCAUVA09uSmRHBCKAECFEhW51ht6rnmWBXkaR+NjuHpJ40D3DmnQXt2F+ihZxlqVKOfQRACACH5BAUKABwALAcABADOAAsAAAX/ICdyUCkUo/g8mUG8MCGkKgspeC6j6XEIEBpBUeCNfECaglBcOVfJFK7YQwZHQ6JRZBUqTrSuVEuD3nI45pYjFuWKvjjSkCoRaBUMWxkwBGgJCXspQ36Bh4EEB0oKhoiBgyNLjo8Ki4QElIiWfJqHnISNEI+Ql5J9o6SgkqKkgqYihamPkW6oNBgSfiMMDQkGCBLCwxIQDhHIyQwQCGMKxsnKVyPCF9DREQ3MxMPX0cu4wt7J2uHWx9jlKd3o39MiuefYEcvNkuLt5O8c1ePI2tyELXGQwoGDAQf+iEC2xByDCRAjTlAgIUWCBRgCPJQ4AQBFXAs0coT40WLIjRxL/47AcHLkxIomRXL0CHPERZkpa4q4iVKiyp0tR/7kwHMkTUBBJR5dOCEBAVcKKtCAyOHpowXCpk7goABqBZdcvWploACpBKkpIJI1q5OD2rIWE0R1uTZu1LFwbWL9OlKuWb4c6+o9i3dEgw0RCGDUG9KlRw56gDY2qmCByZBaASi+TACA0TucAaTteCcy0ZuOK3N2vJlx58+LRQyY3Xm0ZsgjZg+oPQLi7dUcNXi0LOJw1pgNtB7XG6CBy+U75SYfPTSQAgZTNUDnQHt67wnbZyvwLgKiMN3oCZB3C76tdewpLFgIP2C88rbi4Y+QT3+8S5USMICZXWj1pkEDeUU3lOYGB3alSoEiMIjgX4WlgNF2EibIwQIXauWXSRg2SAOHIU5IIIMoZkhhWiJaiFVbKo6AQEgQXrTAazO1JhkBrBG3Y2Y6EsUhaGn95hprSN0oWpFE7rhkeaQBchGOEWnwEmc0uKWZj0LeuNV3W4Y2lZHFlQCSRjTIl8uZ+kG5HU/3sRlnTG2ytyadytnD3HrmuRcSn+0h1dycexIK1KCjYaCnjCCVqOFFJTZ5GkUUjESWaUIKU2lgCmAKKQIUjHapXRKE+t2og1VgankNYnohqKJ2CmKplso6GKz7WYCgqxeuyoF8u9IQAgA7",
msg:null,msgText:"<em>Loading the next set of posts...</em>",selector:null,speed:"fast",start:undefined},state:{isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,currPage:1},debug:false,behavior:undefined,binder:$(window),nextSelector:"div.navigation a:first",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:undefined,dataType:"html",appendCallback:true,bufferPx:40,errorCallback:function(){},infid:0,
pixelsFromNavToBottom:undefined,path:undefined,prefill:false,maxPage:undefined};$.infinitescroll.prototype={_binding:function infscr_binding(binding){var instance=this,opts=instance.options;opts.v="2.0b2.120520";if(!!opts.behavior&&this["_binding_"+opts.behavior]!==undefined){this["_binding_"+opts.behavior].call(this);return}if(binding!=="bind"&&binding!=="unbind"){this._debug("Binding value  "+binding+" not valid");return false}if(binding==="unbind")this.options.binder.unbind("smartscroll.infscr."+
instance.options.infid);else this.options.binder[binding]("smartscroll.infscr."+instance.options.infid,function(){instance.scroll()});this._debug("Binding",binding)},_create:function infscr_create(options,callback){var opts=$.extend(true,{},$.infinitescroll.defaults,options);this.options=opts;var $window=$(window);var instance=this;if(!instance._validate(options))return false;var path=$(opts.nextSelector).attr("href");if(!path){this._debug("Navigation selector not found");return false}opts.path=opts.path||
this._determinepath(path);opts.contentSelector=opts.contentSelector||this.element;opts.loading.selector=opts.loading.selector||opts.contentSelector;opts.loading.msg=opts.loading.msg||$('<div id="infscr-loading"><img alt="Loading..." src="'+opts.loading.img+'" /><div>'+opts.loading.msgText+"</div></div>");(new Image).src=opts.loading.img;if(opts.pixelsFromNavToBottom===undefined)opts.pixelsFromNavToBottom=$(document).height()-$(opts.navSelector).offset().top;var self=this;opts.loading.start=opts.loading.start||
function(){$(opts.navSelector).hide();opts.loading.msg.appendTo(opts.loading.selector).show(opts.loading.speed,$.proxy(function(){this.beginAjax(opts)},self))};opts.loading.finished=opts.loading.finished||function(){opts.loading.msg.fadeOut(opts.loading.speed)};opts.callback=function(instance,data,url){if(!!opts.behavior&&instance["_callback_"+opts.behavior]!==undefined)instance["_callback_"+opts.behavior].call($(opts.contentSelector)[0],data,url);if(callback)callback.call($(opts.contentSelector)[0],
data,opts,url);if(opts.prefill)$window.bind("resize.infinite-scroll",instance._prefill)};if(options.debug)if(Function.prototype.bind&&(typeof console==="object"||typeof console==="function")&&typeof console.log==="object")["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(method){console[method]=this.call(console[method],console)},Function.prototype.bind);this._setup();if(opts.prefill)this._prefill();return true},_prefill:function infscr_prefill(){var instance=
this;var $document=$(document);var $window=$(window);function needsPrefill(){return $document.height()<=$window.height()}this._prefill=function(){if(needsPrefill())instance.scroll();$window.bind("resize.infinite-scroll",function(){if(needsPrefill()){$window.unbind("resize.infinite-scroll");instance.scroll()}})};this._prefill()},_debug:function infscr_debug(){if(true!==this.options.debug)return;if(typeof console!=="undefined"&&typeof console.log==="function")if(Array.prototype.slice.call(arguments).length===
1&&typeof Array.prototype.slice.call(arguments)[0]==="string")console.log(Array.prototype.slice.call(arguments).toString());else console.log(Array.prototype.slice.call(arguments));else if(!Function.prototype.bind&&typeof console!=="undefined"&&typeof console.log==="object")Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},_determinepath:function infscr_determinepath(path){var opts=this.options;if(!!opts.behavior&&this["_determinepath_"+opts.behavior]!==undefined)return this["_determinepath_"+
opts.behavior].call(this,path);if(!!opts.pathParse){this._debug("pathParse manual");return opts.pathParse(path,this.options.state.currPage+1)}else if(path.match(/^(.*?)2(.*?$)/)){if(path.match(/^(.*?page=)2(\/.*|$)/)){path=path.match(/^(.*?page=)2(\/.*|$)/).slice(1);return path}path=path.match(/^(.*?)2(.*?$)/).slice(1)}else if(path.match(/^(.*?page=)1(\/.*|$)/)){path=path.match(/^(.*?page=)1(\/.*|$)/).slice(1);return path}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");
opts.state.isInvalidPage=true}this._debug("determinePath",path);return path},_error:function infscr_error(xhr){var opts=this.options;if(!!opts.behavior&&this["_error_"+opts.behavior]!==undefined){this["_error_"+opts.behavior].call(this,xhr);return}if(xhr!=="destroy"&&xhr!=="end")xhr="unknown";this._debug("Error",xhr);if(xhr==="end")this._showdonemsg();opts.state.isDone=true;opts.state.currPage=1;opts.state.isPaused=false;this._binding("unbind")},_loadcallback:function infscr_loadcallback(box,data,
url){var opts=this.options,callback=this.options.callback,result=opts.state.isDone?"done":!opts.appendCallback?"no-append":"append",frag;if(!!opts.behavior&&this["_loadcallback_"+opts.behavior]!==undefined){this["_loadcallback_"+opts.behavior].call(this,box,data);return}switch(result){case "done":this._showdonemsg();return false;case "no-append":if(opts.dataType==="html"){data="<div>"+data+"</div>";data=$(data).find(opts.itemSelector)}break;case "append":var children=box.children();if(children.length===
0)return this._error("end");frag=document.createDocumentFragment();while(box[0].firstChild)frag.appendChild(box[0].firstChild);this._debug("contentSelector",$(opts.contentSelector)[0]);$(opts.contentSelector)[0].appendChild(frag);data=children.get();break}opts.loading.finished.call($(opts.contentSelector)[0],opts);if(opts.animate){var scrollTo=$(window).scrollTop()+$("#infscr-loading").height()+opts.extraScrollPx+"px";$("html,body").animate({scrollTop:scrollTo},800,function(){opts.state.isDuringAjax=
false})}if(!opts.animate)opts.state.isDuringAjax=false;callback(this,data,url);if(opts.prefill)this._prefill()},_nearbottom:function infscr_nearbottom(){var opts=this.options,pixelsFromWindowBottomToBottom=0+$(document).height()-opts.binder.scrollTop()-$(window).height();if(!!opts.behavior&&this["_nearbottom_"+opts.behavior]!==undefined)return this["_nearbottom_"+opts.behavior].call(this);this._debug("math:",pixelsFromWindowBottomToBottom,opts.pixelsFromNavToBottom);return pixelsFromWindowBottomToBottom-
opts.bufferPx<opts.pixelsFromNavToBottom},_pausing:function infscr_pausing(pause){var opts=this.options;if(!!opts.behavior&&this["_pausing_"+opts.behavior]!==undefined){this["_pausing_"+opts.behavior].call(this,pause);return}if(pause!=="pause"&&pause!=="resume"&&pause!==null)this._debug("Invalid argument. Toggling pause value instead");pause=pause&&(pause==="pause"||pause==="resume")?pause:"toggle";switch(pause){case "pause":opts.state.isPaused=true;break;case "resume":opts.state.isPaused=false;break;
case "toggle":opts.state.isPaused=!opts.state.isPaused;break}this._debug("Paused",opts.state.isPaused);return false},_setup:function infscr_setup(){var opts=this.options;if(!!opts.behavior&&this["_setup_"+opts.behavior]!==undefined){this["_setup_"+opts.behavior].call(this);return}this._binding("bind");return false},_showdonemsg:function infscr_showdonemsg(){var opts=this.options;if(!!opts.behavior&&this["_showdonemsg_"+opts.behavior]!==undefined){this["_showdonemsg_"+opts.behavior].call(this);return}opts.loading.msg.find("img").hide().parent().find("div").html(opts.loading.finishedMsg).animate({opacity:1},
2E3,function(){$(this).parent().fadeOut(opts.loading.speed)});opts.errorCallback.call($(opts.contentSelector)[0],"done")},_validate:function infscr_validate(opts){for(var key in opts)if(key.indexOf&&key.indexOf("Selector")>-1&&$(opts[key]).length===0){this._debug("Your "+key+" found no elements.");return false}return true},bind:function infscr_bind(){this._binding("bind")},destroy:function infscr_destroy(){this.options.state.isDestroyed=true;this.options.loading.finished();return this._error("destroy")},
pause:function infscr_pause(){this._pausing("pause")},resume:function infscr_resume(){this._pausing("resume")},beginAjax:function infscr_ajax(opts){var instance=this,path=opts.path,box,desturl,method,condition;opts.state.currPage++;if(opts.maxPage!=undefined&&opts.state.currPage>opts.maxPage){this.destroy();return}box=$(opts.contentSelector).is("table")?$("<tbody/>"):$("<div/>");desturl=typeof path==="function"?path(opts.state.currPage):path.join(opts.state.currPage);instance._debug("heading into ajax",
desturl);method=opts.dataType==="html"||opts.dataType==="json"?opts.dataType:"html+callback";if(opts.appendCallback&&opts.dataType==="html")method+="+callback";switch(method){case "html+callback":instance._debug("Using HTML via .load() method");box.load(desturl+" "+opts.itemSelector,undefined,function infscr_ajax_callback(responseText){instance._loadcallback(box,responseText,desturl)});break;case "html":instance._debug("Using "+method.toUpperCase()+" via $.ajax() method");$.ajax({url:desturl,dataType:opts.dataType,
complete:function infscr_ajax_callback(jqXHR,textStatus){condition=typeof jqXHR.isResolved!=="undefined"?jqXHR.isResolved():textStatus==="success"||textStatus==="notmodified";if(condition)instance._loadcallback(box,jqXHR.responseText,desturl);else instance._error("end")}});break;case "json":instance._debug("Using "+method.toUpperCase()+" via $.ajax() method");$.ajax({dataType:"json",type:"GET",url:desturl,success:function(data,textStatus,jqXHR){condition=typeof jqXHR.isResolved!=="undefined"?jqXHR.isResolved():
textStatus==="success"||textStatus==="notmodified";if(opts.appendCallback)if(opts.template!==undefined){var theData=opts.template(data);box.append(theData);if(condition)instance._loadcallback(box,theData);else instance._error("end")}else{instance._debug("template must be defined.");instance._error("end")}else if(condition)instance._loadcallback(box,data,desturl);else instance._error("end")},error:function(){instance._debug("JSON ajax request failed.");instance._error("end")}});break}},retrieve:function infscr_retrieve(pageNum){pageNum=
pageNum||null;var instance=this,opts=instance.options;if(!!opts.behavior&&this["retrieve_"+opts.behavior]!==undefined){this["retrieve_"+opts.behavior].call(this,pageNum);return}if(opts.state.isDestroyed){this._debug("Instance is destroyed");return false}opts.state.isDuringAjax=true;opts.loading.start.call($(opts.contentSelector)[0],opts)},scroll:function infscr_scroll(){var opts=this.options,state=opts.state;if(!!opts.behavior&&this["scroll_"+opts.behavior]!==undefined){this["scroll_"+opts.behavior].call(this);
return}if(state.isDuringAjax||state.isInvalidPage||state.isDone||state.isDestroyed||state.isPaused)return;if(!this._nearbottom())return;this.retrieve()},toggle:function infscr_toggle(){this._pausing()},unbind:function infscr_unbind(){this._binding("unbind")},update:function infscr_options(key){if($.isPlainObject(key))this.options=$.extend(true,this.options,key)}};$.fn.infinitescroll=function infscr_init(options,callback){var thisCall=typeof options;switch(thisCall){case "string":var args=Array.prototype.slice.call(arguments,
1);this.each(function(){var instance=$.data(this,"infinitescroll");if(!instance)return false;if(!$.isFunction(instance[options])||options.charAt(0)==="_")return false;instance[options].apply(instance,args)});break;case "object":this.each(function(){var instance=$.data(this,"infinitescroll");if(instance)instance.update(options);else{instance=new $.infinitescroll(options,callback,this);if(!instance.failed)$.data(this,"infinitescroll",instance)}});break}return this};var event=$.event,scrollTimeout;event.special.smartscroll=
{setup:function(){$(this).bind("scroll",event.special.smartscroll.handler)},teardown:function(){$(this).unbind("scroll",event.special.smartscroll.handler)},handler:function(event,execAsap){var context=this,args=arguments;event.type="smartscroll";if(scrollTimeout)clearTimeout(scrollTimeout);scrollTimeout=setTimeout(function(){$(context).trigger("smartscroll",args)},execAsap==="execAsap"?0:100)}};$.fn.smartscroll=function(fn){return fn?this.bind("smartscroll",fn):this.trigger("smartscroll",["execAsap"])}})(window,
jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.galleryview-3.0.js **************************************************************/ 
if(typeof Object.create!=="function")Object.create=function(o){function F(){}F.prototype=o;return new F};
(function($){var gvImage=function(img){this.src={panel:img.data("original")||img.attr("src"),frame:img.data("frame")||img.data("original")||img.attr("src")};this.scale={panel:null,frame:null};this.height=0;this.width=0;this.attrs={title:img.attr("title")||img.attr("alt"),description:img.data("description")};this.href=null;this.dom_obj=null;return this},gv={getInt:function(i){i=parseInt(i,10);return isNaN(i)?0:i},innerWidth:function(elem){return this.getInt(elem.css("width"))||0},outerWidth:function(elem){return this.innerWidth(elem)+
this.extraWidth(elem)},extraWidth:function(elem){return this.getInt(elem.css("paddingLeft"))+this.getInt(elem.css("paddingRight"))+this.getInt(elem.css("borderLeftWidth"))+this.getInt(elem.css("borderRightWidth"))},innerHeight:function(elem){return this.getInt(elem.css("height"))||0},outerHeight:function(elem){return this.innerHeight(elem)+this.extraHeight(elem)},extraHeight:function(elem){return this.getInt(elem.css("paddingTop"))+this.getInt(elem.css("paddingBottom"))+this.getInt(elem.css("borderTopWidth"))+
this.getInt(elem.css("borderBottomWidth"))}},GalleryView={elems:[".gv_galleryWrap",".gv_gallery",".gv_panelWrap",".gv_panel","img.gv_image",".gv_infobar",".gv_filmstripWrap",".gv_filmstrip",".gv_frame",".gv_thumbnail",".gv_caption","img.gv_thumb",".gv_navWrap",".gv_navNext",".gv_navPrev",".gv_navPlay",".gv_panelNavNext",".gv_panelNavPrev",".gv_overlay",".gv_showOverlay",".gv_imageStore"],createElem:function(attrs,elem){elem=document.createElement(elem);var $elem=$(elem);return $elem.attr(attrs)},
getPos:function(el){var self=this,dom=this.dom,el=el[0],el_id=el.id,left=0,top=0,gPos,gLeft,gTop;if(!el)return{top:0,left:0};if(el.offsetParent){do{left+=el.offsetLeft;top+=el.offsetTop}while(el=el.offsetParent)}if(el_id===self.id)return{left:left,top:top};else{gPos=self.getPos(dom.galleryWrap);gLeft=gPos.left;gTop=gPos.top;return{left:left-gLeft,top:top-gTop}}},mouseIsOverGallery:function(x,y){var self=this,dom=this.dom,pos=this.getPos(dom.gv_galleryWrap),top=pos.top,left=pos.left;return x>left&&
x<left+gv.outerWidth(dom.gv_galleryWrap)&&y>top&&y<top+gv.outerHeight(dom.gv_galleryWrap)},mouseIsOverPanel:function(x,y){var self=this,dom=this.dom,pos=this.getPos(dom.gv_panelWrap),gPos=this.getPos(dom.gv_galleryWrap),top=pos.top+gPos.top,left=pos.left+gPos.left;return x>left&&x<left+gv.outerWidth(dom.gv_panelWrap)&&y>top&&y<top+gv.outerHeight(dom.gv_panelWrap)},storeImages:function(){var self=this;this.sourceImgs=$("li>img",this.$el);this.numImages=this.sourceImgs.length;this.gvImages=[];this.sourceImgs.each(function(i,
img){self.gvImages[i]=new gvImage($(img))})},setDimensions:function(create){create=typeof create!=="undefined"?create:true;var self=this,dom=this.dom,widths={prev:gv.innerWidth(dom.gv_navPrev),play:gv.innerWidth(dom.gv_navPlay),next:gv.innerWidth(dom.gv_navNext),filmstrip:this.opts.frame_width,fsMax:0,fsFull:0},heights={prev:gv.innerHeight(dom.gv_navPrev),play:gv.innerHeight(dom.gv_navPlay),next:gv.innerHeight(dom.gv_navNext),filmstrip:this.opts.frame_height+(this.opts.show_captions?gv.outerHeight(dom.gv_caption):
0),fsMax:0,fsFull:0},panels=[];if(this.filmstripOrientation==="horizontal")dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,heights.play,heights.next)});else if(this.opts.filmstrip_style==="scroll"&&this.opts.frame_width<widths.prev+widths.play+widths.next)dom.gv_navWrap.css({width:Math.max(widths.prev,widths.play,widths.next),height:heights.prev+heights.play+heights.next});else dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,
heights.play,heights.next)});if(this.filmstripOrientation==="vertical"&&widths.filmstrip<widths.prev+widths.play+widths.next)dom.gv_navWrap.css({width:Math.max(widths.prev,widths.play,widths.next),height:heights.prev+heights.play+heights.next});else dom.gv_navWrap.css({width:widths.prev+widths.play+widths.next,height:Math.max(heights.prev,heights.play,heights.next)});dom.gv_panel.css({width:this.opts.panel_width,height:this.opts.panel_height});dom.gv_panelWrap.css({width:gv.outerWidth(dom.gv_panel),
height:gv.outerHeight(dom.gv_panel)});dom.gv_overlay.css({width:this.opts.panel_width});if(create){$.each(this.gvImages,function(i,img){dom.gv_panelWrap.append(dom.gv_panel.clone(true))});dom.gv_panels=dom.gv_panelWrap.find(".gv_panel");dom.gv_panels.remove()}else{this_opts=this.opts;$.each(dom.gv_panels,function(i,panel){$(panel).css({width:this_opts.panel_width,height:this_opts.panel_height})})}dom.gv_thumbnail.css({width:this.opts.frame_width,height:this.opts.frame_height});dom.gv_frame.css({width:gv.outerWidth(dom.gv_thumbnail),
height:gv.outerHeight(dom.gv_thumbnail)+(this.opts.show_captions?gv.outerHeight(dom.gv_caption):0),marginRight:this.opts.frame_gap,marginBottom:this.opts.frame_gap});if(!create){dom.gv_filmstrip.find(".gv_thumbnail").css({width:this.opts.frame_width,height:this.opts.frame_height});dom.gv_filmstrip.find(".gv_frame").css({width:gv.outerWidth(dom.gv_thumbnail),height:gv.outerHeight(dom.gv_thumbnail)+(this.opts.show_captions?gv.outerHeight(dom.gv_caption):0),marginRight:this.opts.frame_gap,marginBottom:this.opts.frame_gap})}if(this.filmstripOrientation===
"horizontal"){this.filmstripSize=Math.floor((gv.outerWidth(dom.gv_panelWrap)-gv.outerWidth(dom.gv_navWrap))/(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap));widths.fsMax=this.filmstripSize*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap);widths.fsFull=this.gvImages.length*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap);widths.filmstrip=Math.min(widths.fsMax,widths.fsFull);if(this.opts.filmstrip_style!=="scroll")heights.filmstrip=Math.ceil(this.gvImages.length/this.filmstripSize)*(gv.outerHeight(dom.gv_frame)+
this.opts.frame_gap)-this.opts.frame_gap}else{this.filmstripSize=Math.floor((gv.outerHeight(dom.gv_panelWrap)-gv.outerHeight(dom.gv_navWrap))/(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap));heights.fsMax=this.filmstripSize*(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap);heights.fsFull=this.gvImages.length*(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap);heights.filmstrip=Math.min(heights.fsMax,heights.fsFull);if(this.opts.filmstrip_style!=="scroll")widths.filmstrip=Math.ceil(this.gvImages.length/
this.filmstripSize)*(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap)-this.opts.frame_gap}dom.gv_filmstripWrap.css({width:widths.filmstrip,height:heights.filmstrip});if(this.opts.show_filmstrip)if(this.filmstripOrientation==="horizontal")dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap),height:gv.outerHeight(dom.gv_panelWrap)+this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(gv.outerHeight(dom.gv_filmstripWrap),gv.outerHeight(dom.gv_navWrap)):gv.outerHeight(dom.gv_filmstripWrap))});else dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap)+
this.opts.frame_gap+(this.opts.show_filmstrip?Math.max(gv.outerWidth(dom.gv_filmstripWrap),gv.outerWidth(dom.gv_navWrap)):gv.outerWidth(dom.gv_filmstripWrap)),height:gv.outerHeight(dom.gv_panelWrap)});else dom.gv_gallery.css({width:gv.outerWidth(dom.gv_panelWrap),height:gv.outerHeight(dom.gv_panelWrap)});dom.gv_galleryWrap.css({width:gv.outerWidth(dom.gv_gallery),height:gv.outerHeight(dom.gv_gallery),padding:this.opts.frame_gap})},setPositions:function(create){create=typeof create!=="undefined"?create:
true;var self=this,dom=this.dom,navVert=0,fsVert=0,navHorz=0,fsHorz=0,vert,horz;if(this.filmstripOrientation==="horizontal"){vert=Math.round((gv.outerHeight(dom.gv_filmstripWrap)-gv.outerHeight(dom.gv_navWrap))/2);if(vert<0)fsVert=-1*vert;else navVert=vert}else{horz=Math.round((gv.outerWidth(dom.gv_filmstripWrap)-gv.outerWidth(dom.gv_navWrap))/2);if(horz<0)fsHorz=-1*horz;else navHorz=horz}if(!this.opts.show_filmstrip_nav&&this.filmstripOrientation==="horizontal")fsHorz=Math.floor((gv.outerWidth(dom.gv_panelWrap)-
gv.outerWidth(dom.gv_filmstripWrap))/2);dom.gv_panelNavNext.css({top:(gv.outerHeight(dom.gv_panel)-gv.outerHeight(dom.gv_panelNavNext))/2,right:10});dom.gv_panelNavPrev.css({top:(gv.outerHeight(dom.gv_panel)-gv.outerHeight(dom.gv_panelNavPrev))/2,left:10});switch(this.opts.filmstrip_position){case "top":dom.gv_navWrap.css({top:navVert,right:navHorz});dom.gv_panelWrap.css({bottom:0,left:0});dom.gv_filmstripWrap.css({top:fsVert,left:fsHorz});break;case "right":dom.gv_navWrap.css({bottom:navVert,right:navHorz});
dom.gv_panelWrap.css({top:0,left:0});dom.gv_filmstripWrap.css({top:fsVert,right:fsHorz});break;case "left":dom.gv_navWrap.css({bottom:navVert,left:navHorz});dom.gv_panelWrap.css({top:0,right:0});dom.gv_filmstripWrap.css({top:fsVert,left:fsHorz});break;default:dom.gv_navWrap.css({bottom:navVert,right:navHorz});dom.gv_panelWrap.css({top:0,left:0});dom.gv_filmstripWrap.css({bottom:fsVert,left:fsHorz});break}if(this.opts.overlay_position==="top"){dom.gv_overlay.css({top:0,left:-99999});dom.gv_showOverlay.css({top:0,
left:0})}else{dom.gv_overlay.css({bottom:0,left:-99999});dom.gv_showOverlay.css({bottom:0,left:0})}if(create)if(!this.opts.show_filmstrip_nav)dom.gv_navWrap.remove()},buildFilmstrip:function(create){create=typeof create!=="undefined"?create:true;var self=this,dom=this.dom,framesLength=this.gvImages.length*((this.filmstripOrientation==="horizontal"?this.opts.frame_width:this.opts.frame_height)+this.opts.frame_gap);if(create){dom.gv_frame.append(dom.gv_thumbnail);if(this.opts.show_captions)dom.gv_frame.append(dom.gv_caption);
dom.gv_thumbnail.css("opacity",this.opts.frame_opacity);dom.gv_thumbnail.bind({mouseover:function(){if(!$(this).hasClass("current"))$(this).stop().animate({opacity:1},250)},mouseout:function(){if(!$(this).hasClass("current"))$(this).stop().animate({opacity:self.opts.frame_opacity},250)}});$.each(this.gvImages,function(i,img){dom.gv_frame.clone(true).prependTo(dom.gv_filmstrip)})}dom.gv_filmstrip.css({width:gv.outerWidth(dom.gv_frame),height:gv.outerHeight(dom.gv_frame)});this.framesLength=framesLength;
if(this.opts.filmstrip_style==="scroll")if(this.filmstripOrientation==="horizontal"){if(create)dom.gv_filmstrip.find(".gv_frame").clone(true).addClass("hideifnoscrolling").appendTo(dom.gv_filmstrip).clone(true).appendTo(dom.gv_filmstrip);this.activateScrolling(framesLength>gv.innerWidth(dom.gv_filmstripWrap))}else{if(create)dom.gv_filmstrip.find(".gv_frame").clone(true).appendTo(dom.gv_filmstrip).clone(true).appendTo(dom.gv_filmstrip);this.activateScrolling(framesLength>gv.innerHeight(dom.gv_filmstripWrap))}else dom.gv_filmstrip.css({width:parseInt(dom.gv_filmstripWrap.css("width"),
10)+this.opts.frame_gap,height:parseInt(dom.gv_filmstripWrap.css("height"),10)+this.opts.frame_gap});if(create){dom.gv_frames=dom.gv_filmstrip.find(".gv_frame");$.each(dom.gv_frames,function(i,frame){$(frame).data("frameIndex",i)});dom.gv_thumbnails=dom.gv_filmstrip.find("div.gv_thumbnail")}},activateScrolling:function(activate){var dom=this.dom;if(this.filmstripOrientation==="horizontal")if(activate){dom.gv_filmstrip.css("width",this.framesLength*3);this.scrolling=true}else{dom.gv_filmstrip.css("width",
this.framesLength);this.scrolling=false}else if(activate){dom.gv_filmstrip.css("height",this.framesLength*3);this.scrolling=true}else{dom.gv_filmstrip.css("height",this.framesLength);this.scrolling=false}if(activate)this.dom.gv_filmstrip.find(".hideifnoscrolling").show();else this.dom.gv_filmstrip.find(".hideifnoscrolling").hide();if(dom.gv_thumbnails!=undefined)dom.gv_thumbnails.stop(true,true);this.dom.gv_filmstrip.stop(true,true).css({left:0,top:0});if(activate){var currentFrame=this.frameIterator;
this.frameIterator=0;if(dom.gv_thumbnails!=undefined)this.updateFilmstrip(currentFrame);this.dom.gv_filmstrip.stop(true,true)}},buildGallery:function(create){create=typeof create!=="undefined"?create:true;var self=this,dom=this.dom;this.setDimensions(create);this.setPositions(create);if(this.opts.show_filmstrip)this.buildFilmstrip(create)},showInfoBar:function(){if(!this.opts.show_infobar)return;var self=this,dom=this.dom;dom.gv_infobar.stop().stopTime("hideInfoBar_"+self.id).html(this.iterator+1+
" of "+this.numImages).show().css("opacity",this.opts.infobar_opacity);dom.gv_infobar.oneTime(2E3+this.opts.transition_speed,"hideInfoBar_"+self.id,function(){dom.gv_infobar.fadeOut(1E3)})},initImages:function(){var self=this,dom=this.dom;$.each(this.gvImages,function(i,gvImage){var img=$("<img/>");img.css("visibility","hidden").data("index",i);img.bind("load.galleryview",function(){var _img=$(this),index=_img.data("index"),parent=dom[_img.data("parent").type].eq(_img.data("parent").index),parentType=
parent.hasClass("gv_panel")?"panel":"frame",width=this.width,height=this.height;_img.bind("resizegalleryimage",function(){var _img=$(this),widthFactor=gv.innerWidth(parent)/width,heightFactor=gv.innerHeight(parent)/height,heightOffset=0,widthOffset=0;gvImage.scale[parentType]=self.opts[parentType+"_scale"]==="fit"?Math.min(widthFactor,heightFactor):Math.max(widthFactor,heightFactor);if(!self.opts.panel_can_upscale_image&&gvImage.scale[parentType]>1)gvImage.scale[parentType]=1;widthOffset=Math.round((gv.innerWidth(parent)-
width*gvImage.scale[parentType])/2);heightOffset=Math.round((gv.innerHeight(parent)-height*gvImage.scale[parentType])/2);_img.css({width:width*gvImage.scale[parentType],height:height*gvImage.scale[parentType],top:heightOffset,left:widthOffset})});_img.trigger("resizegalleryimage");_img.hide().css("visibility","visible");_img.detach().appendTo(parent);if(parentType==="frame"){_img.fadeIn();parent.parent().removeClass("gv_frame-loading");parent.parent().find(".gv_caption").html(gvImage.attrs.title)}else if(index===
self.opts.start_frame-1){parent.prependTo(dom.gv_panelWrap);parent.removeClass("gv_panel-loading");_img.fadeIn();self.showInfoBar()}else{parent.removeClass("gv_panel-loading");_img.show()}});if(self.opts.show_panels)img.clone(true).data("parent",{type:"gv_panels",index:i}).appendTo(dom.gv_imageStore).attr("src",gvImage.src.panel);if(self.opts.show_filmstrip){img.clone(true).data("parent",{type:"gv_thumbnails",index:i}).appendTo(dom.gv_imageStore).attr("src",gvImage.src.frame);if(dom.gv_frames.length>
dom.gv_panels.length){img.clone(true).data("parent",{type:"gv_thumbnails",index:i+self.numImages}).appendTo(dom.gv_imageStore).attr("src",gvImage.src.frame);img.clone(true).data("parent",{type:"gv_thumbnails",index:i+self.numImages+self.numImages}).appendTo(dom.gv_imageStore).attr("src",gvImage.src.frame)}}})},showNext:function(){this.navAction="next";this.showItem(this.frameIterator+1)},showPrev:function(){this.navAction="prev";this.showItem(this.frameIterator-1)},showItem:function(i){if(isNaN(i))return;
if(!this.opts.show_filmstrip)i=i%this.numImages;var self=this,dom=this.dom,frame_i=i,newPanelStart,oldPanelEnd,oldIterator,panel,playing=false;if(i>=this.numImages)i=i%this.numImages;else if(i<0){i=this.numImages-1;if(dom.gv_frames!=undefined)frame_i=dom.gv_frames.length-1;else frame_i=dom.gv_panels.length-1}if(i==this.iterator)return;panel=dom.gv_panels.eq(i);playing=this.playing;if(playing)this.stopSlideshow(false);this.unbindActions();dom.gv_gallery.oneTime(this.opts.transition_speed,"bindActions_"+
self.id,function(){if(playing)self.startSlideshow(false);self.bindActions()});switch(this.opts.panel_animation){case "crossfade":dom.gv_panels.eq(this.iterator).fadeOut(this.opts.transition_speed,function(){$(this).detach()});panel.hide().prependTo(dom.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case "fade":dom.gv_panels.eq(this.iterator).detach();panel.hide().prependTo(dom.gv_panelWrap).fadeIn(this.opts.transition_speed);break;case "slide":if(this.navAction==="next"||this.navAction===
"frame"&&frame_i>this.iterator){newPanelStart=gv.outerWidth(dom.gv_panel);oldPanelEnd=-1*gv.outerWidth(dom.gv_panel)}else{newPanelStart=-1*gv.outerWidth(dom.gv_panel);oldPanelEnd=gv.outerWidth(dom.gv_panel)}panel.css({left:newPanelStart}).appendTo(dom.gv_panelWrap).animate({left:0},{duration:this.opts.transition_speed,easing:this.opts.easing});dom.gv_panels.eq(this.iterator).animate({left:oldPanelEnd},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){$(this).detach()}});
break;default:dom.gv_panels.eq(this.iterator).detach();panel.prependTo(dom.gv_panelWrap);break}$("img",this.gv_galleryWrap).trigger("resizegalleryimage");this.updateOverlay(i);this.iterator=i;this.updateFilmstrip(frame_i);this.showInfoBar();if(document.getSelection)document.getSelection().removeAllRanges()},updateOverlay:function(i){var self=this,dom=this.dom;if(this.overlayVisible)this.hideOverlay(null,function(){dom.gv_overlay.html("<h4>"+self.gvImages[i].attrs.title+"</h4><p>"+self.gvImages[i].attrs.description+
"</p>");self.showOverlay()});else{dom.gv_overlay.html("<h4>"+self.gvImages[i].attrs.title+"</h4><p>"+self.gvImages[i].attrs.description+"</p>");dom.gv_overlay.css(this.opts.overlay_position,-1*dom.gv_overlay.outerHeight())}},hideOverlay:function(s,callback){var self=this,dom=this.dom,endOverlay={},endButton={},speed=s||self.opts.transition_speed/2;callback=callback||function(){};endOverlay[this.opts.overlay_position]=-1*dom.gv_overlay.outerHeight();endButton[this.opts.overlay_position]=0;dom.gv_overlay.animate(endOverlay,
{duration:speed,easing:"swing",complete:callback});dom.gv_showOverlay.animate(endButton,{duration:speed,easing:"swing"});this.overlayVisible=false},showOverlay:function(s){var self=this,dom=this.dom,startOverlay={},endOverlay={},endButton={},speed=s||self.opts.transition_speed/2;startOverlay[this.opts.overlay_position]=-1*dom.gv_overlay.outerHeight();startOverlay.left=0;endOverlay[this.opts.overlay_position]=0;endButton[this.opts.overlay_position]=dom.gv_overlay.outerHeight();dom.gv_overlay.css(startOverlay);
dom.gv_overlay.animate(endOverlay,{duration:speed,easing:"swing"});dom.gv_showOverlay.animate(endButton,{duration:speed,easing:"swing"});this.overlayVisible=true},updateFilmstrip:function(to){if(!this.opts.show_filmstrip){this.frameIterator=to;return}var self=this,dom=this.dom,targetThumbs=dom.gv_thumbnails.eq(this.iterator),filmstripIterator,distance;if(this.scrolling)targetThumbs=targetThumbs.add(dom.gv_thumbnails.eq(this.iterator+this.numImages)).add(dom.gv_thumbnails.eq(this.iterator+2*this.numImages));
dom.gv_thumbnails.removeClass("current").animate({opacity:this.opts.frame_opacity});targetThumbs.stop().addClass("current").animate({opacity:1},500);if(this.scrolling)if(this.filmstripOrientation==="horizontal"){distance=(gv.outerWidth(dom.gv_frame)+this.opts.frame_gap)*(this.frameIterator-to);if(distance>0)distance="+="+Math.abs(distance);else distance="-="+Math.abs(distance);dom.gv_filmstrip.animate({left:distance},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(to<
self.numImages)dom.gv_filmstrip.css("left",gv.getInt(dom.gv_filmstrip.css("left"))-self.numImages*(gv.outerWidth(dom.gv_frame)+self.opts.frame_gap));else if(to>=self.numImages*2)dom.gv_filmstrip.css("left",gv.getInt(dom.gv_filmstrip.css("left"))+self.numImages*(gv.outerWidth(dom.gv_frame)+self.opts.frame_gap));self.frameIterator=to%self.numImages+self.numImages}})}else{distance=(gv.outerHeight(dom.gv_frame)+this.opts.frame_gap)*(this.frameIterator-to);if(distance>0)distance="+="+Math.abs(distance);
else distance="-="+Math.abs(distance);dom.gv_filmstrip.animate({top:distance},{duration:this.opts.transition_speed,easing:this.opts.easing,complete:function(){if(to===0){dom.gv_filmstrip.css("top",gv.getInt(dom.gv_filmstrip.css("top"))-self.numImages*(gv.outerHeight(dom.gv_frame)+self.opts.frame_gap));self.frameIterator=self.numImages}else if(to>self.numImages*3-self.filmstripSize*2){dom.gv_filmstrip.css("top",gv.getInt(dom.gv_filmstrip.css("top"))+self.numImages*(gv.outerHeight(dom.gv_frame)+self.opts.frame_gap));
self.frameIterator=to-self.numImages}else self.frameIterator=to}})}else this.frameIterator=to},startSlideshow:function(changeIcon){var self=this,dom=this.dom;if(!self.opts.enable_slideshow)return;if(changeIcon)dom.gv_navPlay.removeClass("gv_navPlay").addClass("gv_navPause");this.playing=true;dom.gv_galleryWrap.everyTime(this.opts.transition_interval,"slideshow_"+this.id,function(){self.showNext()})},stopSlideshow:function(changeIcon){var self=this,dom=this.dom;if(changeIcon)dom.gv_navPlay.removeClass("gv_navPause").addClass("gv_navPlay");
this.playing=false;dom.gv_galleryWrap.stopTime("slideshow_"+this.id)},enablePanning:function(){var self=this,dom=this.dom;if(!self.opts.enable_slideshow)return;dom.gv_panel.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize");if(this.opts.pan_style==="drag")dom.gv_panelWrap.delegate(".gv_panel img","mousedown.galleryview",function(e){self.isMouseDown=true;$(this).css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize")}).delegate(".gv_panel img",
"mouseup.galleryview",function(e){self.isMouseDown=false;$(this).css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize")}).delegate(".gv_panel img","mousemove.galleryview",function(e){var distY,distX,image=$(this),new_top,new_left;if(self.isMouseDown){distY=e.pageY-self.mouse.y;distX=e.pageX-self.mouse.x;new_top=gv.getInt(image.css("top"))+distY;new_left=gv.getInt(image.css("left"))+distX;image.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), n-resize");
if(new_top>0)new_top=0;if(new_left>0)new_left=0;if(new_top<-1*(gv.outerHeight(image)-gv.innerHeight(dom.gv_panel)))new_top=-1*(gv.outerHeight(image)-gv.innerHeight(dom.gv_panel));if(new_left<-1*(gv.outerWidth(image)-gv.innerWidth(dom.gv_panel)))new_left=-1*(gv.outerWidth(image)-gv.innerWidth(dom.gv_panel));image.css("top",new_top);image.css("left",new_left)}else image.css("cursor","url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), n-resize")});else;},bindActions:function(){var self=this,
dom=this.dom;dom.gv_showOverlay.bind("click.galleryview",function(){if(self.overlayVisible)self.hideOverlay(250);else self.showOverlay(250)});dom.gv_navWrap.delegate("div","click.galleryview",function(){var el=$(this);if(el.hasClass("gv_navNext"))self.showNext();else if(el.hasClass("gv_navPrev"))self.showPrev();else if(el.hasClass("gv_navPlay"))self.startSlideshow(true);else if(el.hasClass("gv_navPause"))self.stopSlideshow(true);return false});dom.gv_panelNavNext.bind("click.galleryview",function(){self.showNext();
return false});dom.gv_panelNavPrev.bind("click.galleryview",function(){self.showPrev();return false});dom.gv_filmstripWrap.delegate(".gv_frame","click.galleryview",function(){var el=$(this),i=el.data("frameIndex");this.navAction="frame";self.showItem(i);return false});dom.gv_panelWrap.bind("mouseover.galleryview",function(){self.showPanelNav()}).bind("mouseout.galleryview",function(){self.hidePanelNav()})},unbindActions:function(){var self=this,dom=this.dom;dom.gv_showOverlay.unbind("click.galleryview");
dom.gv_panelNavNext.unbind("click.galleryview");dom.gv_panelNavPrev.unbind("click.galleryview");dom.gv_navWrap.undelegate("div","click.galleryview");dom.gv_filmstripWrap.undelegate(".gv_frame","click.galleryview")},showPanelNav:function(){var self=this,dom=this.dom;dom.gv_panelNavNext.show();dom.gv_panelNavPrev.show()},hidePanelNav:function(){var self=this,dom=this.dom;dom.gv_panelNavNext.hide();dom.gv_panelNavPrev.hide()},init:function(options,el){var self=this,dom=this.dom={};this.opts=$.extend({},
$.fn.galleryView.defaults,options);this.el=el;this.$el=$(el);this.id=el.id;this.iterator=this.frameIterator=this.opts.start_frame-1;this.overlayVisible=this.opts.show_overlays;this.playing=false;this.scrolling=false;this.isMouseDown=false;this.mouse={x:0,y:0};this.filmstripOrientation=this.opts.filmstrip_position==="top"||this.opts.filmstrip_position==="bottom"?"horizontal":"vertical";$(document).bind("mousemove.galleryview",function(e){self.mouse={x:e.pageX,y:e.pageY}});$.each(this.elems,function(i,
elem){var elem=elem.split(".");if(elem[0]==="")elem[0]="div";dom[elem[1]]=self.createElem({"class":elem[1]},elem[0])});dom.gv_imageStore.appendTo($("body"));dom.gv_galleryWrap.delegate("img","mousedown.galleryview",function(e){if(e.preventDefault)e.preventDefault()});dom.gv_panel.addClass("gv_panel-loading");dom.gv_frame.addClass("gv_frame-loading");dom.gv_galleryWrap.hide().append(dom.gv_gallery);if(this.opts.show_panels){dom.gv_gallery.append(dom.gv_panelWrap);if(this.opts.show_panel_nav)dom.gv_panelWrap.append(dom.gv_panelNavNext,
dom.gv_panelNavPrev);if(this.opts.show_infobar)dom.gv_panelWrap.append(dom.gv_infobar)}if(this.opts.show_filmstrip){dom.gv_gallery.append(dom.gv_filmstripWrap.append(dom.gv_filmstrip));if(this.opts.show_filmstrip_nav)dom.gv_gallery.append(dom.gv_navWrap.append(dom.gv_navPrev,this.opts.enable_slideshow?dom.gv_navPlay:$("<span></span>"),dom.gv_navNext))}if(this.opts.enable_overlays)dom.gv_panelWrap.append(dom.gv_overlay,dom.gv_showOverlay);if(this.opts.show_captions)dom.gv_frame.append(dom.gv_caption).appendTo(dom.gv_gallery);
this.$el.replaceWith(dom.gv_galleryWrap);if(this.opts.pan_images)this.enablePanning();this.storeImages();this.buildGallery();this.initImages();this.bindActions();dom.gv_frame.remove();dom.gv_galleryWrap.show();if(this.opts.autoplay)this.startSlideshow(true);this.updateOverlay(this.iterator);this.updateFilmstrip(this.frameIterator)},resizeGallery:function(panel_width,panel_height,frame_width,frame_height){if(panel_width!=undefined)this.opts.panel_width=panel_width;if(panel_height!=undefined)this.opts.panel_height=
panel_height;if(frame_width!=undefined)this.opts.frame_width=frame_width;if(frame_height!=undefined)this.opts.frame_height=frame_height;this.buildGallery(false);$("img",this.gv_galleryWrap).trigger("resizegalleryimage");$("img",this.dom.gv_panels).trigger("resizegalleryimage")}};$.fn.galleryView=function(options){if(this.length)return this.each(function(){var gallery=Object.create(GalleryView);gallery.init(options,this);this.galleryViewForObject=gallery})};$.fn.resizeGalleryView=function(panel_width,
panel_height,frame_width,frame_height){if(this.length)return this.each(function(){if(this.galleryViewForObject)this.galleryViewForObject.resizeGallery(panel_width,panel_height,frame_width,frame_height)})};$.fn.galleryView.defaults={transition_speed:1E3,transition_interval:5E3,easing:"swing",show_panels:true,show_panel_nav:true,enable_overlays:false,show_overlays:false,panel_width:800,panel_height:400,panel_animation:"fade",panel_scale:"crop",overlay_position:"bottom",pan_images:false,pan_style:"drag",
pan_smoothness:15,start_frame:1,show_filmstrip:true,show_filmstrip_nav:true,enable_slideshow:true,autoplay:false,show_captions:false,filmstrip_size:3,filmstrip_style:"scroll",filmstrip_position:"bottom",frame_width:80,frame_height:40,frame_opacity:0.4,frame_scale:"crop",frame_gap:5,show_infobar:true,infobar_opacity:1,panel_can_upscale_image:true}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.flexslider-2.1.js **************************************************************/ 
(function($){$.flexslider=function(el,options){var slider=$(el),vars=$.extend({},$.flexslider.defaults,options),namespace=vars.namespace,touch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,eventType=touch?"touchend":"click",vertical=vars.direction==="vertical",reverse=vars.reverse,carousel=vars.itemWidth>0,fade=vars.animation==="fade",asNav=vars.asNavFor!=="",methods={};$.data(el,"flexslider",slider);methods={init:function(){slider.animating=false;slider.currentSlide=
vars.startAt;slider.animatingTo=slider.currentSlide;slider.atEnd=slider.currentSlide===0||slider.currentSlide===slider.last;slider.containerSelector=vars.selector.substr(0,vars.selector.search(" "));slider.slides=$(vars.selector,slider);slider.container=$(slider.containerSelector,slider);slider.count=slider.slides.length;slider.syncExists=$(vars.sync).length>0;if(vars.animation==="slide")vars.animation="swing";slider.prop=vertical?"top":"marginLeft";slider.args={};slider.manualPause=false;slider.transitions=
!vars.video&&!fade&&vars.useCSS&&function(){var obj=document.createElement("div"),props=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props)if(obj.style[props[i]]!==undefined){slider.pfx=props[i].replace("Perspective","").toLowerCase();slider.prop="-"+slider.pfx+"-transform";return true}return false}();if(vars.controlsContainer!=="")slider.controlsContainer=$(vars.controlsContainer).length>0&&$(vars.controlsContainer);if(vars.manualControls!==
"")slider.manualControls=$(vars.manualControls).length>0&&$(vars.manualControls);if(vars.randomize){slider.slides.sort(function(){return Math.round(Math.random())-0.5});slider.container.empty().append(slider.slides)}slider.doMath();if(asNav)methods.asNav.setup();slider.setup("init");if(vars.controlNav)methods.controlNav.setup();if(vars.directionNav)methods.directionNav.setup();if(vars.keyboard&&($(slider.containerSelector).length===1||vars.multipleKeyboard))$(document).bind("keyup",function(event){var keycode=
event.keyCode;if(!slider.animating&&(keycode===39||keycode===37)){var target=keycode===39?slider.getTarget("next"):keycode===37?slider.getTarget("prev"):false;slider.flexAnimate(target,vars.pauseOnAction)}});if(vars.mousewheel)slider.bind("mousewheel",function(event,delta,deltaX,deltaY){event.preventDefault();var target=delta<0?slider.getTarget("next"):slider.getTarget("prev");slider.flexAnimate(target,vars.pauseOnAction)});if(vars.pausePlay)methods.pausePlay.setup();if(vars.slideshow){if(vars.pauseOnHover)slider.hover(function(){if(!slider.manualPlay&&
!slider.manualPause)slider.pause()},function(){if(!slider.manualPause&&!slider.manualPlay)slider.play()});vars.initDelay>0?setTimeout(slider.play,vars.initDelay):slider.play()}if(touch&&vars.touch)methods.touch();if(!fade||fade&&vars.smoothHeight)$(window).bind("resize focus",methods.resize);setTimeout(function(){vars.start(slider)},200)},asNav:{setup:function(){slider.asNav=true;slider.animatingTo=Math.floor(slider.currentSlide/slider.move);slider.currentItem=slider.currentSlide;slider.slides.removeClass(namespace+
"active-slide").eq(slider.currentItem).addClass(namespace+"active-slide");slider.slides.click(function(e){e.preventDefault();var $slide=$(this),target=$slide.index();if(!$(vars.asNavFor).data("flexslider").animating&&!$slide.hasClass("active")){slider.direction=slider.currentItem<target?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!slider.manualControls)methods.controlNav.setupPaging();else methods.controlNav.setupManual()},setupPaging:function(){var type=
vars.controlNav==="thumbnails"?"control-thumbs":"control-paging",j=1,item;slider.controlNavScaffold=$('<ol class="'+namespace+"control-nav "+namespace+type+'"></ol>');if(slider.pagingCount>1)for(var i=0;i<slider.pagingCount;i++){item=vars.controlNav==="thumbnails"?'<img src="'+slider.slides.eq(i).attr("data-thumb")+'"/>':"<a>"+j+"</a>";slider.controlNavScaffold.append("<li>"+item+"</li>");j++}slider.controlsContainer?$(slider.controlsContainer).append(slider.controlNavScaffold):slider.append(slider.controlNavScaffold);
methods.controlNav.set();methods.controlNav.active();slider.controlNavScaffold.delegate("a, img",eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+"active")){slider.direction=target>slider.currentSlide?"next":"prev";slider.flexAnimate(target,vars.pauseOnAction)}});if(touch)slider.controlNavScaffold.delegate("a","click touchstart",function(event){event.preventDefault()})},setupManual:function(){slider.controlNav=slider.manualControls;
methods.controlNav.active();slider.controlNav.live(eventType,function(event){event.preventDefault();var $this=$(this),target=slider.controlNav.index($this);if(!$this.hasClass(namespace+"active")){target>slider.currentSlide?slider.direction="next":slider.direction="prev";slider.flexAnimate(target,vars.pauseOnAction)}});if(touch)slider.controlNav.live("click touchstart",function(event){event.preventDefault()})},set:function(){var selector=vars.controlNav==="thumbnails"?"img":"a";slider.controlNav=$("."+
namespace+"control-nav li "+selector,slider.controlsContainer?slider.controlsContainer:slider)},active:function(){slider.controlNav.removeClass(namespace+"active").eq(slider.animatingTo).addClass(namespace+"active")},update:function(action,pos){if(slider.pagingCount>1&&action==="add")slider.controlNavScaffold.append($("<li><a>"+slider.count+"</a></li>"));else if(slider.pagingCount===1)slider.controlNavScaffold.find("li").remove();else slider.controlNav.eq(pos).closest("li").remove();methods.controlNav.set();
slider.pagingCount>1&&slider.pagingCount!==slider.controlNav.length?slider.update(pos,action):methods.controlNav.active()}},directionNav:{setup:function(){var directionNavScaffold=$('<ul class="'+namespace+'direction-nav"><li><a class="'+namespace+'prev" href="#">'+vars.prevText+'</a></li><li><a class="'+namespace+'next" href="#">'+vars.nextText+"</a></li></ul>");if(slider.controlsContainer){$(slider.controlsContainer).append(directionNavScaffold);slider.directionNav=$("."+namespace+"direction-nav li a",
slider.controlsContainer)}else{slider.append(directionNavScaffold);slider.directionNav=$("."+namespace+"direction-nav li a",slider)}methods.directionNav.update();slider.directionNav.bind(eventType,function(event){event.preventDefault();var target=$(this).hasClass(namespace+"next")?slider.getTarget("next"):slider.getTarget("prev");slider.flexAnimate(target,vars.pauseOnAction)});if(touch)slider.directionNav.bind("click touchstart",function(event){event.preventDefault()})},update:function(){var disabledClass=
namespace+"disabled";if(slider.pagingCount===1)slider.directionNav.addClass(disabledClass);else if(!vars.animationLoop)if(slider.animatingTo===0)slider.directionNav.removeClass(disabledClass).filter("."+namespace+"prev").addClass(disabledClass);else if(slider.animatingTo===slider.last)slider.directionNav.removeClass(disabledClass).filter("."+namespace+"next").addClass(disabledClass);else slider.directionNav.removeClass(disabledClass);else slider.directionNav.removeClass(disabledClass)}},pausePlay:{setup:function(){var pausePlayScaffold=
$('<div class="'+namespace+'pauseplay"><a></a></div>');if(slider.controlsContainer){slider.controlsContainer.append(pausePlayScaffold);slider.pausePlay=$("."+namespace+"pauseplay a",slider.controlsContainer)}else{slider.append(pausePlayScaffold);slider.pausePlay=$("."+namespace+"pauseplay a",slider)}methods.pausePlay.update(vars.slideshow?namespace+"pause":namespace+"play");slider.pausePlay.bind(eventType,function(event){event.preventDefault();if($(this).hasClass(namespace+"pause")){slider.manualPause=
true;slider.manualPlay=false;slider.pause()}else{slider.manualPause=false;slider.manualPlay=true;slider.play()}});if(touch)slider.pausePlay.bind("click touchstart",function(event){event.preventDefault()})},update:function(state){state==="play"?slider.pausePlay.removeClass(namespace+"pause").addClass(namespace+"play").text(vars.playText):slider.pausePlay.removeClass(namespace+"play").addClass(namespace+"pause").text(vars.pauseText)}},touch:function(){var startX,startY,offset,cwidth,dx,startT,scrolling=
false;el.addEventListener("touchstart",onTouchStart,false);function onTouchStart(e){if(slider.animating)e.preventDefault();else if(e.touches.length===1){slider.pause();cwidth=vertical?slider.h:slider.w;startT=Number(new Date);offset=carousel&&reverse&&slider.animatingTo===slider.last?0:carousel&&reverse?slider.limit-(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo:carousel&&slider.currentSlide===slider.last?slider.limit:carousel?(slider.itemW+vars.itemMargin)*slider.move*slider.currentSlide:
reverse?(slider.last-slider.currentSlide+slider.cloneOffset)*cwidth:(slider.currentSlide+slider.cloneOffset)*cwidth;startX=vertical?e.touches[0].pageY:e.touches[0].pageX;startY=vertical?e.touches[0].pageX:e.touches[0].pageY;el.addEventListener("touchmove",onTouchMove,false);el.addEventListener("touchend",onTouchEnd,false)}}function onTouchMove(e){dx=vertical?startX-e.touches[0].pageY:startX-e.touches[0].pageX;scrolling=vertical?Math.abs(dx)<Math.abs(e.touches[0].pageX-startY):Math.abs(dx)<Math.abs(e.touches[0].pageY-
startY);if(!scrolling||Number(new Date)-startT>500){e.preventDefault();if(!fade&&slider.transitions){if(!vars.animationLoop)dx=dx/(slider.currentSlide===0&&dx<0||slider.currentSlide===slider.last&&dx>0?Math.abs(dx)/cwidth+2:1);slider.setProps(offset+dx,"setTouch")}}}function onTouchEnd(e){el.removeEventListener("touchmove",onTouchMove,false);if(slider.animatingTo===slider.currentSlide&&!scrolling&&!(dx===null)){var updateDx=reverse?-dx:dx,target=updateDx>0?slider.getTarget("next"):slider.getTarget("prev");
if(slider.canAdvance(target)&&(Number(new Date)-startT<550&&Math.abs(updateDx)>50||Math.abs(updateDx)>cwidth/2))slider.flexAnimate(target,vars.pauseOnAction);else if(!fade)slider.flexAnimate(slider.currentSlide,vars.pauseOnAction,true)}el.removeEventListener("touchend",onTouchEnd,false);startX=null;startY=null;dx=null;offset=null}},resize:function(){if(!slider.animating&&slider.is(":visible")){if(!carousel)slider.doMath();if(fade)methods.smoothHeight();else if(carousel){slider.slides.width(slider.computedW);
slider.update(slider.pagingCount);slider.setProps()}else if(vertical){slider.viewport.height(slider.h);slider.setProps(slider.h,"setTotal")}else{if(vars.smoothHeight)methods.smoothHeight();slider.newSlides.width(slider.computedW);slider.setProps(slider.computedW,"setTotal")}}},smoothHeight:function(dur){if(!vertical||fade){var $obj=fade?slider:slider.viewport;dur?$obj.animate({"height":slider.slides.eq(slider.animatingTo).height()},dur):$obj.height(slider.slides.eq(slider.animatingTo).height())}},
sync:function(action){var $obj=$(vars.sync).data("flexslider"),target=slider.animatingTo;switch(action){case "animate":$obj.flexAnimate(target,vars.pauseOnAction,false,true);break;case "play":if(!$obj.playing&&!$obj.asNav)$obj.play();break;case "pause":$obj.pause();break}}};slider.flexAnimate=function(target,pause,override,withSync,fromNav){if(asNav&&slider.pagingCount===1)slider.direction=slider.currentItem<target?"next":"prev";if(!slider.animating&&(slider.canAdvance(target,fromNav)||override)&&
slider.is(":visible")){if(asNav&&withSync){var master=$(vars.asNavFor).data("flexslider");slider.atEnd=target===0||target===slider.count-1;master.flexAnimate(target,true,false,true,fromNav);slider.direction=slider.currentItem<target?"next":"prev";master.direction=slider.direction;if(Math.ceil((target+1)/slider.visible)-1!==slider.currentSlide&&target!==0){slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");target=Math.floor(target/
slider.visible)}else{slider.currentItem=target;slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");return false}}slider.animating=true;slider.animatingTo=target;vars.before(slider);if(pause)slider.pause();if(slider.syncExists&&!fromNav)methods.sync("animate");if(vars.controlNav)methods.controlNav.active();if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(target).addClass(namespace+"active-slide");slider.atEnd=target===0||target===slider.last;
if(vars.directionNav)methods.directionNav.update();if(target===slider.last){vars.end(slider);if(!vars.animationLoop)slider.pause()}if(!fade){var dimension=vertical?slider.slides.filter(":first").height():slider.computedW,margin,slideString,calcNext;if(carousel){margin=vars.itemWidth>slider.w?vars.itemMargin*2:vars.itemMargin;calcNext=(slider.itemW+margin)*slider.move*slider.animatingTo;slideString=calcNext>slider.limit&&slider.visible!==1?slider.limit:calcNext}else if(slider.currentSlide===0&&target===
slider.count-1&&vars.animationLoop&&slider.direction!=="next")slideString=reverse?(slider.count+slider.cloneOffset)*dimension:0;else if(slider.currentSlide===slider.last&&target===0&&vars.animationLoop&&slider.direction!=="prev")slideString=reverse?0:(slider.count+1)*dimension;else slideString=reverse?(slider.count-1-target+slider.cloneOffset)*dimension:(target+slider.cloneOffset)*dimension;slider.setProps(slideString,"",vars.animationSpeed);if(slider.transitions){if(!vars.animationLoop||!slider.atEnd){slider.animating=
false;slider.currentSlide=slider.animatingTo}slider.container.unbind("webkitTransitionEnd transitionend");slider.container.bind("webkitTransitionEnd transitionend",function(){slider.wrapup(dimension)})}else slider.container.animate(slider.args,vars.animationSpeed,vars.easing,function(){slider.wrapup(dimension)})}else if(!touch){slider.slides.eq(slider.currentSlide).fadeOut(vars.animationSpeed,vars.easing);slider.slides.eq(target).fadeIn(vars.animationSpeed,vars.easing,slider.wrapup)}else{slider.slides.eq(slider.currentSlide).css({"opacity":0,
"zIndex":1});slider.slides.eq(target).css({"opacity":1,"zIndex":2});slider.slides.unbind("webkitTransitionEnd transitionend");slider.slides.eq(slider.currentSlide).bind("webkitTransitionEnd transitionend",function(){vars.after(slider)});slider.animating=false;slider.currentSlide=slider.animatingTo}if(vars.smoothHeight)methods.smoothHeight(vars.animationSpeed)}};slider.wrapup=function(dimension){if(!fade&&!carousel)if(slider.currentSlide===0&&slider.animatingTo===slider.last&&vars.animationLoop)slider.setProps(dimension,
"jumpEnd");else if(slider.currentSlide===slider.last&&slider.animatingTo===0&&vars.animationLoop)slider.setProps(dimension,"jumpStart");slider.animating=false;slider.currentSlide=slider.animatingTo;vars.after(slider)};slider.animateSlides=function(){if(!slider.animating)slider.flexAnimate(slider.getTarget("next"))};slider.pause=function(){clearInterval(slider.animatedSlides);slider.playing=false;if(vars.pausePlay)methods.pausePlay.update("play");if(slider.syncExists)methods.sync("pause")};slider.play=
function(){slider.animatedSlides=setInterval(slider.animateSlides,vars.slideshowSpeed);slider.playing=true;if(vars.pausePlay)methods.pausePlay.update("pause");if(slider.syncExists)methods.sync("play")};slider.canAdvance=function(target,fromNav){var last=asNav?slider.pagingCount-1:slider.last;return fromNav?true:asNav&&slider.currentItem===slider.count-1&&target===0&&slider.direction==="prev"?true:asNav&&slider.currentItem===0&&target===slider.pagingCount-1&&slider.direction!=="next"?false:target===
slider.currentSlide&&!asNav?false:vars.animationLoop?true:slider.atEnd&&slider.currentSlide===0&&target===last&&slider.direction!=="next"?false:slider.atEnd&&slider.currentSlide===last&&target===0&&slider.direction==="next"?false:true};slider.getTarget=function(dir){slider.direction=dir;if(dir==="next")return slider.currentSlide===slider.last?0:slider.currentSlide+1;else return slider.currentSlide===0?slider.last:slider.currentSlide-1};slider.setProps=function(pos,special,dur){var target=function(){var posCheck=
pos?pos:(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo,posCalc=function(){if(carousel)return special==="setTouch"?pos:reverse&&slider.animatingTo===slider.last?0:reverse?slider.limit-(slider.itemW+vars.itemMargin)*slider.move*slider.animatingTo:slider.animatingTo===slider.last?slider.limit:posCheck;else switch(special){case "setTotal":return reverse?(slider.count-1-slider.currentSlide+slider.cloneOffset)*pos:(slider.currentSlide+slider.cloneOffset)*pos;case "setTouch":return reverse?
pos:pos;case "jumpEnd":return reverse?pos:slider.count*pos;case "jumpStart":return reverse?slider.count*pos:pos;default:return pos}}();return posCalc*-1+"px"}();if(slider.transitions){target=vertical?"translate3d(0,"+target+",0)":"translate3d("+target+",0,0)";dur=dur!==undefined?dur/1E3+"s":"0s";slider.container.css("-"+slider.pfx+"-transition-duration",dur)}slider.args[slider.prop]=target;if(slider.transitions||dur===undefined)slider.container.css(slider.args)};slider.setup=function(type){if(!fade){var sliderOffset,
arr;if(type==="init"){slider.viewport=$('<div class="'+namespace+'viewport"></div>').css({"overflow":"hidden","position":"relative"}).appendTo(slider).append(slider.container);slider.cloneCount=0;slider.cloneOffset=0;if(reverse){arr=$.makeArray(slider.slides).reverse();slider.slides=$(arr);slider.container.empty().append(slider.slides)}}if(vars.animationLoop&&!carousel){slider.cloneCount=2;slider.cloneOffset=1;if(type!=="init")slider.container.find(".clone").remove();slider.container.append(slider.slides.first().clone().addClass("clone")).prepend(slider.slides.last().clone().addClass("clone"))}slider.newSlides=
$(vars.selector,slider);sliderOffset=reverse?slider.count-1-slider.currentSlide+slider.cloneOffset:slider.currentSlide+slider.cloneOffset;if(vertical&&!carousel){slider.container.height((slider.count+slider.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){slider.newSlides.css({"display":"block"});slider.doMath();slider.viewport.height(slider.h);slider.setProps(sliderOffset*slider.h,"init")},type==="init"?100:0)}else{slider.container.width((slider.count+slider.cloneCount)*
200+"%");slider.setProps(sliderOffset*slider.computedW,"init");setTimeout(function(){slider.doMath();slider.newSlides.css({"width":slider.computedW,"float":"left","display":"block"});if(vars.smoothHeight)methods.smoothHeight()},type==="init"?100:0)}}else{slider.slides.css({"width":"100%","float":"left","marginRight":"-100%","position":"relative"});if(type==="init")if(!touch)slider.slides.eq(slider.currentSlide).fadeIn(vars.animationSpeed,vars.easing);else slider.slides.css({"opacity":0,"display":"block",
"webkitTransition":"opacity "+vars.animationSpeed/1E3+"s ease","zIndex":1}).eq(slider.currentSlide).css({"opacity":1,"zIndex":2});if(vars.smoothHeight)methods.smoothHeight()}if(!carousel)slider.slides.removeClass(namespace+"active-slide").eq(slider.currentSlide).addClass(namespace+"active-slide")};slider.doMath=function(){var slide=slider.slides.first(),slideMargin=vars.itemMargin,minItems=vars.minItems,maxItems=vars.maxItems;slider.w=slider.width();slider.h=slide.height();slider.boxPadding=slide.outerWidth()-
slide.width();if(carousel){slider.itemT=vars.itemWidth+slideMargin;slider.minW=minItems?minItems*slider.itemT:slider.w;slider.maxW=maxItems?maxItems*slider.itemT:slider.w;slider.itemW=slider.minW>slider.w?(slider.w-slideMargin*minItems)/minItems:slider.maxW<slider.w?(slider.w-slideMargin*maxItems)/maxItems:vars.itemWidth>slider.w?slider.w:vars.itemWidth;slider.visible=Math.floor(slider.w/(slider.itemW+slideMargin));slider.move=vars.move>0&&vars.move<slider.visible?vars.move:slider.visible;slider.pagingCount=
Math.ceil((slider.count-slider.visible)/slider.move+1);slider.last=slider.pagingCount-1;slider.limit=slider.pagingCount===1?0:vars.itemWidth>slider.w?(slider.itemW+slideMargin*2)*slider.count-slider.w-slideMargin:(slider.itemW+slideMargin)*slider.count-slider.w-slideMargin}else{slider.itemW=slider.w;slider.pagingCount=slider.count;slider.last=slider.count-1}slider.computedW=slider.itemW-slider.boxPadding};slider.update=function(pos,action){slider.doMath();if(!carousel){if(pos<slider.currentSlide)slider.currentSlide+=
1;else if(pos<=slider.currentSlide&&pos!==0)slider.currentSlide-=1;slider.animatingTo=slider.currentSlide}if(vars.controlNav&&!slider.manualControls)if(action==="add"&&!carousel||slider.pagingCount>slider.controlNav.length)methods.controlNav.update("add");else if(action==="remove"&&!carousel||slider.pagingCount<slider.controlNav.length){if(carousel&&slider.currentSlide>slider.last){slider.currentSlide-=1;slider.animatingTo-=1}methods.controlNav.update("remove",slider.last)}if(vars.directionNav)methods.directionNav.update()};
slider.addSlide=function(obj,pos){var $obj=$(obj);slider.count+=1;slider.last=slider.count-1;if(vertical&&reverse)pos!==undefined?slider.slides.eq(slider.count-pos).after($obj):slider.container.prepend($obj);else pos!==undefined?slider.slides.eq(pos).before($obj):slider.container.append($obj);slider.update(pos,"add");slider.slides=$(vars.selector+":not(.clone)",slider);slider.setup();vars.added(slider)};slider.removeSlide=function(obj){var pos=isNaN(obj)?slider.slides.index($(obj)):obj;slider.count-=
1;slider.last=slider.count-1;if(isNaN(obj))$(obj,slider.slides).remove();else vertical&&reverse?slider.slides.eq(slider.last).remove():slider.slides.eq(obj).remove();slider.doMath();slider.update(pos,"remove");slider.slides=$(vars.selector+":not(.clone)",slider);slider.setup();vars.removed(slider)};methods.init()};$.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,
slideshowSpeed:7E3,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},
added:function(){},removed:function(){}};$.fn.flexslider=function(options){if(options===undefined)options={};if(typeof options==="object")return this.each(function(){var $this=$(this),selector=options.selector?options.selector:".slides > li",$slides=$this.find(selector);if($slides.length===1){$slides.fadeIn(400);if(options.start)options.start($this)}else if($this.data("flexslider")==undefined)new $.flexslider(this,options)});else{var $slider=$(this).data("flexslider");switch(options){case "play":$slider.play();
break;case "pause":$slider.pause();break;case "next":$slider.flexAnimate($slider.getTarget("next"),true);break;case "prev":case "previous":$slider.flexAnimate($slider.getTarget("prev"),true);break;default:if(typeof options==="number")$slider.flexAnimate(options,true)}}}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.bxslider-4.1.1.js **************************************************************/ 
(function($){var plugin={};var defaults={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",responsive:true,touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",
pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4E3,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};
$.fn.bxSlider=function(options){if(this.length==0)return this;if(this.length>1){this.each(function(){$(this).bxSlider(options)});return this}var slider={};var el=this;plugin.el=this;var windowWidth=$(window).width();var windowHeight=$(window).height();var init=function(){slider.settings=$.extend({},defaults,options);slider.settings.slideWidth=parseInt(slider.settings.slideWidth);slider.children=el.children(slider.settings.slideSelector);if(slider.children.length<slider.settings.minSlides)slider.settings.minSlides=
slider.children.length;if(slider.children.length<slider.settings.maxSlides)slider.settings.maxSlides=slider.children.length;if(slider.settings.randomStart)slider.settings.startSlide=Math.floor(Math.random()*slider.children.length);slider.active={index:slider.settings.startSlide};slider.carousel=slider.settings.minSlides>1||slider.settings.maxSlides>1;if(slider.carousel)slider.settings.preloadImages="all";slider.minThreshold=slider.settings.minSlides*slider.settings.slideWidth+(slider.settings.minSlides-
1)*slider.settings.slideMargin;slider.maxThreshold=slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin;slider.working=false;slider.controls={};slider.interval=null;slider.animProp=slider.settings.mode=="vertical"?"top":"left";slider.usingCSS=slider.settings.useCSS&&slider.settings.mode!="fade"&&function(){var div=document.createElement("div");var props=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in props)if(div.style[props[i]]!==
undefined){slider.cssPrefix=props[i].replace("Perspective","").toLowerCase();slider.animProp="-"+slider.cssPrefix+"-transform";return true}return false}();if(slider.settings.mode=="vertical")slider.settings.maxSlides=slider.settings.minSlides;el.data("origStyle",el.attr("style"));el.children(slider.settings.slideSelector).each(function(){$(this).data("origStyle",$(this).attr("style"))});setup()};var setup=function(){el.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');slider.viewport=
el.parent();slider.loader=$('<div class="bx-loading" />');slider.viewport.prepend(slider.loader);el.css({width:slider.settings.mode=="horizontal"?slider.children.length*100+215+"%":"auto",position:"relative"});if(slider.usingCSS&&slider.settings.easing)el.css("-"+slider.cssPrefix+"-transition-timing-function",slider.settings.easing);else if(!slider.settings.easing)slider.settings.easing="swing";var slidesShowing=getNumberSlidesShowing();slider.viewport.css({width:"100%",overflow:"hidden",position:"relative"});
slider.viewport.parent().css({maxWidth:getViewportMaxWidth()});if(!slider.settings.pager)slider.viewport.parent().css({margin:"0 auto 0px"});slider.children.css({"float":slider.settings.mode=="horizontal"?"left":"none",listStyle:"none",position:"relative"});slider.children.css("width",getSlideWidth());if(slider.settings.mode=="horizontal"&&slider.settings.slideMargin>0)slider.children.css("marginRight",slider.settings.slideMargin);if(slider.settings.mode=="vertical"&&slider.settings.slideMargin>0)slider.children.css("marginBottom",
slider.settings.slideMargin);if(slider.settings.mode=="fade"){slider.children.css({position:"absolute",zIndex:0,display:"none"});slider.children.eq(slider.settings.startSlide).css({zIndex:50,display:"block"})}slider.controls.el=$('<div class="bx-controls" />');if(slider.settings.captions)appendCaptions();slider.active.last=slider.settings.startSlide==getPagerQty()-1;if(slider.settings.video)el.fitVids();var preloadSelector=slider.children.eq(slider.settings.startSlide);if(slider.settings.preloadImages==
"all")preloadSelector=slider.children;if(!slider.settings.ticker){if(slider.settings.pager)appendPager();if(slider.settings.controls)appendControls();if(slider.settings.auto&&slider.settings.autoControls)appendControlsAuto();if(slider.settings.controls||slider.settings.autoControls||slider.settings.pager)slider.viewport.after(slider.controls.el)}else slider.settings.pager=false;loadElements(preloadSelector,start)};var loadElements=function(selector,callback){var total=selector.find("img, iframe").length;
if(total==0){callback();return}var count=0;selector.find("img, iframe").each(function(){$(this).one("load",function(){if(++count==total)callback()}).each(function(){if(this.complete)$(this).load()})})};var start=function(){if(slider.settings.infiniteLoop&&slider.settings.mode!="fade"&&!slider.settings.ticker){var slice=slider.settings.mode=="vertical"?slider.settings.minSlides:slider.settings.maxSlides;var sliceAppend=slider.children.slice(0,slice).clone().addClass("bx-clone");var slicePrepend=slider.children.slice(-slice).clone().addClass("bx-clone");
el.append(sliceAppend).prepend(slicePrepend)}slider.loader.remove();setSlidePosition();if(slider.settings.mode=="vertical")slider.settings.adaptiveHeight=true;slider.viewport.height(getViewportHeight());el.redrawSlider();slider.settings.onSliderLoad(slider.active.index);slider.initialized=true;if(slider.settings.responsive)$(window).bind("resize",resizeWindow);if(slider.settings.auto&&slider.settings.autoStart)initAuto();if(slider.settings.ticker)initTicker();if(slider.settings.pager)updatePagerActive(slider.settings.startSlide);
if(slider.settings.controls)updateDirectionControls();if(slider.settings.touchEnabled&&!slider.settings.ticker)initTouch()};var getViewportHeight=function(){var height=0;var children=$();if(slider.settings.mode!="vertical"&&!slider.settings.adaptiveHeight)children=slider.children;else if(!slider.carousel)children=slider.children.eq(slider.active.index);else{var currentIndex=slider.settings.moveSlides==1?slider.active.index:slider.active.index*getMoveBy();children=slider.children.eq(currentIndex);
for(i=1;i<=slider.settings.maxSlides-1;i++)if(currentIndex+i>=slider.children.length)children=children.add(slider.children.eq(i-1));else children=children.add(slider.children.eq(currentIndex+i))}if(slider.settings.mode=="vertical"){children.each(function(index){height+=$(this).outerHeight()});if(slider.settings.slideMargin>0)height+=slider.settings.slideMargin*(slider.settings.minSlides-1)}else height=Math.max.apply(Math,children.map(function(){return $(this).outerHeight(false)}).get());return height};
var getViewportMaxWidth=function(){var width="100%";if(slider.settings.slideWidth>0)if(slider.settings.mode=="horizontal")width=slider.settings.maxSlides*slider.settings.slideWidth+(slider.settings.maxSlides-1)*slider.settings.slideMargin;else width=slider.settings.slideWidth;return width};var getSlideWidth=function(){var newElWidth=slider.settings.slideWidth;var wrapWidth=slider.viewport.width();if(slider.settings.slideWidth==0||slider.settings.slideWidth>wrapWidth&&!slider.carousel||slider.settings.mode==
"vertical")newElWidth=wrapWidth;else if(slider.settings.maxSlides>1&&slider.settings.mode=="horizontal")if(wrapWidth>slider.maxThreshold);else if(wrapWidth<slider.minThreshold)newElWidth=(wrapWidth-slider.settings.slideMargin*(slider.settings.minSlides-1))/slider.settings.minSlides;return newElWidth};var getNumberSlidesShowing=function(){var slidesShowing=1;if(slider.settings.mode=="horizontal"&&slider.settings.slideWidth>0)if(slider.viewport.width()<slider.minThreshold)slidesShowing=slider.settings.minSlides;
else if(slider.viewport.width()>slider.maxThreshold)slidesShowing=slider.settings.maxSlides;else{var childWidth=slider.children.first().width();slidesShowing=Math.floor(slider.viewport.width()/childWidth)}else if(slider.settings.mode=="vertical")slidesShowing=slider.settings.minSlides;return slidesShowing};var getPagerQty=function(){var pagerQty=0;if(slider.settings.moveSlides>0)if(slider.settings.infiniteLoop)pagerQty=slider.children.length/getMoveBy();else{var breakPoint=0;var counter=0;while(breakPoint<
slider.children.length){++pagerQty;breakPoint=counter+getNumberSlidesShowing();counter+=slider.settings.moveSlides<=getNumberSlidesShowing()?slider.settings.moveSlides:getNumberSlidesShowing()}}else pagerQty=Math.ceil(slider.children.length/getNumberSlidesShowing());return pagerQty};var getMoveBy=function(){if(slider.settings.moveSlides>0&&slider.settings.moveSlides<=getNumberSlidesShowing())return slider.settings.moveSlides;return getNumberSlidesShowing()};var setSlidePosition=function(){if(slider.children.length>
slider.settings.maxSlides&&slider.active.last&&!slider.settings.infiniteLoop)if(slider.settings.mode=="horizontal"){var lastChild=slider.children.last();var position=lastChild.position();setPositionProperty(-(position.left-(slider.viewport.width()-lastChild.width())),"reset",0)}else{if(slider.settings.mode=="vertical"){var lastShowingIndex=slider.children.length-slider.settings.minSlides;var position=slider.children.eq(lastShowingIndex).position();setPositionProperty(-position.top,"reset",0)}}else{var position=
slider.children.eq(slider.active.index*getMoveBy()).position();if(slider.active.index==getPagerQty()-1)slider.active.last=true;if(position!=undefined)if(slider.settings.mode=="horizontal")setPositionProperty(-position.left,"reset",0);else if(slider.settings.mode=="vertical")setPositionProperty(-position.top,"reset",0)}};var setPositionProperty=function(value,type,duration,params){if(slider.usingCSS){var propValue=slider.settings.mode=="vertical"?"translate3d(0, "+value+"px, 0)":"translate3d("+value+
"px, 0, 0)";el.css("-"+slider.cssPrefix+"-transition-duration",duration/1E3+"s");if(type=="slide"){el.css(slider.animProp,propValue);el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");updateAfterSlideTransition()})}else if(type=="reset")el.css(slider.animProp,propValue);else if(type=="ticker"){el.css("-"+slider.cssPrefix+"-transition-timing-function","linear");el.css(slider.animProp,propValue);
el.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){el.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");setPositionProperty(params["resetValue"],"reset",0);tickerLoop()})}}else{var animateObj={};animateObj[slider.animProp]=value;if(type=="slide")el.animate(animateObj,duration,slider.settings.easing,function(){updateAfterSlideTransition()});else if(type=="reset")el.css(slider.animProp,value);else if(type=="ticker")el.animate(animateObj,speed,
"linear",function(){setPositionProperty(params["resetValue"],"reset",0);tickerLoop()})}};var populatePager=function(){var pagerHtml="";var pagerQty=getPagerQty();for(var i=0;i<pagerQty;i++){var linkContent="";if(slider.settings.buildPager&&$.isFunction(slider.settings.buildPager)){linkContent=slider.settings.buildPager(i);slider.pagerEl.addClass("bx-custom-pager")}else{linkContent=i+1;slider.pagerEl.addClass("bx-default-pager")}pagerHtml+='<div class="bx-pager-item"><a href="" data-slide-index="'+
i+'" class="bx-pager-link">'+linkContent+"</a></div>"}slider.pagerEl.html(pagerHtml)};var appendPager=function(){if(!slider.settings.pagerCustom){slider.pagerEl=$('<div class="bx-pager" />');if(slider.settings.pagerSelector)$(slider.settings.pagerSelector).html(slider.pagerEl);else slider.controls.el.addClass("bx-has-pager").append(slider.pagerEl);populatePager()}else slider.pagerEl=$(slider.settings.pagerCustom);slider.pagerEl.delegate("a","click",clickPagerBind)};var appendControls=function(){slider.controls.next=
$('<a class="bx-next" href="">'+slider.settings.nextText+"</a>");slider.controls.prev=$('<a class="bx-prev" href="">'+slider.settings.prevText+"</a>");slider.controls.next.bind("click",clickNextBind);slider.controls.prev.bind("click",clickPrevBind);if(slider.settings.nextSelector)$(slider.settings.nextSelector).append(slider.controls.next);if(slider.settings.prevSelector)$(slider.settings.prevSelector).append(slider.controls.prev);if(!slider.settings.nextSelector&&!slider.settings.prevSelector){slider.controls.directionEl=
$('<div class="bx-controls-direction" />');slider.controls.directionEl.append(slider.controls.prev).append(slider.controls.next);slider.controls.el.addClass("bx-has-controls-direction").append(slider.controls.directionEl)}};var appendControlsAuto=function(){slider.controls.start=$('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+slider.settings.startText+"</a></div>");slider.controls.stop=$('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+slider.settings.stopText+
"</a></div>");slider.controls.autoEl=$('<div class="bx-controls-auto" />');slider.controls.autoEl.delegate(".bx-start","click",clickStartBind);slider.controls.autoEl.delegate(".bx-stop","click",clickStopBind);if(slider.settings.autoControlsCombine)slider.controls.autoEl.append(slider.controls.start);else slider.controls.autoEl.append(slider.controls.start).append(slider.controls.stop);if(slider.settings.autoControlsSelector)$(slider.settings.autoControlsSelector).html(slider.controls.autoEl);else slider.controls.el.addClass("bx-has-controls-auto").append(slider.controls.autoEl);
updateAutoControls(slider.settings.autoStart?"stop":"start")};var appendCaptions=function(){slider.children.each(function(index){var title=$(this).find("img:first").attr("title");if(title!=undefined&&(""+title).length)$(this).append('<div class="bx-caption"><span>'+title+"</span></div>")})};var clickNextBind=function(e){el.goToNextSlide();e.preventDefault()};var clickPrevBind=function(e){if(slider.settings.auto)el.stopAuto();el.goToPrevSlide();e.preventDefault()};var clickStartBind=function(e){el.startAuto();
e.preventDefault()};var clickStopBind=function(e){el.stopAuto();e.preventDefault()};var clickPagerBind=function(e){if(slider.settings.auto)el.stopAuto();var pagerLink=$(e.currentTarget);var pagerIndex=parseInt(pagerLink.attr("data-slide-index"));if(pagerIndex!=slider.active.index)el.goToSlide(pagerIndex);e.preventDefault()};var updatePagerActive=function(slideIndex){var len=slider.children.length;if(slider.settings.pagerType=="short"){if(slider.settings.maxSlides>1)len=Math.ceil(slider.children.length/
slider.settings.maxSlides);slider.pagerEl.html(slideIndex+1+slider.settings.pagerShortSeparator+len);return}slider.pagerEl.find("a").removeClass("active");slider.pagerEl.each(function(i,el){$(el).find("a").eq(slideIndex).addClass("active")})};var updateAfterSlideTransition=function(){if(slider.settings.infiniteLoop){var position="";if(slider.active.index==0)position=slider.children.eq(0).position();else if(slider.active.index==getPagerQty()-1&&slider.carousel)position=slider.children.eq((getPagerQty()-
1)*getMoveBy()).position();else if(slider.active.index==slider.children.length-1)position=slider.children.eq(slider.children.length-1).position();if(slider.settings.mode=="horizontal")setPositionProperty(-position.left,"reset",0);else if(slider.settings.mode=="vertical")setPositionProperty(-position.top,"reset",0)}slider.working=false;slider.settings.onSlideAfter(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index)};var updateAutoControls=function(state){if(slider.settings.autoControlsCombine)slider.controls.autoEl.html(slider.controls[state]);
else{slider.controls.autoEl.find("a").removeClass("active");slider.controls.autoEl.find("a:not(.bx-"+state+")").addClass("active")}};var updateDirectionControls=function(){if(getPagerQty()==1){slider.controls.prev.addClass("disabled");slider.controls.next.addClass("disabled")}else if(!slider.settings.infiniteLoop&&slider.settings.hideControlOnEnd)if(slider.active.index==0){slider.controls.prev.addClass("disabled");slider.controls.next.removeClass("disabled")}else if(slider.active.index==getPagerQty()-
1){slider.controls.next.addClass("disabled");slider.controls.prev.removeClass("disabled")}else{slider.controls.prev.removeClass("disabled");slider.controls.next.removeClass("disabled")}};var initAuto=function(){if(slider.settings.autoDelay>0)var timeout=setTimeout(el.startAuto,slider.settings.autoDelay);else el.startAuto();if(slider.settings.autoHover)el.hover(function(){if(slider.interval){el.stopAuto(true);slider.autoPaused=true}},function(){if(slider.autoPaused){el.startAuto(true);slider.autoPaused=
null}})};var initTicker=function(){var startPosition=0;if(slider.settings.autoDirection=="next")el.append(slider.children.clone().addClass("bx-clone"));else{el.prepend(slider.children.clone().addClass("bx-clone"));var position=slider.children.first().position();startPosition=slider.settings.mode=="horizontal"?-position.left:-position.top}setPositionProperty(startPosition,"reset",0);slider.settings.pager=false;slider.settings.controls=false;slider.settings.autoControls=false;if(slider.settings.tickerHover&&
!slider.usingCSS)slider.viewport.hover(function(){el.stop()},function(){var totalDimens=0;slider.children.each(function(index){totalDimens+=slider.settings.mode=="horizontal"?$(this).outerWidth(true):$(this).outerHeight(true)});var ratio=slider.settings.speed/totalDimens;var property=slider.settings.mode=="horizontal"?"left":"top";var newSpeed=ratio*(totalDimens-Math.abs(parseInt(el.css(property))));tickerLoop(newSpeed)});tickerLoop()};var tickerLoop=function(resumeSpeed){speed=resumeSpeed?resumeSpeed:
slider.settings.speed;var position={left:0,top:0};var reset={left:0,top:0};if(slider.settings.autoDirection=="next")position=el.find(".bx-clone").first().position();else reset=slider.children.first().position();var animateProperty=slider.settings.mode=="horizontal"?-position.left:-position.top;var resetValue=slider.settings.mode=="horizontal"?-reset.left:-reset.top;var params={resetValue:resetValue};setPositionProperty(animateProperty,"ticker",speed,params)};var initTouch=function(){slider.touch=
{start:{x:0,y:0},end:{x:0,y:0}};slider.viewport.bind("touchstart",onTouchStart)};var onTouchStart=function(e){if(slider.working)e.preventDefault();else{slider.touch.originalPos=el.position();var orig=e.originalEvent;slider.touch.start.x=orig.changedTouches[0].pageX;slider.touch.start.y=orig.changedTouches[0].pageY;slider.viewport.bind("touchmove",onTouchMove);slider.viewport.bind("touchend",onTouchEnd)}};var onTouchMove=function(e){var orig=e.originalEvent;var xMovement=Math.abs(orig.changedTouches[0].pageX-
slider.touch.start.x);var yMovement=Math.abs(orig.changedTouches[0].pageY-slider.touch.start.y);if(xMovement*3>yMovement&&slider.settings.preventDefaultSwipeX)e.preventDefault();else if(yMovement*3>xMovement&&slider.settings.preventDefaultSwipeY)e.preventDefault();if(slider.settings.mode!="fade"&&slider.settings.oneToOneTouch){var value=0;if(slider.settings.mode=="horizontal"){var change=orig.changedTouches[0].pageX-slider.touch.start.x;value=slider.touch.originalPos.left+change}else{var change=orig.changedTouches[0].pageY-
slider.touch.start.y;value=slider.touch.originalPos.top+change}setPositionProperty(value,"reset",0)}};var onTouchEnd=function(e){slider.viewport.unbind("touchmove",onTouchMove);var orig=e.originalEvent;var value=0;slider.touch.end.x=orig.changedTouches[0].pageX;slider.touch.end.y=orig.changedTouches[0].pageY;if(slider.settings.mode=="fade"){var distance=Math.abs(slider.touch.start.x-slider.touch.end.x);if(distance>=slider.settings.swipeThreshold){slider.touch.start.x>slider.touch.end.x?el.goToNextSlide():
el.goToPrevSlide();el.stopAuto()}}else{var distance=0;if(slider.settings.mode=="horizontal"){distance=slider.touch.end.x-slider.touch.start.x;value=slider.touch.originalPos.left}else{distance=slider.touch.end.y-slider.touch.start.y;value=slider.touch.originalPos.top}if(!slider.settings.infiniteLoop&&(slider.active.index==0&&distance>0||slider.active.last&&distance<0))setPositionProperty(value,"reset",200);else if(Math.abs(distance)>=slider.settings.swipeThreshold){distance<0?el.goToNextSlide():el.goToPrevSlide();
el.stopAuto()}else setPositionProperty(value,"reset",200)}slider.viewport.unbind("touchend",onTouchEnd)};var resizeWindow=function(e){var windowWidthNew=$(window).width();var windowHeightNew=$(window).height();if(windowWidth!=windowWidthNew||windowHeight!=windowHeightNew){windowWidth=windowWidthNew;windowHeight=windowHeightNew;el.redrawSlider()}};el.goToSlide=function(slideIndex,direction){if(slider.working||slider.active.index==slideIndex)return;slider.working=true;slider.oldIndex=slider.active.index;
if(slideIndex<0)slider.active.index=getPagerQty()-1;else if(slideIndex>=getPagerQty())slider.active.index=0;else slider.active.index=slideIndex;slider.settings.onSlideBefore(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);if(direction=="next")slider.settings.onSlideNext(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);else if(direction=="prev")slider.settings.onSlidePrev(slider.children.eq(slider.active.index),slider.oldIndex,slider.active.index);
slider.active.last=slider.active.index>=getPagerQty()-1;if(slider.settings.pager)updatePagerActive(slider.active.index);if(slider.settings.controls)updateDirectionControls();if(slider.settings.mode=="fade"){if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight())slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);slider.children.filter(":visible").fadeOut(slider.settings.speed).css({zIndex:0});slider.children.eq(slider.active.index).css("zIndex",
51).fadeIn(slider.settings.speed,function(){$(this).css("zIndex",50);updateAfterSlideTransition()})}else{if(slider.settings.adaptiveHeight&&slider.viewport.height()!=getViewportHeight())slider.viewport.animate({height:getViewportHeight()},slider.settings.adaptiveHeightSpeed);var moveBy=0;var position={left:0,top:0};if(!slider.settings.infiniteLoop&&slider.carousel&&slider.active.last)if(slider.settings.mode=="horizontal"){var lastChild=slider.children.eq(slider.children.length-1);position=lastChild.position();
moveBy=slider.viewport.width()-lastChild.outerWidth()}else{var lastShowingIndex=slider.children.length-slider.settings.minSlides;position=slider.children.eq(lastShowingIndex).position()}else if(slider.carousel&&slider.active.last&&direction=="prev"){var eq=slider.settings.moveSlides==1?slider.settings.maxSlides-getMoveBy():(getPagerQty()-1)*getMoveBy()-(slider.children.length-slider.settings.maxSlides);var lastChild=el.children(".bx-clone").eq(eq);position=lastChild.position()}else if(direction==
"next"&&slider.active.index==0){position=el.find("> .bx-clone").eq(slider.settings.maxSlides).position();slider.active.last=false}else if(slideIndex>=0){var requestEl=slideIndex*getMoveBy();position=slider.children.eq(requestEl).position()}if("undefined"!==typeof position){var value=slider.settings.mode=="horizontal"?-(position.left-moveBy):-position.top;setPositionProperty(value,"slide",slider.settings.speed)}}};el.goToNextSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.last)return;
var pagerIndex=parseInt(slider.active.index)+1;el.goToSlide(pagerIndex,"next")};el.goToPrevSlide=function(){if(!slider.settings.infiniteLoop&&slider.active.index==0)return;var pagerIndex=parseInt(slider.active.index)-1;el.goToSlide(pagerIndex,"prev")};el.startAuto=function(preventControlUpdate){if(slider.interval)return;slider.interval=setInterval(function(){slider.settings.autoDirection=="next"?el.goToNextSlide():el.goToPrevSlide()},slider.settings.pause);if(slider.settings.autoControls&&preventControlUpdate!=
true)updateAutoControls("stop")};el.stopAuto=function(preventControlUpdate){if(!slider.interval)return;clearInterval(slider.interval);slider.interval=null;if(slider.settings.autoControls&&preventControlUpdate!=true)updateAutoControls("start")};el.getCurrentSlide=function(){return slider.active.index};el.getSlideCount=function(){return slider.children.length};el.redrawSlider=function(){slider.children.add(el.find(".bx-clone")).outerWidth(getSlideWidth());slider.viewport.css("height",getViewportHeight());
if(!slider.settings.ticker)setSlidePosition();if(slider.active.last)slider.active.index=getPagerQty()-1;if(slider.active.index>=getPagerQty())slider.active.last=true;if(slider.settings.pager&&!slider.settings.pagerCustom){populatePager();updatePagerActive(slider.active.index)}};el.destroySlider=function(){if(!slider.initialized)return;slider.initialized=false;$(".bx-clone",this).remove();slider.children.each(function(){$(this).data("origStyle")!=undefined?$(this).attr("style",$(this).data("origStyle")):
$(this).removeAttr("style")});$(this).data("origStyle")!=undefined?this.attr("style",$(this).data("origStyle")):$(this).removeAttr("style");$(this).unwrap().unwrap();if(slider.controls.el)slider.controls.el.remove();if(slider.controls.next)slider.controls.next.remove();if(slider.controls.prev)slider.controls.prev.remove();if(slider.pagerEl)slider.pagerEl.remove();$(".bx-caption",this).remove();if(slider.controls.autoEl)slider.controls.autoEl.remove();clearInterval(slider.interval);if(slider.settings.responsive)$(window).unbind("resize",
resizeWindow)};el.reloadSlider=function(settings){if(settings!=undefined)options=settings;el.destroySlider();init()};init();return this}})(jQuery);

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.timers-1.2.js **************************************************************/ 
jQuery.fn.extend({everyTime:function(interval,label,fn,times){return this.each(function(){jQuery.timer.add(this,interval,label,fn,times)})},oneTime:function(interval,label,fn){return this.each(function(){jQuery.timer.add(this,interval,label,fn,1)})},stopTime:function(label,fn){return this.each(function(){jQuery.timer.remove(this,label,fn)})}});
jQuery.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{"ms":1,"cs":10,"ds":100,"s":1E3,"das":1E4,"hs":1E5,"ks":1E6},timeParse:function(value){if(value==undefined||value==null)return null;var result=this.regex.exec(jQuery.trim(value.toString()));if(result[2]){var num=parseFloat(result[1]);var mult=this.powers[result[2]]||1;return num*mult}else return value},add:function(element,interval,label,fn,times){var counter=0;if(jQuery.isFunction(label)){if(!times)times=
fn;fn=label;label=interval}interval=jQuery.timer.timeParse(interval);if(typeof interval!="number"||isNaN(interval)||interval<0)return;if(typeof times!="number"||isNaN(times)||times<0)times=0;times=times||0;var timers=jQuery.data(element,this.dataKey)||jQuery.data(element,this.dataKey,{});if(!timers[label])timers[label]={};fn.timerID=fn.timerID||this.guid++;var handler=function(){if(++counter>times&&times!==0||fn.call(element,counter)===false)jQuery.timer.remove(element,label,fn)};handler.timerID=
fn.timerID;if(!timers[label][fn.timerID])timers[label][fn.timerID]=window.setInterval(handler,interval);this.global.push(element)},remove:function(element,label,fn){var timers=jQuery.data(element,this.dataKey),ret;if(timers){if(!label)for(label in timers)this.remove(element,label,fn);else if(timers[label]){if(fn){if(fn.timerID){window.clearInterval(timers[label][fn.timerID]);delete timers[label][fn.timerID]}}else for(var fn in timers[label]){window.clearInterval(timers[label][fn]);delete timers[label][fn]}for(ret in timers[label])break;
if(!ret){ret=null;delete timers[label]}}for(ret in timers)break;if(!ret)jQuery.removeData(element,this.dataKey)}}}});jQuery(window).bind("unload",function(){jQuery.each(jQuery.timer.global,function(index,item){jQuery.timer.remove(item)})});

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.easing-1.3.js **************************************************************/ 
jQuery.easing["jswing"]=jQuery.easing["swing"];
jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(x,t,b,c,d){return jQuery.easing[jQuery.easing.def](x,t,b,c,d)},easeInQuad:function(x,t,b,c,d){return c*(t/=d)*t+b},easeOutQuad:function(x,t,b,c,d){return-c*(t/=d)*(t-2)+b},easeInOutQuad:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t+b;return-c/2*(--t*(t-2)-1)+b},easeInCubic:function(x,t,b,c,d){return c*(t/=d)*t*t+b},easeOutCubic:function(x,t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},easeInOutCubic:function(x,t,b,c,d){if((t/=d/2)<1)return c/
2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b},easeInQuart:function(x,t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutQuart:function(x,t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeInOutQuart:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t+b;return-c/2*((t-=2)*t*t*t-2)+b},easeInQuint:function(x,t,b,c,d){return c*(t/=d)*t*t*t*t+b},easeOutQuint:function(x,t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},easeInOutQuint:function(x,t,b,c,d){if((t/=d/2)<1)return c/2*t*t*t*t*t+b;return c/2*((t-=2)*t*t*t*t+2)+b},easeInSine:function(x,
t,b,c,d){return-c*Math.cos(t/d*(Math.PI/2))+c+b},easeOutSine:function(x,t,b,c,d){return c*Math.sin(t/d*(Math.PI/2))+b},easeInOutSine:function(x,t,b,c,d){return-c/2*(Math.cos(Math.PI*t/d)-1)+b},easeInExpo:function(x,t,b,c,d){return t==0?b:c*Math.pow(2,10*(t/d-1))+b},easeOutExpo:function(x,t,b,c,d){return t==d?b+c:c*(-Math.pow(2,-10*t/d)+1)+b},easeInOutExpo:function(x,t,b,c,d){if(t==0)return b;if(t==d)return b+c;if((t/=d/2)<1)return c/2*Math.pow(2,10*(t-1))+b;return c/2*(-Math.pow(2,-10*--t)+2)+b},
easeInCirc:function(x,t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},easeOutCirc:function(x,t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},easeInOutCirc:function(x,t,b,c,d){if((t/=d/2)<1)return-c/2*(Math.sqrt(1-t*t)-1)+b;return c/2*(Math.sqrt(1-(t-=2)*t)+1)+b},easeInElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return-(a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*2*
Math.PI/p))+b},easeOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d)==1)return b+c;if(!p)p=d*0.3;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);return a*Math.pow(2,-10*t)*Math.sin((t*d-s)*2*Math.PI/p)+c+b},easeInOutElastic:function(x,t,b,c,d){var s=1.70158;var p=0;var a=c;if(t==0)return b;if((t/=d/2)==2)return b+c;if(!p)p=d*0.3*1.5;if(a<Math.abs(c)){a=c;var s=p/4}else var s=p/(2*Math.PI)*Math.asin(c/a);if(t<1)return-0.5*a*Math.pow(2,10*
(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)+b;return a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*2*Math.PI/p)*0.5+c+b},easeInBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*(t/=d)*t*((s+1)*t-s)+b},easeOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},easeInOutBack:function(x,t,b,c,d,s){if(s==undefined)s=1.70158;if((t/=d/2)<1)return c/2*t*t*(((s*=1.525)+1)*t-s)+b;return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},easeInBounce:function(x,t,b,c,d){return c-
jQuery.easing.easeOutBounce(x,d-t,0,c,d)+b},easeOutBounce:function(x,t,b,c,d){if((t/=d)<1/2.75)return c*7.5625*t*t+b;else if(t<2/2.75)return c*(7.5625*(t-=1.5/2.75)*t+0.75)+b;else if(t<2.5/2.75)return c*(7.5625*(t-=2.25/2.75)*t+0.9375)+b;else return c*(7.5625*(t-=2.625/2.75)*t+0.984375)+b},easeInOutBounce:function(x,t,b,c,d){if(t<d/2)return jQuery.easing.easeInBounce(x,t*2,0,c,d)*0.5+b;return jQuery.easing.easeOutBounce(x,t*2-d,0,c,d)*0.5+c*0.5+b}});

/* /home/genius2/front/templates/min/js/000-jquery/1.9.0/plugins/jquery.iview-2.0.1.js **************************************************************/ 
(function($,window,undefined){var iView=function(el,options){var iv=this;iv.options=options;iv.sliderContent=el,iv.sliderInner=iv.sliderContent.html();iv.sliderContent.html("<div class='iviewSlider'>"+iv.sliderInner+"</div>");iv.slider=$(".iviewSlider",iv.sliderContent);iv.slider.css("position","relative");iv.defs={slide:0,total:0,image:"",images:[],width:iv.sliderContent.width(),height:iv.sliderContent.height(),timer:options.timer.toLowerCase(),lock:false,paused:options.autoAdvance?false:true,time:options.pauseTime,
easing:options.easing};iv.disableSelection(iv.slider[0]);iv.slides=iv.slider.children();iv.slides.each(function(i){var slide=$(this);iv.defs.images.push(slide.data("iview:image"));if(slide.data("iview:thumbnail"))iv.defs.images.push(slide.data("iview:thumbnail"));slide.css("display","none");if(slide.data("iview:type")=="video"){var element=slide.children().eq(0),video=$('<div class="iview-video-show"><div class="iview-video-container"><a class="iview-video-close" title="'+options.closeLabel+'">&#735;</a></div></div>');
slide.append(video);element.appendTo($("div.iview-video-container",video));video.css({width:iv.defs.width,height:iv.defs.height,top:"-"+iv.defs.height+"px"}).hide();slide.addClass("iview-video").css({"cursor":"pointer"})}iv.defs.total++}).css({width:iv.defs.width,height:iv.defs.height});iv.sliderContent.append('<div id="iview-preloader"><div></div></div>');var iviewPreloader=$("#iview-preloader",iv.sliderContent);var preloaderBar=$("div",iviewPreloader);iviewPreloader.css({top:iv.defs.height/2-iviewPreloader.height()/
2+"px",left:iv.defs.width/2-iviewPreloader.width()/2+"px"});iv.sliderContent.append('<div id="iview-timer"><div></div></div>');iv.iviewTimer=$("#iview-timer",iv.sliderContent);iv.iviewTimer.hide();$(".iview-caption",iv.slider).each(function(i){var caption=$(this);caption.html('<div class="caption-contain">'+caption.html()+"</div>")});options.startSlide=options.randomStart?Math.floor(Math.random()*iv.defs.total):options.startSlide;options.startSlide=options.startSlide>0&&options.startSlide>=iv.defs.total?
iv.defs.total-1:options.startSlide;iv.defs.slide=options.startSlide;iv.defs.image=iv.slides.eq(iv.defs.slide);iv.defs.time=iv.defs.image.data("iview:pausetime")?iv.defs.image.data("iview:pausetime"):options.pauseTime;iv.defs.easing=iv.defs.image.data("iview:easing")?iv.defs.image.data("iview:easing"):options.easing;iv.pieDegree=0;var padding=options.timerPadding,diameter=options.timerDiameter,stroke=options.timerStroke;if(iv.defs.total>1&&iv.defs.timer!="bar"){stroke=iv.defs.timer=="360bar"?options.timerStroke:
0;var width=diameter+padding*2+stroke*2,height=width,r=Raphael(iv.iviewTimer[0],width,height);iv.R=diameter/2;var param={stroke:options.timerBg,"stroke-width":stroke+padding*2},param2={stroke:options.timerColor,"stroke-width":stroke,"stroke-linecap":"round"},param3={fill:options.timerColor,stroke:"none","stroke-width":0},bgParam={fill:options.timerBg,stroke:"none","stroke-width":0};r.customAttributes.arc=function(value,R){var total=360,alpha=360/total*value,a=(90-alpha)*Math.PI/180,cx=diameter/2+
padding+stroke,cy=diameter/2+padding+stroke,x=cx+R*Math.cos(a),y=cy-R*Math.sin(a),path;if(total==value)path=[["M",cx,cy-R],["A",R,R,0,1,1,299.99,cy-R]];else path=[["M",cx,cy-R],["A",R,R,0,+(alpha>180),1,x,y]];return{path:path}};r.customAttributes.segment=function(angle,R){var a1=-90;R=R-1;angle=a1+angle;var flag=angle-a1>180,x=diameter/2+padding,y=diameter/2+padding;a1=a1%360*Math.PI/180;angle=angle%360*Math.PI/180;return{path:[["M",x,y],["l",R*Math.cos(a1),R*Math.sin(a1)],["A",R,R,0,+flag,1,x+R*
Math.cos(angle),y+R*Math.sin(angle)],["z"]]}};if(iv.defs.total>1&&iv.defs.timer=="pie")r.circle(iv.R+padding,iv.R+padding,iv.R+padding-1).attr(bgParam);iv.timerBgPath=r.path().attr(param),iv.timerPath=r.path().attr(param2),iv.pieTimer=r.path().attr(param3)}iv.barTimer=$("div",iv.iviewTimer);if(iv.defs.total>1&&iv.defs.timer=="360bar")iv.timerBgPath.attr({arc:[359.9,iv.R]});if(iv.defs.timer=="bar"){iv.iviewTimer.css({opacity:options.timerOpacity,width:diameter,height:stroke,border:options.timerBarStroke+
"px "+options.timerBarStrokeColor+" "+options.timerBarStrokeStyle,padding:padding,background:options.timerBg});iv.barTimer.css({width:0,height:stroke,background:options.timerColor,"float":"left"})}else iv.iviewTimer.css({opacity:options.timerOpacity,width:width,height:height});iv.setTimerPosition();new ImagePreload(iv.defs.images,function(i){var percent=i*10;preloaderBar.stop().animate({width:percent+"%"})},function(){preloaderBar.stop().animate({width:"100%"},function(){iviewPreloader.remove();iv.startSlider();
options.onAfterLoad.call(this)})});iv.sliderContent.bind("swipeleft",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.goTo("next")}).bind("swiperight",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.defs.slide-=2;iv.goTo("prev")});if(options.keyboardNav)$(document).bind("keyup.iView",function(event){if(event.keyCode=="37"){if(iv.defs.lock)return false;iv.cleanTimer();iv.defs.slide-=2;iv.goTo("prev")}if(event.keyCode=="39"){if(iv.defs.lock)return false;iv.cleanTimer();iv.goTo("next")}});
iv.iviewTimer.live("click",function(){if(iv.iviewTimer.hasClass("paused"))iv.playSlider();else iv.stopSlider()});iv.sliderContent.bind("iView:pause",function(){iv.stopSlider()});iv.sliderContent.bind("iView:play",function(){iv.playSlider()});iv.sliderContent.bind("iView:previous",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.defs.slide-=2;iv.goTo("prev")});iv.sliderContent.bind("iView:next",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.goTo("next")});iv.sliderContent.bind("iView:goSlide",
function(event,slide){if(iv.defs.lock||iv.defs.slide==slide)return false;if($(this).hasClass("active"))return false;iv.cleanTimer();iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');iv.defs.slide=slide-1;iv.goTo("control")});iv.sliderContent.bind("resize",function(){t=$(this),tW=t.width(),tH=t.height(),width=iv.slider.width(),height=iv.slider.height();if(iv.defs.width!=tW){var ratio=tW/width,newHeight=Math.round(iv.defs.height*ratio);iv.slider.css({"-webkit-transform-origin":"0 0",
"-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+ratio+")","-moz-transform":"scale("+ratio+")","-o-transform":"scale("+ratio+")","-ms-transform":"scale("+ratio+")","transform":"scale("+ratio+")"});t.css({height:newHeight});iv.defs.width=tW;iv.setTimerPosition()}});$(".iview-video",iv.slider).click(function(e){var t=$(this),video=$(".iview-video-show",t);if(!$(e.target).hasClass("iview-video-close")&&!$(e.target).hasClass("iview-caption")&&
!$(e.target).parents().hasClass("iview-caption")){video.show().animate({top:0},1E3,"easeOutBounce");iv.sliderContent.trigger("iView:pause")}});$(".iview-video-close",iv.slider).click(function(){var video=$(this).parents(".iview-video-show"),iframe=$("iframe",video),src=iframe.attr("src");iframe.removeAttr("src").attr("src",src);video.animate({top:"-"+iv.defs.height+"px"},1E3,"easeOutBounce",function(){video.hide();iv.sliderContent.trigger("iView:play")})})};iView.prototype={timer:null,startSlider:function(){var iv=
this;var img=new Image;img.src=iv.slides.eq(0).data("iview:image");imgWidth=img.width;if(imgWidth!=iv.defs.width){iv.defs.width=imgWidth;iv.sliderContent.trigger("resize")}iv.iviewTimer.show();iv.slides.eq(iv.defs.slide).css("display","block");iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');iv.setCaption(iv.options);iv.iviewTimer.addClass("paused").attr("title",iv.options.playLabel);if(iv.options.autoAdvance&&iv.defs.total>1){iv.iviewTimer.removeClass("paused").attr("title",
iv.options.pauseLabel);iv.setTimer()}if(iv.options.directionNav){iv.sliderContent.append('<div class="iview-directionNav"><a class="iview-prevNav" title="'+iv.options.previousLabel+'">'+iv.options.previousLabel+'</a><a class="iview-nextNav" title="'+iv.options.nextLabel+'">'+iv.options.nextLabel+"</a></div>");$(".iview-directionNav",iv.sliderContent).css({opacity:iv.options.directionNavHoverOpacity});iv.sliderContent.hover(function(){$(".iview-directionNav",iv.sliderContent).stop().animate({opacity:1},
300)},function(){$(".iview-directionNav",iv.sliderContent).stop().animate({opacity:iv.options.directionNavHoverOpacity},300)});$("a.iview-prevNav",iv.sliderContent).live("click",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.defs.slide-=2;iv.goTo("prev")});$("a.iview-nextNav",iv.sliderContent).live("click",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.goTo("next")})}if(iv.options.controlNav){var iviewControl='<div class="iview-controlNav">',iviewTooltip="";if(!iv.options.directionNav&&
iv.options.controlNavNextPrev)iviewControl+='<a class="iview-controlPrevNav" title="'+iv.options.previousLabel+'">'+iv.options.previousLabel+"</a>";iviewControl+='<div class="iview-items"><ul>';for(var i=0;i<iv.defs.total;i++){var slide=iv.slides.eq(i);iviewControl+="<li>";if(iv.options.controlNavThumbs){var thumb=slide.data("iview:thumbnail")?slide.data("iview:thumbnail"):slide.data("iview:image");iviewControl+='<a class="iview-control" rel="'+i+'"><img src="'+thumb+'" /></a>'}else{var thumb=slide.data("iview:thumbnail")?
slide.data("iview:thumbnail"):slide.data("iview:image");iviewControl+='<a class="iview-control" rel="'+i+'">'+(i+1)+"</a>";if(iv.options.controlNavTooltip)iviewTooltip+='<div rel="'+i+'"><img src="'+thumb+'" /></div>'}iviewControl+="</li>"}iviewControl+="</ul></div>";if(!iv.options.directionNav&&iv.options.controlNavNextPrev)iviewControl+='<a class="iview-controlNextNav" title="'+iv.options.nextLabel+'">'+iv.options.nextLabel+"</a>";iviewControl+="</div>";if(!iv.options.controlNavThumbs&&iv.options.controlNavTooltip)iviewControl+=
'<div id="iview-tooltip"><div class="holder"><div class="container">'+iviewTooltip+"</div></div></div>";iv.sliderContent.append(iviewControl);$(".iview-controlNav a.iview-control:eq("+iv.defs.slide+")",iv.sliderContent).addClass("active");$("a.iview-controlPrevNav",iv.sliderContent).live("click",function(){if(iv.defs.lock)return false;iv.cleanTimer();iv.defs.slide-=2;iv.goTo("prev")});$("a.iview-controlNextNav",iv.sliderContent).live("click",function(){if(iv.defs.lock)return false;iv.cleanTimer();
iv.goTo("next")});$(".iview-controlNav a.iview-control",iv.sliderContent).live("click",function(){if(iv.defs.lock)return false;if($(this).hasClass("active"))return false;iv.cleanTimer();iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');iv.defs.slide=$(this).attr("rel")-1;iv.goTo("control")});$(".iview-controlNav",iv.sliderContent).css({opacity:iv.options.controlNavHoverOpacity});iv.sliderContent.hover(function(){$(".iview-controlNav",iv.sliderContent).stop().animate({opacity:1},
300);iv.sliderContent.addClass("iview-hover")},function(){$(".iview-controlNav",iv.sliderContent).stop().animate({opacity:iv.options.controlNavHoverOpacity},300);iv.sliderContent.removeClass("iview-hover")});var tooltipTimer=null;$(".iview-controlNav a.iview-control",iv.sliderContent).hover(function(e){var t=$(this),i=t.attr("rel"),tooltip=$("#iview-tooltip",iv.sliderContent),holder=$("div.holder",tooltip),x=t.offset().left-iv.sliderContent.offset().left-tooltip.outerWidth()/2+iv.options.tooltipX,
y=t.offset().top-iv.sliderContent.offset().top-tooltip.outerHeight()+iv.options.tooltipY,imD=$("div[rel="+i+"]");scrollLeft=i*imD.width();tooltip.stop().animate({left:x,top:y,opacity:1},300);if(tooltip.not(":visible"))tooltip.fadeIn(300);holder.stop().animate({scrollLeft:scrollLeft},300);clearTimeout(tooltipTimer)},function(e){var tooltip=$("#iview-tooltip",iv.sliderContent);tooltipTimer=setTimeout(function(){tooltip.animate({opacity:0},300,function(){tooltip.hide()})},200)})}iv.sliderContent.bind("mouseover.iView mousemove.iView",
function(){if(iv.options.pauseOnHover&&!iv.defs.paused)iv.cleanTimer();iv.sliderContent.addClass("iview-hover")}).bind("mouseout.iView",function(){if(iv.options.pauseOnHover&&!iv.defs.paused&&iv.timer==null&&iv.pieDegree<=359&&iv.options.autoAdvance)iv.setTimer();iv.sliderContent.removeClass("iview-hover")})},setCaption:function(){var iv=this,slide=iv.slides.eq(iv.defs.slide),captions=$(".iview-caption",slide),timeEx=0;captions.each(function(i){var caption=$(this),fx=caption.data("transition")?$.trim(caption.data("transition").toLowerCase()):
"fade",speed=caption.data("speed")?caption.data("speed"):iv.options.captionSpeed,easing=caption.data("easing")?caption.data("easing"):iv.options.captionEasing,x=caption.data("x")!="undefined"?caption.data("x"):"center",y=caption.data("y")!="undefined"?caption.data("y"):"center",w=caption.data("width")?caption.data("width"):caption.width(),h=caption.data("height")?caption.data("height"):caption.height(),oW=caption.outerWidth(),oH=caption.outerHeight();if(x=="center")x=iv.defs.width/2-oW/2;if(y=="center")y=
iv.defs.height/2-oH/2;var captionContain=$(".caption-contain",caption);caption.css({opacity:0});captionContain.css({opacity:0,position:"relative",width:w,height:h});switch(fx){case "wipedown":caption.css({top:y-h,left:x});captionContain.css({top:h+h*3,left:0});break;case "wipeup":caption.css({top:y+h,left:x});captionContain.css({top:h-h*3,left:0});break;case "wiperight":caption.css({top:y,left:x-w});captionContain.css({top:0,left:w+w*2});break;case "wipeleft":caption.css({top:y,left:x+w});captionContain.css({top:0,
left:w-w*2});break;case "fade":caption.css({top:y,left:x});captionContain.css({top:0,left:0});break;case "expanddown":caption.css({top:y,left:x,height:0});captionContain.css({top:h+h*3,left:0});break;case "expandup":caption.css({top:y+h,left:x,height:0});captionContain.css({top:h-h*3,left:0});break;case "expandright":caption.css({top:y,left:x,width:0});captionContain.css({top:0,left:w+w*2});break;case "expandleft":caption.css({top:y,left:x+w,width:0});captionContain.css({top:0,left:w-w*2});break}setTimeout(function(){caption.animate({opacity:iv.options.captionOpacity,
top:y,left:x,width:w,height:h},speed,easing,function(){})},timeEx);setTimeout(function(){captionContain.animate({opacity:iv.options.captionOpacity,top:0,left:0},speed,easing)},timeEx+100);timeEx+=250})},processTimer:function(){var iv=this;if(iv.defs.timer=="360bar"){var degree=iv.pieDegree==0?0:iv.pieDegree+0.9;iv.timerPath.attr({arc:[degree,iv.R]})}else if(iv.defs.timer=="pie"){var degree=iv.pieDegree==0?0:iv.pieDegree+0.9;iv.pieTimer.attr({segment:[degree,iv.R]})}else iv.barTimer.css({width:iv.pieDegree/
360*100+"%"});iv.pieDegree+=3},transitionEnd:function(iv){iv.options.onAfterChange.call(this);iv.defs.lock=false;iv.slides.css("display","none");iv.slides.eq(iv.defs.slide).show();iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');$(".iview-strip, .iview-block",iv.slider).remove();iv.defs.time=iv.defs.image.data("iview:pausetime")?iv.defs.image.data("iview:pausetime"):iv.options.pauseTime;iv.iviewTimer.animate({opacity:iv.options.timerOpacity});iv.pieDegree=0;iv.processTimer();
iv.setCaption(iv.options);if(iv.timer==null&&!iv.defs.paused)iv.timer=setInterval(function(){iv.timerCall(iv)},iv.defs.time/120)},addStrips:function(vertical,opts){var iv=this;opts=opts?opts:iv.options;for(var i=0;i<opts.strips;i++){var stripWidth=Math.round(iv.slider.width()/opts.strips),stripHeight=Math.round(iv.slider.height()/opts.strips),bgPosition="-"+(stripWidth+i*stripWidth-stripWidth)+"px 0%",top=vertical?stripHeight*i+"px":"0px",left=vertical?"0px":stripWidth*i+"px";if(vertical)bgPosition=
"0% -"+(stripHeight+i*stripHeight-stripHeight)+"px";if(i==opts.strips-1)var width=vertical?"0px":iv.slider.width()-stripWidth*i+"px",height=vertical?iv.slider.height()-stripHeight*i+"px":"0px";else var width=vertical?"0px":stripWidth+"px",height=vertical?stripHeight+"px":"0px";var strip=$('<div class="iview-strip"></div>').css({width:width,height:height,top:top,left:left,background:'url("'+iv.defs.image.data("iview:image")+'") no-repeat '+bgPosition,opacity:0});iv.slider.append(strip)}},addBlocks:function(){var iv=
this,blockWidth=Math.round(iv.slider.width()/iv.options.blockCols),blockHeight=Math.round(iv.slider.height()/iv.options.blockRows);for(var rows=0;rows<iv.options.blockRows;rows++)for(var columns=0;columns<iv.options.blockCols;columns++){var top=rows*blockHeight+"px",left=columns*blockWidth+"px",width=blockWidth+"px",height=blockHeight+"px",bgPosition="-"+(blockWidth+columns*blockWidth-blockWidth)+"px -"+(blockHeight+rows*blockHeight-blockHeight)+"px";if(columns==iv.options.blockCols-1)width=iv.slider.width()-
blockWidth*columns+"px";var block=$('<div class="iview-block"></div>').css({width:blockWidth+"px",height:blockHeight+"px",top:rows*blockHeight+"px",left:columns*blockWidth+"px",background:'url("'+iv.defs.image.data("iview:image")+'") no-repeat '+bgPosition,opacity:0});iv.slider.append(block)}},runTransition:function(fx){var iv=this;switch(fx){case "strip-up-right":case "strip-up-left":iv.addStrips();var timeDelay=0;i=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-up-left")strips=$(".iview-strip",
iv.slider).reverse();strips.each(function(){var strip=$(this);strip.css({top:"",bottom:"0px"});setTimeout(function(){strip.animate({height:"100%",opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++})},100+timeDelay);timeDelay+=50});break;case "strip-down":case "strip-down-right":case "strip-down-left":iv.addStrips();var timeDelay=0,i=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-down-left")strips=$(".iview-strip",iv.slider).reverse();
strips.each(function(){var strip=$(this);strip.css({bottom:"",top:"0px"});setTimeout(function(){strip.animate({height:"100%",opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++})},100+timeDelay);timeDelay+=50});break;case "strip-left-right":case "strip-left-right-up":case "strip-left-right-down":iv.addStrips(true);var timeDelay=0,i=0,v=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-left-right-down")strips=$(".iview-strip",iv.slider).reverse();
strips.each(function(){var strip=$(this);if(i==0){strip.css({right:"",left:"0px"});i++}else{strip.css({left:"",right:"0px"});i=0}setTimeout(function(){strip.animate({width:"100%",opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(v==iv.options.strips-1)iv.transitionEnd(iv);v++})},100+timeDelay);timeDelay+=50});break;case "strip-up-down":case "strip-up-down-right":case "strip-up-down-left":iv.addStrips();var timeDelay=0,i=0,v=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-up-down-left")strips=
$(".iview-strip",iv.slider).reverse();strips.each(function(){var strip=$(this);if(i==0){strip.css({bottom:"",top:"0px"});i++}else{strip.css({top:"",bottom:"0px"});i=0}setTimeout(function(){strip.animate({height:"100%",opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(v==iv.options.strips-1)iv.transitionEnd(iv);v++})},100+timeDelay);timeDelay+=50});break;case "left-curtain":case "right-curtain":case "top-curtain":case "bottom-curtain":if(fx=="left-curtain"||fx=="right-curtain")iv.addStrips();
else iv.addStrips(true);var timeDelay=0,i=0,strips=$(".iview-strip",iv.slider);if(fx=="right-curtain"||fx=="bottom-curtain")strips=$(".iview-strip",iv.slider).reverse();strips.each(function(){var strip=$(this);var width=strip.width();var height=strip.height();if(fx=="left-curtain"||fx=="right-curtain")strip.css({top:"0px",height:"100%",width:"0px"});else strip.css({left:"0px",height:"0px",width:"100%"});setTimeout(function(){if(fx=="left-curtain"||fx=="right-curtain")strip.animate({width:width,opacity:"1.0"},
iv.options.animationSpeed,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++});else strip.animate({height:height,opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++})},100+timeDelay);timeDelay+=50});break;case "strip-up-right":case "strip-up-left":iv.addStrips();var timeDelay=0,i=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-up-left")strips=$(".iview-strip",iv.slider).reverse();strips.each(function(){var strip=
$(this);strip.css({"bottom":"0px"});setTimeout(function(){strip.animate({height:"100%",opacity:"1.0"},iv.options.animationSpeed,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++})},100+timeDelay);timeDelay+=50});break;case "strip-left-fade":case "strip-right-fade":case "strip-top-fade":case "strip-bottom-fade":if(fx=="strip-left-fade"||fx=="strip-right-fade")iv.addStrips();else iv.addStrips(true);var timeDelay=0,i=0,strips=$(".iview-strip",iv.slider);if(fx=="strip-right-fade"||
fx=="strip-bottom-fade")strips=$(".iview-strip",iv.slider).reverse();strips.each(function(){var strip=$(this);var width=strip.width();var height=strip.height();if(fx=="strip-left-fade"||fx=="strip-right-fade")strip.css({top:"0px",height:"100%",width:width});else strip.css({left:"0px",height:height,width:"100%"});setTimeout(function(){strip.animate({opacity:"1.0"},iv.options.animationSpeed*1.7,iv.defs.easing,function(){if(i==iv.options.strips-1)iv.transitionEnd(iv);i++})},100+timeDelay);timeDelay+=
35});break;case "slide-in-up":case "slide-in-down":opts={strips:1};iv.addStrips(false,opts);var strip=$(".iview-strip:first",iv.slider),top=0;if(fx=="slide-in-up")top="-"+iv.defs.height+"px";else top=iv.defs.height+"px";strip.css({top:top,"height":"100%","width":iv.defs.width});strip.animate({"top":"0px",opacity:1},iv.options.animationSpeed*2,iv.defs.easing,function(){iv.transitionEnd(iv)});break;case "zigzag-top":case "zigzag-bottom":case "zigzag-grow-top":case "zigzag-grow-bottom":case "zigzag-drop-top":case "zigzag-drop-bottom":iv.addBlocks();
var totalBlocks=iv.options.blockCols*iv.options.blockRows,timeDelay=0,blockToArr=new Array,blocks=$(".iview-block",iv.slider);for(var rows=0;rows<iv.options.blockRows;rows++){var odd=rows%2,start=rows*iv.options.blockCols,end=(rows+1)*iv.options.blockCols;if(odd==1)for(var columns=end-1;columns>=start;columns--)blockToArr.push($(blocks[columns]));else for(var columns=start;columns<end;columns++)blockToArr.push($(blocks[columns]))}if(fx=="zigzag-bottom"||fx=="zigzag-grow-bottom"||fx=="zigzag-drop-bottom")blockToArr.reverse();
blocks.each(function(i){var block=$(blockToArr[i]),h=block.height(),w=block.width(),top=block.css("top");if(fx=="zigzag-grow-top"||fx=="zigzag-grow-bottom")block.width(0).height(0);else if(fx=="zigzag-drop-top"||fx=="zigzag-drop-bottom")block.css({top:"-=50"});setTimeout(function(){if(fx=="zigzag-grow-top"||fx=="zigzag-grow-bottom")block.animate({opacity:"1",height:h,width:w},iv.options.animationSpeed,iv.defs.easing,function(){if(i==totalBlocks-1)iv.transitionEnd(iv)});else if(fx=="zigzag-drop-top"||
fx=="zigzag-drop-bottom")block.animate({top:top,opacity:"1"},iv.options.animationSpeed,iv.defs.easing,function(){if(i==totalBlocks-1)iv.transitionEnd(iv)});else block.animate({opacity:"1"},iv.options.animationSpeed*2,"easeInOutExpo",function(){if(i==totalBlocks-1)iv.transitionEnd(iv)})},100+timeDelay);timeDelay+=20});break;case "block-fade":case "block-fade-reverse":case "block-expand":case "block-expand-reverse":iv.addBlocks();var totalBlocks=iv.options.blockCols*iv.options.blockRows,i=0,timeDelay=
0;var rowIndex=0;var colIndex=0;var blockToArr=new Array;blockToArr[rowIndex]=new Array;var blocks=$(".iview-block",iv.slider);if(fx=="block-fade-reverse"||fx=="block-expand-reverse")blocks=$(".iview-block",iv.slider).reverse();blocks.each(function(){blockToArr[rowIndex][colIndex]=$(this);colIndex++;if(colIndex==iv.options.blockCols){rowIndex++;colIndex=0;blockToArr[rowIndex]=new Array}});for(var columns=0;columns<iv.options.blockCols*2;columns++){var Col=columns;for(var rows=0;rows<iv.options.blockRows;rows++){if(Col>=
0&&Col<iv.options.blockCols)(function(){var block=$(blockToArr[rows][Col]);var w=block.width();var h=block.height();if(fx=="block-expand"||fx=="block-expand-reverse")block.width(0).height(0);setTimeout(function(){block.animate({opacity:"1",width:w,height:h},iv.options.animationSpeed/1.3,iv.defs.easing,function(){if(i==totalBlocks-1)iv.transitionEnd(iv);i++})},100+timeDelay)})();Col--}timeDelay+=100}break;case "block-random":case "block-expand-random":case "block-drop-random":iv.addBlocks();var totalBlocks=
iv.options.blockCols*iv.options.blockRows,timeDelay=0;var blocks=iv.shuffle($(".iview-block",iv.slider));blocks.each(function(i){var block=$(this),h=block.height(),w=block.width(),top=block.css("top");if(fx=="block-expand-random")block.width(0).height(0);if(fx=="block-drop-random")block.css({top:"-=50"});setTimeout(function(){block.animate({top:top,opacity:"1",height:h,width:w},iv.options.animationSpeed,iv.defs.easing,function(){if(i==totalBlocks-1)iv.transitionEnd(iv)})},100+timeDelay);timeDelay+=
20});break;case "slide-in-right":case "slide-in-left":case "fade":default:opts={strips:1};iv.addStrips(false,opts);var strip=$(".iview-strip:first",iv.slider);strip.css({"height":"100%","width":iv.defs.width});if(fx=="slide-in-right")strip.css({"height":"100%","width":iv.defs.width,"left":iv.defs.width+"px","right":""});else if(fx=="slide-in-left")strip.css({"left":"-"+iv.defs.width+"px"});strip.animate({left:"0px",opacity:1},iv.options.animationSpeed*2,iv.defs.easing,function(){iv.transitionEnd(iv)});
break}},shuffle:function(oldArray){var newArray=oldArray.slice();var len=newArray.length;var i=len;while(i--){var p=parseInt(Math.random()*len);var t=newArray[i];newArray[i]=newArray[p];newArray[p]=t}return newArray},timerCall:function(iv){iv.processTimer();if(iv.pieDegree>=360){iv.cleanTimer();iv.goTo(false)}},setTimer:function(){var iv=this;iv.timer=setInterval(function(){iv.timerCall(iv)},iv.defs.time/120)},cleanTimer:function(){var iv=this;clearInterval(iv.timer);iv.timer=null},goTo:function(action){var iv=
this;if(iv.defs&&iv.defs.slide==iv.defs.total-1)iv.options.onLastSlide.call(this);iv.cleanTimer();iv.iviewTimer.animate({opacity:0});iv.options.onBeforeChange.call(this);if(!action)iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');else if(action=="prev"||action=="next")iv.slider.css("background",'url("'+iv.defs.image.data("iview:image")+'") no-repeat');iv.defs.slide++;if(iv.defs.slide==iv.defs.total){iv.defs.slide=0;iv.options.onSlideShowEnd.call(this)}if(iv.defs.slide<
0)iv.defs.slide=iv.defs.total-1;iv.defs.image=iv.slides.eq(iv.defs.slide);if(iv.options.controlNav){$(".iview-controlNav a.iview-control",iv.sliderContent).removeClass("active");$(".iview-controlNav a.iview-control:eq("+iv.defs.slide+")",iv.sliderContent).addClass("active")}var fx=iv.options.fx;if(iv.options.fx.toLowerCase()=="random"){var transitions=new Array("left-curtain","right-curtain","top-curtain","bottom-curtain","strip-down-right","strip-down-left","strip-up-right","strip-up-left","strip-up-down",
"strip-up-down-left","strip-left-right","strip-left-right-down","slide-in-right","slide-in-left","slide-in-up","slide-in-down","fade","block-random","block-fade","block-fade-reverse","block-expand","block-expand-reverse","block-expand-random","zigzag-top","zigzag-bottom","zigzag-grow-top","zigzag-grow-bottom","zigzag-drop-top","zigzag-drop-bottom","strip-left-fade","strip-right-fade","strip-top-fade","strip-bottom-fade","block-drop-random");fx=transitions[Math.floor(Math.random()*(transitions.length+
1))];if(fx==undefined)fx="fade";fx=$.trim(fx.toLowerCase())}if(iv.options.fx.indexOf(",")!=-1){var transitions=iv.options.fx.split(",");fx=transitions[Math.floor(Math.random()*transitions.length)];if(fx==undefined)fx="fade";fx=$.trim(fx.toLowerCase())}if(iv.defs.image.data("iview:transition")){var transitions=iv.defs.image.data("iview:transition").split(",");fx=transitions[Math.floor(Math.random()*transitions.length)];fx=$.trim(fx.toLowerCase())}iv.defs.easing=iv.defs.image.data("iview:easing")?iv.defs.image.data("iview:easing"):
iv.options.easing;iv.defs.lock=true;iv.runTransition(fx)},playSlider:function(){var iv=this;if(iv.timer==null&&iv.defs.paused){iv.iviewTimer.removeClass("paused").attr("title",iv.options.pauseLabel);iv.setTimer();iv.defs.paused=false;iv.options.onPlay.call(this)}},stopSlider:function(){var iv=this;iv.iviewTimer.addClass("paused").attr("title",iv.options.playLabel);iv.cleanTimer();iv.defs.paused=true;iv.options.onPause.call(this)},setTimerPosition:function(){var iv=this,position=iv.options.timerPosition.toLowerCase().split("-");
for(var i=0;i<position.length;i++)if(position[i]=="top")iv.iviewTimer.css({top:iv.options.timerY+"px",bottom:""});else if(position[i]=="middle")iv.iviewTimer.css({top:iv.options.timerY+iv.defs.height/2-iv.options.timerDiameter/2+"px",bottom:""});else if(position[i]=="bottom")iv.iviewTimer.css({bottom:iv.options.timerY+"px",top:""});else if(position[i]=="left")iv.iviewTimer.css({left:iv.options.timerX+"px",right:""});else if(position[i]=="center")iv.iviewTimer.css({left:iv.options.timerX+iv.defs.width/
2-iv.options.timerDiameter/2+"px",right:""});else if(position[i]=="right")iv.iviewTimer.css({right:iv.options.timerX+"px",left:""})},disableSelection:function(target){if(typeof target.onselectstart!="undefined")target.onselectstart=function(){return false};else if(typeof target.style.MozUserSelect!="undefined")target.style.MozUserSelect="none";else if(typeof target.style.webkitUserSelect!="undefined")target.style.webkitUserSelect="none";else if(typeof target.style.userSelect!="undefined")target.style.userSelect=
"none";else target.onmousedown=function(){return false};target.unselectable="on"},isTouch:function(){return!!("ontouchstart"in window)}};var ImagePreload=function(p_aImages,p_pfnPercent,p_pfnFinished){this.m_pfnPercent=p_pfnPercent;this.m_pfnFinished=p_pfnFinished;this.m_nLoaded=0;this.m_nProcessed=0;this.m_aImages=new Array;this.m_nICount=p_aImages.length;for(var i=0;i<p_aImages.length;i++)this.Preload(p_aImages[i])};ImagePreload.prototype={Preload:function(p_oImage){var oImage=new Image;this.m_aImages.push(oImage);
oImage.onload=ImagePreload.prototype.OnLoad;oImage.onerror=ImagePreload.prototype.OnError;oImage.onabort=ImagePreload.prototype.OnAbort;oImage.oImagePreload=this;oImage.bLoaded=false;oImage.source=p_oImage;oImage.src=p_oImage},OnComplete:function(){this.m_nProcessed++;if(this.m_nProcessed==this.m_nICount)this.m_pfnFinished();else this.m_pfnPercent(Math.round(this.m_nProcessed/this.m_nICount*10))},OnLoad:function(){this.bLoaded=true;this.oImagePreload.m_nLoaded++;this.oImagePreload.OnComplete()},OnError:function(){this.bError=
true;this.oImagePreload.OnComplete()},OnAbort:function(){this.bAbort=true;this.oImagePreload.OnComplete()}};$.fn.iView=function(options){options=jQuery.extend({fx:"random",easing:"easeOutQuad",strips:20,blockCols:10,blockRows:5,animationSpeed:500,pauseTime:5E3,startSlide:0,directionNav:true,directionNavHoverOpacity:0.6,controlNav:false,controlNavNextPrev:true,controlNavHoverOpacity:0.6,controlNavThumbs:false,controlNavTooltip:true,captionSpeed:500,captionEasing:"easeInOutSine",captionOpacity:1,autoAdvance:true,
keyboardNav:true,touchNav:true,pauseOnHover:false,nextLabel:"Next",previousLabel:"Previous",playLabel:"Play",pauseLabel:"Pause",closeLabel:"Close",randomStart:false,timer:"Pie",timerBg:"#000",timerColor:"#EEE",timerOpacity:0.5,timerDiameter:30,timerPadding:4,timerStroke:3,timerBarStroke:1,timerBarStrokeColor:"#EEE",timerBarStrokeStyle:"solid",timerPosition:"top-right",timerX:10,timerY:10,tooltipX:5,tooltipY:-5,onBeforeChange:function(){},onAfterChange:function(){},onAfterLoad:function(){},onLastSlide:function(){},
onSlideShowEnd:function(){},onPause:function(){},onPlay:function(){}},options);$(this).each(function(){var el=$(this);new iView(el,options)})};$.fn.reverse=[].reverse;var elems=$([]),jq_resize=$.resize=$.extend($.resize,{}),timeout_id,str_setTimeout="setTimeout",str_resize="resize",str_data=str_resize+"-special-event",str_delay="delay",str_throttle="throttleWindow";jq_resize[str_delay]=250;jq_resize[str_throttle]=true;$.event.special[str_resize]={setup:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout])return false;
var elem=$(this);elems=elems.add(elem);$.data(this,str_data,{w:elem.width(),h:elem.height()});if(elems.length===1)loopy()},teardown:function(){if(!jq_resize[str_throttle]&&this[str_setTimeout])return false;var elem=$(this);elems=elems.not(elem);elem.removeData(str_data);if(!elems.length)clearTimeout(timeout_id)},add:function(handleObj){if(!jq_resize[str_throttle]&&this[str_setTimeout])return false;var old_handler;function new_handler(e,w,h){var elem=$(this),data=$.data(this,str_data);data.w=w!==undefined?
w:elem.width();data.h=h!==undefined?h:elem.height();old_handler.apply(this,arguments)}if($.isFunction(handleObj)){old_handler=handleObj;return new_handler}else{old_handler=handleObj.handler;handleObj.handler=new_handler}}};function loopy(){timeout_id=window[str_setTimeout](function(){elems.each(function(){var elem=$(this),width=elem.width(),height=elem.height(),data=$.data(this,str_data);if(width!==data.w||height!==data.h)elem.trigger(str_resize,[data.w=width,data.h=height])});loopy()},jq_resize[str_delay])}
var supportTouch=!!("ontouchstart"in window),touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove";$.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1E3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var thisObject=this,$this=$(thisObject);$this.bind(touchStartEvent,function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:
event,start={time:(new Date).getTime(),coords:[data.pageX,data.pageY],origin:$(event.target)},stop;function moveHandler(event){if(!start)return;var data=event.originalEvent.touches?event.originalEvent.touches[0]:event;stop={time:(new Date).getTime(),coords:[data.pageX,data.pageY]};if(Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold)event.preventDefault()}$this.bind(touchMoveEvent,moveHandler).one(touchStopEvent,function(event){$this.unbind(touchMoveEvent,moveHandler);
if(start&&stop)if(stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold)start.origin.trigger("swipe").trigger(start.coords[0]>stop.coords[0]?"swipeleft":"swiperight");start=stop=undefined})})}};$.each({swipeleft:"swipe",swiperight:"swipe"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,
$.noop)}}})})(jQuery,this);

/* /home/genius2/front/templates/min/js/060-jquery-ui/1.10.0/jquery-ui.js **************************************************************/ 
(function($,undefined){var uuid=0,runiqueId=/^ui-id-\d+$/;$.ui=$.ui||{};if($.ui.version)return;$.extend($.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=
this;setTimeout(function(){$(elem).focus();if(fn)fn.call(elem)},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;if($.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position")))scrollParent=this.parents().filter(function(){return/(relative|absolute|fixed)/.test($.css(this,"position"))&&/(auto|scroll)/.test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0);else scrollParent=this.parents().filter(function(){return/(auto|scroll)/.test($.css(this,
"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined)return this.css("zIndex",zIndex);if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0)return value}elem=
elem.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id)this.id="ui-id-"+ ++uuid})},removeUniqueId:function(){return this.each(function(){if(runiqueId.test(this.id))$(this).removeAttr("id")})}});function focusable(element,isTabIndexNotNaN){var map,mapName,img,nodeName=element.nodeName.toLowerCase();if("area"===nodeName){map=element.parentNode;mapName=map.name;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map")return false;img=$("img[usemap=#"+mapName+"]")[0];
return!!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"===nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return $.expr.filters.visible(element)&&!$(element).parents().addBack().filter(function(){return $.css(this,"visibility")==="hidden"}).length}$.extend($.expr[":"],{data:$.expr.createPseudo?$.expr.createPseudo(function(dataName){return function(elem){return!!$.data(elem,dataName)}}):function(elem,
i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});if(!$("<a>").outerWidth(1).jquery)$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,
outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.css(elem,"padding"+this))||0;if(border)size-=parseFloat($.css(elem,"border"+this+"Width"))||0;if(margin)size-=parseFloat($.css(elem,"margin"+this))||0});return size}$.fn["inner"+name]=function(size){if(size===undefined)return orig["inner"+name].call(this);return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,
margin){if(typeof size!=="number")return orig["outer"+name].call(this,size);return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}});if(!$.fn.addBack)$.fn.addBack=function(selector){return this.add(selector==null?this.prevObject:this.prevObject.filter(selector))};if($("<a>").data("a-b","a").removeData("a-b").data("a-b"))$.fn.removeData=function(removeData){return function(key){if(arguments.length)return removeData.call(this,$.camelCase(key));else return removeData.call(this)}}($.fn.removeData);
$.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());$.support.selectstart="onselectstart"in document.createElement("div");$.fn.extend({disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});$.extend($.ui,{plugin:{add:function(module,option,set){var i,proto=$.ui[module].prototype;for(i in set){proto.plugins[i]=
proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var i,set=instance.plugins[name];if(!set||!instance.element[0].parentNode||instance.element[0].parentNode.nodeType===11)return;for(i=0;i<set.length;i++)if(instance.options[set[i][0]])set[i][1].apply(instance.element,args)}},hasScroll:function(el,a){if($(el).css("overflow")==="hidden")return false;var scroll=a&&a==="left"?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0)return true;el[scroll]=1;has=el[scroll]>
0;el[scroll]=0;return has}})})(jQuery);
(function($,undefined){var uuid=0,slice=Array.prototype.slice,_cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++)try{$(elem).triggerHandler("remove")}catch(e){}_cleanData(elems)};$.widget=function(name,base,prototype){var fullName,existingConstructor,constructor,basePrototype,proxiedPrototype={},namespace=name.split(".")[0];name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName.toLowerCase()]=function(elem){return!!$.data(elem,
fullName)};$[namespace]=$[namespace]||{};existingConstructor=$[namespace][name];constructor=$[namespace][name]=function(options,element){if(!this._createWidget)return new constructor(options,element);if(arguments.length)this._createWidget(options,element)};$.extend(constructor,existingConstructor,{version:prototype.version,_proto:$.extend({},prototype),_childConstructors:[]});basePrototype=new base;basePrototype.options=$.widget.extend({},basePrototype.options);$.each(prototype,function(prop,value){if(!$.isFunction(value)){proxiedPrototype[prop]=
value;return}proxiedPrototype[prop]=function(){var _super=function(){return base.prototype[prop].apply(this,arguments)},_superApply=function(args){return base.prototype[prop].apply(this,args)};return function(){var __super=this._super,__superApply=this._superApply,returnValue;this._super=_super;this._superApply=_superApply;returnValue=value.apply(this,arguments);this._super=__super;this._superApply=__superApply;return returnValue}}()});constructor.prototype=$.widget.extend(basePrototype,{widgetEventPrefix:existingConstructor?
basePrototype.widgetEventPrefix:name},proxiedPrototype,{constructor:constructor,namespace:namespace,widgetName:name,widgetFullName:fullName});if(existingConstructor){$.each(existingConstructor._childConstructors,function(i,child){var childPrototype=child.prototype;$.widget(childPrototype.namespace+"."+childPrototype.widgetName,constructor,child._proto)});delete existingConstructor._childConstructors}else base._childConstructors.push(constructor);$.widget.bridge(name,constructor)};$.widget.extend=
function(target){var input=slice.call(arguments,1),inputIndex=0,inputLength=input.length,key,value;for(;inputIndex<inputLength;inputIndex++)for(key in input[inputIndex]){value=input[inputIndex][key];if(input[inputIndex].hasOwnProperty(key)&&value!==undefined)if($.isPlainObject(value))target[key]=$.isPlainObject(target[key])?$.widget.extend({},target[key],value):$.widget.extend({},value);else target[key]=value}return target};$.widget.bridge=function(name,object){var fullName=object.prototype.widgetFullName||
name;$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.widget.extend.apply(null,[options].concat(args)):options;if(isMethodCall)this.each(function(){var methodValue,instance=$.data(this,fullName);if(!instance)return $.error("cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'");if(!$.isFunction(instance[options])||options.charAt(0)==="_")return $.error("no such method '"+
options+"' for "+name+" widget instance");methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue&&methodValue.jquery?returnValue.pushStack(methodValue.get()):methodValue;return false}});else this.each(function(){var instance=$.data(this,fullName);if(instance)instance.option(options||{})._init();else $.data(this,fullName,new object(options,this))});return returnValue}};$.Widget=function(){};$.Widget._childConstructors=[];$.Widget.prototype=
{widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(options,element){element=$(element||this.defaultElement||this)[0];this.element=$(element);this.uuid=uuid++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=$.widget.extend({},this.options,this._getCreateOptions(),options);this.bindings=$();this.hoverable=$();this.focusable=$();if(element!==this){$.data(element,this.widgetFullName,this);this._on(true,this.element,
{remove:function(event){if(event.target===element)this.destroy()}});this.document=$(element.style?element.ownerDocument:element.document||element);this.window=$(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:$.noop,_getCreateEventData:$.noop,_create:$.noop,_init:$.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData($.camelCase(this.widgetFullName));
this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:$.noop,widget:function(){return this.element},option:function(key,value){var options=key,parts,curOption,i;if(arguments.length===0)return $.widget.extend({},this.options);if(typeof key==="string"){options={};parts=key.split(".");
key=parts.shift();if(parts.length){curOption=options[key]=$.widget.extend({},this.options[key]);for(i=0;i<parts.length-1;i++){curOption[parts[i]]=curOption[parts[i]]||{};curOption=curOption[parts[i]]}key=parts.pop();if(value===undefined)return curOption[key]===undefined?null:curOption[key];curOption[key]=value}else{if(value===undefined)return this.options[key]===undefined?null:this.options[key];options[key]=value}}this._setOptions(options);return this},_setOptions:function(options){var key;for(key in options)this._setOption(key,
options[key]);return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!value).attr("aria-disabled",value);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(suppressDisabledCheck,element,handlers){var delegateElement,
instance=this;if(typeof suppressDisabledCheck!=="boolean"){handlers=element;element=suppressDisabledCheck;suppressDisabledCheck=false}if(!handlers){handlers=element;element=this.element;delegateElement=this.widget()}else{element=delegateElement=$(element);this.bindings=this.bindings.add(element)}$.each(handlers,function(event,handler){function handlerProxy(){if(!suppressDisabledCheck&&(instance.options.disabled===true||$(this).hasClass("ui-state-disabled")))return;return(typeof handler==="string"?
instance[handler]:handler).apply(instance,arguments)}if(typeof handler!=="string")handlerProxy.guid=handler.guid=handler.guid||handlerProxy.guid||$.guid++;var match=event.match(/^(\w+)\s*(.*)$/),eventName=match[1]+instance.eventNamespace,selector=match[2];if(selector)delegateElement.delegate(selector,eventName,handlerProxy);else element.bind(eventName,handlerProxy)})},_off:function(element,eventName){eventName=(eventName||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;element.unbind(eventName).undelegate(eventName)},
_delay:function(handler,delay){function handlerProxy(){return(typeof handler==="string"?instance[handler]:handler).apply(instance,arguments)}var instance=this;return setTimeout(handlerProxy,delay||0)},_hoverable:function(element){this.hoverable=this.hoverable.add(element);this._on(element,{mouseenter:function(event){$(event.currentTarget).addClass("ui-state-hover")},mouseleave:function(event){$(event.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(element){this.focusable=this.focusable.add(element);
this._on(element,{focusin:function(event){$(event.currentTarget).addClass("ui-state-focus")},focusout:function(event){$(event.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(type,event,data){var prop,orig,callback=this.options[type];data=data||{};event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();event.target=this.element[0];orig=event.originalEvent;if(orig)for(prop in orig)if(!(prop in event))event[prop]=orig[prop];this.element.trigger(event,
data);return!($.isFunction(callback)&&callback.apply(this.element[0],[event].concat(data))===false||event.isDefaultPrevented())}};$.each({show:"fadeIn",hide:"fadeOut"},function(method,defaultEffect){$.Widget.prototype["_"+method]=function(element,options,callback){if(typeof options==="string")options={effect:options};var hasOptions,effectName=!options?method:options===true||typeof options==="number"?defaultEffect:options.effect||defaultEffect;options=options||{};if(typeof options==="number")options=
{duration:options};hasOptions=!$.isEmptyObject(options);options.complete=callback;if(options.delay)element.delay(options.delay);if(hasOptions&&$.effects&&$.effects.effect[effectName])element[method](options);else if(effectName!==method&&element[effectName])element[effectName](options.duration,options.easing,callback);else element.queue(function(next){$(this)[method]();if(callback)callback.call(element[0]);next()})}})})(jQuery);
(function($,undefined){var mouseHandled=false;$(document).mouseup(function(){mouseHandled=false});$.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var that=this;this.element.bind("mousedown."+this.widgetName,function(event){return that._mouseDown(event)}).bind("click."+this.widgetName,function(event){if(true===$.data(event.target,that.widgetName+".preventClickEvent")){$.removeData(event.target,that.widgetName+".preventClickEvent");
event.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate)$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(event){if(mouseHandled)return;this._mouseStarted&&this._mouseUp(event);this._mouseDownEvent=event;var that=this,btnIsLeft=event.which===1,elIsCancel=typeof this.options.cancel==="string"&&
event.target.nodeName?$(event.target).closest(this.options.cancel).length:false;if(!btnIsLeft||elIsCancel||!this._mouseCapture(event))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){that.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(event)!==false;if(!this._mouseStarted){event.preventDefault();return true}}if(true===$.data(event.target,this.widgetName+
".preventClickEvent"))$.removeData(event.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(event){return that._mouseMove(event)};this._mouseUpDelegate=function(event){return that._mouseUp(event)};$(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);event.preventDefault();mouseHandled=true;return true},_mouseMove:function(event){if($.ui.ie&&(!document.documentMode||document.documentMode<9)&&!event.button)return this._mouseUp(event);
if(this._mouseStarted){this._mouseDrag(event);return event.preventDefault()}if(this._mouseDistanceMet(event)&&this._mouseDelayMet(event)){this._mouseStarted=this._mouseStart(this._mouseDownEvent,event)!==false;this._mouseStarted?this._mouseDrag(event):this._mouseUp(event)}return!this._mouseStarted},_mouseUp:function(event){$(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;
if(event.target===this._mouseDownEvent.target)$.data(event.target,this.widgetName+".preventClickEvent",true);this._mouseStop(event)}return false},_mouseDistanceMet:function(event){return Math.max(Math.abs(this._mouseDownEvent.pageX-event.pageX),Math.abs(this._mouseDownEvent.pageY-event.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
(function($,undefined){$.ui=$.ui||{};var cachedScrollbarWidth,max=Math.max,abs=Math.abs,round=Math.round,rhorizontal=/left|center|right/,rvertical=/top|center|bottom/,roffset=/[\+\-]\d+%?/,rposition=/^\w+/,rpercent=/%$/,_position=$.fn.position;function getOffsets(offsets,width,height){return[parseInt(offsets[0],10)*(rpercent.test(offsets[0])?width/100:1),parseInt(offsets[1],10)*(rpercent.test(offsets[1])?height/100:1)]}function parseCss(element,property){return parseInt($.css(element,property),10)||
0}function getDimensions(elem){var raw=elem[0];if(raw.nodeType===9)return{width:elem.width(),height:elem.height(),offset:{top:0,left:0}};if($.isWindow(raw))return{width:elem.width(),height:elem.height(),offset:{top:elem.scrollTop(),left:elem.scrollLeft()}};if(raw.preventDefault)return{width:0,height:0,offset:{top:raw.pageY,left:raw.pageX}};return{width:elem.outerWidth(),height:elem.outerHeight(),offset:elem.offset()}}$.position={scrollbarWidth:function(){if(cachedScrollbarWidth!==undefined)return cachedScrollbarWidth;
var w1,w2,div=$("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),innerDiv=div.children()[0];$("body").append(div);w1=innerDiv.offsetWidth;div.css("overflow","scroll");w2=innerDiv.offsetWidth;if(w1===w2)w2=div[0].clientWidth;div.remove();return cachedScrollbarWidth=w1-w2},getScrollInfo:function(within){var overflowX=within.isWindow?"":within.element.css("overflow-x"),overflowY=within.isWindow?"":within.element.css("overflow-y"),
hasOverflowX=overflowX==="scroll"||overflowX==="auto"&&within.width<within.element[0].scrollWidth,hasOverflowY=overflowY==="scroll"||overflowY==="auto"&&within.height<within.element[0].scrollHeight;return{width:hasOverflowX?$.position.scrollbarWidth():0,height:hasOverflowY?$.position.scrollbarWidth():0}},getWithinInfo:function(element){var withinElement=$(element||window),isWindow=$.isWindow(withinElement[0]);return{element:withinElement,isWindow:isWindow,offset:withinElement.offset()||{left:0,top:0},
scrollLeft:withinElement.scrollLeft(),scrollTop:withinElement.scrollTop(),width:isWindow?withinElement.width():withinElement.outerWidth(),height:isWindow?withinElement.height():withinElement.outerHeight()}}};$.fn.position=function(options){if(!options||!options.of)return _position.apply(this,arguments);options=$.extend({},options);var atOffset,targetWidth,targetHeight,targetOffset,basePosition,dimensions,target=$(options.of),within=$.position.getWithinInfo(options.within),scrollInfo=$.position.getScrollInfo(within),
collision=(options.collision||"flip").split(" "),offsets={};dimensions=getDimensions(target);if(target[0].preventDefault)options.at="left top";targetWidth=dimensions.width;targetHeight=dimensions.height;targetOffset=dimensions.offset;basePosition=$.extend({},targetOffset);$.each(["my","at"],function(){var pos=(options[this]||"").split(" "),horizontalOffset,verticalOffset;if(pos.length===1)pos=rhorizontal.test(pos[0])?pos.concat(["center"]):rvertical.test(pos[0])?["center"].concat(pos):["center","center"];
pos[0]=rhorizontal.test(pos[0])?pos[0]:"center";pos[1]=rvertical.test(pos[1])?pos[1]:"center";horizontalOffset=roffset.exec(pos[0]);verticalOffset=roffset.exec(pos[1]);offsets[this]=[horizontalOffset?horizontalOffset[0]:0,verticalOffset?verticalOffset[0]:0];options[this]=[rposition.exec(pos[0])[0],rposition.exec(pos[1])[0]]});if(collision.length===1)collision[1]=collision[0];if(options.at[0]==="right")basePosition.left+=targetWidth;else if(options.at[0]==="center")basePosition.left+=targetWidth/2;
if(options.at[1]==="bottom")basePosition.top+=targetHeight;else if(options.at[1]==="center")basePosition.top+=targetHeight/2;atOffset=getOffsets(offsets.at,targetWidth,targetHeight);basePosition.left+=atOffset[0];basePosition.top+=atOffset[1];return this.each(function(){var collisionPosition,using,elem=$(this),elemWidth=elem.outerWidth(),elemHeight=elem.outerHeight(),marginLeft=parseCss(this,"marginLeft"),marginTop=parseCss(this,"marginTop"),collisionWidth=elemWidth+marginLeft+parseCss(this,"marginRight")+
scrollInfo.width,collisionHeight=elemHeight+marginTop+parseCss(this,"marginBottom")+scrollInfo.height,position=$.extend({},basePosition),myOffset=getOffsets(offsets.my,elem.outerWidth(),elem.outerHeight());if(options.my[0]==="right")position.left-=elemWidth;else if(options.my[0]==="center")position.left-=elemWidth/2;if(options.my[1]==="bottom")position.top-=elemHeight;else if(options.my[1]==="center")position.top-=elemHeight/2;position.left+=myOffset[0];position.top+=myOffset[1];if(!$.support.offsetFractions){position.left=
round(position.left);position.top=round(position.top)}collisionPosition={marginLeft:marginLeft,marginTop:marginTop};$.each(["left","top"],function(i,dir){if($.ui.position[collision[i]])$.ui.position[collision[i]][dir](position,{targetWidth:targetWidth,targetHeight:targetHeight,elemWidth:elemWidth,elemHeight:elemHeight,collisionPosition:collisionPosition,collisionWidth:collisionWidth,collisionHeight:collisionHeight,offset:[atOffset[0]+myOffset[0],atOffset[1]+myOffset[1]],my:options.my,at:options.at,
within:within,elem:elem})});if(options.using)using=function(props){var left=targetOffset.left-position.left,right=left+targetWidth-elemWidth,top=targetOffset.top-position.top,bottom=top+targetHeight-elemHeight,feedback={target:{element:target,left:targetOffset.left,top:targetOffset.top,width:targetWidth,height:targetHeight},element:{element:elem,left:position.left,top:position.top,width:elemWidth,height:elemHeight},horizontal:right<0?"left":left>0?"right":"center",vertical:bottom<0?"top":top>0?"bottom":
"middle"};if(targetWidth<elemWidth&&abs(left+right)<targetWidth)feedback.horizontal="center";if(targetHeight<elemHeight&&abs(top+bottom)<targetHeight)feedback.vertical="middle";if(max(abs(left),abs(right))>max(abs(top),abs(bottom)))feedback.important="horizontal";else feedback.important="vertical";options.using.call(this,props,feedback)};elem.offset($.extend(position,{using:using}))})};$.ui.position={fit:{left:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollLeft:
within.offset.left,outerWidth=within.width,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=withinOffset-collisionPosLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-withinOffset,newOverRight;if(data.collisionWidth>outerWidth)if(overLeft>0&&overRight<=0){newOverRight=position.left+overLeft+data.collisionWidth-outerWidth-withinOffset;position.left+=overLeft-newOverRight}else if(overRight>0&&overLeft<=0)position.left=withinOffset;else if(overLeft>overRight)position.left=
withinOffset+outerWidth-data.collisionWidth;else position.left=withinOffset;else if(overLeft>0)position.left+=overLeft;else if(overRight>0)position.left-=overRight;else position.left=max(position.left-collisionPosLeft,position.left)},top:function(position,data){var within=data.within,withinOffset=within.isWindow?within.scrollTop:within.offset.top,outerHeight=data.within.height,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=withinOffset-collisionPosTop,overBottom=collisionPosTop+
data.collisionHeight-outerHeight-withinOffset,newOverBottom;if(data.collisionHeight>outerHeight)if(overTop>0&&overBottom<=0){newOverBottom=position.top+overTop+data.collisionHeight-outerHeight-withinOffset;position.top+=overTop-newOverBottom}else if(overBottom>0&&overTop<=0)position.top=withinOffset;else if(overTop>overBottom)position.top=withinOffset+outerHeight-data.collisionHeight;else position.top=withinOffset;else if(overTop>0)position.top+=overTop;else if(overBottom>0)position.top-=overBottom;
else position.top=max(position.top-collisionPosTop,position.top)}},flip:{left:function(position,data){var within=data.within,withinOffset=within.offset.left+within.scrollLeft,outerWidth=within.width,offsetLeft=within.isWindow?within.scrollLeft:within.offset.left,collisionPosLeft=position.left-data.collisionPosition.marginLeft,overLeft=collisionPosLeft-offsetLeft,overRight=collisionPosLeft+data.collisionWidth-outerWidth-offsetLeft,myOffset=data.my[0]==="left"?-data.elemWidth:data.my[0]==="right"?data.elemWidth:
0,atOffset=data.at[0]==="left"?data.targetWidth:data.at[0]==="right"?-data.targetWidth:0,offset=-2*data.offset[0],newOverRight,newOverLeft;if(overLeft<0){newOverRight=position.left+myOffset+atOffset+offset+data.collisionWidth-outerWidth-withinOffset;if(newOverRight<0||newOverRight<abs(overLeft))position.left+=myOffset+atOffset+offset}else if(overRight>0){newOverLeft=position.left-data.collisionPosition.marginLeft+myOffset+atOffset+offset-offsetLeft;if(newOverLeft>0||abs(newOverLeft)<overRight)position.left+=
myOffset+atOffset+offset}},top:function(position,data){var within=data.within,withinOffset=within.offset.top+within.scrollTop,outerHeight=within.height,offsetTop=within.isWindow?within.scrollTop:within.offset.top,collisionPosTop=position.top-data.collisionPosition.marginTop,overTop=collisionPosTop-offsetTop,overBottom=collisionPosTop+data.collisionHeight-outerHeight-offsetTop,top=data.my[1]==="top",myOffset=top?-data.elemHeight:data.my[1]==="bottom"?data.elemHeight:0,atOffset=data.at[1]==="top"?data.targetHeight:
data.at[1]==="bottom"?-data.targetHeight:0,offset=-2*data.offset[1],newOverTop,newOverBottom;if(overTop<0){newOverBottom=position.top+myOffset+atOffset+offset+data.collisionHeight-outerHeight-withinOffset;if(position.top+myOffset+atOffset+offset>overTop&&(newOverBottom<0||newOverBottom<abs(overTop)))position.top+=myOffset+atOffset+offset}else if(overBottom>0){newOverTop=position.top-data.collisionPosition.marginTop+myOffset+atOffset+offset-offsetTop;if(position.top+myOffset+atOffset+offset>overBottom&&
(newOverTop>0||abs(newOverTop)<overBottom))position.top+=myOffset+atOffset+offset}}},flipfit:{left:function(){$.ui.position.flip.left.apply(this,arguments);$.ui.position.fit.left.apply(this,arguments)},top:function(){$.ui.position.flip.top.apply(this,arguments);$.ui.position.fit.top.apply(this,arguments)}}};(function(){var testElement,testElementParent,testElementStyle,offsetLeft,i,body=document.getElementsByTagName("body")[0],div=document.createElement("div");testElement=document.createElement(body?
"div":"body");testElementStyle={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(body)$.extend(testElementStyle,{position:"absolute",left:"-1000px",top:"-1000px"});for(i in testElementStyle)testElement.style[i]=testElementStyle[i];testElement.appendChild(div);testElementParent=body||document.documentElement;testElementParent.insertBefore(testElement,testElementParent.firstChild);div.style.cssText="position: absolute; left: 10.7432222px;";offsetLeft=$(div).offset().left;
$.support.offsetFractions=offsetLeft>10&&offsetLeft<11;testElement.innerHTML="";testElementParent.removeChild(testElement)})()})(jQuery);
(function($,undefined){$.widget("ui.draggable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,
stop:null},_create:function(){if(this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";if(this.options.addClasses)this.element.addClass("ui-draggable");if(this.options.disabled)this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(event){var o=this.options;if(this.helper||
o.disabled||$(event.target).closest(".ui-resizable-handle").length>0)return false;this.handle=this._getHandle(event);if(!this.handle)return false;$(o.iframeFix===true?"iframe":o.iframeFix).each(function(){$("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css($(this).offset()).appendTo("body")});return true},_mouseStart:function(event){var o=this.options;this.helper=
this._createHelper(event);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if($.ui.ddmanager)$.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),
relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);if(o.containment)this._setContainment();if(this._trigger("start",event)===false){this._clear();return false}this._cacheHelperProportions();if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this._mouseDrag(event,true);if($.ui.ddmanager)$.ui.ddmanager.dragStart(this,
event);return true},_mouseDrag:function(event,noPropagation){this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!noPropagation){var ui=this._uiHash();if(this._trigger("drag",event,ui)===false){this._mouseUp({});return false}this.position=ui.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";if($.ui.ddmanager)$.ui.ddmanager.drag(this,
event);return false},_mouseStop:function(event){var element,that=this,elementInDom=false,dropped=false;if($.ui.ddmanager&&!this.options.dropBehaviour)dropped=$.ui.ddmanager.drop(this,event);if(this.dropped){dropped=this.dropped;this.dropped=false}element=this.element[0];while(element&&(element=element.parentNode))if(element===document)elementInDom=true;if(!elementInDom&&this.options.helper==="original")return false;if(this.options.revert==="invalid"&&!dropped||this.options.revert==="valid"&&dropped||
this.options.revert===true||$.isFunction(this.options.revert)&&this.options.revert.call(this.element,dropped))$(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(that._trigger("stop",event)!==false)that._clear()});else if(this._trigger("stop",event)!==false)this._clear();return false},_mouseUp:function(event){$("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if($.ui.ddmanager)$.ui.ddmanager.dragStop(this,event);return $.ui.mouse.prototype._mouseUp.call(this,
event)},cancel:function(){if(this.helper.is(".ui-draggable-dragging"))this._mouseUp({});else this._clear();return this},_getHandle:function(event){var handle=!this.options.handle||!$(this.options.handle,this.element).length?true:false;$(this.options.handle,this.element).find("*").addBack().each(function(){if(this===event.target)handle=true});return handle},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event])):o.helper==="clone"?this.element.clone().removeAttr("id"):
this.element;if(!helper.parents("body").length)helper.appendTo(o.appendTo==="parent"?this.element[0].parentNode:o.appendTo);if(helper[0]!==this.element[0]&&!/(fixed|absolute)/.test(helper.css("position")))helper.css("position","absolute");return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-
obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===
document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=this.element.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),
10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var over,c,ce,o=this.options;
if(o.containment==="parent")o.containment=this.helper[0].parentNode;if(o.containment==="document"||o.containment==="window")this.containment=[o.containment==="document"?0:$(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,o.containment==="document"?0:$(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(o.containment==="document"?0:$(window).scrollLeft())+$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(o.containment===
"document"?0:$(window).scrollTop())+($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)&&o.containment.constructor!==Array){c=$(o.containment);ce=c[0];if(!ce)return;over=$(ce).css("overflow")!=="hidden";this.containment=[(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0),(parseInt($(ce).css("borderTopWidth"),10)||0)+
(parseInt($(ce).css("paddingTop"),10)||0),(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=
c}else if(o.containment.constructor===Array)this.containment=o.containment},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():
scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var containment,co,top,left,o=this.options,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName),
pageX=event.pageX,pageY=event.pageY;if(this.originalPosition){if(this.containment){if(this.relative_container){co=this.relative_container.offset();containment=[this.containment[0]+co.left,this.containment[1]+co.top,this.containment[2]+co.left,this.containment[3]+co.top]}else containment=this.containment;if(event.pageX-this.offset.click.left<containment[0])pageX=containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<containment[1])pageY=containment[1]+this.offset.click.top;if(event.pageX-
this.offset.click.left>containment[2])pageX=containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>containment[3])pageY=containment[3]+this.offset.click.top}if(o.grid){top=o.grid[1]?this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY;pageY=containment?top-this.offset.click.top>=containment[1]||top-this.offset.click.top>containment[3]?top:top-this.offset.click.top>=containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=o.grid[0]?this.originalPageX+
Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX;pageX=containment?left-this.offset.click.left>=containment[0]||left-this.offset.click.left>containment[2]?left:left-this.offset.click.left>=containment[0]?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval)this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(type,event,ui){ui=ui||this._uiHash();$.ui.plugin.call(this,type,[event,ui]);if(type==="drag")this.positionAbs=this._convertPositionTo("absolute");return $.Widget.prototype._trigger.call(this,
type,event,ui)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});$.ui.plugin.add("draggable","connectToSortable",{start:function(event,ui){var inst=$(this).data("ui-draggable"),o=inst.options,uiSortable=$.extend({},ui,{item:inst.element});inst.sortables=[];$(o.connectToSortable).each(function(){var sortable=$.data(this,"ui-sortable");if(sortable&&!sortable.options.disabled){inst.sortables.push({instance:sortable,
shouldRevert:sortable.options.revert});sortable.refreshPositions();sortable._trigger("activate",event,uiSortable)}})},stop:function(event,ui){var inst=$(this).data("ui-draggable"),uiSortable=$.extend({},ui,{item:inst.element});$.each(inst.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;inst.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(event);this.instance.options.helper=this.instance.options._helper;
if(inst.options.helper==="original")this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",event,uiSortable)}})},drag:function(event,ui){var inst=$(this).data("ui-draggable"),that=this;$.each(inst.sortables,function(){var innermostIntersecting=false,thisSortable=this;this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){innermostIntersecting=
true;$.each(inst.sortables,function(){this.instance.positionAbs=inst.positionAbs;this.instance.helperProportions=inst.helperProportions;this.instance.offset.click=inst.offset.click;if(this!==thisSortable&&this.instance._intersectsWith(this.instance.containerCache)&&$.ui.contains(thisSortable.instance.element[0],this.instance.element[0]))innermostIntersecting=false;return innermostIntersecting})}if(innermostIntersecting){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=$(that).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",
true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return ui.helper[0]};event.target=this.instance.currentItem[0];this.instance._mouseCapture(event,true);this.instance._mouseStart(event,true,true);this.instance.offset.click.top=inst.offset.click.top;this.instance.offset.click.left=inst.offset.click.left;this.instance.offset.parent.left-=inst.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=inst.offset.parent.top-
this.instance.offset.parent.top;inst._trigger("toSortable",event);inst.dropped=this.instance.element;inst.currentItem=inst.element;this.instance.fromOutside=inst}if(this.instance.currentItem)this.instance._mouseDrag(event)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",event,this.instance._uiHash(this.instance));this.instance._mouseStop(event,true);this.instance.options.helper=this.instance.options._helper;
this.instance.currentItem.remove();if(this.instance.placeholder)this.instance.placeholder.remove();inst._trigger("fromSortable",event);inst.dropped=false}})}});$.ui.plugin.add("draggable","cursor",{start:function(){var t=$("body"),o=$(this).data("ui-draggable").options;if(t.css("cursor"))o._cursor=t.css("cursor");t.css("cursor",o.cursor)},stop:function(){var o=$(this).data("ui-draggable").options;if(o._cursor)$("body").css("cursor",o._cursor)}});$.ui.plugin.add("draggable","opacity",{start:function(event,
ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("opacity"))o._opacity=t.css("opacity");t.css("opacity",o.opacity)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;if(o._opacity)$(ui.helper).css("opacity",o._opacity)}});$.ui.plugin.add("draggable","scroll",{start:function(){var i=$(this).data("ui-draggable");if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML")i.overflowOffset=i.scrollParent.offset()},drag:function(event){var i=$(this).data("ui-draggable"),
o=i.options,scrolled=false;if(i.scrollParent[0]!==document&&i.scrollParent[0].tagName!=="HTML"){if(!o.axis||o.axis!=="x")if(i.overflowOffset.top+i.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-i.overflowOffset.top<o.scrollSensitivity)i.scrollParent[0].scrollTop=scrolled=i.scrollParent[0].scrollTop-o.scrollSpeed;if(!o.axis||o.axis!=="y")if(i.overflowOffset.left+i.scrollParent[0].offsetWidth-
event.pageX<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-i.overflowOffset.left<o.scrollSensitivity)i.scrollParent[0].scrollLeft=scrolled=i.scrollParent[0].scrollLeft-o.scrollSpeed}else{if(!o.axis||o.axis!=="x")if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=
$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(!o.axis||o.axis!=="y")if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(i,event)}});$.ui.plugin.add("draggable","snap",
{start:function(){var i=$(this).data("ui-draggable"),o=i.options;i.snapElements=[];$(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var $t=$(this),$o=$t.offset();if(this!==i.element[0])i.snapElements.push({item:this,width:$t.outerWidth(),height:$t.outerHeight(),top:$o.top,left:$o.left})})},drag:function(event,ui){var ts,bs,ls,rs,l,r,t,b,i,first,inst=$(this).data("ui-draggable"),o=inst.options,d=o.snapTolerance,x1=ui.offset.left,x2=x1+inst.helperProportions.width,
y1=ui.offset.top,y2=y1+inst.helperProportions.height;for(i=inst.snapElements.length-1;i>=0;i--){l=inst.snapElements[i].left;r=l+inst.snapElements[i].width;t=inst.snapElements[i].top;b=t+inst.snapElements[i].height;if(!(l-d<x1&&x1<r+d&&t-d<y1&&y1<b+d||l-d<x1&&x1<r+d&&t-d<y2&&y2<b+d||l-d<x2&&x2<r+d&&t-d<y1&&y1<b+d||l-d<x2&&x2<r+d&&t-d<y2&&y2<b+d)){if(inst.snapElements[i].snapping)inst.options.snap.release&&inst.options.snap.release.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));
inst.snapElements[i].snapping=false;continue}if(o.snapMode!=="inner"){ts=Math.abs(t-y2)<=d;bs=Math.abs(b-y1)<=d;ls=Math.abs(l-x2)<=d;rs=Math.abs(r-x1)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t-inst.helperProportions.height,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l-inst.helperProportions.width}).left-inst.margins.left;if(rs)ui.position.left=
inst._convertPositionTo("relative",{top:0,left:r}).left-inst.margins.left}first=ts||bs||ls||rs;if(o.snapMode!=="outer"){ts=Math.abs(t-y1)<=d;bs=Math.abs(b-y2)<=d;ls=Math.abs(l-x1)<=d;rs=Math.abs(r-x2)<=d;if(ts)ui.position.top=inst._convertPositionTo("relative",{top:t,left:0}).top-inst.margins.top;if(bs)ui.position.top=inst._convertPositionTo("relative",{top:b-inst.helperProportions.height,left:0}).top-inst.margins.top;if(ls)ui.position.left=inst._convertPositionTo("relative",{top:0,left:l}).left-
inst.margins.left;if(rs)ui.position.left=inst._convertPositionTo("relative",{top:0,left:r-inst.helperProportions.width}).left-inst.margins.left}if(!inst.snapElements[i].snapping&&(ts||bs||ls||rs||first))inst.options.snap.snap&&inst.options.snap.snap.call(inst.element,event,$.extend(inst._uiHash(),{snapItem:inst.snapElements[i].item}));inst.snapElements[i].snapping=ts||bs||ls||rs||first}}});$.ui.plugin.add("draggable","stack",{start:function(){var min,o=$(this).data("ui-draggable").options,group=$.makeArray($(o.stack)).sort(function(a,
b){return(parseInt($(a).css("zIndex"),10)||0)-(parseInt($(b).css("zIndex"),10)||0)});if(!group.length)return;min=parseInt(group[0].style.zIndex,10)||0;$(group).each(function(i){this.style.zIndex=min+i});this[0].style.zIndex=min+group.length}});$.ui.plugin.add("draggable","zIndex",{start:function(event,ui){var t=$(ui.helper),o=$(this).data("ui-draggable").options;if(t.css("zIndex"))o._zIndex=t.css("zIndex");t.css("zIndex",o.zIndex)},stop:function(event,ui){var o=$(this).data("ui-draggable").options;
if(o._zIndex)$(ui.helper).css("zIndex",o._zIndex)}})})(jQuery);
(function($,undefined){function isOverAxis(x,reference,size){return x>reference&&x<reference+size}$.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var o=this.options,accept=o.accept;this.isover=false;this.isout=true;this.accept=$.isFunction(accept)?accept:function(d){return d.is(accept)};
this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};$.ui.ddmanager.droppables[o.scope]=$.ui.ddmanager.droppables[o.scope]||[];$.ui.ddmanager.droppables[o.scope].push(this);o.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var i=0,drop=$.ui.ddmanager.droppables[this.options.scope];for(;i<drop.length;i++)if(drop[i]===this)drop.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(key,value){if(key===
"accept")this.accept=$.isFunction(value)?value:function(d){return d.is(value)};$.Widget.prototype._setOption.apply(this,arguments)},_activate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.addClass(this.options.activeClass);if(draggable)this._trigger("activate",event,this.ui(draggable))},_deactivate:function(event){var draggable=$.ui.ddmanager.current;if(this.options.activeClass)this.element.removeClass(this.options.activeClass);if(draggable)this._trigger("deactivate",
event,this.ui(draggable))},_over:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.addClass(this.options.hoverClass);this._trigger("over",event,this.ui(draggable))}},_out:function(event){var draggable=$.ui.ddmanager.current;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return;
if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("out",event,this.ui(draggable))}},_drop:function(event,custom){var draggable=custom||$.ui.ddmanager.current,childrenIntersection=false;if(!draggable||(draggable.currentItem||draggable.element)[0]===this.element[0])return false;this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var inst=$.data(this,
"ui-droppable");if(inst.options.greedy&&!inst.options.disabled&&inst.options.scope===draggable.options.scope&&inst.accept.call(inst.element[0],draggable.currentItem||draggable.element)&&$.ui.intersect(draggable,$.extend(inst,{offset:inst.element.offset()}),inst.options.tolerance)){childrenIntersection=true;return false}});if(childrenIntersection)return false;if(this.accept.call(this.element[0],draggable.currentItem||draggable.element)){if(this.options.activeClass)this.element.removeClass(this.options.activeClass);
if(this.options.hoverClass)this.element.removeClass(this.options.hoverClass);this._trigger("drop",event,this.ui(draggable));return this.element}return false},ui:function(c){return{draggable:c.currentItem||c.element,helper:c.helper,position:c.position,offset:c.positionAbs}}});$.ui.intersect=function(draggable,droppable,toleranceMode){if(!droppable.offset)return false;var draggableLeft,draggableTop,x1=(draggable.positionAbs||draggable.position.absolute).left,x2=x1+draggable.helperProportions.width,
y1=(draggable.positionAbs||draggable.position.absolute).top,y2=y1+draggable.helperProportions.height,l=droppable.offset.left,r=l+droppable.proportions.width,t=droppable.offset.top,b=t+droppable.proportions.height;switch(toleranceMode){case "fit":return l<=x1&&x2<=r&&t<=y1&&y2<=b;case "intersect":return l<x1+draggable.helperProportions.width/2&&x2-draggable.helperProportions.width/2<r&&t<y1+draggable.helperProportions.height/2&&y2-draggable.helperProportions.height/2<b;case "pointer":draggableLeft=
(draggable.positionAbs||draggable.position.absolute).left+(draggable.clickOffset||draggable.offset.click).left;draggableTop=(draggable.positionAbs||draggable.position.absolute).top+(draggable.clickOffset||draggable.offset.click).top;return isOverAxis(draggableTop,t,droppable.proportions.height)&&isOverAxis(draggableLeft,l,droppable.proportions.width);case "touch":return(y1>=t&&y1<=b||y2>=t&&y2<=b||y1<t&&y2>b)&&(x1>=l&&x1<=r||x2>=l&&x2<=r||x1<l&&x2>r);default:return false}};$.ui.ddmanager={current:null,
droppables:{"default":[]},prepareOffsets:function(t,event){var i,j,m=$.ui.ddmanager.droppables[t.options.scope]||[],type=event?event.type:null,list=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();droppablesLoop:for(i=0;i<m.length;i++){if(m[i].options.disabled||t&&!m[i].accept.call(m[i].element[0],t.currentItem||t.element))continue;for(j=0;j<list.length;j++)if(list[j]===m[i].element[0]){m[i].proportions.height=0;continue droppablesLoop}m[i].visible=m[i].element.css("display")!=="none";
if(!m[i].visible)continue;if(type==="mousedown")m[i]._activate.call(m[i],event);m[i].offset=m[i].element.offset();m[i].proportions={width:m[i].element[0].offsetWidth,height:m[i].element[0].offsetHeight}}},drop:function(draggable,event){var dropped=false;$.each($.ui.ddmanager.droppables[draggable.options.scope]||[],function(){if(!this.options)return;if(!this.options.disabled&&this.visible&&$.ui.intersect(draggable,this,this.options.tolerance))dropped=this._drop.call(this,event)||dropped;if(!this.options.disabled&&
this.visible&&this.accept.call(this.element[0],draggable.currentItem||draggable.element)){this.isout=true;this.isover=false;this._deactivate.call(this,event)}});return dropped},dragStart:function(draggable,event){draggable.element.parentsUntil("body").bind("scroll.droppable",function(){if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event)})},drag:function(draggable,event){if(draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event);$.each($.ui.ddmanager.droppables[draggable.options.scope]||
[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var parentInstance,scope,parent,intersects=$.ui.intersect(draggable,this,this.options.tolerance),c=!intersects&&this.isover?"isout":intersects&&!this.isover?"isover":null;if(!c)return;if(this.options.greedy){scope=this.options.scope;parent=this.element.parents(":data(ui-droppable)").filter(function(){return $.data(this,"ui-droppable").options.scope===scope});if(parent.length){parentInstance=$.data(parent[0],"ui-droppable");
parentInstance.greedyChild=c==="isover"}}if(parentInstance&&c==="isover"){parentInstance.isover=false;parentInstance.isout=true;parentInstance._out.call(parentInstance,event)}this[c]=true;this[c==="isout"?"isover":"isout"]=false;this[c==="isover"?"_over":"_out"].call(this,event);if(parentInstance&&c==="isout"){parentInstance.isout=false;parentInstance.isover=true;parentInstance._over.call(parentInstance,event)}})},dragStop:function(draggable,event){draggable.element.parentsUntil("body").unbind("scroll.droppable");
if(!draggable.options.refreshPositions)$.ui.ddmanager.prepareOffsets(draggable,event)}}})(jQuery);
(function($,undefined){function num(v){return parseInt(v,10)||0}function isNumber(value){return!isNaN(parseInt(value,10))}$.widget("ui.resizable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var n,
i,handle,axis,hname,that=this,o=this.options;this.element.addClass("ui-resizable");$.extend(this,{_aspectRatio:!!o.aspectRatio,aspectRatio:o.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:o.helper||o.ghost||o.animate?o.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){this.element.wrap($("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),
height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,
marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=o.handles||(!$(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",
sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor===String){if(this.handles==="all")this.handles="n,e,s,w,se,sw,ne,nw";n=this.handles.split(",");this.handles={};for(i=0;i<n.length;i++){handle=$.trim(n[i]);hname="ui-resizable-"+handle;axis=$("<div class='ui-resizable-handle "+hname+"'></div>");axis.css({zIndex:o.zIndex});if("se"===handle)axis.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[handle]=".ui-resizable-"+handle;this.element.append(axis)}}this._renderAxis=
function(target){var i,axis,padPos,padWrapper;target=target||this.element;for(i in this.handles){if(this.handles[i].constructor===String)this.handles[i]=$(this.handles[i],this.element).show();if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){axis=$(this.handles[i],this.element);padWrapper=/sw|ne|nw|se|n|s/.test(i)?axis.outerHeight():axis.outerWidth();padPos=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");
target.css(padPos,padWrapper);this._proportionallyResize()}if(!$(this.handles[i]).length)continue}};this._renderAxis(this.element);this._handles=$(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!that.resizing){if(this.className)axis=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);that.axis=axis&&axis[1]?axis[1]:"se"}});if(o.autoHide){this._handles.hide();$(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(o.disabled)return;
$(this).removeClass("ui-resizable-autohide");that._handles.show()}).mouseleave(function(){if(o.disabled)return;if(!that.resizing){$(this).addClass("ui-resizable-autohide");that._handles.hide()}})}this._mouseInit()},_destroy:function(){this._mouseDestroy();var wrapper,_destroy=function(exp){$(exp).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){_destroy(this.element);
wrapper=this.element;this.originalElement.css({position:wrapper.css("position"),width:wrapper.outerWidth(),height:wrapper.outerHeight(),top:wrapper.css("top"),left:wrapper.css("left")}).insertAfter(wrapper);wrapper.remove()}this.originalElement.css("resize",this.originalResizeStyle);_destroy(this.originalElement);return this},_mouseCapture:function(event){var i,handle,capture=false;for(i in this.handles){handle=$(this.handles[i])[0];if(handle===event.target||$.contains(handle,event.target))capture=
true}return!this.options.disabled&&capture},_mouseStart:function(event){var curleft,curtop,cursor,o=this.options,iniPos=this.element.position(),el=this.element;this.resizing=true;if(/absolute/.test(el.css("position")))el.css({position:"absolute",top:el.css("top"),left:el.css("left")});else if(el.is(".ui-draggable"))el.css({position:"absolute",top:iniPos.top,left:iniPos.left});this._renderProxy();curleft=num(this.helper.css("left"));curtop=num(this.helper.css("top"));if(o.containment){curleft+=$(o.containment).scrollLeft()||
0;curtop+=$(o.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:curleft,top:curtop};this.size=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalSize=this._helper?{width:el.outerWidth(),height:el.outerHeight()}:{width:el.width(),height:el.height()};this.originalPosition={left:curleft,top:curtop};this.sizeDiff={width:el.outerWidth()-el.width(),height:el.outerHeight()-el.height()};this.originalMousePosition=
{left:event.pageX,top:event.pageY};this.aspectRatio=typeof o.aspectRatio==="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1;cursor=$(".ui-resizable-"+this.axis).css("cursor");$("body").css("cursor",cursor==="auto"?this.axis+"-resize":cursor);el.addClass("ui-resizable-resizing");this._propagate("start",event);return true},_mouseDrag:function(event){var data,el=this.helper,props={},smp=this.originalMousePosition,a=this.axis,prevTop=this.position.top,prevLeft=this.position.left,
prevWidth=this.size.width,prevHeight=this.size.height,dx=event.pageX-smp.left||0,dy=event.pageY-smp.top||0,trigger=this._change[a];if(!trigger)return false;data=trigger.apply(this,[event,dx,dy]);this._updateVirtualBoundaries(event.shiftKey);if(this._aspectRatio||event.shiftKey)data=this._updateRatio(data,event);data=this._respectSize(data,event);this._updateCache(data);this._propagate("resize",event);if(this.position.top!==prevTop)props.top=this.position.top+"px";if(this.position.left!==prevLeft)props.left=
this.position.left+"px";if(this.size.width!==prevWidth)props.width=this.size.width+"px";if(this.size.height!==prevHeight)props.height=this.size.height+"px";el.css(props);if(!this._helper&&this._proportionallyResizeElements.length)this._proportionallyResize();if(!$.isEmptyObject(props))this._trigger("resize",event,this.ui());return false},_mouseStop:function(event){this.resizing=false;var pr,ista,soffseth,soffsetw,s,left,top,o=this.options,that=this;if(this._helper){pr=this._proportionallyResizeElements;
ista=pr.length&&/textarea/i.test(pr[0].nodeName);soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height;soffsetw=ista?0:that.sizeDiff.width;s={width:that.helper.width()-soffsetw,height:that.helper.height()-soffseth};left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null;top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;if(!o.animate)this.element.css($.extend(s,{top:top,left:left}));that.helper.height(that.size.height);
that.helper.width(that.size.width);if(this._helper&&!o.animate)this._proportionallyResize()}$("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",event);if(this._helper)this.helper.remove();return false},_updateVirtualBoundaries:function(forceAspectRatio){var pMinWidth,pMaxWidth,pMinHeight,pMaxHeight,b,o=this.options;b={minWidth:isNumber(o.minWidth)?o.minWidth:0,maxWidth:isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:isNumber(o.minHeight)?o.minHeight:
0,maxHeight:isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||forceAspectRatio){pMinWidth=b.minHeight*this.aspectRatio;pMinHeight=b.minWidth/this.aspectRatio;pMaxWidth=b.maxHeight*this.aspectRatio;pMaxHeight=b.maxWidth/this.aspectRatio;if(pMinWidth>b.minWidth)b.minWidth=pMinWidth;if(pMinHeight>b.minHeight)b.minHeight=pMinHeight;if(pMaxWidth<b.maxWidth)b.maxWidth=pMaxWidth;if(pMaxHeight<b.maxHeight)b.maxHeight=pMaxHeight}this._vBoundaries=b},_updateCache:function(data){this.offset=
this.helper.offset();if(isNumber(data.left))this.position.left=data.left;if(isNumber(data.top))this.position.top=data.top;if(isNumber(data.height))this.size.height=data.height;if(isNumber(data.width))this.size.width=data.width},_updateRatio:function(data){var cpos=this.position,csize=this.size,a=this.axis;if(isNumber(data.height))data.width=data.height*this.aspectRatio;else if(isNumber(data.width))data.height=data.width/this.aspectRatio;if(a==="sw"){data.left=cpos.left+(csize.width-data.width);data.top=
null}if(a==="nw"){data.top=cpos.top+(csize.height-data.height);data.left=cpos.left+(csize.width-data.width)}return data},_respectSize:function(data){var o=this._vBoundaries,a=this.axis,ismaxw=isNumber(data.width)&&o.maxWidth&&o.maxWidth<data.width,ismaxh=isNumber(data.height)&&o.maxHeight&&o.maxHeight<data.height,isminw=isNumber(data.width)&&o.minWidth&&o.minWidth>data.width,isminh=isNumber(data.height)&&o.minHeight&&o.minHeight>data.height,dw=this.originalPosition.left+this.originalSize.width,dh=
this.position.top+this.size.height,cw=/sw|nw|w/.test(a),ch=/nw|ne|n/.test(a);if(isminw)data.width=o.minWidth;if(isminh)data.height=o.minHeight;if(ismaxw)data.width=o.maxWidth;if(ismaxh)data.height=o.maxHeight;if(isminw&&cw)data.left=dw-o.minWidth;if(ismaxw&&cw)data.left=dw-o.maxWidth;if(isminh&&ch)data.top=dh-o.minHeight;if(ismaxh&&ch)data.top=dh-o.maxHeight;if(!data.width&&!data.height&&!data.left&&data.top)data.top=null;else if(!data.width&&!data.height&&!data.top&&data.left)data.left=null;return data},
_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var i,j,borders,paddings,prel,element=this.helper||this.element;for(i=0;i<this._proportionallyResizeElements.length;i++){prel=this._proportionallyResizeElements[i];if(!this.borderDif){this.borderDif=[];borders=[prel.css("borderTopWidth"),prel.css("borderRightWidth"),prel.css("borderBottomWidth"),prel.css("borderLeftWidth")];paddings=[prel.css("paddingTop"),prel.css("paddingRight"),prel.css("paddingBottom"),prel.css("paddingLeft")];
for(j=0;j<borders.length;j++)this.borderDif[j]=(parseInt(borders[j],10)||0)+(parseInt(paddings[j],10)||0)}prel.css({height:element.height()-this.borderDif[0]-this.borderDif[2]||0,width:element.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var el=this.element,o=this.options;this.elementOffset=el.offset();if(this._helper){this.helper=this.helper||$("<div style='overflow:hidden;'></div>");this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-
1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++o.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(event,dx){return{width:this.originalSize.width+dx}},w:function(event,dx){var cs=this.originalSize,sp=this.originalPosition;return{left:sp.left+dx,width:cs.width-dx}},n:function(event,dx,dy){var cs=this.originalSize,sp=this.originalPosition;return{top:sp.top+dy,height:cs.height-dy}},s:function(event,
dx,dy){return{height:this.originalSize.height+dy}},se:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},sw:function(event,dx,dy){return $.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[event,dx,dy]))},ne:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[event,dx,dy]))},nw:function(event,dx,dy){return $.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[event,dx,dy]))}},_propagate:function(n,event){$.ui.plugin.call(this,n,[event,this.ui()]);n!=="resize"&&this._trigger(n,event,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});$.ui.plugin.add("resizable","animate",{stop:function(event){var that=$(this).data("ui-resizable"),o=that.options,pr=that._proportionallyResizeElements,
ista=pr.length&&/textarea/i.test(pr[0].nodeName),soffseth=ista&&$.ui.hasScroll(pr[0],"left")?0:that.sizeDiff.height,soffsetw=ista?0:that.sizeDiff.width,style={width:that.size.width-soffsetw,height:that.size.height-soffseth},left=parseInt(that.element.css("left"),10)+(that.position.left-that.originalPosition.left)||null,top=parseInt(that.element.css("top"),10)+(that.position.top-that.originalPosition.top)||null;that.element.animate($.extend(style,top&&left?{top:top,left:left}:{}),{duration:o.animateDuration,
easing:o.animateEasing,step:function(){var data={width:parseInt(that.element.css("width"),10),height:parseInt(that.element.css("height"),10),top:parseInt(that.element.css("top"),10),left:parseInt(that.element.css("left"),10)};if(pr&&pr.length)$(pr[0]).css({width:data.width,height:data.height});that._updateCache(data);that._propagate("resize",event)}})}});$.ui.plugin.add("resizable","containment",{start:function(){var element,p,co,ch,cw,width,height,that=$(this).data("ui-resizable"),o=that.options,
el=that.element,oc=o.containment,ce=oc instanceof $?oc.get(0):/parent/.test(oc)?el.parent().get(0):oc;if(!ce)return;that.containerElement=$(ce);if(/document/.test(oc)||oc===document){that.containerOffset={left:0,top:0};that.containerPosition={left:0,top:0};that.parentData={element:$(document),left:0,top:0,width:$(document).width(),height:$(document).height()||document.body.parentNode.scrollHeight}}else{element=$(ce);p=[];$(["Top","Right","Left","Bottom"]).each(function(i,name){p[i]=num(element.css("padding"+
name))});that.containerOffset=element.offset();that.containerPosition=element.position();that.containerSize={height:element.innerHeight()-p[3],width:element.innerWidth()-p[1]};co=that.containerOffset;ch=that.containerSize.height;cw=that.containerSize.width;width=$.ui.hasScroll(ce,"left")?ce.scrollWidth:cw;height=$.ui.hasScroll(ce)?ce.scrollHeight:ch;that.parentData={element:ce,left:co.left,top:co.top,width:width,height:height}}},resize:function(event){var woset,hoset,isParent,isOffsetRelative,that=
$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cp=that.position,pRatio=that._aspectRatio||event.shiftKey,cop={top:0,left:0},ce=that.containerElement;if(ce[0]!==document&&/static/.test(ce.css("position")))cop=co;if(cp.left<(that._helper?co.left:0)){that.size.width=that.size.width+(that._helper?that.position.left-co.left:that.position.left-cop.left);if(pRatio)that.size.height=that.size.width/that.aspectRatio;that.position.left=o.helper?co.left:0}if(cp.top<(that._helper?co.top:0)){that.size.height=
that.size.height+(that._helper?that.position.top-co.top:that.position.top);if(pRatio)that.size.width=that.size.height*that.aspectRatio;that.position.top=that._helper?co.top:0}that.offset.left=that.parentData.left+that.position.left;that.offset.top=that.parentData.top+that.position.top;woset=Math.abs((that._helper?that.offset.left-cop.left:that.offset.left-cop.left)+that.sizeDiff.width);hoset=Math.abs((that._helper?that.offset.top-cop.top:that.offset.top-co.top)+that.sizeDiff.height);isParent=that.containerElement.get(0)===
that.element.parent().get(0);isOffsetRelative=/relative|absolute/.test(that.containerElement.css("position"));if(isParent&&isOffsetRelative)woset-=that.parentData.left;if(woset+that.size.width>=that.parentData.width){that.size.width=that.parentData.width-woset;if(pRatio)that.size.height=that.size.width/that.aspectRatio}if(hoset+that.size.height>=that.parentData.height){that.size.height=that.parentData.height-hoset;if(pRatio)that.size.width=that.size.height*that.aspectRatio}},stop:function(){var that=
$(this).data("ui-resizable"),o=that.options,co=that.containerOffset,cop=that.containerPosition,ce=that.containerElement,helper=$(that.helper),ho=helper.offset(),w=helper.outerWidth()-that.sizeDiff.width,h=helper.outerHeight()-that.sizeDiff.height;if(that._helper&&!o.animate&&/relative/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h});if(that._helper&&!o.animate&&/static/.test(ce.css("position")))$(this).css({left:ho.left-cop.left-co.left,width:w,height:h})}});
$.ui.plugin.add("resizable","alsoResize",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,_store=function(exp){$(exp).each(function(){var el=$(this);el.data("ui-resizable-alsoresize",{width:parseInt(el.width(),10),height:parseInt(el.height(),10),left:parseInt(el.css("left"),10),top:parseInt(el.css("top"),10)})})};if(typeof o.alsoResize==="object"&&!o.alsoResize.parentNode)if(o.alsoResize.length){o.alsoResize=o.alsoResize[0];_store(o.alsoResize)}else $.each(o.alsoResize,function(exp){_store(exp)});
else _store(o.alsoResize)},resize:function(event,ui){var that=$(this).data("ui-resizable"),o=that.options,os=that.originalSize,op=that.originalPosition,delta={height:that.size.height-os.height||0,width:that.size.width-os.width||0,top:that.position.top-op.top||0,left:that.position.left-op.left||0},_alsoResize=function(exp,c){$(exp).each(function(){var el=$(this),start=$(this).data("ui-resizable-alsoresize"),style={},css=c&&c.length?c:el.parents(ui.originalElement[0]).length?["width","height"]:["width",
"height","top","left"];$.each(css,function(i,prop){var sum=(start[prop]||0)+(delta[prop]||0);if(sum&&sum>=0)style[prop]=sum||null});el.css(style)})};if(typeof o.alsoResize==="object"&&!o.alsoResize.nodeType)$.each(o.alsoResize,function(exp,c){_alsoResize(exp,c)});else _alsoResize(o.alsoResize)},stop:function(){$(this).removeData("resizable-alsoresize")}});$.ui.plugin.add("resizable","ghost",{start:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size;that.ghost=that.originalElement.clone();
that.ghost.css({opacity:0.25,display:"block",position:"relative",height:cs.height,width:cs.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof o.ghost==="string"?o.ghost:"");that.ghost.appendTo(that.helper)},resize:function(){var that=$(this).data("ui-resizable");if(that.ghost)that.ghost.css({position:"relative",height:that.size.height,width:that.size.width})},stop:function(){var that=$(this).data("ui-resizable");if(that.ghost&&that.helper)that.helper.get(0).removeChild(that.ghost.get(0))}});
$.ui.plugin.add("resizable","grid",{resize:function(){var that=$(this).data("ui-resizable"),o=that.options,cs=that.size,os=that.originalSize,op=that.originalPosition,a=that.axis,grid=typeof o.grid==="number"?[o.grid,o.grid]:o.grid,gridX=grid[0]||1,gridY=grid[1]||1,ox=Math.round((cs.width-os.width)/gridX)*gridX,oy=Math.round((cs.height-os.height)/gridY)*gridY,newWidth=os.width+ox,newHeight=os.height+oy,isMaxWidth=o.maxWidth&&o.maxWidth<newWidth,isMaxHeight=o.maxHeight&&o.maxHeight<newHeight,isMinWidth=
o.minWidth&&o.minWidth>newWidth,isMinHeight=o.minHeight&&o.minHeight>newHeight;o.grid=grid;if(isMinWidth)newWidth=newWidth+gridX;if(isMinHeight)newHeight=newHeight+gridY;if(isMaxWidth)newWidth=newWidth-gridX;if(isMaxHeight)newHeight=newHeight-gridY;if(/^(se|s|e)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight}else if(/^(ne)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy}else if(/^(sw)$/.test(a)){that.size.width=newWidth;that.size.height=newHeight;
that.position.left=op.left-ox}else{that.size.width=newWidth;that.size.height=newHeight;that.position.top=op.top-oy;that.position.left=op.left-ox}}})})(jQuery);
(function($,undefined){$.widget("ui.selectable",$.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var selectees,that=this;this.element.addClass("ui-selectable");this.dragged=false;this.refresh=function(){selectees=$(that.options.filter,that.element[0]);selectees.addClass("ui-selectee");selectees.each(function(){var $this=$(this),pos=$this.offset();
$.data(this,"selectable-item",{element:this,$element:$this,left:pos.left,top:pos.top,right:pos.left+$this.outerWidth(),bottom:pos.top+$this.outerHeight(),startselected:false,selected:$this.hasClass("ui-selected"),selecting:$this.hasClass("ui-selecting"),unselecting:$this.hasClass("ui-unselecting")})})};this.refresh();this.selectees=selectees.addClass("ui-selectee");this._mouseInit();this.helper=$("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");
this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(event){var that=this,options=this.options;this.opos=[event.pageX,event.pageY];if(this.options.disabled)return;this.selectees=$(options.filter,this.element[0]);this._trigger("start",event);$(options.appendTo).append(this.helper);this.helper.css({"left":event.pageX,"top":event.pageY,"width":0,"height":0});if(options.autoRefresh)this.refresh();this.selectees.filter(".ui-selected").each(function(){var selectee=
$.data(this,"selectable-item");selectee.startselected=true;if(!event.metaKey&&!event.ctrlKey){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element})}});$(event.target).parents().addBack().each(function(){var doSelect,selectee=$.data(this,"selectable-item");if(selectee){doSelect=!event.metaKey&&!event.ctrlKey||!selectee.$element.hasClass("ui-selected");
selectee.$element.removeClass(doSelect?"ui-unselecting":"ui-selected").addClass(doSelect?"ui-selecting":"ui-unselecting");selectee.unselecting=!doSelect;selectee.selecting=doSelect;selectee.selected=doSelect;if(doSelect)that._trigger("selecting",event,{selecting:selectee.element});else that._trigger("unselecting",event,{unselecting:selectee.element});return false}})},_mouseDrag:function(event){this.dragged=true;if(this.options.disabled)return;var tmp,that=this,options=this.options,x1=this.opos[0],
y1=this.opos[1],x2=event.pageX,y2=event.pageY;if(x1>x2){tmp=x2;x2=x1;x1=tmp}if(y1>y2){tmp=y2;y2=y1;y1=tmp}this.helper.css({left:x1,top:y1,width:x2-x1,height:y2-y1});this.selectees.each(function(){var selectee=$.data(this,"selectable-item"),hit=false;if(!selectee||selectee.element===that.element[0])return;if(options.tolerance==="touch")hit=!(selectee.left>x2||selectee.right<x1||selectee.top>y2||selectee.bottom<y1);else if(options.tolerance==="fit")hit=selectee.left>x1&&selectee.right<x2&&selectee.top>
y1&&selectee.bottom<y2;if(hit){if(selectee.selected){selectee.$element.removeClass("ui-selected");selectee.selected=false}if(selectee.unselecting){selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false}if(!selectee.selecting){selectee.$element.addClass("ui-selecting");selectee.selecting=true;that._trigger("selecting",event,{selecting:selectee.element})}}else{if(selectee.selecting)if((event.metaKey||event.ctrlKey)&&selectee.startselected){selectee.$element.removeClass("ui-selecting");
selectee.selecting=false;selectee.$element.addClass("ui-selected");selectee.selected=true}else{selectee.$element.removeClass("ui-selecting");selectee.selecting=false;if(selectee.startselected){selectee.$element.addClass("ui-unselecting");selectee.unselecting=true}that._trigger("unselecting",event,{unselecting:selectee.element})}if(selectee.selected)if(!event.metaKey&&!event.ctrlKey&&!selectee.startselected){selectee.$element.removeClass("ui-selected");selectee.selected=false;selectee.$element.addClass("ui-unselecting");
selectee.unselecting=true;that._trigger("unselecting",event,{unselecting:selectee.element})}}});return false},_mouseStop:function(event){var that=this;this.dragged=false;$(".ui-unselecting",this.element[0]).each(function(){var selectee=$.data(this,"selectable-item");selectee.$element.removeClass("ui-unselecting");selectee.unselecting=false;selectee.startselected=false;that._trigger("unselected",event,{unselected:selectee.element})});$(".ui-selecting",this.element[0]).each(function(){var selectee=
$.data(this,"selectable-item");selectee.$element.removeClass("ui-selecting").addClass("ui-selected");selectee.selecting=false;selectee.selected=true;selectee.startselected=true;that._trigger("selected",event,{selected:selectee.element})});this._trigger("stop",event);this.helper.remove();return false}})})(jQuery);
(function($,undefined){function isOverAxis(x,reference,size){return x>reference&&x<reference+size}$.widget("ui.sortable",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:false,options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,
scope:"default",tolerance:"intersect",zIndex:1E3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var o=this.options;this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?o.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):false;this.offset=this.element.offset();
this._mouseInit();this.ready=true},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var i=this.items.length-1;i>=0;i--)this.items[i].item.removeData(this.widgetName+"-item");return this},_setOption:function(key,value){if(key==="disabled"){this.options[key]=value;this.widget().toggleClass("ui-sortable-disabled",!!value)}else $.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(event,overrideHandle){var currentItem=null,
validHandle=false,that=this;if(this.reverting)return false;if(this.options.disabled||this.options.type==="static")return false;this._refreshItems(event);$(event.target).parents().each(function(){if($.data(this,that.widgetName+"-item")===that){currentItem=$(this);return false}});if($.data(event.target,that.widgetName+"-item")===that)currentItem=$(event.target);if(!currentItem)return false;if(this.options.handle&&!overrideHandle){$(this.options.handle,currentItem).find("*").addBack().each(function(){if(this===
event.target)validHandle=true});if(!validHandle)return false}this.currentItem=currentItem;this._removeCurrentsFromItems();return true},_mouseStart:function(event,overrideHandle,noActivation){var i,o=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(event);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-
this.margins.left};$.extend(this.offset,{click:{left:event.pageX-this.offset.left,top:event.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(event);this.originalPageX=event.pageX;this.originalPageY=event.pageY;o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};
if(this.helper[0]!==this.currentItem[0])this.currentItem.hide();this._createPlaceholder();if(o.containment)this._setContainment();if(o.cursor){if($("body").css("cursor"))this._storedCursor=$("body").css("cursor");$("body").css("cursor",o.cursor)}if(o.opacity){if(this.helper.css("opacity"))this._storedOpacity=this.helper.css("opacity");this.helper.css("opacity",o.opacity)}if(o.zIndex){if(this.helper.css("zIndex"))this._storedZIndex=this.helper.css("zIndex");this.helper.css("zIndex",o.zIndex)}if(this.scrollParent[0]!==
document&&this.scrollParent[0].tagName!=="HTML")this.overflowOffset=this.scrollParent.offset();this._trigger("start",event,this._uiHash());if(!this._preserveHelperProportions)this._cacheHelperProportions();if(!noActivation)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",event,this._uiHash(this));if($.ui.ddmanager)$.ui.ddmanager.current=this;if($.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event);this.dragging=true;this.helper.addClass("ui-sortable-helper");
this._mouseDrag(event);return true},_mouseDrag:function(event){var i,item,itemElement,intersection,o=this.options,scrolled=false;this.position=this._generatePosition(event);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs)this.lastPositionAbs=this.positionAbs;if(this.options.scroll){if(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-event.pageY<o.scrollSensitivity)this.scrollParent[0].scrollTop=
scrolled=this.scrollParent[0].scrollTop+o.scrollSpeed;else if(event.pageY-this.overflowOffset.top<o.scrollSensitivity)this.scrollParent[0].scrollTop=scrolled=this.scrollParent[0].scrollTop-o.scrollSpeed;if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-event.pageX<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft+o.scrollSpeed;else if(event.pageX-this.overflowOffset.left<o.scrollSensitivity)this.scrollParent[0].scrollLeft=scrolled=this.scrollParent[0].scrollLeft-
o.scrollSpeed}else{if(event.pageY-$(document).scrollTop()<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()-o.scrollSpeed);else if($(window).height()-(event.pageY-$(document).scrollTop())<o.scrollSensitivity)scrolled=$(document).scrollTop($(document).scrollTop()+o.scrollSpeed);if(event.pageX-$(document).scrollLeft()<o.scrollSensitivity)scrolled=$(document).scrollLeft($(document).scrollLeft()-o.scrollSpeed);else if($(window).width()-(event.pageX-$(document).scrollLeft())<o.scrollSensitivity)scrolled=
$(document).scrollLeft($(document).scrollLeft()+o.scrollSpeed)}if(scrolled!==false&&$.ui.ddmanager&&!o.dropBehaviour)$.ui.ddmanager.prepareOffsets(this,event)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(i=this.items.length-1;i>=0;i--){item=this.items[i];itemElement=item.item[0];intersection=this._intersectsWithPointer(item);
if(!intersection)continue;if(item.instance!==this.currentContainer)continue;if(itemElement!==this.currentItem[0]&&this.placeholder[intersection===1?"next":"prev"]()[0]!==itemElement&&!$.contains(this.placeholder[0],itemElement)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],itemElement):true)){this.direction=intersection===1?"down":"up";if(this.options.tolerance==="pointer"||this._intersectsWithSides(item))this._rearrange(event,item);else break;this._trigger("change",event,this._uiHash());
break}}this._contactContainers(event);if($.ui.ddmanager)$.ui.ddmanager.drag(this,event);this._trigger("sort",event,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(event,noPropagation){if(!event)return;if($.ui.ddmanager&&!this.options.dropBehaviour)$.ui.ddmanager.drop(this,event);if(this.options.revert){var that=this,cur=this.placeholder.offset();this.reverting=true;$(this.helper).animate({left:cur.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===
document.body?0:this.offsetParent[0].scrollLeft),top:cur.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){that._clear(event)})}else this._clear(event,noPropagation);return false},cancel:function(){if(this.dragging){this._mouseUp({target:null});if(this.options.helper==="original")this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");else this.currentItem.show();for(var i=
this.containers.length-1;i>=0;i--){this.containers[i]._trigger("deactivate",null,this._uiHash(this));if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",null,this._uiHash(this));this.containers[i].containerCache.over=0}}}if(this.placeholder){if(this.placeholder[0].parentNode)this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode)this.helper.remove();$.extend(this,{helper:null,dragging:false,
reverting:false,_noFinalSort:null});if(this.domPosition.prev)$(this.domPosition.prev).after(this.currentItem);else $(this.domPosition.parent).prepend(this.currentItem)}return this},serialize:function(o){var items=this._getItemsAsjQuery(o&&o.connected),str=[];o=o||{};$(items).each(function(){var res=($(o.item||this).attr(o.attribute||"id")||"").match(o.expression||/(.+)[\-=_](.+)/);if(res)str.push((o.key||res[1]+"[]")+"="+(o.key&&o.expression?res[1]:res[2]))});if(!str.length&&o.key)str.push(o.key+
"=");return str.join("&")},toArray:function(o){var items=this._getItemsAsjQuery(o&&o.connected),ret=[];o=o||{};items.each(function(){ret.push($(o.item||this).attr(o.attribute||"id")||"")});return ret},_intersectsWith:function(item){var x1=this.positionAbs.left,x2=x1+this.helperProportions.width,y1=this.positionAbs.top,y2=y1+this.helperProportions.height,l=item.left,r=l+item.width,t=item.top,b=t+item.height,dyClick=this.offset.click.top,dxClick=this.offset.click.left,isOverElement=y1+dyClick>t&&y1+
dyClick<b&&x1+dxClick>l&&x1+dxClick<r;if(this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>item[this.floating?"width":"height"])return isOverElement;else return l<x1+this.helperProportions.width/2&&x2-this.helperProportions.width/2<r&&t<y1+this.helperProportions.height/2&&y2-this.helperProportions.height/2<b},_intersectsWithPointer:function(item){var isOverElementHeight=this.options.axis===
"x"||isOverAxis(this.positionAbs.top+this.offset.click.top,item.top,item.height),isOverElementWidth=this.options.axis==="y"||isOverAxis(this.positionAbs.left+this.offset.click.left,item.left,item.width),isOverElement=isOverElementHeight&&isOverElementWidth,verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(!isOverElement)return false;return this.floating?horizontalDirection&&horizontalDirection==="right"||verticalDirection==="down"?2:1:verticalDirection&&
(verticalDirection==="down"?2:1)},_intersectsWithSides:function(item){var isOverBottomHalf=isOverAxis(this.positionAbs.top+this.offset.click.top,item.top+item.height/2,item.height),isOverRightHalf=isOverAxis(this.positionAbs.left+this.offset.click.left,item.left+item.width/2,item.width),verticalDirection=this._getDragVerticalDirection(),horizontalDirection=this._getDragHorizontalDirection();if(this.floating&&horizontalDirection)return horizontalDirection==="right"&&isOverRightHalf||horizontalDirection===
"left"&&!isOverRightHalf;else return verticalDirection&&(verticalDirection==="down"&&isOverBottomHalf||verticalDirection==="up"&&!isOverBottomHalf)},_getDragVerticalDirection:function(){var delta=this.positionAbs.top-this.lastPositionAbs.top;return delta!==0&&(delta>0?"down":"up")},_getDragHorizontalDirection:function(){var delta=this.positionAbs.left-this.lastPositionAbs.left;return delta!==0&&(delta>0?"right":"left")},refresh:function(event){this._refreshItems(event);this.refreshPositions();return this},
_connectWith:function(){var options=this.options;return options.connectWith.constructor===String?[options.connectWith]:options.connectWith},_getItemsAsjQuery:function(connected){var i,j,cur,inst,items=[],queries=[],connectWith=this._connectWith();if(connectWith&&connected)for(i=connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled)queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element):
$(inst.options.items,inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),inst])}}queries.push([$.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):$(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(i=queries.length-1;i>=0;i--)queries[i][0].each(function(){items.push(this)});return $(items)},_removeCurrentsFromItems:function(){var list=this.currentItem.find(":data("+
this.widgetName+"-item)");this.items=$.grep(this.items,function(item){for(var j=0;j<list.length;j++)if(list[j]===item.item[0])return false;return true})},_refreshItems:function(event){this.items=[];this.containers=[this];var i,j,cur,inst,targetData,_queries,item,queriesLength,items=this.items,queries=[[$.isFunction(this.options.items)?this.options.items.call(this.element[0],event,{item:this.currentItem}):$(this.options.items,this.element),this]],connectWith=this._connectWith();if(connectWith&&this.ready)for(i=
connectWith.length-1;i>=0;i--){cur=$(connectWith[i]);for(j=cur.length-1;j>=0;j--){inst=$.data(cur[j],this.widgetFullName);if(inst&&inst!==this&&!inst.options.disabled){queries.push([$.isFunction(inst.options.items)?inst.options.items.call(inst.element[0],event,{item:this.currentItem}):$(inst.options.items,inst.element),inst]);this.containers.push(inst)}}}for(i=queries.length-1;i>=0;i--){targetData=queries[i][1];_queries=queries[i][0];for(j=0,queriesLength=_queries.length;j<queriesLength;j++){item=
$(_queries[j]);item.data(this.widgetName+"-item",targetData);items.push({item:item,instance:targetData,width:0,height:0,left:0,top:0})}}},refreshPositions:function(fast){if(this.offsetParent&&this.helper)this.offset.parent=this._getParentOffset();var i,item,t,p;for(i=this.items.length-1;i>=0;i--){item=this.items[i];if(item.instance!==this.currentContainer&&this.currentContainer&&item.item[0]!==this.currentItem[0])continue;t=this.options.toleranceElement?$(this.options.toleranceElement,item.item):
item.item;if(!fast){item.width=t.outerWidth();item.height=t.outerHeight()}p=t.offset();item.left=p.left;item.top=p.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--){p=this.containers[i].element.offset();this.containers[i].containerCache.left=p.left;this.containers[i].containerCache.top=p.top;this.containers[i].containerCache.width=this.containers[i].element.outerWidth();this.containers[i].containerCache.height=
this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(that){that=that||this;var className,o=that.options;if(!o.placeholder||o.placeholder.constructor===String){className=o.placeholder;o.placeholder={element:function(){var el=$(document.createElement(that.currentItem[0].nodeName)).addClass(className||that.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!className)el.style.visibility="hidden";return el},update:function(container,
p){if(className&&!o.forcePlaceholderSize)return;if(!p.height())p.height(that.currentItem.innerHeight()-parseInt(that.currentItem.css("paddingTop")||0,10)-parseInt(that.currentItem.css("paddingBottom")||0,10));if(!p.width())p.width(that.currentItem.innerWidth()-parseInt(that.currentItem.css("paddingLeft")||0,10)-parseInt(that.currentItem.css("paddingRight")||0,10))}}}that.placeholder=$(o.placeholder.element.call(that.element,that.currentItem));that.currentItem.after(that.placeholder);o.placeholder.update(that,
that.placeholder)},_contactContainers:function(event){var i,j,dist,itemWithLeastDistance,posProperty,sizeProperty,base,cur,nearBottom,innermostContainer=null,innermostIndex=null;for(i=this.containers.length-1;i>=0;i--){if($.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(innermostContainer&&$.contains(this.containers[i].element[0],innermostContainer.element[0]))continue;innermostContainer=this.containers[i];innermostIndex=
i}else if(this.containers[i].containerCache.over){this.containers[i]._trigger("out",event,this._uiHash(this));this.containers[i].containerCache.over=0}}if(!innermostContainer)return;if(this.containers.length===1){this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}else{dist=1E4;itemWithLeastDistance=null;posProperty=this.containers[innermostIndex].floating?"left":"top";sizeProperty=this.containers[innermostIndex].floating?
"width":"height";base=this.positionAbs[posProperty]+this.offset.click[posProperty];for(j=this.items.length-1;j>=0;j--){if(!$.contains(this.containers[innermostIndex].element[0],this.items[j].item[0]))continue;if(this.items[j].item[0]===this.currentItem[0])continue;cur=this.items[j].item.offset()[posProperty];nearBottom=false;if(Math.abs(cur-base)>Math.abs(cur+this.items[j][sizeProperty]-base)){nearBottom=true;cur+=this.items[j][sizeProperty]}if(Math.abs(cur-base)<dist){dist=Math.abs(cur-base);itemWithLeastDistance=
this.items[j];this.direction=nearBottom?"up":"down"}}if(!itemWithLeastDistance&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[innermostIndex];itemWithLeastDistance?this._rearrange(event,itemWithLeastDistance,null,true):this._rearrange(event,null,this.containers[innermostIndex].element,true);this._trigger("change",event,this._uiHash());this.containers[innermostIndex]._trigger("change",event,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);
this.containers[innermostIndex]._trigger("over",event,this._uiHash(this));this.containers[innermostIndex].containerCache.over=1}},_createHelper:function(event){var o=this.options,helper=$.isFunction(o.helper)?$(o.helper.apply(this.element[0],[event,this.currentItem])):o.helper==="clone"?this.currentItem.clone():this.currentItem;if(!helper.parents("body").length)$(o.appendTo!=="parent"?o.appendTo:this.currentItem[0].parentNode)[0].appendChild(helper[0]);if(helper[0]===this.currentItem[0])this._storedCSS=
{width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")};if(!helper[0].style.width||o.forceHelperSize)helper.width(this.currentItem.width());if(!helper[0].style.height||o.forceHelperSize)helper.height(this.currentItem.height());return helper},_adjustOffsetFromHelper:function(obj){if(typeof obj==="string")obj=obj.split(" ");if($.isArray(obj))obj={left:+obj[0],top:+obj[1]||
0};if("left"in obj)this.offset.click.left=obj.left+this.margins.left;if("right"in obj)this.offset.click.left=this.helperProportions.width-obj.right+this.margins.left;if("top"in obj)this.offset.click.top=obj.top+this.margins.top;if("bottom"in obj)this.offset.click.top=this.helperProportions.height-obj.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var po=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&
$.contains(this.scrollParent[0],this.offsetParent[0])){po.left+=this.scrollParent.scrollLeft();po.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&$.ui.ie)po={top:0,left:0};return{top:po.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:po.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var p=
this.currentItem.position();return{top:p.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:p.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},
_setContainment:function(){var ce,co,over,o=this.options;if(o.containment==="parent")o.containment=this.helper[0].parentNode;if(o.containment==="document"||o.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,$(o.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,($(o.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-
this.margins.top];if(!/^(document|window|parent)$/.test(o.containment)){ce=$(o.containment)[0];co=$(o.containment).offset();over=$(ce).css("overflow")!=="hidden";this.containment=[co.left+(parseInt($(ce).css("borderLeftWidth"),10)||0)+(parseInt($(ce).css("paddingLeft"),10)||0)-this.margins.left,co.top+(parseInt($(ce).css("borderTopWidth"),10)||0)+(parseInt($(ce).css("paddingTop"),10)||0)-this.margins.top,co.left+(over?Math.max(ce.scrollWidth,ce.offsetWidth):ce.offsetWidth)-(parseInt($(ce).css("borderLeftWidth"),
10)||0)-(parseInt($(ce).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,co.top+(over?Math.max(ce.scrollHeight,ce.offsetHeight):ce.offsetHeight)-(parseInt($(ce).css("borderTopWidth"),10)||0)-(parseInt($(ce).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(d,pos){if(!pos)pos=this.position;var mod=d==="absolute"?1:-1,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],
this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);return{top:pos.top+this.offset.relative.top*mod+this.offset.parent.top*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop())*mod,left:pos.left+this.offset.relative.left*mod+this.offset.parent.left*mod-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())*mod}},_generatePosition:function(event){var top,
left,o=this.options,pageX=event.pageX,pageY=event.pageY,scroll=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&$.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,scrollIsRootNode=/(html|body)/i.test(scroll[0].tagName);if(this.cssPosition==="relative"&&!(this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]))this.offset.relative=this._getRelativeOffset();if(this.originalPosition){if(this.containment){if(event.pageX-this.offset.click.left<
this.containment[0])pageX=this.containment[0]+this.offset.click.left;if(event.pageY-this.offset.click.top<this.containment[1])pageY=this.containment[1]+this.offset.click.top;if(event.pageX-this.offset.click.left>this.containment[2])pageX=this.containment[2]+this.offset.click.left;if(event.pageY-this.offset.click.top>this.containment[3])pageY=this.containment[3]+this.offset.click.top}if(o.grid){top=this.originalPageY+Math.round((pageY-this.originalPageY)/o.grid[1])*o.grid[1];pageY=this.containment?
top-this.offset.click.top>=this.containment[1]&&top-this.offset.click.top<=this.containment[3]?top:top-this.offset.click.top>=this.containment[1]?top-o.grid[1]:top+o.grid[1]:top;left=this.originalPageX+Math.round((pageX-this.originalPageX)/o.grid[0])*o.grid[0];pageX=this.containment?left-this.offset.click.left>=this.containment[0]&&left-this.offset.click.left<=this.containment[2]?left:left-this.offset.click.left>=this.containment[0]?left-o.grid[0]:left+o.grid[0]:left}}return{top:pageY-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():scrollIsRootNode?0:scroll.scrollTop()),left:pageX-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():scrollIsRootNode?0:scroll.scrollLeft())}},_rearrange:function(event,i,a,hardRefresh){a?a[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?i.item[0]:
i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var counter=this.counter;this._delay(function(){if(counter===this.counter)this.refreshPositions(!hardRefresh)})},_clear:function(event,noPropagation){this.reverting=false;var i,delayedTriggers=[];if(!this._noFinalSort&&this.currentItem.parent().length)this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)if(this._storedCSS[i]==="auto"||this._storedCSS[i]===
"static")this._storedCSS[i]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!noPropagation)delayedTriggers.push(function(event){this._trigger("receive",event,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!noPropagation)delayedTriggers.push(function(event){this._trigger("update",
event,this._uiHash())});if(this!==this.currentContainer)if(!noPropagation){delayedTriggers.push(function(event){this._trigger("remove",event,this._uiHash())});delayedTriggers.push(function(c){return function(event){c._trigger("receive",event,this._uiHash(this))}}.call(this,this.currentContainer));delayedTriggers.push(function(c){return function(event){c._trigger("update",event,this._uiHash(this))}}.call(this,this.currentContainer))}for(i=this.containers.length-1;i>=0;i--){if(!noPropagation)delayedTriggers.push(function(c){return function(event){c._trigger("deactivate",
event,this._uiHash(this))}}.call(this,this.containers[i]));if(this.containers[i].containerCache.over){delayedTriggers.push(function(c){return function(event){c._trigger("out",event,this._uiHash(this))}}.call(this,this.containers[i]));this.containers[i].containerCache.over=0}}if(this._storedCursor)$("body").css("cursor",this._storedCursor);if(this._storedOpacity)this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex)this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex);
this.dragging=false;if(this.cancelHelperRemoval){if(!noPropagation){this._trigger("beforeStop",event,this._uiHash());for(i=0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=false;return false}if(!noPropagation)this._trigger("beforeStop",event,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);if(this.helper[0]!==this.currentItem[0])this.helper.remove();this.helper=null;if(!noPropagation){for(i=
0;i<delayedTriggers.length;i++)delayedTriggers[i].call(this,event);this._trigger("stop",event,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){if($.Widget.prototype._trigger.apply(this,arguments)===false)this.cancel()},_uiHash:function(_inst){var inst=_inst||this;return{helper:inst.helper,placeholder:inst.placeholder||$([]),position:inst.position,originalPosition:inst.originalPosition,offset:inst.positionAbs,item:inst.currentItem,sender:_inst?_inst.element:null}}})})(jQuery);
(function($,undefined){var uid=0,hideProps={},showProps={};hideProps.height=hideProps.paddingTop=hideProps.paddingBottom=hideProps.borderTopWidth=hideProps.borderBottomWidth="hide";showProps.height=showProps.paddingTop=showProps.paddingBottom=showProps.borderTopWidth=showProps.borderBottomWidth="show";$.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:false,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",
header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var options=this.options;this.prevShow=this.prevHide=$();this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist");if(!options.collapsible&&(options.active===false||options.active==null))options.active=0;this._processPanels();if(options.active<0)options.active+=this.headers.length;this._refresh()},_getCreateEventData:function(){return{header:this.active,content:!this.active.length?$():
this.active.next()}},_createIcons:function(){var icons=this.options.icons;if(icons){$("<span>").addClass("ui-accordion-header-icon ui-icon "+icons.header).prependTo(this.headers);this.active.children(".ui-accordion-header-icon").removeClass(icons.header).addClass(icons.activeHeader);this.headers.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var contents;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");
this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){if(/^ui-accordion/.test(this.id))this.removeAttribute("id")});this._destroyIcons();contents=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){if(/^ui-accordion/.test(this.id))this.removeAttribute("id")});
if(this.options.heightStyle!=="content")contents.css("height","")},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="event"){if(this.options.event)this._off(this.headers,this.options.event);this._setupEvents(value)}this._super(key,value);if(key==="collapsible"&&!value&&this.options.active===false)this._activate(0);if(key==="icons"){this._destroyIcons();if(value)this._createIcons()}if(key==="disabled")this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",
!!value)},_keydown:function(event){if(event.altKey||event.ctrlKey)return;var keyCode=$.ui.keyCode,length=this.headers.length,currentIndex=this.headers.index(event.target),toFocus=false;switch(event.keyCode){case keyCode.RIGHT:case keyCode.DOWN:toFocus=this.headers[(currentIndex+1)%length];break;case keyCode.LEFT:case keyCode.UP:toFocus=this.headers[(currentIndex-1+length)%length];break;case keyCode.SPACE:case keyCode.ENTER:this._eventHandler(event);break;case keyCode.HOME:toFocus=this.headers[0];
break;case keyCode.END:toFocus=this.headers[length-1];break}if(toFocus){$(event.target).attr("tabIndex",-1);$(toFocus).attr("tabIndex",0);toFocus.focus();event.preventDefault()}},_panelKeyDown:function(event){if(event.keyCode===$.ui.keyCode.UP&&event.ctrlKey)$(event.currentTarget).prev().focus()},refresh:function(){var options=this.options;this._processPanels();if(options.active===false&&options.collapsible===true||!this.headers.length){options.active=false;this.active=$()}if(options.active===false)this._activate(0);
else if(this.active.length&&!$.contains(this.element[0],this.active[0]))if(this.headers.length===this.headers.find(".ui-state-disabled").length){options.active=false;this.active=$()}else this._activate(Math.max(0,options.active-1));else options.active=this.headers.index(this.active);this._destroyIcons();this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},
_refresh:function(){var maxHeight,options=this.options,heightStyle=options.heightStyle,parent=this.element.parent(),accordionId=this.accordionId="ui-accordion-"+(this.element.attr("id")||++uid);this.active=this._findActive(options.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this.headers.attr("role","tab").each(function(i){var header=$(this),headerId=header.attr("id"),panel=
header.next(),panelId=panel.attr("id");if(!headerId){headerId=accordionId+"-header-"+i;header.attr("id",headerId)}if(!panelId){panelId=accordionId+"-panel-"+i;panel.attr("id",panelId)}header.attr("aria-controls",panelId);panel.attr("aria-labelledby",headerId)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();if(!this.active.length)this.headers.eq(0).attr("tabIndex",0);else this.active.attr({"aria-selected":"true",
tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"});this._createIcons();this._setupEvents(options.event);if(heightStyle==="fill"){maxHeight=parent.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position==="fixed")return;maxHeight-=elem.outerHeight(true)});this.headers.each(function(){maxHeight-=$(this).outerHeight(true)});this.headers.next().each(function(){$(this).height(Math.max(0,maxHeight-
$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(heightStyle==="auto"){maxHeight=0;this.headers.next().each(function(){maxHeight=Math.max(maxHeight,$(this).css("height","").height())}).height(maxHeight)}},_activate:function(index){var active=this._findActive(index)[0];if(active===this.active[0])return;active=active||this.active[0];this._eventHandler({target:active,currentTarget:active,preventDefault:$.noop})},_findActive:function(selector){return typeof selector==="number"?
this.headers.eq(selector):$()},_setupEvents:function(event){var events={keydown:"_keydown"};if(event)$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"});this._off(this.headers.add(this.headers.next()));this._on(this.headers,events);this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._hoverable(this.headers);this._focusable(this.headers)},_eventHandler:function(event){var options=this.options,active=this.active,clicked=$(event.currentTarget),clickedIsActive=
clicked[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():clicked.next(),toHide=active.next(),eventData={oldHeader:active,oldPanel:toHide,newHeader:collapsing?$():clicked,newPanel:toShow};event.preventDefault();if(clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",event,eventData)===false)return;options.active=collapsing?false:this.headers.index(clicked);this.active=clickedIsActive?$():clicked;this._toggle(eventData);active.removeClass("ui-accordion-header-active ui-state-active");
if(options.icons)active.children(".ui-accordion-header-icon").removeClass(options.icons.activeHeader).addClass(options.icons.header);if(!clickedIsActive){clicked.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top");if(options.icons)clicked.children(".ui-accordion-header-icon").removeClass(options.icons.header).addClass(options.icons.activeHeader);clicked.next().addClass("ui-accordion-content-active")}},_toggle:function(data){var toShow=data.newPanel,toHide=
this.prevShow.length?this.prevShow:data.oldPanel;this.prevShow.add(this.prevHide).stop(true,true);this.prevShow=toShow;this.prevHide=toHide;if(this.options.animate)this._animate(toShow,toHide,data);else{toHide.hide();toShow.show();this._toggleComplete(data)}toHide.attr({"aria-expanded":"false","aria-hidden":"true"});toHide.prev().attr("aria-selected","false");if(toShow.length&&toHide.length)toHide.prev().attr("tabIndex",-1);else if(toShow.length)this.headers.filter(function(){return $(this).attr("tabIndex")===
0}).attr("tabIndex",-1);toShow.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(toShow,toHide,data){var total,easing,duration,that=this,adjust=0,down=toShow.length&&(!toHide.length||toShow.index()<toHide.index()),animate=this.options.animate||{},options=down&&animate.down||animate,complete=function(){that._toggleComplete(data)};if(typeof options==="number")duration=options;if(typeof options==="string")easing=options;easing=easing||
options.easing||animate.easing;duration=duration||options.duration||animate.duration;if(!toHide.length)return toShow.animate(showProps,duration,easing,complete);if(!toShow.length)return toHide.animate(hideProps,duration,easing,complete);total=toShow.show().outerHeight();toHide.animate(hideProps,{duration:duration,easing:easing,step:function(now,fx){fx.now=Math.round(now)}});toShow.hide().animate(showProps,{duration:duration,easing:easing,complete:complete,step:function(now,fx){fx.now=Math.round(now);
if(fx.prop!=="height")adjust+=fx.now;else if(that.options.heightStyle!=="content"){fx.now=Math.round(total-toHide.outerHeight()-adjust);adjust=0}}})},_toggleComplete:function(data){var toHide=data.oldPanel;toHide.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");if(toHide.length)toHide.parent()[0].className=toHide.parent()[0].className;this._trigger("activate",null,data)}})})(jQuery);
(function($,undefined){var requestIndex=0;$.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var suppressKeyPress,suppressKeyPressRepeat,suppressInput;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?
"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(event){if(this.element.prop("readOnly")){suppressKeyPress=true;suppressInput=true;suppressKeyPressRepeat=true;return}suppressKeyPress=false;suppressInput=false;suppressKeyPressRepeat=false;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:suppressKeyPress=true;this._move("previousPage",event);break;case keyCode.PAGE_DOWN:suppressKeyPress=
true;this._move("nextPage",event);break;case keyCode.UP:suppressKeyPress=true;this._keyEvent("previous",event);break;case keyCode.DOWN:suppressKeyPress=true;this._keyEvent("next",event);break;case keyCode.ENTER:case keyCode.NUMPAD_ENTER:if(this.menu.active){suppressKeyPress=true;event.preventDefault();this.menu.select(event)}break;case keyCode.TAB:if(this.menu.active)this.menu.select(event);break;case keyCode.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(event);event.preventDefault()}break;
default:suppressKeyPressRepeat=true;this._searchTimeout(event);break}},keypress:function(event){if(suppressKeyPress){suppressKeyPress=false;event.preventDefault();return}if(suppressKeyPressRepeat)return;var keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.PAGE_UP:this._move("previousPage",event);break;case keyCode.PAGE_DOWN:this._move("nextPage",event);break;case keyCode.UP:this._keyEvent("previous",event);break;case keyCode.DOWN:this._keyEvent("next",event);break}},input:function(event){if(suppressInput){suppressInput=
false;event.preventDefault();return}this._searchTimeout(event)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(event);this._change(event)}});this._initSource();this.menu=$("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:$(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(event){event.preventDefault();
this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var menuElement=this.menu.element[0];if(!$(event.target).closest(".ui-menu-item").length)this._delay(function(){var that=this;this.document.one("mousedown",function(event){if(event.target!==that.element[0]&&event.target!==menuElement&&!$.contains(menuElement,event.target))that.close()})})},menufocus:function(event,ui){if(this.isNewMenu){this.isNewMenu=false;if(event.originalEvent&&/^mouse/.test(event.originalEvent.type)){this.menu.blur();
this.document.one("mousemove",function(){$(event.target).trigger(event.originalEvent)});return}}var item=ui.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",event,{item:item})){if(event.originalEvent&&/^key/.test(event.originalEvent.type))this._value(item.value)}else this.liveRegion.text(item.value)},menuselect:function(event,ui){var item=ui.item.data("ui-autocomplete-item"),previous=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=
previous;this._delay(function(){this.previous=previous;this.selectedItem=item})}if(false!==this._trigger("select",event,{item:item}))this._value(item.value);this.term=this._value();this.close(event);this.selectedItem=item}});this.liveRegion=$("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");
this.menu.element.remove();this.liveRegion.remove()},_setOption:function(key,value){this._super(key,value);if(key==="source")this._initSource();if(key==="appendTo")this.menu.element.appendTo(this._appendTo());if(key==="disabled"&&value&&this.xhr)this.xhr.abort()},_appendTo:function(){var element=this.options.appendTo;if(element)element=element.jquery||element.nodeType?$(element):this.document.find(element).eq(0);if(!element)element=this.element.closest(".ui-front");if(!element.length)element=this.document[0].body;
return element},_isMultiLine:function(){if(this.element.is("textarea"))return true;if(this.element.is("input"))return false;return this.element.prop("isContentEditable")},_initSource:function(){var array,url,that=this;if($.isArray(this.options.source)){array=this.options.source;this.source=function(request,response){response($.ui.autocomplete.filter(array,request.term))}}else if(typeof this.options.source==="string"){url=this.options.source;this.source=function(request,response){if(that.xhr)that.xhr.abort();
that.xhr=$.ajax({url:url,data:request,dataType:"json",success:function(data){response(data)},error:function(){response([])}})}}else this.source=this.options.source},_searchTimeout:function(event){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,event)}},this.options.delay)},search:function(value,event){value=value!=null?value:this._value();this.term=this._value();if(value.length<this.options.minLength)return this.close(event);
if(this._trigger("search",event)===false)return;return this._search(value)},_search:function(value){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:value},this._response())},_response:function(){var that=this,index=++requestIndex;return function(content){if(index===requestIndex)that.__response(content);that.pending--;if(!that.pending)that.element.removeClass("ui-autocomplete-loading")}},__response:function(content){if(content)content=this._normalize(content);
this._trigger("response",null,{content:content});if(!this.options.disabled&&content&&content.length&&!this.cancelSearch){this._suggest(content);this._trigger("open")}else this._close()},close:function(event){this.cancelSearch=true;this._close(event)},_close:function(event){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",event)}},_change:function(event){if(this.previous!==this._value())this._trigger("change",event,{item:this.selectedItem})},
_normalize:function(items){if(items.length&&items[0].label&&items[0].value)return items;return $.map(items,function(item){if(typeof item==="string")return{label:item,value:item};return $.extend({label:item.label||item.value,value:item.value||item.label},item)})},_suggest:function(items){var ul=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(ul,items);this.menu.refresh();ul.show();this._resizeMenu();ul.position($.extend({of:this.element},this.options.position));if(this.options.autoFocus)this.menu.next()},
_resizeMenu:function(){var ul=this.menu.element;ul.outerWidth(Math.max(ul.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(ul,items){var that=this;$.each(items,function(index,item){that._renderItemData(ul,item)})},_renderItemData:function(ul,item){return this._renderItem(ul,item).data("ui-autocomplete-item",item)},_renderItem:function(ul,item){return $("<li>").append($("<a>").text(item.label)).appendTo(ul)},_move:function(direction,event){if(!this.menu.element.is(":visible")){this.search(null,
event);return}if(this.menu.isFirstItem()&&/^previous/.test(direction)||this.menu.isLastItem()&&/^next/.test(direction)){this._value(this.term);this.menu.blur();return}this.menu[direction](event)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(keyEvent,event){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(keyEvent,event);event.preventDefault()}}});$.extend($.ui.autocomplete,{escapeRegex:function(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")},filter:function(array,term){var matcher=new RegExp($.ui.autocomplete.escapeRegex(term),"i");return $.grep(array,function(value){return matcher.test(value.label||value.value||value)})}});$.widget("ui.autocomplete",$.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(amount){return amount+(amount>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(content){var message;this._superApply(arguments);if(this.options.disabled||
this.cancelSearch)return;if(content&&content.length)message=this.options.messages.results(content.length);else message=this.options.messages.noResults;this.liveRegion.text(message)}})})(jQuery);
(function($,undefined){var lastActive,startXPos,startYPos,clickDragged,baseClasses="ui-button ui-widget ui-state-default ui-corner-all",stateClasses="ui-state-hover ui-state-active ",typeClasses="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",formResetHandler=function(){var buttons=$(this).find(":ui-button");setTimeout(function(){buttons.button("refresh")},1)},radioGroup=function(radio){var name=radio.name,
form=radio.form,radios=$([]);if(name){name=name.replace(/'/g,"\\'");if(form)radios=$(form).find("[name='"+name+"']");else radios=$("[name='"+name+"']",radio.ownerDocument).filter(function(){return!this.form})}return radios};$.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,formResetHandler);
if(typeof this.options.disabled!=="boolean")this.options.disabled=!!this.element.prop("disabled");else this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var that=this,options=this.options,toggleButton=this.type==="checkbox"||this.type==="radio",activeClass=!toggleButton?"ui-state-active":"",focusClass="ui-state-focus";if(options.label===null)options.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html();
this._hoverable(this.buttonElement);this.buttonElement.addClass(baseClasses).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(options.disabled)return;if(this===lastActive)$(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(options.disabled)return;$(this).removeClass(activeClass)}).bind("click"+this.eventNamespace,function(event){if(options.disabled){event.preventDefault();event.stopImmediatePropagation()}});this.element.bind("focus"+this.eventNamespace,
function(){that.buttonElement.addClass(focusClass)}).bind("blur"+this.eventNamespace,function(){that.buttonElement.removeClass(focusClass)});if(toggleButton){this.element.bind("change"+this.eventNamespace,function(){if(clickDragged)return;that.refresh()});this.buttonElement.bind("mousedown"+this.eventNamespace,function(event){if(options.disabled)return;clickDragged=false;startXPos=event.pageX;startYPos=event.pageY}).bind("mouseup"+this.eventNamespace,function(event){if(options.disabled)return;if(startXPos!==
event.pageX||startYPos!==event.pageY)clickDragged=true})}if(this.type==="checkbox")this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return false});else if(this.type==="radio")this.buttonElement.bind("click"+this.eventNamespace,function(){if(options.disabled||clickDragged)return false;$(this).addClass("ui-state-active");that.buttonElement.attr("aria-pressed","true");var radio=that.element[0];radioGroup(radio).not(radio).map(function(){return $(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",
"false")});else{this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(options.disabled)return false;$(this).addClass("ui-state-active");lastActive=this;that.document.one("mouseup",function(){lastActive=null})}).bind("mouseup"+this.eventNamespace,function(){if(options.disabled)return false;$(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(event){if(options.disabled)return false;if(event.keyCode===$.ui.keyCode.SPACE||event.keyCode===$.ui.keyCode.ENTER)$(this).addClass("ui-state-active")}).bind("keyup"+
this.eventNamespace+" blur"+this.eventNamespace,function(){$(this).removeClass("ui-state-active")});if(this.buttonElement.is("a"))this.buttonElement.keyup(function(event){if(event.keyCode===$.ui.keyCode.SPACE)$(this).click()})}this._setOption("disabled",options.disabled);this._resetButton()},_determineButtonType:function(){var ancestor,labelSelector,checked;if(this.element.is("[type=checkbox]"))this.type="checkbox";else if(this.element.is("[type=radio]"))this.type="radio";else if(this.element.is("input"))this.type=
"input";else this.type="button";if(this.type==="checkbox"||this.type==="radio"){ancestor=this.element.parents().last();labelSelector="label[for='"+this.element.attr("id")+"']";this.buttonElement=ancestor.find(labelSelector);if(!this.buttonElement.length){ancestor=ancestor.length?ancestor.siblings():this.element.siblings();this.buttonElement=ancestor.filter(labelSelector);if(!this.buttonElement.length)this.buttonElement=ancestor.find(labelSelector)}this.element.addClass("ui-helper-hidden-accessible");
checked=this.element.is(":checked");if(checked)this.buttonElement.addClass("ui-state-active");this.buttonElement.prop("aria-pressed",checked)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass(baseClasses+" "+stateClasses+" "+typeClasses).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());if(!this.hasTitle)this.buttonElement.removeAttr("title")},
_setOption:function(key,value){this._super(key,value);if(key==="disabled"){if(value)this.element.prop("disabled",true);else this.element.prop("disabled",false);return}this._resetButton()},refresh:function(){var isDisabled=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");if(isDisabled!==this.options.disabled)this._setOption("disabled",isDisabled);if(this.type==="radio")radioGroup(this.element[0]).each(function(){if($(this).is(":checked"))$(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true");else $(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")});else if(this.type==="checkbox")if(this.element.is(":checked"))this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true");else this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false")},_resetButton:function(){if(this.type==="input"){if(this.options.label)this.element.val(this.options.label);return}var buttonElement=this.buttonElement.removeClass(typeClasses),buttonText=
$("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(buttonElement.empty()).text(),icons=this.options.icons,multipleIcons=icons.primary&&icons.secondary,buttonClasses=[];if(icons.primary||icons.secondary){if(this.options.text)buttonClasses.push("ui-button-text-icon"+(multipleIcons?"s":icons.primary?"-primary":"-secondary"));if(icons.primary)buttonElement.prepend("<span class='ui-button-icon-primary ui-icon "+icons.primary+"'></span>");if(icons.secondary)buttonElement.append("<span class='ui-button-icon-secondary ui-icon "+
icons.secondary+"'></span>");if(!this.options.text){buttonClasses.push(multipleIcons?"ui-button-icons-only":"ui-button-icon-only");if(!this.hasTitle)buttonElement.attr("title",$.trim(buttonText))}}else buttonClasses.push("ui-button-text-only");buttonElement.addClass(buttonClasses.join(" "))}});$.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},
_init:function(){this.refresh()},_setOption:function(key,value){if(key==="disabled")this.buttons.button("option",key,value);this._super(key,value)},refresh:function(){var rtl=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(rtl?"ui-corner-right":
"ui-corner-left").end().filter(":last").addClass(rtl?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return $(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function($,undefined){$.extend($.ui,{datepicker:{version:"1.10.0"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;function Datepicker(){this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._datepickerShowing=false;this._inDialog=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";
this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,
yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false,disabled:false};$.extend(this._defaults,this.regional[""]);this.dpDiv=bindHover($("<div id='"+
this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(settings){extendRemove(this._defaults,settings||{});return this},_attachDatepicker:function(target,settings){var nodeName,inline,inst;nodeName=target.nodeName.toLowerCase();inline=nodeName==="div"||nodeName==="span";if(!target.id){this.uuid+=1;target.id=
"dp"+this.uuid}inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{});if(nodeName==="input")this._connectDatepicker(target,inst);else if(inline)this._inlineDatepicker(target,inst)},_newInst:function(target,inline){var id=target[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:id,input:target,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:inline,dpDiv:!inline?this.dpDiv:bindHover($("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}},
_connectDatepicker:function(target,inst){var input=$(target);inst.append=$([]);inst.trigger=$([]);if(input.hasClass(this.markerClassName))return;this._attachments(input,inst);input.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp);this._autoSize(inst);$.data(target,PROP_NAME,inst);if(inst.settings.disabled)this._disableDatepicker(target)},_attachments:function(input,inst){var showOn,buttonText,buttonImage,appendText=this._get(inst,"appendText"),
isRTL=this._get(inst,"isRTL");if(inst.append)inst.append.remove();if(appendText){inst.append=$("<span class='"+this._appendClass+"'>"+appendText+"</span>");input[isRTL?"before":"after"](inst.append)}input.unbind("focus",this._showDatepicker);if(inst.trigger)inst.trigger.remove();showOn=this._get(inst,"showOn");if(showOn==="focus"||showOn==="both")input.focus(this._showDatepicker);if(showOn==="button"||showOn==="both"){buttonText=this._get(inst,"buttonText");buttonImage=this._get(inst,"buttonImage");
inst.trigger=$(this._get(inst,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:buttonImage,alt:buttonText,title:buttonText}):$("<button type='button'></button>").addClass(this._triggerClass).html(!buttonImage?buttonText:$("<img/>").attr({src:buttonImage,alt:buttonText,title:buttonText})));input[isRTL?"before":"after"](inst.trigger);inst.trigger.click(function(){if($.datepicker._datepickerShowing&&$.datepicker._lastInput===input[0])$.datepicker._hideDatepicker();else if($.datepicker._datepickerShowing&&
$.datepicker._lastInput!==input[0]){$.datepicker._hideDatepicker();$.datepicker._showDatepicker(input[0])}else $.datepicker._showDatepicker(input[0]);return false})}},_autoSize:function(inst){if(this._get(inst,"autoSize")&&!inst.inline){var findMax,max,maxI,i,date=new Date(2009,12-1,20),dateFormat=this._get(inst,"dateFormat");if(dateFormat.match(/[DM]/)){findMax=function(names){max=0;maxI=0;for(i=0;i<names.length;i++)if(names[i].length>max){max=names[i].length;maxI=i}return maxI};date.setMonth(findMax(this._get(inst,
dateFormat.match(/MM/)?"monthNames":"monthNamesShort")));date.setDate(findMax(this._get(inst,dateFormat.match(/DD/)?"dayNames":"dayNamesShort"))+20-date.getDay())}inst.input.attr("size",this._formatDate(inst,date).length)}},_inlineDatepicker:function(target,inst){var divSpan=$(target);if(divSpan.hasClass(this.markerClassName))return;divSpan.addClass(this.markerClassName).append(inst.dpDiv);$.data(target,PROP_NAME,inst);this._setDate(inst,this._getDefaultDate(inst),true);this._updateDatepicker(inst);
this._updateAlternate(inst);if(inst.settings.disabled)this._disableDatepicker(target);inst.dpDiv.css("display","block")},_dialogDatepicker:function(input,date,onSelect,settings,pos){var id,browserWidth,browserHeight,scrollX,scrollY,inst=this._dialogInst;if(!inst){this.uuid+=1;id="dp"+this.uuid;this._dialogInput=$("<input type='text' id='"+id+"' style='position: absolute; top: -100px; width: 0px;'/>");this._dialogInput.keydown(this._doKeyDown);$("body").append(this._dialogInput);inst=this._dialogInst=
this._newInst(this._dialogInput,false);inst.settings={};$.data(this._dialogInput[0],PROP_NAME,inst)}extendRemove(inst.settings,settings||{});date=date&&date.constructor===Date?this._formatDate(inst,date):date;this._dialogInput.val(date);this._pos=pos?pos.length?pos:[pos.pageX,pos.pageY]:null;if(!this._pos){browserWidth=document.documentElement.clientWidth;browserHeight=document.documentElement.clientHeight;scrollX=document.documentElement.scrollLeft||document.body.scrollLeft;scrollY=document.documentElement.scrollTop||
document.body.scrollTop;this._pos=[browserWidth/2-100+scrollX,browserHeight/2-150+scrollY]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");inst.settings.onSelect=onSelect;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);if($.blockUI)$.blockUI(this.dpDiv);$.data(this._dialogInput[0],PROP_NAME,inst);return this},_destroyDatepicker:function(target){var nodeName,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;
nodeName=target.nodeName.toLowerCase();$.removeData(target,PROP_NAME);if(nodeName==="input"){inst.append.remove();inst.trigger.remove();$target.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else if(nodeName==="div"||nodeName==="span")$target.removeClass(this.markerClassName).empty()},_enableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,
PROP_NAME);if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=false;inst.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+this._inlineClass);inline.children().removeClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",false)}this._disabledInputs=
$.map(this._disabledInputs,function(value){return value===target?null:value})},_disableDatepicker:function(target){var nodeName,inline,$target=$(target),inst=$.data(target,PROP_NAME);if(!$target.hasClass(this.markerClassName))return;nodeName=target.nodeName.toLowerCase();if(nodeName==="input"){target.disabled=true;inst.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else if(nodeName==="div"||nodeName==="span"){inline=$target.children("."+
this._inlineClass);inline.children().addClass("ui-state-disabled");inline.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",true)}this._disabledInputs=$.map(this._disabledInputs,function(value){return value===target?null:value});this._disabledInputs[this._disabledInputs.length]=target},_isDisabledDatepicker:function(target){if(!target)return false;for(var i=0;i<this._disabledInputs.length;i++)if(this._disabledInputs[i]===target)return true;return false},_getInst:function(target){try{return $.data(target,
PROP_NAME)}catch(err){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(target,name,value){var settings,date,minDate,maxDate,inst=this._getInst(target);if(arguments.length===2&&typeof name==="string")return name==="defaults"?$.extend({},$.datepicker._defaults):inst?name==="all"?$.extend({},inst.settings):this._get(inst,name):null;settings=name||{};if(typeof name==="string"){settings={};settings[name]=value}if(inst){if(this._curInst===inst)this._hideDatepicker();date=this._getDateDatepicker(target,
true);minDate=this._getMinMaxDate(inst,"min");maxDate=this._getMinMaxDate(inst,"max");extendRemove(inst.settings,settings);if(minDate!==null&&settings.dateFormat!==undefined&&settings.minDate===undefined)inst.settings.minDate=this._formatDate(inst,minDate);if(maxDate!==null&&settings.dateFormat!==undefined&&settings.maxDate===undefined)inst.settings.maxDate=this._formatDate(inst,maxDate);if("disabled"in settings)if(settings.disabled)this._disableDatepicker(target);else this._enableDatepicker(target);
this._attachments($(target),inst);this._autoSize(inst);this._setDate(inst,date);this._updateAlternate(inst);this._updateDatepicker(inst)}},_changeDatepicker:function(target,name,value){this._optionDatepicker(target,name,value)},_refreshDatepicker:function(target){var inst=this._getInst(target);if(inst)this._updateDatepicker(inst)},_setDateDatepicker:function(target,date){var inst=this._getInst(target);if(inst){this._setDate(inst,date);this._updateDatepicker(inst);this._updateAlternate(inst)}},_getDateDatepicker:function(target,
noDefault){var inst=this._getInst(target);if(inst&&!inst.inline)this._setDateFromField(inst,noDefault);return inst?this._getDate(inst):null},_doKeyDown:function(event){var onSelect,dateStr,sel,inst=$.datepicker._getInst(event.target),handled=true,isRTL=inst.dpDiv.is(".ui-datepicker-rtl");inst._keyEvent=true;if($.datepicker._datepickerShowing)switch(event.keyCode){case 9:$.datepicker._hideDatepicker();handled=false;break;case 13:sel=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+
")",inst.dpDiv);if(sel[0])$.datepicker._selectDay(event.target,inst.selectedMonth,inst.selectedYear,sel[0]);onSelect=$.datepicker._get(inst,"onSelect");if(onSelect){dateStr=$.datepicker._formatDate(inst);onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst])}else $.datepicker._hideDatepicker();return false;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");
break;case 34:$.datepicker._adjustDate(event.target,event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 35:if(event.ctrlKey||event.metaKey)$.datepicker._clearDate(event.target);handled=event.ctrlKey||event.metaKey;break;case 36:if(event.ctrlKey||event.metaKey)$.datepicker._gotoToday(event.target);handled=event.ctrlKey||event.metaKey;break;case 37:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?+1:-1,"D");handled=
event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,event.ctrlKey?-$.datepicker._get(inst,"stepBigMonths"):-$.datepicker._get(inst,"stepMonths"),"M");break;case 38:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,-7,"D");handled=event.ctrlKey||event.metaKey;break;case 39:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,isRTL?-1:+1,"D");handled=event.ctrlKey||event.metaKey;if(event.originalEvent.altKey)$.datepicker._adjustDate(event.target,
event.ctrlKey?+$.datepicker._get(inst,"stepBigMonths"):+$.datepicker._get(inst,"stepMonths"),"M");break;case 40:if(event.ctrlKey||event.metaKey)$.datepicker._adjustDate(event.target,+7,"D");handled=event.ctrlKey||event.metaKey;break;default:handled=false}else if(event.keyCode===36&&event.ctrlKey)$.datepicker._showDatepicker(this);else handled=false;if(handled){event.preventDefault();event.stopPropagation()}},_doKeyPress:function(event){var chars,chr,inst=$.datepicker._getInst(event.target);if($.datepicker._get(inst,
"constrainInput")){chars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat"));chr=String.fromCharCode(event.charCode==null?event.keyCode:event.charCode);return event.ctrlKey||event.metaKey||chr<" "||!chars||chars.indexOf(chr)>-1}},_doKeyUp:function(event){var date,inst=$.datepicker._getInst(event.target);if(inst.input.val()!==inst.lastVal)try{date=$.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),inst.input?inst.input.val():null,$.datepicker._getFormatConfig(inst));if(date){$.datepicker._setDateFromField(inst);
$.datepicker._updateAlternate(inst);$.datepicker._updateDatepicker(inst)}}catch(err){}return true},_showDatepicker:function(input){input=input.target||input;if(input.nodeName.toLowerCase()!=="input")input=$("input",input.parentNode)[0];if($.datepicker._isDisabledDatepicker(input)||$.datepicker._lastInput===input)return;var inst,beforeShow,beforeShowSettings,isFixed,offset,showAnim,duration;inst=$.datepicker._getInst(input);if($.datepicker._curInst&&$.datepicker._curInst!==inst){$.datepicker._curInst.dpDiv.stop(true,
true);if(inst&&$.datepicker._datepickerShowing)$.datepicker._hideDatepicker($.datepicker._curInst.input[0])}beforeShow=$.datepicker._get(inst,"beforeShow");beforeShowSettings=beforeShow?beforeShow.apply(input,[input,inst]):{};if(beforeShowSettings===false)return;extendRemove(inst.settings,beforeShowSettings);inst.lastVal=null;$.datepicker._lastInput=input;$.datepicker._setDateFromField(inst);if($.datepicker._inDialog)input.value="";if(!$.datepicker._pos){$.datepicker._pos=$.datepicker._findPos(input);
$.datepicker._pos[1]+=input.offsetHeight}isFixed=false;$(input).parents().each(function(){isFixed|=$(this).css("position")==="fixed";return!isFixed});offset={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null;inst.dpDiv.empty();inst.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});$.datepicker._updateDatepicker(inst);offset=$.datepicker._checkOffset(inst,offset,isFixed);inst.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":isFixed?"fixed":"absolute",
display:"none",left:offset.left+"px",top:offset.top+"px"});if(!inst.inline){showAnim=$.datepicker._get(inst,"showAnim");duration=$.datepicker._get(inst,"duration");if($(input).zIndex()>0)inst.dpDiv.zIndex($(input).zIndex()+1);else inst.dpDiv.zIndex($(input).css("z-index")+1);$.datepicker._datepickerShowing=true;if($.effects&&$.effects.effect[showAnim])inst.dpDiv.show(showAnim,$.datepicker._get(inst,"showOptions"),duration);else inst.dpDiv[showAnim||"show"](showAnim?duration:null);if(inst.input.is(":visible")&&
!inst.input.is(":disabled"))inst.input.focus();$.datepicker._curInst=inst}},_updateDatepicker:function(inst){this.maxRows=4;instActive=inst;inst.dpDiv.empty().append(this._generateHTML(inst));this._attachHandlers(inst);inst.dpDiv.find("."+this._dayOverClass+" a").mouseover();var origyearshtml,numMonths=this._getNumberOfMonths(inst),cols=numMonths[1],width=17;inst.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");if(cols>1)inst.dpDiv.addClass("ui-datepicker-multi-"+
cols).css("width",width*cols+"em");inst.dpDiv[(numMonths[0]!==1||numMonths[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi");inst.dpDiv[(this._get(inst,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");if(inst===$.datepicker._curInst&&$.datepicker._datepickerShowing&&inst.input&&inst.input.is(":visible")&&!inst.input.is(":disabled")&&inst.input[0]!==document.activeElement)inst.input.focus();if(inst.yearshtml){origyearshtml=inst.yearshtml;setTimeout(function(){if(origyearshtml===inst.yearshtml&&
inst.yearshtml)inst.dpDiv.find("select.ui-datepicker-year:first").replaceWith(inst.yearshtml);origyearshtml=inst.yearshtml=null},0)}},_getBorders:function(elem){var convert=function(value){return{thin:1,medium:2,thick:3}[value]||value};return[parseFloat(convert(elem.css("border-left-width"))),parseFloat(convert(elem.css("border-top-width")))]},_checkOffset:function(inst,offset,isFixed){var dpWidth=inst.dpDiv.outerWidth(),dpHeight=inst.dpDiv.outerHeight(),inputWidth=inst.input?inst.input.outerWidth():
0,inputHeight=inst.input?inst.input.outerHeight():0,viewWidth=document.documentElement.clientWidth+(isFixed?0:$(document).scrollLeft()),viewHeight=document.documentElement.clientHeight+(isFixed?0:$(document).scrollTop());offset.left-=this._get(inst,"isRTL")?dpWidth-inputWidth:0;offset.left-=isFixed&&offset.left===inst.input.offset().left?$(document).scrollLeft():0;offset.top-=isFixed&&offset.top===inst.input.offset().top+inputHeight?$(document).scrollTop():0;offset.left-=Math.min(offset.left,offset.left+
dpWidth>viewWidth&&viewWidth>dpWidth?Math.abs(offset.left+dpWidth-viewWidth):0);offset.top-=Math.min(offset.top,offset.top+dpHeight>viewHeight&&viewHeight>dpHeight?Math.abs(dpHeight+inputHeight):0);return offset},_findPos:function(obj){var position,inst=this._getInst(obj),isRTL=this._get(inst,"isRTL");while(obj&&(obj.type==="hidden"||obj.nodeType!==1||$.expr.filters.hidden(obj)))obj=obj[isRTL?"previousSibling":"nextSibling"];position=$(obj).offset();return[position.left,position.top]},_hideDatepicker:function(input){var showAnim,
duration,postProcess,onClose,inst=this._curInst;if(!inst||input&&inst!==$.data(input,PROP_NAME))return;if(this._datepickerShowing){showAnim=this._get(inst,"showAnim");duration=this._get(inst,"duration");postProcess=function(){$.datepicker._tidyDialog(inst)};if($.effects&&($.effects.effect[showAnim]||$.effects[showAnim]))inst.dpDiv.hide(showAnim,$.datepicker._get(inst,"showOptions"),duration,postProcess);else inst.dpDiv[showAnim==="slideDown"?"slideUp":showAnim==="fadeIn"?"fadeOut":"hide"](showAnim?
duration:null,postProcess);if(!showAnim)postProcess();this._datepickerShowing=false;onClose=this._get(inst,"onClose");if(onClose)onClose.apply(inst.input?inst.input[0]:null,[inst.input?inst.input.val():"",inst]);this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if($.blockUI){$.unblockUI();$("body").append(this.dpDiv)}}this._inDialog=false}},_tidyDialog:function(inst){inst.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},
_checkExternalClick:function(event){if(!$.datepicker._curInst)return;var $target=$(event.target),inst=$.datepicker._getInst($target[0]);if($target[0].id!==$.datepicker._mainDivId&&$target.parents("#"+$.datepicker._mainDivId).length===0&&!$target.hasClass($.datepicker.markerClassName)&&!$target.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&!($.datepicker._inDialog&&$.blockUI)||$target.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!==inst)$.datepicker._hideDatepicker()},
_adjustDate:function(id,offset,period){var target=$(id),inst=this._getInst(target[0]);if(this._isDisabledDatepicker(target[0]))return;this._adjustInstDate(inst,offset+(period==="M"?this._get(inst,"showCurrentAtPos"):0),period);this._updateDatepicker(inst)},_gotoToday:function(id){var date,target=$(id),inst=this._getInst(target[0]);if(this._get(inst,"gotoCurrent")&&inst.currentDay){inst.selectedDay=inst.currentDay;inst.drawMonth=inst.selectedMonth=inst.currentMonth;inst.drawYear=inst.selectedYear=
inst.currentYear}else{date=new Date;inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear()}this._notifyChange(inst);this._adjustDate(target)},_selectMonthYear:function(id,select,period){var target=$(id),inst=this._getInst(target[0]);inst["selected"+(period==="M"?"Month":"Year")]=inst["draw"+(period==="M"?"Month":"Year")]=parseInt(select.options[select.selectedIndex].value,10);this._notifyChange(inst);this._adjustDate(target)},
_selectDay:function(id,month,year,td){var inst,target=$(id);if($(td).hasClass(this._unselectableClass)||this._isDisabledDatepicker(target[0]))return;inst=this._getInst(target[0]);inst.selectedDay=inst.currentDay=$("a",td).html();inst.selectedMonth=inst.currentMonth=month;inst.selectedYear=inst.currentYear=year;this._selectDate(id,this._formatDate(inst,inst.currentDay,inst.currentMonth,inst.currentYear))},_clearDate:function(id){var target=$(id);this._selectDate(target,"")},_selectDate:function(id,
dateStr){var onSelect,target=$(id),inst=this._getInst(target[0]);dateStr=dateStr!=null?dateStr:this._formatDate(inst);if(inst.input)inst.input.val(dateStr);this._updateAlternate(inst);onSelect=this._get(inst,"onSelect");if(onSelect)onSelect.apply(inst.input?inst.input[0]:null,[dateStr,inst]);else if(inst.input)inst.input.trigger("change");if(inst.inline)this._updateDatepicker(inst);else{this._hideDatepicker();this._lastInput=inst.input[0];if(typeof inst.input[0]!=="object")inst.input.focus();this._lastInput=
null}},_updateAlternate:function(inst){var altFormat,date,dateStr,altField=this._get(inst,"altField");if(altField){altFormat=this._get(inst,"altFormat")||this._get(inst,"dateFormat");date=this._getDate(inst);dateStr=this.formatDate(altFormat,date,this._getFormatConfig(inst));$(altField).each(function(){$(this).val(dateStr)})}},noWeekends:function(date){var day=date.getDay();return[day>0&&day<6,""]},iso8601Week:function(date){var time,checkDate=new Date(date.getTime());checkDate.setDate(checkDate.getDate()+
4-(checkDate.getDay()||7));time=checkDate.getTime();checkDate.setMonth(0);checkDate.setDate(1);return Math.floor(Math.round((time-checkDate)/864E5)/7)+1},parseDate:function(format,value,settings){if(format==null||value==null)throw"Invalid arguments";value=typeof value==="object"?value.toString():value+"";if(value==="")return null;var iFormat,dim,extra,iValue=0,shortYearCutoffTemp=(settings?settings.shortYearCutoff:null)||this._defaults.shortYearCutoff,shortYearCutoff=typeof shortYearCutoffTemp!==
"string"?shortYearCutoffTemp:(new Date).getFullYear()%100+parseInt(shortYearCutoffTemp,10),dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,year=-1,month=-1,day=-1,doy=-1,literal=false,date,lookAhead=function(match){var matches=iFormat+
1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches},getNumber=function(match){var isDoubled=lookAhead(match),size=match==="@"?14:match==="!"?20:match==="y"&&isDoubled?4:match==="o"?3:2,digits=new RegExp("^\\d{1,"+size+"}"),num=value.substring(iValue).match(digits);if(!num)throw"Missing number at position "+iValue;iValue+=num[0].length;return parseInt(num[0],10)},getName=function(match,shortNames,longNames){var index=-1,names=$.map(lookAhead(match)?longNames:shortNames,
function(v,k){return[[k,v]]}).sort(function(a,b){return-(a[1].length-b[1].length)});$.each(names,function(i,pair){var name=pair[1];if(value.substr(iValue,name.length).toLowerCase()===name.toLowerCase()){index=pair[0];iValue+=name.length;return false}});if(index!==-1)return index+1;else throw"Unknown name at position "+iValue;},checkLiteral=function(){if(value.charAt(iValue)!==format.charAt(iFormat))throw"Unexpected literal at position "+iValue;iValue++};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)===
"'"&&!lookAhead("'"))literal=false;else checkLiteral();else switch(format.charAt(iFormat)){case "d":day=getNumber("d");break;case "D":getName("D",dayNamesShort,dayNames);break;case "o":doy=getNumber("o");break;case "m":month=getNumber("m");break;case "M":month=getName("M",monthNamesShort,monthNames);break;case "y":year=getNumber("y");break;case "@":date=new Date(getNumber("@"));year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "!":date=new Date((getNumber("!")-this._ticksTo1970)/
1E4);year=date.getFullYear();month=date.getMonth()+1;day=date.getDate();break;case "'":if(lookAhead("'"))checkLiteral();else literal=true;break;default:checkLiteral()}if(iValue<value.length){extra=value.substr(iValue);if(!/^\s+/.test(extra))throw"Extra/unparsed characters found in date: "+extra;}if(year===-1)year=(new Date).getFullYear();else if(year<100)year+=(new Date).getFullYear()-(new Date).getFullYear()%100+(year<=shortYearCutoff?0:-100);if(doy>-1){month=1;day=doy;do{dim=this._getDaysInMonth(year,
month-1);if(day<=dim)break;month++;day-=dim}while(true)}date=this._daylightSavingAdjust(new Date(year,month-1,day));if(date.getFullYear()!==year||date.getMonth()+1!==month||date.getDate()!==day)throw"Invalid date";return date},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:((1970-1)*365+Math.floor(1970/4)-Math.floor(1970/
100)+Math.floor(1970/400))*24*60*60*1E7,formatDate:function(format,date,settings){if(!date)return"";var iFormat,dayNamesShort=(settings?settings.dayNamesShort:null)||this._defaults.dayNamesShort,dayNames=(settings?settings.dayNames:null)||this._defaults.dayNames,monthNamesShort=(settings?settings.monthNamesShort:null)||this._defaults.monthNamesShort,monthNames=(settings?settings.monthNames:null)||this._defaults.monthNames,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+
1)===match;if(matches)iFormat++;return matches},formatNumber=function(match,value,len){var num=""+value;if(lookAhead(match))while(num.length<len)num="0"+num;return num},formatName=function(match,value,shortNames,longNames){return lookAhead(match)?longNames[value]:shortNames[value]},output="",literal=false;if(date)for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)==="'"&&!lookAhead("'"))literal=false;else output+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":output+=
formatNumber("d",date.getDate(),2);break;case "D":output+=formatName("D",date.getDay(),dayNamesShort,dayNames);break;case "o":output+=formatNumber("o",Math.round(((new Date(date.getFullYear(),date.getMonth(),date.getDate())).getTime()-(new Date(date.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":output+=formatNumber("m",date.getMonth()+1,2);break;case "M":output+=formatName("M",date.getMonth(),monthNamesShort,monthNames);break;case "y":output+=lookAhead("y")?date.getFullYear():(date.getYear()%
100<10?"0":"")+date.getYear()%100;break;case "@":output+=date.getTime();break;case "!":output+=date.getTime()*1E4+this._ticksTo1970;break;case "'":if(lookAhead("'"))output+="'";else literal=true;break;default:output+=format.charAt(iFormat)}return output},_possibleChars:function(format){var iFormat,chars="",literal=false,lookAhead=function(match){var matches=iFormat+1<format.length&&format.charAt(iFormat+1)===match;if(matches)iFormat++;return matches};for(iFormat=0;iFormat<format.length;iFormat++)if(literal)if(format.charAt(iFormat)===
"'"&&!lookAhead("'"))literal=false;else chars+=format.charAt(iFormat);else switch(format.charAt(iFormat)){case "d":case "m":case "y":case "@":chars+="0123456789";break;case "D":case "M":return null;case "'":if(lookAhead("'"))chars+="'";else literal=true;break;default:chars+=format.charAt(iFormat)}return chars},_get:function(inst,name){return inst.settings[name]!==undefined?inst.settings[name]:this._defaults[name]},_setDateFromField:function(inst,noDefault){if(inst.input.val()===inst.lastVal)return;
var dateFormat=this._get(inst,"dateFormat"),dates=inst.lastVal=inst.input?inst.input.val():null,defaultDate=this._getDefaultDate(inst),date=defaultDate,settings=this._getFormatConfig(inst);try{date=this.parseDate(dateFormat,dates,settings)||defaultDate}catch(event){dates=noDefault?"":dates}inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();inst.drawYear=inst.selectedYear=date.getFullYear();inst.currentDay=dates?date.getDate():0;inst.currentMonth=dates?date.getMonth():
0;inst.currentYear=dates?date.getFullYear():0;this._adjustInstDate(inst)},_getDefaultDate:function(inst){return this._restrictMinMax(inst,this._determineDate(inst,this._get(inst,"defaultDate"),new Date))},_determineDate:function(inst,date,defaultDate){var offsetNumeric=function(offset){var date=new Date;date.setDate(date.getDate()+offset);return date},offsetString=function(offset){try{return $.datepicker.parseDate($.datepicker._get(inst,"dateFormat"),offset,$.datepicker._getFormatConfig(inst))}catch(e){}var date=
(offset.toLowerCase().match(/^c/)?$.datepicker._getDate(inst):null)||new Date,year=date.getFullYear(),month=date.getMonth(),day=date.getDate(),pattern=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,matches=pattern.exec(offset);while(matches){switch(matches[2]||"d"){case "d":case "D":day+=parseInt(matches[1],10);break;case "w":case "W":day+=parseInt(matches[1],10)*7;break;case "m":case "M":month+=parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break;case "y":case "Y":year+=
parseInt(matches[1],10);day=Math.min(day,$.datepicker._getDaysInMonth(year,month));break}matches=pattern.exec(offset)}return new Date(year,month,day)},newDate=date==null||date===""?defaultDate:typeof date==="string"?offsetString(date):typeof date==="number"?isNaN(date)?defaultDate:offsetNumeric(date):new Date(date.getTime());newDate=newDate&&newDate.toString()==="Invalid Date"?defaultDate:newDate;if(newDate){newDate.setHours(0);newDate.setMinutes(0);newDate.setSeconds(0);newDate.setMilliseconds(0)}return this._daylightSavingAdjust(newDate)},
_daylightSavingAdjust:function(date){if(!date)return null;date.setHours(date.getHours()>12?date.getHours()+2:0);return date},_setDate:function(inst,date,noChange){var clear=!date,origMonth=inst.selectedMonth,origYear=inst.selectedYear,newDate=this._restrictMinMax(inst,this._determineDate(inst,date,new Date));inst.selectedDay=inst.currentDay=newDate.getDate();inst.drawMonth=inst.selectedMonth=inst.currentMonth=newDate.getMonth();inst.drawYear=inst.selectedYear=inst.currentYear=newDate.getFullYear();
if((origMonth!==inst.selectedMonth||origYear!==inst.selectedYear)&&!noChange)this._notifyChange(inst);this._adjustInstDate(inst);if(inst.input)inst.input.val(clear?"":this._formatDate(inst))},_getDate:function(inst){var startDate=!inst.currentYear||inst.input&&inst.input.val()===""?null:this._daylightSavingAdjust(new Date(inst.currentYear,inst.currentMonth,inst.currentDay));return startDate},_attachHandlers:function(inst){var stepMonths=this._get(inst,"stepMonths"),id="#"+inst.id.replace(/\\\\/g,
"\\");inst.dpDiv.find("[data-handler]").map(function(){var handler={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,-stepMonths,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(id,+stepMonths,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(id)},selectDay:function(){window["DP_jQuery_"+dpuuid].datepicker._selectDay(id,+this.getAttribute("data-month"),+this.getAttribute("data-year"),
this);return false},selectMonth:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"M");return false},selectYear:function(){window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(id,this,"Y");return false}};$(this).bind(this.getAttribute("data-event"),handler[this.getAttribute("data-handler")])})},_generateHTML:function(inst){var maxDraw,prevText,prev,nextText,next,currentText,gotoDate,controls,buttonPanel,firstDay,showWeek,dayNames,dayNamesMin,monthNames,monthNamesShort,
beforeShowDay,showOtherMonths,selectOtherMonths,defaultDate,html,dow,row,group,col,selectedDate,cornerClass,calender,thead,day,daysInMonth,leadDays,curRows,numRows,printDate,dRow,tbody,daySettings,otherMonth,unselectable,tempDate=new Date,today=this._daylightSavingAdjust(new Date(tempDate.getFullYear(),tempDate.getMonth(),tempDate.getDate())),isRTL=this._get(inst,"isRTL"),showButtonPanel=this._get(inst,"showButtonPanel"),hideIfNoPrevNext=this._get(inst,"hideIfNoPrevNext"),navigationAsDateFormat=this._get(inst,
"navigationAsDateFormat"),numMonths=this._getNumberOfMonths(inst),showCurrentAtPos=this._get(inst,"showCurrentAtPos"),stepMonths=this._get(inst,"stepMonths"),isMultiMonth=numMonths[0]!==1||numMonths[1]!==1,currentDate=this._daylightSavingAdjust(!inst.currentDay?new Date(9999,9,9):new Date(inst.currentYear,inst.currentMonth,inst.currentDay)),minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),drawMonth=inst.drawMonth-showCurrentAtPos,drawYear=inst.drawYear;if(drawMonth<
0){drawMonth+=12;drawYear--}if(maxDate){maxDraw=this._daylightSavingAdjust(new Date(maxDate.getFullYear(),maxDate.getMonth()-numMonths[0]*numMonths[1]+1,maxDate.getDate()));maxDraw=minDate&&maxDraw<minDate?minDate:maxDraw;while(this._daylightSavingAdjust(new Date(drawYear,drawMonth,1))>maxDraw){drawMonth--;if(drawMonth<0){drawMonth=11;drawYear--}}}inst.drawMonth=drawMonth;inst.drawYear=drawYear;prevText=this._get(inst,"prevText");prevText=!navigationAsDateFormat?prevText:this.formatDate(prevText,
this._daylightSavingAdjust(new Date(drawYear,drawMonth-stepMonths,1)),this._getFormatConfig(inst));prev=this._canAdjustMonth(inst,-1,drawYear,drawMonth)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click'"+" title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"e":"w")+"'>"+prevText+"</span></a>":hideIfNoPrevNext?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+prevText+"'><span class='ui-icon ui-icon-circle-triangle-"+
(isRTL?"e":"w")+"'>"+prevText+"</span></a>";nextText=this._get(inst,"nextText");nextText=!navigationAsDateFormat?nextText:this.formatDate(nextText,this._daylightSavingAdjust(new Date(drawYear,drawMonth+stepMonths,1)),this._getFormatConfig(inst));next=this._canAdjustMonth(inst,+1,drawYear,drawMonth)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click'"+" title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>":hideIfNoPrevNext?
"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+nextText+"'><span class='ui-icon ui-icon-circle-triangle-"+(isRTL?"w":"e")+"'>"+nextText+"</span></a>";currentText=this._get(inst,"currentText");gotoDate=this._get(inst,"gotoCurrent")&&inst.currentDay?currentDate:today;currentText=!navigationAsDateFormat?currentText:this.formatDate(currentText,gotoDate,this._getFormatConfig(inst));controls=!inst.inline?"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+
this._get(inst,"closeText")+"</button>":"";buttonPanel=showButtonPanel?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(isRTL?controls:"")+(this._isInRange(inst,gotoDate)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'"+">"+currentText+"</button>":"")+(isRTL?"":controls)+"</div>":"";firstDay=parseInt(this._get(inst,"firstDay"),10);firstDay=isNaN(firstDay)?0:firstDay;showWeek=this._get(inst,
"showWeek");dayNames=this._get(inst,"dayNames");dayNamesMin=this._get(inst,"dayNamesMin");monthNames=this._get(inst,"monthNames");monthNamesShort=this._get(inst,"monthNamesShort");beforeShowDay=this._get(inst,"beforeShowDay");showOtherMonths=this._get(inst,"showOtherMonths");selectOtherMonths=this._get(inst,"selectOtherMonths");defaultDate=this._getDefaultDate(inst);html="";dow;for(row=0;row<numMonths[0];row++){group="";this.maxRows=4;for(col=0;col<numMonths[1];col++){selectedDate=this._daylightSavingAdjust(new Date(drawYear,
drawMonth,inst.selectedDay));cornerClass=" ui-corner-all";calender="";if(isMultiMonth){calender+="<div class='ui-datepicker-group";if(numMonths[1]>1)switch(col){case 0:calender+=" ui-datepicker-group-first";cornerClass=" ui-corner-"+(isRTL?"right":"left");break;case numMonths[1]-1:calender+=" ui-datepicker-group-last";cornerClass=" ui-corner-"+(isRTL?"left":"right");break;default:calender+=" ui-datepicker-group-middle";cornerClass="";break}calender+="'>"}calender+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+
cornerClass+"'>"+(/all|left/.test(cornerClass)&&row===0?isRTL?next:prev:"")+(/all|right/.test(cornerClass)&&row===0?isRTL?prev:next:"")+this._generateMonthYearHeader(inst,drawMonth,drawYear,minDate,maxDate,row>0||col>0,monthNames,monthNamesShort)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>";thead=showWeek?"<th class='ui-datepicker-week-col'>"+this._get(inst,"weekHeader")+"</th>":"";for(dow=0;dow<7;dow++){day=(dow+firstDay)%7;thead+="<th"+((dow+firstDay+6)%7>=5?" class='ui-datepicker-week-end'":
"")+">"+"<span title='"+dayNames[day]+"'>"+dayNamesMin[day]+"</span></th>"}calender+=thead+"</tr></thead><tbody>";daysInMonth=this._getDaysInMonth(drawYear,drawMonth);if(drawYear===inst.selectedYear&&drawMonth===inst.selectedMonth)inst.selectedDay=Math.min(inst.selectedDay,daysInMonth);leadDays=(this._getFirstDayOfMonth(drawYear,drawMonth)-firstDay+7)%7;curRows=Math.ceil((leadDays+daysInMonth)/7);numRows=isMultiMonth?this.maxRows>curRows?this.maxRows:curRows:curRows;this.maxRows=numRows;printDate=
this._daylightSavingAdjust(new Date(drawYear,drawMonth,1-leadDays));for(dRow=0;dRow<numRows;dRow++){calender+="<tr>";tbody=!showWeek?"":"<td class='ui-datepicker-week-col'>"+this._get(inst,"calculateWeek")(printDate)+"</td>";for(dow=0;dow<7;dow++){daySettings=beforeShowDay?beforeShowDay.apply(inst.input?inst.input[0]:null,[printDate]):[true,""];otherMonth=printDate.getMonth()!==drawMonth;unselectable=otherMonth&&!selectOtherMonths||!daySettings[0]||minDate&&printDate<minDate||maxDate&&printDate>maxDate;
tbody+="<td class='"+((dow+firstDay+6)%7>=5?" ui-datepicker-week-end":"")+(otherMonth?" ui-datepicker-other-month":"")+(printDate.getTime()===selectedDate.getTime()&&drawMonth===inst.selectedMonth&&inst._keyEvent||defaultDate.getTime()===printDate.getTime()&&defaultDate.getTime()===selectedDate.getTime()?" "+this._dayOverClass:"")+(unselectable?" "+this._unselectableClass+" ui-state-disabled":"")+(otherMonth&&!showOtherMonths?"":" "+daySettings[1]+(printDate.getTime()===currentDate.getTime()?" "+
this._currentClass:"")+(printDate.getTime()===today.getTime()?" ui-datepicker-today":""))+"'"+((!otherMonth||showOtherMonths)&&daySettings[2]?" title='"+daySettings[2]+"'":"")+(unselectable?"":" data-handler='selectDay' data-event='click' data-month='"+printDate.getMonth()+"' data-year='"+printDate.getFullYear()+"'")+">"+(otherMonth&&!showOtherMonths?"&#xa0;":unselectable?"<span class='ui-state-default'>"+printDate.getDate()+"</span>":"<a class='ui-state-default"+(printDate.getTime()===today.getTime()?
" ui-state-highlight":"")+(printDate.getTime()===currentDate.getTime()?" ui-state-active":"")+(otherMonth?" ui-priority-secondary":"")+"' href='#'>"+printDate.getDate()+"</a>")+"</td>";printDate.setDate(printDate.getDate()+1);printDate=this._daylightSavingAdjust(printDate)}calender+=tbody+"</tr>"}drawMonth++;if(drawMonth>11){drawMonth=0;drawYear++}calender+="</tbody></table>"+(isMultiMonth?"</div>"+(numMonths[0]>0&&col===numMonths[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"");group+=
calender}html+=group}html+=buttonPanel;inst._keyEvent=false;return html},_generateMonthYearHeader:function(inst,drawMonth,drawYear,minDate,maxDate,secondary,monthNames,monthNamesShort){var inMinYear,inMaxYear,month,years,thisYear,determineYear,year,endYear,changeMonth=this._get(inst,"changeMonth"),changeYear=this._get(inst,"changeYear"),showMonthAfterYear=this._get(inst,"showMonthAfterYear"),html="<div class='ui-datepicker-title'>",monthHtml="";if(secondary||!changeMonth)monthHtml+="<span class='ui-datepicker-month'>"+
monthNames[drawMonth]+"</span>";else{inMinYear=minDate&&minDate.getFullYear()===drawYear;inMaxYear=maxDate&&maxDate.getFullYear()===drawYear;monthHtml+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(month=0;month<12;month++)if((!inMinYear||month>=minDate.getMonth())&&(!inMaxYear||month<=maxDate.getMonth()))monthHtml+="<option value='"+month+"'"+(month===drawMonth?" selected='selected'":"")+">"+monthNamesShort[month]+"</option>";monthHtml+="</select>"}if(!showMonthAfterYear)html+=
monthHtml+(secondary||!(changeMonth&&changeYear)?"&#xa0;":"");if(!inst.yearshtml){inst.yearshtml="";if(secondary||!changeYear)html+="<span class='ui-datepicker-year'>"+drawYear+"</span>";else{years=this._get(inst,"yearRange").split(":");thisYear=(new Date).getFullYear();determineYear=function(value){var year=value.match(/c[+\-].*/)?drawYear+parseInt(value.substring(1),10):value.match(/[+\-].*/)?thisYear+parseInt(value,10):parseInt(value,10);return isNaN(year)?thisYear:year};year=determineYear(years[0]);
endYear=Math.max(year,determineYear(years[1]||""));year=minDate?Math.max(year,minDate.getFullYear()):year;endYear=maxDate?Math.min(endYear,maxDate.getFullYear()):endYear;inst.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;year<=endYear;year++)inst.yearshtml+="<option value='"+year+"'"+(year===drawYear?" selected='selected'":"")+">"+year+"</option>";inst.yearshtml+="</select>";html+=inst.yearshtml;inst.yearshtml=null}}html+=this._get(inst,"yearSuffix");
if(showMonthAfterYear)html+=(secondary||!(changeMonth&&changeYear)?"&#xa0;":"")+monthHtml;html+="</div>";return html},_adjustInstDate:function(inst,offset,period){var year=inst.drawYear+(period==="Y"?offset:0),month=inst.drawMonth+(period==="M"?offset:0),day=Math.min(inst.selectedDay,this._getDaysInMonth(year,month))+(period==="D"?offset:0),date=this._restrictMinMax(inst,this._daylightSavingAdjust(new Date(year,month,day)));inst.selectedDay=date.getDate();inst.drawMonth=inst.selectedMonth=date.getMonth();
inst.drawYear=inst.selectedYear=date.getFullYear();if(period==="M"||period==="Y")this._notifyChange(inst)},_restrictMinMax:function(inst,date){var minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),newDate=minDate&&date<minDate?minDate:date;return maxDate&&newDate>maxDate?maxDate:newDate},_notifyChange:function(inst){var onChange=this._get(inst,"onChangeMonthYear");if(onChange)onChange.apply(inst.input?inst.input[0]:null,[inst.selectedYear,inst.selectedMonth+1,inst])},
_getNumberOfMonths:function(inst){var numMonths=this._get(inst,"numberOfMonths");return numMonths==null?[1,1]:typeof numMonths==="number"?[1,numMonths]:numMonths},_getMinMaxDate:function(inst,minMax){return this._determineDate(inst,this._get(inst,minMax+"Date"),null)},_getDaysInMonth:function(year,month){return 32-this._daylightSavingAdjust(new Date(year,month,32)).getDate()},_getFirstDayOfMonth:function(year,month){return(new Date(year,month,1)).getDay()},_canAdjustMonth:function(inst,offset,curYear,
curMonth){var numMonths=this._getNumberOfMonths(inst),date=this._daylightSavingAdjust(new Date(curYear,curMonth+(offset<0?offset:numMonths[0]*numMonths[1]),1));if(offset<0)date.setDate(this._getDaysInMonth(date.getFullYear(),date.getMonth()));return this._isInRange(inst,date)},_isInRange:function(inst,date){var yearSplit,currentYear,minDate=this._getMinMaxDate(inst,"min"),maxDate=this._getMinMaxDate(inst,"max"),minYear=null,maxYear=null,years=this._get(inst,"yearRange");if(years){yearSplit=years.split(":");
currentYear=(new Date).getFullYear();minYear=parseInt(yearSplit[0],10)+currentYear;maxYear=parseInt(yearSplit[1],10)+currentYear}return(!minDate||date.getTime()>=minDate.getTime())&&(!maxDate||date.getTime()<=maxDate.getTime())&&(!minYear||date.getFullYear()>=minYear)&&(!maxYear||date.getFullYear()<=maxYear)},_getFormatConfig:function(inst){var shortYearCutoff=this._get(inst,"shortYearCutoff");shortYearCutoff=typeof shortYearCutoff!=="string"?shortYearCutoff:(new Date).getFullYear()%100+parseInt(shortYearCutoff,
10);return{shortYearCutoff:shortYearCutoff,dayNamesShort:this._get(inst,"dayNamesShort"),dayNames:this._get(inst,"dayNames"),monthNamesShort:this._get(inst,"monthNamesShort"),monthNames:this._get(inst,"monthNames")}},_formatDate:function(inst,day,month,year){if(!day){inst.currentDay=inst.selectedDay;inst.currentMonth=inst.selectedMonth;inst.currentYear=inst.selectedYear}var date=day?typeof day==="object"?day:this._daylightSavingAdjust(new Date(year,month,day)):this._daylightSavingAdjust(new Date(inst.currentYear,
inst.currentMonth,inst.currentDay));return this.formatDate(this._get(inst,"dateFormat"),date,this._getFormatConfig(inst))}});function bindHover(dpDiv){var selector="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return dpDiv.delegate(selector,"mouseout",function(){$(this).removeClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1)$(this).removeClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).removeClass("ui-datepicker-next-hover")}).delegate(selector,
"mouseover",function(){if(!$.datepicker._isDisabledDatepicker(instActive.inline?dpDiv.parent()[0]:instActive.input[0])){$(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");$(this).addClass("ui-state-hover");if(this.className.indexOf("ui-datepicker-prev")!==-1)$(this).addClass("ui-datepicker-prev-hover");if(this.className.indexOf("ui-datepicker-next")!==-1)$(this).addClass("ui-datepicker-next-hover")}})}function extendRemove(target,props){$.extend(target,props);for(var name in props)if(props[name]==
null)target[name]=props[name];return target}$.fn.datepicker=function(options){if(!this.length)return this;if(!$.datepicker.initialized){$(document).mousedown($.datepicker._checkExternalClick);$.datepicker.initialized=true}if($("#"+$.datepicker._mainDivId).length===0)$("body").append($.datepicker.dpDiv);var otherArgs=Array.prototype.slice.call(arguments,1);if(typeof options==="string"&&(options==="isDisabled"||options==="getDate"||options==="widget"))return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,
[this[0]].concat(otherArgs));if(options==="option"&&arguments.length===2&&typeof arguments[1]==="string")return $.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this[0]].concat(otherArgs));return this.each(function(){typeof options==="string"?$.datepicker["_"+options+"Datepicker"].apply($.datepicker,[this].concat(otherArgs)):$.datepicker._attachDatepicker(this,options)})};$.datepicker=new Datepicker;$.datepicker.initialized=false;$.datepicker.uuid=(new Date).getTime();$.datepicker.version=
"1.10.0";window["DP_jQuery_"+dpuuid]=$})(jQuery);
(function($,undefined){var sizeRelatedOptions={buttons:true,height:true,maxHeight:true,maxWidth:true,minHeight:true,minWidth:true,width:true},resizableRelatedOptions={maxHeight:true,maxWidth:true,minHeight:true,minWidth:true};$.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:true,buttons:[],closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",
of:window,collision:"fit",using:function(pos){var topOffset=$(this).css(pos).offset().top;if(topOffset<0)$(this).css("top",pos.top-topOffset)}},resizable:true,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,
height:this.element[0].style.height};this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.originalTitle=this.element.attr("title");this.options.title=this.options.title||this.originalTitle;this._createWrapper();this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog);this._createTitlebar();this._createButtonPane();if(this.options.draggable&&$.fn.draggable)this._makeDraggable();if(this.options.resizable&&
$.fn.resizable)this._makeResizable();this._isOpen=false},_init:function(){if(this.options.autoOpen)this.open()},_appendTo:function(){var element=this.options.appendTo;if(element&&(element.jquery||element.nodeType))return $(element);return this.document.find(element||"body").eq(0)},_destroy:function(){var next,originalPosition=this.originalPosition;this._destroyOverlay();this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach();this.uiDialog.stop(true,
true).remove();if(this.originalTitle)this.element.attr("title",this.originalTitle);next=originalPosition.parent.children().eq(originalPosition.index);if(next.length&&next[0]!==this.element[0])next.before(this.element);else originalPosition.parent.append(this.element)},widget:function(){return this.uiDialog},disable:$.noop,enable:$.noop,close:function(event){var that=this;if(!this._isOpen||this._trigger("beforeClose",event)===false)return;this._isOpen=false;this._destroyOverlay();if(!this.opener.filter(":focusable").focus().length)$(this.document[0].activeElement).blur();
this._hide(this.uiDialog,this.options.hide,function(){that._trigger("close",event)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(event,silent){var moved=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;if(moved&&!silent)this._trigger("focus",event);return moved},open:function(){if(this._isOpen){if(this._moveToTop())this._focusTabbable();return}this.opener=$(this.document[0].activeElement);this._size();this._position();this._createOverlay();
this._moveToTop(null,true);this._show(this.uiDialog,this.options.show);this._focusTabbable();this._isOpen=true;this._trigger("open");this._trigger("focus")},_focusTabbable:function(){var hasFocus=this.element.find("[autofocus]");if(!hasFocus.length)hasFocus=this.element.find(":tabbable");if(!hasFocus.length)hasFocus=this.uiDialogButtonPane.find(":tabbable");if(!hasFocus.length)hasFocus=this.uiDialogTitlebarClose.filter(":tabbable");if(!hasFocus.length)hasFocus=this.uiDialog;hasFocus.eq(0).focus()},
_keepFocus:function(event){function checkFocus(){var activeElement=this.document[0].activeElement,isActive=this.uiDialog[0]===activeElement||$.contains(this.uiDialog[0],activeElement);if(!isActive)this._focusTabbable()}event.preventDefault();checkFocus.call(this);this._delay(checkFocus)},_createWrapper:function(){this.uiDialog=$("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo());
this._on(this.uiDialog,{keydown:function(event){if(this.options.closeOnEscape&&!event.isDefaultPrevented()&&event.keyCode&&event.keyCode===$.ui.keyCode.ESCAPE){event.preventDefault();this.close(event);return}if(event.keyCode!==$.ui.keyCode.TAB)return;var tabbables=this.uiDialog.find(":tabbable"),first=tabbables.filter(":first"),last=tabbables.filter(":last");if((event.target===last[0]||event.target===this.uiDialog[0])&&!event.shiftKey){first.focus(1);event.preventDefault()}else if((event.target===
first[0]||event.target===this.uiDialog[0])&&event.shiftKey){last.focus(1);event.preventDefault()}},mousedown:function(event){if(this._moveToTop(event))this._focusTabbable()}});if(!this.element.find("[aria-describedby]").length)this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var uiDialogTitle;this.uiDialogTitlebar=$("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog);this._on(this.uiDialogTitlebar,
{mousedown:function(event){if(!$(event.target).closest(".ui-dialog-titlebar-close"))this.uiDialog.focus()}});this.uiDialogTitlebarClose=$("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:false}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar);this._on(this.uiDialogTitlebarClose,{click:function(event){event.preventDefault();this.close(event)}});uiDialogTitle=$("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar);
this._title(uiDialogTitle);this.uiDialog.attr({"aria-labelledby":uiDialogTitle.attr("id")})},_title:function(title){if(!this.options.title)title.html("&#160;");title.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=$("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");this.uiButtonSet=$("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane);this._createButtons()},_createButtons:function(){var that=this,buttons=this.options.buttons;
this.uiDialogButtonPane.remove();this.uiButtonSet.empty();if($.isEmptyObject(buttons)){this.uiDialog.removeClass("ui-dialog-buttons");return}$.each(buttons,function(name,props){var click,buttonOptions;props=$.isFunction(props)?{click:props,text:name}:props;props=$.extend({type:"button"},props);click=props.click;props.click=function(){click.apply(that.element[0],arguments)};buttonOptions={icons:props.icons,text:props.showText};delete props.icons;delete props.showText;$("<button></button>",props).button(buttonOptions).appendTo(that.uiButtonSet)});
this.uiDialog.addClass("ui-dialog-buttons");this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){var that=this,options=this.options;function filteredUi(ui){return{position:ui.position,offset:ui.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(event,ui){$(this).addClass("ui-dialog-dragging");that._trigger("dragStart",event,filteredUi(ui))},drag:function(event,ui){that._trigger("drag",
event,filteredUi(ui))},stop:function(event,ui){options.position=[ui.position.left-that.document.scrollLeft(),ui.position.top-that.document.scrollTop()];$(this).removeClass("ui-dialog-dragging");that._trigger("dragStop",event,filteredUi(ui))}})},_makeResizable:function(){var that=this,options=this.options,handles=options.resizable,position=this.uiDialog.css("position"),resizeHandles=typeof handles==="string"?handles:"n,e,s,w,se,sw,ne,nw";function filteredUi(ui){return{originalPosition:ui.originalPosition,
originalSize:ui.originalSize,position:ui.position,size:ui.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:options.maxWidth,maxHeight:options.maxHeight,minWidth:options.minWidth,minHeight:this._minHeight(),handles:resizeHandles,start:function(event,ui){$(this).addClass("ui-dialog-resizing");that._trigger("resizeStart",event,filteredUi(ui))},resize:function(event,ui){that._trigger("resize",event,filteredUi(ui))},stop:function(event,
ui){options.height=$(this).height();options.width=$(this).width();$(this).removeClass("ui-dialog-resizing");that._trigger("resizeStop",event,filteredUi(ui))}}).css("position",position)},_minHeight:function(){var options=this.options;return options.height==="auto"?options.minHeight:Math.min(options.minHeight,options.height)},_position:function(){var isVisible=this.uiDialog.is(":visible");if(!isVisible)this.uiDialog.show();this.uiDialog.position(this.options.position);if(!isVisible)this.uiDialog.hide()},
_setOptions:function(options){var that=this,resize=false,resizableOptions={};$.each(options,function(key,value){that._setOption(key,value);if(key in sizeRelatedOptions)resize=true;if(key in resizableRelatedOptions)resizableOptions[key]=value});if(resize){this._size();this._position()}if(this.uiDialog.is(":data(ui-resizable)"))this.uiDialog.resizable("option",resizableOptions)},_setOption:function(key,value){var isDraggable,isResizable,uiDialog=this.uiDialog;if(key==="dialogClass")uiDialog.removeClass(this.options.dialogClass).addClass(value);
if(key==="disabled")return;this._super(key,value);if(key==="appendTo")this.uiDialog.appendTo(this._appendTo());if(key==="buttons")this._createButtons();if(key==="closeText")this.uiDialogTitlebarClose.button({label:""+value});if(key==="draggable"){isDraggable=uiDialog.is(":data(ui-draggable)");if(isDraggable&&!value)uiDialog.draggable("destroy");if(!isDraggable&&value)this._makeDraggable()}if(key==="position")this._position();if(key==="resizable"){isResizable=uiDialog.is(":data(ui-resizable)");if(isResizable&&
!value)uiDialog.resizable("destroy");if(isResizable&&typeof value==="string")uiDialog.resizable("option","handles",value);if(!isResizable&&value!==false)this._makeResizable()}if(key==="title")this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var nonContentHeight,minContentHeight,maxContentHeight,options=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0});if(options.minWidth>options.width)options.width=options.minWidth;nonContentHeight=
this.uiDialog.css({height:"auto",width:options.width}).outerHeight();minContentHeight=Math.max(0,options.minHeight-nonContentHeight);maxContentHeight=typeof options.maxHeight==="number"?Math.max(0,options.maxHeight-nonContentHeight):"none";if(options.height==="auto")this.element.css({minHeight:minContentHeight,maxHeight:maxContentHeight,height:"auto"});else this.element.height(Math.max(0,options.height-nonContentHeight));if(this.uiDialog.is(":data(ui-resizable)"))this.uiDialog.resizable("option",
"minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;if(!$.ui.dialog.overlayInstances)this._delay(function(){if($.ui.dialog.overlayInstances)this._on(this.document,{focusin:function(event){if(!$(event.target).closest(".ui-dialog").length){event.preventDefault();$(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable()}}})});this.overlay=$("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body);this._on(this.overlay,
{mousedown:"_keepFocus"});$.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;$.ui.dialog.overlayInstances--;if(!$.ui.dialog.overlayInstances)this._off(this.document,"focusin");this.overlay.remove()}});$.ui.dialog.overlayInstances=0;if($.uiBackCompat!==false)$.widget("ui.dialog",$.ui.dialog,{_position:function(){var position=this.options.position,myAt=[],offset=[0,0],isVisible;if(position){if(typeof position==="string"||typeof position==="object"&&"0"in position){myAt=
position.split?position.split(" "):[position[0],position[1]];if(myAt.length===1)myAt[1]=myAt[0];$.each(["left","top"],function(i,offsetPosition){if(+myAt[i]===myAt[i]){offset[i]=myAt[i];myAt[i]=offsetPosition}});position={my:myAt[0]+(offset[0]<0?offset[0]:"+"+offset[0])+" "+myAt[1]+(offset[1]<0?offset[1]:"+"+offset[1]),at:myAt.join(" ")}}position=$.extend({},$.ui.dialog.prototype.options.position,position)}else position=$.ui.dialog.prototype.options.position;isVisible=this.uiDialog.is(":visible");
if(!isVisible)this.uiDialog.show();this.uiDialog.position(position);if(!isVisible)this.uiDialog.hide()}})})(jQuery);
(function($,undefined){$.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+
this.eventNamespace,$.proxy(function(event){if(this.options.disabled)event.preventDefault()},this));if(this.options.disabled)this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(event){event.preventDefault()},"click .ui-state-disabled > a":function(event){event.preventDefault()},"click .ui-menu-item:has(a)":function(event){var target=$(event.target).closest(".ui-menu-item");if(!this.mouseHandled&&target.not(".ui-state-disabled").length){this.mouseHandled=
true;this.select(event);if(target.has(".ui-menu").length)this.expand(event);else if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1)clearTimeout(this.timer)}}},"mouseenter .ui-menu-item":function(event){var target=$(event.currentTarget);target.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(event,target)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(event,keepActiveItem){var item=
this.active||this.element.children(".ui-menu-item").eq(0);if(!keepActiveItem)this.focus(event,item)},blur:function(event){this._delay(function(){if(!$.contains(this.element[0],this.document[0].activeElement))this.collapseAll(event)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(event){if(!$(event.target).closest(".ui-menu").length)this.collapseAll(event);this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var elem=$(this);if(elem.data("ui-menu-submenu-carat"))elem.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(event){var match,prev,character,skip,regex,
preventDefault=true;function escape(value){return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(event.keyCode){case $.ui.keyCode.PAGE_UP:this.previousPage(event);break;case $.ui.keyCode.PAGE_DOWN:this.nextPage(event);break;case $.ui.keyCode.HOME:this._move("first","first",event);break;case $.ui.keyCode.END:this._move("last","last",event);break;case $.ui.keyCode.UP:this.previous(event);break;case $.ui.keyCode.DOWN:this.next(event);break;case $.ui.keyCode.LEFT:this.collapse(event);break;
case $.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled"))this.expand(event);break;case $.ui.keyCode.ENTER:case $.ui.keyCode.SPACE:this._activate(event);break;case $.ui.keyCode.ESCAPE:this.collapse(event);break;default:preventDefault=false;prev=this.previousFilter||"";character=String.fromCharCode(event.keyCode);skip=false;clearTimeout(this.filterTimer);if(character===prev)skip=true;else character=prev+character;regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())});
match=skip&&match.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):match;if(!match.length){character=String.fromCharCode(event.keyCode);regex=new RegExp("^"+escape(character),"i");match=this.activeMenu.children(".ui-menu-item").filter(function(){return regex.test($(this).children("a").text())})}if(match.length){this.focus(event,match);if(match.length>1){this.previousFilter=character;this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)}else delete this.previousFilter}else delete this.previousFilter}if(preventDefault)event.preventDefault()},
_activate:function(event){if(!this.active.is(".ui-state-disabled"))if(this.active.children("a[aria-haspopup='true']").length)this.expand(event);else this.select(event)},refresh:function(){var menus,icon=this.options.icons.submenu,submenus=this.element.find(this.options.menus);submenus.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var menu=$(this),item=menu.prev("a"),
submenuCarat=$("<span>").addClass("ui-menu-icon ui-icon "+icon).data("ui-menu-submenu-carat",true);item.attr("aria-haspopup","true").prepend(submenuCarat);menu.attr("aria-labelledby",item.attr("id"))});menus=submenus.add(this.element);menus.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});menus.children(":not(.ui-menu-item)").each(function(){var item=$(this);if(!/[^\-\u2014\u2013\s]/.test(item.text()))item.addClass("ui-widget-content ui-menu-divider")});
menus.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!$.contains(this.element[0],this.active[0]))this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(key,value){if(key==="icons")this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(value.submenu);this._super(key,value)},focus:function(event,item){var nested,focused;this.blur(event,event&&event.type==="focus");this._scrollIntoView(item);
this.active=item.first();focused=this.active.children("a").addClass("ui-state-focus");if(this.options.role)this.element.attr("aria-activedescendant",focused.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(event&&event.type==="keydown")this._close();else this.timer=this._delay(function(){this._close()},this.delay);nested=item.children(".ui-menu");if(nested.length&&/^mouse/.test(event.type))this._startOpening(nested);this.activeMenu=item.parent();
this._trigger("focus",event,{item:item})},_scrollIntoView:function(item){var borderTop,paddingTop,offset,scroll,elementHeight,itemHeight;if(this._hasScroll()){borderTop=parseFloat($.css(this.activeMenu[0],"borderTopWidth"))||0;paddingTop=parseFloat($.css(this.activeMenu[0],"paddingTop"))||0;offset=item.offset().top-this.activeMenu.offset().top-borderTop-paddingTop;scroll=this.activeMenu.scrollTop();elementHeight=this.activeMenu.height();itemHeight=item.height();if(offset<0)this.activeMenu.scrollTop(scroll+
offset);else if(offset+itemHeight>elementHeight)this.activeMenu.scrollTop(scroll+offset-elementHeight+itemHeight)}},blur:function(event,fromFocus){if(!fromFocus)clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",event,{item:this.active})},_startOpening:function(submenu){clearTimeout(this.timer);if(submenu.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close();this._open(submenu)},
this.delay)},_open:function(submenu){var position=$.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(submenu.parents(".ui-menu")).hide().attr("aria-hidden","true");submenu.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(position)},collapseAll:function(event,all){clearTimeout(this.timer);this.timer=this._delay(function(){var currentMenu=all?this.element:$(event&&event.target).closest(this.element.find(".ui-menu"));if(!currentMenu.length)currentMenu=
this.element;this._close(currentMenu);this.blur(event);this.activeMenu=currentMenu},this.delay)},_close:function(startMenu){if(!startMenu)startMenu=this.active?this.active.parent():this.element;startMenu.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(event){var newItem=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(newItem&&newItem.length){this._close();this.focus(event,
newItem)}},expand:function(event){var newItem=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(newItem&&newItem.length){this._open(newItem.parent());this._delay(function(){this.focus(event,newItem)})}},next:function(event){this._move("next","first",event)},previous:function(event){this._move("prev","last",event)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},
_move:function(direction,filter,event){var next;if(this.active)if(direction==="first"||direction==="last")next=this.active[direction==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1);else next=this.active[direction+"All"](".ui-menu-item").eq(0);if(!next||!next.length||!this.active)next=this.activeMenu.children(".ui-menu-item")[filter]();this.focus(event,next)},nextPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isLastItem())return;if(this._hasScroll()){base=
this.active.offset().top;height=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){item=$(this);return item.offset().top-base-height<0});this.focus(event,item)}else this.focus(event,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())},previousPage:function(event){var item,base,height;if(!this.active){this.next(event);return}if(this.isFirstItem())return;if(this._hasScroll()){base=this.active.offset().top;height=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){item=
$(this);return item.offset().top-base+height>0});this.focus(event,item)}else this.focus(event,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(event){this.active=this.active||$(event.target).closest(".ui-menu-item");var ui={item:this.active};if(!this.active.has(".ui-menu").length)this.collapseAll(event,true);this._trigger("select",event,ui)}})})(jQuery);
(function($,undefined){$.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue();this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min});this.valueDiv=$("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(newValue){if(newValue===undefined)return this.options.value;this.options.value=this._constrainedValue(newValue);this._refreshValue()},_constrainedValue:function(newValue){if(newValue===undefined)newValue=this.options.value;this.indeterminate=newValue===false;if(typeof newValue!=="number")newValue=0;return this.indeterminate?false:Math.min(this.options.max,Math.max(this.min,newValue))},_setOptions:function(options){var value=options.value;delete options.value;
this._super(options);this.options.value=this._constrainedValue(value);this._refreshValue()},_setOption:function(key,value){if(key==="max")value=Math.max(this.min,value);this._super(key,value)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var value=this.options.value,percentage=this._percentage();this.valueDiv.toggle(this.indeterminate||value>this.min).toggleClass("ui-corner-right",value===this.options.max).width(percentage.toFixed(0)+
"%");this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate);if(this.indeterminate){this.element.removeAttr("aria-valuenow");if(!this.overlayDiv)this.overlayDiv=$("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv)}else{this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":value});if(this.overlayDiv){this.overlayDiv.remove();this.overlayDiv=null}}if(this.oldValue!==value){this.oldValue=value;this._trigger("change")}if(value===this.options.max)this._trigger("complete")}})})(jQuery);
(function($,undefined){var numPages=5;$.widget("ui.slider",$.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var i,handleCount,o=this.options,existingHandles=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),handle="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",
handles=[];this._keySliding=false;this._mouseSliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider"+" ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all");this.range=$([]);if(o.range){if(o.range===true)if(!o.values)o.values=[this._valueMin(),this._valueMin()];else if(o.values.length&&o.values.length!==2)o.values=[o.values[0],o.values[0]];else if($.isArray(o.values))o.values=o.values.slice(0);
this.range=$("<div></div>").appendTo(this.element).addClass("ui-slider-range"+" ui-widget-header"+(o.range==="min"||o.range==="max"?" ui-slider-range-"+o.range:""))}handleCount=o.values&&o.values.length||1;for(i=existingHandles.length;i<handleCount;i++)handles.push(handle);this.handles=existingHandles.add($(handles.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(event){event.preventDefault()}).mouseenter(function(){if(!o.disabled)$(this).addClass("ui-state-hover")}).mouseleave(function(){$(this).removeClass("ui-state-hover")}).focus(function(){if(!o.disabled){$(".ui-slider .ui-state-focus").removeClass("ui-state-focus");
$(this).addClass("ui-state-focus")}else $(this).blur()}).blur(function(){$(this).removeClass("ui-state-focus")});this.handles.each(function(i){$(this).data("ui-slider-handle-index",i)});this._setOption("disabled",o.disabled);this._on(this.handles,this._handleEvents);this._refreshValue();this._animateOff=false},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider"+" ui-slider-horizontal"+" ui-slider-vertical"+" ui-widget"+" ui-widget-content"+" ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(event){var position,normValue,distance,closestHandle,index,allowed,offset,mouseOverHandle,that=this,o=this.options;if(o.disabled)return false;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();position={x:event.pageX,y:event.pageY};normValue=this._normValueFromMouse(position);distance=this._valueMax()-this._valueMin()+1;this.handles.each(function(i){var thisDistance=Math.abs(normValue-
that.values(i));if(distance>thisDistance||distance===thisDistance&&(i===that._lastChangedValue||that.values(i)===o.min)){distance=thisDistance;closestHandle=$(this);index=i}});allowed=this._start(event,index);if(allowed===false)return false;this._mouseSliding=true;this._handleIndex=index;closestHandle.addClass("ui-state-active").focus();offset=closestHandle.offset();mouseOverHandle=!$(event.target).parents().addBack().is(".ui-slider-handle");this._clickOffset=mouseOverHandle?{left:0,top:0}:{left:event.pageX-
offset.left-closestHandle.width()/2,top:event.pageY-offset.top-closestHandle.height()/2-(parseInt(closestHandle.css("borderTopWidth"),10)||0)-(parseInt(closestHandle.css("borderBottomWidth"),10)||0)+(parseInt(closestHandle.css("marginTop"),10)||0)};if(!this.handles.hasClass("ui-state-hover"))this._slide(event,index,normValue);this._animateOff=true;return true},_mouseStart:function(){return true},_mouseDrag:function(event){var position={x:event.pageX,y:event.pageY},normValue=this._normValueFromMouse(position);
this._slide(event,this._handleIndex,normValue);return false},_mouseStop:function(event){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(event,this._handleIndex);this._change(event,this._handleIndex);this._handleIndex=null;this._clickOffset=null;this._animateOff=false;return false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(position){var pixelTotal,pixelMouse,percentMouse,
valueTotal,valueMouse;if(this.orientation==="horizontal"){pixelTotal=this.elementSize.width;pixelMouse=position.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{pixelTotal=this.elementSize.height;pixelMouse=position.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}percentMouse=pixelMouse/pixelTotal;if(percentMouse>1)percentMouse=1;if(percentMouse<0)percentMouse=0;if(this.orientation==="vertical")percentMouse=1-percentMouse;valueTotal=this._valueMax()-
this._valueMin();valueMouse=this._valueMin()+percentMouse*valueTotal;return this._trimAlignValue(valueMouse)},_start:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}return this._trigger("start",event,uiHash)},_slide:function(event,index,newVal){var otherVal,newValues,allowed;if(this.options.values&&this.options.values.length){otherVal=this.values(index?0:
1);if(this.options.values.length===2&&this.options.range===true&&(index===0&&newVal>otherVal||index===1&&newVal<otherVal))newVal=otherVal;if(newVal!==this.values(index)){newValues=this.values();newValues[index]=newVal;allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal,values:newValues});otherVal=this.values(index?0:1);if(allowed!==false)this.values(index,newVal,true)}}else if(newVal!==this.value()){allowed=this._trigger("slide",event,{handle:this.handles[index],value:newVal});
if(allowed!==false)this.value(newVal)}},_stop:function(event,index){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=this.values()}this._trigger("stop",event,uiHash)},_change:function(event,index){if(!this._keySliding&&!this._mouseSliding){var uiHash={handle:this.handles[index],value:this.value()};if(this.options.values&&this.options.values.length){uiHash.value=this.values(index);uiHash.values=
this.values()}this._lastChangedValue=index;this._trigger("change",event,uiHash)}},value:function(newValue){if(arguments.length){this.options.value=this._trimAlignValue(newValue);this._refreshValue();this._change(null,0);return}return this._value()},values:function(index,newValue){var vals,newValues,i;if(arguments.length>1){this.options.values[index]=this._trimAlignValue(newValue);this._refreshValue();this._change(null,index);return}if(arguments.length)if($.isArray(arguments[0])){vals=this.options.values;
newValues=arguments[0];for(i=0;i<vals.length;i+=1){vals[i]=this._trimAlignValue(newValues[i]);this._change(null,i)}this._refreshValue()}else if(this.options.values&&this.options.values.length)return this._values(index);else return this.value();else return this._values()},_setOption:function(key,value){var i,valsLength=0;if($.isArray(this.options.values))valsLength=this.options.values.length;$.Widget.prototype._setOption.apply(this,arguments);switch(key){case "disabled":if(value){this.handles.filter(".ui-state-focus").blur();
this.handles.removeClass("ui-state-hover");this.handles.prop("disabled",true)}else this.handles.prop("disabled",false);break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case "value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case "values":this._animateOff=true;this._refreshValue();for(i=0;i<valsLength;i+=1)this._change(null,
i);this._animateOff=false;break;case "min":case "max":this._animateOff=true;this._refreshValue();this._animateOff=false;break}},_value:function(){var val=this.options.value;val=this._trimAlignValue(val);return val},_values:function(index){var val,vals,i;if(arguments.length){val=this.options.values[index];val=this._trimAlignValue(val);return val}else{vals=this.options.values.slice();for(i=0;i<vals.length;i+=1)vals[i]=this._trimAlignValue(vals[i]);return vals}},_trimAlignValue:function(val){if(val<=
this._valueMin())return this._valueMin();if(val>=this._valueMax())return this._valueMax();var step=this.options.step>0?this.options.step:1,valModStep=(val-this._valueMin())%step,alignValue=val-valModStep;if(Math.abs(valModStep)*2>=step)alignValue+=valModStep>0?step:-step;return parseFloat(alignValue.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var lastValPercent,valPercent,value,valueMin,valueMax,oRange=this.options.range,
o=this.options,that=this,animate=!this._animateOff?o.animate:false,_set={};if(this.options.values&&this.options.values.length)this.handles.each(function(i){valPercent=(that.values(i)-that._valueMin())/(that._valueMax()-that._valueMin())*100;_set[that.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";$(this).stop(1,1)[animate?"animate":"css"](_set,o.animate);if(that.options.range===true)if(that.orientation==="horizontal"){if(i===0)that.range.stop(1,1)[animate?"animate":"css"]({left:valPercent+
"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({width:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}else{if(i===0)that.range.stop(1,1)[animate?"animate":"css"]({bottom:valPercent+"%"},o.animate);if(i===1)that.range[animate?"animate":"css"]({height:valPercent-lastValPercent+"%"},{queue:false,duration:o.animate})}lastValPercent=valPercent});else{value=this.value();valueMin=this._valueMin();valueMax=this._valueMax();valPercent=valueMax!==valueMin?(value-valueMin)/(valueMax-
valueMin)*100:0;_set[this.orientation==="horizontal"?"left":"bottom"]=valPercent+"%";this.handle.stop(1,1)[animate?"animate":"css"](_set,o.animate);if(oRange==="min"&&this.orientation==="horizontal")this.range.stop(1,1)[animate?"animate":"css"]({width:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="horizontal")this.range[animate?"animate":"css"]({width:100-valPercent+"%"},{queue:false,duration:o.animate});if(oRange==="min"&&this.orientation==="vertical")this.range.stop(1,1)[animate?
"animate":"css"]({height:valPercent+"%"},o.animate);if(oRange==="max"&&this.orientation==="vertical")this.range[animate?"animate":"css"]({height:100-valPercent+"%"},{queue:false,duration:o.animate})}},_handleEvents:{keydown:function(event){var allowed,curVal,newVal,step,index=$(event.target).data("ui-slider-handle-index");switch(event.keyCode){case $.ui.keyCode.HOME:case $.ui.keyCode.END:case $.ui.keyCode.PAGE_UP:case $.ui.keyCode.PAGE_DOWN:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:event.preventDefault();
if(!this._keySliding){this._keySliding=true;$(event.target).addClass("ui-state-active");allowed=this._start(event,index);if(allowed===false)return}break}step=this.options.step;if(this.options.values&&this.options.values.length)curVal=newVal=this.values(index);else curVal=newVal=this.value();switch(event.keyCode){case $.ui.keyCode.HOME:newVal=this._valueMin();break;case $.ui.keyCode.END:newVal=this._valueMax();break;case $.ui.keyCode.PAGE_UP:newVal=this._trimAlignValue(curVal+(this._valueMax()-this._valueMin())/
numPages);break;case $.ui.keyCode.PAGE_DOWN:newVal=this._trimAlignValue(curVal-(this._valueMax()-this._valueMin())/numPages);break;case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:if(curVal===this._valueMax())return;newVal=this._trimAlignValue(curVal+step);break;case $.ui.keyCode.DOWN:case $.ui.keyCode.LEFT:if(curVal===this._valueMin())return;newVal=this._trimAlignValue(curVal-step);break}this._slide(event,index,newVal)},keyup:function(event){var index=$(event.target).data("ui-slider-handle-index");if(this._keySliding){this._keySliding=
false;this._stop(event,index);this._change(event,index);$(event.target).removeClass("ui-state-active")}}}})})(jQuery);
(function($){function modifier(fn){return function(){var previous=this.element.val();fn.apply(this,arguments);this._refresh();if(previous!==this.element.val())this._trigger("change")}}$.widget("ui.spinner",{version:"1.10.0",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:true,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",
this.options.max);this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),true);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var options={},element=this.element;$.each(["min","max","step"],function(i,option){var value=element.attr(option);if(value!==undefined&&value.length)options[option]=value});return options},_events:{keydown:function(event){if(this._start(event)&&
this._keydown(event))event.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(event){if(this.cancelBlur){delete this.cancelBlur;return}this._refresh();if(this.previous!==this.element.val())this._trigger("change",event)},mousewheel:function(event,delta){if(!delta)return;if(!this.spinning&&!this._start(event))return false;this._spin((delta>0?1:-1)*this.options.step,event);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){if(this.spinning)this._stop(event)},
100);event.preventDefault()},"mousedown .ui-spinner-button":function(event){var previous;previous=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();function checkFocus(){var isActive=this.element[0]===this.document[0].activeElement;if(!isActive){this.element.focus();this.previous=previous;this._delay(function(){this.previous=previous})}}event.preventDefault();checkFocus.call(this);this.cancelBlur=true;this._delay(function(){delete this.cancelBlur;checkFocus.call(this)});
if(this._start(event)===false)return;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(event){if(!$(event.currentTarget).hasClass("ui-state-active"))return;if(this._start(event)===false)return false;this._repeat(null,$(event.currentTarget).hasClass("ui-spinner-up")?1:-1,event)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var uiSpinner=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete",
"off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=uiSpinner.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");if(this.buttons.height()>Math.ceil(uiSpinner.height()*0.5)&&uiSpinner.height()>0)uiSpinner.height(uiSpinner.height());if(this.options.disabled)this.disable()},_keydown:function(event){var options=this.options,keyCode=$.ui.keyCode;switch(event.keyCode){case keyCode.UP:this._repeat(null,
1,event);return true;case keyCode.DOWN:this._repeat(null,-1,event);return true;case keyCode.PAGE_UP:this._repeat(null,options.page,event);return true;case keyCode.PAGE_DOWN:this._repeat(null,-options.page,event);return true}return false},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return""+"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'>"+"<span class='ui-icon "+this.options.icons.up+"'>&#9650;</span>"+
"</a>"+"<a class='ui-spinner-button ui-spinner-down ui-corner-br'>"+"<span class='ui-icon "+this.options.icons.down+"'>&#9660;</span>"+"</a>"},_start:function(event){if(!this.spinning&&this._trigger("start",event)===false)return false;if(!this.counter)this.counter=1;this.spinning=true;return true},_repeat:function(i,steps,event){i=i||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,steps,event)},i);this._spin(steps*this.options.step,event)},_spin:function(step,event){var value=
this.value()||0;if(!this.counter)this.counter=1;value=this._adjustValue(value+step*this._increment(this.counter));if(!this.spinning||this._trigger("spin",event,{value:value})!==false){this._value(value);this.counter++}},_increment:function(i){var incremental=this.options.incremental;if(incremental)return $.isFunction(incremental)?incremental(i):Math.floor(i*i*i/5E4-i*i/500+17*i/200+1);return 1},_precision:function(){var precision=this._precisionOf(this.options.step);if(this.options.min!==null)precision=
Math.max(precision,this._precisionOf(this.options.min));return precision},_precisionOf:function(num){var str=num.toString(),decimal=str.indexOf(".");return decimal===-1?0:str.length-decimal-1},_adjustValue:function(value){var base,aboveMin,options=this.options;base=options.min!==null?options.min:0;aboveMin=value-base;aboveMin=Math.round(aboveMin/options.step)*options.step;value=base+aboveMin;value=parseFloat(value.toFixed(this._precision()));if(options.max!==null&&value>options.max)return options.max;
if(options.min!==null&&value<options.min)return options.min;return value},_stop:function(event){if(!this.spinning)return;clearTimeout(this.timer);clearTimeout(this.mousewheelTimer);this.counter=0;this.spinning=false;this._trigger("stop",event)},_setOption:function(key,value){if(key==="culture"||key==="numberFormat"){var prevValue=this._parse(this.element.val());this.options[key]=value;this.element.val(this._format(prevValue));return}if(key==="max"||key==="min"||key==="step")if(typeof value==="string")value=
this._parse(value);if(key==="icons"){this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(value.up);this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(value.down)}this._super(key,value);if(key==="disabled")if(value){this.element.prop("disabled",true);this.buttons.button("disable")}else{this.element.prop("disabled",false);this.buttons.button("enable")}},_setOptions:modifier(function(options){this._super(options);this._value(this.element.val())}),
_parse:function(val){if(typeof val==="string"&&val!=="")val=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(val,10,this.options.culture):+val;return val===""||isNaN(val)?null:val},_format:function(value){if(value==="")return"";return window.Globalize&&this.options.numberFormat?Globalize.format(value,this.options.numberFormat,this.options.culture):value},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},
_value:function(value,allowAny){var parsed;if(value!==""){parsed=this._parse(value);if(parsed!==null){if(!allowAny)parsed=this._adjustValue(parsed);value=this._format(parsed)}}this.element.val(value);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",false).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:modifier(function(steps){this._stepUp(steps)}),
_stepUp:function(steps){if(this._start()){this._spin((steps||1)*this.options.step);this._stop()}},stepDown:modifier(function(steps){this._stepDown(steps)}),_stepDown:function(steps){if(this._start()){this._spin((steps||1)*-this.options.step);this._stop()}},pageUp:modifier(function(pages){this._stepUp((pages||1)*this.options.page)}),pageDown:modifier(function(pages){this._stepDown((pages||1)*this.options.page)}),value:function(newVal){if(!arguments.length)return this._parse(this.element.val());modifier(this._value).call(this,
newVal)},widget:function(){return this.uiSpinner}})})(jQuery);
(function($,undefined){var tabId=0,rhash=/#.*$/;function getNextTabId(){return++tabId}function isLocal(anchor){return anchor.hash.length>1&&decodeURIComponent(anchor.href.replace(rhash,""))===decodeURIComponent(location.href.replace(rhash,""))}$.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:false,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var that=this,options=this.options;
this.running=false;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",options.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(event){if($(this).is(".ui-state-disabled"))event.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){if($(this).closest("li").is(".ui-state-disabled"))this.blur()});this._processTabs();options.active=this._initialActive();if($.isArray(options.disabled))options.disabled=
$.unique(options.disabled.concat($.map(this.tabs.filter(".ui-state-disabled"),function(li){return that.tabs.index(li)}))).sort();if(this.options.active!==false&&this.anchors.length)this.active=this._findActive(options.active);else this.active=$();this._refresh();if(this.active.length)this.load(options.active)},_initialActive:function(){var active=this.options.active,collapsible=this.options.collapsible,locationHash=location.hash.substring(1);if(active===null){if(locationHash)this.tabs.each(function(i,
tab){if($(tab).attr("aria-controls")===locationHash){active=i;return false}});if(active===null)active=this.tabs.index(this.tabs.filter(".ui-tabs-active"));if(active===null||active===-1)active=this.tabs.length?0:false}if(active!==false){active=this.tabs.index(this.tabs.eq(active));if(active===-1)active=collapsible?false:0}if(!collapsible&&active===false&&this.anchors.length)active=0;return active},_getCreateEventData:function(){return{tab:this.active,panel:!this.active.length?$():this._getPanelForTab(this.active)}},
_tabKeydown:function(event){var focusedTab=$(this.document[0].activeElement).closest("li"),selectedIndex=this.tabs.index(focusedTab),goingForward=true;if(this._handlePageNav(event))return;switch(event.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:selectedIndex++;break;case $.ui.keyCode.UP:case $.ui.keyCode.LEFT:goingForward=false;selectedIndex--;break;case $.ui.keyCode.END:selectedIndex=this.anchors.length-1;break;case $.ui.keyCode.HOME:selectedIndex=0;break;case $.ui.keyCode.SPACE:event.preventDefault();
clearTimeout(this.activating);this._activate(selectedIndex);return;case $.ui.keyCode.ENTER:event.preventDefault();clearTimeout(this.activating);this._activate(selectedIndex===this.options.active?false:selectedIndex);return;default:return}event.preventDefault();clearTimeout(this.activating);selectedIndex=this._focusNextTab(selectedIndex,goingForward);if(!event.ctrlKey){focusedTab.attr("aria-selected","false");this.tabs.eq(selectedIndex).attr("aria-selected","true");this.activating=this._delay(function(){this.option("active",
selectedIndex)},this.delay)}},_panelKeydown:function(event){if(this._handlePageNav(event))return;if(event.ctrlKey&&event.keyCode===$.ui.keyCode.UP){event.preventDefault();this.active.focus()}},_handlePageNav:function(event){if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_UP){this._activate(this._focusNextTab(this.options.active-1,false));return true}if(event.altKey&&event.keyCode===$.ui.keyCode.PAGE_DOWN){this._activate(this._focusNextTab(this.options.active+1,true));return true}},_findNextTab:function(index,
goingForward){var lastTabIndex=this.tabs.length-1;function constrain(){if(index>lastTabIndex)index=0;if(index<0)index=lastTabIndex;return index}while($.inArray(constrain(),this.options.disabled)!==-1)index=goingForward?index+1:index-1;return index},_focusNextTab:function(index,goingForward){index=this._findNextTab(index,goingForward);this.tabs.eq(index).focus();return index},_setOption:function(key,value){if(key==="active"){this._activate(value);return}if(key==="disabled"){this._setupDisabled(value);
return}this._super(key,value);if(key==="collapsible"){this.element.toggleClass("ui-tabs-collapsible",value);if(!value&&this.options.active===false)this._activate(0)}if(key==="event")this._setupEvents(value);if(key==="heightStyle")this._setupHeightStyle(value)},_tabId:function(tab){return tab.attr("aria-controls")||"ui-tabs-"+getNextTabId()},_sanitizeSelector:function(hash){return hash?hash.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var options=this.options,lis=this.tablist.children(":has(a[href])");
options.disabled=$.map(lis.filter(".ui-state-disabled"),function(tab){return lis.index(tab)});this._processTabs();if(options.active===false||!this.anchors.length){options.active=false;this.active=$()}else if(this.active.length&&!$.contains(this.tablist[0],this.active[0]))if(this.tabs.length===options.disabled.length){options.active=false;this.active=$()}else this._activate(this._findNextTab(Math.max(0,options.active-1),false));else options.active=this.tabs.index(this.active);this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled);
this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});if(!this.active.length)this.tabs.eq(0).attr("tabIndex",0);else{this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0});this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})}},
_processTabs:function(){var that=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return $("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=$();this.anchors.each(function(i,anchor){var selector,panel,
panelId,anchorId=$(anchor).uniqueId().attr("id"),tab=$(anchor).closest("li"),originalAriaControls=tab.attr("aria-controls");if(isLocal(anchor)){selector=anchor.hash;panel=that.element.find(that._sanitizeSelector(selector))}else{panelId=that._tabId(tab);selector="#"+panelId;panel=that.element.find(selector);if(!panel.length){panel=that._createPanel(panelId);panel.insertAfter(that.panels[i-1]||that.tablist)}panel.attr("aria-live","polite")}if(panel.length)that.panels=that.panels.add(panel);if(originalAriaControls)tab.data("ui-tabs-aria-controls",
originalAriaControls);tab.attr({"aria-controls":selector.substring(1),"aria-labelledby":anchorId});panel.attr("aria-labelledby",anchorId)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(id){return $("<div>").attr("id",id).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",true)},_setupDisabled:function(disabled){if($.isArray(disabled))if(!disabled.length)disabled=
false;else if(disabled.length===this.anchors.length)disabled=true;for(var i=0,li;li=this.tabs[i];i++)if(disabled===true||$.inArray(i,disabled)!==-1)$(li).addClass("ui-state-disabled").attr("aria-disabled","true");else $(li).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=disabled},_setupEvents:function(event){var events={click:function(event){event.preventDefault()}};if(event)$.each(event.split(" "),function(index,eventName){events[eventName]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));
this._on(this.anchors,events);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(heightStyle){var maxHeight,parent=this.element.parent();if(heightStyle==="fill"){maxHeight=parent.height();maxHeight-=this.element.outerHeight()-this.element.height();this.element.siblings(":visible").each(function(){var elem=$(this),position=elem.css("position");if(position==="absolute"||position===
"fixed")return;maxHeight-=elem.outerHeight(true)});this.element.children().not(this.panels).each(function(){maxHeight-=$(this).outerHeight(true)});this.panels.each(function(){$(this).height(Math.max(0,maxHeight-$(this).innerHeight()+$(this).height()))}).css("overflow","auto")}else if(heightStyle==="auto"){maxHeight=0;this.panels.each(function(){maxHeight=Math.max(maxHeight,$(this).height("").height())}).height(maxHeight)}},_eventHandler:function(event){var options=this.options,active=this.active,
anchor=$(event.currentTarget),tab=anchor.closest("li"),clickedIsActive=tab[0]===active[0],collapsing=clickedIsActive&&options.collapsible,toShow=collapsing?$():this._getPanelForTab(tab),toHide=!active.length?$():this._getPanelForTab(active),eventData={oldTab:active,oldPanel:toHide,newTab:collapsing?$():tab,newPanel:toShow};event.preventDefault();if(tab.hasClass("ui-state-disabled")||tab.hasClass("ui-tabs-loading")||this.running||clickedIsActive&&!options.collapsible||this._trigger("beforeActivate",
event,eventData)===false)return;options.active=collapsing?false:this.tabs.index(tab);this.active=clickedIsActive?$():tab;if(this.xhr)this.xhr.abort();if(!toHide.length&&!toShow.length)$.error("jQuery UI Tabs: Mismatching fragment identifier.");if(toShow.length)this.load(this.tabs.index(tab),event);this._toggle(event,eventData)},_toggle:function(event,eventData){var that=this,toShow=eventData.newPanel,toHide=eventData.oldPanel;this.running=true;function complete(){that.running=false;that._trigger("activate",
event,eventData)}function show(){eventData.newTab.closest("li").addClass("ui-tabs-active ui-state-active");if(toShow.length&&that.options.show)that._show(toShow,that.options.show,complete);else{toShow.show();complete()}}if(toHide.length&&this.options.hide)this._hide(toHide,this.options.hide,function(){eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");show()});else{eventData.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");toHide.hide();show()}toHide.attr({"aria-expanded":"false",
"aria-hidden":"true"});eventData.oldTab.attr("aria-selected","false");if(toShow.length&&toHide.length)eventData.oldTab.attr("tabIndex",-1);else if(toShow.length)this.tabs.filter(function(){return $(this).attr("tabIndex")===0}).attr("tabIndex",-1);toShow.attr({"aria-expanded":"true","aria-hidden":"false"});eventData.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(index){var anchor,active=this._findActive(index);if(active[0]===this.active[0])return;if(!active.length)active=this.active;
anchor=active.find(".ui-tabs-anchor")[0];this._eventHandler({target:anchor,currentTarget:anchor,preventDefault:$.noop})},_findActive:function(index){return index===false?$():this.tabs.eq(index)},_getIndex:function(index){if(typeof index==="string")index=this.anchors.index(this.anchors.filter("[href$='"+index+"']"));return index},_destroy:function(){if(this.xhr)this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");
this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId();this.tabs.add(this.panels).each(function(){if($.data(this,"ui-tabs-destroy"))$(this).remove();else $(this).removeClass("ui-state-default ui-state-active ui-state-disabled "+"ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});
this.tabs.each(function(){var li=$(this),prev=li.data("ui-tabs-aria-controls");if(prev)li.attr("aria-controls",prev).removeData("ui-tabs-aria-controls");else li.removeAttr("aria-controls")});this.panels.show();if(this.options.heightStyle!=="content")this.panels.css("height","")},enable:function(index){var disabled=this.options.disabled;if(disabled===false)return;if(index===undefined)disabled=false;else{index=this._getIndex(index);if($.isArray(disabled))disabled=$.map(disabled,function(num){return num!==
index?num:null});else disabled=$.map(this.tabs,function(li,num){return num!==index?num:null})}this._setupDisabled(disabled)},disable:function(index){var disabled=this.options.disabled;if(disabled===true)return;if(index===undefined)disabled=true;else{index=this._getIndex(index);if($.inArray(index,disabled)!==-1)return;if($.isArray(disabled))disabled=$.merge([index],disabled).sort();else disabled=[index]}this._setupDisabled(disabled)},load:function(index,event){index=this._getIndex(index);var that=
this,tab=this.tabs.eq(index),anchor=tab.find(".ui-tabs-anchor"),panel=this._getPanelForTab(tab),eventData={tab:tab,panel:panel};if(isLocal(anchor[0]))return;this.xhr=$.ajax(this._ajaxSettings(anchor,event,eventData));if(this.xhr&&this.xhr.statusText!=="canceled"){tab.addClass("ui-tabs-loading");panel.attr("aria-busy","true");this.xhr.success(function(response){setTimeout(function(){panel.html(response);that._trigger("load",event,eventData)},1)}).complete(function(jqXHR,status){setTimeout(function(){if(status===
"abort")that.panels.stop(false,true);tab.removeClass("ui-tabs-loading");panel.removeAttr("aria-busy");if(jqXHR===that.xhr)delete that.xhr},1)})}},_ajaxSettings:function(anchor,event,eventData){var that=this;return{url:anchor.attr("href"),beforeSend:function(jqXHR,settings){return that._trigger("beforeLoad",event,$.extend({jqXHR:jqXHR,ajaxSettings:settings},eventData))}}},_getPanelForTab:function(tab){var id=$(tab).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+id))}})})(jQuery);
(function($){var increments=0;function addDescribedBy(elem,id){var describedby=(elem.attr("aria-describedby")||"").split(/\s+/);describedby.push(id);elem.data("ui-tooltip-id",id).attr("aria-describedby",$.trim(describedby.join(" ")))}function removeDescribedBy(elem){var id=elem.data("ui-tooltip-id"),describedby=(elem.attr("aria-describedby")||"").split(/\s+/),index=$.inArray(id,describedby);if(index!==-1)describedby.splice(index,1);elem.removeData("ui-tooltip-id");describedby=$.trim(describedby.join(" "));
if(describedby)elem.attr("aria-describedby",describedby);else elem.removeAttr("aria-describedby")}$.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var title=$(this).attr("title")||"";return $("<a>").text(title).html()},hide:true,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:true,tooltipClass:null,track:false,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents=
{};if(this.options.disabled)this._disable()},_setOption:function(key,value){var that=this;if(key==="disabled"){this[value?"_disable":"_enable"]();this.options[key]=value;return}this._super(key,value);if(key==="content")$.each(this.tooltips,function(id,element){that._updateContent(element)})},_disable:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true)});this.element.find(this.options.items).addBack().each(function(){var element=
$(this);if(element.is("[title]"))element.data("ui-tooltip-title",element.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var element=$(this);if(element.data("ui-tooltip-title"))element.attr("title",element.data("ui-tooltip-title"))})},open:function(event){var that=this,target=$(event?event.target:this.element).closest(this.options.items);if(!target.length||target.data("ui-tooltip-id"))return;if(target.attr("title"))target.data("ui-tooltip-title",
target.attr("title"));target.data("ui-tooltip-open",true);if(event&&event.type==="mouseover")target.parents().each(function(){var parent=$(this),blurEvent;if(parent.data("ui-tooltip-open")){blurEvent=$.Event("blur");blurEvent.target=blurEvent.currentTarget=this;that.close(blurEvent,true)}if(parent.attr("title")){parent.uniqueId();that.parents[this.id]={element:this,title:parent.attr("title")};parent.attr("title","")}});this._updateContent(target,event)},_updateContent:function(target,event){var content,
contentOption=this.options.content,that=this,eventType=event?event.type:null;if(typeof contentOption==="string")return this._open(event,target,contentOption);content=contentOption.call(target[0],function(response){if(!target.data("ui-tooltip-open"))return;that._delay(function(){if(event)event.type=eventType;this._open(event,target,response)})});if(content)this._open(event,target,content)},_open:function(event,target,content){var tooltip,events,delayedShow,positionOption=$.extend({},this.options.position);
if(!content)return;tooltip=this._find(target);if(tooltip.length){tooltip.find(".ui-tooltip-content").html(content);return}if(target.is("[title]"))if(event&&event.type==="mouseover")target.attr("title","");else target.removeAttr("title");tooltip=this._tooltip(target);addDescribedBy(target,tooltip.attr("id"));tooltip.find(".ui-tooltip-content").html(content);function position(event){positionOption.of=event;if(tooltip.is(":hidden"))return;tooltip.position(positionOption)}if(this.options.track&&event&&
/^mouse/.test(event.type)){this._on(this.document,{mousemove:position});position(event)}else tooltip.position($.extend({of:target},this.options.position));tooltip.hide();this._show(tooltip,this.options.show);if(this.options.show&&this.options.show.delay)delayedShow=this.delayedShow=setInterval(function(){if(tooltip.is(":visible")){position(positionOption.of);clearInterval(delayedShow)}},$.fx.interval);this._trigger("open",event,{tooltip:tooltip});events={keyup:function(event){if(event.keyCode===$.ui.keyCode.ESCAPE){var fakeEvent=
$.Event(event);fakeEvent.currentTarget=target[0];this.close(fakeEvent,true)}},remove:function(){this._removeTooltip(tooltip)}};if(!event||event.type==="mouseover")events.mouseleave="close";if(!event||event.type==="focusin")events.focusout="close";this._on(true,target,events)},close:function(event){var that=this,target=$(event?event.currentTarget:this.element),tooltip=this._find(target);if(this.closing)return;clearInterval(this.delayedShow);if(target.data("ui-tooltip-title"))target.attr("title",target.data("ui-tooltip-title"));
removeDescribedBy(target);tooltip.stop(true);this._hide(tooltip,this.options.hide,function(){that._removeTooltip($(this))});target.removeData("ui-tooltip-open");this._off(target,"mouseleave focusout keyup");if(target[0]!==this.element[0])this._off(target,"remove");this._off(this.document,"mousemove");if(event&&event.type==="mouseleave")$.each(this.parents,function(id,parent){$(parent.element).attr("title",parent.title);delete that.parents[id]});this.closing=true;this._trigger("close",event,{tooltip:tooltip});
this.closing=false},_tooltip:function(element){var id="ui-tooltip-"+increments++,tooltip=$("<div>").attr({id:id,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));$("<div>").addClass("ui-tooltip-content").appendTo(tooltip);tooltip.appendTo(this.document[0].body);this.tooltips[id]=element;return tooltip},_find:function(target){var id=target.data("ui-tooltip-id");return id?$("#"+id):$()},_removeTooltip:function(tooltip){tooltip.remove();
delete this.tooltips[tooltip.attr("id")]},_destroy:function(){var that=this;$.each(this.tooltips,function(id,element){var event=$.Event("blur");event.target=event.currentTarget=element[0];that.close(event,true);$("#"+id).remove();if(element.data("ui-tooltip-title")){element.attr("title",element.data("ui-tooltip-title"));element.removeData("ui-tooltip-title")}})}})})(jQuery);

/* /home/genius2/front/templates/min/js/060-jquery-ui/1.10.0/plugins/jquery-ui.multidatespicker-1.6.1.js **************************************************************/ 
(function($){$.extend($.ui,{multiDatesPicker:{version:"1.6.1"}});$.fn.multiDatesPicker=function(method){var mdp_arguments=arguments;var ret=this;var today_date=new Date;var day_zero=new Date(0);var mdp_events={};function removeDate(date,type){if(!type)type="picked";date=dateConvert.call(this,date);for(var i in this.multiDatesPicker.dates[type])if(!methods.compareDates(this.multiDatesPicker.dates[type][i],date))return this.multiDatesPicker.dates[type].splice(i,1).pop()}function removeIndex(index,type){if(!type)type=
"picked";return this.multiDatesPicker.dates[type].splice(index,1).pop()}function addDate(date,type,no_sort){if(!type)type="picked";date=dateConvert.call(this,date);date.setHours(0);date.setMinutes(0);date.setSeconds(0);date.setMilliseconds(0);if(methods.gotDate.call(this,date,type)===false){this.multiDatesPicker.dates[type].push(date);if(!no_sort)this.multiDatesPicker.dates[type].sort(methods.compareDates)}}function sortDates(type){if(!type)type="picked";this.multiDatesPicker.dates[type].sort(methods.compareDates)}
function dateConvert(date,desired_type,date_format){if(!desired_type)desired_type="object";return methods.dateConvert.call(this,date,desired_type,date_format)}var methods={init:function(options){var $this=$(this);this.multiDatesPicker.changed=false;var mdp_events={beforeShow:function(input,inst){this.multiDatesPicker.changed=false;if(this.multiDatesPicker.originalBeforeShow)this.multiDatesPicker.originalBeforeShow.call(this,input,inst)},onSelect:function(dateText,inst){var $this=$(this);this.multiDatesPicker.changed=
true;if(dateText)$this.multiDatesPicker("toggleDate",dateText);if(this.multiDatesPicker.mode=="normal"&&this.multiDatesPicker.dates.picked.length>0&&this.multiDatesPicker.pickableRange){var min_date=this.multiDatesPicker.dates.picked[0],max_date=new Date(min_date.getTime());methods.sumDays(max_date,this.multiDatesPicker.pickableRange-1);if(this.multiDatesPicker.adjustRangeToDisabled){var c_disabled,disabled=this.multiDatesPicker.dates.disabled.slice(0);do{c_disabled=0;for(var i=0;i<disabled.length;i++)if(disabled[i].getTime()<=
max_date.getTime()){if(min_date.getTime()<=disabled[i].getTime()&&disabled[i].getTime()<=max_date.getTime())c_disabled++;disabled.splice(i,1);i--}max_date.setDate(max_date.getDate()+c_disabled)}while(c_disabled!=0)}if(this.multiDatesPicker.maxDate&&max_date>this.multiDatesPicker.maxDate)max_date=this.multiDatesPicker.maxDate;$this.datepicker("option","minDate",min_date).datepicker("option","maxDate",max_date)}else $this.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option",
"maxDate",this.multiDatesPicker.maxDate);if(this.tagName=="INPUT")$this.val($this.multiDatesPicker("getDates","string"));if(this.multiDatesPicker.originalOnSelect&&dateText)this.multiDatesPicker.originalOnSelect.call(this,dateText,inst);if($this.datepicker("option","altField")!=undefined&&$this.datepicker("option","altField")!="")$($this.datepicker("option","altField")).val($this.multiDatesPicker("getDates","string"))},beforeShowDay:function(date){var $this=$(this),gotThisDate=$this.multiDatesPicker("gotDate",
date)!==false,isDisabledCalendar=$this.datepicker("option","disabled"),isDisabledDate=$this.multiDatesPicker("gotDate",date,"disabled")!==false,areAllSelected=this.multiDatesPicker.maxPicks==this.multiDatesPicker.dates.picked.length;var custom=[true,""];if(this.multiDatesPicker.originalBeforeShowDay)custom=this.multiDatesPicker.originalBeforeShowDay.call(this,date);var highlight_class=gotThisDate?"ui-state-highlight":custom[1];var selectable_date=!(isDisabledCalendar||isDisabledDate||areAllSelected&&
!highlight_class);return[selectable_date&&custom[0],highlight_class]},onClose:function(dateText,inst){if(this.tagName=="INPUT"&&this.multiDatesPicker.changed){$(inst.dpDiv[0]).stop(false,true);setTimeout('$("#'+inst.id+'").datepicker("show")',50)}if(this.multiDatesPicker.originalOnClose)this.multiDatesPicker.originalOnClose.call(this,dateText,inst)}};if(options){this.multiDatesPicker.originalBeforeShow=options.beforeShow;this.multiDatesPicker.originalOnSelect=options.onSelect;this.multiDatesPicker.originalBeforeShowDay=
options.beforeShowDay;this.multiDatesPicker.originalOnClose=options.onClose;$this.datepicker(options);this.multiDatesPicker.minDate=$.datepicker._determineDate(this,options.minDate,null);this.multiDatesPicker.maxDate=$.datepicker._determineDate(this,options.maxDate,null);if(options.addDates)methods.addDates.call(this,options.addDates);if(options.addDisabledDates)methods.addDates.call(this,options.addDisabledDates,"disabled");methods.setMode.call(this,options)}else $this.datepicker();$this.datepicker("option",
mdp_events);if(this.tagName=="INPUT")$this.val($this.multiDatesPicker("getDates","string"));var altFieldOption=$this.datepicker("option","altField");if(altFieldOption)$(altFieldOption).val($this.multiDatesPicker("getDates","string"))},compareDates:function(date1,date2){date1=dateConvert.call(this,date1);date2=dateConvert.call(this,date2);var diff=date1.getFullYear()-date2.getFullYear();if(!diff){diff=date1.getMonth()-date2.getMonth();if(!diff)diff=date1.getDate()-date2.getDate()}return diff},sumDays:function(date,
n_days){var origDateType=typeof date;obj_date=dateConvert.call(this,date);obj_date.setDate(obj_date.getDate()+n_days);return dateConvert.call(this,obj_date,origDateType)},dateConvert:function(date,desired_format,dateFormat){var from_format=typeof date;if(from_format==desired_format){if(from_format=="object")try{date.getTime()}catch(e){$.error("Received date is in a non supported format!");return false}return date}var $this=$(this);if(typeof date=="undefined")date=new Date(0);if(desired_format!="string"&&
desired_format!="object"&&desired_format!="number")$.error('Date format "'+desired_format+'" not supported!');if(!dateFormat){dateFormat=$.datepicker._defaults.dateFormat;var dp_dateFormat=$this.datepicker("option","dateFormat");if(dp_dateFormat)dateFormat=dp_dateFormat}switch(from_format){case "object":break;case "string":date=$.datepicker.parseDate(dateFormat,date);break;case "number":date=new Date(date);break;default:$.error('Conversion from "'+desired_format+'" format not allowed on jQuery.multiDatesPicker')}switch(desired_format){case "object":return date;
case "string":return $.datepicker.formatDate(dateFormat,date);case "number":return date.getTime();default:$.error('Conversion to "'+desired_format+'" format not allowed on jQuery.multiDatesPicker')}return false},gotDate:function(date,type){if(!type)type="picked";for(var i=0;i<this.multiDatesPicker.dates[type].length;i++)if(methods.compareDates.call(this,this.multiDatesPicker.dates[type][i],date)===0)return i;return false},getDates:function(format,type){if(!format)format="string";if(!type)type="picked";
switch(format){case "object":return this.multiDatesPicker.dates[type];case "string":case "number":var o_dates=new Array;for(var i in this.multiDatesPicker.dates[type])o_dates.push(dateConvert.call(this,this.multiDatesPicker.dates[type][i],format));return o_dates;default:$.error('Format "'+format+'" not supported!')}},addDates:function(dates,type){if(dates.length>0){if(!type)type="picked";switch(typeof dates){case "object":case "array":if(dates.length){for(var i in dates)addDate.call(this,dates[i],
type,true);sortDates.call(this,type);break}case "string":case "number":addDate.call(this,dates,type);break;default:$.error('Date format "'+typeof dates+'" not allowed on jQuery.multiDatesPicker')}$(this).datepicker("refresh")}else $.error("Empty array of dates received.")},removeDates:function(dates,type){if(!type)type="picked";var removed=[];if(Object.prototype.toString.call(dates)==="[object Array]")for(var i in dates.sort(function(a,b){return b-a}))removed.push(removeDate.call(this,dates[i],type));
else removed.push(removeDate.call(this,dates,type));$(this).datepicker("refresh");return removed},removeIndexes:function(indexes,type){if(!type)type="picked";var removed=[];if(Object.prototype.toString.call(indexes)==="[object Array]")for(var i in indexes.sort(function(a,b){return b-a}))removed.push(removeIndex.call(this,indexes[i],type));else removed.push(removeIndex.call(this,indexes,type));$(this).datepicker("refresh");return removed},resetDates:function(type){if(!type)type="picked";this.multiDatesPicker.dates[type]=
[];$(this).datepicker("refresh")},toggleDate:function(date,type){if(!type)type="picked";switch(this.multiDatesPicker.mode){case "daysRange":this.multiDatesPicker.dates[type]=[];var end=this.multiDatesPicker.autoselectRange[1];var begin=this.multiDatesPicker.autoselectRange[0];if(end<begin){end=this.multiDatesPicker.autoselectRange[0];begin=this.multiDatesPicker.autoselectRange[1]}for(var i=begin;i<end;i++)methods.addDates.call(this,methods.sumDays(date,i),type);break;default:if(methods.gotDate.call(this,
date)===false)methods.addDates.call(this,date,type);else methods.removeDates.call(this,date,type);break}},setMode:function(options){var $this=$(this);if(options.mode)this.multiDatesPicker.mode=options.mode;switch(this.multiDatesPicker.mode){case "normal":for(option in options)switch(option){case "maxPicks":case "minPicks":case "pickableRange":case "adjustRangeToDisabled":this.multiDatesPicker[option]=options[option];break}break;case "daysRange":case "weeksRange":var mandatory=1;for(option in options)switch(option){case "autoselectRange":mandatory--;
case "pickableRange":case "adjustRangeToDisabled":this.multiDatesPicker[option]=options[option];break}if(mandatory>0)$.error("Some mandatory options not specified!");break}if(mdp_events.onSelect)mdp_events.onSelect();$this.datepicker("refresh")}};this.each(function(){if(!this.multiDatesPicker)this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:true};if(methods[method]){var exec_result=methods[method].apply(this,Array.prototype.slice.call(mdp_arguments,1));switch(method){case "getDates":case "removeDates":case "gotDate":case "sumDays":case "compareDates":case "dateConvert":ret=
exec_result}return exec_result}else if(typeof method==="object"||!method)return methods.init.apply(this,mdp_arguments);else $.error("Method "+method+" does not exist on jQuery.multiDatesPicker");return false});if(method!="gotDate"&&method!="getDates")aaaa=1;return ret};var PROP_NAME="multiDatesPicker";var dpuuid=(new Date).getTime();var instActive;$.multiDatesPicker={version:false};$.multiDatesPicker.initialized=false;$.multiDatesPicker.uuid=(new Date).getTime();$.multiDatesPicker.version=$.ui.multiDatesPicker.version;
window["DP_jQuery_"+dpuuid]=$})(jQuery);

/* /home/genius2/front/templates/min/js/060-jquery-ui/1.10.0/plugins/jquery-ui.datepicker-lang-1.0.js **************************************************************/ 
jQuery(function($){$.datepicker.regional["fr"]={closeText:"Fermer",prevText:"&#x3c;Pre",nextText:"Sui&#x3e;",currentText:"Hoy",monthNames:["Janvier","F&eacute;vrier","Mars","Avril","Mai","Juin","Juillet","Ao&ucirc;t","Septembre","Octobre","Novembre","D&eacute;cembre"],monthNamesShort:["Jan","F&eacute;v","Mar","Avr","Mai","Jun","Jui","Aou","Sep","Oct","Nov","D&eacute;c"],dayNames:["dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],dayNamesShort:["Dim","Lun","Mar","Mer","Jeu","Ven",
"Sam"],dayNamesMin:["Di","Lu","Ma","Me","Je","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["es"]={closeText:"Cerrar",prevText:"&#x3c;Ant",nextText:"Sig&#x3e;",currentText:"Hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo",
"Lunes","Martes","Mi&eacute;rcoles","Jueves","Viernes","S&aacute;bado"],dayNamesShort:["Dom","Lun","Mar","Mi&eacute;","Juv","Vie","S&aacute;b"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","S&aacute;"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["it"]={closeText:"Chiudi",prevText:"&#x3C;Prec",nextText:"Succ&#x3E;",currentText:"Oggi",monthNames:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre",
"Ottobre","Novembre","Dicembre"],monthNamesShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],dayNames:["Domenica","Luned\u00ec","Marted\u00ec","Mercoled\u00ec","Gioved\u00ec","Venerd\u00ec","Sabato"],dayNamesShort:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],dayNamesMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],weekHeader:"Sm",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["de"]={closeText:"Schlie\u00dfen",prevText:"&#x3C;Zur\u00fcck",
nextText:"Vor&#x3E;",currentText:"Heute",monthNames:["Januar","Februar","M\u00e4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],monthNamesShort:["Jan","Feb","M\u00e4r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],dayNames:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],dayNamesShort:["So","Mo","Di","Mi","Do","Fr","Sa"],dayNamesMin:["So","Mo","Di","Mi","Do","Fr","Sa"],weekHeader:"KW",dateFormat:"dd.mm.yy",firstDay:1,isRTL:false,
showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["nl"]={closeText:"Sluiten",prevText:"\u2190",nextText:"\u2192",currentText:"Vandaag",monthNames:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],monthNamesShort:["jan","feb","mrt","apr","mei","jun","jul","aug","sep","okt","nov","dec"],dayNames:["zondag","maandag","dinsdag","woensdag","donderdag","vrijdag","zaterdag"],dayNamesShort:["zon","maa","din","woe","don","vri","zat"],
dayNamesMin:["zo","ma","di","wo","do","vr","za"],weekHeader:"Wk",dateFormat:"dd-mm-yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.regional["en-GB"]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday",
"Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"dd/mm/yy",firstDay:1,isRTL:false,showMonthAfterYear:false,yearSuffix:""};$.datepicker.setDefaults($.datepicker.regional["fr"])});

/* /home/genius2/front/templates/min/js/100-ingenie/unique/99-ingenie.stats.js **************************************************************/ 
var gsw_document=document;var gsw_pageReferer="";try{gsw_pageReferer=top.gsw_document.referrer}catch(e){try{if(parent){if(parent.gsw_getReferer)try{gsw_pageReferer=parent.gsw_getReferer}catch(E3){gsw_pageReferer=""}else try{gsw_pageReferer=parent.document.referrer}catch(E){try{gsw_pageReferer=document.referrer}catch(E2){gsw_pageReferer=""}}parent.gsw_getReferer=document.location.href}else try{gsw_pageReferer=document.referrer}catch(E3){gsw_pageReferer=""}}catch(E4){gsw_pageReferer=""}}
function gsw_getUrlStats(organisme,site,langue,urlStats,gsw_urlPageCourante,tabVars){var gsw_getvars="";if(tabVars)for(var i in tabVars)if(!Array.prototype[i])gsw_getvars=gsw_getvars+"&params["+escape(i)+"]"+"="+escape(tabVars[i]);var gsw_date=new Date;var gsw_src=urlStats;gsw_src+="?organisme="+organisme;gsw_src+="&site="+site;gsw_src+="&langue="+langue;gsw_src+="&page_courante="+escape(gsw_urlPageCourante);gsw_src+=gsw_getvars;gsw_src+="&h="+gsw_date.getHours()+"&m="+gsw_date.getMinutes()+"&s="+
gsw_date.getSeconds();gsw_src+="&resolution="+screen.width+"x"+screen.height;gsw_src+="&page_referer="+escape(gsw_pageReferer);return gsw_src}
function gsw_log(organisme,site,langue,urlStats,tabVars){var gsw_urlPageCourante=gsw_document.location.href;var gsw_pos=gsw_urlPageCourante.indexOf("//");if(gsw_pos>0)gsw_urlPageCourante=gsw_urlPageCourante.substr(gsw_pos);var gsw_src=gsw_getUrlStats(organisme,site,langue,urlStats,gsw_urlPageCourante,tabVars);var html='<img src="'+gsw_src+'" alt="Stats Ingenie" style="display:none;" border="0" />';$("body").append(html)};

/* /home/genius2/front/templates/min/js/100-ingenie/unique/20-tools.js **************************************************************/ 
var IngenieTools={init:function(){var splitUrl=document.location.href.split("#");if(splitUrl[1]!=undefined)if(splitUrl[1].split(".")[1]==undefined)IngenieTools.scrollToId(splitUrl[1])},init_info_bulle:function(baseClass){$("."+baseClass).each(function(){var info=$("#contenu_"+$(this).attr("id")).html();if(info)if($(this).qtip)$(this).qtip({content:{text:info},position:{my:"left center",target:"mouse",viewport:false,adjust:{x:10,y:0}},hide:{fixed:true},style:baseClass+"_content"})})},scrollToId:function(id){try{jQuery("html,body").animate({scrollTop:jQuery("#"+
id).offset().top})}catch(err){console.log("scrollToId err 1",err)}try{if(window.parent.socket!=undefined){var socketMessage="{action: 'scrollTo', params: {top: '"+jQuery("#"+id).offset().top+"'}}";window.parent.socket.postMessage("##"+socketMessage)}else console.log("scrollToId ancre iframe erreur")}catch(err){console.log("scrollToId err 2",err)}},uniqID:function(idlength,prefix){var charstoformid="_0123456789abcdefghiklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXTZ".split("");if(!prefix)prefix="";var uniqid=
prefix;idlength=parseInt(idlength)+prefix.length;for(var i=0;i<idlength;i++)uniqid+=charstoformid[Math.floor(Math.random()*charstoformid.length)];if(jQuery("#"+uniqid).length==0)return uniqid;else return uniqID(idlength)},cleanTFCode:function(dirtyCode){return dirtyCode.replace(/(:|\.|\[|\])/g,"\\$1")},getQueryVariable:function(query,variable){var vars=query.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(pair[0]==variable)return unescape(pair[1])}return false},getGeolocationClient:function(){if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(position){var urlAjax=
"/javascript.js?action=saveGeolocation&latitude="+position.coords.latitude+"&longitude="+position.coords.longitude;$.ajax({url:urlAjax,cache:false,async:false}).done(function(data){location.reload()})})},initMenuSelectionneCache:function(idMenuCourant,tabItineraireMenuCourant){$("nav.selectMenuCourantJS").each(function(i){var menuNav=$(this);menuNav.find("li.itineraire").removeClass("itineraire");menuNav.find("li.select").removeClass("select");for(var i in tabItineraireMenuCourant){var menuItineraire=
menuNav.find('li[data-menu-id="'+tabItineraireMenuCourant[i]+'"]');if(menuItineraire.length>0)menuItineraire.addClass("itineraire");if(tabItineraireMenuCourant[i]==idMenuCourant)menuItineraire.addClass("select")}})},findGetParameter:function(parameterName){var result=null,tmp=[];location.search.substr(1).split("&").forEach(function(item){tmp=item.split("=");if(tmp[0]===parameterName)result=decodeURIComponent(tmp[1])});return result},isMobile:function(){return $("#is_mobile").is(":visible")},isTablet:function(){return $("#is_tablet").is(":visible")},
isDesktop:function(){return!IngenieTools.isMobile()&&!IngenieTools.isTablet()}};

/* /home/genius2/front/templates/min/js/100-ingenie/unique/001-correctionBug.js **************************************************************/ 
if(!window.console)console={log:function(){}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/104-carte-interactive.js **************************************************************/ 
var pageUrl=location.protocol+"//"+location.host+location.pathname;var self=null;var map=null;var idMenu=null;var mapCanvas=$("#map_canvas");var markerCluster=null;var text="";var ajaxUrlBox=pageUrl+"?action=ajax";var ajaxUrlSession=pageUrl+"?action=session";var ajaxSvgMarker="/Ajax/svg";var webcamOnPicto="https://static.ingenie.fr/images/carte-interactive/webcam_on_picto.png";var webcamOffPicto="https://static.ingenie.fr/images/carte-interactive/webcam_off_picto.png";var webcamOnMenu="https://static.ingenie.fr/images/carte-interactive/webcam_on_menu.png";
var webcamOffMenu="https://static.ingenie.fr/images/carte-interactive/webcam_off_menu.png";var nbItineraire=0;var listeMarkersByDataKey={};var listeIdSSMenubyIdMenu={};
var ci={latitude:0,longitude:0,params:[],translate:[],zoomMap:10,bgColorMenuSession:"rgb(138, 172, 61)",menuArrowIcons:{header:"defaultIcon",activeHeader:"selectedIcon"},modeDebug:false,largeurMenu:330,init:function(params){this.modeDebug=$("span.debug_carte").length>0;this.latitude=params.latitude;this.longitude=params.longitude;this.params=params;this.translate=params.translate;if(params.zoomMap!="undefined"&&params.zoomMap!=undefined)this.zoomMap=parseInt(params.zoomMap);if(params.type!="")if(params.type==
"ROADMAP")params.mapTypeId=google.maps.MapTypeId.ROADMAP;else if(params.type=="SATELLITE")params.mapTypeId=google.maps.MapTypeId.SATELLITE;else if(params.type=="HYBRID")params.mapTypeId=google.maps.MapTypeId.HYBRID;else if(params.type=="TERRAIN")params.mapTypeId=google.maps.MapTypeId.TERRAIN;else params.mapTypeId=google.maps.MapTypeId.ROADMAP;else params.mapTypeId=google.maps.MapTypeId.ROADMAP;this.initMap();this.sliderBoxOnClickListener();this.initSliderBox()},initMap:function(){var largeurEcran=
$(window).width();if(largeurEcran<=375)this.largeurMenu=largeurEcran-50;this.largeurMenu+="px";mapCanvas.css({"float":"right","position":"absolute","right":"0","left":this.largeurMenu}).attr("style",function(i,s){return s+"width: calc(100% - "+this.largeurMenu+") !important;"}.bind(this));var tabStylesMap=[{featureType:"poi",stylers:[{visibility:this.params.afficherPOIGoogle?"on":"off"}]}];mapCanvas.gmap({"center":String(this.latitude)+","+String(this.longitude),"zoom":this.zoomMap,"disableDefaultUI":true,
"mapTypeControl":false,"navigationControl":true,"streetViewControl":true,"zoomControl":true,"mapTypeId":this.params.mapTypeId,"styles":tabStylesMap,"callback":function(map){this.map=map;self=this;ci.callAjaxFromSessionId();self.addControl(ci.initCustomControls(),google.maps.ControlPosition.TOP_LEFT);var markerClusterOptions={"calculator":function(markers,numStyles){var index=0;var nbMarkers=markers.length;var dv=nbMarkers;while(dv!==0){dv=parseInt(dv/10,10);index++}index=Math.min(index,numStyles);
var value=0;for(var i=0;i<nbMarkers;i++)value+=markers[i].idValues.length;return{text:value,index:index}},"gridSize":parseInt(ci.params.gridSize),"maxZoom":17,"styles":[{textColor:"white",url:ci.params.markerClustererIcon[1]!=undefined?ci.params.markerClustererIcon[1]:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m1.png",width:53,height:53},{textColor:"white",url:ci.params.markerClustererIcon[2]!=undefined?ci.params.markerClustererIcon[2]:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m2.png",
width:56,height:56},{textColor:"white",url:ci.params.markerClustererIcon[3]!=undefined?ci.params.markerClustererIcon[3]:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m3.png",width:66,height:66},{textColor:"white",url:ci.params.markerClustererIcon[4]!=undefined?ci.params.markerClustererIcon[4]:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m4.png",width:78,height:78},{textColor:"white",url:ci.params.markerClustererIcon[5]!=
undefined?ci.params.markerClustererIcon[5]:"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/markerclustererplus/images/m5.png",width:90,height:90}]};markerCluster=new MarkerClusterer(self.get("map"),self.get("markers"),markerClusterOptions);self.set("MarkerClusterer",markerCluster)}})},initSliderBox:function(){var control=this;control.isOpen=true;if(this.params.showSlider==undefined||this.params.showSlider==true){var box=$("#sliderbox");box.css({"position":"absolute","top":"30px",
"bottom":"0","width":this.largeurMenu,"background-color":"rgb(255, 255, 255)"});$(".ac-container").accordion({header:"h3",collapsible:true,active:false,heightStyle:"content",icons:ci.menuArrowIcons});$(".ac-container h3").click(function(event){$("#sliderbox").animate({scrollTop:$(this).offset().top-30},"slow")})}else{$("#sliderbox").remove();mapCanvas.css({"position":"absolute","right":"0","left":"30px","width":"auto"})}},initCustomControls:function(){var control=this;control.isOpen=true;var controlDiv=
$('<div id="controlDiv"></div>');controlDiv.css({"padding":"5px","z-index":1});if(this.params.showSlider==undefined||this.params.showSlider==true){var arrow=$("<div></div>");arrow.attr("id","arrowOpened");var closeText=$("<div></div>");closeText.attr("id","closePanel");closeText.prop("title",ci.translate.close);closeText.append(arrow.get());controlDiv.append(closeText.get());closeText.addEventListener("click",function(){if(control.isOpen){$("#sliderbox").animate({"marginLeft":"-="+control.largeurMenu},
{duration:500,step:function(){mapCanvas.gmap("refresh")}});mapCanvas.animate({"left":"-="+control.largeurMenu},{duration:500,step:function(now,fx){mapCanvas.attr("style",function(i,s){return s+"width: calc(100% - "+now+"px) !important;"})},complete:function(){mapCanvas.gmap("refresh")}});control.isOpen=false;closeText.prop("title",ci.translate.open);arrow.attr("id","arrowClosed");closeText.css({"background-color":"rgb(255, 255, 255)"})}else{$("#sliderbox").animate({"marginLeft":"+="+control.largeurMenu},
{duration:500,step:function(){mapCanvas.gmap("refresh")}});mapCanvas.animate({"left":"+="+control.largeurMenu},{duration:500,step:function(now,fx){mapCanvas.attr("style",function(i,s){return s+"width: calc(100% - "+now+"px) !important;"})},complete:function(){mapCanvas.gmap("refresh")}});control.isOpen=true;closeText.prop("title",ci.translate.close);arrow.attr("id","arrowOpened");closeText.css({"background-color":"rgb(0, 0, 0)"})}})}var mapText=$("<div></div>");mapText.attr("id","mapControl");mapText.prop("title",
ci.translate.show_map);if(this.params.type==""||this.params.type=="ROADMAP")mapText.css({"background-color":"rgba(0,0, 0, 0.5)"});mapText.html(ci.translate.map);controlDiv.append(mapText.get());var satelliteText=$("<div></div>");satelliteText.attr("id","satelliteControl");satelliteText.prop("title",ci.translate.show_satellite);if(this.params.type=="HYBRID"||this.params.type=="SATELLITE")satelliteText.css({"background-color":"rgba(0,0, 0, 0.5)"});satelliteText.html(ci.translate.satellite);controlDiv.append(satelliteText.get());
if(this.params.showBtnRelief!=undefined&&this.params.showBtnRelief==true||this.params.showAgrandir!=undefined&&this.params.lienAgrandir!=undefined&&this.params.showAgrandir==true){var reliefText=$("<div></div>");reliefText.attr("id","reliefControl");reliefText.prop("title",ci.translate.show_relief);if(this.params.type==""||this.params.type=="TERRAIN")reliefText.css({"background-color":"rgba(0,0, 0, 0.5)"});reliefText.html(ci.translate.relief);controlDiv.append(reliefText.get());reliefText.addEventListener("click",
function(){mapCanvas.gmap("option","mapTypeId",google.maps.MapTypeId.TERRAIN);controlDiv.children("div").css({"background-color":"rgba(0,0, 0, 0.3)"});reliefText.css({"background-color":"rgba(0,0, 0, 0.5)"})})}if(this.params.showAgrandir!=undefined&&this.params.lienAgrandir!=undefined&&this.params.showAgrandir==true){var agrandirText=$("<div></div>");agrandirText.attr("id","agrandirControl");agrandirText.prop("title",ci.translate.enlarge_plan);if(this.params.type=="HYBRID"||this.params.type=="SATELLITE")agrandirText.css({"background-color":"rgba(0,0, 0, 0.5)"});
agrandirText.html('<a href="'+this.params.lienAgrandir+'">'+ci.translate.enlarge+"</a>");controlDiv.append(agrandirText.get())}mapText.addEventListener("click",function(){mapCanvas.gmap("option","mapTypeId",google.maps.MapTypeId.ROADMAP);controlDiv.children("div").css({"background-color":"rgba(0,0, 0, 0.3)"});mapText.css({"background-color":"rgba(0,0, 0, 0.5)"})});satelliteText.addEventListener("click",function(){mapCanvas.gmap("option","mapTypeId",google.maps.MapTypeId.HYBRID);controlDiv.children("div").css({"background-color":"rgba(0,0, 0, 0.3)"});
satelliteText.css({"background-color":"rgba(0,0, 0, 0.5)"})});return controlDiv},sliderBoxOnClickListener:function(){$('.inputMenu:checkbox[data-selection="0"]').each(function(){$(this).prop("disabled",true);$(this).next().css("color","rgb(180,180,180)")});$('ul > li > .inputMenu:checkbox[data-parent-id="0"]').click(function(){var parent=$(this);var parentId=parent.data("id");var children=parent.parent().find('.inputMenu:checkbox[data-parent-id="'+parentId+'"]:not(:disabled)');if(listeIdSSMenubyIdMenu[parentId]==
null){listeIdSSMenubyIdMenu[parentId]=[];$.each(children,function(i,input){listeIdSSMenubyIdMenu[parentId].push($(input).data("id").toString())})}if(parent.is(":checked")){$.each(children,function(i,input){$(input).prop("checked",true)});ci.sliderBoxCallAjax(parentId)}else{$.each(children,function(i,input){$(input).prop("checked",false)});var t1=Date.now();ci.hideMarkerById(parentId)}});$('ul > li > .inputMenu:checkbox[data-parent-id!="0"]').click(function(){var child=$(this);var childId=child.data("id");
if(child.closest("ul").parent().prop("tagName")!="SECTION")var parent=child.closest("ul").parent().find('.inputMenu:checkbox[data-parent-id="0"]');if(child.is(":checked")){var ulParent=child.parent().parent();var fullLength=0;var inputLength=0;$.each(ulParent,function(i,val){fullLength=$(val).find(".inputMenu:checkbox:not(:disabled)").length;inputLength=$(val).find(".inputMenu:checkbox:checked").length;if(inputLength==fullLength&&typeof parent!="undefined")parent.prop("checked",true)});if(child.data("parent-id")==
"carnet"){var lettre=child.data("lettre");ci.sliderBoxCallAjax(childId,true,lettre)}else ci.sliderBoxCallAjax(childId)}else{if(typeof parent!="undefined"&&parent.is(":checked"))parent.prop("checked",false);mapCanvas.gmap("closeInfoWindow");var valeurCarnet=false;if(child.data("parent-id")=="carnet")valeurCarnet=true;$.ajax({type:"GET",url:ajaxUrlBox,data:{id:childId,isCarnet:valeurCarnet},async:true,beforeSend:function(){$("#GoogleMaps").showLoading()},success:function(data){var nbMMUpd=0;data=jQuery.parseJSON(data);
$.each(data,function(keys,markers){if(keys=="markers")$.each(markers,function(key,value){var marker=listeMarkersByDataKey[value.id];var supprimerMarker=true;if(marker==null)supprimerMarker=false;if(marker!=null&&$('ul#listeSession li[data-id$="'+value.id+'"]').length>0)supprimerMarker=false;if(supprimerMarker)ci.removePrestaFromMarker(marker,value.id)})});ci.autoCenter();markerCluster.repaint()},error:function(){$("#GoogleMaps").hideLoading()},complete:function(){$("#GoogleMaps").hideLoading()}})}})},
markerExists:function(id){var result=false;for(var dataKey in listeMarkersByDataKey){var key=listeMarkersByDataKey[dataKey].key.split("|");if(key[0]==id){result=true;break}}return result},displayMarker:function(id){for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];var key=marker.key.split("|");if(key[0]==id||$.inArray(id.toString(),key))if(marker.visible==false){marker.setVisible(true);markerCluster.addMarkers(marker,true);break}}ci.autocenter();markerCluster.repaint()},
checkPrestaAlreadyExists:function(id){var result=false;if(listeMarkersByDataKey[id]!=null)result=true;return result},callAjaxFromSessionId:function(){if(this._getUrlVars()["liste-session"]!=undefined){var criteres="";var content="";var listeSession=this._getUrlVars()["liste-session"];$.ajax({type:"GET",url:ajaxUrlSession,data:{id:listeSession},async:true,tryCount:0,retryLimit:3,beforeSend:function(){$("#GoogleMaps").showLoading()},success:function(data){data=jQuery.parseJSON(data);if(data["markers"].length>=
1){content+="<h3>"+data["markers"].length+" "+ci.translate.results+"</h3>";content+='<ul id="listeSession">';$.each(data,function(keys,markers){if(keys=="markers")$.each(markers,function(key,value){var marker=null;var criteres="";if(data["mode_webcam"]){if(value.webcam.broken==null)value.icon=webcamOnPicto;else{value.icon=webcamOffPicto;value.title=value.title+" ("+ci.translate.for_maintenance+")"}marker=ci.addWebcamMarkerToMap(value,0)}else{value.icon=ajaxSvgMarker+"?action=markergooglemap&couleur=OrangeRed&lettre="+
(key+1)+"&format=svgz";var versionIE=ci.detectIEVersion();if(versionIE>0&&(versionIE<=8||versionIE>=11))value.icon="https://static.ingenie.fr/images/carte-interactive/icone_carte_interactive_sans_numerotation.png";marker=ci.addMarkerToMap(value,0)}google.maps.event.addListener(marker,"click",function(){$("ul#listeSession li").removeAttr("style");$('ul#listeSession li[data-id="'+this.key+'"]').addClass("select");$(".ac-container").accordion({active:0})});if(value.bloc!=undefined)if(value.bloc.critere1!=
undefined)$.each(value.bloc.critere1.contenu,function(i,val){criteres+='<span class="rank">'+val.contenu[0]+"</span>"});if(data["mode_webcam"]&&value.webcam.broken==null)value.icon=webcamOnMenu;else if(data["mode_webcam"]&&value.webcam.broken!=null)value.icon=webcamOffMenu;content+='<li data-id="0|'+value.id+'">'+'<img class="pictogmap" src="'+value.icon+'">'+'<div class="infos">'+'<span class="name">'+$("<div/>").html(value.title).text()+"</span>"+criteres+"</div>"+"</li>"})});content+="</ul>";ci.autoCenter();
$(".ac-container").prepend(content).accordion("destroy").accordion({header:"h3",collapsible:true,active:false,heightStyle:"content",icons:ci.menuArrowIcons,active:0});$("ul#listeSession li").addEventListener("click",function(){$("ul#listeSession .select").removeClass("select");var li=$(this);$("ul#listeSession li").removeAttr("style");li.addClass("select");for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];var idATester=li.data("id");var posFirstPipe=idATester.indexOf("|");
if(posFirstPipe>-1)idATester=idATester.substring(posFirstPipe+1);if(marker.idValues.indexOf(idATester)>-1){marker.setAnimation(google.maps.Animation.BOUNCE);setTimeout(function(){marker.setAnimation(null)},2E3);self.get("map").setCenter(marker.getPosition());bounds=new google.maps.LatLngBounds;bounds.extend(marker.getPosition());self.map.fitBounds(bounds);self.map.setZoom(16);if(!data["mode_webcam"])self.openInfoWindow({"content":marker.content,"maxWidth":350},marker);break}}})}},error:function(jqXHR,
textStatus,errorThrown){$("#GoogleMaps").hideLoading();if(textStatus=="timeout"){this.tryCount++;if(this.tryCount<=this.retryLimit){$.ajax(this);return}return}},complete:function(){$("#GoogleMaps").hideLoading()}})}},sliderBoxCallAjax:function(idMenu,isCarnet,lettre){var valeurCarnet=false;var numSent="";if(isCarnet==true){valeurCarnet=true;numSent=lettre}if(isCarnet==true)valeurCarnet=true;$.ajax({type:"GET",url:ajaxUrlBox,data:{id:idMenu,isCarnet:valeurCarnet,lettre:numSent},async:true,tryCount:0,
retryLimit:3,beforeSend:function(){$("#GoogleMaps").showLoading()},success:function(data){data=jQuery.parseJSON(data);$.each(data,function(keys,markers){if(keys=="markers")$.each(markers,function(key,value){if(!ci.checkPrestaAlreadyExists(value.id)){if(isCarnet==true){var tabInfo=idMenu.split("|");idMenu="";for(var i=0;i<tabInfo.length;i++)idMenu+=tabInfo[i]}ci.addMarkerToMap(value,idMenu,true)}})});ci.autoCenter();markerCluster.repaint()},error:function(jqXHR,textStatus,errorThrown){$("#GoogleMaps").hideLoading();
if(textStatus=="timeout"){this.tryCount++;if(this.tryCount<=this.retryLimit){$.ajax(this);return}return}},complete:function(){$("#GoogleMaps").hideLoading()}})},checkMarkerExistByLatLng:function(value){var result=false;var markerLatLng=null;for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];markerLatLng=marker.getPosition();if(value.latitude.toFixed(5)==markerLatLng.lat().toFixed(5)&&value.longitude.toFixed(5)==markerLatLng.lng().toFixed(5)&&value.id!=dataKey){result=
marker;break}}return result},checkMarkerExistByPosition:function(value){var result=false;var markerLatLng=null;for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];markerLatLng=marker.getPosition();if(value.latitude.toFixed(5)==markerLatLng.lat().toFixed(5)&&value.longitude.toFixed(5)==markerLatLng.lng().toFixed(5)){result=dataKey;break}}return result},createInfoWindowContent:function(value){var content="";if(value.imageUrl!=null&&value.imageUrl.length>1)content+='<div class="thumbnail"><img src="'+
value.imageUrl+'" alt="'+value.imageAlt+'" title="'+value.imageTitle+'" /></div>';content+='<div class="infos" data-id-presta="'+value.id+'">';content+='<div class="title">';content+="<span>"+$("<div/>").html(value.title).text()+"</span>";if(value.bloc!=undefined)if(value.bloc.critere1!=undefined)$.each(value.bloc.critere1.contenu,function(i,val){content+='<span class="rank">'+val.contenu[0]+"</span>"});if(value.tarif!=undefined)content+='<span class="tarif">'+value.tarif+"</span>";content+="</div>";
if(value.bloc!=undefined){content+='<div class="descr">'+$("<div/>").html(value.bloc.texte1).text()+"</div>";content+='<div class="criteres">';if(value.bloc.critere2!=undefined)$.each(value.bloc.critere2.contenu,function(i,val){content+="<div>";content+='<span class="libelleCritere">'+val.libelle+": </span>";content+='<span class="valCritere">';var len=val.contenu.length;$.each(val.contenu,function(key,value){if(key!=len-1)content+=value+", ";else content+=value});content+="</span>";content+="</div>"});
if(value.bloc.critere3!=undefined)$.each(value.bloc.critere3.contenu,function(i,val){content+="<div>";content+='<span class="libelleCritere">'+val.libelle+": </span>";content+='<span class="valCritere">'+val.contenu[0]+"</span>";content+="</div>"});if(value.bloc.critere4!=undefined)$.each(value.bloc.critere4.contenu,function(i,val){content+="<div>";content+='<span class="libelleCritere">'+val.libelle+": </span>";content+='<span class="valCritere">'+val.contenu[0]+"</span>";content+="</div>"});content+=
"</div>"}content+='<div class="url">';if(value.carnetVoyage!="INACTIF"){var codeId=value.code;var codeTab=codeId.split("|");var codeIdModif=codeId.replace("|","");codeIdModif=codeIdModif.replace("|","");if(value.carnetVoyage=="ACTIFCARNET"){content+="<a onclick=\"ci.supCarnetDynamique('"+codeIdModif+'\');" href="carnet-voyage?action=remove&fiche='+value.code+'" class="carnet_voyage_supprimer"';if(value.carnetVoyage=="NOK")content+='style="display:none;"';content+='">'+ci.translate.remove_from_roadbook+
"</a>"}else{content+="<a onclick=\"ci.ajoutCarnetDynamique('"+codeIdModif+"','"+ci.addslashes(value.title)+"','"+value.id+'\')" href="carnet-voyage?action=add&fiche='+value.code+'" class="carnet_voyage_ajouter"';if(value.carnetVoyage=="OK")content+='style="display:none;"';content+=">"+ci.translate.add_to_roadbook+"</a>";content+="<a onclick=\"ci.supCarnetDynamique('"+codeIdModif+'\');" href="carnet-voyage?action=remove&fiche='+value.code+'" class="carnet_voyage_supprimer"';if(value.carnetVoyage==
"NOK")content+='style="display:none;"';content+='">'+ci.translate.remove_from_roadbook+"</a>"}}if(value.carnetVoyage!="INACTIF"&&value.url!=null)content+=" - ";if(value.url!=null){var classCss="";if(this.params.afficherFicheInfoViaPopup==true)classCss='class="popup"';content+="<a "+classCss+' href="'+value.url+'" target="_blank">'+ci.translate.see_details+"</a></div>"}content+="</div>";return content},supCarnetDynamique:function(code){$("#"+code).remove();ci.hideMarkerById(code,true);var nbResultCarnet=
parseInt($("#nb_carnet").html());var nbResultCarnetPlus=nbResultCarnet-1;$("#nb_carnet").html(nbResultCarnetPlus);if(nbResultCarnetPlus==0)$(".carnet-voyage-affiche").hide();else if(nbResultCarnetPlus==1){$("#trad1").show();$("#trad2").hide()}else{$("#trad1").hide();$("#trad2").show()}},ajoutCarnetDynamique:function(code,libelle,id){if($("#CarnetDeVoyage.carnet-voyage-affiche").length==0)return false;$(".carnet-voyage-affiche").show();idSent="";tabinfo=id.split("|");for(var i=1;i<tabinfo.length;i++){if(i!=
1)idSent+="|";idSent+=tabinfo[i]}libelle=ci.stripslashes(libelle);var nb=$("#CarnetDeVoyage li").length;var li='<li class="select" id="'+code+'" data-id="'+idSent+'">';li+='<img src="/Ajax/svg?action=markergooglemap&couleur=red&lettre='+(nb+1)+'&format=svgz" alt="" />';li+='<input id="menu-'+code+'" type="checkbox" class="inputMenu" data-lettre="'+(nb+1)+'"  data-id="'+idSent+'" data-parent-id="carnet" data-selection="carnet" />';li+='<label for="menu-'+code+'">'+libelle+"</label>";li+="</li>";$("#CarnetDeVoyage").append(li);
ci.sliderBoxOnClickListener();$("ul > #"+code+' > .inputMenu:checkbox[data-parent-id="carnet"]').trigger("click");$("ul > #"+code+' > .inputMenu:checkbox[data-parent-id="carnet"]').trigger("click");$("ul > #"+code+' > .inputMenu:checkbox[data-parent-id="carnet"]').trigger("click");var nbResultCarnet=parseInt($("#nb_carnet").html());var nbResultCarnetPlus=nbResultCarnet+1;$("#nb_carnet").html(nbResultCarnetPlus);if(nbResultCarnetPlus==1){$("#trad1").show();$("#trad2").hide()}else{$("#trad1").hide();
$("#trad2").show()}},addslashes:function(str){if(str!=null){str=str.replace(/\\/g,"\\\\");str=str.replace(/\'/g,"\\'");str=str.replace(/\"/g,'\\"');str=str.replace(/\0/g,"\\0")}return str},stripslashes:function(str){if(str!=null){str=str.replace(/\\'/g,"'");str=str.replace(/\\"/g,'"');str=str.replace(/\\0/g,"\x00");str=str.replace(/\\\\/g,"\\")}return str},addMarkerToMap:function(value,idMenu,nodraw){var marker=null;var markerOptions=null;var infoWindowOptions="";nodraw=nodraw==null?false:nodraw;
var latlng=new google.maps.LatLng(value.latitude,value.longitude);marker=ci.checkMarkerExistByLatLng(value);var content=ci.createInfoWindowContent(value);var markerKey="";if(marker!=false&&marker!=null){var contentWindow='<div class="MM_'+idMenu+'">'+content+"</div>";if(marker.key.split("|")[0]!="MM")contentWindow+='<div class="MM_'+marker.key.split("|")[0]+'">'+marker.content+"</div>";else contentWindow+=marker.content;marker.idValues.push(value.id);marker.idMenus.push(idMenu);marker.icon=ci.params.multiMarkersIcon;
marker.key="MM|"+idMenu+"|"+marker.idMenu;marker.idMenu=idMenu+"|"+marker.idMenu;marker.content=contentWindow;google.maps.event.clearListeners(marker,"click");infoWindowOptions={"content":marker.content,"maxWidth":350}}else{markerKey=idMenu+"|"+value.id;markerOptions={"key":markerKey,"idMenu":idMenu,"idValues":[value.id],"idMenus":[idMenu],"position":latlng,"bounds":true,"icon":value.icon,"title":$("<div/>").html(value.title).text(),"content":content};infoWindowOptions={"content":content,"maxWidth":350};
marker=new google.maps.Marker(markerOptions);markerCluster.addMarker(marker,nodraw)}var infowindow=new google.maps.InfoWindow(infoWindowOptions);if(this.params.afficherFicheInfoViaPopup==true)google.maps.event.addListener(infowindow,"domready",function(){if($.isFunction("initColorboxLinkFicheInfo"))$('div[data-id-presta="'+value.id+'"] a.popup').initColorboxLinkFicheInfo()});google.maps.event.addListener(marker,"click",function(){infowindow.open(self,marker)});listeMarkersByDataKey[value.id]=marker;
return marker},addWebcamMarkerToMap:function(value,idMenu){var marker=null;var latlng=new google.maps.LatLng(String(value.latitude),String(value.longitude));var markerByLatLng=ci.checkMarkerExistByLatLng(value);var content=ci.createInfoWindowContent(value);var tooltip=new Tooltip(value.title);var markerKey=idMenu+"|"+value.id;var markerOptions={"key":markerKey,"idMenu":idMenu,"idValues":[value.id],"position":latlng,"icon":value.icon,"title":$("<div/>").html(value.title).text(),"content":content};
marker=new google.maps.Marker(markerOptions);google.maps.event.addListener(marker,"mouseover",function(){tooltip.open(map,this)});google.maps.event.addListener(marker,"mouseout",function(){tooltip.close()});if(value.webcam.broken==null)google.maps.event.addListener(marker,"click",function(){if(location.protocol=="https:"&&value.webcam.url.indexOf(location.protocol)==-1)window.open(value.webcam.url,"_blank");else $.colorbox({iframe:true,title:value.title,href:value.webcam.url,height:value.webcam.height,
width:value.webcam.width})});markerCluster.addMarker(marker);listeMarkersByDataKey[value.id]=marker;return marker},addItineraireToMap:function(listePoint){var colors=["#1715ed","#C4524F","#68E066","#9F66D0"];var poly={path:listePoint,strokeColor:colors[nbItineraire],strokeOpacity:0.5,strokeWeight:4};var nbPoint=listePoint.length;for(i in listePoint){if(i==0){$parametreMarqueur={"id":"departItineraire","latitude":listePoint[i].lat(),"longitude":listePoint[i].lng(),"title":ci.translate.start,"imageUrl":"",
"imageAlt":"","imageTitle":"","url":"","icon":"","bloc":"","carnetVoyage":"","code":"departItineraire"};marker=new google.maps.Marker({"key":"departItineraire"+nbItineraire,"position":listePoint[i],"bounds":true,"markerIcon":"","icon":"","content":""})}if(i==nbPoint-1){$parametreMarqueur={"id":"departItineraire","latitude":listePoint[i].lat(),"longitude":listePoint[i].lng(),"title":ci.translate.end,"imageUrl":"","imageAlt":"","imageTitle":"","url":"","icon":"","bloc":"","carnetVoyage":"","code":"departItineraire"};
marker=new google.maps.Marker({"key":"finItineraire"+nbItineraire,"position":listePoint[i],"bounds":true,"markerIcon":"","icon":"","content":""})}}ci.autoCenter();var polymap=new google.maps.Polyline(poly);polymap.setMap(self.map);nbItineraire++},hideMarkerById:function(id){mapCanvas.gmap("closeInfoWindow");for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];var split=marker.key.split("|");if(split[0]=="MM"){var posMarkerIdMenus=marker.idMenus.indexOf(id);if(posMarkerIdMenus>
-1)ci.removePrestaFromMarker(marker,dataKey)}else if(split[0]==id||listeIdSSMenubyIdMenu[id]!=null&&listeIdSSMenubyIdMenu[id].indexOf(split[0])>-1){markerCluster.removeMarker(marker,true);delete listeMarkersByDataKey[dataKey]}}ci.autoCenter();markerCluster.repaint()},hideMarkerByPrestaId:function(id,isCarnet){mapCanvas.gmap("closeInfoWindow");var valeurCarnet=false;if(isCarnet==true)valeurCarnet=true;$.ajax({type:"GET",url:ajaxUrlBox,data:{id:id,isCarnet:valeurCarnet},async:true,beforeSend:function(){$("#GoogleMaps").showLoading()},
success:function(data){data=jQuery.parseJSON(data);$.each(data,function(keys,markers){if(keys=="markers")$.each(markers,function(key,value){for(var dataKey in listeMarkersByDataKey){var marker=listeMarkersByDataKey[dataKey];var markerKey=marker.key.split("|");markerKey.shift();var key=markerKey.join("|");if(key==value.id){marker.setMap(null);delete listeMarkersByDataKey[dataKey];markerCluster.setIgnoreHidden(true);markerCluster.removeMarker(marker)}}})})},error:function(){$("#GoogleMaps").hideLoading()},
complete:function(){$("#GoogleMaps").hideLoading()}})},_getUrlVars:function(){var vars=[],hash;var indexOf=window.location.href.indexOf("?");var hashes=window.location.href.slice(indexOf+1).split("&");if(indexOf!=-1)for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1]}return vars},removePrestaFromMarker:function(marker,prestaId){if(marker.idValues.length>1){var posMarkerIdValues=marker.idValues.indexOf(prestaId);if(posMarkerIdValues>-1){marker.idValues.splice(posMarkerIdValues,
1);var tmpDiv=$(marker.content);tmpDiv.find('div > div.infos[data-id-presta="'+prestaId+'"]').parent("div").remove();marker.content=tmpDiv.html();marker.icon=marker.idValues.length==1?marker.markerIcon:marker.icon;google.maps.event.clearListeners(marker,"click");google.maps.event.addListener(marker,"click",function(){self.openInfoWindow({"content":marker.content,"maxWidth":350},this)});if(marker.idValues.length==1){markerKey=marker.key.split("|");marker.key=markerKey[1]+"|"+marker.idValues[0]}delete listeMarkersByDataKey[prestaId]}}else if(marker.idValues[0]==
prestaId){markerCluster.removeMarker(marker,true);delete listeMarkersByDataKey[prestaId]}},autoCenter:function(){if(Object.keys(listeMarkersByDataKey).length==0){self.map.setCenter(new google.maps.LatLng(this.latitude,this.longitude));self.map.setZoom(this.zoomMap)}else{var bounds=new google.maps.LatLngBounds;for(var dataKey in listeMarkersByDataKey)bounds.extend(listeMarkersByDataKey[dataKey].getPosition());self.map.fitBounds(bounds);self.map.panToBounds(bounds)}},detectIEVersion:function(){var sAgent=
window.navigator.userAgent;var Idx=sAgent.indexOf("MSIE");if(Idx>0)return parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx)));else if(sAgent.match(/Trident\/7\./))return 11;else if(sAgent.match(/Edge/))return 12;else return 0}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/108-carnet-voyage-v3.js **************************************************************/ 
var CarnetVoyageV3=function(cleCarnetACharger){this.idDiv="carnet-voyage-v3";this.element=null;this.divCarnetVoyageV3Existe=false;this.elementListeFiches=null;this.elementSendMail=null;this.carte=null;this.urlController="carnet-voyage";this.parametres={};this.nbFiches=0;this.listeFiches={};this.listeDataPrestByKeyPrest={};this.init(cleCarnetACharger)};
CarnetVoyageV3.prototype.init=function(cleCarnetACharger){this.element=$("#"+this.idDiv);if(this.element.length>0)this.divCarnetVoyageV3Existe=true;if(this.divCarnetVoyageV3Existe){this.elementListeFiches=this.element.find(".detail-carnet .content.liste-fiches");this.elementSendMail=this.element.find(".detail-carnet .content.send-mail");this.initParametres(function(){this.chargerCarnet(cleCarnetACharger)}.bind(this))}this.initDOM()};
CarnetVoyageV3.prototype.initParametres=function(callbackFunction){$.getJSON(this.urlController,{action:"getParametresCarnetVoyageV3"},function(data){this.parametres=data;callbackFunction()}.bind(this))};
CarnetVoyageV3.prototype.initCarte=function(){if(!this.divCarnetVoyageV3Existe)return false;var tabStylesMap=[{featureType:"poi",stylers:[{visibility:this.parametres.afficherPOIGoogle?"on":"off"}]}];var mapOptions={center:{lat:parseFloat(this.parametres.latitude),lng:parseFloat(this.parametres.longitude)},zoom:parseInt(this.parametres.zoom),gridSize:parseInt(this.parametres.gridSize),markerClustererIcon:this.parametres.markerClustererIcon,styles:tabStylesMap};this.carte=new CarteInteractiveV3(this.element.find(".carte-carnet"),
mapOptions)};
CarnetVoyageV3.prototype.initDOM=function(){$this=this;this.element.find(".toggle-carte").click(function(){this.toggleCarte();return false}.bind(this));this.element.find(".detail-carnet .btn-close").click(function(){this.fermer();return false}.bind(this));this.element.find(".detail-carnet .btn-liste-fiches").click(function(){this.activerContent("liste-fiches");return false}.bind(this));this.element.find(".detail-carnet .btn-empty").click(function(){this.viderCarnet();return false}.bind(this));this.element.find(".detail-carnet .btn-send-mail").click(function(){this.afficherFormulaireEnvoiCarnet();
return false}.bind(this));this.element.find(".detail-carnet .btn-print").click(function(){this.telechargerCarnet();return false}.bind(this));$(document).on("submit",'div#carnet-voyage-v3 div.content.send-mail form[action*="action_carnet-voyage-v3=envoieformulaire"]',function(){$.post($(this).attr("action"),$(this).serialize(),function(dataJson){if(dataJson["success"])$this.elementSendMail.html('<div class="alert-success">'+dataJson["msg"]+"</div>");else{var divErreur=$this.elementSendMail.find("#form_erreur_header");
if(divErreur.length>0){divErreur.children(".titre").html("Erreur");divErreur.children(".contenu").html(dataJson["msg"]);divErreur.css({display:"block"})}$('div.form_submit_div > input[name="forms_valid"]').prop("disabled",false)}},"json");return false});$(".lien_carnet").click(function(){this.ouvrir();return false}.bind(this));$(document).on("click",".btn_panier_popup_carnet",function(event){event.preventDefault();$.colorbox.close();this.ouvrir();return false}.bind(this));$(document).on("click","#bloc_popup_ajout_fiche_carnet input[type=checkbox][name=desactiver_popup]",
function(){var desactiverPopUp=$(this).prop("checked")?1:0;$.getJSON($this.urlController,{action:"desactiverPopupCarnetVoyageV3",desactiver:desactiverPopUp},function(dataJSON){})});if($("span.carnet_voyage_mini_panier_nb_fiche").length>0){$this.nbFiches=parseInt($("span.carnet_voyage_mini_panier_nb_fiche").text());if($("#carnet_voyage_mini_panier").hasClass("carnet_voyage_rempli")==false&&$this.nbFiches>0)$("#carnet_voyage_mini_panier").addClass("carnet_voyage_rempli")}$(document).on("click",".carnet_voyage_ajouter",
function(event){var boutonClique=$(this);event.preventDefault();$this.ajouterPrest(boutonClique)});$(document).on("click",".carnet_voyage_supprimer",function(event){var boutonClique=$(this);event.preventDefault();$this.supprimerPrest(boutonClique)})};
CarnetVoyageV3.prototype.chargerCarnet=function(cleCarnet){var ajaxParams={};ajaxParams.action="getListePrestCarnetVoyageV3";if(cleCarnet!=null)ajaxParams.cle=cleCarnet;$.getJSON(this.urlController,ajaxParams,function(data){var nbFiches=0;for(var contextKeyPrest in data){nbFiches++;this.afficherPrestDansPage({fiche:data[contextKeyPrest]["infoPrest"]["Cle"],nbFiches:nbFiches});this.afficherPrest(data[contextKeyPrest])}if(cleCarnet!=null)this.ouvrir()}.bind(this))};
CarnetVoyageV3.prototype.ouvrir=function(){if(!this.element.hasClass("open")){this.element.addClass("open");setTimeout(function(){$(".toggle-carte").trigger("click")},300);if(this.carte==null){this.initCarte();for(var keyPrest in this.listeDataPrestByKeyPrest)this.afficherPrestDansCarteCarnet(keyPrest)}}if(!$("body").hasClass("carnet-voyage-v3"))$("body").addClass("carnet-voyage-v3")};CarnetVoyageV3.prototype.fermer=function(){this.fermerCarte();this.element.removeClass("open");$("body").removeClass("carnet-voyage-v3")};
CarnetVoyageV3.prototype.ouvrirCarte=function(){if(this.carte!=null)this.carte.ouvrir()};CarnetVoyageV3.prototype.fermerCarte=function(){if(this.carte!=null)this.carte.fermer()};CarnetVoyageV3.prototype.toggleCarte=function(){if(!this.element.find(".carte-carnet").hasClass("open"))this.ouvrirCarte();else this.fermerCarte()};
CarnetVoyageV3.prototype.activerContent=function(classDivContent){if(this.element.find(".detail-carnet .content."+classDivContent).hasClass("open"))return false;this.element.find(".detail-carnet .content").removeClass("open");this.element.find(".detail-carnet .btn-actions .btn-icon").removeClass("open");this.element.find(".detail-carnet .content."+classDivContent).addClass("open");if(!this.element.find(".detail-carnet .btn-"+classDivContent).hasClass("open"))this.element.find(".detail-carnet .btn-"+
classDivContent).addClass("open")};
CarnetVoyageV3.prototype.afficherPrest=function(dataPrest){if(!this.divCarnetVoyageV3Existe)return false;this.elementListeFiches.children("p.msg-carnet-vide").hide();this.elementListeFiches.append(dataPrest["html"]);var keyPrest=dataPrest["infoPrest"]["Cle"];var contexteIdPrest=dataPrest["infoPrest"]["ContexteId"];var ficheListe=this.elementListeFiches.find('.fiche-liste[data-cle="'+keyPrest+'"]');ficheListe.mouseenter(function(){if(this.carte!=null)this.carte.animateMarker(keyPrest,false)}.bind(this)).mouseleave(function(){if(this.carte!=
null)this.carte.animateMarker(keyPrest,true)}.bind(this)).click(function(){this.ouvrirCarte();this.carte.centrerSurMarker(keyPrest);if(this.parametres.afficherFicheInfoViaPopup==true)google.maps.event.addListener(this.carte.infoWindow,"domready",function(){$('div[data-contexte-id="'+contexteIdPrest+'"] a.popup').initColorboxLinkFicheInfo()})}.bind(this));this.listeFiches[keyPrest]=ficheListe;this.listeDataPrestByKeyPrest[keyPrest]=dataPrest;this.element.find(".detail-carnet .btn-send-mail").removeClass("disabled");
this.element.find(".detail-carnet .btn-print").removeClass("disabled");this.element.find(".detail-carnet .btn-empty").removeClass("disabled");if(this.carte!=null)this.afficherPrestDansCarteCarnet(keyPrest)};
CarnetVoyageV3.prototype.afficherPrestDansCarteCarnet=function(keyPrest){var that=this;if(typeof this.carte.listeDataPrestByKeyPrest[keyPrest]!="undefined")return;var ficheListe=this.elementListeFiches.find('.fiche-liste[data-cle="'+keyPrest+'"]');var dataPrest=this.listeDataPrestByKeyPrest[keyPrest];if(ficheListe.length==0||typeof dataPrest=="undefined")return;var markerPrestEvents={markerEvents:{mouseover:function(){for(var i in this.idValues){var ficheListePrest=that.elementListeFiches.find('.fiche-liste[data-cle="'+
this.idValues[i]+'"]');if(ficheListePrest.length>0&&!ficheListePrest.hasClass("hover"))ficheListePrest.addClass("hover")}},mouseout:function(){for(var i in this.idValues){var ficheListePrest=that.elementListeFiches.find('.fiche-liste[data-cle="'+this.idValues[i]+'"]');ficheListePrest.removeClass("hover")}},click:function(){this.carte.afficherPrestInfoWindow(dataPrest)}.bind(this)},clusterEvents:{mouseover:function(cluster){if(cluster.markers_.length>1&&cluster.clusterIcon_.div_&&cluster.markers_.indexOf(this.carte.listeMarkersByKeyPrest[keyPrest])>
-1)if(!ficheListe.hasClass("hover"))ficheListe.addClass("hover")}.bind(this),mouseout:function(){ficheListe.removeClass("hover")}}};this.carte.afficherPrest(dataPrest,markerPrestEvents)};
CarnetVoyageV3.prototype.afficherPrestDansPage=function(jsonData){$('.carnet_voyage_ajouter[href*="'+jsonData["fiche"]+'"]').hide();$('.carnet_voyage_supprimer[href*="'+jsonData["fiche"]+'"]').show();$(".carnet_voyage_mini_panier_nb_fiche").html(jsonData["nbFiches"]);$this.nbFiches=jsonData["nbFiches"];$("#carnet_voyage_mini_panier").addClass("carnet_voyage_mini_panier_anime",1E3);setTimeout(function(){$this.finAnimationPanierAjout();if($("#carnet_voyage_mini_panier").hasClass("carnet_voyage_rempli")==
false)$("#carnet_voyage_mini_panier").addClass("carnet_voyage_rempli")},2E3)};
CarnetVoyageV3.prototype.cacherPrest=function(keyPrest){if(!this.divCarnetVoyageV3Existe)return false;if(this.carte!=null)this.carte.cacherPrest(keyPrest);this.elementListeFiches.find('.fiche-liste[data-cle="'+keyPrest+'"]').remove();delete this.listeFiches[keyPrest];delete this.listeDataPrestByKeyPrest[keyPrest];this.nbFiches-=1;if(this.nbFiches==0){this.element.find(".detail-carnet .btn-send-mail").addClass("disabled");this.element.find(".detail-carnet .btn-print").addClass("disabled");this.element.find(".detail-carnet .btn-empty").addClass("disabled");
this.elementListeFiches.children("p.msg-carnet-vide").show();this.fermer()}};
CarnetVoyageV3.prototype.cacherPrestDansPage=function(jsonData,btnSupprimer){$('.carnet_voyage_supprimer[href*="'+jsonData["fiche"]+'"]').hide();$('.carnet_voyage_ajouter[href*="'+jsonData["fiche"]+'"]').show();$(".carnet_voyage_mini_panier_nb_fiche").html(jsonData["nbFiches"]);if($(".nb-resultats").length>0){var resActuel=$(".nb-resultats").html();var parts=resActuel.split(" ");if(parts.length>1)$(".nb-resultats").html(jsonData["nbFiches"]+" "+parts[1])}var carnet=-1;var url=btnSupprimer.attr("href");
var urlSplit=url.split("&");if(urlSplit.length>0)for(var i=0;i<urlSplit.length;i++){var urlSplit2=urlSplit[i].split("=");if(urlSplit2.length>1)if(urlSplit2[0]=="carnet")carnet=urlSplit2[1]}if($(".parametres").length>0)if(jsonData["nbFiches"]==0){$(".parametres").hide();if(carnet!=-1&&$(".carnetNumero"+carnet).length>0)$(".carnetNumero"+carnet).hide();if($(".client_carnet_voyage_liste").length>0){var nbRow=$(".client_carnet_voyage_liste .ligneCarnet").length;if(nbRow==1)$("#message_aucun_carnet").show()}}if(jsonData["nbFiches"]==
1&&$(".liste_info_simple_liste_carnet_voyage").length>0){$(".carnet_voyage_supprimer").attr("href","carnet-voyage?action=viderCarnet");$(document).off("click")}if($("#enregistrerCarnet").length>0)if(jsonData["nbFiches"]==0)$("#enregistrerCarnet").hide();if($("#viderCarnet").length>0)if(jsonData["nbFiches"]==0)$("#viderCarnet").hide();if($("#envoiCarnet").length>0)if(jsonData["nbFiches"]==0)$("#envoiCarnet").hide();if($("#imprimerCarnet").length>0)if(jsonData["nbFiches"]==0)$("#imprimerCarnet").hide();
$("#carnet_voyage_mini_panier").addClass("carnet_voyage_mini_panier_anime",1E3);setTimeout(function(){$this.finAnimationPanierAjout();if($("#carnet_voyage_mini_panier").hasClass("carnet_voyage_rempli")&&$this.nbFiches==0)$("#carnet_voyage_mini_panier").removeClass("carnet_voyage_rempli")},2E3)};
CarnetVoyageV3.prototype.ajouterPrest=function(btnAjouter){$this=this;$.getJSON(btnAjouter.attr("href"),function(jsonData){if(jsonData["success"]==1){$this.afficherPrestDansPage(jsonData);$this.afficherPrest(jsonData["dataPrest"]);if(typeof jsonData["popup"]!="undefined")if($(window).width()<=768)$.colorbox({html:jsonData["popup"],maxWidth:"100% - 42px",maxHeight:"100% - 42px"});else $.colorbox({html:jsonData["popup"],width:"50%"})}})};
CarnetVoyageV3.prototype.supprimerPrest=function(btnSupprimer){var $this=this;$.getJSON(btnSupprimer.attr("href"),function(jsonData){if(jsonData["success"]==1){$this.cacherPrestDansPage(jsonData,btnSupprimer);$this.cacherPrest(jsonData["fiche"])}})};
CarnetVoyageV3.prototype.viderCarnet=function(){$.getJSON(this.urlController,{action:"viderCarnetVoyageV3"},function(jsonData){if(jsonData["success"]==1){for(var keyPrest in this.listeFiches){this.cacherPrest(keyPrest);$('.carnet_voyage_supprimer[href*="'+keyPrest+'"]').hide();$('.carnet_voyage_ajouter[href*="'+keyPrest+'"]').show()}$(".carnet_voyage_mini_panier_nb_fiche").html(this.nbFiches)}}.bind(this))};
CarnetVoyageV3.prototype.afficherFormulaireEnvoiCarnet=function(){$.get(this.urlController,{action:"getFormulaireEnvoiCarnetVoyageV3"},function(dataHtml){if(dataHtml=="")return false;var formEnvoi=$(dataHtml.trim());this.elementSendMail.html(formEnvoi);formulaire_init();this.activerContent("send-mail")}.bind(this))};CarnetVoyageV3.prototype.telechargerCarnet=function(){window.open(this.urlController+"?action=telechargerCarnetVoyageV3","_blank")};CarnetVoyageV3.prototype.finAnimationPanierAjout=function(){$("#carnet_voyage_mini_panier").removeClass("carnet_voyage_mini_panier_anime")};
CarnetVoyageV3.prototype.finAnimationPanierASuppression=function(){this.finAnimationPanierAjout()};CarnetVoyageV3.getQueryParameters=function(url){return(url||document.location.search).replace(/(^\?)/,"").split("&").map(function(n){return n=n.split("="),this[n[0]]=n[1],this}.bind({}))[0]};
$(document).ready(function(){if($("#carnet-voyage-v3").length==0)return false;var urlParams=CarnetVoyageV3.getQueryParameters();var cleCarnetACharger=null;if(urlParams["carnet-voyage-v3"]!=null&&urlParams["cle"]!=null)cleCarnetACharger=urlParams["cle"];var carnetVoyageV3=new CarnetVoyageV3(cleCarnetACharger)});

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/110-bxslider-ingenie.js **************************************************************/ 
var BxSliderIngenie=function(selector,sliderParametres,backstretch,sliderThumbnail){this.debug=false;if(this.debug)console.log("BxSliderIngenie : construct ",selector,sliderParametres,backstretch,sliderThumbnail);if(typeof selector=="undefined"||selector==""){if(this.debug)console.log("BxSliderIngenie : selector undefined");return false}this.element=$(selector);if(this.debug)console.log("BxSliderIngenie : this.element",this.element);if(this.element.length==0){if(this.debug)console.log("BxSliderIngenie : element length 0");
return false}this.slider=null;this.parametres={auto:false,autoStart:false,pager:false,controls:false,infiniteLoop:false};if(typeof sliderParametres!="undefined"&&sliderParametres!="")this.parametres=sliderParametres;this.backstretch=false;if(typeof backstretch!="undefined")this.backstretch=backstretch;this.sliderThumbnail=false;if(typeof sliderThumbnail!="undefined")this.sliderThumbnail=sliderThumbnail;this.realThumbSlider=null;this.parametres.onSliderLoad=this.bxSliderOnSliderLoad.bind(this);this.parametres.onSlideBefore=
this.bxSliderOnSlideBefore.bind(this);this.parametres.onSlideAfter=this.bxSliderOnSlideAfter.bind(this);this.initSlider()};BxSliderIngenie.prototype.bxSliderGetNumNextSlide=function(currentNum,nbSlides){return currentNum+1>=nbSlides?nbSlides-1:currentNum+1};BxSliderIngenie.prototype.bxSliderGetNumPrevSlide=function(currentNum,nbSlides){return currentNum-1<0?nbSlides-1:currentNum-1};
BxSliderIngenie.prototype.bxSliderLoadSlideContent=function(numSlide,src,contentType,sensLoadNext){if(numSlide==null||typeof numSlide=="undefined")return;var contentType=contentType||"image";if(sensLoadNext==null||typeof sensLoadNext=="undefined")var sensLoadNext=true;var idSlider=this.element.attr("id");var objBxSlider=this.slider;var objBxSliderIngenie=this;if(this.debug)console.log("bxSliderLoadSlideContent idSlider : ",idSlider);if(this.debug)console.log("bxSliderLoadSlideContent objBxSlider : ",
objBxSlider);var liToLoad=$("#"+idSlider).children("li:not(.bx-clone)").get(numSlide);if(contentType=="image"){var imgToLoad="";if(this.backstretch===true)imgToLoad=$(liToLoad).find("div.backstretch img");else if($(liToLoad).find("div.extrait > div.image img").length>0)imgToLoad=$(liToLoad).find("div.extrait > div.image img");else imgToLoad=$(liToLoad).children("img");if(this.debug)console.log("bxSliderLoadSlideContent imgToLoad : ",imgToLoad);this.setSlidersHigthQuality(imgToLoad,$(liToLoad))}else if(contentType==
"widget-dispos")WidgetDispos.loadAjaxVueDispos(idSlider,numSlide,sensLoadNext,function(){console.log("loadAjaxVueDispos callback objBxSlider",objBxSlider,objBxSliderIngenie);var currentSlide=objBxSliderIngenie.slider.getCurrentSlide();console.log("currentSlide",currentSlide);if(!sensLoadNext){currentSlide+=1;console.log("ajout au debut, upd currentSlide",currentSlide)}objBxSliderIngenie.parametres.startSlide=currentSlide;console.log("new param slider",objBxSliderIngenie.parametres);objBxSliderIngenie.slider.reloadSlider(objBxSliderIngenie.parametres)});
else if(contentType=="ajax")$.ajax({url:src,type:"get",async:true,beforeSend:function(){},success:function(data,status,jqXHR){},error:function(jqXHR,status,error){console.log("error : ",error)},complete:function(jqXHR,status){}})};
BxSliderIngenie.prototype.bxSliderOnSlideBefore=function(slideElement,oldIndex,newIndex){if(this.debug)console.log("onsliderBefore : ",this,slideElement,oldIndex,newIndex);if(this.sliderThumbnail==true)this.changeRealThumb(newIndex);var idSlider=slideElement.parent("ul").attr("id");if(this.debug)console.log("onslidebefore",idSlider,"newIndex",newIndex,"oldIndex",oldIndex);var contentTypeToLoad="image";if($("#"+idSlider).hasClass("loadPeriodeAjaxActif"))contentTypeToLoad="widget-dispos";var nbDecalage=
this.maxSlides;var sensLoadNext=newIndex>oldIndex;nbDecalage=this.moveSlides>0?this.moveSlides:this.maxSlides;var idFirstVisible=newIndex*nbDecalage;var idLastVisible=idFirstVisible+nbDecalage-1;var liOldSlide=$("#"+idSlider).children("li:not(.bx-clone)").get(oldIndex);$(liOldSlide).removeClass("slideComplete");var liSlide=$("#"+idSlider).children("li:not(.bx-clone)").get(newIndex);$(liSlide).addClass("sliding");this.bxSliderLoadSlideContent(newIndex,"",contentTypeToLoad,sensLoadNext);if(contentTypeToLoad==
"image"){for(var i=1;i<=nbDecalage;i++)this.bxSliderLoadSlideContent(idFirstVisible-i,"",contentTypeToLoad,sensLoadNext);for(var i=1;i<=nbDecalage;i++)this.bxSliderLoadSlideContent(idLastVisible+i,"",contentTypeToLoad,sensLoadNext)}};BxSliderIngenie.prototype.bxSliderOnSlideAfter=function(slideElement,oldIndex,newIndex){if(this.debug)console.log("onSlideAfter : ",this);var idSlider=slideElement.parent("ul").attr("id");var liSlide=$("#"+idSlider).children("li:not(.bx-clone)").get(newIndex);$(liSlide).removeClass("sliding").addClass("slideComplete")};
BxSliderIngenie.prototype.bxSliderOnSliderLoad=function(currentIndex){if(this.debug)console.log("onsliderLoad : ",this);var liSlide=this.element.find("li:not(.bx-clone)").get(currentIndex);$(liSlide).addClass("slideComplete")};
BxSliderIngenie.prototype.initSlider=function(){if(this.backstretch===true)this.element.children("li").each(function(index,li){var liElement=$(li);if(liElement.children("span.backstretch-parametres").length==0)return;var parametresBackstretch=liElement.children("span.backstretch-parametres");var urlImageBackstretch=parametresBackstretch.attr("data-image-url");var urlImageLowResBackstretch=parametresBackstretch.attr("data-image-low-res");liElement.backstretch(urlImageBackstretch);if(urlImageLowResBackstretch!=
"")liElement.find("div.backstretch img").attr("data-size-full",urlImageLowResBackstretch)});if(this.debug)console.log("BxSliderIngenie : initSlider");if(this.element.children("li").length>1){if(this.debug)console.log("BxSliderIngenie : id element",this.element.attr("id"));if(typeof this.element.attr("id")=="undefined"){if(this.debug)console.log("BxSliderIngenie : >> id element",this.element.attr("id"));this.element.attr("id",IngenieTools.uniqID(8,"bxslider_"));if(this.debug)console.log("BxSliderIngenie : << id element",
this.element.attr("id"))}if(this.debug)console.log("this.parametres : ",this.parametres);if(this.debug)console.log("debut element.bxSlider");this.slider=this.element.bxSlider(this.parametres);if(this.debug)console.log("fin element.bxSlider");if(this.debug)console.log("this.slider : ",this.slider)}else{this.parametres.auto=false;this.parametres.autoStart=false;this.parametres.infiniteLoop=false;this.parametres.pager=false;this.parametres.controls=false;this.slider=this.element.bxSlider(this.parametres)}if(this.sliderThumbnail==
true)this.initSliderThumbnail();this.setClassNameElementByDirection();if(this.parametres.infiniteLoop){this.setSlidersHigthQuality($(".slideComplete img",this.element),$(".slideComplete",this.element));$.each($(".bx-clone img",this.element),function(index,imgToLoad){this.setImageHigthQuality($(imgToLoad))}.bind(this))}else $.each($("img",this.element),function(index,imgToLoad){this.setImageHigthQuality($(imgToLoad))}.bind(this))};
BxSliderIngenie.prototype.initSliderThumbnail=function(){this.realThumbSlider=$("#sliderThumbReal #thumb-pager").bxSlider({minSlides:4,maxSlides:4,slideWidth:156,slideMargin:12,moveSlides:1,pager:false,speed:1E3,infiniteLoop:false,hideControlOnEnd:true,nextText:"<span></span>",prevText:"<span></span>"});this.linkRealSliders();if($("#sliderThumbReal #thumb-pager a").length<5)$("#sliderThumbReal #thumb-pager .bx-next").hide()};
BxSliderIngenie.prototype.linkRealSliders=function(bigS){var that=this;$("#sliderThumbReal #thumb-pager").on("click","a",function(event){event.preventDefault();var newIndex=$(this).parent().attr("slideIndex");that.slider.goToSlide(newIndex)})};
BxSliderIngenie.prototype.changeRealThumb=function(newIndex){var thumbS=$("#sliderThumbReal #thumb-pager");thumbS.find(".active").removeClass("active");thumbS.find("a[slideIndex="+newIndex+"]").addClass("active");if(this.slider.getSlideCount()-newIndex>=4)this.realThumbSlider.goToSlide(newIndex);else this.realThumbSlider.goToSlide(this.slider.getSlideCount()-4)};
BxSliderIngenie.prototype.setSlidersHigthQuality=function(imgToLoad,liToLoad){liToLoad=liToLoad||null;var nbSlidesToLoad=this.parametres.maxSlides||1;if(imgToLoad.length>0)this.setImageHigthQuality(imgToLoad);if(liToLoad!==null&&liToLoad.length>0){var nextLiToLoad=liToLoad;for(var i=0;i<nbSlidesToLoad-1;i++){nextLiToLoad=nextLiToLoad.next();imgToLoad=$("img",nextLiToLoad);if(imgToLoad.length>0)this.setImageHigthQuality()}}};
BxSliderIngenie.prototype.setImageHigthQuality=function(imgToLoad){if(typeof imgToLoad!=="undefined"&&typeof imgToLoad.attr("data-size-full")!=="undefined"&&imgToLoad.attr("data-size-full")!==""){imgToLoad.attr("src",imgToLoad.attr("data-size-full"));imgToLoad.removeAttr("data-size-full")}};
BxSliderIngenie.prototype.setClassNameElementByDirection=function(){var mode=typeof this.parametres.mode!=="undefined"?this.parametres.mode:"horizontal";this.element.parent(".bx-viewport").addClass("bx-direction-"+mode)};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/110-carte-integree-liste.js **************************************************************/ 
var CarteIntegreeListe=function(){this.idDiv="carte-integree-liste";this.element=null;this.carte=null;this.urlController=window.location.pathname;this.parametres={};this.listeFiches={};this.listeDataPrestByKeyPrest={};this.elementListe=$(".liste-info-content");this.affinageMap=false;this.tradAffinageMap={fr:"Affiner au deplacement de la carte",en:"Refine on map move",es:"Refinar durante el movimiento de la mapa",de:"Verfeinern Sie wahrend der Bewegung der Karte",nl:"Verfijnen wanneer beweging van de kaart",
it:"Raffinare al movimento della carta",pt:"Refinar durante o movimento do cartao",ru:"Refine on map move",ca:"Refinar durante el movimento de la mapa"};this.init()};CarteIntegreeListe.prototype.init=function(){this.element=$("#"+this.idDiv);if(this.element.length==0)return;this.initDOM();this.initParametres(function(){this.initCarte();this.chargerListePrest(false,false)}.bind(this))};CarteIntegreeListe.prototype.initDOM=function(){};
CarteIntegreeListe.prototype.initParametres=function(callbackFunction){$.getJSON(this.urlController,{action:"getParametresCarteIntegreeListe"},function(data){this.parametres=data;callbackFunction()}.bind(this))};
CarteIntegreeListe.prototype.initCarte=function(){var that=this;var tabStylesMap=[{featureType:"poi",stylers:[{visibility:this.parametres.afficherPOIGoogle?"on":"off"}]}];var mapOptions={center:{lat:parseFloat(this.parametres.latitude),lng:parseFloat(this.parametres.longitude)},zoom:parseInt(this.parametres.zoom),gridSize:parseInt(this.parametres.gridSize),markerClustererIcon:this.parametres.markerClustererIcon,styles:tabStylesMap};var mapEvents={dragend:function(){that.reloadListePrest()},zoom_changed:function(){that.reloadListePrest()}};
var mapControls={TOP_CENTER:this.affinageMapControl()};this.carte=new CarteInteractiveV3(this.element,mapOptions,mapEvents,mapControls);$(window).bind("resize scroll",function(){google.maps.event.trigger(that.carte.map,"resize")})};
CarteIntegreeListe.prototype.chargerListePrest=function(removeMarkers,acceptZeroResults,numPage){var ajaxParams={};ajaxParams.action="getListePrestCarteIntegreeListe";if(typeof numPage!="undefined")ajaxParams.numPage=numPage;if(typeof acceptZeroResults!="undefined"&&acceptZeroResults)ajaxParams.acceptZeroResults=acceptZeroResults;$.getJSON(this.urlController,ajaxParams,function(data){if(typeof removeMarkers!="undefined"&&removeMarkers==true)this.carte.removeAllMarkers();for(var contextKeyPrest in data){if(contextKeyPrest==
"params")continue;this.afficherPrest(data[contextKeyPrest])}}.bind(this))};CarteIntegreeListe.prototype.afficherPrest=function(dataPrest){var keyPrest=dataPrest["infoPrest"]["Cle"];this.listeDataPrestByKeyPrest[keyPrest]=dataPrest;this.afficherPrestDansCarteIntegree(keyPrest)};
CarteIntegreeListe.prototype.afficherPrestDansCarteIntegree=function(keyPrest){var that=this;if(typeof this.carte.listeDataPrestByKeyPrest[keyPrest]!="undefined")return;var dataPrest=this.listeDataPrestByKeyPrest[keyPrest];if(typeof dataPrest=="undefined")return;var tabKeyPrest=keyPrest.split("|");if(tabKeyPrest.length==2)var idFiche="PRESTATAIRE-"+tabKeyPrest.join("-");else var idFiche="PRESTATION-"+tabKeyPrest.join("-");idFiche=idFiche.replace(/\s+/g,"");var $ficheListe=$("#"+idFiche);var markerPrestEvents=
{markerEvents:{mouseover:function(){$ficheListe.addClass("markerHover");if(Object.keys(this.infoWindowHtml).length==0)that.chargerInfosCompletesMarker(this)},mouseout:function(){$(".markerHover").removeClass("markerHover")}},clusterEvents:{}};$ficheListe.mouseenter(function(){this.carte.animateMarker(keyPrest,false,this.parametres.couleurMarqueurHover,this.parametres.couleurTexteMarqueurHover)}.bind(this)).mouseleave(function(){this.carte.animateMarker(keyPrest,true,this.parametres.couleurMarqueur,
this.parametres.couleurTexteMarqueur)}.bind(this));this.carte.afficherPrest(dataPrest,markerPrestEvents)};
CarteIntegreeListe.prototype.chargerInfosCompletesMarker=function(objMarker){var ajaxParams={};ajaxParams.action="getInfoPrestCarteIntegreeListe";ajaxParams.tabKeyPrest=objMarker.idValues;$.getJSON(this.urlController,ajaxParams,function(tabDataPrests){for(var keyPrest in tabDataPrests){this.listeFiches[keyPrest]=tabDataPrests[keyPrest]["html"];this.listeDataPrestByKeyPrest[keyPrest]=tabDataPrests[keyPrest]}this.carte.updateInfosCompletesMarker(objMarker,tabDataPrests)}.bind(this))};
CarteIntegreeListe.prototype.reloadListePrest=function(){if(!this.affinageMap)return false;var that=this;var bounds=this.carte.map.getBounds();var ajaxParams={};ajaxParams.action="result";ajaxParams.affiner=1;if($("input.mid").length>0){ajaxParams.mid=$("input.mid").val();var ajaxUrl=MoteurRecherche.urlBase}else if($("input.cid").length>0){ajaxParams.cid=$("input.cid").val();ajaxParams.typePrestataire=$("input.type_prestataire_origine").val();var ajaxUrl=Resa.urlBase}else return false;ajaxParams.criteres=
[];$('.affinage input[name="criteres[]"]:checked').each(function(){ajaxParams.criteres.push($(this).val())});ajaxParams.map_bounds=bounds.getNorthEast().lat()+"|"+bounds.getNorthEast().lng()+"|"+bounds.getSouthWest().lat()+"|"+bounds.getSouthWest().lng();var ajaxRequest=$.ajax({url:ajaxUrl,data:ajaxParams});ajaxRequest.done(function(html){if($(html.trim()).find("#colonne_droite").length>0)$("#colonne_droite").html($(html.trim()).find("#colonne_droite").html());else if($(html.trim()).attr("id")=="liste-info"){$("#liste-info").find(".parametres").html($(html.trim()).find(".parametres").html());
$("#liste-info").find("#liste-info-content").html($(html.trim()).find("#liste-info-content").html())}else $("#liste-info").html($(html.trim()).find("#liste-info").html());if($("#liste-info").length==0&&$("#content").length>0){var $contentFilter=$(html.trim()).filter("#content");if($contentFilter.length>0)$("#content").html($contentFilter.html());else if($(html.trim()).attr("id")=="liste-info"){var reponseHtmlAjax=$(html.trim());var divListeAAjouter=reponseHtmlAjax.get(0);$("#content").html(divListeAAjouter)}else $("#content").html($(html.trim()).find("#content").html());
$("#reload_js_vue").remove();script_distant=$(html.trim()).filter("script#reload_js_vue").html();$("body").append("<script>"+script_distant+"<\/script>")}if($(".affinage_nb_resultat_nombre").length>0&&$(html.trim()).find(".nb-resultats").length>0){nb_resultat_a_affiche=$(html.trim()).find(".nb-resultats").html().split(" ");$(".affinage_nb_resultat_nombre").html(nb_resultat_a_affiche[0])}that.chargerListePrest(true,true);if(ajaxUrl==MoteurRecherche.urlBase){if($(html.trim()).find(".moteurRecherche").length>
0)MoteurRecherche.init_affinage(".moteurRecherche");MoteurRecherche.reinit_nb_valeurs_critere(".moteurRecherche","",ajaxParams.mid)}else Resa.reinit_nb_valeurs_critere(".moteurResa");$(window).trigger("resize");IngenieTools.scrollToId("liste-info-content")})};
CarteIntegreeListe.prototype.affinageMapControl=function(){var that=this;if($("input.mid").length==0&&$("input.cid").length==0){that.affinageMap=false;return false}var textControl=this.tradAffinageMap[$("html").attr("lang")];var $controlDiv=$("<div>");$controlDiv.prop("class","map_affinage_panel");var $controlUI=$("<div>");$controlUI.prop("class","map_affinage_control");$controlUI.prop("title",textControl);$controlDiv.append($controlUI);var $controlCheckbox=$("<input>");$controlCheckbox.prop("id",
"map_affinage");$controlCheckbox.prop("type","checkbox");$controlCheckbox.prop("checked",this.affinageMap);$controlUI.append($controlCheckbox);var $controlLabel=$("<label>");$controlLabel.prop("for","map_affinage");$controlLabel.prop("class","map_affinage_label");$controlLabel.html(textControl);$controlUI.append($controlLabel);$controlCheckbox.on("change",function(){that.affinageMap=!that.affinageMap;that.reloadListePrest()});return $controlDiv[0]};var carteIntegreeListe;

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/101-resa.js **************************************************************/ 
var isInitMoteurResa=false;var isInitMenuAccordeon=false;var mode_debug_ingenie=false;var cptRequetesAjaxResa=0;var listeGetMoteurTypePrestataireEnCours={};
var Resa={pathStatic:"https://static.ingenie.fr/",urlBase:"/booking",SIZE_MINI:"MINI",SIZE_MEDIUM:"MEDIUM",SIZE_BIG:"BIG",__constructor:function(cid){this.init_moteur_resa(cid)},init_champs_date:function(selector_form_resa){$(selector_form_resa+" .datepicker").each(function(){var datesPossibles=null;var moisEnCours=null;var objDivDP=null;var dateJour=new Date;var minYear=new Date(dateJour.getFullYear(),0,1,0,0,0);var maxYear=new Date(dateJour.getFullYear()+2,0,0,0,0,0);var delai="";if(typeof $(this).attr("data-delai")!=
"undefined")delai="&delai="+$(this).attr("data-delai");var typeDate="";var paramTypeDate="";if(typeof $(selector_form_resa).find("select[name=type_date]")!="undefined"){typeDate=$(selector_form_resa).find("select[name=type_date] option:selected").val();paramTypeDate+="&type_date="+$(selector_form_resa).find("select[name=type_date] option:selected").val()}else if(typeof $(selector_form_resa).find("input[name=type_date]")!="undefined"){typeDate=$(selector_form_resa).find("input[name=type_date]:checked").val();
paramTypeDate+="&type_date="+$(selector_form_resa).find("input[name=type_date]:checked").val()}$(this).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,minDate:minYear,maxDate:maxYear,onClose:function(selectedDate){if($(this).hasClass("minDate")&&$(selector_form_resa+" .maxDate").length>0){var dateFinal=selectedDate;var datesplit=selectedDate.split("/");var dateJPlusUn=new Date(datesplit[2],datesplit[1]-1,datesplit[0],0,0,0);dateJPlusUn.setDate(dateJPlusUn.getDate()+1);var dateMonth=
dateJPlusUn.getMonth()+1;if(dateMonth<10)dateMonth="0"+dateMonth;dateFinal=dateJPlusUn.getDate()+"/"+dateMonth+"/"+dateJPlusUn.getFullYear();$(selector_form_resa+" .maxDate").datepicker("option","minDate",dateFinal)}Resa.launchCallback(selector_form_resa+" ."+$(this).attr("id")+"_callback",false);datesPossibles=null},beforeShow:function(input,inst){var myDate=$(this).datepicker("getDate");if(myDate!=null){var mois=myDate.getMonth()+1;var year=myDate.getFullYear()}else{var myDate=new Date;var mois=
myDate.getMonth()+1;var year=myDate.getFullYear()}if(mois<10)mois="0"+mois;var formParent=$(this).parents("form");var idForm=formParent.attr("id");var cle="";if($("#"+idForm+" .cle_fiche").length>0){cle=$("#"+idForm+" .cle_fiche").val();var typeCle=cle.split("-")[1];if(typeCle=="P")cle=""}else if($("#"+idForm+" .cle_fiche_liaison").length>0){cle=$("#"+idForm+" .cle_fiche_liaison").val();var typeCle=cle.split("-")[1];if(typeCle=="P")cle=""}if($("#"+idForm+" .cle_fiche_bon_plan").length>0){cle=$("#"+
idForm+" .cle_fiche_bon_plan").val();var typeCle=cle.split("-")[1];if(typeCle=="P")cle=""}var typePrestataire=Resa.getTypePrestataire("#"+idForm);var fin="";var name=$(this).attr("name");if(name=="datefin")fin="&datefin=oui";var cid=1;cid=$(".cid").val();var urlAjax="/booking?action=getListeDatePossibles&mois="+mois+"&annee="+year+"&type_prestataire="+typePrestataire+"&cid="+cid+"&cle="+cle+fin+delai+paramTypeDate;$.ajax({url:urlAjax,cache:false,async:false}).done(function(JsonData){if(JsonData.dates!=
undefined)if(JsonData.dates.length>0)datesPossibles=JsonData.dates;else datesPossibles=null;else datesPossibles=null;moisEnCours=JsonData.mois;objDivDP=inst.dpDiv})},beforeShowDay:function(date){if(objDivDP!=null){var idForm=$(this).parents("form").attr("id");var objDivNoResultMoteur=$("#"+idForm+" div.noresult."+typeDate);if(objDivNoResultMoteur.length>0){if(objDivDP.children("div.noresult."+typeDate).length==0)objDivNoResultMoteur.clone().prependTo(objDivDP);var objDivNoResultDatePicker=objDivDP.children("div.noresult."+
typeDate);if(datesPossibles==null||datesPossibles.length==0){objDivNoResultDatePicker.show();objDivDP.children(".ui-datepicker-calendar").css("visibility","hidden")}else{objDivNoResultDatePicker.hide();objDivDP.children(".ui-datepicker-calendar").css("visibility","visible")}}}if(datesPossibles!=null){var returnVal=false;var returnClass="disable";var checkdate=$.datepicker.formatDate("yymmdd",date);for(var i=0;i<datesPossibles.length;i++)if(datesPossibles[i]==checkdate){returnVal=true;returnClass=
"enable"}return[returnVal,returnClass]}else{var returnVal=false;var returnClass="disable";return[returnVal,returnClass]}},onChangeMonthYear:function(year,month){var myDate=new Date;var mois=month;if(mois<10)mois="0"+mois;var formParent=$(this).parents("form");var idForm=formParent.attr("id");var typePrestataire=Resa.getTypePrestataire("#"+idForm);var cid=1;cid=$(".cid").val();var cle="";if($("#"+idForm+" .cle_fiche").length>0){cle=$("#"+idForm+" .cle_fiche").val();var typeCle=cle.split("-")[1];if(typeCle==
"P")cle=""}else if($("#"+idForm+" .cle_fiche_liaison").length>0){cle=$("#"+idForm+" .cle_fiche_liaison").val();var typeCle=cle.split("-")[1];if(typeCle=="P")cle=""}if($("#"+idForm+" .cle_fiche_bon_plan").length>0){cle=$("#"+idForm+" .cle_fiche_bon_plan").val();var typeCle=cle.split("-")[1];if(typeCle=="P")cle=""}var fin="";var name=$(this).attr("name");if(name=="datefin")fin="&datefin=oui";var urlAjax="/booking?action=getListeDatePossibles&mois="+mois+"&annee="+year+"&type_prestataire="+typePrestataire+
"&cid="+cid+"&cle="+cle+fin+delai+paramTypeDate;$.ajax({url:urlAjax,cache:false,async:false}).done(function(JsonData){if(JsonData.dates!=undefined)if(JsonData.dates.length>0)datesPossibles=JsonData.dates;else datesPossibles=null;else datesPossibles=null;moisEnCours=JsonData.mois})}});$(this).datepicker("option","monthNamesShort",$(this).datepicker("option","monthNames"));var saisonDebut=$(".input_saison_debut").val();if(saisonDebut!=null)$(this).datepicker("setDate",saisonDebut);var dateConf;if($(selector_form_resa+
" ."+$(this).attr("id")+"_conf").length>0){eval($(selector_form_resa+" ."+$(this).attr("id")+"_conf").val());var dateMin=dateConf[0];dateMin=dateMin.substring(6,8)+"/"+dateMin.substring(4,6)+"/"+dateMin.substring(0,4);$(this).datepicker("option","minDate",dateMin);if(dateConf[1]!=undefined){var dateMax=dateConf[1];dateMax=dateMax.substring(6,8)+"/"+dateMax.substring(4,6)+"/"+dateMax.substring(0,4);$(this).datepicker("option","maxDate",dateMax)}}if($(".listeDatesPossibles").length>0)$(this).datepicker("option",
"beforeShowDay",function(maDate){eval($(".listeDatesPossibles").val());var returnVal=false;var returnClass="disable";var checkdate=$.datepicker.formatDate("yymmdd",maDate);for(var i=0;i<listeDatesPossibles.length;i++)if(listeDatesPossibles[i]==checkdate){returnVal=true;returnClass="enable"}return[returnVal,returnClass]});var lang="";if($(selector_form_resa+" #langueEnCoursDatepicker").length>0){lang=$(selector_form_resa+" #langueEnCoursDatepicker").val();if(lang=="")$.datepicker.setDefaults($.datepicker.regional[""]);
else if(lang=="fr")$.datepicker.setDefaults($.datepicker.regional["fr"]);else $.datepicker.setDefaults($.datepicker.regional[lang])}})},init_moteur_resa:function(cid,selector_form_resa,loadResa){if(selector_form_resa==undefined)selector_form_resa=".form-resa";if(cid==undefined)cid=1;if(typeof loadResa=="undefined")loadResa=false;var lanceScriptSelectionCadrilege=$(".moteur_resa_sejour_cadrilege").length>0;if(lanceScriptSelectionCadrilege)this.init_moteur_special_cadrilege();var callback="";isInitMoteurResa=
true;if($(".menuAccordeon").length>0&&$(".modifier_recherche").length>0){selector_form_resa_modif="#"+$(".modifier_recherche").parent().parent().parent().attr("id");$(".modifier_recherche").unbind("click");if($(".modifier_recherche_package").length>0)$(" .modifier_recherche_package").unbind("click");else $(".modifier_recherche").click(function(e){Resa.reload_moteur_ajax(selector_form_resa_modif);return false})}callback='Resa.init_filtre_prestataire("'+selector_form_resa+'", $(this).val(), '+cid+");";
this.selectAttachEvent(selector_form_resa+" .moteurFiltrePrestataire",callback,true,true);this.init_reglette(selector_form_resa);this.init_champs_date(selector_form_resa);callback=$(selector_form_resa+" .duree_callback").val();this.selectAttachEvent(selector_form_resa+" .duree",callback,true,true);$(selector_form_resa+" .modifier_recherche").unbind("click");$(selector_form_resa+" .modifier_recherche").click(function(e){var selector_form_resa_modif="#"+$(".modifier_recherche").parents(".form-recherche").attr("id");
Resa.reload_moteur_ajax(selector_form_resa_modif);return false});$(selector_form_resa+" .modifier_recherche_package").unbind("click");callback='Resa.select_personnes($(this).val(), "'+selector_form_resa+'");';this.selectAttachEvent(selector_form_resa+" .selection_multichambre",callback,true,true);callback='Resa.select_chambres($(this).val(), "'+selector_form_resa+'");';this.selectAttachEvent(selector_form_resa+" .prestations",callback,true,true);this.selectAttachEvent(selector_form_resa+" .select_nb_enfants",
'Resa.choix_ages_enfants_simple("'+selector_form_resa+'")',true,true);this.launchCallback(selector_form_resa+" .callback",true,selector_form_resa+" .callback_save");callback='Resa.toggle_pas_de_dates("'+selector_form_resa+'", ".sans_dates");';this.checkboxAttachEvent(selector_form_resa+" .sans_dates",callback,true,true);if(loadResa&&$("div.widget_dispos.wd_ext").length==0)callback='Resa.recherche_ajax("'+selector_form_resa+'",true);';eval(callback);this.init_affinage(selector_form_resa);this.init_criteres_choix();
if($('input[name="qte_article"]').length>0)this.bind_less_more_qte();if($(".form-recherche").find("#cid").val()!=undefined&&$(".form-recherche").find("#cid").val()!=cid)cid=$(".form-recherche").find("#cid").val();this.init_recherche_texte_affinage(cid,".cadre_affinage_recherche_resa");try{if(window.parent.socket!=undefined&&$(".bouton_ancre_panier_cross_selling a").length>0)$(".bouton_ancre_panier_cross_selling a").click(function(){var socketMessage="{action: 'scrollTo', params: {top: '"+$("#tab_panier_resa").offset().top+
"'}}";window.parent.socket.postMessage("##"+socketMessage);return false})}catch(err){console.log("err window.parent.socket :",err.message)}},init_moteur_special_cadrilege:function(){if($(".moteur_resa_sejour_cadrilege").attr("rel")==""){var tabJson="";var tabJsonValue="";var cid=$("#cid").val();var urlAjax="booking?cid="+cid+"&action=getListeCritereAjax&critere=GEO&prestataire=R";$.getJSON(urlAjax,function(json){if(json.success){var tabJson=json.data;var tabJsonKeyValue=json.dataKeyValue;if(json.typeCritere==
"GEO"&&$("#inputListeGeo").attr("disabled")=="disabled")if($("#choixLocalCadrilege2").is(":checked"))$("#inputListeGeo").val("GEO["+ttabJsonKeyValue[$("#valueCritereLocal").val()]);else{if($("#choixLocalCadrilege3").is(":checked"))$("#inputListeGeo").val("GEO["+ttabJsonKeyValue[$("#valueCritereLocal").val()])}else if(json.typeCritere=="ZONEGEO"){$("#inputListeGeo").val("ZONEGEO["+tabJsonKeyValue[$("#valueCritereLocal").val()]);$("#choixLocalCadrilege2").prop("checked",true)}$("#inputListeGeo").autocomplete({minLength:0,
source:tabJson,select:function(a,b){this.value=b.item.label;this.val=b.item.label;$("#inputListeGeo").val(b.item.label);$(".inputCritereLocal").remove();$(".form-recherche").append("<input class='inputCritereLocal' type='hidden' name='criteres[]' value='GEO["+b.item.value+"'/>");$("#inputListeGeo").attr("disabled","disabled");$(".croixImage").show();$("#choixLocalCadrilege1").prop("checked",false);$("#choixLocalCadrilege2").prop("checked",true);$("#choixLocalCadrilege3").prop("checked",false);return false}}).focus(function(){$(this).autocomplete("search",
"")});var objetSelect=$("#selectChoixLocalCritere");$("#choixLocalCadrilege1").prop("checked",true);$("#choixLocalCadrilege2").prop("checked",false);var input='<input class="inputCritereLocal" type="hidden" name="criteres[]" value="<?php echo $codeGeoInput.\'[\'.$valueInput;?>"/>';$(".inputCritereLocal").remove();if(objetSelect.val()!="0"){$(".form-recherche").append(input);$(".inputCritereLocal").val(objetSelect.find("option:selected").attr("rel")+"["+objetSelect.val());$("#valueCritereLocal").val(objetSelect.val())}}else alert(json.erreur.msg)});
$(".moteur_resa_sejour_cadrilege").attr("rel","initOK")}},init_filtre_prestataire:function(selector,cle_fiche,cid,first_init){if(first_init==undefined)first_init=false;var type_prestataire=Resa.getTypePrestataire(selector);var strMoteurTypePrest="";if($(selector+" .moteurTypePrestataire").length>0)strMoteurTypePrest="&moteurTypePrestataire="+$(selector+" .moteurTypePrestataire").val();else if($(selector).attr("rel")!=undefined)strMoteurTypePrest="&moteurTypePrestataire="+$(selector).attr("rel");var urlAjax=
"/booking?cid="+cid+"&action=getMoteurFiltrePrestataire&cle_fiche="+cle_fiche+"&typePrestataire="+type_prestataire+strMoteurTypePrest;$.getJSON(urlAjax,function(json){if(json.success){var parentSelector=selector+"_parent";if($(parentSelector+" .descriptifPrestMoteur").length>0)Resa.moteur_toggle_descriptif(parentSelector,!json.filtreUniquement);var tmp_selector=selector;if(!first_init&&$(selector).parents(".ui-accordion-content").length>0)tmp_selector="#"+$(selector).parents(".ui-accordion-content").attr("id");
if(json.filtreUniquement==true&&json.datas.content!=""&&$(tmp_selector+" .moteurFiltrePrestataire").length>0){$(tmp_selector+" .form-resa_parent").remove();$(tmp_selector+" .div_lien_moteur").remove();$($.trim(json.datas.content)).insertAfter($(tmp_selector+" .moteurFiltrePrestataire"))}else if(json.lien==true&&$(selector+" .moteurFiltrePrestataire").length>0){$(selector+" .form-resa_parent").remove();$(selector+" .div_lien_moteur").remove();$($.trim(json.datas.content)).insertAfter($(selector+" .moteurFiltrePrestataire"))}else if(json.pave==
true){$(parentSelector+" .descriptifPrestMoteur").html(json.datas.content);var lienRetour='<span class="closeBtn"></span>';$(parentSelector+" .descriptifPrestMoteur").html(lienRetour+$(parentSelector+" .descriptifPrestMoteur").html());var callback="Resa.moteur_toggle_descriptif('"+parentSelector+"', false); $('"+parentSelector+" .moteurFiltrePrestataire').val(0);";Resa.clickAttachEvent(parentSelector+" .closeBtn",callback,false,true)}else{var typePrestAttache=$(".form-recherche #type_prestataire_attache").length;
if(typePrestAttache>0)Resa.load_moteur_fiche(cle_fiche,cid,"","","","",$(".form-recherche #type_prestataire_attache").val())}}else if(json.erreur.msg!=undefined);})},moteur_toggle_descriptif:function(selector,display){if(display){$(selector+" FORM").css("display","none");$(selector+" .descriptifPrestMoteur").css("display","")}else{$(selector+" FORM").css("display","");$(selector+" .descriptifPrestMoteur").css("display","none")}},init_recherche_texte_affinage:function(cid,selector_form_affinage){if($(selector_form_affinage+
" .recherche_texte_input").length>0){$(selector_form_affinage+" .recherche_texte_input").autocomplete({source:"booking?cid="+cid+"&action=searchAutoComplete",minLength:3,select:function(event,ui){$(selector_form_affinage+" .recherche_texte_annulation").css("display","none");$(selector_form_affinage+" .recherche_texte_loader").css("display","");$(selector_form_affinage+" .recherche_texte_id").val(ui.item.id);$(selector_form_affinage+" .recherche_texte_type").val(ui.item.type);Resa.affiner_recherche(selector_form_affinage,
true);$(selector_form_affinage+" .recherche_texte_loader").css("display","none");$(selector_form_affinage+" .recherche_texte_annulation").css("display","")},search:function(event,ui){$(selector_form_affinage+" .recherche_texte_loader").css("display","")},response:function(event,ui){$(selector_form_affinage+" .recherche_texte_loader").css("display","none")}}).data("ui-autocomplete")._renderItem=function(ul,item){var texte="";if(item.labelType!="")texte+='<span class="ac_labelType">'+item.labelType+
" : </span> ";texte+='<span class="ac_label">'+item.label+" </span> ";if(item.code!=undefined&&item.code!="")texte+='<span class="ac_code">'+item.code+"</span> ";return $("<li>").append("<a>"+texte+"</a>").appendTo(ul)};$(selector_form_affinage+" .recherche_texte_annulation").click(function(){Resa.recherche_texte_annulation(selector_form_affinage)})}},recherche_texte_annulation:function(selector_form_affinage){$(selector_form_affinage+" .recherche_texte_id").val("");$(selector_form_affinage+" .recherche_texte_type").val("");
$(selector_form_affinage+" .recherche_texte_input").val("");Resa.affiner_recherche(selector_form_affinage,true);$(selector_form_affinage+" .recherche_texte_annulation").css("display","none")},load_moteur_fiche:function(id_fiche,cid,externe,dateDebut,dateFin,origineId,vendeur,cleMoteurFicheLiaison){var urlAjax="/booking?cid="+cid+"&action=searchAjaxPrest&id_fiche="+id_fiche;if(externe!=undefined)if(externe=="O")urlAjax+="&externe=O";else if(externe=="M")urlAjax+="&externe=O&origne=MENU";if(dateDebut!=
undefined&&dateDebut!="")urlAjax+="&new_dateDebut="+dateDebut;if(dateFin!=undefined&&dateFin!="")urlAjax+="&new_dateFin="+dateFin;if($("#codeItineraire").length>0)urlAjax+="&code_itineraire="+$("#codeItineraire").val();if($("#cleEnMain").length>0)urlAjax+="&cle_en_main="+$("#cleEnMain").val();if($("#origineFiche").length>0)urlAjax+="&origineFiche="+$("#origineFiche").val();if(cleMoteurFicheLiaison!=undefined&&cleMoteurFicheLiaison!="")urlAjax+="&cleMoteurFicheLiaison="+cleMoteurFicheLiaison;if($(".form-"+
id_fiche+" .inAjaxRequest").length>0){var el;for(var i=0;$(".form-"+id_fiche+" .inAjaxRequest")[i]!=undefined;i++){el=$(".form-"+id_fiche+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+"="+$(el).val()}}if(typeof vendeur!="undefined"&&vendeur!="")urlAjax+="&vendeur="+vendeur;var idRetourAjax="#moteurResa-"+id_fiche;if(origineId!=undefined&&origineId!="")idRetourAjax="#"+origineId;$.getJSON(urlAjax,function(json){if(json.success){$(idRetourAjax).html(json.datas.moteur);eval($(".datedeb_callback").val())}else alert(json.erreur.msg)})},
toggle_pas_de_dates:function(selector,sans_dates){var disable_date=$(selector+" "+sans_dates).is(":checked");var s=selector;var listeChampsSelecteur=s+" .datedeb, "+s+" .datefin, "+s+" .duree, "+s+" .bloc_choix_type_date, "+s+" .datedeb_resa, "+s+" .duree_resa";var listeBlocOpacity=s+" .bloc_date, "+s+" .resa_bloc_date_champs";if(!disable_date){if($(listeChampsSelecteur).length>0)$(listeChampsSelecteur).attr("disabled",false);if($(listeBlocOpacity).length>0)$(listeBlocOpacity).css("opacity",1)}else{if($(listeChampsSelecteur).length>
0)$(listeChampsSelecteur).attr("disabled",true);if($(listeBlocOpacity).length>0)$(listeBlocOpacity).css("opacity",0.4)}},get_jour_semaine:function(cid,selector,selector_return,date,next_date_selector){var next_date=false;var type_prestataire=Resa.getTypePrestataire(selector);var urlAjax="/booking?cid="+cid+"&action=getJourSemaine&date="+date+"&typePrestataire="+type_prestataire;if($(next_date_selector).length>0){urlAjax+="&nextDate=true";next_date=true}$.getJSON(urlAjax,function(json){if(json.success){$(selector+
" "+selector_return).html(json.jour);if(json.next_date){$(next_date_selector).val(json.next_date);if($(next_date_selector.replace("#",".")+"_callback").length>0)eval($(next_date_selector.replace("#",".")+"_callback").val())}}else if(json.erreur.msg!=undefined)alert(json.erreur.msg)})},get_duree_sejour:function(cid,selector,selector_return){var urlAjax="/booking?cid="+cid+"&action=getDureeSejour&datedeb="+$(selector+" .datedeb").val()+"&datefin="+$(selector+" .datefin").val();$.getJSON(urlAjax,function(json){if(json.success){$(selector+
" "+selector_return).html(json.nb_jours);$(selector+" .duree").val(parseInt(json.nb_jours))}else if(json.erreur.msg!=undefined)alert(json.erreur.msg)})},select_type_recherche:function(cid,selector,type_recherche,cle,prefixe){var urlAjax="/booking?cid="+cid+"&action=getChoixDateTypeRecherche&type_recherche="+type_recherche+"&cle="+cle;if($("#new_dateDebut")&&$("#new_dateDebut").val()!=undefined){urlAjax+="&new_dateDebut="+$("#new_dateDebut").val();urlAjax+="&new_dateFin="+$("#new_dateFin").val()}if(prefixe!=
undefined&&prefixe!="")urlAjax+="&prefixe_champs="+prefixe;$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .date_recherche_activites").html(html);Resa.init_champs_date(selector)})},select_type_date:function(cid,selector,type_date,cle,langueEnCours){cptRequetesAjaxResa++;Resa.toggle_active_btn_recherche(selector);if($(selector).parent().parent().prev().attr("id")=="codeMoteurFiche")cle=$(".menuAccordeon .menuMoteur .loadMoteurFiche").next("#codeMoteurFiche").val();var urlAjax="/booking?cid="+
cid+"&action=getSelectTypeDatePossible&type_date="+type_date+"&cle="+cle+"&langue="+langueEnCours;var tabCle=cle.split("-");if(tabCle.length==1)if($(selector+" .cle_fiche_liaison").length>0){var cleFicheLiaison=$(selector+" .cle_fiche_liaison").val();urlAjax=urlAjax+"&cle_fiche_liaison="+cleFicheLiaison}urlAjax=urlAjax+"&id_form="+selector.substring(1,selector.length);if($("#new_dateDebut")&&$("#new_dateDebut").val()!=undefined){urlAjax+="&new_dateDebut="+$("#new_dateDebut").val();urlAjax+="&new_dateFin="+
$("#new_dateFin").val()}$.ajax({url:urlAjax,cache:false,async:false}).done(function(html){$(selector+" .bloc_date_resa").html(html);if(type_date=="LL")if($(selector+" .div_calendrier").length>0)$(selector+" .div_calendrier").parent().addClass("isDtPckr");Resa.init_champs_date(selector);if($(selector+" .duree").is(":hidden")==false)Resa.select_type_duree(cid,selector,type_date,cle,langueEnCours);cptRequetesAjaxResa--;Resa.toggle_active_btn_recherche(selector);Resa.init_champs_date(selector)})},toggle_active_btn_recherche:function(selector){if($(selector+
" .form_search").is(":enabled")){$(selector+" .form_search").prop("disabled",true);$(selector+" .form_search").css("opacity","0.5");Resa.loaderShow(".form-recherche","loading-resa-moteur",Resa.SIZE_MEDIUM)}else{$(selector+" .form_search").prop("disabled",false);$(selector+" .form_search").css("opacity","1");Resa.loaderHide(".form-recherche","#loading-resa-moteur")}},select_type_duree:function(cid,selector,type_date,cle,langueEnCours){cptRequetesAjaxResa++;var tabCle=cle.split("-");Resa.toggle_active_btn_recherche(selector);
var urlAjax="/booking?cid="+cid+"&action=getSelectTypeDuree&type_date="+type_date+"&cle="+cle+"&langue="+langueEnCours;if($("#new_dateDebut")&&$("#new_dateDebut").val()!=undefined){urlAjax+="&new_dateDebut="+$("#new_dateDebut").val();urlAjax+="&new_dateFin="+$("#new_dateFin").val()}if(tabCle.length==1)if($(selector+" .cle_fiche_liaison").length>0){var cleFicheLiaison=$(selector+" .cle_fiche_liaison").val();urlAjax+="&cle_fiche_liaison="+cleFicheLiaison}$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+
" .bloc_duree_resa").html(html);cptRequetesAjaxResa--;Resa.toggle_active_btn_recherche(selector)})},reinit_reglette:function(){var reglette_min;var reglette_max;if($(".reglette_prix_min_bkp")&&$(".reglette_prix_min_bkp").val()){reglette_min=$(".reglette_prix_min").val();reglette_min=Math.floor(reglette_min/10)*10}if($("reglette_prix_max_bkp")&&$(".reglette_prix_max_bkp").val()){reglette_max=$(".reglette_prix_max").val();reglette_max=Math.ceil(reglette_max/10)*10}$("#resa_prix_reglette_fourchette").html("de "+
reglette_min+"&euro; &agrave; "+reglette_max+"&euro;");$("#resa_prix_reglette").slider({values:[reglette_min,reglette_max]})},init_reglette:function(selector_form_resa){selector_form_resa="";var reglette_init_min;var reglette_init_max;var reglette_min;var reglette_max;if($(".reglette_init_prix_min")&&$(".reglette_init_prix_min").val()){reglette_init_min=parseInt($(".reglette_init_prix_min").val());reglette_init_min=Math.floor(reglette_init_min/10)*10}if($("reglette_init_prix_max")&&$(".reglette_init_prix_max").val()){reglette_init_max=
parseInt($(".reglette_init_prix_max").val())+1;reglette_init_max=Math.ceil(reglette_init_max/10)*10}if($(".reglette_prix_min")&&$(".reglette_prix_min").val()){reglette_min=parseInt($(".reglette_prix_min").val());reglette_min=Math.floor(reglette_min/10)*10}if($("reglette_prix_max")&&$(".reglette_prix_max").val()){reglette_max=parseInt($(".reglette_prix_max").val())+1;reglette_max=Math.ceil(reglette_max/10)*10}$("#resa_prix_reglette").slider({range:true,min:reglette_init_min,max:reglette_init_max,values:[reglette_min,
reglette_max],step:10,slide:function(event,ui){$(".reglette_prix_min").val(ui.values[0]);$(".reglette_prix_max").val(ui.values[1]);$("#jreglette_prix_min").html(ui.values[0]+"&euro;");$("#jreglette_prix_max").html(ui.values[1]+"&euro;")},stop:function(event,ui){Resa.affiner_recherche(selector_form_resa,"#TARIFS")}})},init_affinage:function(selector_form_resa){selector_form_resa="";if($(selector_form_resa+" .cadre_affinage_recherche_resa").length){if($(selector_form_resa+" .cadre_affinage_recherche_resa .mid").length>
0)return false;$(selector_form_resa+" .checkbox_valcri").unbind("click");$(selector_form_resa+" .checkbox_valcri").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();Resa.affiner_recherche(selector_form_resa,$(this).val().split("[")[0])});$(selector_form_resa+" .checkbox_zone_geo").unbind("click");$(selector_form_resa+" .checkbox_zone_geo").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();
else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();Resa.affiner_recherche(selector_form_resa,"%23ZONGE")});$(selector_form_resa+" .checkbox_nbPersonne").unbind("click");$(selector_form_resa+" .checkbox_nbPersonne").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();Resa.affiner_recherche(selector_form_resa,"%23NBPER")})}},affiner_recherche:function(selector_form_resa,
reinitvaleur){Resa.loaderShow(".cadre_affinage_recherche_resa","loader-resa-affinage",Resa.SIZE_MEDIUM);Resa.loaderShow();if(reinitvaleur==undefined)reinitvaleur=false;var criteres="";$(selector_form_resa+" .checkbox_valcri").each(function(){if($(this).is(":checked"))criteres+="&criteres[]="+$(this).val()});var zones_geo="";$(selector_form_resa+" .checkbox_zone_geo").each(function(){if($(this).is(":checked"))zones_geo+="&zones_geo[]="+$(this).val()});var nb_personne="";$(selector_form_resa+" .checkbox_nbPersonne").each(function(){if($(this).is(":checked"))nb_personne+=
"&nb_personne[]="+$(this).val()});var recherche_texte="";if($(selector_form_resa+" .recherche_texte_id").length>0&&$(selector_form_resa+" .recherche_texte_type").length>0){recherche_texte+="&recherche_texte="+$(selector_form_resa+" .recherche_texte_id").val();recherche_texte+="&recherche_texte_type="+$(selector_form_resa+" .recherche_texte_type").val()}var prix_min="";var prix_max="";if(reinitvaleur=="#TARIFS"){prix_min="&prix_min="+$(".reglette_prix_min").val();prix_max="&prix_max="+$(".reglette_prix_max").val()}var cid=
Resa.getCidOnPage(selector_form_resa);var urlAjax="/booking?cid="+cid+"&action=result&affiner=1"+zones_geo+nb_personne+criteres+prix_min+prix_max+recherche_texte;$.ajax({url:urlAjax,cache:false}).done(function(html){if($(html.trim()).attr("id")=="liste-info")$("#liste-info").html($(html.trim()).html());else $("#liste-info").html($($.trim(html)).find("#liste-info").html());Resa.loaderHide();if($($.trim(html)).find("#carteGoogleMap").length>0)initialiserGoogleMap();try{reload_js_vue()}catch(err){}if(reinitvaleur)Resa.reinit_nb_valeurs_critere(selector_form_resa,
reinitvaleur);else Resa.loaderHide(".cadre_affinage_recherche_resa","#loader-resa-affinage")})},getCidOnPage:function(selector_form_resa){if(selector_form_resa==undefined)selector_form_resa="";var cid=1;if($(selector_form_resa+" .cid").length>0)cid=$(selector_form_resa+" .cid").val();else if($(".cid").length>0)cid=$(".cid").val();else if($("#cid").length>0)cid=$("#cid").val();return cid},reinit_nb_valeurs_critere:function(selector_form_resa,current_type_critere){var cid=Resa.getCidOnPage(selector_form_resa);
var urlAjax="/booking?cid="+cid+"&action=recalculCritere";if(current_type_critere!=undefined&&current_type_critere!="")urlAjax+="&current_type_critere="+current_type_critere;$.getJSON(urlAjax,function(json){$(selector_form_resa+" .critere_affiner .bloc_valcri").each(function(){var valeur_critere=$(this).find("INPUT").attr("id");var tab_valeur_critere=valeur_critere.split("_");if(json[tab_valeur_critere[1]]!=undefined&&json[tab_valeur_critere[1]][tab_valeur_critere[2]]!=undefined){$(this).find(".val_"+
tab_valeur_critere[1]+"_"+tab_valeur_critere[2]).html(json[tab_valeur_critere[1]][tab_valeur_critere[2]]);var classSelector=" .critere_affiner .bloc_valcri_"+tab_valeur_critere[1]+"_"+tab_valeur_critere[2];if(json[tab_valeur_critere[1]][tab_valeur_critere[2]]=="0"){$(selector_form_resa+classSelector).addClass("disabledCritere");$(selector_form_resa+classSelector+" INPUT").attr("checked",false);$(selector_form_resa+classSelector+" INPUT").attr("disabled",true)}else{$(selector_form_resa+classSelector).removeClass("disabledCritere");
$(selector_form_resa+classSelector+" INPUT").attr("disabled",false)}}});$(selector_form_resa+" .zonegeo_affiner .bloc_valcri").each(function(){var zone_geo=$(this).find("INPUT").attr("id");var tab_zone_geo=zone_geo.split("_");if(json["#ZONGE"]!=undefined&&json["#ZONGE"][tab_zone_geo[1]]!=undefined){$(this).find(".qte_"+tab_zone_geo[0]+"_"+tab_zone_geo[1]).html(json["#ZONGE"][tab_zone_geo[1]]);var classSelector=" .zonegeo_affiner ."+tab_zone_geo[0]+"_"+tab_zone_geo[1];if(json["#ZONGE"][tab_zone_geo[1]]==
"0"){$(selector_form_resa+classSelector).addClass("disabledCritere");$(selector_form_resa+classSelector+" INPUT").attr("checked",false);$(selector_form_resa+classSelector+" INPUT").attr("disabled",true)}else{$(selector_form_resa+classSelector).removeClass("disabledCritere");$(selector_form_resa+classSelector+" INPUT").attr("disabled",false)}}});$(selector_form_resa+" .nbpersonne_affiner .bloc_valcri").each(function(){var nb_personne=$(this).find("INPUT").attr("id");var tab_nb_personne=nb_personne.split("_");
if(json["#NBPER"]!=undefined&&json["#NBPER"][tab_nb_personne[1]]!=undefined){$(this).find(".qte_"+tab_nb_personne[0]+"_"+tab_nb_personne[1]).html(json["#NBPER"][tab_nb_personne[1]]);var classSelector=" .nbpersonne_affiner ."+tab_nb_personne[0]+"_"+tab_nb_personne[1];if(json["#NBPER"][tab_nb_personne[1]]=="0"){$(selector_form_resa+classSelector).addClass("disabledCritere");$(selector_form_resa+classSelector+" INPUT").attr("checked",false);$(selector_form_resa+classSelector+" INPUT").attr("disabled",
true)}else{$(selector_form_resa+classSelector).removeClass("disabledCritere");$(selector_form_resa+classSelector+" INPUT").attr("disabled",false)}}});if(json["#TARIFS"]!=undefined&&json["#TARIFS"]["MIN"]!=undefined&&current_type_critere!="#TARIFS"){if($(selector_form_resa+".reglette_prix_min")&&$(selector_form_resa+".reglette_prix_min").val())$(selector_form_resa+".reglette_prix_min").val(json["#TARIFS"]["MIN"]);if($(selector_form_resa+"reglette_prix_max")&&$(selector_form_resa+".reglette_prix_max").val())$(selector_form_resa+
".reglette_prix_max").val(json["#TARIFS"]["MAX"]);Resa.reinit_reglette()}Resa.loaderHide(".cadre_affinage_recherche_resa","#loader-resa-affinage")})},launchCallback:function(selector,emptyVal,selectorCallbackSave){if($(selector).length>0&&$(selector).val()!=""){var callbackInClass=$(selector).val();if(emptyVal)$(selector).val("");var initial=$(selector).attr("data-initial");if(initial==1)$(selector).attr("data-initial",0);eval(callbackInClass)}else if($(selector).val()==""){var initial=$(selector).attr("data-initial");
if(typeof selectorCallbackSave=="undefined")selectorCallbackSave="";if(initial==1&&selectorCallbackSave!=""&&$(selectorCallbackSave).length>0&&$(selectorCallbackSave).val()!=""){$(selector).attr("data-initial",0);var callbackInClass=$(selectorCallbackSave).val();eval(callbackInClass)}}},selectAttachEvent:function(selector,callback,launch,preventDetach){if($(selector).length>0){if(preventDetach)$(selector).unbind("change");$(selector).change(function(e){eval(callback)});if(launch)if($(selector).attr("forcelaunch")!=
"true"){$(selector).attr("forcelaunch","true");$(selector).change()}else;}},checkboxAttachEvent:function(selector,callback,launch,preventDetach){if($(selector).length>0){if(preventDetach)$(selector).unbind("click");$(selector).click(function(e){eval(callback)});if(launch)eval(callback)}},clickAttachEvent:function(selector,callback,launch,preventDetach){if($(selector).length>0){if(preventDetach)$(selector).unbind("click");$(selector).click(function(e){eval(callback)});if(launch)$(selector).click()}},
reload_moteur_ajax:function(selector_form_resa){var fromMenuMoteur=false;if($(".menuAccordeon").length>0&&$(".bloc_recap_recherche").length>0)fromMenuMoteur=true;if(fromMenuMoteur===true&&$(selector_form_resa+" .moteur_en_cours").length>0)Resa.getMoteurTypePrestataire($(selector_form_resa+" .cid").val(),$(selector_form_resa+" .moteur_en_cours").val(),$(selector_form_resa),"","",$("#forceTarget").val());if(fromMenuMoteur===true&&$(selector_form_resa+" .moteur_en_cours").length==0&&$(".moteur_en_cours").length>
0){selector_form_resa=$(".menuMoteur > .contenu > .form-resa > .form-recherche").attr("id");Resa.getMoteurTypePrestataire($(selector_form_resa+" .cid").val(),$(".moteur_en_cours").val(),$(selector_form_resa),"","",$("#forceTarget").val())}if($(selector_form_resa+" .cid")&&$(selector_form_resa+" .cid").val()&&fromMenuMoteur===false){var urlAjax="/booking?cid="+$(selector_form_resa+" .cid").val()+"&ajax=true";var typePrestAttache="";var cleFichePrestAttache="";var typePrestAttacheBase=$("#type_prestataire_attache").val();
if($("#type_prestataire_attache").length>0)$(selector_form_resa+" .type_prestataire").each(function(){if($(this).is(":checked"))if($(this).val()==typePrestAttacheBase&&typePrestAttacheBase!=""){typePrestAttache=typePrestAttacheBase;cleFichePrestAttache=$("#cle_fiche_prest_attache").val();$("#type_prestataire").val(typePrestAttache);$("#cle_fiche").val(cleFichePrestAttache);$(".resa_moteur_fiche").attr("id","moteurResa-"+cleFichePrestAttache)}else{$("#type_prestataire").val($(this).val());$("#cle_fiche").val($(selector_form_resa+
" .cle_fiche_base").val());$(".resa_moteur_fiche").attr("id","moteurResa-"+$(selector_form_resa+" .cle_fiche_base").val())}});if(typePrestAttache!="")var typePrest=typePrestAttache;else var typePrest=this.getTypePrestataire(selector_form_resa);if(typePrest!="")urlAjax+="&type_prestataire="+typePrest;if($(selector_form_resa+" .cle_fiche").length>0){if(cleFichePrestAttache!="")var cleFiche=cleFichePrestAttache;else{var cleFiche=$(selector_form_resa+" .cle_fiche").val();if(cleFiche=="")cleFiche=$("#cle_fiche").val()}var moteurTypePrestataire=
$(selector_form_resa+" .moteurTypePrestataire").val();Resa.init_filtre_prestataire(selector_form_resa,cleFiche,Resa.getCidOnPage(selector_form_resa));return}if($(selector_form_resa+" .inAjaxRequest").length>0){var el;for(var i=0;$(selector_form_resa+" .inAjaxRequest")[i]!=undefined;i++){el=$(selector_form_resa+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+"="+$(el).val()}}if($("#critereHautChecked").val()==1)$(".bloc_choix_type_critere").each(function(){if($(this).prop("checked"))urlAjax+=
"&criteres[]="+$(this).val()});$.ajax({url:urlAjax,cache:false}).done(function(html){if(fromMenuMoteur===true)$(selector_form_resa).replaceWith(html);else{var contenerParent=$(selector_form_resa+"_parent").parent();$(selector_form_resa+"_parent").replaceWith(html);selector_form_resa="#"+$(contenerParent).find(".form-recherche").attr("id");if($(selector_form_resa+"_parent .callback")&&$(selector_form_resa+"_parent .callback").val())Resa.launchCallback(selector_form_resa+"_parent .callback",true)}})}else if(fromMenuMoteur===
false)alert("Erreur acces cid")},resultat_ajax:function(selector_form_resa,JsonReturn){var action_old=$(selector_form_resa+" .form_action").val();$(selector_form_resa+" .form_action").val("result");if($(selector_form_resa+" .cle_fiche").length>0){if(JsonReturn.nbResultsFiche>0){if(JsonReturn.redirigePrestataire!=undefined||JsonReturn.forceRedirectionResult!=undefined){$(selector_form_resa+" .form_action").val("result");if(JsonReturn.redirigePrestataire!=undefined)$(selector_form_resa).attr("target",
"_top");$(selector_form_resa).attr("onsubmit","");$(selector_form_resa).submit();return}Resa.detail_prestations($(selector_form_resa+" .cle_fiche").val(),$(selector_form_resa+" .cid").val(),0,false);$(selector_form_resa+" .ajax-results").html("")}else if(JsonReturn["package"]){if(JsonReturn.redirigePrestataire!=undefined||JsonReturn.forceRedirectionResult!=undefined){$(selector_form_resa+" .form_action").val("result");if(JsonReturn.redirigePrestataire!=undefined)$(selector_form_resa).attr("target",
"_top");$(selector_form_resa).attr("onsubmit","");$(selector_form_resa).submit();return}$(selector_form_resa+" .form_action").val("result");$(selector_form_resa).attr("onsubmit","");$(selector_form_resa).submit()}else if(JsonReturn.forceRedirectionNoResult!=undefined){$(selector_form_resa+" .form_action").val("result");$(selector_form_resa).attr("onsubmit","");$(selector_form_resa).submit()}else{$(selector_form_resa+" .lien_autre_hotel").show();$(selector_form_resa+" .ajax-results").html(JsonReturn.nbResultsFiche+
" "+JsonReturn.nbResultsLibelle)}$(selector_form_resa+" .form_action").val(action_old)}else $(selector_form_resa).submit()},deconnection_vendeur:function(cid){var urlAjax="/booking?action=deconnectionVendeur&cid="+cid;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$(".bloc_vendeur_connect").html("");if($("#search_to")){$("#search_to").hide();$(".to-accueil").show();$("#msg_reponse_acces_vendeur").html("");$("#msg_reponse_acces_vendeur").removeClass("connection_ok alert alert-success")}}})},
connection_vendeur:function(cid){var loginVendeur=$("#frm_acces_vendeur #login_vendeur").val();var passwordVendeur=$("#frm_acces_vendeur #password_vendeur").val();var urlAjax="/booking?action=connectionVendeur&login_vendeur="+loginVendeur+"&password_vendeur="+passwordVendeur+"&cid="+cid;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){var msg=JsonData["data"]["msg"];$("#msg_reponse_acces_vendeur").addClass("connection_ok alert alert-success").removeClass("alert-error");$("#msg_reponse_acces_vendeur").html(msg);
if($(document).find(".form-resa").length==0)location.reload(true);else Resa.reload_moteur_ajax(".form-resa")}else{var msg=JsonData["erreur"]["msg"];$("#msg_reponse_acces_vendeur").addClass("erreur_connection alert alert-error").removeClass("alert-success");$("#msg_reponse_acces_vendeur").html(msg)}})},connection_vendeur2:function(cid){var loginVendeur=$("#frm_acces_vendeur #login_vendeur").val();var passwordVendeur=$("#frm_acces_vendeur #password_vendeur").val();var urlAjax="/booking?action=connectionVendeur&login_vendeur="+
loginVendeur+"&password_vendeur="+passwordVendeur+"&cid="+cid;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){var msg=JsonData["data"]["msg"];$("#msg_reponse_acces_vendeur").addClass("connection_ok alert alert-success").removeClass("alert-error");$("#msg_reponse_acces_vendeur").html(msg);Resa.reload_moteur_ajax(".form-resa");$(".to-accueil").hide();$("#search_to").show()}else{var msg=JsonData["erreur"]["msg"];$("#msg_reponse_acces_vendeur").addClass("erreur_connection alert alert-error").removeClass("alert-success");
$("#msg_reponse_acces_vendeur").html(msg)}})},recherche_ajax:function(selector_form_resa,loadResa,scrollToAncre){var champTypeDate="";if(typeof $(selector_form_resa).find("select[name=type_date]")!="undefined")champTypeDate=$(selector_form_resa).find("select[name=type_date] option:selected");else if(typeof $(selector_form_resa).find("input[name=type_date]")!="undefined")champTypeDate=$(selector_form_resa).find("input[name=type_date]:checked");if(champTypeDate!=""){var attrRedirect=champTypeDate.attr("data-redirect");
if(typeof attrRedirect!=="undefined"){top.location=attrRedirect;return}}var champs=$(selector_form_resa).serialize();if(typeof loadResa=="undefined")loadResa=false;if(typeof scrollToAncre=="undefined")scrollToAncre=false;if($(selector_form_resa+" .cle_fiche").length>0)$("#blocResa-"+$(selector_form_resa+" .cle_fiche").val()).html("");$(selector_form_resa+" .ajax-results").removeClass("no-result");$(selector_form_resa+" .ajax-results").html('<img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" />');
$(selector_form_resa+" .form_result").hide();var urlAjax="/booking?"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){if(JsonData["redirect"]!=undefined&&JsonData["redirect_url"]!=undefined){window.open(JsonData["redirect_url"]);return false}if(JsonData["data"]["nbResultsFiche"]==""&&typeof JsonData["data"]["nbResultsFiche"]=="string")msg=JsonData["data"]["nbResultsLibelle"];else msg=JsonData["data"]["nbResults"]+" "+JsonData["data"]["nbResultsLibelle"];if(JsonData["data"]["nbResults"]>
0){Resa.resultat_ajax(selector_form_resa,JsonData["data"]);if(loadResa)if($(".resa_moteur_fiche").length>0)$(".resa_moteur_fiche").hide()}else if(JsonData["data"]["forceRedirectionNoResult"]!=undefined&&JsonData["data"]["forceRedirectionNoResult"]==true){$(selector_form_resa+" .form_action").val("result");$(selector_form_resa).attr("onsubmit","");$(selector_form_resa).submit()}else{$(selector_form_resa+" .ajax-results").html(msg);$(selector_form_resa+" .ajax-results").addClass("no-result");if(JsonData["data"]["infobulle_noResult"]){$(".infobulle_container").show();
Resa.init_info_bulle("info_bulle_noresult")}}if(scrollToAncre){var id=$(selector_form_resa+" .cle_fiche").val();IngenieTools.scrollToId("blocResa-"+id)}}else Resa.traitement_erreur(JsonData.erreur,selector_form_resa+" .ajax-results")});return false},selection_type_billet:function(selector_form,selector_champ_date,type){if(type=="PRESTATION-P-PACKVULCA2-PACKVULCA2"){$(selector_form+" #label_jour_1").hide();$(selector_form+" #label_jour_2").show()}else{$(selector_form+" #label_jour_2").hide();$(selector_form+
" #label_jour_1").show()}return Resa.recherche_dates_visite(selector_form,selector_champ_date)},recherche_dates_visite:function(selector_form,selector_champ_date,prestataire){this.init_search_btns(selector_form,true);var champs=$(selector_form).serialize();if(typeof prestataire!="undefined")champs+="&action=getListeDatesVisiteAjax&cle_prestataire="+prestataire;else champs+="&action=getListeDatesVisiteAjax";var urlAjax="/booking?"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData.success==true){mesOptions=
JsonData.data;monSelect=$(selector_form+" "+selector_champ_date);monSelect.empty();callback='Resa.init_search_btns("'+selector_form+'", true);';Resa.selectAttachEvent(monSelect,callback,false,true);if(mesOptions.length>0)$(selector_form+" #msg-erreur-date").hide();else $(selector_form+" #msg-erreur-date").show();$.each(mesOptions,function(val,text){var monOption=$("<option></option>").val(text.date).html(text.date);if(text.selected)monOption.attr("selected","selected");monSelect.append(monOption)})}else Resa.traitement_erreur(JsonData.erreur)});
return false},traitement_erreur:function(erreur,selectorDestinationMsg){var msgErreur=erreur.msg;if(selectorDestinationMsg!=undefined&&$(selectorDestinationMsg).length>0){$(selectorDestinationMsg).html("");alert(msgErreur)}else alert(msgErreur)},init_search_btns:function(selector,search_active){if(search_active){$(selector+" .resa_div_btn .form_search").show();$(selector+" .resa_div_btn .form_result").hide();$(selector+" .resa_div_btn .ajax-results").html("")}else{$(selector+" .resa_div_btn .form_search").hide();
$(selector+" .resa_div_btn .form_result").show()}},select_personnes:function(personnes,selector){if(personnes!="more"){$(selector+" .more-personnes").hide();$(selector+" .more-personnes-detail").html("");if($(selector+" .prestations").length>0&&$(selector+" .prestations").val()>1)$(selector+" .prestations").val(1)}else{$(selector+" .more-personnes").show();var multichambre_init_for="-1";var nbCh=1;if($(selector+" .prestations").length>0&&$(selector+" .prestations").val()>1){nbCh=$(selector+" .prestations").val();
if($(selector+" .prestations").attr("init_for")!=undefined)multichambre_init_for=$(selector+" .prestations").attr("init_for")}if(multichambre_init_for!=nbCh)this.select_chambres(nbCh,selector)}},select_chambres:function(chambre,selector){this.init_search_btns("",true);if($(selector+" .more-personnes").css("display")!="none"&&chambre>0){var multichambre_init_for=-1;if($(selector+" .prestations").length>0){if($(selector+" .prestations").attr("init_for")!=undefined)multichambre_init_for=$(selector+" .prestations").attr("init_for");
$(selector+" .prestations").attr("init_for",chambre)}if(multichambre_init_for==chambre)return false;var urlAjax="/booking?action=detailPersonnesMultiChambresAjax&cid="+$(selector+" .cid").val();urlAjax+="&prestations="+chambre;if($(selector+" #type_prestataire").length>0)urlAjax+="&type_prestataire="+$(selector+" #type_prestataire").val();else if($(selector).find(".type_prestataire:checked").length>0)urlAjax+="&type_prestataire="+$(selector).find(".type_prestataire:checked").val();else if($("#type_prestataire").length>
0)urlAjax+="&type_prestataire="+$("#type_prestataire").val();$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .more-personnes-detail").html(html);callback='Resa.choix_ages_enfants($(this).attr("name").replace("enfants_", ""), "'+selector+'");';Resa.selectAttachEvent(".chambre_nb_enfants",callback,true,true)})}},detail_rubrique_cross_selling:function(id,cid,provenance,dossier){if($("#mainrubrique_"+id).find(".titre_rubrique_cross_selling_sous_niveau a").length>0)if($("#mainrubrique_"+
id).find(".titre_rubrique_cross_selling_sous_niveau a").hasClass("toOpen"))$("#mainrubrique_"+id).find(".titre_rubrique_cross_selling_sous_niveau a").removeClass("toOpen").addClass("toClose");if($("#prestations_rubrique_"+id).html()!="")if($(".bloc_cross_selling").find(".categorie_rubrique_"+id).length>0){if(!$("#rubrique_"+id).hasClass("rubrique_select"))$(".categorie_rubrique_"+id).hide()}else $("#prestations_rubrique_"+id).html("");else{var urlAjax="/booking?action=detailRubriqueCrossSellingAjax&idRubrique="+
id+"&cid="+cid;if(provenance&&dossier&&provenance=="espace-client")var urlAjax="/dossiers.html?action=detailRubriqueCrossSellingAjax&idRubrique="+id+"&cid="+cid+"&dossier="+dossier;$("#prestations_rubrique_"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#prestations_rubrique_"+id).html(html);Resa.init_info_bulle("info_bulle_cross")})}},detail_rubrique_cross_selling_sous_niveau:function(rubrique){$(rubrique).fadeToggle(1);
$(rubrique).parent().toggleClass("rubrique_select");if($(".bloc_cross_selling").find(rubrique).length>0)$(rubrique).css("display","block");if($(rubrique).find(".bloc_fiche_rubrique_cross_selling_sous_niveau").length==1){$(rubrique).find(".titre_rubrique_cross_selling_sous_niveau a").removeClass("toOpen").addClass("toClose");eval($(rubrique).find(".bloc_fiche_rubrique_cross_selling_sous_niveau .bloc_presentation_cross_selling").attr("onclick"))}},load_moteur_new_dates:function(cid,id_fiche,dateDebut,
dateFin){var urlAjax="/booking?cid="+cid+"&action=searchAjaxPrest&id_fiche="+id_fiche;urlAjax+="&new_dateDebut="+dateDebut;urlAjax+="&new_dateFin="+dateFin;if($(".form-"+id_fiche+" .inAjaxRequest").length>0){var el;for(var i=0;$(".form-"+id_fiche+" .inAjaxRequest")[i]!=undefined;i++){el=$(".form-"+id_fiche+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+"="+$(el).val()}}$.getJSON(urlAjax,function(json){if(json.success){$("#moteurResa-"+id_fiche).html(json.datas.moteur);IngenieTools.scrollToId("reservation")}else alert(json.erreur.msg)})},
load_moteur_new_dates_prestataire:function(cid,id_fiche,dateDebut,dateFin,id_prestataire){if(id_fiche=="#NOID")if($("#wd_prestation")!="undefined"){idMoteur=$("#wd_prestation").val();idMoteur=idMoteur.replace("|","-");idMoteur=idMoteur.replace("|","-");idMoteur=idMoteur.replace("|","-");id_fiche="PRESTATION-"+idMoteur}if(id_prestataire!=undefined&&id_prestataire!="undefined"&&id_prestataire!="")id_fiche=id_prestataire;var urlAjax="/booking?cid="+cid+"&action=searchAjaxPrest&id_fiche="+id_fiche;urlAjax+=
"&new_dateDebut="+dateDebut;urlAjax+="&new_dateFin="+dateFin;if($(".form-"+id_fiche+" .inAjaxRequest").length>0){var el;for(var i=0;$(".form-"+id_fiche+" .inAjaxRequest")[i]!=undefined;i++){el=$(".form-"+id_fiche+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+"="+$(el).val()}}$.getJSON(urlAjax,function(json){if(json.success){$("#moteurResa-"+id_prestataire).html(json.datas.moteur);IngenieTools.scrollToId("reservation")}else alert(json.erreur.msg)})},load_moteur_new_dates_resultat_direct:function(cid,
id_fiche,dateDebut,dateFin){var urlAjax="/booking?cid="+cid+"&action=searchAjaxPrest&id_fiche="+id_fiche;urlAjax+="&new_dateDebut="+dateDebut;urlAjax+="&new_dateFin="+dateFin;if($(".form-"+id_fiche+" .inAjaxRequest").length>0){var el;for(var i=0;$(".form-"+id_fiche+" .inAjaxRequest")[i]!=undefined;i++){el=$(".form-"+id_fiche+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+"="+$(el).val()}}$.getJSON(urlAjax,function(json){if(json.success){$("#moteurResa-"+id_fiche).hide();$("#moteurResa-"+id_fiche).html(json.datas.moteur);
var formRech=$(".resa_moteur_fiche .content .form-recherche").attr("id");Resa.recherche_ajax("#"+formRech)}else alert("Erreur : "+json.erreur.msg)})},detail_prestations_new_dates:function(cid,id,dateDebut,dateFin,prestation,idMoteur){if(idMoteur!=undefined&&idMoteur!="undefined"&&idMoteur!="")id=idMoteur;if(cid==""&&$("#wd_cid").length>0&&$("#wd_cid").val()!="")cid=$("#wd_cid").val();var urlAjax="/booking?action=detailPrestationsAjax&id="+id+"&cid="+cid;urlAjax+="&new_dateDebut="+dateDebut;urlAjax+=
"&new_dateFin="+dateFin;urlAjax+="&prestation_select="+prestation;$("#blocResa-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#blocResa-"+id).html(html);IngenieTools.scrollToId("blocResa-"+id)})},detail_prestations:function(id,cid,decalage,scroll){var urlAjax="/booking?action=detailPrestationsAjax&id="+id+"&cid="+cid;if($("#blocResa-"+id).length==0)$(document).find("div[id^=blocResa]").attr("id",
"blocResa-"+id);$("#blocResa-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');if(decalage==undefined)decalage=0;if(scroll==undefined)scroll=true;$.ajax({url:urlAjax,cache:false}).done(function(html){$("#blocResa-"+id).html(html);if(scroll&&($(".container").find("#liste-info-content").length>0||$("#container").find(".fiche-info-INFO").length>0))$("html,body").animate({scrollTop:parseFloat($("#blocResa-"+id).offset().top-decalage)},"slow")})},
detail_package_open:function(id,idPackage,cid){var urlAjax="/booking?action=detailPackageAjax&cid="+cid;urlAjax+="&prestation="+id;urlAjax+="&package="+idPackage;$("#detail-package-"+id+"_"+idPackage).show();$("#bloc-detail-package-"+id+"_"+idPackage).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#detail-package-open-"+id+"_"+idPackage).hide();$("#bloc-detail-package-"+id+"_"+idPackage).html(html);
$("#detail-package-close-"+id+"_"+idPackage).show()})},detail_package_close:function(id,cid){$("#detail-package-"+id).hide();$("#detail-package-open-"+id).show();$("#detail-package-close-"+id).hide()},detail_tarifs_prestation_open:function(id,cid,new_datedebut,new_datefin,new_quart,decalage_haut){var urlAjax="/booking?action=detailTarifsPrestationAjax&cid="+cid;urlAjax+="&prestation="+id;if(new_datedebut!=undefined){urlAjax+="&new_dateDebut="+new_datedebut;urlAjax+="&new_dateFin="+new_datefin}if(new_quart!=
undefined)urlAjax+="&new_quart="+new_quart;$("#tarif-"+id).show();$("#bloc-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#open-"+id).hide();$("#bloc-"+id).html(html);$("#close-"+id).show();if($(document).find(".liste-fiche").length>0)if(decalage_haut!="")$("html,body").scrollTo($("#tarif-"+id),{duration:"slow",offsetTop:"40"});else $("html,body").animate({scrollTop:$("#tarif-"+
id).parent(3).offset().top},"slow")})},detail_tarifs_prestation_cross_selling_open:function(idRubrique,id,cid,periode,duree,quart,provenance,dossier){var urlAjax="/booking?action=detailTarifsPrestationCrossSellingAjax&cid="+cid;if(provenance&&dossier&&provenance=="espace-client")var urlAjax="/dossiers.html?action=detailTarifsPrestationCrossSellingAjax&cid="+cid+"&dossier="+dossier;urlAjax+="&prestation="+id;urlAjax+="&idRubrique="+idRubrique;if(periode!=undefined&&periode!="")urlAjax+="&periode="+
periode;if(duree!=undefined&&duree!="")urlAjax+="&duree="+duree;if(quart!=undefined&&quart!="")urlAjax+="&quart="+quart;$("#tarif-"+id).show();$("#bloc-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#open-"+id).hide();$("#bloc-"+id).html(html);$("#close-"+id).show()})},detail_tarifs_package_open:function(id,idPackage,cid){var urlAjax="/booking?action=detailTarifsPrestationAjax&cid="+
cid;urlAjax+="&prestation="+id;urlAjax+="&package="+idPackage;$("#tarif-"+id+"_"+idPackage).show();$("#bloc-"+id+"_"+idPackage).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#open-"+id+"_"+idPackage).hide();$("#close-"+id+"_"+idPackage).show();$("#bloc-"+id+"_"+idPackage).html(html)})},detail_tarifs_prestation_close:function(id,cid){$("#tarif-"+id).hide();$("#open-"+id).show();$("#close-"+
id).hide()},choix_ages_enfants_simple:function(selector){var enfantEnCours=$(selector+" .select_nb_enfants").val();if(enfantEnCours>0){var urlAjax="/booking?action=detailAgesEnfantsAjax&cid="+$(selector+" .cid").val();if($("#type_prestataire").length>0)urlAjax+="&type_prestataire="+$("#type_prestataire").val();urlAjax+="&enfants="+enfantEnCours;$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .choixAges").html(html);$(selector+" .choixAges .select_nb_enfants").change()})}else $(selector+
" .choixAges").html("")},choix_ages_enfants:function(num,selector){var enfantEnCours=$(selector+" .enfants_"+num).val();if(enfantEnCours>0){var urlAjax="/booking?action=detailAgesEnfantsAjax&cid="+$(selector+" .cid").val();if($("#type_prestataire").length>0)urlAjax+="&type_prestataire="+$("#type_prestataire").val();else if($(".inAjaxRequest").length>0)urlAjax+="&type_prestataire="+$(".inAjaxRequest").val();if($("#cle_fiche").length>0)urlAjax+="&cle_fiche="+$("#cle_fiche").val();urlAjax+="&enfants="+
enfantEnCours;urlAjax+="&num="+num;$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .choixAges_"+num).html(html);$(selector+" .choixAges_"+num+" .chambre_nb_enfants").change()})}else $(selector+" .choixAges_"+num).html("")},ajouter_panier_prestation:function(id,modeAjoutPanier,scrollAuto){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/booking?action=ajouterPanierPrestationAjax&"+champs;if(modeAjoutPanier=="CROSS_SELLING")urlAjax+="&modeAjout=CROSS_SELLING";$.getJSON(urlAjax,
function(JsonData){if(JsonData["success"]==1){$("#msg-ajout-prestation-"+id).html(JsonData["data"]["msg"]);$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(JsonData["data"]["voir_lien_panier"]=="O")$("#bt_valid_panier_"+id).show();$("#resa_panier_nb_prestation").html(JsonData["data"]["nb_prestation"]);$("#resa_panier_montant").html(JsonData["data"]["montant"]);$("#bloc_panier").show();$("#bloc_panier div").show();$("#resa_panier_vide").hide();if(modeAjoutPanier=="CROSS_SELLING")if(JsonData["data"]["contenuPanier"]!=
"undefined"&&JsonData["data"]["contenuPanier"]=="recharge"){var timeEnCours=(new Date).getTime();var url="/booking?action=panier&cid="+$("#frm-tarifs-"+id+" #cid ").val()+"&reload="+timeEnCours+"&rechargementAjax=ok#ancre_panier";$.get(url,function(panierHTML){$("#frm_panier_resa").replaceWith(panierHTML)});var idprestationbase=id.substr(0,id.length-2);Resa.detail_tarifs_prestation_close(idprestationbase,$("#cid").val());if(scrollAuto=="O")$("html,body").animate({scrollTop:$("#frm_panier_resa").offset().top},
"slow");try{if(window.parent.socket!=undefined){var socketMessage="{action: 'scrollTo', params: {top: '"+$("#frm_panier_resa").offset().top+"'}}";window.parent.socket.postMessage("##"+socketMessage)}}catch(err){console.log("err window.parent.socket :",err.message)}if($("#contenu_bloc_panier")){var url="/booking?action=panier&cid="+$("#frm-tarifs-"+id+" #cid ").val()+"#ancre_panier";$.get(url,function(pagePanierHTML){var contenuMiniPanier=$(pagePanierHTML).find("#contenu_bloc_panier");if(contenuMiniPanier!=
"")$("#contenu_bloc_panier").replaceWith(contenuMiniPanier)})}}else Resa.reload_panier($("#frm-tarifs-"+id+" #cid ").val())}else if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)})},ajouter_dossier_prestation:function(id,modeAjoutPanier,provenance,dossier){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/dossiers.html?action=ajouterDossierPrestationAjax&"+champs+"&dossier="+dossier;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$("#msg-ajout-prestation-"+
id).html(JsonData["data"]["msg"]);$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(JsonData["data"]["voir_lien_panier"]=="O")$("#bt_valid_panier_"+id).show();if(JsonData["data"]["contenuPanier"]!="undefined"&&JsonData["data"]["contenuPanier"]=="recharge"){var timeEnCours=(new Date).getTime();var url="/dossiers.html?ajoutPrestation=ok&id="+dossier+"&rechargementAjax=ok";$.get(url,function(panierHTML){$("#tab_panier_resa").replaceWith(panierHTML)})}}else if(JsonData.erreur.affiche==
1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)})},ajouter_dossier_prestation_direct:function(id,modeAjoutPanier,provenance,dossier){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/dossiers.html?action=ajouterDossierPrestationAjax&"+champs+"&dossier="+dossier;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$("#msg-ajout-prestation-"+id).html(JsonData["data"]["msg"]);$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(JsonData["data"]["contenuPanier"]!=
"undefined"&&JsonData["data"]["contenuPanier"]=="recharge"){var timeEnCours=(new Date).getTime();var url="/dossiers.html?ajoutPrestation=ok&id="+dossier+"&rechargementAjax=ok";$.get(url,function(panierHTML){$("#tab_panier_resa").replaceWith(panierHTML)})}Resa.reload_dossier(dossier)}else if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)})},reload_dossier:function(dossier){var timeEnCours=(new Date).getTime();var url="/dossiers.html?id="+dossier+"&reload="+timeEnCours+
"#tab_panier_resa";location.href=url},reload_mini_panier:function(cid){var urlAjax="/booking?action=panierReload&cid="+cid;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$("#resa_panier_nb_prestation").html(JsonData["data"]["nb_prestation"]);$("#resa_panier_montant").html(JsonData["data"]["montant"]);$("#bloc_panier").show();$("#bloc_panier div").show();$("#resa_panier_vide").hide()}})},ajouter_panier_article:function(id,cid){var champs=$("#frm_cmd_article_"+id).serialize();var urlAjax=
"/booking?action=ajouterPanierArticleAjax&cid="+cid+"&article="+id+"&"+champs;$.ajax({url:urlAjax,cache:false}).done(function(html){Resa.reload_mini_panier(cid);$.colorbox({html:html,width:$(window).width()<768?"100%":"50%"})});return false},ajouter_panier_article_reel:function(id,cid,tabCriteres){var champsCriteres=$("#frm_criteres").serialize();var champs=$("#frm_cmd_article_"+id).serialize();var urlAjax="/booking?action=ajouterPanierArticleReelAjax&cid="+cid+"&"+champsCriteres+"&criteres="+tabCriteres+
"&"+champs;$.ajax({url:urlAjax,cache:false}).done(function(html){Resa.reload_mini_panier(cid);$.colorbox({html:html,width:$(window).width()<768?"100%":"50%"})});return false},ajouter_panier_prestation_direct:function(id,modeAjoutPanier,cid,urlExternePanier){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/booking?action=ajouterPanierPrestationAjax&"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$("#msg-ajout-prestation-"+id).html(JsonData["data"]["msg"]);$("#bt_ajout_panier_"+
id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(modeAjoutPanier!="DIRECT")if(JsonData["data"]["voir_lien_panier"]=="O")$("#bt_valid_panier_"+id).show();$("#resa_panier_nb_prestation").html(JsonData["data"]["nb_prestation"]);$("#resa_panier_montant").html(JsonData["data"]["montant"]);$("#bloc_panier").show();$("#bloc_panier div").show();$("#resa_panier_vide").hide();if(modeAjoutPanier=="CROSS_SELLING")Resa.reload_panier($("#frm-tarifs-"+id+" #cid ").val());if(modeAjoutPanier=="DIRECT"&&JsonData["data"]["nb_prestations_restant"]==
0)Resa.voir_panier(cid,urlExternePanier)}else if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)})},ajouter_panier_prestation_direct_congres:function(id,modeAjoutPanier,cid,urlExternePanier,voirPopup,scrollBtnEtape){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/booking?action=ajouterPanierPrestationAjax";$.get(urlAjax,champs,function(JsonData){$("#msg-erreur-formule-"+id).html("");if(JsonData["success"]==1){$("#msg-ajout-prestation-"+id).html(JsonData["data"]["msg"]);
$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(modeAjoutPanier!="DIRECT")if(JsonData["data"]["voir_lien_panier"]=="O")$("#bt_valid_panier_"+id).show();$("#resa_panier_nb_prestation").html(JsonData["data"]["nb_prestation"]);$("#resa_panier_montant").html(JsonData["data"]["montant"]);$("#bloc_panier").show();$("#bloc_panier div").show();$("#resa_panier_vide").hide();if(JsonData["idLigneSupprimee"]==undefined)JsonData["idLigneSupprimee"]="";var reinit_ligne=false;if(JsonData["reinit_index_lignes"]!==
undefined)reinit_ligne=true;InscriptionCongres.enregistrerPanierRubrique(JsonData["idLigneSupprimee"],JsonData["idLignePanier"],reinit_ligne);if(JsonData["data"]["nb_prestations_restant"]==0)InscriptionCongres.popupAjoutPanier(voirPopup);if(voirPopup==false&&scrollBtnEtape==true)$("html, body").animate({scrollTop:$(".bouton_etape_suivante").offset().top},1E3)}else if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)},"json")},passer_etape_courante:function(){InscriptionCongres.popupAjoutPanier()},
ajouter_panier_prestation_direct_site_externe:function(id,modeAjoutPanier,cid,urlExternePanier){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax=urlExternePanier+"/booking?action=ajouterPanierPrestationSiteExterneAjax&modeAction=panierExterne&"+champs;$.ajax({url:urlAjax,dataType:"jsonp",crossDomain:true,success:function(data){}})},init_info_bulle:function(baseClass){$("."+baseClass).each(function(){var info=$("#contenu_"+$(this).attr("id")).html();if(info)if($(this).qtip)$(this).qtip({content:{text:info},
position:{my:"left center",target:"mouse",viewport:false,adjust:{x:10,y:0}},hide:{fixed:true},style:baseClass+"_content"})})},info_bulle_formules:function(){Resa.init_info_bulle("info_bulle_formule")},info_bulle_prestations:function(){Resa.init_info_bulle("info_bulle_prestation")},reload_panier_ajax:function(cid,msgPromo){var timeEnCours=(new Date).getTime();var urlAjax="/booking?action=panier&cid="+cid+"&rechargementAjax=ok&reload="+timeEnCours+"#ancre_panier";$("#bloc_frm_panier_resa").html('<div align="center"><img src="'+
this.pathStatic+'images/ajax/ajax-loader-noir.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#bloc_frm_panier_resa").html(html);if(msgPromo!=undefined)$("#bloc_frm_panier_resa .blocMsgCodePromo").html(msgPromo)})},reload_panier:function(cid){var timeEnCours=(new Date).getTime();var url="/booking?action=panier&cid="+cid+"&reload="+timeEnCours+"#ancre_panier";location.href=url},voir_panier:function(cid,urlExterne){var url="?action=panier&cid="+cid+"#ancre_panier";
if(IngenieTools.getQueryVariable(location.href,"popup")=="1"){if(urlExterne!=undefined&&urlExterne!="")url=urlExterne+url;else url="/booking"+url;top.location.href=url}else if(urlExterne!=undefined&&urlExterne!=""){url=urlExterne+url;top.location.href=url}else{url="/booking"+url;document.location.href=url}},voir_panier_externe:function(cid,urlExterne,typeUrl,vendeurExterne,jsonData,redirectionSansPopup,theme){if(typeUrl=="complet")var url=urlExterne+"/booking?action=panier&cid="+cid+"&vendeurExterne="+
vendeurExterne+"&theme="+theme+"#ancre_panier";else var url=urlExterne+"booking&action=panier&cid="+cid+"&vendeurExterne="+vendeurExterne+"&theme="+theme;if(redirectionSansPopup==true)Resa.redirection(url);else{$.colorbox({html:jsonData["popup"],width:$(window).width()<768?"100%":"50%"});setTimeout(function(){Resa.redirection(url)},5E3)}},redirection:function(url){top.location.href=url},demande_champs_composition_formule:function(id,champs,formules){var affichageParFormule=false;tabChamps=champs.split("&");
$.each(tabChamps,function(index,value){tabValue=value.split("=");if(tabValue.indexOf("demandeCompositionParFormule")!=-1)affichageParFormule=true});if(affichageParFormule==false){var urlAjax="/booking?action=demandeChampsCompositionFormuleAjax&"+champs+"&formules_composition="+formules;$("#liste-champs-composition-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#liste-champs-composition-"+
id).html(html);$(".datepickerCompo").datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,yearRange:"-100:+2"});if($(".info_bulle_form").length>0)Resa.init_info_bulle("info_bulle_form")})}else{tabFormules=formules.split("|");$.each(tabFormules,function(index,formule){var urlAjax="/booking?action=demandeChampsCompositionFormuleAjax&"+champs+"&formules_composition="+formule;$("#ligne-champs-composition-"+id+"-"+formule).show();$("#liste-champs-composition-"+id+"-"+formule).html('<div align="center"><img src="'+
this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#liste-champs-composition-"+id+"-"+formule).html(html);$(".datepickerCompo").datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,yearRange:"-100:+0"});if($(".info_bulle_form").length>0)Resa.init_info_bulle("info_bulle_form")})}.bind(this))}},calculer_total_prestation:function(id,provenance,dossier,selectIdPackage){if(selectIdPackage!=""&&selectIdPackage!=undefined)var champs=
$("#"+selectIdPackage).find("#frm-tarifs-"+id).serialize();else var champs=$("#frm-tarifs-"+id).serialize();var urlAjax="/booking?action=calculerTotalPrestationAjax&"+champs;if(provenance&&dossier&&provenance=="espace-client")var urlAjax="/dossiers.html?action=calculerTotalPrestationAjax&"+champs+"&dossier="+dossier;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1)if(selectIdPackage!=""&&selectIdPackage!=undefined){$("#"+selectIdPackage).find("#total-prestation-"+id).html(JsonData["data"]["total"]);
if($("#"+selectIdPackage).find("#bt_ajout_panier_disabled_"+id).css("display")=="none"){$("#"+selectIdPackage).find("#bt_ajout_panier_"+id).show();$("#"+selectIdPackage).find("#bt_ajout_panier_erreur_disabled_"+id).hide()}$("#"+selectIdPackage).find("#msg-erreur-formule-"+id).html("");if(JsonData["data"]["tabFormulesQACacher"]!=undefined&&JsonData["data"]["tabFormulesQACacher"].length>0){tabFormulesQACacher=JsonData["data"]["tabFormulesQACacher"].split("|");jQuery.each(tabFormulesQACacher,function(i,
val){if($("#libelle_choix_date_package_prestation_"+val).length>0)$("#libelle_choix_date_package_prestation_"+val).hide()})}if(JsonData["data"]["tabFormulesQAAfficher"]!=undefined&&JsonData["data"]["tabFormulesQAAfficher"].length>0){tabFormulesQAAfficher=JsonData["data"]["tabFormulesQAAfficher"].split("|");jQuery.each(tabFormulesQAAfficher,function(i,val){if($("#libelle_choix_date_package_prestation_"+val).length>0)$("#libelle_choix_date_package_prestation_"+val).show()})}}else{$("#total-prestation-"+
id).html(JsonData["data"]["total"]);if(JsonData["data"]["demandeChampsCompositionFormule"]!=undefined&&JsonData["data"]["demandeChampsCompositionFormule"]==1){$("#ligne-champs-composition-"+id).show();if(dossier)Resa.demande_champs_composition_formule(id,champs+"&dossier="+dossier,JsonData["data"]["formulesComposition"]);else Resa.demande_champs_composition_formule(id,champs,JsonData["data"]["formulesComposition"])}else if($("#ligne-champs-composition-"+id).length>0)$("#ligne-champs-composition-"+
id).hide();if($("#bt_ajout_panier_disabled_"+id).css("display")=="none"){$("#bt_ajout_panier_"+id).show();$("#bt_ajout_panier_erreur_disabled_"+id).hide()}$("#msg-erreur-formule-"+id).html("")}else if(selectIdPackage!=""&&selectIdPackage!=undefined){$("#"+selectIdPackage).find("#total-prestation-"+id).html("N/A");if($("#"+selectIdPackage).find("#bt_ajout_panier_disabled_"+id).css("display")=="none"){$("#"+selectIdPackage).find("#bt_ajout_panier_"+id).hide();$("#"+selectIdPackage).find("#bt_ajout_panier_erreur_disabled_"+
id).show()}if(JsonData.erreur.affiche==1)$("#"+selectIdPackage).find("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)}else{$("#total-prestation-"+id).html("N/A");if($("#bt_ajout_panier_disabled_"+id).css("display")=="none"){$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_erreur_disabled_"+id).show()}if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg);if($("#ligne-champs-composition-"+id).length>0)$("#ligne-champs-composition-"+id).hide()}})},supprimer_assurance_panier:function(cid,
val){if(val==0){var url="/booking?action=panier&action_panier=supprimer_assurance"+"&cid="+cid;$.getJSON(url,function(JsonData){Resa.reload_panier($("#frm_panier_resa #cid").val());IngenieTools.scrollToId("frm_panier_resa")})}},ajouter_assurance_panier:function(cid,val){if(val==1){var url="/booking?action=panier&action_panier=ajouter_assurance"+"&cid="+cid;$.getJSON(url,function(JsonData){Resa.reload_panier($("#frm_panier_resa #cid").val());IngenieTools.scrollToId("frm_panier_resa")})}},ajouter_refus_assurance_panier:function(cid,
formule,idLigneDossier){if($("#choix_assurance_refuse").is(":checked")){if($("#choix_assurance_accept").is(":checked"))Resa.supprimer_assurance_panier(cid,0,false);var url="/booking?action=panier&action_panier=ajouter_formule&cid="+cid+"&idLigneDossier="+idLigneDossier+"&formuleAjout="+formule;$.getJSON(url,function(JsonData){Resa.reload_panier(cid);IngenieTools.scrollToId("frm_panier_resa")})}else if($("#choix_assurance_refuse").length>0&&$("#choix_assurance_refuse").is(":checked")===false)Resa.supprimer_ligne_panier_sans_alert(cid,
$("#num_ligne_assur_refus").val())},ajouter_formule_panier:function(cid,formule,idLigneDossier){var url="/booking?action=panier&action_panier=ajouter_formule&cid="+cid+"&idLigneDossier="+idLigneDossier;$.getJSON(url,function(JsonData){Resa.reload_panier($("#frm_panier_resa #cid").val());IngenieTools.scrollToId("frm_panier_resa")})},supprimer_ligne_panier_sans_alert:function(cid,numligne){var url="/booking?action=panier&action_panier=supprimer_ligne_formule&numligne="+numligne+"&cid="+cid;location.href=
url},supprimer_ligne_panier:function(cid,numligne,confirmMsg){var isConfirmed=confirm(confirmMsg);if(isConfirmed){var url="/booking?action=panier&action_panier=supprimer_ligne&numligne="+numligne+"&cid="+cid;location.href=url}},vider_panier:function(cid,confirmMsg){var isConfirmed=confirm(confirmMsg);if(isConfirmed){var url="/booking?action=panier&action_panier=vider&cid="+cid;location.href=url}},changer_qt_article:function(cid,qt,article){var url="/booking?action=panier&action_panier=changer_qt_article&qt="+
qt+"&article="+article+"&cid="+cid;location.href=url},pays_livraison:function(cid,pays_livraison){var url="/booking?action=panier&action_panier=pays_livraison&pays_livraison="+pays_livraison+"&cid="+cid;location.href=url},retour_resultats:function(cid){var url="/booking?action=result&cid="+cid;location.href=url},init_accordeon:function(selector_accordeon){$(selector_accordeon).accordion({heightStyle:"content",collapsible:true,active:false,activate:function(event,ui){if($("#prestations_rubrique_"+
ui.newPanel.data("rubrique-id")+" .tab_detail_prestations").length==0&&ui.newPanel.data("rubrique-id")!=null)if(ui.newPanel.data("dossier")!="undefined")Resa.detail_rubrique_cross_selling(ui.newPanel.data("rubrique-id"),ui.newPanel.data("cid"),ui.newPanel.data("provenance"),ui.newPanel.data("dossier"));else Resa.detail_rubrique_cross_selling(ui.newPanel.data("rubrique-id"),ui.newPanel.data("cid"),ui.newPanel.data("provenance"))}})},init_menuAccordeon:function(cid,selector,level,modeIframe){if(eval("typeof menuMoteurCurrentOpen_"+
level)=="undefined")eval("menuMoteurCurrentOpen_"+level+" = 0;");$(selector).accordion({icons:null,heightStyle:"content",header:".titreMenu.level_"+level,activate:function(event,ui){if(level==1)$(".contenu.level_1").accordion("option","active",0);if($(ui.oldHeader).hasClass("moteurAjax"))$(ui.oldPanel).html("");if($(ui.newHeader).hasClass("moteurAjax")){var moteurTypePrestataire=$(ui.newHeader).attr("rel");if(modeIframe!=undefined&&modeIframe==1)Resa.getMoteurTypePrestataire(cid,moteurTypePrestataire,
ui.newPanel,modeIframe);else Resa.getMoteurTypePrestataire(cid,moteurTypePrestataire,ui.newPanel)}},beforeActivate:function(event,ui){if($(ui.newHeader).hasClass("moteurAjax")&&parseInt(level)<3)$(ui.newPanel).html('<img src="'+Resa.pathStatic+'images/ajax/ajax-loader-noir.gif" />')},active:eval("menuMoteurCurrentOpen_"+level)});if(level=="1")Resa.init_menuAccordeon(cid,".contenu.level_1","2",modeIframe);if(typeof demarrageAccordeon!=="undefined"&&!isInitMenuAccordeon){isInitMenuAccordeon=true;demarrageAccordeon()}},
init_menuAccordeon2:function(cid,selector,level,modeIframe){if(eval("typeof menuMoteurCurrentOpen_"+level)=="undefined")eval("menuMoteurCurrentOpen_"+level+" = 0;");$(selector).accordion({icons:null,heightStyle:"content",header:".titreMenu.level_"+level,activate:function(event,ui){if($(ui.oldHeader).hasClass("moteurAjax"))$(ui.oldPanel).html("");$(ui.newPanel).removeClass("pictoloading");if($(ui.newHeader).hasClass("loadMoteurFiche")){var cleMoteurFiche=$("#codeMoteurFiche").val();Resa.load_moteur_fiche(cleMoteurFiche,
cid,"M","","","moteurResa-"+cleMoteurFiche)}if($(ui.oldHeader).next().find(".moteurAjax").length>0)Resa.init_menuAccordeon2(cid,".contenu.level_1",1,modeIframe);var forceTarget="";if($("#forceTarget").val()!="")forceTarget=$("#forceTarget").val();if($(ui.newHeader).hasClass("moteurAjax")&&$(ui.newHeader).next().find(".bloc_recap_recherche").length==0){$(".bloc_recap_recherche").parent().hide();$(".ui-accordion-header").next().each(function(){if(!$(this).hasClass("ui-accordion-content-active"))$(this).hide()});
var moteurTypePrestataire=$(ui.newHeader).attr("rel");if(modeIframe!=undefined&&modeIframe==1)Resa.getMoteurTypePrestataire(cid,moteurTypePrestataire,ui.newPanel,modeIframe);else if($(".menuAccordeon").find("#typePrestModele").length==0||$(".menuAccordeon").find("#typePrestModele").length>0&&$(".menuAccordeon").find("#typePrestModele").val()==""||$(".menuAccordeon").find("#collapseAll").length>0&&$(".menuAccordeon").find("#collapseAll").val()=="1")Resa.getMoteurTypePrestataire(cid,moteurTypePrestataire,
ui.newPanel,"","",forceTarget);else Resa.getMoteurTypePrestataire(cid,moteurTypePrestataire,ui.newPanel,"",$(".menuAccordeon").find("#typePrestModele").val(),forceTarget)}if(level=="1"&&$(ui.newHeader).next().find(".bloc_recap_recherche").length>0&&$(ui.newHeader).next().find(".menuMoteur").length>0)$(".contenu.level_1").accordion("option","active",0);else{$(ui.newHeader).next().find(".bloc_recap_recherche").parent().show();$(ui.newHeader).next().find(".bloc_recap_recherche").parent().css("overflow",
"hidden")}},beforeActivate:function(event,ui){if($(ui.newHeader).hasClass("moteurAjax")&&parseInt(level)<3&&$(ui.newHeader).next().find(".bloc_recap_recherche").length==0&&!(level==2&&selector==".contenu.level_1")){$(ui.newPanel).html('<img src="'+Resa.pathStatic+'images/ajax/ajax-loader-noir.gif" />');$(ui.newPanel).addClass("pictoloading")}},active:function(event,ui){eval("menuMoteurCurrentOpen_"+level)}});if(level=="1")Resa.init_menuAccordeon2(cid,".contenu.level_1","2",modeIframe);if(typeof demarrageAccordeon!==
"undefined"&&!isInitMenuAccordeon){isInitMenuAccordeon=true;demarrageAccordeon()}if($(".menuAccordeon").find("#typePrestModele").length>0)if($(".menuMoteur").find("span.titreMenu").length>0)if($(".menuMoteur").find("span.titreMenu").attr("rel")==$("#vraiMoteur").val()){$("#typePrestModele").val("");$("#vraiMoteur").val("")}if($(".menuAccordeon").find("#typePrestModele").length>0);if($(".menuAccordeon").find("#vraiMoteur").length>0)$("#vraiMoteur").val("")},getMoteurTypePrestataire:function(cid,moteurTypePrestataire,
selector_element,modeIframe,typePrestataireSelection,forceTarget){var selector_element_id="#"+$(selector_element).attr("id");if(typeof listeGetMoteurTypePrestataireEnCours[selector_element_id]!="undefined"&&listeGetMoteurTypePrestataireEnCours[selector_element_id]==true)return;else listeGetMoteurTypePrestataireEnCours[selector_element_id]=true;$(selector_element).html('<img src="'+Resa.pathStatic+'/images/ajax/ajax-loader-noir.gif" />');if($(".menu_config_id").length>0&&$(".menu_config_id").val()!=
"")cid=$(".menu_config_id").val();if($(".menuAccordeon").length>0&&$("#vraiMoteur").length>0&&$("#vraiMoteur").val()!="")moteurTypePrestataire=$("#vraiMoteur").val();var urlAjax=Resa.urlBase+"?cid="+cid+"&action=getMoteurTypePrestataire&moteurTypePrestataire="+moteurTypePrestataire;if(modeIframe!=undefined&&modeIframe==1)urlAjax+="&modeIframe=1";if(forceTarget!=undefined&&forceTarget!="")urlAjax+="&forceTarget="+forceTarget;else if($("#forceTarget").val()!="")forceTarget=$("#forceTarget").val();if(typePrestataireSelection!=
undefined&&typePrestataireSelection!="")urlAjax+="&typePrestataire="+typePrestataireSelection;$.getJSON(urlAjax,function(json){if(json.success)if(json.datas.prestations!=undefined){var listePrestations=json.datas.prestations;var selectedPrestation="";if(json.datas.prestationsSelected!=undefined)selectedPrestation=json.datas.prestationsSelected;if(json.datas.typePrestataire!=undefined)if(json.datas.typePrestataire!=$("#type_prestataire").val()&&json.datas.typePrestataire!="P")$("#type_prestataire").val("");
var selectTag=$('<select name="cle_fiche" class="moteurFiltrePrestataire" />');$.each(listePrestations,function(code_prest,libelle_prest){var paramsOptions={value:code_prest,text:libelle_prest};if(code_prest==selectedPrestation)paramsOptions.selected="selected";$("<option />",paramsOptions).appendTo(selectTag)});$(selector_element).html("");$(selectTag).appendTo($(selector_element));callback='Resa.init_filtre_prestataire("'+selector_element_id+'", $(this).val(), '+cid+", true);";Resa.selectAttachEvent(selector_element_id+
" .moteurFiltrePrestataire",callback,true,true)}else{$(selector_element).html(json.datas.content);var tempEl=document.createElement("div");tempEl.innerHTML=json.datas.content;selector_form_resa="#"+tempEl.querySelector(".form-recherche").id;if($(selector_form_resa+" .callback")&&$(selector_form_resa+" .callback").val())Resa.launchCallback(selector_form_resa+" .callback",true,selector_form_resa+" .callback_save")}listeGetMoteurTypePrestataireEnCours[selector_element_id]=false})},getTypePrestataire:function(selector_form){if($(selector_form+
" #type_prestataire").length>0)return $(selector_form+" #type_prestataire").val();else if($(selector_form+" .type_prestataire:checked").length>0)return $(selector_form+" .type_prestataire:checked").val();else if($(selector_form+" .type_prestataire").length>0)return $(selector_form+" .type_prestataire").val();else if($("#type_prestataire").length>0)return $("#type_prestataire").val();else if($(".type_prestataire:checked").length>0)return $(".type_prestataire:checked").val();return""},loaderShow:function(selector,
idLoader,loaderSize){if(selector==undefined)selector=".liste-fiche";if(idLoader==undefined)idLoader="fv2-resa-loader";if(loaderSize==undefined)loaderSize="MEDIUM";var urlLoader=Resa.pathStatic+"images/ajax/";if(loaderSize=="MINI")urlLoader+="ajax-loader.gif";else if(loaderSize=="MEDIUM")urlLoader+="chargement-moyen-rond.gif";else if(loaderSize=="BIG")urlLoader+="chargement-moyen-rond.gif";var selectorLoader="#"+idLoader;if($(selectorLoader).length>0)return;$(selector).css("position","relative");$(selector).append('<div id="'+
idLoader+'" class="loader-in-page"><img src="'+urlLoader+'" /></div>');$(selectorLoader).fadeTo("fast",0.3)},loaderHide:function(selector,idLoader){if(selector==undefined)selector=".liste-fiche";if(idLoader==undefined)idLoader="#fv2-resa-loader";$(selector+" "+idLoader).remove()},addCidOnPage:function(selector,cid){Resa.addInputOnPage(selector,"cid",cid)},addInputOnPage:function(selector,name,value,id,className){if(id==undefined)id="";if(className==undefined)className=name;$('<input type="hidden" class="'+
className+'" name="'+name+'" value="'+value+'" />').appendTo($(selector))},joursBloquesConfig:function(date,cid){var day=date.getDay();var urlAjax="/booking?cid="+cid+"&action=jourBloqueConfigAjax";var retour;$.ajax({url:urlAjax,async:false}).done(function(json){if(json.success){var jourConfig=json.joursBloques;return $.inArray(day,jourConfig)==-1}else return true})},checkCodePromoClient:function(cid,codePromo){if(codePromo!=""){var urlAjax="/booking?cid="+cid+"&action=checkCodePromoClient&codePromo="+
codePromo;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){var msgPromoOK='<div class="okCodePromo">'+JsonData["data"]["msg"]+"</div>";if($("#bloc_frm_panier_resa").length>0)Resa.reload_panier_ajax(cid,msgPromoOK);else{$(".blocMsgCodePromo").html('<div class="okCodePromo">'+msgPromoOK+"</div>");Resa.reload_panier(cid)}}else $(".blocMsgCodePromo").html('<div class="erreurCodePromo">'+JsonData["erreur"]["msg"]+"</div>")})}else return false},voirCGVprestataire:function(cid,prestataire,
pave){var urlAjax="/booking?cid="+cid+"&action=recupererContenuPave&prestataire="+prestataire+"&pave="+pave;$.ajax({url:urlAjax,async:false}).done(function(html){$("#cboxContent").html(html);try{$(".colorbox_lien_CGV").colorbox({maxWidth:860,maxHeight:720,fixed:true,scrolling:true})}catch(err){}})},activerBoutonPaiementSoldeEspaceClient:function(){if($(".validation_espace_client_cgv #espace_client_cgv").is(":checked")===true){$("#demande_paiement .bloc_texte_paiement input").removeAttr("disabled");
$("#demande_paiement .bloc_texte_paiement input").removeClass("valider_desactive")}else{$("#demande_paiement .bloc_texte_paiement input").attr("disabled","disabled");$("#demande_paiement .bloc_texte_paiement input").addClass("valider_desactive")}},ajouter_panier_prestation_cross_selling:function(id,modeAjoutPanier){var champs=$("#frm-composition-"+id+" :input").serialize();var tabId=id.split("-");var newId=tabId[0]+"-"+tabId[1]+"-"+tabId[2]+"-1";var urlAjax="/booking?action=ajouterPanierPrestationAjax&"+
champs;$("#liste-champs-composition-"+tabId[0]+"-"+tabId[1]+"-"+tabId[2]+"-1-"+tabId[3]).empty();if(modeAjoutPanier=="CROSS_SELLING")urlAjax+="&modeAjout=CROSS_SELLING";$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1)if(modeAjoutPanier=="CROSS_SELLING"){var urlAjax="/booking?action=reloadPanierCrossSelling&"+champs;$("#tab_panier_resa").html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#tab_panier_resa").html(html);
var tabId=id.split("-");var newId=tabId[0]+"-"+tabId[1]+"-"+tabId[2]+"-1";var champsCompo=$("#frm-tarifs-"+newId).serialize();Resa.demande_champs_composition_formule(newId,champsCompo,tabId[3])})}else{if(modeAjoutPanier=="ESPACE_CLIENT"){var tabId=id.split("-");var newId=tabId[0]+"-"+tabId[1]+"-"+tabId[2]+"-1";var champsCompo=$("#frm-tarifs-"+newId).serialize();Resa.demande_champs_composition_formule(newId,champsCompo,tabId[3])}}else if(JsonData.erreur.affiche==1)$("#msg-erreur-formule-"+id).html(JsonData.erreur.msg)})},
initValidationMontantSoldeARegler:function(){if($('input[name="espace_client_montant_paiement"]').length>0){$('form[name="demande_paiement"]').find('input[type="submit"],input[type="image"]').unbind("click");$('form[name="demande_paiement"]').find('input[type="submit"],input[type="image"]').click(function(){var montantChoisi=$('input[name="espace_client_montant_paiement"]').val();var soldeRestantAPayer=parseFloat($('input[name="solde_restant_a_payer"]').val());var montantMinimum=parseFloat($('input[name="montant_minimum"]').val());
$("fieldset.solde_multi_reglement_espace_client").children("p.erreur").hide();if(isNaN(montantChoisi)||montantChoisi==""){$("p#erreur_01").show();return false}montantChoisi=parseFloat(montantChoisi);if(montantChoisi<montantMinimum){$("p#erreur_02").show();return false}else if(montantChoisi>soldeRestantAPayer){$("p#erreur_03").show();return false}var urlDossier=$('input[name="url_espace_client"]').val();var urlActionPaiement=urlDossier+"?action=solde&id="+$('input[name="num_dossier"]').val();urlActionPaiement+=
"&montant="+montantChoisi;$.getJSON(urlActionPaiement,function(json){var domVariable=document.createElement("div");domVariable.innerHTML=json.html;var htmlKitPaiementContent=domVariable.querySelector(".kitpaiement_content");var htmlKitClientContent=domVariable.querySelector(".client_content");var formMajOK=true;var divTemplateARemplacer=null;if($(htmlKitPaiementContent).length>0){divTemplateARemplacer=$("#content").find(".kitpaiement_content");divTemplateARemplacer.html(htmlKitPaiementContent.innerHTML)}else if($(htmlKitClientContent).length>
0){divTemplateARemplacer=$("#content").find(".client_content");divTemplateARemplacer.html(htmlKitClientContent.innerHTML)}else formMajOK=false;if(formMajOK)Resa.initValidationMontantSoldeARegler();if(formMajOK&&json.success)if($('form[name="demande_paiement"]').length>0)$('form[name="demande_paiement"]').submit();else;});return false})}},init_criteres_choix:function(){$('.critere_choix_liste input[type="radio"]').change(function(e){var $choice=$(e.target);var typeCritere=$choice.attr("name");var valeurCritere=
$choice.val();var typeCritereSuivant=$choice.closest(".critere_choix_liste").next().find('input[type="radio"]').attr("name");var article=$('input[name="article_modele"]').val();if(typeCritereSuivant!==undefined){$('input[name="'+typeCritereSuivant+'"]').prop("checked",false);var urlAjax="booking?action=critereChoixUpdate&type_critere="+typeCritere+"&valeur_critere="+valeurCritere+"&type_critere_suivant="+typeCritereSuivant+"&article="+article;$.getJSON(urlAjax,function(json){if(json.success){var smallestPrice=
0;for(var valeurCritereStock in json.data.stock){$('input[id="'+typeCritereSuivant+"_"+valeurCritereStock+'"]').attr("data-stock",json.data.stock[valeurCritereStock]);$('input[id="'+typeCritereSuivant+"_"+valeurCritereStock+'"]').attr("data-prix",json.data.prix[valeurCritereStock]);if(json.data.prix_barre[valeurCritereStock]!==undefined)$('input[id="'+typeCritereSuivant+"_"+valeurCritereStock+'"]').attr("data-prix-barre",json.data.prix_barre[valeurCritereStock]);if(json.data.prix[valeurCritereStock]<
smallestPrice||smallestPrice==0)smallestPrice=json.data.prix[valeurCritereStock];$(".bloc_tarif_article .prix_en_cours").text(smallestPrice+" \u20ac");$('input[id="'+typeCritereSuivant+"_"+valeurCritereStock+'"]').attr("data-commandable",json.data.comportement[valeurCritereStock].indexOf("COMMANDABLE")!==-1);$('input[id="'+typeCritereSuivant+"_"+valeurCritereStock+'"]').attr("data-precommande",json.data.comportement[valeurCritereStock].indexOf("PRECOMMANDE")!==-1)}}})}else if($choice.attr("data-prix")!==
undefined){$(".bloc_tarif_article .prix_en_cours").text($choice.attr("data-prix")+" \u20ac");if($choice.attr("data-prix-barre")!==undefined)$(".bloc_prix_barre .prix_barre").text($choice.attr("data-prix-barre")+" \u20ac");if($choice.attr("data-commandable")!==undefined||$choice.attr("data-precommande")!==undefined){if($choice.attr("data-commandable")=="true")$(".bloc_btn_ajout_panier_article, .select_qte_article").show();else $(".bloc_btn_ajout_panier_article, .select_qte_article").hide();if($choice.attr("data-precommande")==
"true")$(".bloc_btn_devis_acticle").show();else $(".bloc_btn_devis_acticle").hide()}}var nbCriteresCoches=$("#frm_criteres").find('input[type="radio"]:checked').length;var nbCriteres=$(".critere_choix_liste").length;var btnDisabledVisible=$('input[name="btn_ajout_panier_article"]:disabled').is(":visible");if(nbCriteresCoches==nbCriteres&&btnDisabledVisible||nbCriteresCoches!=nbCriteres&&!btnDisabledVisible)$('input[name="btn_ajout_panier_article"]').toggle();Resa.update_select_qte($choice.data("stock"))})},
bind_less_more_qte:function(){$(".select_qte_article .forms_champType_number a").off("click");$(".select_qte_article .forms_champType_number a").on("click",function(e){var $target=$(e.target);var qte=parseInt($('input[name="qte_article"]').val());var max=parseInt($('input[name="qte_article"]').attr("max"));if($target.hasClass("less")&&qte>1)$('input[name="qte_article"]').val(qte-1);else if($target.hasClass("more")&&qte<max)$('input[name="qte_article"]').val(qte+1)})},update_select_qte:function(qte){if($('select[name="qte_article"]').length>
0){$('select[name="qte_article"] option').prop("disabled",false);$('select[name="qte_article"] option').filter(function(){return parseInt($(this).val())>qte}).prop("disabled",true)}else $('input[name="qte_article"]').attr("max",qte);$('[name="qte_article"]').val("1")}};$(function(){Resa.init_accordeon(".categorie_cross_selling_accordeon");if($("body").find(".validation_espace_client_cgv #espace_client_cgv").length>0){Resa.activerBoutonPaiementSoldeEspaceClient();$(".validation_espace_client_cgv #espace_client_cgv").click(function(){Resa.activerBoutonPaiementSoldeEspaceClient()})}});

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/102-dispo.js **************************************************************/ 
var WidgetDispos=$.extend({pathStatic:"https://static.ingenie.fr/",urlBase:"/widget-dispos",__constructor:function(){},init_ajax:function(params){var urlAjax=this.urlBase+"?mode=ajax";var paramsWidgetDispo=params["tabParamsWidgetDispo"];var vue="";var typeNav="mois";for(var idParam in paramsWidgetDispo){if(idParam=="mode")continue;if(idParam=="vue")vue=paramsWidgetDispo[idParam];urlAjax+="&"+idParam+"="+paramsWidgetDispo[idParam]}if(vue=="semaineLigne")typeNav="semaine";if(params["prestation"])urlAjax+=
"&prestation="+params["prestation"];var idBloc="bloc_widget_dispos";if(params["idBloc"])idBloc=params["idBloc"];$("#"+idBloc).html('<div class="ajax_vue"><img src="'+this.pathStatic+'images/ajax/chargement-moyen-rond.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#"+idBloc).html(html);WidgetDispos.init_nav(typeNav)})},init_nav_formulaire:function(typeNav,idForm){if(typeNav=="mois"){$("#"+idForm+" .btn_prev_mois a").click(function(){WidgetDispos.prev_mois()});$("#"+
idForm+" .btn_next_mois a").click(function(){WidgetDispos.next_mois()})}},init_nav:function(typeNav){$('form[name|="frm_widget_dispos"]').each(function(){var idForm=$(this).attr("id");WidgetDispos.init_nav_formulaire(typeNav,idForm)})},switch_onglet:function(onglet){var vue=onglet;var id=document.getElementById("wd_id").value;var prestation=document.getElementById("wd_prestation").value;var modeAction=document.getElementById("wd_mode_action").value;var idFormContact=document.getElementById("wd_id_form_contact").value;
$(".nav_widget_onglets .onglet").removeClass("onglet_active");$(".nav_widget_onglets #vue_"+onglet).addClass("onglet_active");$("#wd_vue").attr("value",onglet);var urlAjax=this.urlBase+"?vue="+vue+"&id="+id+"&prestation="+prestation+"&reload_vue=O";urlAjax+="&mode_action="+modeAction;urlAjax+="&id_form_contact="+idFormContact;$("#vue_dispos").html('<div class="ajax_vue"><img src="'+this.pathStatic+'images/ajax/chargement-moyen-rond.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#vue_dispos").html(html);
WidgetDispos.init_nav("mois")})},init_dates_contact_form:function(idForm,date_debut,date_fin,goAncre){var dates=$("#form_"+idForm+" .form_date ");$(dates[0]).val(date_debut);$(dates[1]).val(date_fin);if(goAncre!=undefined){if(!$(".contact").is(":visible"))$(".contact").show();IngenieTools.scrollToId("contact")}},init_position_depart:function(decalage,typeNav){if(decalage>0)if(typeNav=="semaineLigne"||typeNav=="joursSemaineLigne"){var decalageBloc=parseInt($(" .bloc_semaine_ext").width());decalagePx=
"-"+decalageBloc*decalage+"px";$(" .grid_semaine").css({"left":decalagePx})}else{var decalageBloc=parseInt($(" .bloc_mois").width());decalagePx="-"+decalageBloc*decalage+"px";$(" .grid_mois").css({"left":decalagePx})}},contact_prestataire:function(url,date_debut,date_fin){location.href=url+"?contact_form_dispo=1&date_debut_sejour="+date_debut+"&date_fin_sejour="+date_fin+"#contact"},selection_prestation:function(prestation,idForm,typeTarif){var vue=$("#"+idForm+" #wd_vue").attr("value");var id=$("#"+
idForm+" #wd_id").attr("value");var modeAction=$("#"+idForm+" #wd_mode_action").attr("value");var modeResa=$("#"+idForm+" #wd_mode_resa").attr("value");var urlFiche=$("#"+idForm+" #wd_url_fiche").attr("value");var idFormContact=$("#"+idForm+" #wd_id_form_contact").attr("value");var resaEnCours="";if($("#"+idForm+" #wd_resa_en_cours").length!=0)resaEnCours=$("#"+idForm+" #wd_resa_en_cours").attr("value");var cid=$("#"+idForm+" #wd_cid").attr("value");var typeNav="mois";if(vue=="semaineLigne")typeNav=
"semaine";if(typeNav=="semaine"){var curentLeft=parseInt($("#"+idForm+" .grid_semaine").css("left"));var visuBtnNext=$("#"+idForm+" .btn_next_semaine").css("visibility");var visuBtnPrev=$("#"+idForm+" .btn_prev_semaine").css("visibility")}else{var curentLeft=parseInt($("#"+idForm+" .grid_mois").css("left"));var visuBtnNext=$("#"+idForm+" .btn_next_mois").css("visibility");var visuBtnPrev=$("#"+idForm+" .btn_prev_mois").css("visibility")}$("#"+idForm+" #wd_prestation").attr("value",prestation);var urlAjax=
this.urlBase+"?vue="+vue+"&id="+id+"&prestation="+prestation+"&reload_vue=O"+"&typeTarif="+typeTarif;urlAjax+="&mode_action="+modeAction;urlAjax+="&mode_resa="+modeResa;if(urlFiche!="")urlAjax+="&url_fiche="+urlFiche;if(idFormContact!="")urlAjax+="&id_form_contact="+idFormContact;urlAjax+="&cid="+cid;if(resaEnCours!="")urlAjax+="&resaEnCours="+resaEnCours;$("#"+idForm+" #vue_dispos").html('<div class="ajax_vue"><img src="'+this.pathStatic+'images/ajax/chargement-moyen-rond.gif" alt="load" /></div>');
$.ajax({url:urlAjax,cache:false}).done(function(html){$("#"+idForm+" #vue_dispos").html(html);if(typeNav=="semaine"){$("#"+idForm+" .btn_next_semaine").css({"visibility":visuBtnNext});$("#"+idForm+" .btn_prev_semaine").css({"visibility":visuBtnPrev});$("#"+idForm+" .grid_semaine").css({"left":curentLeft})}else{$("#"+idForm+" .btn_next_mois").css({"visibility":visuBtnNext});$("#"+idForm+" .btn_prev_mois").css({"visibility":visuBtnPrev});$("#"+idForm+" .grid_mois").css({"left":curentLeft});WidgetDispos.init_nav(typeNav)}})},
next_mois:function(){var maxDecalage=document.getElementById("wd_decalage_nav_next").value;var curentLeft=parseInt($(".grid_mois").css("left"));var decalageBloc=parseInt($(".bloc_mois").width());if(curentLeft-decalageBloc==maxDecalage*decalageBloc)$(".btn_next_mois").css({"visibility":"hidden"});$(".grid_mois").animate({"left":"-="+decalageBloc},"slow","linear",function(){$(".btn_prev_mois").css({"visibility":"visible"})});return false},next_semaine:function(idForm){var maxDecalage=document.getElementById("wd_decalage_nav_next").value;
var curentLeft=parseInt($("#"+idForm+" .grid_semaine").css("left"));var decalageBloc=parseInt($("#"+idForm+" .bloc_semaine_ext").width());if(curentLeft-decalageBloc==maxDecalage*decalageBloc)$("#"+idForm+" .btn_next_semaine").css({"visibility":"hidden"});$("#"+idForm+" .grid_semaine").animate({"left":"-="+decalageBloc},"slow","linear",function(){$("#"+idForm+" .btn_prev_semaine").css({"visibility":"visible"})});return false},prev_mois:function(){var curentLeft=parseInt($(".grid_mois").css("left"));
var decalageBloc=parseInt($(".bloc_mois").width());if(curentLeft+decalageBloc=="0")$(".btn_prev_mois").css({"visibility":"hidden"});$(".grid_mois").animate({"left":"+="+decalageBloc},"slow","linear",function(){$(".btn_next_mois").css({"visibility":"visible"})});return false},prev_semaine:function(idForm){var curentLeft=parseInt($("#"+idForm+" .grid_semaine").css("left"));var decalageBloc=parseInt($("#"+idForm+" .bloc_semaine_ext").width());if(curentLeft+decalageBloc=="0")$("#"+idForm+" .btn_prev_semaine").css({"visibility":"hidden"});
$("#"+idForm+" .grid_semaine").animate({"left":"+="+decalageBloc},"slow","linear",function(){$("#"+idForm+" .btn_next_semaine").css({"visibility":"visible"})});return false},init_info_bulle:function(baseClass){$("."+baseClass).each(function(){var info=$("#contenu_"+$(this).attr("id")).html();if(info)if($(this).qtip)$(this).qtip({content:{text:info},position:{my:"left center",target:"mouse",viewport:false,adjust:{x:10,y:0}},hide:{fixed:true},style:baseClass+"_content"})})},loadAjaxVueDispos:function(idSliderWidget,
numVueACharger,sensLoadNext,fnCallback){var sliderWidgetDispo=$("#"+idSliderWidget);if(sliderWidgetDispo.hasClass("loadingPeriode"))return false;var formWidgetDispos=sliderWidgetDispo.closest("form[name=frm_widget_dispos]");if($(formWidgetDispos).length==0)return false;var dateToLoad;var dateDuJour=(new Date).toISOString().substr(0,10).replace(/-/g,"");if(sensLoadNext==true)dateToLoad=sliderWidgetDispo.children("li:last-child").attr("data-date-next");else{var strDateDebutSlider=sliderWidgetDispo.children("li:first-child").attr("data-date-debut");
var dateDebutSlider=new Date(Date.UTC(parseInt(strDateDebutSlider.substr(0,4)),parseInt(strDateDebutSlider.substr(4,2))-1,parseInt(strDateDebutSlider.substr(6,2)),0,0,0));var timestampDateToLoad=dateDebutSlider.setTime(dateDebutSlider.getTime()-24*3600*1E3);dateToLoad=new Date(timestampDateToLoad);dateToLoad=dateToLoad.toISOString().substr(0,10).replace(/-/g,"")}if(sliderWidgetDispo.children("li[data-date-debut="+dateToLoad+"]").length>0||!sensLoadNext&&parseInt(dateToLoad)<parseInt(dateDuJour))return false;
var tabParamsUrl=[];tabParamsUrl["id"]=$(formWidgetDispos).children("input[type=hidden][name=wd_id]").val();tabParamsUrl["vue"]=$(formWidgetDispos).children("input[type=hidden][name=wd_vue]").val();tabParamsUrl["mode_resa"]=$(formWidgetDispos).children("input[type=hidden][name=wd_mode_resa]").val();tabParamsUrl["cid"]=$(formWidgetDispos).children("input[type=hidden][name=wd_cid]").val();tabParamsUrl["load_periode_ajax"]=true;tabParamsUrl["reload_vue"]="O";tabParamsUrl["start_date"]=dateToLoad;var chaineParams=
"";for(var idParam in tabParamsUrl){if(chaineParams!="")chaineParams+="&";chaineParams+=idParam+"="+tabParamsUrl[idParam]}var urlAjax=this.urlBase+"?"+chaineParams;$.ajax({url:urlAjax,cache:false,beforeSend:function(){sliderWidgetDispo.addClass("loadingPeriode")},success:function(data){if(sensLoadNext==true)sliderWidgetDispo.append(data);else sliderWidgetDispo.prepend(data);fnCallback()},error:function(){console.log("error")},complete:function(){sliderWidgetDispo.removeClass("loadingPeriode")}})},
addChargementAuClicBtnDispoAccordeon:function(cleContexteIdHtml,tabParamsWidgetDispo){$("div#"+cleContexteIdHtml+".fiche-info").find("div.afficher-toutes-les-dispo").unbind("click").click(function(){if($("div#blocDispo-"+cleContexteIdHtml).find("div.widget_dispos").length==0)WidgetDispos.init_ajax(tabParamsWidgetDispo)})}});

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/113-questionnaire.js **************************************************************/ 
console.log("JS Questionnaire");var Questionnaire=function(idQuestionnaire,idClient,modeTest,langue){this.urlController=window.location.pathname;this.idQuestionnaire=idQuestionnaire;this.idClient=idClient;this.modeTest=modeTest;this.langue=langue;this.init()};Questionnaire.prototype.init=function(){$("#questionSuivanteLoading").hide();this.bindInput()};
Questionnaire.prototype.bindInput=function(){var questionnaire=this;$("input.reponseQuestionSuivante").on("click",function(){questionnaire.getFollowingQuestion(this)});this.bindDateInput();this.setAutoCheckInput();this.setGroupSelectPrest();this.setSelectTableau()};
Questionnaire.prototype.bindDateInput=function(){questionnaire=this;$(".datepicker").each(function(){var idReponse=$(this).attr("name");idReponse=idReponse.replace("question_date_","");$(this).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,onSelect:function(){if($(this).val()!=""&&!$('input[value="'+idReponse+'"]').is(":checked"))$('input[value="'+idReponse+'"]').trigger("click")}});$(this).on("keyup",function(){if($(this).val()==""&&$('input[value="'+idReponse+'"]').is(":checked"))$('input[value="'+
idReponse+'"]').trigger("click")})})};Questionnaire.prototype.setAutoCheckInput=function(){$(".champs_libre_reponse").on("keyup",function(){if($(this).val()!=""&&!$(this).prev().prev().is(":checked"))$(this).prev().prev().trigger("click");else if($(this).val()==""&&$(this).prev().prev().is(":checked"))$(this).prev().prev().trigger("click")})};Questionnaire.prototype.setGroupSelectPrest=function(){$('[name^="liaison_dans_dossier_"]').on("change",function(){var selectedValue=$(this).val();$('[name^="liaison_dans_dossier_"]').each(function(){$(this).val(selectedValue)})})};
Questionnaire.prototype.setSelectTableau=function(){$(".champReponseTableau").on("click",function(event){if(event.target.nodeName=="TD")$(this).find("input")[0].checked=!$(this).find("input")[0].checked})};
Questionnaire.prototype.getFollowingQuestion=function(input){questionnaire=this;if($(input).is(":checked")){var questionName=$(input).attr("name");questionName=questionName.replace("[]","");questionId=questionName.replace("question_","question_suivante_");if($("#"+questionId)instanceof Object)$("#"+questionId).remove();$("#questionSuivanteLoading").show();var ajaxParams={action:"recupererQuestionSuivante",id:questionnaire.idQuestionnaire,client:questionnaire.idClient,mode_test:questionnaire.modeTest,
langue_questionnaire:questionnaire.langue,idReponse:$(input).val()};var ajaxRequest=$.ajax({url:questionnaire.urlController,data:ajaxParams});ajaxRequest.done(function(html){if($("#"+questionId)instanceof Object)$("#"+questionId).remove();html='<div id="'+questionId+'" class="questionSuivante">'+html+"<div>";$(".blocQuestion").last().after(html);$("#questionSuivanteLoading").hide();questionnaire.bindInput()})}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/100-formulaire.js **************************************************************/ 
function formulaire_init(){$(".to_hide").hide();$(".checkmail").bind("keyup",function(){onkeyupCheckMail(this)});if(typeof fbAutoConnect!="undefined")if(fbAutoConnect)if(typeof FacebookAutoLogin!="undefined"){motDePasseFBOk=false;if(typeof motDePasseFB!="undefined")motDePasseFBOk=motDePasseFB;if(typeof apiID!="undefined")FacebookAutoLogin.facebook_init(apiID,motDePasseFBOk)}if("function"==typeof preLoadActionFormulaire)preLoadActionFormulaire();if($(".info_bulle_form").length>0)init_info_bulle("info_bulle_form");
if(typeof formsActionJson!="undefined")for(var champ in formsActionJson)if($("#"+champ))for(var action in formsActionJson[champ]){if(action==undefined)action=0;var jsonAction=formsActionJson[champ][action];if($("#"+champ).attr("type")=="radio"){var champRadioName=$("#"+champ).attr("name");$('input[type=radio][name="'+champRadioName+'"]').bind(jsonAction.action,jsonAction.params,function(event){formsAction(this,event.data,champ)})}else $("#"+champ).bind(jsonAction.action,jsonAction.params,function(event){formsAction(this,
event.data)});if(isAuthentification=="N"&&idMailAuthentification!="")if($("#"+champ).val()!=""&&idMailAuthentification==champ)$("#"+champ).keyup()}$(".forms_controlable").each(function(index,thisForm){console.log(thisForm.id);if(typeof thisForm.id!=="undefined"&&thisForm.id!==""){var id_form=thisForm.id.replace(/form_/g,"");$("#"+thisForm.id+" .champ").blur(function(index){if(!$(this).hasClass("form_date"))formController(this.id,id_form);else{var elId=$("#"+this.id).parents(".forms_ligne").attr("id");
var elIcon=$("#"+elId+" .forms_icon");$(elIcon).css("display","none");$("#"+elId+" .forms_erreur").removeClass("forms_erreur");$("#"+elId+" .forms_erreur_title").removeClass("forms_erreur_title")}});$("#"+thisForm.id+' .champ[rel="captcha"]').keyup(function(e){if($(this).val().length==6)if(!$(this).hasClass("form_date"))formController(this.id,id_form);else{var elId=$("#"+this.id).parents(".forms_ligne").attr("id");var elIcon=$("#"+elId+" .forms_icon");$(elIcon).css("display","none");$("#"+elId+" .forms_erreur").removeClass("forms_erreur");
$("#"+elId+" .forms_erreur_title").removeClass("forms_erreur_title")}else{fieldId=this.id;formId=id_form;var elControls=$("#"+fieldId+"_controls");var elErreur=$("#"+fieldId+"_erreur");var elIcon=$("#"+fieldId+"_ligne .forms_icon");var elLigne=$("#"+fieldId+"_ligne");var elLabel=$("#"+fieldId+"_label");elIcon.removeClass("form_valid");elIcon.addClass("form_invalid");var el=$("#"+fieldId.replace("[","["));var c=elControls.val();el.addClass("forms_erreur");elLabel.addClass("forms_erreur_title");var msgErreur=
getMessageErreur(formId,fieldId,c,elLabel.attr("title"));elErreur.html(msgErreur);elErreur.css({display:"none"});formAttacheMessage(elIcon,msgErreur)}});$("#"+thisForm.id+" .form_list").click(function(index){formControllerListe(this.id,id_form)});$("#"+thisForm.id+" .champ_liste").click(function(index){formControllerListe(this.id,id_form)});$(thisForm).submit(function(){return formControleFormulaire(this,id_form)});if($(".form_doc_acc_id_ref").length>0&&$(".form_doc_acc_url_ref").length>0)$(".form_doc_lien_commande INPUT").click(function(){$(document.body).append('<form id="submit_accroche" method="get" action="'+
$(".form_doc_acc_url_ref").val()+$(this).val()+'" target="_top" ><input type="hidden" name="doc_id" value="'+$(this).val()+'" /></form>');$("#submit_accroche").submit()});else if($(".form_doc_lien_commande INPUT").length>0)if($(".form_doc_place_lien").length>0)formInitMiniPanier();$("#"+thisForm.id+" .bandeau li").fv2_anchor();if($(thisForm).hasClass("submitted"))formControleFormulaire(thisForm,id_form);if(typeof id_client!="undefined"&&id_client>0){var urlAjax="/Ajax/formulaire?action=authentificationajax&id_formulaire="+
id_form;$.getJSON(urlAjax,function(JsonData){formAuthLoadCoordonnees(JsonData)})}if(typeof lancer_auth!="undefined"&&lancer_auth==true)getClientExiste(id_form,id_champ_email);if($(".update_password_btn").length>0){formAttacheMessage($(".forms_icon_update"),$(".forms_icon_update_label").html());$(".update_password_btn").click(function(){$(".update_password_div").show()})}formAttacheMessage($(".forms_icon_mail"),$(".forms_icon_mail_label").html());if($(".form_deconnect_btn").length>0){formAttacheMessage($(".forms_icon_deconnect"),
$(".forms_icon_deconnect_label").html());$(".form_deconnect_btn").click(function(){formDeconnexion()})}if($(".all-star").length>0)$(document).ready(function(){$(".star-avis").click(function(e){var blocParent=$(this).parent().parent();var blocParentId=blocParent.attr("id");var toSplit=blocParent.attr("id").split("_");var idChampHidden=blocParent.attr("id")+"_hidden";var id=$(this).attr("id");var numEtoile=parseInt(id.charAt(4));if($(this).attr("class")==="star-avis etoile_demi_active")numEtoile=numEtoile-
0.5;$("#"+idChampHidden).val(numEtoile);$("#"+blocParentId+" .forms_icon").attr("class","forms_icon form_valid");$("#"+blocParentId+" .all-star").attr("class","all-star noteOK")});$(".star-avis").mousemove(function(e){var blocParent=$(this).parent().parent();var blocParentId=blocParent.attr("id");var toSplit=blocParent.attr("id").split("_");var idChampHidden=toSplit[1];var id=$(this).attr("id");var numEtoile=parseInt(id.charAt(4));var parentOffset=$(this).parent().offset();var relativeXPosition=e.pageX-
this.offsetLeft-parentOffset.left;var widthEtoile=$(this).width();if(numEtoile>1)for(var i=1;i<=numEtoile;i++)$("#"+blocParentId+" #star"+i).attr("class","star-avis etoile_active");for(var j=numEtoile+1;j<=6;j++)$("#"+blocParentId+" #star"+j).attr("class","star-avis etoile_inactive");if(relativeXPosition<widthEtoile)$(this).attr("class","star-avis etoile_active")});$(".all-star").mouseout(function(e){var blocParent=$(this).parent();var blocParentId=blocParent.attr("id");var toSplit=blocParent.attr("id").split("_");
var idChampHidden=toSplit[1];if($("#"+blocParentId+" .all-star").attr("class")!="all-star noteOK")$("#"+blocParentId+" .star-avis").attr("class","star-avis etoile_inactive");else{var note=$("#"+idChampHidden).val();var numEtoile=parseInt(note);if(numEtoile>1)for(var i=1;i<=numEtoile;i++)$("#"+blocParentId+" #star"+i).attr("class","star-avis etoile_active");for(var j=numEtoile+1;j<=6;j++)$("#"+blocParentId+" #star"+j).attr("class","star-avis etoile_inactive");if(note>numEtoile)$("#"+blocParentId+" #star"+
(numEtoile+1)).attr("class","star-avis etoile_demi_active")}})})}});if($(".form_ligne_date_debut .form_date").length>0&&$(".form_ligne_date_fin .form_date").length>0){$(".form_ligne_date_debut .form_date").each(function(index,champDate){$(champDate).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,yearRange:"-0:+5",defaultDate:"+0d",onClose:function(selectedDate){$(".form_ligne_date_fin .form_date").datepicker("option","minDate",selectedDate)}})});$(".form_ligne_date_fin .form_date").each(function(index,
champDate){$(champDate).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,yearRange:"-0:+5",defaultDate:"+0d",onClose:function(selectedDate){$(".form_ligne_date_debut .form_date").datepicker("option","maxDate",selectedDate)}})})}var dateJour=new Date;var minYear=new Date(dateJour.getFullYear()-99,0,1,0,0,0);var maxYear=new Date(dateJour.getFullYear(),0,0,0,0,0);$(".form_date").each(function(index,champDate){$(champDate).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,
yearRange:"-100:+5"})});$(".champ").each(function(index,champ){var info_ico=$("#"+$(champ).attr("id")+"_info");var info=$("#"+$(champ).attr("id")+"_info_label").html();if(info)if($("#"+$(champ).attr("id")+"_info").qtip)$("#"+$(champ).attr("id")+"_info").qtip({content:{text:info},position:{my:"center left",target:"mouse",viewport:$(window),adjust:{x:10,y:0}},hide:{fixed:true},style:"ui-tooltip-shadow"});else formAfficheSimpleMessage(info_ico,info);else{var tabSplit=$(champ).attr("id").split("_");if(tabSplit.length>
3){var info=$("#"+tabSplit[0]+"_"+tabSplit[1]+"_"+tabSplit[2]+"_info_label").html();if(info)if($("#"+tabSplit[0]+"_"+tabSplit[1]+"_"+tabSplit[2]+"_info").qtip)$("#"+tabSplit[0]+"_"+tabSplit[1]+"_"+tabSplit[2]+"_info").qtip({content:{text:info},position:{my:"center left",target:"mouse",viewport:$(window),adjust:{x:10,y:0}},hide:{fixed:true},style:"ui-tooltip-shadow"});else formAfficheSimpleMessage(info_ico,info)}}if($(champ).hasClass("checkmail"))return;var erreur=$("#"+$(champ).attr("id")+"_erreur").html();
if(erreur)if($(champ).qtip)$(champ).qtip({content:{text:erreur},position:{my:"left center",at:"right center"},show:{event:false,ready:true},hide:false,style:{classes:"ui-tooltip-shadow ui-tooltip-tipped"}});else formAfficheSimpleMessage(champ,erreur)})}
function formInitMiniPanier(idPanier){if(!idPanier)idPanier="form_doc_mini_panier";$(".form_doc_lien_commande INPUT").click(function(){if(!$(this).is(":checked"))return;var parent=$(this).closest(".forms_ligne");parent.find(".forms_icon").css("display","none");var divMiniPanier=$("#"+idPanier);if(divMiniPanier.length<1){$(document.body).append('<div id="'+idPanier+'"></div>');divMiniPanier=$("#"+idPanier);$(divMiniPanier).append('<div style="text-align: right;"><img src="https://static.ingenie.fr/images/formulaire/picto_close.png" alt="close" class="form_doc_panier_close"></div>');
$(divMiniPanier).append('<div class="content" style=""></div>');$(divMiniPanier).append('<div class="buttons"></div>');$("#"+idPanier+" .content").append('<img src="https://static.ingenie.fr/images/formulaire/picto_ok.png" style="height: 35px; margin-right: 10px; margin-top: 10px;" alt="Ok" />');$("#"+idPanier+" .content").append($(".form_doc_panier_trad_content").val());$("#"+idPanier+" .content").append('<br style="clear: left;" />');$("#"+idPanier+" .buttons").append('<input type="button" class="form_doc_panier_continue" value="'+
$(".form_doc_panier_trad_btn_autre").val()+'" />');$("#"+idPanier+" .buttons").append('<input type="button" class="form_doc_panier_go_form" value="'+$(".form_doc_panier_trad_btn_coord").val()+'" />')}formInitMiniPanierInitBtn(idPanier);$(divMiniPanier).show();$(".forms_controlable").css("opacity",0.5);$(divMiniPanier).css("position","absolute");$(divMiniPanier).css("top",Math.max(0,$(this).offset().top-100)+"px");$(divMiniPanier).css("left",Math.max(0,($(window).width()-$(divMiniPanier).outerWidth())/
2+$(window).scrollLeft())+"px")})}
function formInitMiniPanierInitBtn(idPanier){$("#"+idPanier+" .form_doc_panier_continue").click(function(){$("#"+idPanier).hide();$(".forms_controlable").css("opacity",1)});$("#"+idPanier+" .form_doc_panier_close").click(function(){$("#"+idPanier).hide();$(".forms_controlable").css("opacity",1)});$("#"+idPanier+" .form_doc_panier_go_form").click(function(){$("#"+idPanier).hide();$(".forms_controlable").css("opacity",1);$("#form_send_mail").focus();$(".checkmail").focus()})}
function formAfficheSimpleMessage(champ,message){if($(champ).attr("id")==undefined||$(champ).attr("id")=="")$(champ).attr("id","infobulle_"+Math.floor(Math.random()*5));$(document).tooltip({items:"#"+$(champ).attr("id"),content:message,track:true})}
function formControleFormulaire(thisForm,id_form){$("#"+thisForm.id+" .forms_erreur_label").html("");var listeChamps=$("#"+thisForm.id+" .champ");var listeChampsListe=$("#"+thisForm.id+" .form_list");var listeChampsListe2=$("#"+thisForm.id+" .champ_liste");var formValid=true;listeChamps.each(function(index){formValid=formController(this.id,id_form)&&formValid});listeChampsListe.each(function(index){formValid=formControllerListe(this.id,id_form)&&formValid});listeChampsListe2.each(function(index){formValid=
formControllerListe(this.id,id_form)&&formValid});$("#form_erreur_header .contenu").html("");$("#form_erreur_header").css("display","none");$("#"+thisForm.id+" .forms_erreur_label").each(function(){console.log($(this));console.log($(this).html());if($(this).html()!="")$("#form_erreur_header .contenu").html($("#form_erreur_header .contenu").html()+$(this).html()+"<br />")});if($("#form_erreur_header .contenu").html()!="")$("#form_erreur_header").css("display","");if(!formValid)IngenieTools.scrollToId("form_haut");
if(formValid)$("#form_send_mail").attr("disabled","disabled");return formValid}
function formControllerListe(fieldId,formId){var fieldValid=true;fieldId=fieldId.replace("|","\\|");var el=$("#"+fieldId.replace("[","["));if(!el.attr("name"))return fieldValid;var idParent=el.attr("name").replace(/\[\]/,"");var elControls=$("#"+idParent+"_controls");var elErreur=$("#"+idParent+"_erreur");var elIcon=$("#"+idParent+"_ligne .forms_icon");var elLabel=$("#"+idParent+"_label");var elName=el.attr("name").replace("[]","\\[\\]");var inputs=$("INPUT[name="+elName+"].form_list:checked");var inputs2=
$("INPUT[name="+elName+"].champ_liste:checked");if(el&&elControls&&elControls.length>0&&($("#"+idParent+"_ligne").is(":visible")||$("#"+idParent+"_ligne").css("display")!="none")){var controls=elControls.val().split("|");var c;var forceUnchecked=true;for(var i=0;i<controls.length;i++){c=controls[i];var nomControle=c;if(c=="o"&&inputs.length<1&&inputs2.length<1){fieldValid=false;forceUnchecked=false}else if(c.match(/quantite/g)){nomControle="quantite";var limits=c.split("[");if(limits[0]!=undefined&&
inputs.length<limits[0]&&inputs2.length<limits[0])fieldValid=false;else if(limits[0]!=undefined&&inputs.length>limits[1]&&inputs2.length>limits[1])fieldValid=false}if(fieldValid==false){if(forceUnchecked);$("#"+idParent+"_ligne .forms_doc_debut").css("display","");elIcon.removeClass("form_valid");elIcon.addClass("form_invalid");el.addClass("forms_erreur");elLabel.addClass("forms_erreur_title");var msgErreur=getMessageErreur(formId,idParent,nomControle,elLabel.attr("title"));elErreur.html(msgErreur);
elErreur.css({display:"none"});formAttacheMessage(elIcon,msgErreur);return fieldValid}}if(fieldValid&&controls[0]!=""){$("#"+idParent+"_ligne .forms_doc_debut").css("display","");elIcon.removeClass("form_invalid");elIcon.addClass("form_valid");elErreur.html("")}}else if(!$("#"+idParent+"_ligne").is(":visible")||$("#"+idParent+"_ligne").css("display")=="none")elErreur.html("");return fieldValid}
function formAttacheMessage(el,msgErreur){if(el.qtip)el.qtip({content:msgErreur,position:{my:"center left",target:"mouse",viewport:$(window),adjust:{x:10,y:0}},hide:{fixed:true},style:"ui-tooltip-shadow"});else formAfficheSimpleMessage(el,msgErreur)}
function formController(fieldId,formId){var ereg_web=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/gi;var ereg_email=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;var ereg_length=/\b.{10}\b/;var ereg_tel=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;var ereg_code_postal=/^[0-9]{5}$/im;var el=$("#"+fieldId);if($("#"+fieldId+"_controls").length<1&&$("#"+fieldId).parents(".forms_ligne").attr("id"))fieldId=$("#"+fieldId).parents(".forms_ligne").attr("id").replace("_ligne",
"");var elControls=$("#"+fieldId+"_controls");var elErreur=$("#"+fieldId+"_erreur");if(el.siblings("input.champ_liste").length>0&&el.siblings("input.champ_liste").prop("checked")){var elErreurValID=elErreur.attr("id")+"_val";var elErreurVal=null;if($("#"+elErreurValID).length>0)elErreurVal=$("#"+elErreurValID);else{elErreurVal=elErreur.clone();elErreurVal.attr("id",elErreurValID);elErreur.after(elErreurVal)}elErreur=elErreurVal}var elIcon=$("#"+fieldId+"_ligne .forms_icon");var elLigne=$("#"+fieldId+
"_ligne");var elLabel=$("#"+fieldId+"_label");var fieldValid=true;if(elControls&&el){if(!elControls.val()||elLigne.css("display")=="none"||!elLigne.is(":visible"))return fieldValid;var controls=elControls.val().split("|");var c;for(var i=0;i<controls.length;i++){c=controls[i];if(c=="o"&&(el.val()==""||el.val()=="JJ/MM/AAAA"))fieldValid=false;else if(c=="mail"&&!el.val().match(ereg_email))fieldValid=false;else if(c=="tel"&&el.val()!=""&&!el.val().match(ereg_tel))fieldValid=false;else if(c=="cp"&&el.val()!=
""&&!el.val().match(ereg_code_postal))fieldValid=false;else if(c.match(/^idem/g)){var idDep=c.replace(/^idem\[/g,"");if($("#formsChamp_"+formId+"_"+idDep)&&$("#formsChamp_"+formId+"_"+idDep).val()!=el.val()){fieldValid=false;c="idem"}}if(el.attr("rel")=="captcha")if($(".g-recaptcha").length>0||$(".captcha-google").length>0){var resultCaptcha=$("#recaptcha"+fieldId+" #recaptcha-anchor").attr("aria-checked");var token=$("#recaptcha"+fieldId+" #g-recaptcha-response").val();if(token!="")fieldValid=true;
else fieldValid=false}else{var urlAjax="/Ajax/formulaire?action=validCaptchaajax&val="+el.val();$.ajax({dataType:"json",async:false,url:urlAjax}).done(function(JsonData){if(!JsonData.correct)fieldValid=false})}if(fieldValid==false){elIcon.removeClass("form_valid");elIcon.addClass("form_invalid");if(el.val()!="")el.addClass("forms_erreur");elLabel.addClass("forms_erreur_title");var msgErreur=getMessageErreur(formId,fieldId,c,elLabel.attr("title"));elErreur.html(msgErreur);elErreur.css({display:"none"});
formAttacheMessage(elIcon,msgErreur);return fieldValid}}if(el.hasClass("forms_erreur")&&fieldValid){el.removeClass("forms_erreur");elLabel.removeClass("forms_erreur_title");elErreur.html("");elErreur.css({display:"none"})}if(fieldValid){elIcon.removeClass("form_invalid");if(el.val()!="")elIcon.addClass("form_valid");elIcon.unbind();elErreur.html("")}if(fieldValid&&$("#champ_mail_authentification")&&$("#champ_mail_authentification").val()){var champ_mail=$("#champ_mail_authentification").val();if(fieldId==
champ_mail)if($("#eventCongresId").length>0)getClientExiste(formId,champ_mail,$("#eventCongresId").val());else getClientExiste(formId,champ_mail)}}return fieldValid}function onkeyupCheckMail(el){var ereg_email=/^[\w-]+(\.[\w-]+)*@([\w-]+\.)+[a-zA-Z]{2,7}$/;$("#id_client").attr("value","");if($(el).val().match(ereg_email)){formController($(el).attr("id"),$("#id_form").val());return true}return false}
function getMessageErreur(id_form,nom_champ,typeErreur,libelleChamps){if(formErrorMessages[nom_champ+"_"+typeErreur])return formErrorMessages[nom_champ+"_"+typeErreur].replace(/%s/g,libelleChamps);else if(formErrorMessages[typeErreur])return formErrorMessages[typeErreur].replace(/%s/g,libelleChamps);return"Pas de message d'erreur"}
function reloadCoordonneesClient(id_form,id_champ_mail){if(!$("#"+id_champ_mail)||!$("#"+id_champ_mail).val())return false;if(!$("#authentification_mdp")||!$("#authentification_mdp").val())return false;var mail=$("#"+id_champ_mail).val();var mdp=$("#authentification_mdp").val();var postData={};postData["action"]="authentificationajax";postData["id_formulaire"]=id_form;postData[id_champ_mail]=mail;postData["mdp"]=mdp;var urlAjax="/Ajax/formulaire";$.getJSON(urlAjax,postData,function(JsonData){formAuthLoadCoordonnees(JsonData)})}
function getClientExiste(id_form,id_champ_mail,congresId){if(!$("#"+id_champ_mail)||!$("#"+id_champ_mail).val())return false;var urlAjax="/Ajax/formulaire?action=authentificationajax&id_formulaire="+id_form+"&"+id_champ_mail+"="+$("#"+id_champ_mail).val();if(congresId!=undefined)urlAjax+="&eventId="+congresId;$.getJSON(urlAjax,function(JsonData){formAuthDisplay(JsonData);if(JsonData.congres){var champNom=$("#form_"+id_form+' .forms_label[title="Nom"]');if(champNom.length>0){var idLabelNom=champNom.attr("id");
var tabIdNom=idLabelNom.split("_");var idChampNom=tabIdNom[0]+"_"+tabIdNom[1]+"_"+tabIdNom[2];varChampNom=$("#"+idChampNom);if(champNom.length>0)if(varChampNom.val()=="")varChampNom.val(JsonData.nom)}var champPrenom=$("#form_"+id_form+' .forms_label[title="Pr\ufffdnom"]');if(champPrenom.length>0){var idLabelPrenom=champPrenom.attr("id");var tabIdPrenom=idLabelPrenom.split("_");var idChampPrenom=tabIdPrenom[0]+"_"+tabIdPrenom[1]+"_"+tabIdPrenom[2];varChampPrenom=$("#"+idChampPrenom);if(champPrenom.length>
0)if(varChampPrenom.val()=="")varChampPrenom.val(JsonData.prenom)}}})}function formDeconnexion(){var urlAjax="/Ajax/formulaire?action=deconnexion";$.getJSON(urlAjax,function(JsonData){if(JsonData.success)location.reload();else alert(JsonData.erreur.msg)})}
function formAuthDisplay(jsonInfo){if($("#img_captcha").length!=0)formReloadCaptcha("img_captcha");if(jsonInfo.existe!=undefined&&jsonInfo.existe==true){$("#authentification_div").css({display:"",visiblility:"visible"});$("#authentification_div .form_liens").css({display:"",visiblility:"visible"});if($("#id_client")&&$("#id_client").val()==""){$(".forms_depAuthentification").hide();$("#form_send_mail").attr("disabled",true);$("#form_send_mail").css("opacity","0.6");$("#form_send_mail").hide()}else{$(".forms_depAuthentification").show();
$("#form_send_mail").attr("disabled",false);$("#form_send_mail").css("opacity","1");$("#form_send_mail").show();$(".update_password_btn").show();$(".form_deconnect_btn").show()}}else if(jsonInfo.existe!=undefined&&jsonInfo.existe==false){$("#authentification_div").css({display:"none",visiblility:"hidden"});if(jsonInfo.msg!=undefined)alert(jsonInfo.msg);$(".forms_depAuthentification").show();$(".forms_depAuthentification").removeClass("to_hide");$(".forms_depNotLogged").show();$(".forms_depNotLogged").removeClass("to_hide");
$("#form_send_mail").attr("disabled",false);$("#form_send_mail").css("opacity","1");$("#form_send_mail").show();$(".update_password_btn").hide();$(".update_password_div").hide();$(".form_deconnect_btn").hide()}}
function formRenvoiePass(){var mail=$("#champ_mail_authentification").val();var id_form=$("#id_form").val();if(mail!=""&&$("#"+mail)&&$("#"+mail).val()){mail=$("#"+mail).val();var urlAjax="/Ajax/formulaire?action=renvoiepassword&mail="+mail+"&id_form="+id_form;$.getJSON(urlAjax,function(JsonData){alert(JsonData.msg)})}else{var urlAjax="/Ajax/formulaire?action=renvoiepassword&mail="+mail+"&id_form="+id_form;$.getJSON(urlAjax,function(JsonData){$(".client_mdpoublie_erreur").addClass("alert alert-error");
$(".client_mdpoublie_erreur").html(JsonData.msg)})}}function formReloadCaptcha(idImage){var urlAjax="/Ajax/formulaire?action=createCaptcha";$.ajax({url:urlAjax}).done(function(data){var maintenant=(new Date).getTime();$("#"+idImage).attr("src",urlAjax+"&time="+maintenant);$("#"+idImage).css("background-image",'url("/Ajax/Formulaire?action=getCaptcha&time='+maintenant+'")')})}
function formAuthLoadCoordonnees(jsonReturn){if(jsonReturn.auth){if($(".form_ligne_mail").length>0){var idFormNT=$(".form_ligne_mail").attr("id");var tabSplidId=idFormNT.split("_");if(tabSplidId.length>2)$("#form_"+tabSplidId[1]+" .forms_dep"+tabSplidId[2]).show()}$("#id_client").attr("value",jsonReturn.id_client);$("#authentification_div .forms_info").removeClass("forms_color2");$("#authentification_div .forms_info").addClass("forms_color1");$("#authentification_div .forms_info").html(jsonReturn.msg_confirm);
if(jsonReturn.idFormulaire){$("#form_"+jsonReturn.idFormulaire+" .forms_depAuthentification").show();$("#form_"+jsonReturn.idFormulaire+" .forms_depAuthentification").removeClass("to_hide");$("#form_"+jsonReturn.idFormulaire+" .forms_depNotAuth").hide();if(jsonReturn.id_client>0){$("#form_"+jsonReturn.idFormulaire+" .forms_depNotLogged").hide();$("#form_"+jsonReturn.idFormulaire+" .forms_depLogged").show();$("#form_"+jsonReturn.idFormulaire+" .update_password_btn").show();$("#form_"+jsonReturn.idFormulaire+
" .form_deconnect_btn").show()}$("#form_"+jsonReturn.idFormulaire+" #form_send_mail").attr("disabled",false);$("#form_"+jsonReturn.idFormulaire+" #form_send_mail").attr("opacity","1");$("#form_"+jsonReturn.idFormulaire+" #form_send_mail").show();$("#form_send_mail").css("opacity","1");$("#form_send_mail").show()}else{$(".forms_depAuthentification").show();$(".forms_depAuthentification").removeClass("to_hide");$(".forms_depNotAuth").hide();if(jsonReturn.id_client>0){$(".forms_depNotLogged").hide();
$(".forms_depLogged").show();$(".update_password_btn").show();$(".form_deconnect_btn").show()}$("#form_send_mail").attr("disabled",false);$("#form_send_mail").attr("opacity","1");$("#form_send_mail").show()}for(var key in jsonReturn.datas){value=jsonReturn.datas[key];if($("#"+key)&&value!="")if($("#"+key).attr("value")!=undefined&&$("#"+key).attr("type")!="checkbox"){$("#"+key).val(value);formController(key,$("#id_form").val())}else{var liste_input=$("#"+key+"_ligne .champ_liste");if(liste_input.length>
0&&liste_input[0].tagName=="INPUT"&&$(liste_input[0]).attr("type")=="checkbox")if($(liste_input[0]).val()==value){$(liste_input).attr("checked",!$(liste_input).attr("checked"));$(liste_input).click();$(liste_input).attr("checked",!$(liste_input).attr("checked"));$(liste_input).prop("checked",!$(liste_input).prop("checked"));var tabSplidId=key.split("_");if(tabSplidId.length>2)$("#form_"+tabSplidId[1]+" .forms_dep"+tabSplidId[2]).show()}else $(liste_input).prop("checked",false);else if($("#"+key+"_ligne .forms_champType_select").length>
0)if(value.indexOf("[")==-1)$("#"+key+" option[value="+value+"]").attr("selected","selected");else{tabsplit=value.split("[");$("#"+key+" option[value*="+tabsplit[1]+"]").attr("selected","selected")}}else;}if(typeof formulaireCallbackAuth!="undefined")formulaireCallbackAuth()}else{$("#authentification_div .forms_info").removeClass("forms_color1");$("#authentification_div .forms_info").addClass("forms_color2");$("#authentification_div .forms_info").html(jsonReturn.msg_confirm)}}
function formsAction(el,params,idChampDeclencheur){var tmpPieces=el.id.split("_");if(el.tagName=="INPUT")if($(el).attr("type")=="checkbox"){var nbUnderscore=tmpPieces.length-2;var classChampsDep=".forms_dep"+tmpPieces[tmpPieces.length-nbUnderscore];if(!el.checked)eval("$('"+classChampsDep+"')."+params[0]+"();");else eval("$('"+classChampsDep+"')."+params[1]+"();")}else if($(el).attr("type")=="text"||$(el).attr("type")=="email"){var classChampsDep=".forms_dep"+tmpPieces[tmpPieces.length-1];if($(el).val()==
"")eval("$('"+classChampsDep+"')."+params[0]+"();");else eval("$('"+classChampsDep+"')."+params[1]+"();")}else{if($(el).attr("type")=="radio"){var nbUnderscore=tmpPieces.length-2;var classChampsDep=".forms_dep"+tmpPieces[tmpPieces.length-nbUnderscore];var idValeurRadioChecked=$('input[type=radio][name="'+$(el).attr("name")+'"]:checked').attr("id");if(idValeurRadioChecked==idChampDeclencheur)eval("$('"+classChampsDep+"')."+params[1]+"();");else eval("$('"+classChampsDep+"')."+params[0]+"();")}}else if(el.tagName==
"SELECT"){var nbUnderscore=tmpPieces.length-2;var classChampsDep=".forms_dep"+tmpPieces[tmpPieces.length-nbUnderscore];var idChampSelection=el.id;var nb=$("#"+idChampSelection+" option:selected").index();eval("$('"+classChampsDep+" .forms_colValues .forms_listeRadio')."+params[0]+"();");for(i=0;i<=nb;i++)if(i==0)eval("$('"+classChampsDep+"')."+params[0]+"();");else{eval("$('"+classChampsDep+" .forms_colValues .forms_listeRadio:nth-child("+i+")')."+params[1]+"();");eval("$('"+classChampsDep+"')."+
params[1]+"();")}}}function init_info_bulle(baseClass){$("."+baseClass).each(function(){var info=$("#contenu_"+$(this).attr("id")).html();if(info)if($(this).qtip)$(this).qtip({content:{text:info},position:{my:"left center",target:"mouse",viewport:false,adjust:{x:10,y:0}},hide:{fixed:true},style:baseClass+"_content"})})};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/103-moteur-recherche.js **************************************************************/ 
var isInitMoteurRecherche=false;var mode_debug_ingenie=false;
var MoteurRecherche={pathStatic:"https://static.ingenie.fr/",urlBase:"/search",__constructor:function(mid){this.init_moteur(mid)},init_champs_date:function(selector_form){if($(selector_form+" .datepicker").length=="0")selector_form=".form-moteurRecherche";$(selector_form+" .datepicker").each(function(){$(this).datepicker({dateFormat:"dd/mm/yy",changeMonth:true,changeYear:true,minDate:0,onClose:function(selectedDate){if($(selector_form+" .minDate").length>0)$(selector_form+" .minDate").datepicker("option",
"minDate",0);if($(selector_form+" .maxDate").length>0)$(selector_form+" .maxDate").datepicker("option","minDate",0);if($(this).hasClass("minDate")&&$(selector_form+" .maxDate").length>0)$(selector_form+" .maxDate").datepicker("option","minDate",selectedDate);else if($(this).hasClass("maxDate")&&$(selector_form+" .minDate").length>0);MoteurRecherche.launchCallback(selector_form+" ."+$(this).attr("id")+"_callback",false)}});$(this).datepicker("option","monthNamesShort",$(this).datepicker("option","monthNames"));
var dateConf=[];if($(selector_form+" ."+$(this).attr("id")+"_conf").length>0){eval($(selector_form+" ."+$(this).attr("id")+"_conf").val());var dateMin=dateConf[0];dateMin=dateMin.substring(6,8)+"/"+dateMin.substring(4,6)+"/"+dateMin.substring(0,4);$(this).datepicker("option","minDate",dateMin);if(dateConf[1]!=undefined){var dateMax=dateConf[1];dateMax=dateMax.substring(6,8)+"/"+dateMax.substring(4,6)+"/"+dateMax.substring(0,4);$(this).datepicker("option","maxDate",dateMax)}}var lang="";if($("#searchLangueEnCoursDatepicker").length>
0){lang=$("#searchLangueEnCoursDatepicker").val();if(lang=="")$.datepicker.setDefaults($.datepicker.regional[""]);else if(lang=="fr")$.datepicker.setDefaults($.datepicker.regional["fr"]);else $.datepicker.setDefaults($.datepicker.regional[lang])}})},init_moteur:function(mid,selector_form){if(mid==undefined||mid==false||$("#mid").val()==undefined||$("#mid").val()==false)if($("#mid").val()!=false&&$("#mid").val()!=undefined&&$("#mid").val()!="")mid=$("#mid").val();else mid=1;else mid=$("#mid").val();
if(selector_form==undefined)selector_form=".form-moteurRecherche";else if(selector_form==".form-moteurRecherche"){$(selector_form).each(function(index){if($(this).attr("id")!=""){var selector_form="#"+$(this).attr("id");MoteurRecherche.init_moteur(mid,selector_form)}});return false}var callback="";if($(document).find(".bloc_moteur_affinage .moteurRecherche").length>0)this.init_reglette(selector_form);MoteurRecherche.init_champs_date(selector_form);callback=$(selector_form+" .duree_callback").val();
this.selectAttachEvent(selector_form+" .duree",callback,true,true);$(selector_form+" .modifier_recherche").unbind("click");$(selector_form+" .modifier_recherche").click(function(e){MoteurRecherche.reload_moteur_ajax(selector_form);return false});callback='MoteurRecherche.select_personnes($(this).val(), "'+selector_form+'");';this.selectAttachEvent(selector_form+" .selection_multichambre",callback,true,true);callback='MoteurRecherche.select_chambres($(this).val(), "'+selector_form+'");';this.selectAttachEvent(selector_form+
" .prestations",callback,true,true);callback='MoteurRecherche.choix_ages_enfants($(this).attr("name").replace("enfants_", ""), "'+selector_form+'");';this.selectAttachEvent(selector_form+" .select_nb_enfants",callback,true,true);this.launchCallback(selector_form+" .callback",true);callback='MoteurRecherche.toggle_pas_de_dates("'+selector_form+'", ".sans_dates");';this.checkboxAttachEvent(selector_form+" .sans_dates",callback,true,true);eval(callback);this.init_affinage(selector_form);if($(selector_form+
" .id_menu_courant").length>0)this.load_query_reload_moteur_ajax(selector_form);this.init_recherche_texte(mid,selector_form);if($(".contenu_bloc_accor").length>0){$(".contenu_bloc_accor").accordion({header:".sous-titre",heightStyle:"content"});var menuActif=0;if($(".menu_accor_ouvert").length)menuActif=parseInt($(".menu_accor_ouvert").val());$(".contenu_bloc_accor").accordion("option","active",menuActif)}if($('div.moteurRecherche input[name="affinerViaSession"]').length>0){$('div.moteurRecherche input[name="affinerViaSession"]').remove();
this.affiner_recherche(".moteurRecherche",true)}},init_recherche_texte:function(mid,selector_form){if($(".type_moteur_sans_affinage").length==0)selector_form=".moteurRecherche";if($(selector_form+" .recherche_texte_input").length>0){$(selector_form+" .recherche_texte_input").keypress(function(e){var code=e.keyCode?e.keyCode:e.which;if(code==13){$(selector_form+" .recherche_texte_annulation").css("display","none");$(selector_form+" .recherche_texte_loader").css("display","");$(selector_form+" .recherche_texte_id").val($(selector_form+
" .recherche_texte_input").val());$(selector_form+" .recherche_texte_type").val("MOT_CLEF");MoteurRecherche.recherche_ajax("#"+$(selector_form+" FORM").attr("id"));return false}});if($(".type_moteur_sans_affinage").length==0)var type_prestataire=$(".type_prestataire_origine").val();else var type_prestataire=MoteurRecherche.getTypePrestataire(selector_form);var minLengthAutoComplete=3;if($(selector_form+" .recherche_texte_input").attr("data-min-length-ac")!="")minLengthAutoComplete=$(selector_form+
" .recherche_texte_input").attr("data-min-length-ac");$(selector_form+" .recherche_texte_input").autocomplete({source:MoteurRecherche.urlBase+"?mid="+mid+"&action=searchAutoComplete&sans_dates=1&type_prestataire="+type_prestataire,minLength:minLengthAutoComplete,select:function(event,ui){$(selector_form+" .recherche_texte_annulation").css("display","none");$(selector_form+" .recherche_texte_loader").css("display","");$(selector_form+" .recherche_texte_id").val(ui.item.id);$(selector_form+" .recherche_texte_type").val(ui.item.type);
if($(".type_moteur_sans_affinage").length==0){MoteurRecherche.affiner_recherche(selector_form,true);$(selector_form+" .recherche_texte_loader").css("display","none");$(selector_form+" .recherche_texte_annulation").css("display","")}else if(ui.item.type!="NO")MoteurRecherche.recherche_ajax("#"+$(selector_form+" FORM").attr("id"))},search:function(event,ui){$(selector_form+" .recherche_texte_loader").css("display","")},response:function(event,ui){$(selector_form+" .recherche_texte_loader").css("display",
"none")}}).data("ui-autocomplete")._renderItem=function(ul,item){var texte="";if(item.labelType!=undefined&&item.labelType!="")texte+='<span class="ac_labelType">'+item.labelType+" : </span> ";texte+='<span class="ac_label">'+item.label+" </span> ";if(item.code!=undefined&&item.code!="")texte+='<span class="ac_code">'+item.code+"</span> ";return $("<li>").append("<a>"+texte+"</a>").appendTo(ul)};$(selector_form+" .recherche_texte_annulation").click(function(){MoteurRecherche.recherche_texte_annulation(selector_form)})}},
recherche_texte_annulation:function(selector_form){$(selector_form+" .recherche_texte_id").val("");$(selector_form+" .recherche_texte_type").val("");$(selector_form+" .recherche_texte_input").val("");MoteurRecherche.affiner_recherche(selector_form,true);$(selector_form+" .recherche_texte_annulation").css("display","none")},toggle_pas_de_dates:function(selector,sans_dates){var disable_date=$(selector+" "+sans_dates).is(":checked");var s=selector;var listeChampsSelecteur=s+" .datedeb, "+s+" .datefin, "+
s+" .duree, "+s+" .bloc_choix_type_date, "+s+" .datedeb_resa, "+s+" .duree_resa, "+s+" .bloc_select_personnes.prestataire SELECT";var listeBlocOpacity=s+" .bloc_date, "+s+" .resa_bloc_date_champs, "+s+" .bloc_select_personnes.prestataire";if(!disable_date){if($(listeChampsSelecteur).length>0)$(listeChampsSelecteur).attr("disabled",false);if($(listeBlocOpacity).length>0)$(listeBlocOpacity).css("opacity",1)}else{if($(listeChampsSelecteur).length>0)$(listeChampsSelecteur).attr("disabled",true);if($(listeBlocOpacity).length>
0)$(listeBlocOpacity).css("opacity",0.4)}},get_jour_semaine:function(mid,selector,selector_return,date,next_date_selector){var next_date=false;var type_prestataire=MoteurRecherche.getTypePrestataire(selector);var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=getJourSemaine&date="+date+"&typePrestataire="+type_prestataire;if($(next_date_selector).length>0){urlAjax+="&nextDate=true";next_date=true}$.getJSON(urlAjax,function(json){if(json.success){$(selector+" "+selector_return).html(json.jour);
if(next_date){$(next_date_selector).val(json.next_date);if($(next_date_selector.replace("#",".")+"_callback").length>0)eval($(next_date_selector.replace("#",".")+"_callback").val())}}else alert(json.erreur.msg)})},get_duree_sejour:function(mid,selector,selector_return){var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=getDureeSejour&datedeb="+$(selector+" .datedeb").val()+"&datefin="+$(selector+" .datefin").val();$.getJSON(urlAjax,function(json){if(json.success){$(selector+" "+selector_return).html(json.nb_jours);
$(selector+" .duree").val(parseInt(json.nb_jours))}else alert(json.erreur.msg)})},select_type_date:function(mid,selector,type_date,cle){var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=getSelectTypeDatePossible&type_date="+type_date+"&cle="+cle+"&id_form="+$(selector).attr("id");$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .bloc_date_resa").html(html);MoteurRecherche.init_champs_date(selector);MoteurRecherche.select_type_duree(mid,selector,type_date,cle)})},select_type_duree:function(mid,
selector,type_date,cle){var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=getSelectTypeDuree&type_date="+type_date+"&cle="+cle+"&id_form="+$(selector).attr("id");$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .bloc_duree_resa").html(html)})},reinit_reglette:function(){var reglette_min=0;var reglette_max=0;if($(".reglette_prix_min_bkp")&&$(".reglette_prix_min_bkp").val()){reglette_min=$(".reglette_prix_min_bkp").val();reglette_min=Math.floor(reglette_min/10)*10}if($("reglette_prix_max_bkp")&&
$(".reglette_prix_max_bkp").val()){reglette_max=$(".reglette_prix_max_bkp").val();reglette_max=Math.ceil(reglette_max/10)*10}$("#resa_prix_reglette").slider("value",reglette_min,reglette_max)},init_reglette:function(selector_form){selector_form="";var reglette_init_min=0;var reglette_init_max=0;var reglette_min=0;var reglette_max=0;if($(".reglette_init_prix_min")&&$(".reglette_init_prix_min").val()){reglette_init_min=parseInt($(".reglette_init_prix_min").val());reglette_init_min=Math.floor(reglette_init_min/
10)*10}if($("reglette_init_prix_max")&&$(".reglette_init_prix_max").val()){reglette_init_max=parseInt($(".reglette_init_prix_max").val())+1;reglette_init_max=Math.ceil(reglette_init_max/10)*10}if($(".reglette_prix_min")&&$(".reglette_prix_min").val()){reglette_min=parseInt($(".reglette_prix_min").val());reglette_min=Math.floor(reglette_min/10)*10}if($("reglette_prix_max")&&$(".reglette_prix_max").val()){reglette_max=parseInt($(".reglette_prix_max").val())+1;reglette_max=Math.ceil(reglette_max/10)*
10}$("#resa_prix_reglette").slider({range:true,min:reglette_init_min,max:reglette_init_max,values:[reglette_min,reglette_max],step:10,slide:function(event,ui){$(".reglette_prix_min").val(ui.values[0]);$(".reglette_prix_max").val(ui.values[1]);$("#resa_prix_reglette_fourchette").html("de "+ui.values[0]+"&euro; &agrave; "+ui.values[1]+"&euro;")},stop:function(event,ui){MoteurRecherche.affiner_recherche(selector_form,true)}})},init_affinage:function(selector_form){selector_form=".moteurRecherche";if($(selector_form).length==
0)selector_form=".form-moteurRecherche_parent";if($(selector_form+" .cadre_affinage_recherche_info").length){$(selector_form+" .datepicker").each(function(){if($(this).parent(".filtre_ouverture_calendrier_jour_par_jour").length>0){$(this).datepicker({changeMonth:true,changeYear:true,onSelect:function(dateText,objDatepicker){$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val(dateText);$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").trigger("change")}});$(this).datepicker("option",
"monthNamesShort",$(this).datepicker("option","monthNames"))}else $(this).datepicker()});$(selector_form+" .checkbox_valcri").unbind("click");$(selector_form+" .checkbox_valcri").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();MoteurRecherche.affiner_recherche(selector_form,$(this).val().split("[")[0])});$(selector_form+" .radio_valfiltre").unbind("click");$(selector_form+
" .radio_valfiltre").click(function(){var tempFiltre=$("#choixfiltre").val();if($(this).val()=="RESET"){$(selector_form+" input[type=radio][value!=RESET].radio_valfiltre").attr("checked",false);$(selector_form+" input[type=radio][value!=RESET].radio_valfiltre").prop("checked",false);$("#choixfiltre").val($(this).val());$(this).attr("checked",true);$(this).prop("checked",true)}else if(tempFiltre!=$(this).val()){$("#choixfiltre").val($(this).val());$(this).attr("checked",true);$(this).prop("checked",
true)}else{$(this).attr("checked",false);$(this).prop("checked",false);$("#choixfiltre").val("")}if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();MoteurRecherche.affiner_recherche(selector_form,"OUVERTURE["+$(this).val())});$(selector_form+" .dateouverture").unbind("change");$(selector_form+" .dateouverture").change(function(){$(".radio_valfiltre").prop("checked",false);$("#choixfiltre").val("");
if($(this).attr("id")=="periode_datedebouverture")if($("#periode_datefinouverture").val()<$(this).val()){var dateDeb=$(this).val();var tabDate=dateDeb.split("/");var next=new Date(tabDate[2],tabDate[1]-1,+tabDate[0]+1);var month=next.getMonth();month=month+1;if(month.toString().length==1)month="0"+month;var nextFormat=next.getDate()+"/"+month+"/"+next.getFullYear();$("#periode_datefinouverture").val(nextFormat)}if($(this).attr("id")=="semaine_datedebouverture"){var valSelectionnee=$(this).val();if(valSelectionnee==
"")return false}if($(this).siblings(".radio_valfiltre").length>0){var radioSelect=$(this).siblings(".radio_valfiltre");$(this).siblings(".radio_valfiltre").prop("checked",true)}else{var radioSelect=$(this).parent().siblings(".radio_valfiltre");$(this).parent().siblings(".radio_valfiltre").prop("checked",true)}$("#choixfiltre").val($(radioSelect).val());$(radioSelect).parents(".bloc_valcri").find(".nb_result_filtrage").hide();MoteurRecherche.affiner_recherche(selector_form,"OUVERTURE["+$(radioSelect).val())});
$(selector_form+" .select_semaine").unbind("change");$(selector_form+" .select_semaine").change(function(){var valSelectSemaine=$(this).val();$("input#semaine_datedebouverture").val(valSelectSemaine);var radioSelect=$(this).closest(".bloc_valcri").children(".radio_valfiltre");radioSelect.attr("checked",true);radioSelect.prop("checked",true);MoteurRecherche.affiner_recherche(selector_form,"OUVERTURE["+$(radioSelect).val())});$(selector_form+" .checkbox_zone_geo").unbind("click");$(selector_form+" .checkbox_zone_geo").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();
else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();MoteurRecherche.affiner_recherche(selector_form,"%23ZONGE")});$(selector_form+" .checkbox_nbPersonne").unbind("click");$(selector_form+" .checkbox_nbPersonne").click(function(){if($(this).is(":checked"))$(this).parents(".bloc_valcri").find(".nb_result_filtrage").hide();else $(this).parents(".bloc_valcri").find(".nb_result_filtrage").show();MoteurRecherche.affiner_recherche(selector_form,"%23NBPER")})}},affiner_recherche:function(selector_form,
reinitvaleur){MoteurRecherche.loaderOnListAdd();if(reinitvaleur==undefined)reinitvaleur=false;var criteres="";$(selector_form+" .checkbox_valcri").each(function(){if($(this).is(":checked"))criteres+="&criteres[]="+$(this).val()});var zones_geo="";$(selector_form+" .checkbox_zone_geo").each(function(){if($(this).is(":checked"))zones_geo+="&zones_geo[]="+$(this).val()});var nb_personne="";$(selector_form+" .checkbox_nbPersonne").each(function(){if($(this).is(":checked"))nb_personne+="&nb_personne[]="+
$(this).val()});var filtreOuverture="";$(selector_form+" .radio_valfiltre").each(function(){if($(this).is(":checked")==true){if($(this).val()=="PERIODE"){if($("#periode_datedebouverture").val()!="")datedebouverture=$("#periode_datedebouverture").val();if($("#periode_datefinouverture").val()!="")datefinouverture=$("#periode_datefinouverture").val();if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Semaine"}if($(this).val()=="NEXT_WE"){var today=new Date;var jour_semaine=today.getDay();
switch(jour_semaine){case 6:var jour_samedi=today;var jour_dimanche=new Date(today.valueOf()+24*60*60*1E3);break;case 0:var jour_samedi=today;var jour_dimanche=jour_samedi;break;case 1:var jour_samedi=new Date(today.valueOf()+5*24*60*60*1E3);var jour_dimanche=new Date(today.valueOf()+6*24*60*60*1E3);break;case 2:var jour_samedi=new Date(today.valueOf()+4*24*60*60*1E3);var jour_dimanche=new Date(today.valueOf()+5*24*60*60*1E3);break;case 3:var jour_samedi=new Date(today.valueOf()+3*24*60*60*1E3);var jour_dimanche=
new Date(today.valueOf()+4*24*60*60*1E3);break;case 4:var jour_samedi=new Date(today.valueOf()+2*24*60*60*1E3);var jour_dimanche=new Date(today.valueOf()+3*24*60*60*1E3);break;case 5:var jour_samedi=new Date(today.valueOf()+24*60*60*1E3);var jour_dimanche=new Date(today.valueOf()+2*24*60*60*1E3);break}var jour=jour_samedi.getDate();if(jour.toString().length==1)jour="0"+jour.toString();var mois=jour_samedi.getMonth()+1;if(mois.toString().length==1)mois="0"+mois.toString();var annee=jour_samedi.getFullYear();
var datedebouverture=jour+"/"+mois+"/"+annee;var jour=jour_dimanche.getDate();if(jour.toString().length==1)jour="0"+jour.toString();var mois=jour_dimanche.getMonth()+1;if(mois.toString().length==1)mois="0"+mois.toString();var annee=jour_dimanche.getFullYear();var datefinouverture=jour+"/"+mois+"/"+annee;if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Semaine"}if($(this).val()=="LE"){if($("#le_datedebouverture").val()!=""){datedebouverture=$("#le_datedebouverture").val();datefinouverture=
datedebouverture}if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Jour"}if($(this).val()=="TODAY"||$(this).val().substring(0,5)=="JOUR_"){var today=new Date;var jour=today.getDate();if(jour.toString().length==1)jour="0"+jour.toString();var mois=today.getMonth()+1;if(mois.toString().length==1)mois="0"+mois.toString();var annee=today.getFullYear();var datedebouverture=jour+"/"+mois+"/"+annee;if($(this).val().substring(0,5)=="JOUR_"){var jourjplusunan=new Date(today.valueOf()+364*
24*60*60*1E3);var jour=jourjplusunan.getDate();if(jour.toString().length==1)jour="0"+jour.toString();var mois=jourjplusunan.getMonth()+1;if(mois.toString().length==1)mois="0"+mois.toString();var annee=jourjplusunan.getFullYear();var datefinouverture=jour+"/"+mois+"/"+annee}else datefinouverture=datedebouverture;if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Jour"}if($(this).val()=="SEMAINE"){var datedebouverture=$("input#semaine_datedebouverture").val();if(datedebouverture==
""){var datefinouverture="";return false}else{var splitDatedebouverture=datedebouverture.split("/");var timestampDebOuverture=(new Date(splitDatedebouverture[2],splitDatedebouverture[1]-1,splitDatedebouverture[0])).getTime();var objDateFinOuverture=new Date(timestampDebOuverture+6*24*3600*1E3);jour=objDateFinOuverture.getDate();if(jour.toString().length==1)jour="0"+jour.toString();mois=objDateFinOuverture.getMonth()+1;if(mois.toString().length==1)mois="0"+mois.toString();annee=objDateFinOuverture.getFullYear();
var datefinouverture=jour+"/"+mois+"/"+annee;if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Semaine"}}if($(this).val()=="CAL_JJ"){if($("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val()!=""){datedebouverture=$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val();datefinouverture=datedebouverture}if($("#bloc-calendrier").length>0)filtreOuverture+="&ongletCalendrier=Jour"}if($(this).val()=="RESET"){var datedebouverture="";var datefinouverture=
"";filtreOuverture+="&reset_cal=1";filtreOuverture+="&sans_dates=1"}if(datedebouverture!="")filtreOuverture+="&dateDebutOuverture="+datedebouverture;if(datefinouverture!="")filtreOuverture+="&dateFinOuverture="+datefinouverture;var jourouverture="";if($(this).val().substring(0,5)=="JOUR_")jourouverture=$(this).val().substring(5,6);if(jourouverture!="")filtreOuverture+="&jourOuverture="+jourouverture}});var recherche_texte="";if($(selector_form+" .recherche_texte_id").length>0&&$(selector_form+" .recherche_texte_type").length>
0){recherche_texte+="&recherche_texte_id="+$(selector_form+" .recherche_texte_id").val();recherche_texte+="&recherche_texte_type="+$(selector_form+" .recherche_texte_type").val();recherche_texte+="&type_prestataire="+$(selector_form+" .type_prestataire_origine").val();recherche_texte+="&sans_dates=1";recherche_texte+="&reload=1"}var prix_min="";var prix_max="";if($(".reglette_prix_min")&&$(".reglette_prix_min").val()){prix_min="&prix_min="+$(".reglette_prix_min").val();prix_max="&prix_max="+$(".reglette_prix_max").val()}var mid=
$(selector_form+" .mid").val();var typePrestataire="";if($(selector_form+" .type_prestataire_origine").val()!=""&&$(selector_form+" .type_prestataire_origine").val()!=undefined)typePrestataire="&typePrestataire="+$(selector_form+" .type_prestataire_origine").val();var affichageCalendrier="";if($("div#bloc-calendrier").length>0)if($("div#bloc-calendrier").hasClass("hidden"))affichageCalendrier+="&affichageCalendrier=0";else affichageCalendrier+="&affichageCalendrier=1";var urlAjax=MoteurRecherche.urlBase+
"?mid="+mid+"&action=result&affiner=1"+zones_geo+nb_personne+criteres+prix_min+prix_max+recherche_texte+typePrestataire+filtreOuverture+affichageCalendrier;$.ajax({url:urlAjax,cache:false}).done(function(html){if($(html.trim()).find("#colonne_droite").length>0)$("#colonne_droite").html($(html.trim()).find("#colonne_droite").html());else if(mode_debug_ingenie==true&&1==0)$("#liste-info").html($(html.trim()).filter("#liste-info").html());else if($(html.trim()).attr("id")=="liste-info")$("#liste-info").html($(html.trim()).html());
else $("#liste-info").html($(html.trim()).find("#liste-info").html());if($("#liste-info").length==0&&$("#content").length>0){var $contentFilter=$(html.trim()).filter("#content");if($contentFilter.length>0)$("#content").html($contentFilter.html());else if($(html.trim()).attr("id")=="liste-info"){var reponseHtmlAjax=$(html.trim());var divListeAAjouter=reponseHtmlAjax.get(0);$("#content").html(divListeAAjouter)}else $("#content").html($(html.trim()).find("#content").html());$("#reload_js_vue").remove();
script_distant=$(html.trim()).filter("script#reload_js_vue").html();$("body").append("<script>"+script_distant+"<\/script>")}if($(".affinage_nb_resultat_nombre").length>0&&$(html.trim()).find(".nb-resultats").length>0){nb_resultat_a_affiche=$(html.trim()).find(".nb-resultats").html().split(" ");$(".affinage_nb_resultat_nombre").html(nb_resultat_a_affiche[0])}if($(html.trim()).find("#carteGoogleMap").length>0)initialiserGoogleMap();try{reload_js_vue()}catch(err){}if($(html.trim()).find(".moteurRecherche").length>
0)MoteurRecherche.init_affinage(".moteurRecherche");MoteurRecherche.loaderOnListRemove();if(reinitvaleur)MoteurRecherche.reinit_nb_valeurs_critere(selector_form,reinitvaleur,mid);if($("#callbackAffinage").length>0)eval($("#callbackAffinage").val())})},reinit_nb_valeurs_critere:function(selector_form,current_type_critere,mid){if(!mid||typeof mid=="undefined")mid=$(selector_form+" .mid").val();var typePrestataire="";if($(selector_form+" .type_prestataire_origine").val()!=""&&$(selector_form+" .type_prestataire_origine").val()!=
undefined)typePrestataire=$(selector_form+" .type_prestataire_origine").val();var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=recalculCritere&typePrestataire="+typePrestataire;if(current_type_critere!=undefined&&current_type_critere!="")urlAjax+="&current_type_critere="+current_type_critere;$.getJSON(urlAjax,function(json){var it=IngenieTools;$(selector_form+" .critere_affiner .bloc_valcri").each(function(){var valeur_critere=$(this).find("INPUT").val();var tab_valeur_critere=valeur_critere.split("[");
if(json[tab_valeur_critere[0]]!=undefined&&json[tab_valeur_critere[0]][tab_valeur_critere[1]]!=undefined){$(this).find(".val_"+it.cleanTFCode(tab_valeur_critere[0])+"_"+it.cleanTFCode(tab_valeur_critere[1])).html(json[tab_valeur_critere[0]][tab_valeur_critere[1]]);var classSelector=" .critere_affiner .bloc_valcri_"+it.cleanTFCode(tab_valeur_critere[0])+"_"+it.cleanTFCode(tab_valeur_critere[1]);if(json[tab_valeur_critere[0]][tab_valeur_critere[1]]=="0"){$(selector_form+classSelector).addClass("disabledCritere");
$(selector_form+classSelector+" INPUT").attr("checked",false);$(selector_form+classSelector+" INPUT").attr("disabled",true)}else{$(selector_form+classSelector).removeClass("disabledCritere");$(selector_form+classSelector+" INPUT").attr("disabled",false)}}});$(selector_form+" .zonegeo_affiner .bloc_valcri").each(function(){var zone_geo=$(this).find("INPUT").attr("id");var tab_zone_geo=zone_geo.split("_");if(json["#ZONGE"]!=undefined&&json["#ZONGE"][tab_zone_geo[1]]!=undefined){$(this).find(".qte_"+
tab_zone_geo[0]+"_"+tab_zone_geo[1]).html(json["#ZONGE"][tab_zone_geo[1]]);var classSelector=" .zonegeo_affiner ."+tab_zone_geo[0]+"_"+tab_zone_geo[1];if(json["#ZONGE"][tab_zone_geo[1]]=="0"){$(selector_form+classSelector).addClass("disabledCritere");$(selector_form+classSelector+" INPUT").attr("checked",false);$(selector_form+classSelector+" INPUT").attr("disabled",true)}else{$(selector_form+classSelector).removeClass("disabledCritere");$(selector_form+classSelector+" INPUT").attr("disabled",false)}}});
$(selector_form+" .nbpersonne_affiner .bloc_valcri").each(function(){var nb_personne=$(this).find("INPUT").attr("id");var tab_nb_personne=nb_personne.split("_");if(json["#NBPER"]!=undefined&&json["#NBPER"][tab_nb_personne[1]]!=undefined){$(this).find(".qte_"+tab_nb_personne[0]+"_"+tab_nb_personne[1]).html(json["#NBPER"][tab_nb_personne[1]]);var classSelector=" .nbpersonne_affiner ."+tab_nb_personne[0]+"_"+tab_nb_personne[1];if(json["#NBPER"][tab_nb_personne[1]]=="0"){$(selector_form+classSelector).addClass("disabledCritere");
$(selector_form+classSelector+" INPUT").attr("checked",false);$(selector_form+classSelector+" INPUT").attr("disabled",true)}else{$(selector_form+classSelector).removeClass("disabledCritere");$(selector_form+classSelector+" INPUT").attr("disabled",false)}}});if(json["OUVERTURE"]!=undefined)$(selector_form+" .affinage_ouverture .bloc_valcri").each(function(){var type_ouverture="";type_ouverture=$(this).find("INPUT").attr("id");if(type_ouverture!=undefined){var tab_type_ouverture=type_ouverture.split("_");
var classSelector=" .affinage_ouverture #"+$(this).find("INPUT").attr("id");var value=tab_type_ouverture[2].toUpperCase();if(json["OUVERTURE"]==value){$(selector_form+classSelector).attr("checked","checked");if(typeof json["DATEDEBUT"]!="undefined"&&json["DATEDEBUT"]!=""&&$(this).find('input[name="datedebouverture"]').length>0){var dateDebutStock=json["DATEDEBUT"].substring(6,8)+"/"+json["DATEDEBUT"].substring(4,6)+"/"+json["DATEDEBUT"].substring(0,4);$(this).find('input[name="datedebouverture"]').val(dateDebutStock)}if(typeof json["DATEFIN"]!=
"undefined"&&json["DATEFIN"]!=""&&$(this).find('input[name="datefinouverture"]').length>0){var dateFinStock=json["DATEFIN"].substring(6,8)+"/"+json["DATEFIN"].substring(4,6)+"/"+json["DATEFIN"].substring(0,4);$(this).find('input[name="datefinouverture"]').val(dateFinStock)}}else if(json["OUVERTURE"]=="LE"&&value=="CALENDRIERJOURPARJOUR")if(typeof json["DATEDEBUT"]!="undefined"&&json["DATEDEBUT"]!=""){var dateDebutStock=json["DATEDEBUT"].substring(6,8)+"/"+json["DATEDEBUT"].substring(4,6)+"/"+json["DATEDEBUT"].substring(0,
4);$(this).children("div.datepicker").datepicker("setDate",dateDebutStock)}}})})},launchCallback:function(selector,emptyVal){if($(selector).length>0&&$(selector).val()!=""){var callbackInClass=$(selector).val();if(emptyVal)$(selector).val("");eval(callbackInClass)}},selectAttachEvent:function(selector,callback,launch,preventDetach){if(callback!=undefined)if($(selector).length>0){if(preventDetach)$(selector).unbind("change");$(selector).change(function(e){eval(callback)});if(launch)$(selector).change()}},
checkboxAttachEvent:function(selector,callback,launch,preventDetach){if($(selector).length>0){if(preventDetach)$(selector).unbind("click");$(selector).click(function(e){eval(callback)});if(launch)$(selector).click()}},load_query_reload_moteur_ajax:function(selector_form){if($(selector_form+" .mid")&&$(selector_form+" .mid").val()){var urlAjax=MoteurRecherche.urlBase+"?mid="+$(selector_form+" .mid").val()+"&ajax=true";urlAjax+="&action=ajaxQuery";urlAjax+="&idMenuCourant="+$(selector_form+" .id_menu_courant").val();
if($(selector_form+' input[name="filtreAffinage"]').length>0){urlAjax+="&filtreAffinage="+$(selector_form+' input[name="filtreAffinage"]').val();if($(selector_form+' input[name="dateDebutOuverture"]').length>0)urlAjax+="&dateDebutOuverture="+$(selector_form+' input[name="dateDebutOuverture"]').val();if($(selector_form+' input[name="dateFinOuverture"]').length>0)urlAjax+="&dateFinOuverture="+$(selector_form+' input[name="dateFinOuverture"]').val()}urlAjax+="&sans_dates=1";var type_prestataire=MoteurRecherche.getTypePrestataire(selector_form);
urlAjax+="&type_prestataire="+type_prestataire;$.getJSON(urlAjax,function(json){if(json.success)if(json["data"]["tabParametresAffinageMenu"])MoteurRecherche.reload_moteur_ajax(selector_form,"result",json["data"]["tabParametresAffinageMenu"]);else MoteurRecherche.reload_moteur_ajax(selector_form,"result")})}},reload_moteur_ajax:function(selector_form,action,paramsAffinage){var strAction="";if(action!=undefined)strAction="&action="+action;if($(selector_form+" .mid")&&$(selector_form+" .mid").val()){var mid=
$(selector_form+" .mid").val();var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&ajax=true"+strAction;var type_prestataire=MoteurRecherche.getTypePrestataire(selector_form);urlAjax+="&type_prestataire="+type_prestataire;var lance_reinit_critere=false;if(typeof criteresAffinageListeInfoSimple!="undefined")if(criteresAffinageListeInfoSimple!=""){urlAjax+="&affiner=1";jQuery.each(criteresAffinageListeInfoSimple,function(){urlAjax+="&criteres[]="+this;critereSplit=this.split("[");urlAjax+="&current_type_critere="+
critereSplit[0];reinit_valeur_critere_affinage=critereSplit[0]});lance_reinit_critere=true;criteresAffinageListeInfoSimple=""}if(paramsAffinage!=undefined)if(paramsAffinage["criteresPrecoches"]){var i=0;urlAjax+="&affiner=1";for(i=0;i<paramsAffinage["criteresPrecoches"].length;i++){urlAjax+="&criteres[]="+paramsAffinage["criteresPrecoches"][i];critereSplit=paramsAffinage["criteresPrecoches"][i].split("[");reinit_valeur_critere_affinage=critereSplit[0]}lance_reinit_critere=true}if($(".bloc_choix_type_date").length>
0)urlAjax+="&type_sejour="+$(".bloc_choix_type_date").val();else if($(".bloc_choix_type_date:checked").length>0)urlAjax+="&type_sejour="+$(".bloc_choix_type_date:checked").val();else if($(selector_form+" .bloc_choix_type_date").length>0)urlAjax+="&type_sejour="+$(selector_form+" .bloc_choix_type_date").val();if($(selector_form+" .inAjaxRequest").length>0){var el;for(var i=0;$(selector_form+" .inAjaxRequest")[i]!=undefined;i++){el=$(selector_form+" .inAjaxRequest")[i];urlAjax+="&"+$(el).attr("name")+
"="+$(el).val()}}$.ajax({url:urlAjax,cache:false}).done(function(html){if($(selector_form+"_parent").parent().length>0)var contenerParent=$(selector_form+"_parent").parent();else var contenerParent=$(selector_form).parent();if($(html).find(".moteurRecherche").length>0)$(selector_form+"_parent").replaceWith($(html).find(".moteurRecherche"));else if($(selector_form+"_parent").length>0)$(selector_form+"_parent").replaceWith($(html).find(".form-recherche").parent());else $(selector_form).replaceWith($(html).find(".form-recherche").parent());
selector_form="#"+$(contenerParent).find(".form-moteurRecherche, .form-recherche").attr("id");if($(selector_form+"_parent").length>0){if($(selector_form+"_parent .callback")&&$(selector_form+"_parent .callback").val())eval($(selector_form+"_parent .callback").val())}else if($(selector_form+" .callback")&&$(selector_form+" .callback").val())eval($(selector_form+" .callback").val());if(lance_reinit_critere==true)MoteurRecherche.reinit_nb_valeurs_critere(".moteurRecherche",reinit_valeur_critere_affinage,
mid);MoteurRecherche.init_moteur(false,selector_form)})}else;},choix_ages_enfants:function(num,selector){var enfantEnCours=0;if($(selector+" .enfants_"+num).length>0)enfantEnCours=$(selector+" .enfants_"+num).val();else if($(selector+" .select_nb_enfants").length>0){enfantEnCours=$(selector+" .select_nb_enfants").val();num="0"}if(enfantEnCours>0){var urlAjax=MoteurRecherche.urlBase+"?mid="+$(selector+" .mid").val()+"&action=detailAgesEnfantsAjax";var type_prestataire=MoteurRecherche.getTypePrestataire(selector);
urlAjax+="&type_prestataire="+type_prestataire;urlAjax+="&enfants="+enfantEnCours;var choixAgeEnfantsSelector=selector+" .choixAges";if(parseInt(num)>0){urlAjax+="&num="+num;choixAgeEnfantsSelector=selector+" .choixAges_"+num}$.ajax({url:urlAjax,cache:false}).done(function(html){$(choixAgeEnfantsSelector).html(html);$(choixAgeEnfantsSelector+" .chambre_nb_enfants").change()})}else $(choixAgeEnfantsSelector).html("")},resultat_ajax:function(selector_form,JsonReturn){var action_old=$(selector_form+
" .form_action").val();$(selector_form+" .form_action").val("result");if($(selector_form+" .cle_fiche").length>0){if(JsonReturn.nbResultsFiche>0)MoteurRecherche.detail_prestations($(selector_form+" .cle_fiche").val(),$(selector_form+" .mid").val());else if(JsonReturn["package"]){$(selector_form+" .form_action").val("result");$(selector_form).attr("onsubmit","");$(selector_form).submit()}else{$(selector_form+" .lien_autre_hotel").show();$(selector_form+" .ajax-results").html(JsonReturn.nbResultsFiche+
" "+JsonReturn.nbResultsLibelle)}$(selector_form+" .form_action").val(action_old)}else $(selector_form).submit()},recherche_ajax:function(selector_form){var champs=$(selector_form).serialize();if($(selector_form+" .cle_fiche").length>0)$("#blocResa-"+$(selector_form+" .cle_fiche").val()).html("");$(selector_form+" .ajax-results").html('<img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" />');$(selector_form+" .form_result").hide();if($("#redirectionUrl").val()!=0&&$("#redirectionUrl").val()!=
""&&$("#redirectionUrl").val()!=undefined){document.location.href=$("#redirectionUrl").val();return false}else var urlAjax=MoteurRecherche.urlBase+"?"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){if(JsonData["redirect"]!=undefined&&JsonData["redirect_url"]!=undefined){document.location.href=JsonData["redirect_url"];return false}msg=JsonData["data"]["nbResults"]+" "+JsonData["data"]["nbResultsLibelle"];if(JsonData["data"]["nbResults"]>0||JsonData["forceLanceRecherche"]!=undefined)MoteurRecherche.resultat_ajax(selector_form,
JsonData["data"]);else $(selector_form+" .ajax-results").html(msg)}else MoteurRecherche.traitement_erreur(JsonData.erreur,selector_form+" .ajax-results")});return false},recherche_dates_visite:function(selector_form,selector_champ_date,prestataire){this.init_search_btns(selector_form,true);var champs=$(selector_form).serialize();if(typeof prestataire!="undefined")champs+="&action=getListeDatesVisiteAjax="+prestataire;else champs+="&action=getListeDatesVisiteAjax";var urlAjax=MoteurRecherche.urlBase+
"?"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData.success==true){mesOptions=JsonData.data;monSelect=$(selector_form+" "+selector_champ_date);monSelect.empty();callback='MoteurRecherche.init_search_btns("'+selector_form+'", true);';MoteurRecherche.selectAttachEvent(monSelect,callback,false,true);$.each(mesOptions,function(val,text){var monOption=$("<option></option>").val(text.date).html(text.date);if(text.selected)monOption.attr("selected","selected");monSelect.append(monOption)})}else MoteurRecherche.traitement_erreur(JsonData.erreur)});
return false},traitement_erreur:function(erreur,selectorDestinationMsg){var msgErreur=erreur.msg;if(selectorDestinationMsg!=undefined&&$(selectorDestinationMsg).length>0){$(selectorDestinationMsg).html("");alert(msgErreur)}else alert(msgErreur)},init_search_btns:function(selector,search_active){if(search_active){$(selector+" .resa_div_btn .form_search").show();$(selector+" .resa_div_btn .form_result").hide();$(selector+" .resa_div_btn .ajax-results").html("")}else{$(selector+" .resa_div_btn .form_search").hide();
$(selector+" .resa_div_btn .form_result").show()}},select_personnes:function(personnes,selector){if(personnes!="more"){$(selector+" .more-personnes").hide();$(selector+" .more-personnes-detail").html("");if($(selector+" .prestations").length>0&&$(selector+" .prestations").val()>1)$(selector+" .prestations").val(1)}else{$(selector+" .more-personnes").show();var nbCh=1;if($(selector+" .prestations").length>0&&$(selector+" .prestations").val()>1)nbCh=$(selector+" .prestations").val();this.select_chambres(nbCh,
selector)}},select_chambres:function(chambre,selector){this.init_search_btns("",true);if($(selector+" .more-personnes").css("display")!="none"&&chambre>0){var urlAjax=MoteurRecherche.urlBase+"?action=detailPersonnesMultiChambresAjax&mid="+$(selector+" .mid").val();urlAjax+="&prestations="+chambre;var type_prestataire=MoteurRecherche.getTypePrestataire(selector);urlAjax+="&type_prestataire="+type_prestataire;$.ajax({url:urlAjax,cache:false}).done(function(html){$(selector+" .more-personnes-detail").html(html);
callback='MoteurRecherche.choix_ages_enfants($(this).attr("name").replace("enfants_", ""), "'+selector+'");';MoteurRecherche.selectAttachEvent(".chambre_nb_enfants",callback,true,true)})}},select_type_recherche:function(mid,selector_form,element){var urlAjax=MoteurRecherche.urlBase+"?mid="+mid+"&action=getChoixDateTypeRecherche&type_recherche="+$(element).val();$.getJSON(urlAjax,function(JsonData){if(JsonData.success==1){$(selector_form+" .periode_du").css("display",JsonData.data.dateDebut.display);
$(selector_form+" .datedeb").attr("disabled",JsonData.data.dateDebut.disabled);$(selector_form+" .datedeb").val(JsonData.data.dateDebut.value);$(selector_form+" .datedeb_force").val(JsonData.data.dateDebut.value);$(selector_form+" .periode_au").css("display",JsonData.data.dateFin.display);$(selector_form+" .datefin").attr("disabled",JsonData.data.dateFin.disabled);$(selector_form+" .datefin").val(JsonData.data.dateFin.value);$(selector_form+" .datefin_force").val(JsonData.data.dateFin.value)}})},
detail_prestations:function(id,mid){var urlAjax=MoteurRecherche.urlBase+"?action=detailPrestationsAjax&id="+id+"&mid="+mid;$("#blocResa-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#blocResa-"+id).html(html)})},detail_package_open:function(id,idPackage,mid){var urlAjax=MoteurRecherche.urlBase+"?action=detailPackageAjax&mid="+mid;urlAjax+="&prestation="+id;urlAjax+="&package="+
idPackage;$("#detail-package-"+id+"_"+idPackage).show();$("#bloc-detail-package-"+id+"_"+idPackage).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#detail-package-open-"+id+"_"+idPackage).hide();$("#bloc-detail-package-"+id+"_"+idPackage).html(html);$("#detail-package-close-"+id+"_"+idPackage).show()})},detail_package_close:function(id,mid){$("#detail-package-"+id).hide();$("#detail-package-open-"+
id).show();$("#detail-package-close-"+id).hide()},detail_tarifs_prestation_open:function(id,mid){var urlAjax=MoteurRecherche.urlBase+"?action=detailTarifsPrestationAjax&mid="+mid;urlAjax+="&prestation="+id;$("#tarif-"+id).show();$("#bloc-"+id).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#open-"+id).hide();$("#bloc-"+id).html(html);$("#close-"+id).show()})},detail_tarifs_package_open:function(id,
idPackage,mid){var urlAjax=MoteurRecherche.urlBase+"?action=detailTarifsPrestationAjax&mid="+mid;urlAjax+="&prestation="+id;urlAjax+="&package="+idPackage;$("#tarif-"+id+"_"+idPackage).show();$("#bloc-"+id+"_"+idPackage).html('<div align="center"><img src="'+this.pathStatic+'images/ajax/ajax-loader.gif" alt="load" /></div>');$.ajax({url:urlAjax,cache:false}).done(function(html){$("#open-"+id+"_"+idPackage).hide();$("#close-"+id+"_"+idPackage).show();$("#bloc-"+id+"_"+idPackage).html(html)})},detail_tarifs_prestation_close:function(id,
mid){$("#tarif-"+id).hide();$("#open-"+id).show();$("#close-"+id).hide()},ajouter_panier_prestation:function(id){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax=MoteurRecherche.urlBase+"?action=ajouterPanierPrestationAjax&"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1){$("#msg-ajout-prestation-"+id).html(JsonData["data"]["msg"]);$("#bt_ajout_panier_"+id).hide();$("#bt_ajout_panier_disabled_"+id).show();if(JsonData["data"]["voir_lien_panier"]=="O")$("#bt_valid_panier_"+
id).show();$("#resa_panier_nb_prestation").html(JsonData["data"]["nb_prestation"]);$("#resa_panier_montant").html(JsonData["data"]["montant"]);$("#bloc_panier").show()}else MoteurRecherche.traitement_erreur(JsonData.erreur,"#msg-ajout-prestation-"+id)})},info_bulle_formules:function(){$(".info_bulle_formule").each(function(){var info=$("#contenu_"+$(this).attr("id")).html();if(info)if($(this).qtip)$(this).qtip({content:{text:info},position:{my:"center left",target:"mouse",viewport:$(window),adjust:{x:10,
y:0}},hide:{fixed:true},style:"ui-tooltip-shadow"})})},voir_panier:function(mid){var url=MoteurRecherche.urlBase+"?action=panier&mid="+mid;location.href=url},calculer_total_prestation:function(id){var champs=$("#frm-tarifs-"+id).serialize();var urlAjax=MoteurRecherche.urlBase+"?action=calculerTotalPrestationAjax&"+champs;$.getJSON(urlAjax,function(JsonData){if(JsonData["success"]==1)$("#total-prestation-"+id).html(JsonData["data"]["total"]);else MoteurRecherche.traitement_erreur(JsonData.erreur,"#total-prestation-"+
id)})},supprimer_assurance_panier:function(mid,val){if(val==0){var url=MoteurRecherche.urlBase+"?action=panier&action_panier=supprimer_assurance"+"&mid="+mid;location.href=url}},supprimer_ligne_panier:function(mid,numligne,confirmMsg){var isConfirmed=confirm(confirmMsg);if(isConfirmed){var url=MoteurRecherche.urlBase+"?action=panier&action_panier=supprimer_ligne&numligne="+numligne+"&mid="+mid;location.href=url}},vider_panier:function(mid,confirmMsg){var isConfirmed=confirm(confirmMsg);if(isConfirmed){var url=
MoteurRecherche.urlBase+"?action=panier&action_panier=vider&mid="+mid;location.href=url}},retour_resultats:function(mid){var url=MoteurRecherche.urlBase+"?action=result&mid="+mid;location.href=url},loaderOnListAdd:function(selectorListe,idLoader){if(selectorListe==undefined)selectorListe=".liste-fiche";if(idLoader==undefined)idLoader="fv2-norelad-loader";if($("div"+selectorListe).length==0)selectorListe="#content";var selectorLoader="#"+idLoader;$(selectorListe).css("position","relative");$(selectorListe).append('<div id="'+
idLoader+'" ><img src="https://static.ingenie.fr/images/ajax/chargement-moyen-rond.gif" /></div>');$(selectorLoader).css("text-align","center");$(selectorLoader).fadeTo("fast",0.3);$(selectorLoader).css("background","#fff");$(selectorLoader).css("position","absolute");$(selectorLoader).css("top","0");$(selectorLoader).css("left","0");$(selectorLoader).css("height","100%");$(selectorLoader).css("width","100%");$(selectorLoader).css("z-index","1000")},loaderOnListRemove:function(selectorLoader){if(selectorLoader==
undefined)selectorLoader="#fv2-norelad-loader";$(selectorLoader).remove()},getTypePrestataire:function(selector_form){if($(selector_form+" #type_prestataire").length>0)return $(selector_form+" #type_prestataire").val();else if($(selector_form+" .type_prestataire:checked").length>0)return $(selector_form+" .type_prestataire:checked").val();else if($(selector_form+" .type_prestataire").length>0)return $(selector_form+" .type_prestataire").val();else if($("#type_prestataire").length>0)return $("#type_prestataire").val();
else if($(".type_prestataire:checked").length>0)return $(".type_prestataire:checked").val();else if($(".type_prestataire_origine").length>0)return $(".type_prestataire_origine").val();alert("Impossible de charger le type de prestataire, selector_form "+selector_form)},initBlocCalendrier:function(){var objOngletListeAfficherCalendrier=$("div#liste-info div.onglets li.btn-afficher-calendrier a");var objDivCalendrier=$("div#bloc-calendrier");$("#bloc-calendrier ul.semaine-encours li a, #bloc-calendrier div.precedent a,  #bloc-calendrier div.suivant a").unbind("click");
$("#bloc-calendrier ul.semaine-encours li a, #bloc-calendrier div.precedent a,  #bloc-calendrier div.suivant a").click(function(){var ongletCalendrier=$("#bloc-calendrier div.onglets ul li.select a").data("onglet-calendrier");var dateDebutSelected=$(this).data("date-debut").toString();var dateDebutSearch=dateDebutSelected.substr(6,2);dateDebutSearch+="/"+dateDebutSelected.substr(4,2);dateDebutSearch+="/"+dateDebutSelected.substr(0,4);var dateFinSearch=null;if(ongletCalendrier!="Jour"&&$(this).data("date-fin")!=
null){var dateFinSelected=$(this).data("date-fin").toString();dateFinSearch=dateFinSelected.substr(6,2);dateFinSearch+="/"+dateFinSelected.substr(4,2);dateFinSearch+="/"+dateFinSelected.substr(0,4)}if(ongletCalendrier=="Jour")if($("input#le_datedebouverture[name=datedebouverture]").length>0){$("input#le_datedebouverture[name=datedebouverture]").val(dateDebutSearch);$("input#type_ouverture_le[name=type_ouverture]").attr("checked","checked");$("input#le_datedebouverture[name=datedebouverture]").trigger("change")}else{if($("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").length>
0){$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val(dateDebutSearch);$("input#type_ouverture_calendrierjourparjour[name=type_ouverture]").attr("checked","checked");$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture[name=datedebouverture]").trigger("change")}}else if($("input#periode_datedebouverture[name=datedebouverture]").length>0){$("input#periode_datedebouverture[name=datedebouverture]").val(dateDebutSearch);$("input#type_ouverture_periode[name=type_ouverture]").attr("checked",
"checked");$("input#periode_datefinouverture[name=datefinouverture]").val(dateFinSearch);$("input#periode_datefinouverture[name=datefinouverture]").trigger("change")}else if($("input#semaine_datedebouverture").length>0){$("input#semaine_datedebouverture").val(dateDebutSearch);$("input#type_ouverture_semaine[name=type_ouverture]").attr("checked","checked");$("select#select_semaine_datedebouverture").val(dateDebutSearch);$("input#semaine_datedebouverture").trigger("change")}return false});$("#bloc-calendrier div.onglets ul li a").unbind("click");
$("#bloc-calendrier div.onglets ul li a").click(function(){var ongletCalendrier=$(this).data("onglet-calendrier");if(ongletCalendrier=="Jour")if($("input#le_datedebouverture[name=datedebouverture]").length>0){var dateLe=$("input#le_datedebouverture[name=datedebouverture]").val();if(dateLe==""){dateLe=$(this).data("defaut-debut");$("input#le_datedebouverture[name=datedebouverture]").val(dateLe)}$("input#le_datedebouverture[name=datedebouverture]").trigger("change")}else{if($("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").length>
0){var dateLe=$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val();if(dateLe==""){dateLe=$(this).data("defaut-debut");$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture").val(dateLe)}$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture[name=datedebouverture]").trigger("change")}}else if(ongletCalendrier=="Semaine")if($("input#periode_datedebouverture[name=datedebouverture]").length>0){var dateDu=$("input#periode_datedebouverture[name=datedebutouverture]").val();
var dateAu=$("input#periode_datefinouverture[name=datefinouverture]").val();if(dateDu==""||dateAu==""){dateDu=$(this).data("defaut-debut");dateAu=$(this).data("defaut-fin");$("input#periode_datedebouverture[name=datedebouverture]").val(dateDu);$("input#periode_datefinouverture[name=datefinouverture]").val(dateAu)}$("input#periode_datefinouverture[name=datefinouverture]").trigger("change")}else{if($("input#semaine_datedebouverture").length>0){var dateParSemaine=$("input#semaine_datedebouverture").val();
if(dateParSemaine==""||$('select#select_semaine_datedebouverture option[value="'+dateParSemaine+'"]').length==0){dateParSemaine=$("select#select_semaine_datedebouverture option").eq(1).val();$("input#semaine_datedebouverture").val(dateParSemaine);$("select#select_semaine_datedebouverture").val(dateParSemaine)}$("input#semaine_datedebouverture").trigger("change")}}else MoteurRecherche.razAffinageBlocCalendrier();return false});if(objOngletListeAfficherCalendrier.length>0&&objDivCalendrier.length>0){objOngletListeAfficherCalendrier.unbind("click");
objOngletListeAfficherCalendrier.click(function(){if(objDivCalendrier.hasClass("hidden")){objDivCalendrier.removeClass("hidden");$(this).parent("li").addClass("select")}else{objDivCalendrier.addClass("hidden");$(this).parent("li").removeClass("select");MoteurRecherche.razAffinageBlocCalendrier()}return false})}},razAffinageBlocCalendrier:function(){if($("div#bloc-calendrier").hasClass("noselect"))return false;if($("input#le_datedebouverture[name=datedebouverture]").length>0)$("input#le_datedebouverture[name=datedebouverture]").val("");
if($("div.filtre_ouverture_calendrier_jour_par_jour div.datepicker").length>0){$("div.filtre_ouverture_calendrier_jour_par_jour div.datepicker").datepicker("setDate",null);$("input#type_ouverture_calendrier_jour_par_jour_datedebouverture[name=datedebouverture]").val("")}if($("select#select_semaine_datedebouverture").length>0){$("select#select_semaine_datedebouverture").val("");$("input#semaine_datedebouverture").val("")}if($("input#periode_datedebouverture[name=datedebouverture]").length>0)$("input#periode_datedebouverture[name=datedebouverture]").val("");
if($("input#periode_datefinouverture[name=datefinouverture]").length>0)$("input#periode_datefinouverture[name=datefinouverture]").val("");$("input#type_ouverture_calendrierreset[type=radio]").trigger("click")}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/115-ingenie-sliderZoom.js **************************************************************/ 
var IngenieSlider=function(IngenieSlider){var IMAGE_SIZES=["1920x1440","1200x900","800x600","640x480","320x240","160x120"];var IMAGE_SIZE_TEMPLATE="{{SIZE_IMAGE}}";IngenieSlider.Zoom=function(sliderEl,params,containerEl){this.sliderEl=sliderEl;this.params=params;this.containerEl=containerEl;this.el=document.createElement("div");this.Slider=new IngenieSlider.Client(this.sliderEl,this.params,true);this.imagesGallerieZoomContainer=this.sliderEl.querySelectorAll(this.params.queryGallerieContainer+" img");
this.listDynamicImagesSrc=this.getDynamicImagesSrc()};IngenieSlider.Zoom.prototype.init=function(){this.Slider.init();this.build();this.initEvents();this.resizeImages();if(this.params.showLegendZoom)this.setLegend();this.onChangeSliderItemActive()};IngenieSlider.Zoom.prototype.build=function(){this.quitZoomEl=document.createElement("div");this.quitZoomEl.innerHTML='<i class="fa fa-times" aria-hidden="true"></i>';this.quitZoomEl.classList.add(this.params.classNameQuitZoom);this.el.appendChild(this.sliderEl);
this.el.appendChild(this.quitZoomEl);this.el.classList.add(this.params.classNameZoom);this.el.style.display="none";this.el.style.opacity="0";this.containerEl.appendChild(this.el)};IngenieSlider.Zoom.prototype.getDynamicImagesSrc=function(){var images=this.sliderEl.querySelectorAll(this.params.queryGallerieItems+" img");var dynamicImagesSrc=[];for(var i=0;i<images.length;i++)for(var k=0;k<IMAGE_SIZES.length;k++){var posImageSizeInSrc=images[i].src.indexOf(IMAGE_SIZES[k]);if(posImageSizeInSrc>0){var splitSrcImage=
images[i].src.split(IMAGE_SIZES[k]);dynamicImagesSrc.push(splitSrcImage[0]+IMAGE_SIZE_TEMPLATE+splitSrcImage[1])}}return dynamicImagesSrc};IngenieSlider.Zoom.prototype.initEvents=function(){document.addEventListener("keyup",function(e){if(e.keyCode===27)this.hideZoomContainer()}.bind(this));this.quitZoomEl.addEventListener("click",this.hideZoomContainer.bind(this));document.addEventListener("changeSliderItemActive",this.onChangeSliderItemActive.bind(this))};IngenieSlider.Zoom.prototype.onChangeSliderItemActive=
function(){var indexItemActive=this.Slider.currentIndexSliderItem;var itemActiveEl=this.Slider.sliderGalerieItemsEl[indexItemActive];var imageActiveEl=itemActiveEl.querySelector("img");var textLegend=imageActiveEl.getAttribute(this.params.attrNameLegend);this.changeLegend(indexItemActive+1,textLegend);if(this.Slider.sliderMiniatureContainerParentEl!==null)this.Slider.verifyManiatureIsVisible(this.Slider.sliderMiniaturesItemsEl,this.Slider.currentIndexSliderItem,this.Slider.sliderMiniatureContainerEl)};
IngenieSlider.Zoom.prototype.resizeImages=function(){var sizeClient=window.innerWidth;var size={};var dist=[];for(var k=0;k<IMAGE_SIZES.length;k++){var xSize=parseInt(IMAGE_SIZES[k].split("x")[0]);size[Math.abs(parseInt(xSize-sizeClient))]=IMAGE_SIZES[k];dist.push(Math.abs(parseInt(xSize-sizeClient)))}var correctSize=size[Math.min.apply(Math,dist)];for(var i=0;i<this.imagesGallerieZoomContainer.length;i++)this.imagesGallerieZoomContainer[i].src=this.listDynamicImagesSrc[i].replace(IMAGE_SIZE_TEMPLATE,
correctSize)};IngenieSlider.Zoom.prototype.showZoomContainer=function(){this.containerEl.classList.add(this.params.classNameContainerZoomActive);this.el.style.display="block";this.el.style.opacity="1"};IngenieSlider.Zoom.prototype.hideZoomContainer=function(){this.containerEl.classList.remove(this.params.classNameContainerZoomActive);this.el.style.display="none";this.el.style.opacity="0"};IngenieSlider.Zoom.prototype.setLegend=function(){this.legendEl=document.createElement("div");this.legendEl.classList.add(this.params.classNameZoomLegend);
if(this.Slider.sliderMiniatureContainerParentEl!==null){var parentNode=this.Slider.sliderMiniatureContainerEl.parentNode;parentNode.insertBefore(this.legendEl,this.Slider.sliderMiniatureContainerEl)}else this.Slider.el.appendChild(this.legendEl)};IngenieSlider.Zoom.prototype.changeLegend=function(index,name){this.legendEl.innerHTML="<p><span class='ing_zoom_legend_index'>"+index+"/"+this.Slider.sliderGalerieItemsEl.length+"</span><span class='ing_zoom_legend_separation'>-</span><span class='ing_zoom_legend_text'>"+
name+"</span></p>"};return IngenieSlider}(IngenieSlider||{});

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/111-google-map.js **************************************************************/ 
var GoogleMap=function(selector,mapParametres,modeAffichage){this.debug=false;if(this.debug)console.log("GoogleMap : construct ",selector,mapParametres);this.urlMarkerClusterLib="https://static.ingenie.fr/js/googlemap/markerclusterer_compiled.js";this.urlGoogleMapApi="https://maps.googleapis.com/maps/api/js?sensor=false";this.urlMarkerSvgIcon="/Ajax/svg?action=markergooglemap&couleur=OrangeRed&lettre={lettre}&format={format}";this.parametres={scaleControl:true,zoom:15,mapTypeId:"google.maps.MapTypeId.ROADMAP",
scrollwheel:true};if(typeof mapParametres!="undefined"&&mapParametres!="")this.parametres=mapParametres;this.map=null;this.bounds=null;this.infowindow=null;this.listeObjMarker=[];this.listeObjLocation=[];this.listeCoord=[];this.traces=[];this.mode="LISTE";if(typeof modeAffichage!="undefined"&&modeAffichage!="")this.mode=modeAffichage;this.markerSvg=false;this.autoZoom=false;this.divListeClass="detail";this.markerPrefixClass="marker_";this.infoWindowPrefixClass="info_marker_";this.directionsService=
null;this.directionsDisplay=null;this.markerClusterEnable=false;if(typeof selector=="undefined"||selector=="")if(this.debug)console.log("GoogleMap : selector undefined");this.selector=selector;this.element=$(selector);if(this.debug)console.log("GoogleMap : this.element",this.element);if(this.element.length==0)if(this.debug)console.log("GoogleMap : element length 0")};
GoogleMap.prototype.initMap=function(){if(this.debug)console.log("GoogleMap : initMap ",this.listeCoord);this.directionsService=new google.maps.DirectionsService;this.infowindow=new google.maps.InfoWindow;this.bounds=new google.maps.LatLngBounds;this.map=new google.maps.Map(this.element[0],this.parametres);this.directionsDisplay=new google.maps.DirectionsRenderer;this.directionsDisplay.setMap(this.map);this.directionsDisplay.setPanel($("#emplacementTexteItineraire")[0]);var listeLatLong=[];var listeCoordTri=
[];for(coord in this.listeCoord){var objCoord=this.listeCoord[coord];var objLocation=new google.maps.LatLng(objCoord.latitude,objCoord.longitude);var marker=this.addGoogleMapMarker(coord,objLocation,objCoord.nom,objCoord.content,objCoord.icone,objCoord.idMarker);this.listeObjLocation.push(objLocation);this.listeObjMarker.push(marker);if(this.autoZoom)this.bounds.extend(objLocation)}if(this.markerClusterEnable)var markerCluster=new MarkerClusterer(this.map,this.listeObjMarker);if(this.debug)console.log("traces",
this.traces.length);if(this.traces.length>0){for(var i in this.traces){var trace=this.traces[i];var listePointsGMap=[];var boundsTrace=new google.maps.LatLngBounds;if(this.debug)console.log("parcourt trace",i,trace);var point=null;for(var j in trace.points){point=new google.maps.LatLng(trace.points[j].latitude,trace.points[j].longitude);listePointsGMap.push(point);boundsTrace.extend(point)}this.addGoogleMapTrace(listePointsGMap,trace);this.bounds.union(boundsTrace)}this.autoZoom=true}if(this.autoZoom)this.map.fitBounds(this.bounds);
else this.map.setCenter(this.listeObjLocation[0]);this.initEvents()};
GoogleMap.prototype.initEvents=function(){if(this.debug)console.log("GoogleMap : initEvents ");var that=this;$("#lienItineraire").click(function(event){that.initItineraire()});if($("div.liste-fiche.liste-carte").length>0)$(document).on("click",'div.liste-fiche.liste-carte li[class^="marker_"]',function(event){if(this.debug)console.log(event.target);if(this.debug)console.log($(event.target).parents("li"));var classLi=$(event.target).parents("li").attr("class");if(typeof classLi=="undefined"){if(this.debug)console.log("classLi undefined : ",
$(event.target).parents("li"));return false}var idMarker=classLi.split("_")[1];idMarker=idMarker.split(" ")[0];if(this.debug)console.log(idMarker);that.animationGoogleMapMarker(idMarker)})};
GoogleMap.prototype.initItineraire=function(){if(this.debug)console.log("GoogleMap : initItineraire");var that=this;var start=$("#departItineraire").val();var end=new google.maps.LatLng(this.listeCoord[0].latitude,this.listeCoord[0].longitude);var request={origin:start,destination:end,travelMode:google.maps.DirectionsTravelMode.DRIVING};this.directionsService.route(request,function(response,status){if(status==google.maps.DirectionsStatus.OK){that.directionsDisplay.setDirections(response);$("div.carte_coordonnees").addClass("itineraire_ok");
if($(".calcul-itineraire-imprimer").length==0)$(".calcul-itineraire-detail").prepend('<a onclick="window.print()" href="javascript:;" class="calcul-itineraire-imprimer"><span>Imprimer</span></a>')}})};
GoogleMap.prototype.addGoogleMapMarker=function(id,location,title,content,icone,idMarker){if(this.debug)console.log("GoogleMap : addGoogleMapMarker ");if(typeof icone=="undefined")icone="";var idicone=parseInt(id)+1;if(this.markerSvg&&icone==""){icone=this.urlMarkerSvgIcon.replace("{lettre}",idicone).replace("{format}","svg");var versionIE=this.detectIEVersion();if(versionIE>0&&(versionIE<=8||versionIE>=11))icone="https://static.ingenie.fr/images/carte-interactive/icone_carte_interactive_sans_numerotation.png"}var new_marker=
new google.maps.Marker({position:location,map:this.map,title:title,icon:icone});google.maps.event.addListener(new_marker,"click",function(){if($("#"+idMarker).length>0)$("html, body").animate({scrollTop:$("#"+idMarker).offset().top},500);else if(this.mode!="FICHE"){this.infowindow.close();this.infowindow.setContent($("."+this.infoWindowPrefixClass+id).html());this.infowindow.open(this.map,new_marker);$("."+this.divListeClass+" ul li").removeClass("select");$("."+this.markerPrefixClass+id).addClass("select");
var top=$("."+this.divListeClass+" ul").offset().top;top=$("."+this.markerPrefixClass+id).offset().top-top;$("."+this.divListeClass).scrollTop(top)}}.bind(this));return new_marker};
GoogleMap.prototype.addGoogleMapTrace=function(listePointsGMap,trace){var that=this;var polylineMap=new google.maps.Polyline({path:listePointsGMap,strokeColor:trace.couleur,strokeOpacity:0.5,strokeWeight:4});polylineMap.setMap(this.map);var contentString="<span>"+trace.nom+"</span>";var infowindow=new google.maps.InfoWindow({content:contentString,disableAutoPan:true});google.maps.event.addListener(polylineMap,"mouseover",function(event){if(this.debug)console.log("mouseover");this.setValues({strokeColor:"#FFD700",
strokeWeight:8});infowindow.setPosition(event.latLng);infowindow.setMap(that.map)});google.maps.event.addListener(polylineMap,"mouseout",function(){if(this.debug)console.log("mouseout");infowindow.setMap(null);this.setValues({strokeColor:trace.couleur,strokeWeight:4})})};
GoogleMap.prototype.animationGoogleMapMarker=function(idMarker){if(this.debug)console.log("GoogleMap : animationGoogleMapMarker ",idMarker,this);this.infowindow.close();this.infowindow.setContent($("."+this.infoWindowPrefixClass+idMarker).html());this.infowindow.open(this.map,this.listeObjMarker[idMarker]);$("."+this.divListeClass+" ul li").removeClass("select");$("."+this.markerPrefixClass+idMarker).addClass("select");this.map.setZoom(this.parametres.zoom);for(var m=0;m<this.listeObjMarker.length;m++){this.listeObjMarker[m].setZIndex(0);
this.listeObjMarker[m].setAnimation(null)}this.listeObjMarker[idMarker].setZIndex(google.maps.Marker.MAX_ZINDEX);this.listeObjMarker[idMarker].setAnimation(google.maps.Animation.BOUNCE);setTimeout(function(){this.listeObjMarker[idMarker].setAnimation(null)}.bind(this),750);this.map.setCenter(this.listeObjMarker[idMarker].getPosition())};
GoogleMap.prototype.detectIEVersion=function(){var sAgent=window.navigator.userAgent;var Idx=sAgent.indexOf("MSIE");if(Idx>0)return parseInt(sAgent.substring(Idx+5,sAgent.indexOf(".",Idx)));else if(sAgent.match(/Trident\/7\./))return 11;else if(sAgent.match(/Edge/))return 12;else return 0};
GoogleMap.prototype.initListeMarkersPrestCarte=function(){var tabLiMarker=$("div#liste-info-content > .liste-carte > .detail > ul > li");if(this.debug)console.log("initListeMarkersPrestCarte : ",tabLiMarker);for(var i in tabLiMarker){var liMarker=$(tabLiMarker[i]);var latitude=liMarker.attr("data-latitude")||"";var longitude=liMarker.attr("data-longitude")||"";if(latitude!=""&&longitude!="")this.listeCoord.push({latitude:latitude,longitude:longitude,content:"",icone:"",idMarker:""})}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/114-ingenie-slider.js **************************************************************/ 
(function(){function CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent("CustomEvent");evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt}CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent})();
var IngenieSlider=function(IngenieSlider){var SLIDER_MODES=["ControlsGalerie","ControlsMiniature"];IngenieSlider.Client=function(el,params,isZoom){this.el=el;this.params=params;this.isZoom=isZoom||false;this.sliderGalerieContainerEl=this.el.querySelector(params.queryGallerieContainer);this.sliderMiniatureContainerParentEl=this.el.querySelector(params.queryMiniatureContainerParent)||null;if(this.sliderMiniatureContainerParentEl!==null){this.sliderMiniatureContainerEl=this.el.querySelector(params.queryMiniatureContainer);
this.sliderMiniaturesItemsEl=this.el.querySelectorAll(params.queryMiniaturesItems)}this.sliderGalerieItemsEl=this.el.querySelectorAll(params.queryGallerieItems);this.currentIndexSliderItem=0;this.lastCurrentIndexSliderItem=0;this.ZoomSlider=null;this.sliderItemsChangeActiveEl=this.el.querySelectorAll("["+params.attrNameItemIndex+"]");this.sliderMode=SLIDER_MODES.indexOf(this.params.sliderControlsMode)?this.params.sliderControlsMode:SLIDER_MODES[0];if(this.params.diaporamaDuration)this.diaporama=setInterval(this.executeDiaporama.bind(this),
this.params.diaporamaDuration);this.addEventListener(document,"changeSliderItemActive",this.onChangeSliderItemActive.bind(this))};IngenieSlider.Client.prototype.init=function(){this.initControls();this.initMode();this.initEvents();this.initImages();this.moveSlider()};IngenieSlider.Client.prototype.initControls=function(){var controlLeftEl=document.createElement("div");controlLeftEl.innerHTML='<i class="fa fa-chevron-left" aria-hidden="true"></i>';controlLeftEl.classList.add("ing_slider_arrow-left",
"ing_slider_arrow");controlLeftEl.setAttribute(this.params.attrNameControl,-1);var controlRightEl=document.createElement("div");controlRightEl.innerHTML='<i class="fa fa-chevron-right" aria-hidden="true"></i>';controlRightEl.classList.add("ing_slider_arrow-right","ing_slider_arrow");controlRightEl.setAttribute(this.params.attrNameControl,1);if(this.sliderMode===SLIDER_MODES[0]){this.sliderGalerieContainerEl.appendChild(controlLeftEl);this.sliderGalerieContainerEl.appendChild(controlRightEl)}else if(this.sliderMode===
SLIDER_MODES[1]&&this.sliderMiniatureContainerParentEl!==null){this.sliderMiniatureContainerParentEl.appendChild(controlLeftEl);this.sliderMiniatureContainerParentEl.appendChild(controlRightEl);for(var i=0;i<this.sliderMiniaturesItemsEl.length;i++)this.sliderMiniaturesItemsEl[i].style.transition="transform 0.3s"}};IngenieSlider.Client.prototype.initImages=function(){var images=this.el.querySelectorAll("[data-size-full]");for(var i=0;i<images.length;i++)images[i].src=images[i].getAttribute("data-size-full")};
IngenieSlider.Client.prototype.initMode=function(){if(this.sliderMode===SLIDER_MODES[1]&&!this.isZoom&&this.sliderMiniatureContainerParentEl!==null){this.sliderMiniatureContainerEl.style.overflow="hidden";this.sliderMiniatureContainerEl.style.display="flex"}};IngenieSlider.Client.prototype.initEvents=function(){for(var i=0;i<this.sliderItemsChangeActiveEl.length;i++)this.addEventListener(this.sliderItemsChangeActiveEl[i],"click",this.sendChangeSliderItem.bind(this,{index:parseInt(this.sliderItemsChangeActiveEl[i].getAttribute(this.params.attrNameItemIndex))}),
true);if(this.ZoomSlider!==null)for(var i=0;i<this.sliderGalerieItemsEl.length;i++)this.addEventListener(this.sliderGalerieItemsEl[i],"click",this.ZoomSlider.showZoomContainer.bind(this.ZoomSlider),true);var controlsEl=this.el.querySelectorAll("["+this.params.attrNameControl+"]");for(var i=0;i<controlsEl.length;i++)this.addEventListener(controlsEl[i],"click",this.sendChangeSliderItem.bind(this,{direction:parseInt(controlsEl[i].getAttribute(this.params.attrNameControl))}));for(var i=0;i<this.sliderGalerieItemsEl.length;i++)this.setSwiperEvent(this.sliderGalerieItemsEl[i],
function(dir){if(dir==="left")this.sendChangeSliderItem({index:this.currentIndexSliderItem+1});else if(dir==="right")this.sendChangeSliderItem({index:this.currentIndexSliderItem-1})}.bind(this))};IngenieSlider.Client.prototype.onChangeSliderItemActive=function(e,index){var nextIndex=typeof index!=="undefined"?index:e.detail.index;this.lastCurrentIndexSliderItem=this.currentIndexSliderItem;if(nextIndex<0)nextIndex=this.sliderGalerieItemsEl.length-1;else if(nextIndex===this.sliderGalerieItemsEl.length)nextIndex=
0;this.currentIndexSliderItem=nextIndex;this.moveSlider();if(this.params.diaporamaDuration){clearInterval(this.diaporama);this.diaporama=setInterval(this.executeDiaporama.bind(this),this.params.diaporamaDuration)}if(this.sliderMode===SLIDER_MODES[1]&&this.sliderMiniatureContainerParentEl!==null)this.verifyManiatureIsVisible(this.sliderMiniaturesItemsEl,this.currentIndexSliderItem,this.sliderMiniatureContainerEl)};IngenieSlider.Client.prototype.moveSlider=function(){this.moveSliderItemAnimation();
this.moveSliderContainer(this.currentIndexSliderItem,this.sliderGalerieContainerEl,this.sliderGalerieItemsEl,this.params.classNameItemActive);if(this.sliderMiniatureContainerParentEl!==null)this.moveSliderContainer(this.currentIndexSliderItem,this.sliderMiniatureContainerEl,this.sliderMiniaturesItemsEl,this.params.classNameMiniatureActive)};IngenieSlider.Client.prototype.moveSliderContainer=function(index,containerEl,itemsEl,classNameActive){var currentActive=containerEl.getElementsByClassName(classNameActive)[0];
if(typeof currentActive!=="undefined")currentActive.classList.remove(classNameActive);itemsEl[index].classList.add(classNameActive)};IngenieSlider.Client.prototype.moveSliderItemAnimation=function(){var currentActive=this.sliderGalerieContainerEl.getElementsByClassName(this.params.classNameItemActive)[0];var nextActive=this.sliderGalerieItemsEl[this.currentIndexSliderItem];nextActive.style.transition="none";if(typeof currentActive!=="undefined")if(this.currentIndexSliderItem>this.lastCurrentIndexSliderItem){nextActive.style.transform=
"translateX(100%)";currentActive.style.transform="translateX(-100%)";this.setVendor(nextActive,"Transform","translateX(100%)");this.setVendor(currentActive,"Transform","translateX(-100%)")}else{nextActive.style.transform="translateX(-100%)";currentActive.style.transform="translateX(100%)";this.setVendor(nextActive,"Transform","translateX(-100%)");this.setVendor(currentActive,"Transform","translateX(100%)")}setTimeout(function(){nextActive.style.transition="transform "+this.params.transitionDuration+
"ms";nextActive.style.transform="translateX(0)";this.setVendor(nextActive,"Transform","translateX(0)")}.bind(this),10)};IngenieSlider.Client.prototype.initZoomContainer=function(){this.ZoomSlider=new IngenieSlider.Zoom(this.el.cloneNode(true),this.params,document.querySelector("body"));this.ZoomSlider.init()};IngenieSlider.Client.prototype.executeDiaporama=function(){this.sendChangeSliderItem({index:this.currentIndexSliderItem+1})};IngenieSlider.Client.prototype.sendChangeSliderItem=function(objControls){var nextIndex=
0;if(objControls.direction)nextIndex=this.currentIndexSliderItem+objControls.direction;else if(objControls.index)nextIndex=objControls.index;var eventChangeActive=new CustomEvent("changeSliderItemActive",{detail:{index:nextIndex}});document.dispatchEvent(eventChangeActive)};IngenieSlider.Client.prototype.setSwiperEvent=function(el,callback){var touchsurface=el,swipedir,startX,startY,distX,distY,threshold=150,restraint=100,allowedTime=300,elapsedTime,startTime,handleswipe=callback||function(swipedir){};
this.addEventListener(touchsurface,"touchstart",function(e){var touchobj=e.changedTouches[0];swipedir="none";dist=0;startX=touchobj.pageX;startY=touchobj.pageY;startTime=(new Date).getTime();e.preventDefault()},true);this.addEventListener(touchsurface,"touchmove",function(e){e.preventDefault()},true);this.addEventListener(touchsurface,"touchend",function(e){var touchobj=e.changedTouches[0];distX=touchobj.pageX-startX;distY=touchobj.pageY-startY;elapsedTime=(new Date).getTime()-startTime;if(elapsedTime<=
allowedTime)if(Math.abs(distX)>=threshold&&Math.abs(distY)<=restraint)swipedir=distX<0?"left":"right";else if(Math.abs(distY)>=threshold&&Math.abs(distX)<=restraint)swipedir=distY<0?"up":"down";handleswipe(swipedir);e.preventDefault()},true)};IngenieSlider.Client.prototype.verifyManiatureIsVisible=function(miniaturesEl,currentIndex,miniaturesContainerEl){var lastMiniatureEl=miniaturesEl[miniaturesEl.length-1];var currentMiniatureEl=miniaturesEl[currentIndex];var widthCurrentMiniature=miniaturesEl[currentIndex].offsetWidth;
var widthMiniatureContainer=miniaturesContainerEl.offsetWidth;var positionXContainerMiniature=miniaturesContainerEl.offsetLeft;var positionXLastMiniature=lastMiniatureEl.offsetLeft-positionXContainerMiniature;var widthTotalMiniature=positionXLastMiniature+lastMiniatureEl.offsetWidth;var positionXCurrentMiniature=currentMiniatureEl.offsetLeft-positionXContainerMiniature;var deplacementX=positionXCurrentMiniature-widthMiniatureContainer/2+widthCurrentMiniature/2;if(positionXCurrentMiniature<widthMiniatureContainer/
2)deplacementX=0;if(positionXCurrentMiniature+widthCurrentMiniature/2>widthTotalMiniature-widthMiniatureContainer/2)deplacementX=widthTotalMiniature-widthMiniatureContainer;for(var i=0;i<miniaturesEl.length;i++){miniaturesEl[i].style.transform="translateX(-"+deplacementX+"px)";this.setVendor(miniaturesEl[i],"Transform","translateX(-"+deplacementX+"px)")}};IngenieSlider.Client.prototype.setVendor=function(element,property,value){element.style["webkit"+property]=value;element.style["moz"+property]=
value;element.style["ms"+property]=value;element.style["o"+property]=value};IngenieSlider.Client.prototype.addEventListener=function(el,eventName,eventHandler,prefix){prefix=prefix?"on":"";if(el.addEventListener)el.addEventListener(eventName,eventHandler,false);else if(el.attachEvent)el.attachEvent(prefix+eventName,eventHandler)};return IngenieSlider}(IngenieSlider||{});

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/109-carte-carnet-voyage-v3.js **************************************************************/ 
var CarteCarnetVoyageV3=function(element,parametres){this.parametres=parametres;this.map=null;this.element=element;this.listeMarkersByKeyPrest={};this.listeDataPrestByKeyPrest={};this.infoWindow=null;this.markerClusterer=null;this.init()};
CarteCarnetVoyageV3.prototype.init=function(){this.map=new google.maps.Map(this.element.find(".canvas-carte")[0],this.parametres);this.infoWindow=new google.maps.InfoWindow({maxWidth:350});var markerClustererOptions={"calculator":function(markers,numStyles){var index=0;var nbMarkers=markers.length;var dv=nbMarkers;while(dv!==0){dv=parseInt(dv/10,10);index++}index=Math.min(index,numStyles);var value=0;for(var i=0;i<nbMarkers;i++)value+=markers[i].idValues.length;return{text:value,index:index}},"gridSize":parseInt(this.parametres.gridSize),
"maxZoom":17,"styles":[{textColor:"white",url:typeof this.parametres.markerClustererIcon[1]!="undefined"?this.parametres.markerClustererIcon[1]:"http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m1.png",width:53,height:53},{textColor:"white",url:typeof this.parametres.markerClustererIcon[2]!="undefined"?this.parametres.markerClustererIcon[2]:"http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m2.png",width:56,height:56},{textColor:"white",
url:typeof this.parametres.markerClustererIcon[3]!="undefined"?this.parametres.markerClustererIcon[3]:"http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m3.png",width:66,height:66},{textColor:"white",url:typeof this.parametres.markerClustererIcon[4]!="undefined"?this.parametres.markerClustererIcon[4]:"http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m4.png",width:78,height:78},{textColor:"white",url:typeof this.parametres.markerClustererIcon[5]!=
"undefined"?this.parametres.markerClustererIcon[5]:"http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/images/m5.png",width:90,height:90}]};this.markerClusterer=new MarkerClusterer(this.map,[],markerClustererOptions)};CarteCarnetVoyageV3.prototype.ouvrir=function(){if(!this.element.hasClass("open")){this.element.addClass("open");google.maps.event.trigger(this.map,"resize")}};CarteCarnetVoyageV3.prototype.fermer=function(){this.infoWindow.close();this.element.removeClass("open")};
CarteCarnetVoyageV3.prototype.centrerSurMarker=function(keyPrest){var marker=this.listeMarkersByKeyPrest[keyPrest];if(marker==null)return;this.map.panTo(marker.getPosition());this.map.setZoom(12);this.afficherPrestInfoWindow(this.listeDataPrestByKeyPrest[keyPrest])};
CarteCarnetVoyageV3.prototype.afficherPrest=function(dataPrest,markerPrestEvents){var vueInfoPrest=dataPrest["infoPrest"];var ficheListePrest=dataPrest["html"];var latitude=parseFloat(vueInfoPrest.Localisation.GoogleMap.Latitude);var longitude=parseFloat(vueInfoPrest.Localisation.GoogleMap.Longitude);if((isNaN(latitude)||latitude==0)&&(isNaN(longitude)||longitude==0))return false;var markerOptions={position:{lat:latitude,lng:longitude},title:vueInfoPrest.Libelle,idValues:[vueInfoPrest.Cle]};if(typeof dataPrest["icon"]!=
"undefined")markerOptions.icon=dataPrest["icon"];var marker=new google.maps.Marker(markerOptions);this.markerClusterer.addMarker(marker);if(typeof markerPrestEvents!="undefined"){var markerEvents=markerPrestEvents.markerEvents;for(var eventType in markerEvents)google.maps.event.addListener(marker,eventType,markerEvents[eventType]);var clusterEvents=markerPrestEvents.clusterEvents;for(var eventType in clusterEvents)google.maps.event.addListener(this.markerClusterer,eventType,clusterEvents[eventType])}this.listeMarkersByKeyPrest[vueInfoPrest.Cle]=
marker;this.listeDataPrestByKeyPrest[vueInfoPrest.Cle]=dataPrest};CarteCarnetVoyageV3.prototype.afficherPrestInfoWindow=function(dataPrest){this.infoWindow.setContent(dataPrest["html"]);var marker=this.listeMarkersByKeyPrest[dataPrest["infoPrest"]["Cle"]];if(this.infoWindow.getMap()==null||this.infoWindow.getPosition()!=marker.getPosition())this.infoWindow.open(this.map,marker)};
CarteCarnetVoyageV3.prototype.cacherPrest=function(keyPrest){if(typeof this.listeMarkersByKeyPrest[keyPrest]=="undefined")return false;this.markerClusterer.removeMarker(this.listeMarkersByKeyPrest[keyPrest]);delete this.listeMarkersByKeyPrest[keyPrest];delete this.listeDataPrestByKeyPrest[keyPrest]};
CarteCarnetVoyageV3.prototype.autoCenter=function(){if(Object.keys(listeMarkersByKeyPrestByDataKey).length==0){this.map.setCenter(this.parametres.center);this.map.setZoom(this.parametres.zoom)}else{var bounds=new google.maps.LatLngBounds;for(var keyPrest in listeMarkersByKeyPrest)bounds.extend(listeMarkersByKeyPrest[keyPrest].getPosition());this.map.fitBounds(bounds);this.map.panToBounds(bounds)}};
CarteCarnetVoyageV3.prototype.animateMarker=function(keyPrest,stopAnimation){if(typeof this.listeMarkersByKeyPrest[keyPrest]=="undefined")return false;if(typeof stopAnimation=="undefined")stopAnimation=false;var iconCluster=null;var clusters=this.markerClusterer.getClusters();for(var i=0;i<clusters.length;++i)if(clusters[i].markers_.length>1&&clusters[i].clusterIcon_.div_&&clusters[i].markers_.indexOf(this.listeMarkersByKeyPrest[keyPrest])>-1){iconCluster=$(clusters[i].clusterIcon_.div_);break}if(stopAnimation==
false){this.listeMarkersByKeyPrest[keyPrest].setAnimation(google.maps.Animation.BOUNCE);if(iconCluster!=null&&!iconCluster.hasClass("animate"))iconCluster.addClass("animate")}else{this.listeMarkersByKeyPrest[keyPrest].setAnimation(null);if(iconCluster!=null)iconCluster.removeClass("animate")}};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/106-facebook.js **************************************************************/ 
var motDePasseAuto=false;
var FacebookAutoLogin=$.extend({__constructor:function(){},facebook_init:function(apiId,motDePasse){motDePasseAuto=motDePasse;window.fbAsyncInit=function(){FB.init({appId:apiId,cookie:true,xfbml:true,version:"v2.1"})};if(!($("#facebook-jssdk").length>0))(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src="//connect.facebook.net/fr_FR/sdk.js";fjs.parentNode.insertBefore(js,fjs)})(document,"script","facebook-jssdk")},statusChangeCallback:function(response){if(response.status===
"connected")this.testAPI();else if(response.status==="not_authorized")document.getElementById("status").innerHTML="Please log "+"into this app.";else document.getElementById("status").innerHTML="Please log "+"into Facebook."},checkLoginState:function(){FB.getLoginStatus(function(response){this.statusChangeCallback(response)})},testAPI:function(){FB.api("/me",{fields:"name, email"},function(response){if($('.forms_ligne .forms_label[title="E-mail"]').length!=0){var idMail=$('.forms_ligne .forms_label[title="E-mail"]').attr("id");
var tabInfo=idMail.split("_");var idChampMail="#"+tabInfo[0]+"_"+tabInfo[1]+"_"+tabInfo[2]+"";$(idChampMail).val(response.email);var formId=tabInfo[1];var champ_mail=tabInfo[0]+"_"+tabInfo[1]+"_"+tabInfo[2];var user_id=response.id;var urlAjax="/Ajax/formulaire?action=authentificationajax&id_formulaire="+formId+"&"+champ_mail+"="+$("#"+champ_mail).val()+"&from=fb&fb_id="+user_id;$.getJSON(urlAjax,function(JsonData){var paramAuth=JsonData;if(paramAuth!="undefined"){if(paramAuth.existe){JsonData.auth=
true;$(".checkmail").trigger("keyup");formAuthLoadCoordonnees(JsonData)}else{if(motDePasseAuto!=false){var mdp=genererMotDePasse();$('.forms_colValues .champ[type="password"]').val(mdp);$(".forms_depNotLogged").hide();$(".forms_depNotLogged > label").hide();$(".forms_depNotLogged > div").hide()}if($('.forms_ligne .forms_label[title="Nom"]').length!=0){var idLabelNom=$('.forms_ligne .forms_label[title="Nom"]').attr("id");var tabInfo=idLabelNom.split("_");$("#"+tabInfo[0]+"_"+tabInfo[1]+"_"+tabInfo[2]+
"").val(response.last_name)}if($('.forms_ligne .forms_label[title="Pr\ufffdnom"]').length!=0){var idLabelNom=$('.forms_ligne .forms_label[title="Pr\ufffdnom"]').attr("id");var tabInfo=idLabelNom.split("_");$("#"+tabInfo[0]+"_"+tabInfo[1]+"_"+tabInfo[2]+"").val(response.first_name)}if($('.forms_ligne .forms_label[title="Prenom"]').length!=0){var idLabelNom=$('.forms_ligne .forms_label[title="Prenom"]').attr("id");var tabInfo=idLabelNom.split("_");$("#"+tabInfo[0]+"_"+tabInfo[1]+"_"+tabInfo[2]+"").val(response.first_name)}$(".checkmail").trigger("keyup")}$(".form_ligne_pass").css("visibility",
"hidden")}})}})}});function statusChangeCallback(response){if(response.status==="connected")FacebookAutoLogin.testAPI();else if(response.status==="not_authorized")document.getElementById("status").innerHTML="Please log "+"into this app.";else document.getElementById("status").innerHTML="Please log "+"into Facebook."}
function genererMotDePasse(){$.generateRandomPassword=function(limit){limit=limit||8;var password="";var chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var list=chars.split("");var len=list.length,i=0;do{i++;var index=Math.floor(Math.random()*len);password+=list[index]}while(i<limit);return password};var pwd=$.generateRandomPassword(12);return pwd};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/112-espace-client-baux.js **************************************************************/ 
var EspaceClientBaux=function(){this.urlController=window.location.pathname;this.init()};EspaceClientBaux.prototype.init=function(){if($("#form_occupation").length>0){this.loadSelect();this.bindSelect();this.initInfobulle("rachat_info")}if($(".bail_occupation_demandes_ligne_modifier").length>0){this.bindModification();this.bindSelect();this.initInfobulle("rachat_info")}};
EspaceClientBaux.prototype.loadSelect=function(){var that=this;var ajaxParams={action:"getSelectDate",id:IngenieTools.findGetParameter("id")};$(".ligne_saison").each(function(){var $ligne=$(this);ajaxParams.bulletin=$('input[name="bulletin"]').val();ajaxParams.typeSemaine=$(this).attr("id");var ajaxRequest=$.ajax({url:that.urlController,data:ajaxParams});ajaxRequest.done(function(html){$("select[name*="+$ligne.attr("id")+"]").html(html)})})};
EspaceClientBaux.prototype.bindSelect=function(){var that=this;$('select[name*="date_deb"]').on("change",function(){var id=$(this).attr("id").replace("date_deb","date_fin");var name=$(this).attr("name").replace("date_deb","date_fin");var ajaxParams={action:"getNextDate",id:IngenieTools.findGetParameter("id"),date:$(this).val()};$.getJSON(that.urlController,ajaxParams,function(data){$('input[name="'+name+'"]').val(data.dateStock);$("#"+id).html(data.libelleDate)})})};
EspaceClientBaux.prototype.bindModification=function(){var that=this;$(".bail_occupation_demandes_ligne_modifier").on("click",function(){var $button=$(this);var $form=$("#form_"+$button.attr("id"));if($form.is(":visible")){$form.hide();return}var tabPKey=$button.attr("id").split("_");var bulletinPKey=tabPKey[0];var bailPKey=tabPKey[1]+"|"+tabPKey[2];var ajaxParams={action:"getSelectDate",id:bailPKey,bulletin:bulletinPKey,typeSemaine:$button.attr("data-saison")};var ajaxRequest=$.ajax({url:that.urlController,
data:ajaxParams});ajaxRequest.done(function(html){$form.find("select").html(html);$form.show()})})};EspaceClientBaux.prototype.initInfobulle=function(baseClass){$("."+baseClass).each(function(){var info=$(this).next('[id^="contenu_"]').html();if(info)if($(this).qtip){$(this).qtip({content:{text:info},position:{my:"left center",target:"mouse",viewport:false,adjust:{x:10,y:0}},hide:{fixed:true},style:baseClass+"_content"});$(this).css("cursor","help")}})};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/116-ingenie-libraryLoader.js **************************************************************/ 
var IngenieLoadLibrary=function(libSrc,containerDestEl,varLibString,type){this.libSrc=libSrc;this.containerDestEl=containerDestEl;this.varLibString=varLibString;this.ready=false;this.type=type};
IngenieLoadLibrary.prototype.loadLibrary=function(){var library_tag;switch(this.type){case "js":library_tag=document.createElement("script");library_tag.setAttribute("type","text/javascript");library_tag.setAttribute("src",this.libSrc);this.containerDestEl.appendChild(library_tag);library_tag.addEventListener("load",this.changeState.bind(this));break;case "css":library_tag=document.createElement("link");library_tag.setAttribute("type","text/css");library_tag.setAttribute("rel","stylesheet");library_tag.setAttribute("href",
this.libSrc);this.containerDestEl.appendChild(library_tag);library_tag.addEventListener("load",this.changeState.bind(this));break}};IngenieLoadLibrary.prototype.changeState=function(){this.ready=true};IngenieLoadLibrary.prototype.executeWhenIsReady=function(callback){if(this.ready===false)setTimeout(this.executeWhenIsReady.bind(this,callback),100);else callback()};IngenieLoadLibrary.prototype.checkLibraryExist=function(){if(eval("typeof "+this.varLibString)!=="undefined")this.ready=true;else this.loadLibrary()};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/109-carte-interactive-v3.js **************************************************************/ 
var CarteInteractiveV3=function(element,parametres,events,controls){this.parametres=parametres;this.mapEvents=events;this.mapControls=controls;this.map=null;this.element=element;this.listeMarkersByKeyPrest={};this.listeMarkers=[];this.listeDataPrestByKeyPrest={};this.infoWindow=null;this.markerClusterer=null;this.init()};
CarteInteractiveV3.prototype.init=function(){this.map=new google.maps.Map(this.element.find(".canvas-carte")[0],this.parametres);this.infoWindow=new google.maps.InfoWindow;if(typeof this.mapEvents!="undefined")for(var eventType in this.mapEvents)this.map.addListener(eventType,this.mapEvents[eventType]);if(typeof this.mapControls!="undefined")for(var controlPosition in this.mapControls)this.map.controls[google.maps.ControlPosition[controlPosition]].push(this.mapControls[controlPosition]);var urlIcoMarkerClusterer=
"https://raw.githubusercontent.com/googlemaps/v3-utility-library/master/";var markerClustererOptions={"calculator":function(markers,numStyles){var index=0;var nbMarkers=markers.length;var dv=nbMarkers;while(dv!==0){dv=parseInt(dv/10,10);index++}index=Math.min(index,numStyles);var value=0;for(var i=0;i<nbMarkers;i++)value+=markers[i].idValues.length;return{text:value,index:index}},"gridSize":parseInt(this.parametres.gridSize),"maxZoom":17,"styles":[{textColor:"white",url:typeof this.parametres.markerClustererIcon[1]!=
"undefined"?this.parametres.markerClustererIcon[1]:urlIcoMarkerClusterer+"markerclusterer/images/m1.png",width:53,height:53},{textColor:"white",url:typeof this.parametres.markerClustererIcon[2]!="undefined"?this.parametres.markerClustererIcon[2]:urlIcoMarkerClusterer+"markerclusterer/images/m2.png",width:56,height:56},{textColor:"white",url:typeof this.parametres.markerClustererIcon[3]!="undefined"?this.parametres.markerClustererIcon[3]:urlIcoMarkerClusterer+"markerclusterer/images/m3.png",width:66,
height:66},{textColor:"white",url:typeof this.parametres.markerClustererIcon[4]!="undefined"?this.parametres.markerClustererIcon[4]:urlIcoMarkerClusterer+"markerclusterer/images/m4.png",width:78,height:78},{textColor:"white",url:typeof this.parametres.markerClustererIcon[5]!="undefined"?this.parametres.markerClustererIcon[5]:urlIcoMarkerClusterer+"markerclusterer/images/m5.png",width:90,height:90}]};this.markerClusterer=new MarkerClusterer(this.map,[],markerClustererOptions)};
CarteInteractiveV3.prototype.ouvrir=function(){if(!this.element.hasClass("open")){this.element.addClass("open");google.maps.event.trigger(this.map,"resize")}};CarteInteractiveV3.prototype.fermer=function(){this.infoWindow.close();this.element.removeClass("open")};CarteInteractiveV3.prototype.centrerSurMarker=function(keyPrest){var marker=this.listeMarkersByKeyPrest[keyPrest];if(marker==null)return;this.map.panTo(marker.getPosition());this.map.setZoom(12);this.afficherPrestInfoWindow(this.listeDataPrestByKeyPrest[keyPrest])};
CarteInteractiveV3.prototype.afficherPrest=function(dataPrest,markerPrestEvents){var vueInfoPrest=dataPrest["infoPrest"];var ficheListePrest="";if(typeof dataPrest["html"]!="undefined")ficheListePrest=dataPrest["html"];var latitude=parseFloat(vueInfoPrest.Localisation.GoogleMap.Latitude);var longitude=parseFloat(vueInfoPrest.Localisation.GoogleMap.Longitude);if((isNaN(latitude)||latitude==0)&&(isNaN(longitude)||longitude==0))return false;var idMarkerExistant=this.findIdMarkerPrestByLatLng(dataPrest);
var marker=null;if(idMarkerExistant>-1){marker=this.listeMarkers[idMarkerExistant];marker.idValues.push(vueInfoPrest.Cle);if(ficheListePrest!="")marker.infoWindowHtml[vueInfoPrest.Cle]=ficheListePrest}else{var infoWindowHtml={};if(ficheListePrest!="")infoWindowHtml[vueInfoPrest.Cle]=ficheListePrest;var markerOptions={map:this.map,position:{lat:latitude,lng:longitude},title:vueInfoPrest.Libelle,idValues:[vueInfoPrest.Cle],infoWindowHtml:infoWindowHtml,optimized:false};if(typeof dataPrest["icon"]!=
"undefined")markerOptions.icon={url:dataPrest["icon"]};marker=new google.maps.Marker(markerOptions);this.markerClusterer.addMarker(marker);google.maps.event.addListener(marker,"click",function(){this.initInfoWindowMarker(marker,true)}.bind(this));if(typeof markerPrestEvents!="undefined"){var markerEvents=markerPrestEvents.markerEvents;for(var eventType in markerEvents)google.maps.event.addListener(marker,eventType,markerEvents[eventType]);var clusterEvents=markerPrestEvents.clusterEvents;for(var eventType in clusterEvents)google.maps.event.addListener(this.markerClusterer,
eventType,clusterEvents[eventType])}}this.listeMarkersByKeyPrest[vueInfoPrest.Cle]=marker;if(idMarkerExistant>-1)this.listeMarkers[idMarkerExistant]=marker;else this.listeMarkers.push(marker);this.listeDataPrestByKeyPrest[vueInfoPrest.Cle]=dataPrest};CarteInteractiveV3.prototype.updateMarkerInfoWindow=function(marker,dataPrest){marker.infoWindowHtml[dataPrest["infoPrest"]["Cle"]]=dataPrest["html"]};
CarteInteractiveV3.prototype.afficherPrestInfoWindow=function(dataPrest){var marker=this.listeMarkersByKeyPrest[dataPrest["infoPrest"]["Cle"]];if(this.infoWindow.getMap()==null||this.infoWindow.getPosition()!=marker.getPosition())this.initInfoWindowMarker(marker,true)};
CarteInteractiveV3.prototype.initInfoWindowMarker=function(objMarker,ouvrir){var contentInfoWindow="";if(Object.keys(objMarker.infoWindowHtml).length>0){for(var keyPrest in objMarker.infoWindowHtml)contentInfoWindow+=objMarker.infoWindowHtml[keyPrest];this.infoWindow.setContent(contentInfoWindow);if(ouvrir){this.infoWindow.open(this.map,objMarker);google.maps.event.addListener(this.infoWindow,"domready",function(){$('.fiche-liste[id^="CarteIntegreeListe"]').closest(".gm-style-iw").parent().addClass("custom-iw")})}}};
CarteInteractiveV3.prototype.removeAllMarkers=function(){for(var keyPrest in this.listeMarkersByKeyPrest)this.cacherPrest(keyPrest)};
CarteInteractiveV3.prototype.cacherPrest=function(keyPrest){if(typeof this.listeMarkersByKeyPrest[keyPrest]=="undefined")return false;var marker=this.listeMarkersByKeyPrest[keyPrest];if(typeof marker.infoWindowHtml[keyPrest]!="undefined")delete marker.infoWindowHtml[keyPrest];marker.idValues.splice(marker.idValues.indexOf(keyPrest),1);if(marker.idValues.length==0){this.markerClusterer.removeMarker(this.listeMarkersByKeyPrest[keyPrest]);delete this.listeMarkersByKeyPrest[keyPrest];this.listeMarkers.splice(this.listeMarkers.indexOf(marker),
1);delete this.listeDataPrestByKeyPrest[keyPrest]}else if(this.infoWindow!=null&&this.infoWindow.getPosition()==marker.getPosition())this.initInfoWindowMarker(marker,false)};
CarteInteractiveV3.prototype.autoCenter=function(){if(Object.keys(listeMarkersByKeyPrestByDataKey).length==0){this.map.setCenter(this.parametres.center);this.map.setZoom(this.parametres.zoom)}else{var bounds=new google.maps.LatLngBounds;for(var keyPrest in listeMarkersByKeyPrest)bounds.extend(listeMarkersByKeyPrest[keyPrest].getPosition());this.map.fitBounds(bounds);this.map.panToBounds(bounds)}};
CarteInteractiveV3.prototype.animateMarker=function(keyPrest,stopAnimation,colorMarker,colorTextMarker){if(typeof this.listeMarkersByKeyPrest[keyPrest]=="undefined")return false;if(typeof stopAnimation=="undefined")stopAnimation=false;var iconCluster=null;var clusters=this.markerClusterer.getClusters();for(var i=0;i<clusters.length;++i)if(clusters[i].markers_.length>1&&clusters[i].clusterIcon_.div_&&clusters[i].markers_.indexOf(this.listeMarkersByKeyPrest[keyPrest])>-1){iconCluster=$(clusters[i].clusterIcon_.div_);
break}if(typeof colorMarker!="undefined"){var reg=/&couleur=.?\w+/;icon=this.listeMarkersByKeyPrest[keyPrest].getIcon();urlIcon=icon.url.replace(reg,"&couleur="+colorMarker.replace("#","%23"));if(typeof colorTextMarker!="undefined"){reg=/&couleurtexte=.?\w+/;urlIcon=urlIcon.replace(reg,"&couleurtexte="+colorTextMarker.replace("#","%23"))}this.listeMarkersByKeyPrest[keyPrest].setIcon({url:urlIcon})}if(stopAnimation==false){this.listeMarkersByKeyPrest[keyPrest].setAnimation(google.maps.Animation.BOUNCE);
if(iconCluster!=null&&!iconCluster.hasClass("animate"))iconCluster.addClass("animate")}else{this.listeMarkersByKeyPrest[keyPrest].setAnimation(null);this.listeMarkersByKeyPrest[keyPrest].setZIndex(google.maps.Marker.MAX_ZINDEX+1);if(iconCluster!=null)iconCluster.removeClass("animate")}};
CarteInteractiveV3.prototype.findIdMarkerPrestByLatLng=function(dataPrest){var idMarkerTrouver=-1;var coordPrest=dataPrest["infoPrest"]["Localisation"]["GoogleMap"];var keyPrestATest=dataPrest["infoPrest"]["Cle"];for(var i in this.listeMarkers){var marker=this.listeMarkers[i];markerLatLng=marker.getPosition();markerIdValues=marker.idValues;if(parseFloat(coordPrest.Latitude).toFixed(5)==markerLatLng.lat().toFixed(5)&&parseFloat(coordPrest.Longitude).toFixed(5)==markerLatLng.lng().toFixed(5)&&markerIdValues.indexOf(keyPrestATest)==
-1){idMarkerTrouver=i;break}}return idMarkerTrouver};CarteInteractiveV3.prototype.updateInfosCompletesMarker=function(objMarker,tabDataPrests){for(var keyPrest in tabDataPrests)this.updateMarkerInfoWindow(objMarker,tabDataPrests[keyPrest])};

/* /home/genius2/front/templates/min/js/100-ingenie/2.0/100-accessible.js **************************************************************/ 
$(document).ready(function(){var originalFontSize=$("#content").css("font-size");var compteurAccessibiliteFontSize=0;var cookieFontSize=$.cookie("font-size-css");if(cookieFontSize!=null){compteurAccessibiliteFontSize=cookieFontSize;var currentFontSize=$("#content").css("font-size");var currentFontSizeNum=parseFloat(currentFontSize,10);if(cookieFontSize>0){var newFontSize=currentFontSizeNum*Math.pow(1.2,compteurAccessibiliteFontSize);$("#content").css("font-size",newFontSize)}else{var newFontSize=
currentFontSizeNum*Math.pow(0.8,compteurAccessibiliteFontSize);$("#content").css("font-size",newFontSize)}compteurAccessibiliteFontSize=cookieFontSize}$(".resetFont").click(function(){$("#content").css("font-size",originalFontSize);compteurAccessibiliteFontSize=0;$.cookie("font-size-css",null)});$(".increaseFont").click(function(){if(compteurAccessibiliteFontSize<3){compteurAccessibiliteFontSize++;var currentFontSize=$("#content").css("font-size");var currentFontSizeNum=parseFloat(currentFontSize,
10);var newFontSize=currentFontSizeNum*1.2;$("#content").css("font-size",newFontSize);$.cookie("font-size-css",compteurAccessibiliteFontSize)}return false});$(".decreaseFont").click(function(){if(compteurAccessibiliteFontSize>-3){compteurAccessibiliteFontSize--;var currentFontSize=$("#content").css("font-size");var currentFontSizeNum=parseFloat(currentFontSize,10);var newFontSize=currentFontSizeNum*0.8;$("#content").css("font-size",newFontSize);$.cookie("font-size-css",compteurAccessibiliteFontSize)}return false});
var currZoom=$("body").css("zoom");if(currZoom=="normal")currZoom=1;if(navigator.appCodeName&&navigator.appCodeName=="Mozilla"){currZoom=$("body").css("-moz-transform");if(currZoom=="none")currZoom=1}$(".zoomIn").click(function(){if(currZoom<1.3){currZoom*=1.1;$("body").css("zoom",currZoom);$("body").css("-moz-transform","Scale("+currZoom+")");$("body").css("-moz-transform-origin","0 0")}});$(".zoomOff").click(function(){currZoom=1;$("body").css("zoom",currZoom);$("body").css("-moz-transform","Scale("+
currZoom+")");$("body").css("-moz-transform-origin","0 0")});$(".zoomOut").click(function(){if(currZoom>0.8){currZoom*=0.9;$("body").css("zoom",currZoom);$("body").css("-moz-transform","Scale("+currZoom+")");$("body").css("-moz-transform-origin","0 0")}});var cookieCss=$.cookie("alternative-css");if(cookieCss!=null)$("head").append('<link rel="stylesheet" href="'+cookieCss+'" type="text/css" id="alt_stylesheet"/>');$(".alternativeCss").click(function(){var valeurCookie=$(this).attr("data-css");var cookieCss=
$.cookie("alternative-css");if(cookieCss!=valeurCookie||valeurCookie!=""){$("#alt_stylesheet").remove();$("head").append('<link rel="stylesheet" href="'+valeurCookie+'" type="text/css" id="alt_stylesheet"/>');$.cookie("alternative-css",null);$.cookie("alternative-css",valeurCookie)}else{$("#alt_stylesheet").remove();$.cookie("alternative-css",null)}});$("li.carte_inactive a").tooltip();function startCookieWarning(){var cookieCookie=$.cookie("allow-cookie");var domaineRacineCookie=location.host;var tabDomaineCookie=
location.host.split(".");tabDomaineCookie.shift();if(tabDomaineCookie.length>=2)domaineRacineCookie=tabDomaineCookie.join(".");if(cookieCookie===null)$(".cookie-div").fadeIn();else $(".cookie-div").hide();$(".cookie-ok").click(function(){$.cookie("allow-cookie","oui",{expires:390,path:"/",domain:domaineRacineCookie});$(".cookie-div").fadeOut()});$(".cookie-savoirplus-affiche").click(function(){var url=$(".cookie-savoirplus-popup-content").data("content");$.ajax({url:url,dataType:"html"}).done(function(data){$(".cookie-savoirplus-popup-content").html(data);
$(".cookie-savoirplus-popup").fadeIn()})});$(".cookie-close").click(function(){$(".cookie-savoirplus-popup").fadeOut()})}startCookieWarning();try{$("#content").backtotop({topOffset:500,speed:2E3,bckTopLinkTitle:""})}catch(e){}});

/* /home/genius2/front/templates/min/js/241-raphael/2.1.0/raphael.js **************************************************************/ 
(function(glob){var version="0.3.4",has="hasOwnProperty",separator=/[\.\/]/,wildcard="*",fun=function(){},numsort=function(a,b){return a-b},current_event,stop,events={n:{}},eve=function(name,scope){var e=events,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,f=false,l,indexed=[],queue={},out=[],ce=current_event,errors=[];current_event=name;stop=0;for(var i=0,ii=listeners.length;i<ii;i++)if("zIndex"in listeners[i]){indexed.push(listeners[i].zIndex);if(listeners[i].zIndex<
0)queue[listeners[i].zIndex]=listeners[i]}indexed.sort(numsort);while(indexed[z]<0){l=queue[indexed[z++]];out.push(l.apply(scope,args));if(stop){stop=oldstop;return out}}for(i=0;i<ii;i++){l=listeners[i];if("zIndex"in l)if(l.zIndex==indexed[z]){out.push(l.apply(scope,args));if(stop)break;do{z++;l=queue[indexed[z]];l&&out.push(l.apply(scope,args));if(stop)break}while(l)}else queue[l.zIndex]=l;else{out.push(l.apply(scope,args));if(stop)break}}stop=oldstop;current_event=ce;return out.length?out:null};
eve.listeners=function(name){var names=name.split(separator),e=events,item,items,k,i,ii,j,jj,nes,es=[e],out=[];for(i=0,ii=names.length;i<ii;i++){nes=[];for(j=0,jj=es.length;j<jj;j++){e=es[j].n;items=[e[names[i]],e[wildcard]];k=2;while(k--){item=items[k];if(item){nes.push(item);out=out.concat(item.f||[])}}}es=nes}return out};eve.on=function(name,f){var names=name.split(separator),e=events;for(var i=0,ii=names.length;i<ii;i++){e=e.n;!e[names[i]]&&(e[names[i]]={n:{}});e=e[names[i]]}e.f=e.f||[];for(i=
0,ii=e.f.length;i<ii;i++)if(e.f[i]==f)return fun;e.f.push(f);return function(zIndex){if(+zIndex==+zIndex)f.zIndex=+zIndex}};eve.stop=function(){stop=1};eve.nt=function(subname){if(subname)return(new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)")).test(current_event);return current_event};eve.off=eve.unbind=function(name,f){var names=name.split(separator),e,key,splice,i,ii,j,jj,cur=[events];for(i=0,ii=names.length;i<ii;i++)for(j=0;j<cur.length;j+=splice.length-2){splice=[j,1];e=cur[j].n;if(names[i]!=
wildcard){if(e[names[i]])splice.push(e[names[i]])}else for(key in e)if(e[has](key))splice.push(e[key]);cur.splice.apply(cur,splice)}for(i=0,ii=cur.length;i<ii;i++){e=cur[i];while(e.n){if(f){if(e.f){for(j=0,jj=e.f.length;j<jj;j++)if(e.f[j]==f){e.f.splice(j,1);break}!e.f.length&&delete e.f}for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;for(j=0,jj=funcs.length;j<jj;j++)if(funcs[j]==f){funcs.splice(j,1);break}!funcs.length&&delete e.n[key].f}}else{delete e.f;for(key in e.n)if(e.n[has](key)&&
e.n[key].f)delete e.n[key].f}e=e.n}}};eve.once=function(name,f){var f2=function(){var res=f.apply(this,arguments);eve.unbind(name,f2);return res};return eve.on(name,f2)};eve.version=version;eve.toString=function(){return"You are running Eve "+version};typeof module!="undefined"&&module.exports?module.exports=eve:typeof define!="undefined"?define("eve",[],function(){return eve}):glob.eve=eve})(this);
(function(){function R(first){if(R.is(first,"function"))return loaded?first():eve.on("raphael.DOMload",first);else if(R.is(first,array))return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);else{var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}else return R._engine.create[apply](R,arguments)}}
R.version="2.1.0";R.eve=eve;var loaded,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,proto="prototype",has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={}},paperproto,appendChild="appendChild",apply="apply",concat="concat",supportsTouch="createTouch"in g.doc,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),
touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",toString="toString",fillString="fill",objectToString=Object.prototype.toString,paper={},push="push",ISURL=R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,colourRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
isnan={"NaN":1,"Infinity":1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,setAttribute="setAttribute",toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,
href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour",
"stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},whitespace=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,
radial_gradient=R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,eldata={},sortByKey=function(a,b){return a.key-b.key},sortByNumber=function(a,b){return toFloat(a)-toFloat(b)},fun=function(){},pipe=function(x){return x},rectPath=
R._rectPath=function(x,y,w,h,r){if(r)return[["M",x+r,y],["l",w-r*2,0],["a",r,r,0,0,1,r,r],["l",0,h-r*2],["a",r,r,0,0,1,-r,r],["l",r*2-w,0],["a",r,r,0,0,1,-r,-r],["l",0,r*2-h],["a",r,r,0,0,1,r,-r],["z"]];return[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){if(ry==null)ry=rx;return[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,
a.cy,a.r)},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix)return path;var x,y,i,j,ii,jj,pathi;path=path2curve(path);for(i=0,ii=path.length;i<ii;i++){pathi=path[i];for(j=
1,jj=pathi.length;j<jj;j+=2){x=matrix.x(pathi[j],pathi[j+1]);y=matrix.y(pathi[j],pathi[j+1]);pathi[j]=x;pathi[j+1]=y}}return path};R._g=g;R.type=g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(R.type=="VML"){var d=g.doc.createElement("div"),b;d.innerHTML='<v:shape adj="1"/>';b=d.firstChild;b.style.behavior="url(#default#VML)";if(!(b&&typeof b.adj=="object"))return R.type=E;d=null}R.svg=!(R.vml=R.type=="VML");R._Paper=Paper;
R.fn=paperproto=Paper.prototype=R.prototype;R._id=0;R._oid=0;R.is=function(o,type){type=lowerCase.call(type);if(type=="finite")return!isnan[has](+o);if(type=="array")return o instanceof Array;return type=="null"&&o===null||type==typeof o&&o!==null||type=="object"&&o===Object(o)||type=="array"&&Array.isArray&&Array.isArray(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type};function clone(obj){if(Object(obj)!==obj)return obj;var res=new obj.constructor;for(var key in obj)if(obj[has](key))res[key]=
clone(obj[key]);return res}R.angle=function(x1,y1,x2,y2,x3,y3){if(x3==null){var x=x1-x2,y=y1-y2;if(!x&&!y)return 0;return(180+math.atan2(-y,-x)*180/PI+360)%360}else return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3)};R.rad=function(deg){return deg%360*PI/180};R.deg=function(rad){return rad*180/PI%360};R.snapTo=function(values,value,tolerance){tolerance=R.is(tolerance,"finite")?tolerance:10;if(R.is(values,array)){var i=values.length;while(i--)if(abs(values[i]-value)<=tolerance)return values[i]}else{values=
+values;var rem=value%values;if(rem<tolerance)return value-rem;if(rem>values-tolerance)return value-rem+values}return value};var createUUID=R.createUUID=function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()}}(/[xy]/g,function(c){var r=math.random()*16|0,v=c=="x"?r:r&3|8;return v.toString(16)});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin);g.win=newwin;g.doc=g.win.document;if(R._engine.initWin)R._engine.initWin(g.win)};
var toHex=function(color){if(R.vml){var trim=/^\s+|\s+$/g;var bod;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>");docum.close();bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");value=(value&255)<<16|value&65280|(value&16711680)>>>16;return"#"+("000000"+value.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");
i.title="Rapha\u00ebl Colour Picker";i.style.display="none";g.doc.body.appendChild(i);toHex=cacher(function(color){i.style.color=color;return g.doc.defaultView.getComputedStyle(i,E).getPropertyValue("color")})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(g==null&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r){b=r.b;g=r.g;r=r.r}if(g==
null&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r;g=clr.g;b=clr.b}if(r>1||g>1||b>1){r/=255;g/=255;b/=255}return[r,g,b]},packageRGB=function(r,g,b,o){r*=255;g*=255;b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};R.is(o,"finite")&&(rgb.opacity=o);return rgb};R.color=function(clr){var rgb;if(R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr){rgb=R.hsb2rgb(clr);clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else if(R.is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr){rgb=R.hsl2rgb(clr);
clr.r=rgb.r;clr.g=rgb.g;clr.b=rgb.b;clr.hex=rgb.hex}else{if(R.is(clr,"string"))clr=R.getRGB(clr);if(R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr){rgb=R.rgb2hsl(clr);clr.h=rgb.h;clr.s=rgb.s;clr.l=rgb.l;rgb=R.rgb2hsb(clr);clr.v=rgb.b}else{clr={hex:"none"};clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1}}clr.toString=rgbtoString;return clr};R.hsb2rgb=function(h,s,v,o){if(this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h){v=h.b;s=h.s;h=h.h;o=h.o}h*=360;var R,G,B,X,C;h=h%360/60;C=v*s;X=C*(1-abs(h%2-1));
R=G=B=v-C;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.hsl2rgb=function(h,s,l,o){if(this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h){l=h.l;s=h.s;h=h.h}if(h>1||s>1||l>1){h/=360;s/=100;l/=100}h*=360;var R,G,B,X,C;h=h%360/60;C=2*s*(l<0.5?l:1-l);X=C*(1-abs(h%2-1));R=G=B=l-C/2;h=~~h;R+=[C,X,0,0,X,C][h];G+=[X,C,C,X,0,0][h];B+=[0,0,X,C,C,X][h];return packageRGB(R,G,B,o)};R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,V,C;V=mmax(r,
g,b);C=V-mmin(r,g,b);H=C==0?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;S=C==0?0:C/V;return{h:H,s:S,b:V,toString:hsbtoString}};R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b);r=b[0];g=b[1];b=b[2];var H,S,L,M,m,C;M=mmax(r,g,b);m=mmin(r,g,b);C=M-m;H=C==0?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4;H=(H+360)%6*60/360;L=(M+m)/2;S=C==0?0:L<0.5?C/(2*L):C/(2-2*L);return{h:H,s:S,l:L,toString:hsltoString}};R._path2string=function(){return this.join(",").replace(p2s,"$1")};function repush(array,
item){for(var i=0,ii=array.length;i<ii;i++)if(array[i]===item)return array.push(array.splice(i,1)[0])}function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("\u2400"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];if(cache[has](args)){repush(count,args);return postprocessor?postprocessor(cache[args]):cache[args]}count.length>=1E3&&delete cache[count.shift()];count.push(args);cache[args]=f[apply](scope,arg);return postprocessor?
postprocessor(cache[args]):cache[args]}return newf}var preload=R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em";img.onload=function(){f.call(this);this.onload=null;g.doc.body.removeChild(this)};img.onerror=function(){g.doc.body.removeChild(this)};g.doc.body.appendChild(img);img.src=src};function clrToString(){return this.hex}R.getRGB=cacher(function(colour){if(!colour||!!((colour=Str(colour)).indexOf("-")+1))return{r:-1,g:-1,
b:-1,hex:"none",error:1,toString:clrToString};if(colour=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};!(hsrg[has](colour.toLowerCase().substring(0,2))||colour.charAt()=="#")&&(colour=toHex(colour));var res,red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);if(rgb){if(rgb[2]){blue=toInt(rgb[2].substring(5),16);green=toInt(rgb[2].substring(3,5),16);red=toInt(rgb[2].substring(1,3),16)}if(rgb[3]){blue=toInt((t=rgb[3].charAt(3))+t,16);green=toInt((t=rgb[3].charAt(2))+t,16);
red=toInt((t=rgb[3].charAt(1))+t,16)}if(rgb[4]){values=rgb[4][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);rgb[1].toLowerCase().slice(0,4)=="rgba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100)}if(rgb[5]){values=rgb[5][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=
toFloat(values[1]);values[1].slice(-1)=="%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\u00b0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsba"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsb2rgb(red,green,blue,opacity)}if(rgb[6]){values=rgb[6][split](commaSpaces);red=toFloat(values[0]);values[0].slice(-1)=="%"&&(red*=2.55);green=toFloat(values[1]);values[1].slice(-1)==
"%"&&(green*=2.55);blue=toFloat(values[2]);values[2].slice(-1)=="%"&&(blue*=2.55);(values[0].slice(-3)=="deg"||values[0].slice(-1)=="\u00b0")&&(red/=360);rgb[1].toLowerCase().slice(0,4)=="hsla"&&(opacity=toFloat(values[3]));values[3]&&values[3].slice(-1)=="%"&&(opacity/=100);return R.hsl2rgb(red,green,blue,opacity)}rgb={r:red,g:green,b:blue,toString:clrToString};rgb.hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1);R.is(opacity,"finite")&&(rgb.opacity=opacity);return rgb}return{r:-1,
g:-1,b:-1,hex:"none",error:1,toString:clrToString}},R);R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex});R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex});R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|g<<8|r<<16).toString(16).slice(1)});R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||0.75},rgb=this.hsb2rgb(start.h,start.s,start.b);start.h+=0.075;if(start.h>1){start.h=0;start.s-=0.2;start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})}return rgb.hex};
R.getColor.reset=function(){delete this.start};function catmullRom2bezier(crp,z){var d=[];for(var i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];if(z)if(!i)p[0]={x:+crp[iLen-2],y:+crp[iLen-1]};else if(iLen-4==i)p[3]={x:+crp[0],y:+crp[1]};else{if(iLen-2==i){p[2]={x:+crp[0],y:+crp[1]};p[3]={x:+crp[2],y:+crp[3]}}}else if(iLen-4==i)p[3]=p[2];else if(!i)p[0]={x:+crp[i],y:+crp[i+1]};d.push(["C",(-p[0].x+
6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}R.parsePathString=function(pathString){if(!pathString)return null;var pth=paths(pathString);if(pth.arr)return pathClone(pth.arr);var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];if(R.is(pathString,array)&&R.is(pathString[0],array))data=pathClone(pathString);if(!data.length)Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();
c.replace(pathValues,function(a,b){b&&params.push(+b)});if(name=="m"&&params.length>2){data.push([b][concat](params.splice(0,2)));name="l";b=b=="m"?"l":"L"}if(name=="r")data.push([b][concat](params));else while(params.length>=paramCounts[name]){data.push([b][concat](params.splice(0,paramCounts[name])));if(!paramCounts[name])break}});data.toString=R._path2string;pth.arr=pathClone(data);return data};R.parseTransformString=cacher(function(TString){if(!TString)return null;var paramCounts={r:3,s:4,t:2,
m:6},data=[];if(R.is(TString,array)&&R.is(TString[0],array))data=pathClone(TString);if(!data.length)Str(TString).replace(tCommand,function(a,b,c){var params=[],name=lowerCase.call(b);c.replace(pathValues,function(a,b){b&&params.push(+b)});data.push([b][concat](params))});data.toString=R._path2string;return data});var paths=function(ps){var p=paths.ps=paths.ps||{};if(p[ps])p[ps].sleep=100;else p[ps]={sleep:100};setTimeout(function(){for(var key in p)if(p[has](key)&&key!=ps){p[key].sleep--;!p[key].sleep&&
delete p[key]}});return p[ps]};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+t12*3*t*c1x+t1*3*t*t*c2x+t3*p2x,y=t13*p1y+t12*3*t*c1y+t1*3*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-math.atan2(mx-nx,my-ny)*180/PI;(mx>
nx||my<ny)&&(alpha+=180);return{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}};R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){if(!R.is(p1x,"array"))p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y];var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}};R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2};R.isBBoxIntersect=function(bbox1,
bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)};function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*
p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){if(z==null)z=1;z=z>1?1:z<0?0:z;var z2=z/2,n=12,Tvalues=[-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],Cvalues=[0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],sum=0;for(var i=0;i<n;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,
y3,x4,y4,ll){if(ll<0||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)return;var t=1,step=t/2,t2=t-step,l,e=0.01;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);while(abs(l-ll)>e){step/=2;t2+=(l<ll?1:-1)*step;l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2)}return t2}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4))return;var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*
(y3-y4)-(y1-y2)*(x3-x4);if(!denominator)return;var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2))return;return{x:px,y:py}}function inter(bez1,bez2){return interHelper(bez1,bez2)}function interCount(bez1,bez2){return interHelper(bez1,bez2,1)}
function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2))return justCount?0:[];var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=~~(l1/5),n2=~~(l2/5),dots1=[],dots2=[],xy={},res=justCount?0:[];for(var i=0;i<n1+1;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;i<n2+1;i++){p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2));dots2.push({x:p.x,y:p.y,t:i/n2})}for(i=0;i<n1;i++)for(var j=
0;j<n2;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<0.001?"y":"x",cj=abs(dj1.x-dj.x)<0.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4))continue;xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);if(t1>=0&&t1<=1&&t2>=0&&t2<=1)if(justCount)res++;else res.push({x:is.x,y:is.y,t1:t1,t2:t2})}}return res}
R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)};R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)};function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1);path2=R._path2curve(path2);var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[];for(var i=0,ii=path1.length;i<ii;i++){var pi=path1[i];if(pi[0]=="M"){x1=x1m=pi[1];y1=y1m=pi[2]}else{if(pi[0]=="C"){bez1=[x1,y1].concat(pi.slice(1));x1=bez1[6];y1=bez1[7]}else{bez1=
[x1,y1,x1,y1,x1m,y1m,x1m,y1m];x1=x1m;y1=y1m}for(var j=0,jj=path2.length;j<jj;j++){var pj=path2[j];if(pj[0]=="M"){x2=x2m=pj[1];y2=y2m=pj[2]}else{if(pj[0]=="C"){bez2=[x2,y2].concat(pj.slice(1));x2=bez2[6];y2=bez2[7]}else{bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m];x2=x2m;y2=y2m}var intr=interHelper(bez1,bez2,justCount);if(justCount)res+=intr;else{for(var k=0,kk=intr.length;k<kk;k++){intr[k].segment1=i;intr[k].segment2=j;intr[k].bez1=bez1;intr[k].bez2=bez2}res=res.concat(intr)}}}}}return res}R.isPointInsidePath=
function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1};R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"Rapha\u00ebl: you are calling to method \u201c"+methodname+"\u201d of removed object",methodname)}};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox)return pth.bbox;if(!path)return{x:0,y:0,width:0,height:0,x2:0,y2:0};path=path2curve(path);var x=0,y=0,
X=[],Y=[],p;for(var i=0,ii=path.length;i<ii;i++){p=path[i];if(p[0]=="M"){x=p[1];y=p[2];X.push(x);Y.push(y)}else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x);Y=Y[concat](dim.min.y,dim.max.y);x=p[5];y=p[6]}}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:xmax-xmin,height:ymax-ymin};pth.bbox=clone(bb);return bb},pathClone=function(pathArray){var res=clone(pathArray);res.toString=
R._path2string;return res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);if(pth.rel)return pathClone(pth.rel);if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array))pathArray=R.parsePathString(pathArray);var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=pathArray[0][1];y=pathArray[0][2];mx=x;my=y;start++;res.push(["M",x,y])}for(var i=start,ii=pathArray.length;i<ii;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0])){r[0]=lowerCase.call(pa[0]);
switch(r[0]){case "a":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]-x).toFixed(3);r[7]=+(pa[7]-y).toFixed(3);break;case "v":r[1]=+(pa[1]-y).toFixed(3);break;case "m":mx=pa[1];my=pa[2];default:for(var j=1,jj=pa.length;j<jj;j++)r[j]=+(pa[j]-(j%2?x:y)).toFixed(3)}}else{r=res[i]=[];if(pa[0]=="m"){mx=pa[1]+x;my=pa[2]+y}for(var k=0,kk=pa.length;k<kk;k++)res[i][k]=pa[k]}var len=res[i].length;switch(res[i][0]){case "z":x=mx;y=my;break;case "h":x+=+res[i][len-1];break;case "v":y+=+res[i][len-
1];break;default:x+=+res[i][len-2];y+=+res[i][len-1]}}res.toString=R._path2string;pth.rel=pathClone(res);return res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs)return pathClone(pth.abs);if(!R.is(pathArray,array)||!R.is(pathArray&&pathArray[0],array))pathArray=R.parsePathString(pathArray);if(!pathArray||!pathArray.length)return[["M",0,0]];var res=[],x=0,y=0,mx=0,my=0,start=0;if(pathArray[0][0]=="M"){x=+pathArray[0][1];y=+pathArray[0][2];mx=x;my=y;start++;
res[0]=["M",x,y]}var crz=pathArray.length==3&&pathArray[0][0]=="M"&&pathArray[1][0].toUpperCase()=="R"&&pathArray[2][0].toUpperCase()=="Z";for(var r,pa,i=start,ii=pathArray.length;i<ii;i++){res.push(r=[]);pa=pathArray[i];if(pa[0]!=upperCase.call(pa[0])){r[0]=upperCase.call(pa[0]);switch(r[0]){case "A":r[1]=pa[1];r[2]=pa[2];r[3]=pa[3];r[4]=pa[4];r[5]=pa[5];r[6]=+(pa[6]+x);r[7]=+(pa[7]+y);break;case "V":r[1]=+pa[1]+y;break;case "H":r[1]=+pa[1]+x;break;case "R":var dots=[x,y][concat](pa.slice(1));for(var j=
2,jj=dots.length;j<jj;j++){dots[j]=+dots[j]+x;dots[++j]=+dots[j]+y}res.pop();res=res[concat](catmullRom2bezier(dots,crz));break;case "M":mx=+pa[1]+x;my=+pa[2]+y;default:for(j=1,jj=pa.length;j<jj;j++)r[j]=+pa[j]+(j%2?x:y)}}else if(pa[0]=="R"){dots=[x,y][concat](pa.slice(1));res.pop();res=res[concat](catmullRom2bezier(dots,crz));r=["R"][concat](pa.slice(-2))}else for(var k=0,kk=pa.length;k<kk;k++)r[k]=pa[k];switch(r[0]){case "Z":x=mx;y=my;break;case "H":x=r[1];break;case "V":y=r[1];break;case "M":mx=
r[r.length-2];my=r[r.length-1];default:x=r[r.length-2];y=r[r.length-1]}}res.toString=R._path2string;pth.abs=pathClone(res);return res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var _120=PI*120/180,rad=PI/180*(+angle||0),res=[],xy,rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),
Y=x*math.sin(rad)+y*math.cos(rad);return{x:X,y:Y}});if(!recursive){xy=rotate(x1,y1,-rad);x1=xy.x;y1=xy.y;xy=rotate(x2,y2,-rad);x2=xy.x;y2=xy.y;var cos=math.cos(PI/180*angle),sin=math.sin(PI/180*angle),x=(x1-x2)/2,y=(y1-y2)/2;var h=x*x/(rx*rx)+y*y/(ry*ry);if(h>1){h=math.sqrt(h);rx=h*rx;ry=h*ry}var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=
math.asin(((y2-cy)/ry).toFixed(9));f1=x1<cx?PI-f1:f1;f2=x2<cx?PI-f2:f2;f1<0&&(f1=PI*2+f1);f2<0&&(f2=PI*2+f2);if(sweep_flag&&f1>f2)f1=f1-PI*2;if(!sweep_flag&&f2>f1)f2=f2-PI*2}else{f1=recursive[0];f2=recursive[1];cx=recursive[2];cy=recursive[3]}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1);x2=cx+rx*math.cos(f2);y2=cy+ry*math.sin(f2);res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=
math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];m2[0]=2*m1[0]-m2[0];m2[1]=2*m1[1]-m2[1];if(recursive)return[m2,m3,m4][concat](res);else{res=[m2,m3,m4][concat](res).join()[split](",");var newres=[];for(var i=0,ii=res.length;i<ii;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres}},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;return{x:pow(t1,3)*
p1x+pow(t1,2)*3*t*c1x+t1*3*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+pow(t1,2)*3*t*c1y+t1*3*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var a=c2x-2*c1x+p1x-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x],dot;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=
findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}a=c2y-2*c1y+p1y-(p2y-2*c2y+c1y);b=2*(c1y-p1y)-2*(c2y-c1y);c=p1y-c1y;t1=(-b+math.sqrt(b*b-4*a*c))/2/a;t2=(-b-math.sqrt(b*b-4*a*c))/2/a;abs(t1)>"1e12"&&(t1=0.5);abs(t2)>"1e12"&&(t2=0.5);if(t1>0&&t1<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1);x.push(dot.x);y.push(dot.y)}if(t2>0&&t2<1){dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2);x.push(dot.x);y.push(dot.y)}return{min:{x:mmin[apply](0,x),y:mmin[apply](0,
y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve)return pathClone(pth.curve);var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=function(path,d){var nx,ny;if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y];!(path[0]in{T:1,Q:1})&&(d.qx=d.qy=null);switch(path[0]){case "M":d.X=path[1];
d.Y=path[2];break;case "A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case "S":nx=d.x+(d.x-(d.bx||d.x));ny=d.y+(d.y-(d.by||d.y));path=["C",nx,ny][concat](path.slice(1));break;case "T":d.qx=d.x+(d.x-(d.qx||d.x));d.qy=d.y+(d.y-(d.qy||d.y));path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case "Q":d.qx=path[1];d.qy=path[2];path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case "L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;
case "H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case "V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case "Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y));break}return path},fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();var pi=pp[i];while(pi.length)pp.splice(i++,0,["C"][concat](pi.splice(0,6)));pp.splice(i,1);ii=mmax(p.length,p2&&p2.length||0)}},fixM=function(path1,path2,a1,a2,i){if(path1&&path2&&path1[i][0]=="M"&&path2[i][0]!="M"){path2.splice(i,0,["M",a2.x,a2.y]);a1.bx=0;
a1.by=0;a1.x=path1[i][1];a1.y=path1[i][2];ii=mmax(p.length,p2&&p2.length||0)}};for(var i=0,ii=mmax(p.length,p2&&p2.length||0);i<ii;i++){p[i]=processPath(p[i],attrs);fixArc(p,i);p2&&(p2[i]=processPath(p2[i],attrs2));p2&&fixArc(p2,i);fixM(p,p2,attrs,attrs2,i);fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2];attrs.y=seg[seglen-1];attrs.bx=toFloat(seg[seglen-4])||attrs.x;attrs.by=toFloat(seg[seglen-3])||attrs.y;attrs2.bx=p2&&(toFloat(seg2[seg2len-
4])||attrs2.x);attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y);attrs2.x=p2&&seg2[seg2len-2];attrs2.y=p2&&seg2[seg2len-1]}if(!p2)pth.curve=pathClone(p);return p2?[p,p2]:p},null,pathClone),parseDots=R._parseDots=cacher(function(gradient){var dots=[];for(var i=0,ii=gradient.length;i<ii;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);dot.color=R.getRGB(par[1]);if(dot.color.error)return null;dot.color=dot.color.hex;par[2]&&(dot.offset=par[2]+"%");dots.push(dot)}for(i=1,ii=dots.length-1;i<
ii;i++)if(!dots[i].offset){var start=toFloat(dots[i-1].offset||0),end=0;for(var j=i+1;j<ii;j++)if(dots[j].offset){end=dots[j].offset;break}if(!end){end=100;j=ii}end=toFloat(end);var d=(end-start)/(j-i+1);for(;i<j;i++){start+=d;dots[i].offset=start+"%"}}return dots}),tear=R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev);el==paper.bottom&&(paper.bottom=el.next);el.next&&(el.next.prev=el.prev);el.prev&&(el.prev.next=el.next)},tofront=R._tofront=function(el,paper){if(paper.top===el)return;
tear(el,paper);el.next=null;el.prev=paper.top;paper.top.next=el;paper.top=el},toback=R._toback=function(el,paper){if(paper.bottom===el)return;tear(el,paper);el.next=paper.bottom;el.prev=null;paper.bottom.prev=el;paper.bottom=el},insertafter=R._insertafter=function(el,el2,paper){tear(el,paper);el2==paper.top&&(paper.top=el);el2.next&&(el2.next.prev=el);el.next=el2.next;el.prev=el2;el2.next=el},insertbefore=R._insertbefore=function(el,el2,paper){tear(el,paper);el2==paper.bottom&&(paper.bottom=el);el2.prev&&
(el2.prev.next=el);el.prev=el2.prev;el2.prev=el;el.next=el2},toMatrix=R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb}};extractTransform(el,transform);return el.matrix},transformPath=R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},extractTransform=R._extractTransform=function(el,tstr){if(tstr==null)return el._.transform;tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),
deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;_.transform=tdata||[];if(tdata)for(var i=0,ii=tdata.length;i<ii;i++){var t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0,x1,y1,x2,y2,bb;if(command=="t"&&tlen==3)if(absolute){x1=inver.x(0,0);y1=inver.y(0,0);x2=inver.x(t[1],t[2]);y2=inver.y(t[1],t[2]);m.translate(x2-x1,y2-y1)}else m.translate(t[1],t[2]);else if(command=="r")if(tlen==2){bb=bb||el.getBBox(1);m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/
2);deg+=t[1]}else{if(tlen==4){if(absolute){x2=inver.x(t[2],t[3]);y2=inver.y(t[2],t[3]);m.rotate(t[1],x2,y2)}else m.rotate(t[1],t[2],t[3]);deg+=t[1]}}else if(command=="s")if(tlen==2||tlen==3){bb=bb||el.getBBox(1);m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2);sx*=t[1];sy*=t[tlen-1]}else{if(tlen==5){if(absolute){x2=inver.x(t[3],t[4]);y2=inver.y(t[3],t[4]);m.scale(t[1],t[2],x2,y2)}else m.scale(t[1],t[2],t[3],t[4]);sx*=t[1];sy*=t[2]}}else if(command=="m"&&tlen==7)m.add(t[1],t[2],t[3],t[4],t[5],
t[6]);_.dirtyT=1;el.matrix=m}el.matrix=m;_.sx=sx;_.sy=sy;_.deg=deg;_.dx=dx=m.e;_.dy=dy=m.f;if(sx==1&&sy==1&&!deg&&_.bbox){_.bbox.x+=+dx;_.bbox.y+=+dy}else _.dirtyT=1},getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case "t":return[l,0,0];case "m":return[l,1,0,0,1,0,0];case "r":if(item.length==4)return[l,0,item[2],item[3]];else return[l,0];case "s":if(item.length==5)return[l,1,1,item[3],item[4]];else if(item.length==3)return[l,1,1];else return[l,1]}},equaliseTransform=R._equaliseTransform=
function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1);t1=R.parseTransformString(t1)||[];t2=R.parseTransformString(t2)||[];var maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0,j,jj,tt1,tt2;for(;i<maxlength;i++){tt1=t1[i]||getEmpty(t2[i]);tt2=t2[i]||getEmpty(tt1);if(tt1[0]!=tt2[0]||tt1[0].toLowerCase()=="r"&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||tt1[0].toLowerCase()=="s"&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))return;from[i]=[];to[i]=[];for(j=0,jj=mmax(tt1.length,tt2.length);j<jj;j++){j in tt1&&(from[i][j]=
tt1[j]);j in tt2&&(to[i][j]=tt2[j])}}return{from:from,to:to}};R._getContainer=function(x,y,w,h){var container;container=h==null&&!R.is(x,"object")?g.doc.getElementById(x):x;if(container==null)return;if(container.tagName)if(y==null)return{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight};else return{container:container,width:y,height:w};return{container:1,x:x,y:y,width:w,height:h}};R.pathToRelative=pathToRelative;
R._engine={};R.path2curve=path2curve;R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)};function Matrix(a,b,c,d,e,f){if(a!=null){this.a=+a;this.b=+b;this.c=+c;this.d=+d;this.e=+e;this.f=+f}else{this.a=1;this.b=0;this.c=0;this.d=1;this.e=0;this.f=0}}(function(matrixproto){matrixproto.add=function(a,b,c,d,e,f){var out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]],x,y,z,res;if(a&&a instanceof Matrix)matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],
[0,0,1]];for(x=0;x<3;x++)for(y=0;y<3;y++){res=0;for(z=0;z<3;z++)res+=m[x][z]*matrix[z][y];out[x][y]=res}this.a=out[0][0];this.b=out[1][0];this.c=out[0][1];this.d=out[1][1];this.e=out[0][2];this.f=out[1][2]};matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)};matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)};matrixproto.translate=function(x,y){this.add(1,
0,0,1,x,y)};matrixproto.scale=function(x,y,cx,cy){y==null&&(y=x);(cx||cy)&&this.add(1,0,0,1,cx,cy);this.add(x,0,0,y,0,0);(cx||cy)&&this.add(1,0,0,1,-cx,-cy)};matrixproto.rotate=function(a,x,y){a=R.rad(a);x=x||0;y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y);this.add(1,0,0,1,-x,-y)};matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e};matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f};matrixproto.get=function(i){return+this[Str.fromCharCode(97+
i)].toFixed(4)};matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};matrixproto.offset=function(){return[this.e.toFixed(4),
this.f.toFixed(4)]};function norm(a){return a[0]*a[0]+a[1]*a[1]}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag);a[1]&&(a[1]/=mag)}matrixproto.split=function(){var out={};out.dx=this.e;out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0]));normalize(row[0]);out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1];row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear];out.scaley=math.sqrt(norm(row[1]));normalize(row[1]);out.shear/=out.scaley;
var sin=-row[0][1],cos=row[1][1];if(cos<0){out.rotate=R.deg(math.acos(cos));if(sin<0)out.rotate=360-out.rotate}else out.rotate=R.deg(math.asin(sin));out.isSimple=!+out.shear.toFixed(9)&&(out.scalex.toFixed(9)==out.scaley.toFixed(9)||!out.rotate);out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate;out.noRotation=!+out.shear.toFixed(9)&&!out.rotate;return out};matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();if(s.isSimple){s.scalex=
+s.scalex.toFixed(4);s.scaley=+s.scaley.toFixed(4);s.rotate=+s.rotate.toFixed(4);return(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(s.scalex!=1||s.scaley!=1?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate,0,0]:E)}else return"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);if(navigator.vendor=="Apple Computer, Inc."&&(version&&version[1]<4||navigator.platform.slice(0,
2)=="iP")||navigator.vendor=="Google Inc."&&version&&version[1]<8)paperproto.safari=function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})};else paperproto.safari=fun;var preventDefault=function(){this.returnValue=false},preventTouch=function(){return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=true},stopTouch=function(){return this.originalEvent.stopPropagation()},addEvent=function(){if(g.doc.addEventListener)return function(obj,
type,fn,element){var realName=supportsTouch&&touchMap[type]?touchMap[type]:type,f=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;if(supportsTouch&&touchMap[has](type))for(var i=0,ii=e.targetTouches&&e.targetTouches.length;i<ii;i++)if(e.targetTouches[i].target==obj){var olde=e;e=e.targetTouches[i];e.originalEvent=olde;e.preventDefault=preventTouch;e.stopPropagation=
stopTouch;break}return fn.call(element,e,x,y)};obj.addEventListener(realName,f,false);return function(){obj.removeEventListener(realName,f,false);return true}};else if(g.doc.attachEvent)return function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;e.preventDefault=e.preventDefault||preventDefault;e.stopPropagation=e.stopPropagation||
stopPropagation;return fn.call(element,e,x,y)};obj.attachEvent("on"+type,f);var detacher=function(){obj.detachEvent("on"+type,f);return true};return detacher}}(),drag=[],dragMove=function(e){var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,dragi,j=drag.length;while(j--){dragi=drag[j];if(supportsTouch){var i=e.touches.length,touch;while(i--){touch=e.touches[i];if(touch.identifier==dragi.el._drag.id){x=
touch.clientX;y=touch.clientY;(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var node=dragi.el.node,o,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node);node.style.display="none";o=dragi.el.paper.getElementByPoint(x,y);node.style.display=display;g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node));o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o);x+=scrollX;y+=scrollY;eve("raphael.drag.move."+
dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);var i=drag.length,dragi;while(i--){dragi=drag[i];dragi.el._drag={};eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e)}drag=[]},elproto=R.el={};for(var i=events.length;i--;)(function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){if(R.is(fn,"function")){this.events=this.events||[];this.events.push({name:eventName,
f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})}return this};R["un"+eventName]=elproto["un"+eventName]=function(fn){var events=this.events||[],l=events.length;while(l--)if(events[l].name==eventName&&events[l].f==fn){events[l].unbind();events.splice(l,1);!events.length&&delete this.events;return this}return this}})(events[i]);elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(arguments.length==1){if(R.is(key,"object")){for(var i in key)if(key[has](i))this.data(i,
key[i]);return this}eve("raphael.data.get."+this.id,this,data[key],key);return data[key]}data[key]=value;eve("raphael.data.set."+this.id,this,value,key);return this};elproto.removeData=function(key){if(key==null)eldata[this.id]={};else eldata[this.id]&&delete eldata[this.id][key];return this};elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in)};elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};
var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;this._drag.x=e.clientX+scrollX;this._drag.y=e.clientY+scrollY;this._drag.id=e.identifier;!drag.length&&R.mousemove(dragMove).mouseup(dragUp);drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope});
onstart&&eve.on("raphael.drag.start."+this.id,onstart);onmove&&eve.on("raphael.drag.move."+this.id,onmove);onend&&eve.on("raphael.drag.end."+this.id,onend);eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)}this._drag={};draggable.push({el:this,start:start});this.mousedown(start);return this};elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)};elproto.undrag=function(){var i=draggable.length;
while(i--)if(draggable[i].el==this){this.unmousedown(draggable[i].start);draggable.splice(i,1);eve.unbind("raphael.drag.*."+this.id)}!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp)};paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);this.__set__&&this.__set__.push(out);return out};paperproto.ellipse=function(x,y,rx,ry){var out=
R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);this.__set__&&this.__set__.push(out);return out};paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);this.__set__&&this.__set__.push(out);return out};paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);this.__set__&&this.__set__.push(out);return out};paperproto.text=function(x,
y,text){var out=R._engine.text(this,x||0,y||0,Str(text));this.__set__&&this.__set__.push(out);return out};paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);this.__set__&&this.__set__.push(out);return out};paperproto.setStart=function(set){this.__set__=set||this.set()};paperproto.setFinish=function(set){var out=this.__set__;delete this.__set__;return out};paperproto.setSize=function(width,
height){return R._engine.setSize.call(this,width,height)};paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)};paperproto.top=paperproto.bottom=null;paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-
clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;return{y:top,x:left}};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&target.tagName=="svg"){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x;sr.y=y-so.y;sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);if(hits.length)target=hits[hits.length-1]}if(!target)return null;while(target.parentNode&&target!=svg.parentNode&&
!target.raphael)target=target.parentNode;target==paper.canvas.parentNode&&(target=svg);target=target&&target.raphael?paper.getById(target.raphaelid):null;return target};paperproto.getById=function(id){var bot=this.bottom;while(bot){if(bot.id==id)return bot;bot=bot.next}return null};paperproto.forEach=function(callback,thisArg){var bot=this.bottom;while(bot){if(callback.call(thisArg,bot)===false)return this;bot=bot.next}return this};paperproto.getElementsByPoint=function(x,y){var set=this.set();this.forEach(function(el){if(el.isPointInside(x,
y))set.push(el)});return set};function x_y(){return this.x+S+this.y}function x_y_w_h(){return this.x+S+this.y+S+this.width+" \u00d7 "+this.height}elproto.isPointInside=function(x,y){var rp=this.realPath=this.realPath||getPath[this.type](this);return R.isPointInsidePath(rp,x,y)};elproto.getBBox=function(isWithoutTransform){if(this.removed)return{};var _=this._;if(isWithoutTransform){if(_.dirty||!_.bboxwt){this.realPath=getPath[this.type](this);_.bboxwt=pathDimensions(this.realPath);_.bboxwt.toString=
x_y_w_h;_.dirty=0}return _.bboxwt}if(_.dirty||_.dirtyT||!_.bbox){if(_.dirty||!this.realPath){_.bboxwt=0;this.realPath=getPath[this.type](this)}_.bbox=pathDimensions(mapPath(this.realPath,this.matrix));_.bbox.toString=x_y_w_h;_.dirty=_.dirtyT=0}return _.bbox};elproto.clone=function(){if(this.removed)return null;var out=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(out);return out};elproto.glow=function(glow){if(this.type=="text")return null;glow=glow||{};var s={width:(glow.width||
10)+(+this.attr("stroke-width")||1),fill:glow.fill||false,opacity:glow.opacity||0.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;i<c+1;i++)out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));
return out.insertBefore(this).translate(s.offsetx,s.offsety)};var curveslengths={},getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){if(length==null)return bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y);else return R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);var x,y,p,l,sp="",subpaths={},point,len=0;for(var i=0,ii=path.length;i<
ii;i++){p=path[i];if(p[0]=="M"){x=+p[1];y=+p[2]}else{l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);if(len+l>length){if(subpath&&!subpaths.start){point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y];if(onlystart)return sp;subpaths.start=sp;sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join();len+=l;x=+p[5];y=+p[6];continue}if(!istotal&&!subpath){point=
getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len);return{x:point.x,y:point.y,alpha:point.alpha}}}len+=l;x=+p[5];y=+p[6]}sp+=p.shift()+p}subpaths.end=sp;point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1);point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha});return point}};var getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength;R.getPointAtLength=
getPointAtLength;R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1E-6)return getSubpathsAtLength(path,from).end;var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a};elproto.getTotalLength=function(){if(this.type!="path")return;if(this.node.getTotalLength)return this.node.getTotalLength();return getTotalLength(this.attrs.path)};elproto.getPointAtLength=function(length){if(this.type!="path")return;return getPointAtLength(this.attrs.path,length)};elproto.getSubpath=
function(from,to){if(this.type!="path")return;return R.getSubpath(this.attrs.path,from,to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,0.48)},"<>":function(n){var q=0.48-n/1.04,Q=math.sqrt(0.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(x<0?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(y<0?-1:1),t=X+Y+0.5;return(1-t)*3*t*t+t*t*t},backIn:function(n){var s=1.70158;return n*n*((s+1)*n-s)},backOut:function(n){n=n-1;var s=1.70158;return n*n*((s+1)*n+s)+
1},elastic:function(n){if(n==!!n)return n;return pow(2,-10*n)*math.sin((n-0.075)*2*PI/0.3)+1},bounce:function(n){var s=7.5625,p=2.75,l;if(n<1/p)l=s*n*n;else if(n<2/p){n-=1.5/p;l=s*n*n+0.75}else if(n<2.5/p){n-=2.25/p;l=s*n*n+0.9375}else{n-=2.625/p;l=s*n*n+0.984375}return l}};ef.easeIn=ef["ease-in"]=ef["<"];ef.easeOut=ef["ease-out"]=ef[">"];ef.easeInOut=ef["ease-in-out"]=ef["<>"];ef["back-in"]=ef.backIn;ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)},animation=function(){var Now=+new Date,l=0;for(;l<animationElements.length;l++){var e=animationElements[l];if(e.el.removed||e.paused)continue;var time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,t=e.t,that=e.el,set={},now,init={},key;if(e.initstatus){time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*
ms;e.status=e.initstatus;delete e.initstatus;e.stop&&animationElements.splice(l--,1)}else e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top;if(time<0)continue;if(time<ms){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case "colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+
")";break;case "path":now=[];for(var i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;j<jj;j++)now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];now[i]=now[i].join(S)}now=now.join(S);break;case "transform":if(diff[attr].real){now=[];for(i=0,ii=from[attr].length;i<ii;i++){now[i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++)now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j]}}else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i]};
now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case "csv":if(attr=="clip-rect"){now=[];i=4;while(i--)now[i]=+from[attr][i]+pos*ms*diff[attr][i]}break;default:var from2=[][concat](from[attr]);now=[];i=that.paper.customAttributes[attr].length;while(i--)now[i]=+from2[i]+pos*ms*diff[attr][i];break}set[attr]=now}that.attr(set);(function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})})(that.id,that,e.anim)}else{(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+
el.id,el,a);eve("raphael.anim.finish."+el.id,el,a);R.is(f,"function")&&f.call(el)})})(e.callback,that,e.anim);that.attr(to);animationElements.splice(l--,1);if(e.repeat>1&&!e.next){for(key in to)if(to[has](key))init[key]=e.totalOrigin[key];e.el.attr(init);runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}if(e.next&&!e.stop)runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)}}R.svg&&that&&that.paper&&that.paper.safari();animationElements.length&&requestAnimFrame(animation)},
upto255=function(color){return color>255?255:color<0?0:color};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);return element}var a=params instanceof Animation?params:R.animation(params,ms,easing,callback),x,y;runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;i<ii;i++)if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;
break}return element};function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;i<8;i++){x2=sampleCurveX(t2)-x;if(abs(x2)<epsilon)return t2;d2=(3*ax*t2+2*bx)*t2+cx;if(abs(d2)<1E-6)break;t2=t2-x2/d2}t0=0;t1=1;t2=x;if(t2<t0)return t0;
if(t2>t1)return t1;while(t0<t1){x2=sampleCurveX(t2);if(abs(x2-x)<epsilon)return t2;if(x>x2)t0=t2;else t1=t2;t2=(t1-t0)/2+t0}return t2}return solve(t,1/(200*duration))}elproto.onAnimation=function(f){f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id);return this};function Animation(anim,ms){var percents=[],newAnim={};this.ms=ms;this.times=1;if(anim){for(var attr in anim)if(anim[has](attr)){newAnim[toFloat(attr)]=anim[attr];percents.push(toFloat(attr))}percents.sort(sortByNumber)}this.anim=
newAnim;this.top=percents[percents.length-1];this.percents=percents}Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);a.times=this.times;a.del=+delay||0;return a};Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);a.del=this.del;a.times=math.floor(mmax(times,0))||1;return a};function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);var params,isInAnim,isInAnimSet,percents=[],next,prev,timestamp,ms=anim.ms,
from={},to={},diff={};if(status)for(i=0,ii=animationElements.length;i<ii;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){if(e.percent!=percent){animationElements.splice(i,1);isInAnimSet=1}else isInAnim=e;element.attr(e.totalOrigin);break}}else status=+to;for(var i=0,ii=anim.percents.length;i<ii;i++)if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i];prev=anim.percents[i-1]||0;ms=ms/anim.top*(percent-prev);next=anim.percents[i+1];params=anim.anim[percent];
break}else if(status)element.attr(anim.anim[anim.percents[i]]);if(!params)return;if(!isInAnim){for(var attr in params)if(params[has](attr))if(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)){from[attr]=element.attr(attr);from[attr]==null&&(from[attr]=availableAttrs[attr]);to[attr]=params[attr];switch(availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case "colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-
from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case "path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];from[attr]=pathes[0];diff[attr]=[];for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms}break;case "transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq){from[attr]=eq.from;to[attr]=eq.to;diff[attr]=[];diff[attr].real=true;
for(i=0,ii=from[attr].length;i<ii;i++){diff[attr][i]=[from[attr][i][0]];for(j=1,jj=from[attr][i].length;j<jj;j++)diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms}}else{var m=element.matrix||new Matrix,to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f];extractTransform(to2,to[attr]);to[attr]=to2._.transform;diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-
m.f)/ms]}break;case "csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if(attr=="clip-rect"){from[attr]=from2;diff[attr]=[];i=from2.length;while(i--)diff[attr][i]=(values[i]-from[attr][i])/ms}to[attr]=values;break;default:values=[][concat](params[attr]);from2=[][concat](from[attr]);diff[attr]=[];i=element.paper.customAttributes[attr].length;while(i--)diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms;break}}var easing=params.easing,easyeasy=R.easing_formulas[easing];
if(!easyeasy){easyeasy=Str(easing).match(bezierrg);if(easyeasy&&easyeasy.length==5){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)}}else easyeasy=pipe}timestamp=params.start||anim.start||+new Date;e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:false,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,
origin:element.attr(),totalOrigin:totalOrigin};animationElements.push(e);if(status&&!isInAnim&&!isInAnimSet){e.stop=true;e.start=new Date-ms*status;if(animationElements.length==1)return animation()}if(isInAnimSet)e.start=new Date-e.ms*status;animationElements.length==1&&requestAnimFrame(animation)}else{isInAnim.initstatus=status;isInAnim.start=new Date-isInAnim.ms*status}eve("raphael.anim.start."+element.id,element,anim)}R.animation=function(params,ms,easing,callback){if(params instanceof Animation)return params;
if(R.is(easing,"function")||!easing){callback=callback||easing||null;easing=null}params=Object(params);ms=+ms||0;var p={},json,attr;for(attr in params)if(params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr){json=true;p[attr]=params[attr]}if(!json)return new Animation(params,ms);else{easing&&(p.easing=easing);callback&&(p.callback=callback);return new Animation({100:p},ms)}};elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed){callback&&callback.call(element);
return element}var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(anim,element,anim.percents[0],null,element.attr());return element};elproto.setTime=function(anim,value){if(anim&&value!=null)this.status(anim,mmin(value,anim.ms)/anim.ms);return this};elproto.status=function(anim,value){var out=[],i=0,len,e;if(value!=null){runAnimation(anim,this,-1,mmin(value,1));return this}else{len=animationElements.length;for(;i<len;i++){e=animationElements[i];if(e.el.id==
this.id&&(!anim||e.anim==anim)){if(anim)return e.status;out.push({anim:e.anim,status:e.status})}}if(anim)return 0;return out}};elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim))if(eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==false)animationElements[i].paused=true;return this};elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==
this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];if(eve("raphael.anim.resume."+this.id,this,e.anim)!==false){delete e.paused;this.status(e.anim,e.status)}}return this};elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim))if(eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==false)animationElements.splice(i--,1);return this};function stopAnimation(paper){for(var i=
0;i<animationElements.length;i++)if(animationElements[i].el.paper==paper)animationElements.splice(i--,1)}eve.on("raphael.remove",stopAnimation);eve.on("raphael.clear",stopAnimation);elproto.toString=function(){return"Rapha\u00ebl\u2019s object"};var Set=function(items){this.items=[];this.length=0;this.type="set";if(items)for(var i=0,ii=items.length;i<ii;i++)if(items[i]&&(items[i].constructor==elproto.constructor||items[i].constructor==Set)){this[this.items.length]=this.items[this.items.length]=items[i];
this.length++}},setproto=Set.prototype;setproto.push=function(){var item,len;for(var i=0,ii=arguments.length;i<ii;i++){item=arguments[i];if(item&&(item.constructor==elproto.constructor||item.constructor==Set)){len=this.items.length;this[len]=this.items[len]=item;this.length++}}return this};setproto.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;i<ii;i++)if(callback.call(thisArg,this.items[i],
i)===false)return this;return this};for(var method in elproto)if(elproto[has](method))setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}}(method);setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object"))for(var j=0,jj=name.length;j<jj;j++)this.items[j].attr(name[j]);else for(var i=0,ii=this.items.length;i<ii;i++)this.items[i].attr(name,value);return this};setproto.clear=function(){while(this.length)this.pop()};
setproto.splice=function(index,count,insertion){index=index<0?mmax(this.length+index,0):index;count=mmax(0,mmin(this.length-index,count));var tail=[],todel=[],args=[],i;for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;i<count;i++)todel.push(this[index+i]);for(;i<this.length-index;i++)tail.push(this[index+i]);var arglen=args.length;for(i=0;i<arglen+tail.length;i++)this.items[index+i]=this[index+i]=i<arglen?args[i]:tail[i-arglen];i=this.items.length=this.length-=count-arglen;while(this[i])delete this[i++];
return new Set(todel)};setproto.exclude=function(el){for(var i=0,ii=this.length;i<ii;i++)if(this[i]==el){this.splice(i,1);return true}};setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var len=this.items.length,i=len,item,set=this,collector;if(!len)return this;callback&&(collector=function(){!--len&&callback.call(set)});easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);item=this.items[--i].animate(anim);
while(i--)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim);return this};setproto.insertAfter=function(el){var i=this.items.length;while(i--)this.items[i].insertAfter(el);return this};setproto.getBBox=function(){var x=[],y=[],x2=[],y2=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();x.push(box.x);y.push(box.y);x2.push(box.x+box.width);y2.push(box.y+box.height)}x=mmin[apply](0,x);y=mmin[apply](0,y);x2=mmax[apply](0,x2);y2=
mmax[apply](0,y2);return{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y}};setproto.clone=function(s){s=new Set;for(var i=0,ii=this.items.length;i<ii;i++)s.push(this.items[i].clone());return s};setproto.toString=function(){return"Rapha\u00ebl\u2018s set"};R.registerFont=function(font){if(!font.face)return font;this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)if(font.face[has](prop))fontcopy.face[prop]=font.face[prop];if(this.fonts[family])this.fonts[family].push(fontcopy);
else this.fonts[family]=[fontcopy];if(!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"};if(path.k)for(var k in path.k)if(path[has](k))fontcopy.glyphs[glyph].k[k]=path.k[k]}}return font};paperproto.getFont=function(family,weight,
style,stretch){stretch=stretch||"normal";style=style||"normal";weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400;if(!R.fonts)return;var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName))if(name.test(fontName)){font=R.fonts[fontName];break}}var thefont;if(font)for(var i=0,ii=font.length;i<ii;i++){thefont=font[i];if(thefont.face["font-weight"]==weight&&(thefont.face["font-style"]==
style||!thefont.face["font-style"])&&thefont.face["font-stretch"]==stretch)break}return thefont};paperproto.print=function(x,y,string,font,size,origin,letter_spacing){origin=origin||"middle";letter_spacing=mmax(mmin(letter_spacing||0,1),-1);var letters=Str(string)[split](E),shift=0,notfirst=0,path=E,scale;R.is(font,string)&&(font=this.getFont(font));if(font){scale=(size||16)/font.face["units-per-em"];var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+
(origin=="baseline"?lineHeight+ +font.face.descent:lineHeight/2);for(var i=0,ii=letters.length;i<ii;i++){if(letters[i]=="\n"){shift=0;curr=0;notfirst=0;shifty+=lineHeight}else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+font.w*letter_spacing:0;notfirst=1}if(curr&&curr.d)path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale])}}return this.path(path).attr({fill:"#000",
stroke:"none"})};paperproto.add=function(json){if(R.is(json,"array")){var res=this.set(),i=0,ii=json.length,j;for(;i<ii;i++){j=json[i]||{};elements[has](j.type)&&res.push(this[j.type]().attr(j))}}return res};R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return args[++i]==null?E:args[i]}));return token||E};R.fullfill=function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=
/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName;if(res){if(name in res)res=res[name];typeof res=="function"&&isFunc&&(res=res())}});res=(res==null||res==obj?all:res)+"";return res};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj)})}}();R.ninja=function(){oldRaphael.was?g.win.Raphael=oldRaphael.is:
delete Raphael;return R};R.st=setproto;(function(doc,loaded,f){if(doc.readyState==null&&doc.addEventListener){doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,false);doc.readyState="complete"},false);doc.readyState="loading"}function isLoaded(){/in/.test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}isLoaded()})(document,"DOMContentLoaded");oldRaphael.was?g.win.Raphael=R:Raphael=R;eve.on("raphael.DOMload",function(){loaded=true})})();
window.Raphael.svg&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ";var xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};R.toString=function(){return"Your browser supports SVG.\nYou are running Rapha\u00ebl "+
this.version};var $=function(el,attr){if(attr){if(typeof el=="string")el=$(el);for(var key in attr)if(attr[has](key))if(key.substring(0,6)=="xlink:")el.setAttributeNS(xlink,key.substring(6),Str(attr[key]));else el.setAttribute(key,Str(attr[key]))}else{el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el);el.style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)")}return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=0.5,fy=0.5,o=element.node,SVG=
element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){type="radial";if(_fx&&_fy){fx=toFloat(_fx);fy=toFloat(_fy);var dir=(fy>0.5)*2-1;pow(fx-0.5,2)+pow(fy-0.5,2)>0.25&&(fy=math.sqrt(0.25-pow(fx-0.5,2))*dir+0.5)&&fy!=0.5&&(fy=fy.toFixed(5)-1E-5*dir)}return E});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle))return null;var vector=[0,0,math.cos(R.rad(angle)),
math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max;vector[3]*=max;if(vector[2]<0){vector[0]=-vector[2];vector[2]=0}if(vector[3]<0){vector[1]=-vector[3];vector[3]=0}}var dots=R._parseDots(gradient);if(!dots)return null;id=id.replace(/[\(\)\s,\xb0#]/g,"_");if(element.gradient&&id!=element.gradient.id){SVG.defs.removeChild(element.gradient);delete element.gradient}if(!element.gradient){el=$(type+"Gradient",{id:id});element.gradient=el;$(el,type=="radial"?{fx:fx,fy:fy}:
{x1:vector[0],y1:vector[1],x2:vector[2],y2:vector[3],gradientTransform:element.matrix.invert()});SVG.defs.appendChild(el);for(var i=0,ii=dots.length;i<ii;i++)el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}$(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1});s.fill=E;s.opacity=1;s.fillOpacity=1;return 1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+
")"})},addArrow=function(o,value,isEnd){if(o.type=="path"){var values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,stroke=attrs["stroke-width"],i=values.length,type="classic",from,to,dx,refX,attr,w=3,h=3,t=5;while(i--)switch(values[i]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":type=values[i];break;case "wide":h=5;break;case "narrow":h=2;break;case "long":w=5;break;case "short":w=2;break}if(type=="open"){w+=2;h+=
2;t+=2;dx=1;refX=isEnd?4:1;attr={fill:"none",stroke:attrs.stroke}}else{refX=dx=w/2;attr={fill:attrs.stroke,stroke:"none"}}if(o._.arrows)if(isEnd){o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--;o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--}else{o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--;o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--}else o._.arrows={};if(type!="none"){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;if(!R._g.doc.getElementById(pathId)){p.defs.appendChild($($("path"),
{"stroke-linecap":"round",d:markers[type],id:pathId}));markerCounter[pathId]=1}else markerCounter[pathId]++;var marker=R._g.doc.getElementById(markerId),use;if(!marker){marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2});use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)});marker.appendChild(use);p.defs.appendChild(marker);markerCounter[markerId]=
1}else{markerCounter[markerId]++;use=marker.getElementsByTagName("use")[0]}$(use,attr);var delta=dx*(type!="diamond"&&type!="oval");if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-delta*stroke}else{from=delta*stroke;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)}attr={};attr["marker-"+se]="url(#"+markerId+")";if(to||from)attr.d=Raphael.getSubpath(attrs.path,from,to);$(node,attr);o._.arrows[se+"Path"]=pathId;o._.arrows[se+"Marker"]=markerId;o._.arrows[se+"dx"]=
delta;o._.arrows[se+"Type"]=type;o._.arrows[se+"String"]=value}else{if(isEnd){from=o._.arrows.startdx*stroke||0;to=R.getTotalLength(attrs.path)-from}else{from=0;to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)}o._.arrows[se+"Path"]&&$(node,{d:Raphael.getSubpath(attrs.path,from,to)});delete o._.arrows[se+"Path"];delete o._.arrows[se+"Marker"];delete o._.arrows[se+"dx"];delete o._.arrows[se+"Type"];delete o._.arrows[se+"String"]}for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=
R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}},dasharray={"":[0],"none":[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},addDashes=function(o,value,params){value=dasharray[Str(value).toLowerCase()];if(value){var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;while(i--)dashes[i]=
value[i]*width+(i%2?1:-1)*butt;$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;node.style.visibility="hidden";for(var att in params)if(params[has](att)){if(!R._availableAttrs[has](att))continue;var value=params[att];attrs[att]=value;switch(att){case "blur":o.blur(value);break;case "href":case "title":case "target":var pn=node.parentNode;if(pn.tagName.toLowerCase()!="a"){var hl=$("a");pn.insertBefore(hl,node);
hl.appendChild(node);pn=hl}if(att=="target")pn.setAttributeNS(xlink,"show",value=="blank"?"new":value);else pn.setAttributeNS(xlink,att,value);break;case "cursor":node.style.cursor=value;break;case "transform":o.transform(value);break;case "arrow-start":addArrow(o,value);break;case "arrow-end":addArrow(o,value,1);break;case "clip-rect":var rect=Str(value).split(separator);if(rect.length==4){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=
R.createUUID();$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]});el.appendChild(rc);o.paper.defs.appendChild(el);$(node,{"clip-path":"url(#"+el.id+")"});o.clip=rc}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip);$(node,{"clip-path":E});delete o.clip}}break;case "path":if(o.type=="path"){$(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"});o._.dirty=1;if(o._.arrows){"startString"in
o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)}}break;case "width":node.setAttribute(att,value);o._.dirty=1;if(attrs.fx){att="x";value=attrs.x}else break;case "x":if(attrs.fx)value=-attrs.x-(attrs.width||0);case "rx":if(att=="rx"&&o.type=="rect")break;case "cx":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case "height":node.setAttribute(att,value);o._.dirty=1;if(attrs.fy){att="y";value=attrs.y}else break;case "y":if(attrs.fy)value=
-attrs.y-(attrs.height||0);case "ry":if(att=="ry"&&o.type=="rect")break;case "cy":node.setAttribute(att,value);o.pattern&&updatePosition(o);o._.dirty=1;break;case "r":if(o.type=="rect")$(node,{rx:value,ry:value});else node.setAttribute(att,value);o._.dirty=1;break;case "src":if(o.type=="image")node.setAttributeNS(xlink,"href",value);break;case "stroke-width":if(o._.sx!=1||o._.sy!=1)value/=mmax(abs(o._.sx),abs(o._.sy))||1;if(o.paper._vbSize)value*=o.paper._vbSize;node.setAttribute(att,value);if(attrs["stroke-dasharray"])addDashes(o,
attrs["stroke-dasharray"],params);if(o._.arrows){"startString"in o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)}break;case "stroke-dasharray":addDashes(o,value,params);break;case "fill":var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID();$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});$(ig,{x:0,y:0,"xlink:href":isURL[1]});el.appendChild(ig);(function(el){R._preload(isURL[1],
function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h});$(ig,{width:w,height:h});o.paper.safari()})})(el);o.paper.defs.appendChild(el);$(node,{fill:"url(#"+el.id+")"});o.pattern=el;o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(!clr.error){delete params.gradient;delete attrs.gradient;!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity});!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&
$(node,{"fill-opacity":attrs["fill-opacity"]})}else if((o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!="r")&&addGradientFill(o,value)){if("opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value;attrs.fill=
"none";break}clr[has]("opacity")&&$(node,{"fill-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});case "stroke":clr=R.getRGB(value);node.setAttribute(att,clr.hex);att=="stroke"&&clr[has]("opacity")&&$(node,{"stroke-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});if(att=="stroke"&&o._.arrows){"startString"in o._.arrows&&addArrow(o,o._.arrows.startString);"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)}break;case "gradient":(o.type=="circle"||o.type=="ellipse"||Str(value).charAt()!=
"r")&&addGradientFill(o,value);break;case "opacity":if(attrs.gradient&&!attrs[has]("stroke-opacity"))$(node,{"stroke-opacity":value>1?value/100:value});case "fill-opacity":if(attrs.gradient){gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));if(gradient){stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":value})}break}default:att=="font-size"&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});
node.style[cssrule]=value;o._.dirty=1;node.setAttribute(att,value);break}}tuneText(o,params);node.style.visibility=vis},leading=1.2,tuneText=function(el,params){if(el.type!="text"||!(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y")))return;var a=el.attrs,node=el.node,fontSize=node.firstChild?toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild,E).getPropertyValue("font-size"),10):10;if(params[has]("text")){a.text=params.text;while(node.firstChild)node.removeChild(node.firstChild);
var texts=Str(params.text).split("\n"),tspans=[],tspan;for(var i=0,ii=texts.length;i<ii;i++){tspan=$("tspan");i&&$(tspan,{dy:fontSize*leading,x:a.x});tspan.appendChild(R._g.doc.createTextNode(texts[i]));node.appendChild(tspan);tspans[i]=tspan}}else{tspans=node.getElementsByTagName("tspan");for(i=0,ii=tspans.length;i<ii;i++)if(i)$(tspans[i],{dy:fontSize*leading,x:a.x});else $(tspans[0],{dy:0})}$(node,{x:a.x,y:a.y});el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&
$(tspans[0],{dy:dif})},Element=function(node,svg){var X=0,Y=0;this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.matrix=R.matrix();this.realPath=null;this.paper=svg;this.attrs=this.attrs||{};this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};!svg.bottom&&(svg.bottom=this);this.prev=svg.top;svg.top&&(svg.top.next=this);svg.top=this;this.next=null},elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;R._engine.path=function(pathString,SVG){var el=
$("path");SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);p.type="path";setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString});return p};elproto.rotate=function(deg,cx,cy){if(this.removed)return this;deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2])}deg=toFloat(deg[0]);cy==null&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2}this.transform(this._.transform.concat([["r",deg,cx,cy]]));
return this};elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3])}sx=toFloat(sx[0]);sy==null&&(sy=sx);cy==null&&(cx=cy);if(cx==null||cy==null)var bbox=this.getBBox(1);cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));return this};elproto.translate=function(dx,dy){if(this.removed)return this;dx=Str(dx).split(separator);
if(dx.length-1)dy=toFloat(dx[1]);dx=toFloat(dx[0])||0;dy=+dy||0;this.transform(this._.transform.concat([["t",dx,dy]]));return this};elproto.transform=function(tstr){var _=this._;if(tstr==null)return _.transform;R._extractTransform(this,tstr);this.clip&&$(this.clip,{transform:this.matrix.invert()});this.pattern&&updatePosition(this);this.node&&$(this.node,{transform:this.matrix});if(_.sx!=1||_.sy!=1){var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":sw})}return this};
elproto.hide=function(){!this.removed&&this.paper.safari(this.node.style.display="none");return this};elproto.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};elproto.remove=function(){if(this.removed||!this.node.parentNode)return;var paper=this.paper;paper.__set__&&paper.__set__.exclude(this);eve.unbind("raphael.*.*."+this.id);if(this.gradient)paper.defs.removeChild(this.gradient);R._tear(this,paper);if(this.node.parentNode.tagName.toLowerCase()=="a")this.node.parentNode.parentNode.removeChild(this.node.parentNode);
else this.node.parentNode.removeChild(this.node);for(var i in this)this[i]=typeof this[i]=="function"?R._removedFactory(i):null;this.removed=true};elproto._getBBox=function(){if(this.node.style.display=="none"){this.show();var hide=true}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}hide&&this.hide();return bbox};elproto.attr=function(name,value){if(this.removed)return this;if(name==null){var res={};for(var a in this.attrs)if(this.attrs[has](a))res[a]=this.attrs[a];res.gradient&&
res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res}if(value==null&&R.is(name,"string")){if(name=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(name=="transform")return this._.transform;var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs)out[name]=this.attrs[name];else if(R.is(this.paper.customAttributes[name],"function"))out[name]=this.paper.customAttributes[name].def;
else out[name]=R._availableAttrs[name]}return ii-1?out:out[names[0]]}if(value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}if(value!=null){var params={};params[name]=value}else if(name!=null&&R.is(name,"object"))params=name;for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],
"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)if(par[has](subkey))params[subkey]=par[subkey]}setFillAndStroke(this,params);return this};elproto.toFront=function(){if(this.removed)return this;if(this.node.parentNode.tagName.toLowerCase()=="a")this.node.parentNode.parentNode.appendChild(this.node.parentNode);else this.node.parentNode.appendChild(this.node);var svg=this.paper;svg.top!=this&&R._tofront(this,svg);
return this};elproto.toBack=function(){if(this.removed)return this;var parent=this.node.parentNode;if(parent.tagName.toLowerCase()=="a")parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild);else if(parent.firstChild!=this.node)parent.insertBefore(this.node,this.node.parentNode.firstChild);R._toback(this,this.paper);var svg=this.paper;return this};elproto.insertAfter=function(element){if(this.removed)return this;var node=element.node||element[element.length-
1].node;if(node.nextSibling)node.parentNode.insertBefore(this.node,node.nextSibling);else node.parentNode.appendChild(this.node);R._insertafter(this,element,this.paper);return this};elproto.insertBefore=function(element){if(this.removed)return this;var node=element.node||element[0].node;node.parentNode.insertBefore(this.node,node);R._insertbefore(this,element,this.paper);return this};elproto.blur=function(size){var t=this;if(+size!==0){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size;
fltr.id=R.createUUID();$(blur,{stdDeviation:+size||1.5});fltr.appendChild(blur);t.paper.defs.appendChild(fltr);t._blur=fltr;$(t.node,{filter:"url(#"+fltr.id+")"})}else{if(t._blur){t._blur.parentNode.removeChild(t._blur);delete t._blur;delete t.attrs.blur}t.node.removeAttribute("filter")}};R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"};res.type="circle";$(el,res.attrs);return res};
R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"};res.type="rect";$(el,res.attrs);return res};R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",stroke:"#000"};res.type="ellipse";$(el,res.attrs);return res};R._engine.image=
function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"});el.setAttributeNS(xlink,"href",src);svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,width:w,height:h,src:src};res.type="image";return res};R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"};
res.type="text";setFillAndStroke(res,res.attrs);return res};R._engine.setSize=function(width,height){this.width=width||this.width;this.height=height||this.height;this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);if(this._viewBox)this.setViewBox.apply(this,this._viewBox);return this};R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container)throw new Error("SVG container not found.");
var cnvs=$("svg"),css="overflow:hidden;",isFloating;x=x||0;y=y||0;width=width||512;height=height||342;$(cnvs,{height:height,version:1.1,width:width,xmlns:"http://www.w3.org/2000/svg"});if(container==1){cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px";R._g.doc.body.appendChild(cnvs);isFloating=1}else{cnvs.style.cssText=css+"position:relative";if(container.firstChild)container.insertBefore(cnvs,container.firstChild);else container.appendChild(cnvs)}container=new R._Paper;container.width=
width;container.height=height;container.canvas=cnvs;container.clear();container._left=container._top=0;isFloating&&(container.renderfix=function(){});container.renderfix();return container};R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var size=mmax(w/this.width,h/this.height),top=this.top,aspectRatio=fit?"meet":"xMinYMin",vb,sw;if(x==null){if(this._vbSize)size=1;delete this._vbSize;vb="0 0 "+this.width+S+this.height}else{this._vbSize=size;vb=
x+S+y+S+w+S+h}$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});while(size&&top){sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1;top.attr({"stroke-width":sw});top._.dirty=1;top._.dirtyT=1;top=top.prev}this._viewBox=[x,y,w,h,!!fit];return this};R.prototype.renderfix=function(){var cnvs=this.canvas,s=cnvs.style,pos;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;if(left||top){if(left){this._left=(this._left+left)%
1;s.left=this._left+"px"}if(top){this._top=(this._top+top)%1;s.top=this._top+"px"}}};R.prototype.clear=function(){R.eve("raphael.clear",this);var c=this.canvas;while(c.firstChild)c.removeChild(c.firstChild);this.bottom=this.top=null;(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\u00ebl "+R.version));c.appendChild(this.desc);c.appendChild(this.defs=$("defs"))};R.prototype.remove=function(){eve("raphael.remove",this);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);
for(var i in this)this[i]=typeof this[i]=="function"?R._removedFactory(i):null};var setproto=R.st;for(var method in elproto)if(elproto[has](method)&&!setproto[has](method))setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method)}(window.Raphael);
window.Raphael.vml&&function(R){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,fillString="fill",separator=/[, ]+/,eve=R.eve,ms=" progid:DXImageTransform.Microsoft",S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},
ovalTypes={circle:1,ellipse:1},path2vml=function(path){var total=/[ahqstv]/ig,command=R._pathToAbsolute;Str(path).match(total)&&(command=R._path2curve);total=/[clmz]/g;if(command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove=command.toLowerCase()=="m",res=map[command];args.replace(val,function(value){if(isMove&&vals.length==2){res+=vals+map[command=="m"?"l":"L"];vals=[]}vals.push(round(value*zoom))});return res+vals});return res}var pa=
command(path),p,r;res=[];for(var i=0,ii=pa.length;i<ii;i++){p=pa[i];r=pa[i][0].toLowerCase();r=="z"&&(r="x");for(var j=1,jj=p.length;j<jj;j++)r+=round(p[j]*zoom)+(j!=jj-1?",":E);res.push(r)}return res.join(S)},compensation=function(deg,dx,dy){var m=R.matrix();m.rotate(-deg,0.5,0.5);return{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",dxdy,kx=zoom/sx,ky=zoom/sy;s.visibility="hidden";if(!sx||!sy)return;o.coordsize=
abs(kx)+S+abs(ky);s.rotation=deg*(sx*sy<0?-1:1);if(deg){var c=compensation(deg,dx,dy);dx=c.dx;dy=c.dy}sx<0&&(flip+="x");sy<0&&(flip+=" y")&&(y=-1);s.flip=flip;o.coordorigin=dx*-kx+S+dy*-ky;if(fillpos||_.fillsize){var fill=o.getElementsByTagName(fillString);fill=fill&&fill[0];o.removeChild(fill);if(fillpos){c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1]));fill.position=c.dx*y+S+c.dy*y}if(_.fillsize)fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy);o.appendChild(fill)}s.visibility=
"visible"};R.toString=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\u00ebl "+this.version};var addArrow=function(o,value,isEnd){var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";while(i--)switch(values[i]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":type=values[i];break;case "wide":case "narrow":h=values[i];break;case "long":case "short":w=
values[i];break}var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type;stroke[se+"arrowlength"]=w;stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};var node=o.node,a=o.attrs,s=node.style,xy,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||
a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)if(params[has](par))a[par]=params[par];if(newpath){a.path=R._getPath[o.type](o);o._.dirty=1}params.href&&(node.href=params.href);params.title&&(node.title=params.title);params.target&&(node.target=params.target);params.cursor&&(s.cursor=params.cursor);"blur"in params&&o.blur(params.blur);if(params.path&&o.type=="path"||newpath){node.path=path2vml(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path);if(o.type=="image"){o._.fillpos=
[a.x,a.y];o._.fillsize=[a.width,a.height];setCoords(o,1,1,0,0,0)}}"transform"in params&&o.transform(params.transform);if(isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((cy+ry)*zoom),round(cx*zoom))}if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(rect.length==4){rect[2]=+rect[2]+ +rect[0];rect[3]=+rect[3]+ +rect[1];var div=node.clipRect||
R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect);if(!node.clipRect){dstyle.position="absolute";dstyle.top=0;dstyle.left=0;dstyle.width=o.paper.width+"px";dstyle.height=o.paper.height+"px";node.parentNode.insertBefore(div,node);div.appendChild(node);node.clipRect=div}}if(!params["clip-rect"])node.clipRect&&(node.clipRect.style.clip="auto")}if(o.textpath){var textpathStyle=o.textpath.style;params.font&&(textpathStyle.font=params.font);params["font-family"]&&
(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"');params["font-size"]&&(textpathStyle.fontSize=params["font-size"]);params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]);params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start"in params)addArrow(res,params["arrow-start"]);if("arrow-end"in params)addArrow(res,params["arrow-end"],1);if(params.opacity!=null||params["stroke-width"]!=null||params.fill!=null||
params.src!=null||params.stroke!=null||params["stroke-width"]!=null||params["stroke-opacity"]!=null||params["fill-opacity"]!=null||params["stroke-dasharray"]!=null||params["stroke-miterlimit"]!=null||params["stroke-linejoin"]!=null||params["stroke-linecap"]!=null){var fill=node.getElementsByTagName(fillString),newfill=false;fill=fill&&fill[0];!fill&&(newfill=fill=createNode(fillString));if(o.type=="image"&&params.src)fill.src=params.src;params.fill&&(fill.on=true);if(fill.on==null||params.fill=="none"||
params.fill===null)fill.on=false;if(fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=isURL[1];fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y;o._.fillpos=[bbox.x,bbox.y];R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else{fill.color=R.getRGB(params.fill).hex;fill.src=E;fill.type="solid";if(R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||
Str(params.fill).charAt()!="r")&&addGradientFill(res,params.fill,fill)){a.fill="none";a.gradient=params.fill;fill.rotate=false}}}if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1);opacity=mmin(mmax(opacity,0),1);fill.opacity=opacity;if(fill.src)fill.color="none"}node.appendChild(fill);var stroke=node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0],newstroke=false;!stroke&&(newstroke=
stroke=createNode("stroke"));if(params.stroke&&params.stroke!="none"||params["stroke-width"]||params["stroke-opacity"]!=null||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"])stroke.on=true;(params.stroke=="none"||params.stroke===null||stroke.on==null||params.stroke==0||params["stroke-width"]==0)&&(stroke.on=false);var strokeColor=R.getRGB(params.stroke);stroke.on&&params.stroke&&(stroke.color=strokeColor.hex);opacity=((+a["stroke-opacity"]+
1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=(toFloat(params["stroke-width"])||1)*0.75;opacity=mmin(mmax(opacity,0),1);params["stroke-width"]==null&&(width=a["stroke-width"]);params["stroke-width"]&&(stroke.weight=width);width&&width<1&&(opacity*=width)&&(stroke.weight=1);stroke.opacity=opacity;params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter");stroke.miterlimit=params["stroke-miterlimit"]||8;params["stroke-linecap"]&&(stroke.endcap=params["stroke-linecap"]==
"butt"?"flat":params["stroke-linecap"]=="square"?"square":"round");if(params["stroke-dasharray"]){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if(res.type=="text"){res.paper.canvas.style.display=E;var span=res.paper.span,
m=100,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style;a.font&&(s.font=a.font);a["font-family"]&&(s.fontFamily=a["font-family"]);a["font-weight"]&&(s.fontWeight=a["font-weight"]);a["font-style"]&&(s.fontStyle=a["font-style"]);fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10;s.fontSize=fontSize*m+"px";res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var brect=span.getBoundingClientRect();res.W=
a.w=(brect.right-brect.left)/m;res.H=a.h=(brect.bottom-brect.top)/m;res.X=a.x;res.Y=a.y+res.H/2;("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));var dirtyattrs=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var d=0,dd=dirtyattrs.length;d<dd;d++)if(dirtyattrs[d]in params){res._.dirty=1;break}switch(a["text-anchor"]){case "start":res.textpath.style["v-text-align"]="left";res.bbx=res.W/2;break;
case "end":res.textpath.style["v-text-align"]="right";res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center";res.bbx=0;break}res.textpath.style["v-text-kern"]=true}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};var attrs=o.attrs,pow=Math.pow,opacity,oindex,type="linear",fxfy=".5 .5";o.attrs.gradient=gradient;gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){type="radial";if(fx&&fy){fx=toFloat(fx);fy=toFloat(fy);pow(fx-0.5,2)+pow(fy-0.5,2)>0.25&&
(fy=math.sqrt(0.25-pow(fx-0.5,2))*((fy>0.5)*2-1)+0.5);fxfy=fx+S+fy}return E});gradient=gradient.split(/\s*\-\s*/);if(type=="linear"){var angle=gradient.shift();angle=-toFloat(angle);if(isNaN(angle))return null}var dots=R._parseDots(gradient);if(!dots)return null;o=o.shape||o.node;if(dots.length){o.removeChild(fill);fill.on=true;fill.method="none";fill.color=dots[0].color;fill.color2=dots[dots.length-1].color;var clrs=[];for(var i=0,ii=dots.length;i<ii;i++)dots[i].offset&&clrs.push(dots[i].offset+
S+dots[i].color);fill.colors=clrs.length?clrs.join():"0% "+fill.color;if(type=="radial"){fill.type="gradientTitle";fill.focus="100%";fill.focussize="0 0";fill.focusposition=fxfy;fill.angle=0}else{fill.type="gradient";fill.angle=(270-angle)%360}o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node;node.raphael=true;this.id=R._oid++;node.raphaelid=this.id;this.X=0;this.Y=0;this.attrs={};this.paper=vml;this.matrix=R.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,
dirtyT:1};!vml.bottom&&(vml.bottom=this);this.prev=vml.top;vml.top&&(vml.top.next=this);vml.top=this;this.next=null};var elproto=R.el;Element.prototype=elproto;elproto.constructor=Element;elproto.transform=function(tstr){if(tstr==null)return this._.transform;var vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale]+"-1-1t"+[vbs.dx,vbs.dy]:E,oldt;if(vbs)oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E);R._extractTransform(this,vbt+tstr);var matrix=this.matrix.clone(),skew=this.skew,
o=this.node,split,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");matrix.translate(-0.5,-0.5);if(isPatt||isGrad||this.type=="image"){skew.matrix="1 0 0 1";skew.offset="0 0";split=matrix.split();if(isGrad&&split.noRotation||!split.isSimple){o.style.filter=matrix.toFilter();var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=dx*-zoom+S+dy*-zoom;setCoords(this,1,1,dx,dy,0)}else{o.style.filter=E;setCoords(this,split.scalex,split.scaley,
split.dx,split.dy,split.rotate)}}else{o.style.filter=E;skew.matrix=Str(matrix);skew.offset=matrix.offset()}oldt&&(this._.transform=oldt);return this};elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(deg==null)return;deg=Str(deg).split(separator);if(deg.length-1){cx=toFloat(deg[1]);cy=toFloat(deg[2])}deg=toFloat(deg[0]);cy==null&&(cx=cy);if(cx==null||cy==null){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2;cy=bbox.y+bbox.height/2}this._.dirtyT=1;this.transform(this._.transform.concat([["r",
deg,cx,cy]]));return this};elproto.translate=function(dx,dy){if(this.removed)return this;dx=Str(dx).split(separator);if(dx.length-1)dy=toFloat(dx[1]);dx=toFloat(dx[0])||0;dy=+dy||0;if(this._.bbox){this._.bbox.x+=dx;this._.bbox.y+=dy}this.transform(this._.transform.concat([["t",dx,dy]]));return this};elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;sx=Str(sx).split(separator);if(sx.length-1){sy=toFloat(sx[1]);cx=toFloat(sx[2]);cy=toFloat(sx[3]);isNaN(cx)&&(cx=null);isNaN(cy)&&(cy=null)}sx=
toFloat(sx[0]);sy==null&&(sy=sx);cy==null&&(cx=cy);if(cx==null||cy==null)var bbox=this.getBBox(1);cx=cx==null?bbox.x+bbox.width/2:cx;cy=cy==null?bbox.y+bbox.height/2:cy;this.transform(this._.transform.concat([["s",sx,sy,cx,cy]]));this._.dirtyT=1;return this};elproto.hide=function(){!this.removed&&(this.node.style.display="none");return this};elproto.show=function(){!this.removed&&(this.node.style.display=E);return this};elproto._getBBox=function(){if(this.removed)return{};return{x:this.X+(this.bbx||
0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}};elproto.remove=function(){if(this.removed||!this.node.parentNode)return;this.paper.__set__&&this.paper.__set__.exclude(this);R.eve.unbind("raphael.*.*."+this.id);R._tear(this,this.paper);this.node.parentNode.removeChild(this.node);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var i in this)this[i]=typeof this[i]=="function"?R._removedFactory(i):null;this.removed=true};elproto.attr=function(name,value){if(this.removed)return this;
if(name==null){var res={};for(var a in this.attrs)if(this.attrs[has](a))res[a]=this.attrs[a];res.gradient&&res.fill=="none"&&(res.fill=res.gradient)&&delete res.gradient;res.transform=this._.transform;return res}if(value==null&&R.is(name,"string")){if(name==fillString&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var names=name.split(separator),out={};for(var i=0,ii=names.length;i<ii;i++){name=names[i];if(name in this.attrs)out[name]=this.attrs[name];else if(R.is(this.paper.customAttributes[name],
"function"))out[name]=this.paper.customAttributes[name].def;else out[name]=R._availableAttrs[name]}return ii-1?out:out[names[0]]}if(this.attrs&&value==null&&R.is(name,"array")){out={};for(i=0,ii=name.length;i<ii;i++)out[name[i]]=this.attr(name[i]);return out}var params;if(value!=null){params={};params[name]=value}value==null&&R.is(name,"object")&&(params=name);for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&
params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)if(par[has](subkey))params[subkey]=par[subkey]}if(params.text&&this.type=="text")this.textpath.string=params.text;setFillAndStroke(this,params)}return this};elproto.toFront=function(){!this.removed&&this.node.parentNode.appendChild(this.node);this.paper&&this.paper.top!=this&&R._tofront(this,this.paper);return this};
elproto.toBack=function(){if(this.removed)return this;if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);R._toback(this,this.paper)}return this};elproto.insertAfter=function(element){if(this.removed)return this;if(element.constructor==R.st.constructor)element=element[element.length-1];if(element.node.nextSibling)element.node.parentNode.insertBefore(this.node,element.node.nextSibling);else element.node.parentNode.appendChild(this.node);
R._insertafter(this,element,this.paper);return this};elproto.insertBefore=function(element){if(this.removed)return this;if(element.constructor==R.st.constructor)element=element[0];element.node.parentNode.insertBefore(this.node,element.node);R._insertbefore(this,element,this.paper);return this};elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;f=f.replace(blurregexp,E);if(+size!==0){this.attrs.blur=size;s.filter=f+S+ms+".Blur(pixelradius="+(+size||1.5)+")";s.margin=R.format("-{0}px 0 0 -{0}px",
round(+size||1.5))}else{s.filter=f;s.margin=0;delete this.attrs.blur}};R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin=vml.coordorigin;var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString);p.type="path";p.path=[];p.Path=E;setFillAndStroke(p,attr);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p};R._engine.rect=
function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.r=r;a.path=path;res.type="rect";return res};R._engine.ellipse=function(vml,x,y,rx,ry){var res=vml.path(),a=res.attrs;res.X=x-rx;res.Y=y-ry;res.W=rx*2;res.H=ry*2;res.type="ellipse";setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry});return res};R._engine.circle=function(vml,x,y,r){var res=vml.path(),a=res.attrs;res.X=x-r;res.Y=y-r;res.W=res.H=r*2;res.type="circle";
setFillAndStroke(res,{cx:x,cy:y,r:r});return res};R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName(fillString)[0];a.src=src;res.X=a.x=x;res.Y=a.y=y;res.W=a.width=w;res.H=a.height=h;a.path=path;res.type="image";fill.parentNode==node&&node.removeChild(fill);fill.rotate=true;fill.src=src;fill.type="tile";res._.fillpos=[x,y];res._.fillsize=[w,h];node.appendChild(fill);setCoords(res,
1,1,0,0,0);return res};R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");x=x||0;y=y||0;text=text||"";path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1);path.textpathok=true;o.string=Str(text);o.on=true;el.style.cssText=cssDot;el.coordsize=zoom+S+zoom;el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text};p.shape=el;p.path=path;p.textpath=o;p.type=
"text";p.attrs.text=Str(text);p.attrs.x=x;p.attrs.y=y;p.attrs.w=1;p.attrs.h=1;setFillAndStroke(p,attr);el.appendChild(o);el.appendChild(path);vml.canvas.appendChild(el);var skew=createNode("skew");skew.on=true;el.appendChild(skew);p.skew=skew;p.transform(E);return p};R._engine.setSize=function(width,height){var cs=this.canvas.style;this.width=width;this.height=height;width==+width&&(width+="px");height==+height&&(height+="px");cs.width=width;cs.height=height;cs.clip="rect(0 "+width+" "+height+" 0)";
if(this._viewBox)R._engine.setViewBox.apply(this,this._viewBox);return this};R._engine.setViewBox=function(x,y,w,h,fit){R.eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var width=this.width,height=this.height,size=1/mmax(w/width,h/height),H,W;if(fit){H=height/h;W=width/w;if(w*H<width)x-=(width-w*H)/2/H;if(h*W<height)y-=(height-h*W)/2/W}this._viewBox=[x,y,w,h,!!fit];this._viewBoxShift={dx:-x,dy:-y,scale:size};this.forEach(function(el){el.transform("...")});return this};var createNode;R._engine.initWin=
function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml");createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}};R._engine.initWin(R._g.win);R._engine.create=function(){var con=R._getContainer.apply(0,
arguments),container=con.container,height=con.height,s,width=con.width,x=con.x,y=con.y;if(!container)throw new Error("VML container not found.");var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;x=x||0;y=y||0;width=width||512;height=height||342;res.width=width;res.height=height;width==+width&&(width+="px");height==+height&&(height+="px");res.coordsize=zoom*1E3+S+zoom*1E3;res.coordorigin="0 0";res.span=R._g.doc.createElement("span");res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";
c.appendChild(res.span);cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height);if(container==1){R._g.doc.body.appendChild(c);cs.left=x+"px";cs.top=y+"px";cs.position="absolute"}else if(container.firstChild)container.insertBefore(c,container.firstChild);else container.appendChild(c);res.renderfix=function(){};return res};R.prototype.clear=function(){R.eve("raphael.clear",this);this.canvas.innerHTML=E;this.span=
R._g.doc.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};R.prototype.remove=function(){R.eve("raphael.remove",this);this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]=typeof this[i]=="function"?R._removedFactory(i):null;return true};var setproto=R.st;for(var method in elproto)if(elproto[has](method)&&!setproto[has](method))setproto[method]=
function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method)}(window.Raphael);

