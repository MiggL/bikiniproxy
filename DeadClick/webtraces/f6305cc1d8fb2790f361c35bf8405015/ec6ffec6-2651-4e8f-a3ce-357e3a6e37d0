
var creative = {};

creative.init = function () {
    creative.setupDOMElements();

    // Check if Enabler is initialized.
    if (Enabler.isInitialized()) {
        // Check if ad is visible to user.
        if (Enabler.isVisible()) {
            creative.enablerInitHandler();
        } else {
            Enabler.addEventListener(
                studio.events.StudioEvent.VISIBLE,
                creative.enablerInitHandler
            );
        }
    } else {
        Enabler.addEventListener(
            studio.events.StudioEvent.INIT,
            creative.enablerInitHandler
        );
    }
};

creative.setupDOMElements = function () {
    creative.domElements = {};

    // SETUP IDS FROM INDEX.HTML HERE. U CAN NAME VARIABLES AS YOU WISH (creative.domElements.HYZ E.X.)
    creative.domElements.headline_text_1 = document.getElementById("banner_text_1");
    creative.domElements.headline_text_2 = document.getElementById("banner_text_2");
    creative.domElements.top_text_3 = document.getElementById("text_1");
    creative.domElements.top_text_4 = document.getElementById("text_2");
    creative.domElements.top_text_5 = document.getElementById("text_3");
    creative.domElements.grey_bg = document.getElementById("grey_background");
    creative.domElements.backgroundExit = document.getElementById("background_exit");
    creative.domElements.additionalColor = document.getElementById("additional_color");
    creative.domElements.button = document.getElementById("button");
    creative.domElements.buttonImg = document.getElementById("btn_img");
    creative.domElements.buttonText = document.getElementById("button_cta");
    // creative.domElements.hyz = document.getElementById("banner_text");
};




creative.addSuffix = function(url, dcmParameter) {
    var urlSuffix = Enabler.getParameter(dcmParameter);
    var _url = '';

    if (url) {
        _url = url + ';' + urlSuffix;
    }
    return _url;
};

creative.enablerInitHandler = function (event) {
    creative.dynamicDataAvailable();

    // ADD CLICK BUTTON HANDLERS HERE
    creative.domElements.backgroundExit.addEventListener("click", creative.exitClickHandler);


    if (Enabler.isPageLoaded()) {
        creative.pageLoadHandler();
    } else {
        Enabler.addEventListener(
            studio.events.StudioEvent.PAGE_LOADED, creative.pageLoadHandler);
    }
};


creative.dynamicDataAvailable = function () {
    // Dynamic Content variables and sample values
    Enabler.setProfileId(10007366);
    var devDynamicContent = {};

    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90= [{}];
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0]._id = 0;
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Unique_ID = "MKCR-1964_dy_itln_728_90_def";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Reporting_Label = "HIGHLY RECOMMENDEDFollow 3 steps for quick install and scan#147fd2NONEbtn_4.png12pxDownload Now";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].isDefault = true;
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Active = true;
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Headline_text_1 = "HIGHLY RECOMMENDED";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Headline_text_2 = "Follow 3 steps for quick install and scan";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Button_Color = "#147fd2";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Grey_background = "NONE";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Btn_img = {};
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Btn_img.Type = "file";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Btn_img.Url = "https://s0.2mdn.net/ads/richmedia/studio/44671256/44671256_20170529023232213_btn_4.png";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Button_radius = "12px";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Top_text_3 = "1. Click Download Now";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Top_text_4 = "2. Run the quick scan";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Top_text_5 = "3. Enjoy your clean Mac";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Button_CTA = "Download Now";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Exit_url = {};
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Exit_url.Url = "http://mackeeper.com/paramss=phexafc9ac93b5a5c5e69297a0ad9f9cd2e8cb90dadcce9fc5e5d49cd4cccfd3c5d2cbe2ddd9c4d2e2c0adac999f9da4d4ccc6c5d2dcc2cee0e5c8d1decda093ae&trt=29_315311356&tid_ext=";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].DCMMacros = "%epid!;=%ecid!;=%eaid!;";
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Exit_url_final = {};
    devDynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Exit_url_final.Url = "http://mackeeper.com/paramss=phexafc9ac93b5a5c5e69297a0ad9f9cd2e8cb90dadcce9fc5e5d49cd4cccfd3c5d2cbe2ddd9c4d2e2c0adac999f9da4d4ccc6c5d2dcc2cee0e5c8d1decda093ae&trt=29_315311356&tid_ext=%epid!;=%ecid!;=%eaid!;MKCR-1964_dy_itln_728_90_def";
    Enabler.setDevDynamicContent(devDynamicContent);



// ---------------------------------------------------

    creative.dynamicData = dynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90;
    creative.dynamicExitUrl = dynamicContent.Feed_Bundlore_1964_300x250_Italian_1964_728x90[0].Exit_url_final.Url;
};


creative.pageLoadHandler = function (event) {
    creative.domElements.button.style.background = creative.dynamicData[0].Button_Color;
    creative.domElements.button.style.background = creative.dynamicData[0].Button_Color;
    creative.domElements.button.style.borderRadius = creative.dynamicData[0].Button_radius;

    creative.domElements.grey_bg.style.background = creative.dynamicData[0].Grey_background;

    creative.domElements.buttonText.innerHTML = creative.dynamicData[0].Button_CTA;
    creative.domElements.buttonImg.style.background = 'url("'+ creative.dynamicData[0].Btn_img.Url + '") center center no-repeat';


    creative.domElements.headline_text_1.innerHTML = creative.dynamicData[0].Headline_text_1;
    creative.domElements.headline_text_2.innerHTML = creative.dynamicData[0].Headline_text_2;
    creative.domElements.top_text_3.innerHTML = creative.dynamicData[0].Top_text_3;
    creative.domElements.top_text_4.innerHTML = creative.dynamicData[0].Top_text_4;
    creative.domElements.top_text_5.innerHTML = creative.dynamicData[0].Top_text_5;


    // SETUP CHANGES FOR YOUR HTML ELEMENTS
    // creative.domElements.hyz.style.color(innerHTML) = creative.dynamicData[0].CTA_Color(Text);
};

creative.exitClickHandler = function (event) {
    Enabler.exitOverride("exit", creative.addSuffix(creative.dynamicExitUrl, 'exit_suffix'));
};


window.addEventListener("load", creative.init.bind(creative));

