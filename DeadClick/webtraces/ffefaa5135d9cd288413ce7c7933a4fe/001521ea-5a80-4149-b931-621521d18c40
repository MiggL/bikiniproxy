define(["jquery","pubsub"],function(c){var a=function(f){f=f||0;var d=c(".product-form-js").eq(f).find(".attr-color-js:not(.hide) .attr-box.selected"),g=c(".product-form-js").eq(f).find(".active-context-js");if(!d.length){d=c(".product-form-js").eq(f).find(".attr-box").first()}var e=g.data("s7-image-set-name")||d.data("s7-image-set-name");return e},b=function(e){var g=c(e.target).parents().has(".vfdp-s7-viewer").first(),f=c(".vfdp-s7-viewer",g),d=c(".vfdp-s7-viewer").index(f);f.attr("data-viewer-options",JSON.stringify({media:{set:{asset:a(d)}}}))};c.pubsub("subscribe","product-form.attr.swatch.click",function(e,d){b(d)});c.pubsub("subscribe","product-form.attr.context.changed",function(e,d){b(d)})});