define(["jquery","pubsub"],function(b,a){b.pubsub("subscribe","vfdp.wcs.mini_list.add_to_cart_clicked",function(){try{window.dataLayer.push({event:"addToCartClick",clickSource:"miniwishlist"})}catch(c){console.error("Failed push to dataLayer",c)}});b.pubsub("subscribe","vfdp.wcs.mini_list.add_to_cart_succeeded",function(j,k){try{if(k){var c={sku:k.productId,name:k.productName,category:k.masterCategoryId?k.masterCategoryId:"Misc",price:parseFloat(k.unitPrice),vn:k.childPartNumber?k.childPartNumber:"",parentId:k.parentProductId?k.parentProductId:"",childId:k.childProductId?k.childProductId:"",bundlePartNumber:k.bundlePartNumber?k.bundlePartNumber:"",seoCategory:k.seoCategory?k.seoCategory:""};var d;var g;if(window.dataLayer){for(var f in window.dataLayer){g=window.dataLayer[f];d=g.currencySymbol;if(d){d=d.replace(/&amp;/g,"&");d=b("<textarea/>").html(d).text();window.dataLayer[f].currencySymbol=d;break}}}var e={event:"addToCart",ecommerce:{currencyCode:k.currency?k.currency:null,currencySymbol:d?d:null,add:{products:[{name:k.productName,id:k.productId,bundleID:k.bundlePartNumber?k.bundlePartNumber:null,productID:k.productId?k.productId:null,itemID:k.childPartNumber?k.childPartNumber:null,price:parseFloat(k.unitPrice),brand:"",category:"Misc",variant:b.trim(k.definingAttributes)?b.trim(k.definingAttributes):"",quantity:k.quantity?k.quantity:1}]}},atcProduct:c};window.dataLayer.push(e)}}catch(h){console.error("Failed push to dataLayer",h)}})});