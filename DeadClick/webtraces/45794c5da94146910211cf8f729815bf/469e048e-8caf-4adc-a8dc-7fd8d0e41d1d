!function e(n,t,i){function o(r,a){if(!t[r]){if(!n[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(d)return d(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var p=t[r]={exports:{}};n[r][0].call(p.exports,function(e){var t=n[r][1][e];return o(t?t:e)},p,p.exports,e,n,t,i)}return t[r].exports}for(var d="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(e,n,t){!function(n){var t=e("./lib/thirdpartypixels");t.getVarsFromScript("banner",n),t.fire()}(window)},{"./lib/thirdpartypixels":3}],2:[function(e,n,t){var i={APP_NAME:"banner",APP_VERSION:"1.0.49"};n.exports=i},{}],3:[function(e,n,t){var i=e("./consts"),o=e("./util"),d=e("../viewability"),r={startTime:+new Date,getVarsFromVPAID:function(e,n){r.impType=e,r.win=n;var t="@adservedomain@";t=t!="@adservedomain"+"@"&&t?t:"a-nj.1rx.io";var i="@appbundle@";i=i!="@appbundle"+"@"&&i?i:"unknown";var o="@appid@";o=o!="@appid"+"@"&&o?o:"unknown";var d="@cid@";d=d!="@cid"+"@"&&d?d:"unknown";var a="@dealid@";a=a!="@dealid"+"@"&&a?a:"unknown";var c="@debug@";c=c!="@debug"+"@"&&c?c:"false",c="true"==c;var s="@device@";s=s!="@device"+"@"&&s?s:"unknown";var p="@divid@";p=p!="@divid"+"@"&&p?p:"unknown";var u="@domain@";u=u!="@domain"+"@"&&u?u:"unknown";var l="@dspid@";l=l!="@dspid"+"@"&&l?l:"unknown";var m="@forceclientaudit@";m=m!="@forceclientaudit"+"@"&&m?m:"false",m="true"==m;var f="@ifa@";f=f!="@ifa"+"@"&&f?f:"unknown";var g="@includedPartnerProducts@";g=g!="@includedPartnerProducts"+"@"&&g?g:"";var b="@ip@";b=b!="@ip"+"@"&&b?b:"unknown";var v="@mediatype@";v=v!="@mediatype"+"@"&&v?v:"unknown";var I="@tagid@";I=I!="@tagid"+"@"&&I?I:"unknown";var R="@pubid@";R=R!="@pubid"+"@"&&R?R:"unknown";var y="@requestid@";y=y!="@requestid"+"@"&&y?y:"unknown";var h="@siteid@";h=h!="@siteid"+"@"&&h?h:"unknown";var C="@ssp@";C=C!="@ssp"+"@"&&C?C:"unknown";var U="@throttlerate@";U=U!="@throttlerate"+"@"&&U?U:"unknown",U=isNaN(U)?0:parseFloat(U);var P="@traffictype@";P=P!="@traffictype"+"@"&&P?P:"unknown";var w="@ua@";w=w!="@ua"+"@"&&w?w:"unknown";var D="@userid@";D=D!="@userid"+"@"&&D?D:"unknown";var _="@useridorig@";_=_!="@useridorig"+"@"&&_?_:"unknown",r.adservedomain=t,r.appbundle=i,r.appid=o,r.campaign=d,r.dealid=a,r.debug=c,r.device=s,r.divid=p,r.domain=u,r.dspid=l,r.forceclientaudit=m,r.ifa=f,r.includedPartnerProducts=g,r.ip=b,r.media=v,r.placementid=I,r.pubid=R,r.requestid=y,r.siteid=h,r.sspid=C,r.throttlerate=U,r.traffictype=P,r.ua=w,r.userid=D,r.useridorig=_,r.debug&&r.debugDump()},getVarsFromScript:function(e,n){r.impType=e,r.win=n;for(var t=!1,i=0;i<document.scripts.length;i++)try{var o=document.scripts[i].getAttribute("roneflag");if("C3EA9A8B-0564-4203-B3F4-3974489D02A6"==o){t=!0,r.adservedomain=document.scripts[i].getAttribute("adservedomain")||"a-nj.1rx.io",r.appbundle=document.scripts[i].getAttribute("appbundle")||"unknown",r.appid=document.scripts[i].getAttribute("appid")||"unknown",r.campaign=document.scripts[i].getAttribute("campaign")||"unknown",r.dealid=document.scripts[i].getAttribute("dealid")||"unknown",r.debug=document.scripts[i].getAttribute("debug")||"false","true"==r.debug?r.debug=!0:r.debug=!1,r.device=document.scripts[i].getAttribute("device")||"unknown",r.divid=document.scripts[i].getAttribute("divid")||"unknown",r.domain=document.scripts[i].getAttribute("domain")||"unknown",r.dspid=document.scripts[i].getAttribute("dspid")||"unknown",r.forceclientaudit=document.scripts[i].getAttribute("forceclientaudit")||"false","true"==r.forceclientaudit?r.forceclientaudit=!0:r.forceclientaudit=!1,r.ifa=document.scripts[i].getAttribute("ifa")||"unknown",r.includedPartnerProducts=document.scripts[i].getAttribute("includedPartnerProducts")||"",r.ip=document.scripts[i].getAttribute("ip")||"unknown",r.media=document.scripts[i].getAttribute("media")||"unknown",r.placementid=document.scripts[i].getAttribute("placementid")||"unknown",r.pubid=document.scripts[i].getAttribute("pubid")||"unknown",r.requestid=document.scripts[i].getAttribute("requestid")||"unknown",r.siteid=document.scripts[i].getAttribute("siteid")||"unknown",r.sspid=document.scripts[i].getAttribute("sspid")||"unknown",r.throttlerate=document.scripts[i].getAttribute("throttlerate")||0,r.traffictype=document.scripts[i].getAttribute("traffictype")||"unknown",r.ua=document.scripts[i].getAttribute("ua")||"unknown",r.userid=document.scripts[i].getAttribute("userid")||"unknown",r.useridorig=document.scripts[i].getAttribute("useridorig")||"unknown",r.ua=decodeURIComponent(r.ua);break}}catch(d){continue}r.debug&&r.debugDump()},debugDump:function(){console.log("RX Debug Mode"),console.log("adservedomain: "+r.adservedomain),console.log("appbundle: "+r.appbundle),console.log("appid: "+r.appid),console.log("campaign: "+r.campaign),console.log("dealid: "+r.dealid),console.log("debug: "+r.debug),console.log("device: "+r.device),console.log("divid: "+r.divid),console.log("domain: "+r.domain),console.log("dspid: "+r.dspid),console.log("forceclientaudit: "+r.forceclientaudit),console.log("ifa: "+r.ifa),console.log("includedPartnerProducts: "+r.includedPartnerProducts),console.log("ip: "+r.ip),console.log("media: "+r.media),console.log("placementid: "+r.placementid),console.log("pubid: "+r.pubid),console.log("requestid: "+r.requestid),console.log("siteid: "+r.siteid),console.log("sspid: "+r.sspid),console.log("throttlerate: "+r.throttlerate),console.log("traffictype: "+r.traffictype),console.log("ua: "+r.ua),console.log("userid: "+r.userid),console.log("useridorig: "+r.useridorig)},callWhiteOpsBanner:function(){r.callWhiteOps("7731381474653359911000")},callWhiteOpsVideo:function(){r.callWhiteOps("7731381491482153581000")},callWhiteOps:function(e){var n="https://s.pxltgr.com/2/773138/analytics.js?";n+="dt="+e+"&",n+="ac="+encodeURIComponent(r.campaign)+"&",n+="pc="+encodeURIComponent(r.placementid)+"&",n+="sr="+r.sspid+"&",n+="pp="+encodeURIComponent(r.pubid)+"&",n+="si="+encodeURIComponent(r.siteid)+"&",n+="ui="+encodeURIComponent(r.userid)+"&",n+="md="+encodeURIComponent(r.media)+"&",n+="c1="+encodeURIComponent(r.device)+"&",n+="di="+encodeURIComponent(r.domain)+"&",n+="r1="+encodeURIComponent(r.ip);var t=document.createElement("script");t.src=n,"undefined"!=typeof t.addEventListener&&t.addEventListener("error",function(){}),document.documentElement.appendChild(t)},callIASRTDS:function(){r.win.rxIASEvent=function(e,n,t,d,a,c,s,p,u){var l="//"+r.adservedomain+"/trackedevent/doc?doc_type=iasrtds&doc_version=1";l+="&ssp="+r.sspid,l+="&pub="+encodeURIComponent(r.pubid),l+="&site="+encodeURIComponent(r.siteid),l+="&appid="+encodeURIComponent(r.appid),l+="&appbundle="+encodeURIComponent(r.appbundle),l+="&placementid="+encodeURIComponent(r.placementid),l+="&requestid="+encodeURIComponent(r.requestid),l+="&userid="+encodeURIComponent(r.userid),l+="&useridorig="+encodeURIComponent(r.useridorig),l+="&domain="+encodeURIComponent(o.GetDomain()),l+="&ifa="+encodeURIComponent(r.ifa),l+="&dealid="+encodeURIComponent(r.dealid),l+="&traffictype="+r.traffictype,l+="&elapsedms="+(+new Date-r.startTime),l+="&iasrequestid="+encodeURIComponent(u),l+="&eventtype="+e,l+="&scriptversion="+i.APP_VERSION;var m=document.createElement("iframe");m.style.display="none",m.style.visibility="hidden",m.src=l,document.body.appendChild(m)};var e="//pixel.adsafeprotected.com/jload?anId=925612";e+="&advId="+encodeURIComponent(r.sspid),e+="&pubId="+encodeURIComponent(r.pubid),e+="&campId="+encodeURIComponent(r.siteid),e+="&chanId="+encodeURIComponent(r.appid),e+="&placementId="+encodeURIComponent(r.placementid),e+="&adsafe_par",e+="&impId="+encodeURIComponent(r.requestid),e+="&uId="+encodeURIComponent(r.userid),e+="&planId="+r.traffictype;var n=document.createElement("script");n.src=e,"undefined"!=typeof n.addEventListener&&n.addEventListener("error",function(){}),document.documentElement.appendChild(n)},dvLogResult:function(e){var n="//rgaudit.1rx.io/rgdvaudit/doc?doc_type=dv_audit&doc_version=5";n+="&type="+("banner"==r.impType?"display":r.impType),n+="&dv_result="+e,n+="&ssp="+r.sspid,n+="&pub="+encodeURIComponent(r.pubid),n+="&site="+encodeURIComponent(r.siteid),n+="&appbundle="+encodeURIComponent(r.appbundle),n+="&appid="+encodeURIComponent(r.appid),n+="&domain="+encodeURIComponent(o.GetDomain()),n+="&userid="+encodeURIComponent(r.userid),n+="&ifa="+encodeURIComponent(r.ifa),n+="&useridorig="+encodeURIComponent(r.useridorig),n+="&dealid="+encodeURIComponent(r.dealid),n+="&requestid="+encodeURIComponent(r.requestid),n+="&scriptversion="+i.APP_VERSION,n+="&latency="+(+new Date-r.startTime);var t=document.createElement("iframe");t.style.display="none",t.style.visibility="hidden",t.src=n,document.body.appendChild(t)},callDV:function(){r.dvHasRun=!1,r.win.go_104166=function(e){r.dvProcess(e)},setTimeout(function(){r.dvProcess(null)},1e4);var e=document.createElement("iframe");e.style.display="none",e.style.visibility="hidden",e.srcdoc='<script src="//tm.iqfp1.com/query.js?ctx=2736442&cmp=2736444&icall=go_104166&DVP_UID=5465" type="text/javascript"></script>',document.body.appendChild(e)},dvProcess:function(e){if(!r.dvHasRun)return r.dvHasRun=!0,e?e.ifb===!1?r.dvLogResult(1):e.ifb===!0?r.dvLogResult(0):r.dvLogResult(3):r.dvLogResult(2)},callForensiq:function(){var e="https://c.fqtag.com/tag/implement-r.js?";if(e+="s="+encodeURIComponent(this.requestid),e+="&p="+this.sspid,e+="&a="+encodeURIComponent(this.pubid),e+="&cmp="+this.dspid,e+="&org=G0svEvGv91czyYaAhko1&",e+="&rt=display",e+="&sl=1",e+="&fmt=video",e+="&c4="+encodeURIComponent(this.userid),"app"==this.media){e+="&app="+encodeURIComponent(this.appid)+"."+encodeURIComponent(this.appbundle),e+="&dmn="+encodeURIComponent(this.appbundle),e+="&c1="+encodeURIComponent(this.appid);var n=navigator.userAgent.toLowerCase();/ipad|iphone|ipod/.test(n)&&!window.MSStream?e+="&aid1="+encodeURIComponent(this.ifa):n.indexOf("android")>-1?e+="&gid="+encodeURIComponent(this.ifa):n.indexOf("windows phone">-1)&&(e+="&wid="+encodeURIComponent(this.ifa)),e+="&c2="+encodeURIComponent(this.ifa)}else e+="&dmn="+o.GetDomain(),e+="&c1="+encodeURIComponent(this.siteid);e+="&c3="+encodeURIComponent(this.traffictype),e+="&ad="+encodeURIComponent(this.divid),e+="&fq=1",e+="&cb="+ +new Date;var t=document.createElement("script");t.src=e,"undefined"!=typeof t.addEventListener&&t.addEventListener("error",function(){}),document.documentElement.appendChild(t)},callFraudlogix:function(){var e="https://pixel.yabidos.com/fltiu.js?";e+="qid=43130313f503230313f5631373",e+="&cid=716",e+="&x="+encodeURIComponent(this.traffictype+":"+this.sspid),e+="&p="+encodeURIComponent(this.pubid),e+="&nai="+this.dspid,e+="&adtg="+encodeURIComponent(this.divid),e+="&ip="+encodeURIComponent(this.ip),e+="&ua="+encodeURIComponent(this.ua),"app"==this.media?(e+="&s="+encodeURIComponent(this.appbundle),e+="&ai="+encodeURIComponent(this.appid),e+="&di="+encodeURIComponent(this.ifa)):(e+="&s="+o.GetDomain(),e+="&si="+encodeURIComponent(this.siteid)),e+="&cb="+ +new Date;var n=document.createElement("script");n.src=e,"undefined"!=typeof n.addEventListener&&n.addEventListener("error",function(){}),document.documentElement.appendChild(n)},callDVIQMRTDS:function(e){var n="//cdn.doubleverify.com/dvtp_src.js?";n+="ctx=2908533&",n+="cmp=2736445&",n+="sid=24324&",n+="plc=DV-RTHM20170324001&",n+="advid=2908534&",n+="region=30&",n+="btreg="+r.divid+"&",n+="btadsrv=rhythmone&",n+="app=appid&",n+="sup=sspid&",n+="DVP_DV_TT=1&",n+="DVP_DV_CT=1&",n+="DVP_PP_BUNDLE_ID="+encodeURIComponent(r.appid)+"&",n+="DVP_RO_SSPID="+r.sspid+"&",n+="DVP_PP_ORTB_PUB_ID="+encodeURIComponent(r.pubid)+"&",n+="DVP_RO_SITEID="+encodeURIComponent(r.siteid)+"&",n+="DVP_RO_TRAFFIC="+r.traffictype+"&",n+="DVP_PP_DEAL_ID="+encodeURIComponent(r.dealid)+"&",n+="DVPX_PP_IMP_ID="+r.requestid+"&",n+="DVPX_PP_UID="+r.userid+"&",n+="DVP_RO_CDID="+encodeURIComponent(r.ifa)+"&",n+="DVPX_PP_AUCTION_UA="+encodeURIComponent(r.ua)+"&",n+="DVP_PP_AUCTION_IP="+r.ip+"&",n+="app"==r.media?"turl="+encodeURIComponent(r.appbundle)+"&":"turl="+encodeURIComponent(r.domain)+"&",n+="dvtagver=6.1.src";var t=document.createElement("script");t.src=n,"undefined"!=typeof t.addEventListener&&t.addEventListener("error",function(){}),document.documentElement.appendChild(t)},reportRXViewability:function(e){o.RAEvent("rx_viewabilitytest_data_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime,+new Date-r.startTime,JSON.stringify(e))},callRXViewability:function(){d(r.win,r.placementid,r.pubid,r.reportRXViewability)},fire:function(){var e=Math.random(),n=e<=r.throttlerate;if(r.debug){var t=n?"true":"false";console.log("ticket: "+e+" passed: "+t+" debug mode forcing a pass"),n=!0}var i=[];r.includedPartnerProducts&&(i=r.includedPartnerProducts.split(","));var d=[],a="partner:DoubleVerify|product:Legacy|method:JS",c="partner:DoubleVerify|product:RTDS|method:JS",s="partner:IAS|product:RTDS|method:JS",p="partner:WhiteOps|product:WhiteOps|method:JS";"video"==r.impType?(i.push(a),d.push(r.callDV),i.push(c),d.push(r.callDVIQMRTDS),i.push(p),d.push(r.callWhiteOpsVideo)):r.forceclientaudit?(i.push(s),d.push(r.callIASRTDS),i.push(a),d.push(r.callDV),i.push(c),d.push(r.callDVIQMRTDS),n&&(i.push(p),d.push(r.callWhiteOpsBanner))):n&&(i.push(a),d.push(r.callDV),i.push(p),d.push(r.callWhiteOpsBanner),i.push(s),d.push(r.callIASRTDS),i.push(c),d.push(r.callDVIQMRTDS));var u="//"+r.adservedomain+"/trackedevent/doc?doc_type=thirdpartybeacon&doc_version=6";u+="&ssp="+r.sspid,u+="&pub="+encodeURIComponent(r.pubid),u+="&site="+encodeURIComponent(r.siteid),u+="&appid="+encodeURIComponent(r.appid),u+="&appbundle="+encodeURIComponent(r.appbundle),u+="&placementid="+encodeURIComponent(r.placementid),u+="&requestid="+encodeURIComponent(r.requestid),u+="&userid="+encodeURIComponent(r.userid),u+="&useridorig="+encodeURIComponent(r.useridorig),u+="&domain="+encodeURIComponent(o.GetDomain()),u+="&ifa="+encodeURIComponent(r.ifa),u+="&dealid="+encodeURIComponent(r.dealid),u+="&traffictype="+r.traffictype,u+="&productlist="+i.join(","),u+="&starttime="+r.startTime;var l=document.createElement("iframe");l.style.display="none",l.style.visibility="hidden",l.src=u,document.body.appendChild(l);for(var m=0;m<d.length;m++)d[m]()},inhouseViewabilityTest:function(){o.RAEvent("rx_inhouseviewabilitytest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callIASRTDS(),r.callDVIQMRTDS(),r.callRXViewability()},iasTest:function(){o.RAEvent("rx_iastest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callIASRTDS()},forensiqTest:function(){o.RAEvent("rx_forensiqtest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callForensiq()},fraudlogixTest:function(){o.RAEvent("rx_fraudlogixtest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callFraudlogix()},dvIQMRTDSTest:function(){o.RAEvent("rx_dviqmrtdstest_"+r.impType+"_tag_beacon",r.sspid,encodeURIComponent(r.pubid),encodeURIComponent(r.siteid),encodeURIComponent(r.appid),encodeURIComponent(r.appbundle),encodeURIComponent(r.placementid),r.requestid,r.userid,encodeURIComponent(r.useridorig),encodeURIComponent(o.GetDomain()),encodeURIComponent(r.ifa),encodeURIComponent(r.dealid),r.traffictype,r.startTime),r.callDVIQMRTDS()}};n.exports=r},{"../viewability":6,"./consts":2,"./util":4}],4:[function(e,n,t){var i=e("./consts");n.exports={GetDomain:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length>0){var e=location.ancestorOrigins[location.ancestorOrigins.length-1];return e.replace(/.*?:\/\//g,"")}return location.hostname},RAEvent:function(e){var n=Array.from(arguments);n=n.slice(1),n.unshift(this.GetDomain()),n.unshift(i.APP_VERSION);var t=20,o=n.length<t?n.length:t,d="//rgaudit.1rx.io/rhythmanalytics/doc?hit_type=event";d+="&tracking_id="+e;for(var r=0;r<o;r++)d+="&dimension"+r+"="+n[r];var a=document.createElement("iframe");a.style.display="none",a.style.visibility="hidden",a.src=d,document.body.appendChild(a)}}},{"./consts":2}],5:[function(e,n,t){function i(){var e=(new Date).getTime();"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now&&(e+=performance.now());var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==n?t:3&t|8).toString(16)});return n}function o(e,n){for(var t=0;t<e.length;t++)n(e[t],t)}function d(e,n){"string"!=typeof n&&(n=document.location.href.toString());var t=new RegExp("[?&]"+e+"($|&|=([^&]*))","i"),i=t.exec(n);if(i instanceof Array)return"undefined"!=typeof i[2]&&(i[2]=decodeURIComponent(i[2])),i[2]}function r(e,n,t){var i;"function"==typeof document.addEventListener?i="addEventListener":document.attachEvent&&(i="attachEvent",n="on"+n),e[i](n,t)}function a(e,n){var t=e.innerWidth||n.body.clientWidth,i=e.innerHeight||n.body.clientHeight,o="undefined"!=typeof e.pageXOffset?e.pageXOffset:n.body.scrollLeft?n.body.scrollLeft:0,d="undefined"!=typeof e.pageYOffset?e.pageYOffset:n.body.scrollTop?n.body.scrollTop:0;return[o,d,o+t,d+i]}function c(e){for(var n=0,t=0,i=e.offsetWidth,o=e.offsetHeight;null!==e.offsetParent;)n+=e.offsetLeft,t+=e.offsetTop,e=e.offsetParent;return[n,t,n+i,t+o]}function s(e,n){return n.documentElement.clientHeight?n.documentElement.clientHeight:e.innerHeight?e.innerHeight:void 0}function p(e,n){return e[0]<n[2]&&e[2]>n[0]&&e[1]<n[3]&&e[3]>n[1]}n.exports={uuid:i,forEach:o,queryString:d,addEvent:r,getPageRect:a,getElementRect:c,rectsIntersect:p,getViewPortHeight:s}},{}],6:[function(e,n,t){function i(e,n,t){var i=0,o=O.getViewPortHeight(n,t),d=e.getBoundingClientRect();return i=((Math.min(o,d.bottom)-Math.max(d.top,0))/(d.height||d.bottom-d.top)).toFixed(2),i=Math.min(Math.max(i,0),1)}function o(e){try{v=JSON.parse(JSON.stringify(I)),D&&w&&(I.isPageVisible=document[w]?q.NO:q.YES),P&&(y=I.visibilityPercentage=i(P,f,document)||0,I.visibilityPercentage>=.75?I.visibilityPercentage=1:I.visibilityPercentage>=.5?I.visibilityPercentage=.75:I.visibilityPercentage>=.25?I.visibilityPercentage=.5:I.visibilityPercentage>0?I.visibilityPercentage=.25:I.visibilityPercentage=0,I.isAdVisible=I.visibilityPercentage>=_&&(!P.style.opacity||1===parseInt(P.style.opacity))?q.YES:q.NO),h&&C&&U&&(R=I.iframeVisibilityPercentage=i(C,U,U.document),I.iframeVisibilityPercentage>=.75?I.iframeVisibilityPercentage=1:I.iframeVisibilityPercentage>=.5?I.iframeVisibilityPercentage=.75:I.iframeVisibilityPercentage>=.25?I.iframeVisibilityPercentage=.5:I.iframeVisibilityPercentage>0?I.iframeVisibilityPercentage=.25:I.iframeVisibilityPercentage=0,I.isIframeVisible=I.iframeVisibilityPercentage>=_&&(!C.style.opacity||1===parseInt(C.style.opacity))?q.YES:q.NO),I.viewable=I.isPageVisible!==q.YES||I.isAdVisible!==q.YES||I.isIframe&&!I.isIframeVisible?q.NO:!h||C&&U?q.YES:q.UNKNOWN,JSON.stringify(I)!==JSON.stringify(v)?d(e):"unload"!==e&&"init"!==e||d(e)}catch(n){}}function d(e){var n=(new Date).getTime(),t=location.ancestorOrigins&&location.ancestorOrigins.length?location.ancestorOrigins[location.ancestorOrigins.length-1]:"",i={ancestor:encodeURIComponent(t),trigger:e,triggerCount:++T,timeSinceStart:n-S,isPageVisible:I.isPageVisible,isAdVisible:I.isAdVisible,isIframe:I.isIframe,isIframeVisible:I.isIframeVisible,iframeVisibilityPercentage:I.iframeVisibilityPercentage,ivp:R,visibilityPercentage:I.visibilityPercentage,vp:y,viewable:I.viewable};m(i)}function r(){I={isPageVisible:q.UNKNOWN,isAdVisible:q.UNKNOWN,visibilityPercentage:1,iframeVisibilityPercentage:1,isIframe:h,isIframeVisible:q.UNKNOWN,viewable:q.UNKNOWN},v={}}function a(){"undefined"!=typeof document.hidden?(w="hidden",D="visibilitychange"):"undefined"!=typeof document.mozHidden?(w="mozHidden",D="mozvisibilitychange"):"undefined"!=typeof document.msHidden?(w="msHidden",D="msvisibilitychange"):"undefined"!=typeof document.webkitHidden&&(w="webkitHidden",D="webkitvisibilitychange"),D&&w&&O.addEvent(document,D,function(){o("visibilityChange")})}function c(){V="boolean"!=typeof g.poll||g.poll,E="number"==typeof g.pollInterval?g.pollInterval:1e3,V&&(x=setInterval(function(){o("poll")},E))}function s(){O.addEvent(f,"beforeunload",function(){A||(A=!0,o("unload"))})}function p(){var e=document.currentScript||function(){var e=document.getElementsByTagName("script"),n=e[e.length-1];return O.forEach(e,function(e){e.src&&O.queryString("pub",e.src)===N&&O.queryString("placement",e.src)===k&&(n=e)}),n}();e&&(P=e.parentElement)}function u(){if(h)try{C=f.frameElement,U=f.parent}catch(e){}}function l(e,n,t,i){f=e,m=i,k=n,N=t,g=f["__viewabilityConfig_"+k]||f.__viewabilityConfig||{data:{app:"unknown",domain:document.domain}},h=f!==f.top,S=(new Date).getTime(),b=O.uuid(),T=0,_="number"==typeof g.visibilityThreshold?g.visibilityThreshold:.5,R=0,y=0,r(),a(),c(),s(),p(),u(),setTimeout(o,0,"init")}var m,f,g,b,v,I,R,y,h,C,U,P,w,D,_,V,x,E,A,T,S,O=(e("./lib/consts"),e("./lib/util_viewability")),k="",N="",q={NO:0,YES:1,UNKNOWN:2};n.exports=l},{"./lib/consts":2,"./lib/util_viewability":5}]},{},[1]);