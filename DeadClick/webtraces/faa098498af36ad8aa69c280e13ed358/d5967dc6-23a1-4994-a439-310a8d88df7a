/*!
 * @license MIT
 * newrelic-video-theplatform 0.2.0
 * Copyright New Relic <http://newrelic.com/>
 * @author Jordi Aguilar
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nrvideo=t():e.nrvideo=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.Core=t.VideoTrackerState=t.VideoTracker=t.Tracker=t.Emitter=t.Log=t.Chrono=t.Constants=void 0;var s=i(10),r=n(s),a=i(11),o=n(a),u=i(2),d=n(u),l=i(1),c=n(l),h=i(4),f=n(h),v=i(5),p=n(v),y=i(12),g=n(y),E=i(7),k=n(E),m=i(6);t.Constants=o.default,t.Chrono=d.default,t.Log=c.default,t.Emitter=f.default,t.Tracker=p.default,t.VideoTracker=g.default,t.VideoTrackerState=k.default,t.Core=r.default,t.version=m.version},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t,i){t=t||d.Levels.NOTICE,i=i||"darkcyan";var n=d.prefix;if(d.includeTime&&(n+=r()+" "),n+=o(t)+":",d.level<=t&&t!==d.Levels.SILENT)if(!d.colorful||"undefined"!=typeof document&&document.documentMode)a(e,n);else{var s;s=t===d.Levels.ERROR&&console.error?console.error:t===d.Levels.WARNING&&console.warn?console.warn:t===d.Levels.DEBUG&&console.debug?console.debug:console.log,n="%c"+n,e.splice(0,0,n,"color: "+i),s.apply(console,e)}}function r(){var e=new Date;return"["+("0"+e.getDate()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+"."+("00"+e.getMilliseconds()).slice(-3)+"]"}function a(e,t){if(e instanceof Array)for(var i in e)a(e[i],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+"â†µ"),console.log(e))}function o(e){return l[e]}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=function(){function e(){n(this,e)}return u(e,null,[{key:"error",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s(i,e.Levels.ERROR,"darkred")}},{key:"warn",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s(i,e.Levels.WARNING,"darkorange")}},{key:"notice",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s([].slice.call(arguments),e.Levels.NOTICE,"darkcyan")}},{key:"debug",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];s(i,e.Levels.DEBUG,"indigo")}},{key:"debugCommonVideoEvents",value:function(t,i,n){try{if(e.level<=e.Levels.DEBUG){n=n||function(t){e.debug("Event: "+t.type)};var s=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart","loadedmetadata"];i&&(null===i[0]?(i.shift(),s=i):s=s.concat(i));for(var r=0;r<s.length;r++)"function"==typeof t?t.call(window,s[r],n):t.on?t.on(s[r],n):t.addEventListener?t.addEventListener(s[r],n):t.addEventHandler?t.addEventHandler(s[r],n):e.warn("debugCommonVideoEvents: No common listener function found for ",t)}}catch(t){e.warn(t)}}}]),e}();d.Levels={SILENT:5,ERROR:4,WARNING:3,NOTICE:2,DEBUG:1,ALL:0},d.level=d.Levels.ERROR,d.colorful=!0,d.includeTime=!0,d.prefix="[nrvideo]";var l={4:"e",3:"w",2:"n",1:"d"};!function(){if("undefined"!=typeof window&&window.location&&window.location.search){var e=/\?.*&*nrvideo-debug=(.+)/i.exec(window.location.search);null!==e&&("true"===e[1]?d.level=d.Levels.ALL:d.level=e[1]),null!==/\?.*&*nrvideo-colors=false/i.exec(window.location.search)&&(d.colorful=!1)}}(),t.default=d},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e),this.reset()}return s(e,[{key:"reset",value:function(){this.startTime=0,this.stopTime=0,this.offset=0}},{key:"getDeltaTime",value:function(){return this.startTime?this.offset+((new Date).getTime()-this.startTime):null}},{key:"start",value:function(){this.startTime=(new Date).getTime(),this.stopTime=0}},{key:"stop",value:function(){return this.stopTime=(new Date).getTime(),this.getDeltaTime()}},{key:"clone",value:function(){var t=new e;return t.startTime=this.startTime,t.stopTime=this.stopTime,t.offset=this.offset,t}}]),e}();t.default=r},function(e,t){e.exports={name:"newrelic-video-theplatform",version:"0.2.0",description:"New relic tracker for theplatform",main:"src/index.js",scripts:{build:"webpack -p","build:dev":"webpack",watch:"webpack -p --progress --color --watch","watch:dev":"webpack --progress --color --watch",prezip:"npm run build",zip:"zip -P newrelic -x '*.DS_Store' 'samples/agent.js' '*.map' -r theplatform.zip dist samples README.md CHANGELOG.md EULA.md",clean:"rm -rf dist *.zip",deploy:"node scripts/deploy.js"},repository:{type:"git",url:"https://github.com/newrelic/video-theplatform-js.git"},author:"Jordi Aguilar",license:"MIT",dependencies:{"newrelic-video-core":"git+https://github.com/newrelic/video-core-js.git#v0.9.1"},devDependencies:{"aws-sdk":"^2.157.0","babel-core":"^6.25.0","babel-loader":"^7.1.1","babel-preset-env":"^1.6.0","videojs-ima":"^0.6.0",webpack:"^3.4.1"}}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(){n(this,e)}return s(e,[{key:"on",value:function(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this}},{key:"off",value:function(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}return this}},{key:"emit",value:function(e,t){var i=this;return this._listeners=this._listeners||{},t=t||{},Array.isArray(this._listeners[e])&&this._listeners[e].forEach(function(n){n.call(i,{type:e,data:t,target:i})}),Array.isArray(this._listeners["*"])&&this._listeners["*"].forEach(function(n){n.call(i,{type:e,data:t,target:i})}),this}}]),e}();t.default=r},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(6),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(u),l=i(4),c=n(l),h=i(2),f=n(h),v=function(e){function t(e){s(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.customData={},i.heartbeat=null,i.parentTracker=null,i._trackerReadyChrono=new f.default,i._trackerReadyChrono.start(),e=e||{},i.setOptions(e),i}return a(t,e),o(t,[{key:"setOptions",value:function(e){e&&(e.parentTracker&&(this.parentTracker=e.parentTracker),e.customData&&(this.customData=e.customData),e.heartbeat&&(this.heartbeat=e.heartbeat))}},{key:"dispose",value:function(){this.unregisterListeners()}},{key:"registerListeners",value:function(){}},{key:"unregisterListeners",value:function(){}},{key:"getHeartbeat",value:function(){return this.heartbeat?this.heartbeat:this.parentTracker&&this.parentTracker.heartbeat?this.parentTracker.heartbeat:3e4}},{key:"startHeartbeat",value:function(){this._heartbeatInterval=setInterval(this.sendHeartbeat.bind(this),Math.max(this.getHeartbeat(),5e3))}},{key:"stopHeartbeat",value:function(){this._heartbeatInterval&&clearInterval(this._heartbeatInterval)}},{key:"sendHeartbeat",value:function(e){this.send(t.Events.HEARTBEAT,e)}},{key:"getAttributes",value:function(e){e=e||{},e.trackerName=this.getTrackerName(),e.trackerVersion=this.getTrackerVersion(),e.coreVersion=d.version,e.timeSinceTrackerReady=this._trackerReadyChrono.getDeltaTime();for(var t in this.customData)e[t]=this.customData[t];return e}},{key:"getTrackerVersion",value:function(){return d.version}},{key:"getTrackerName",value:function(){return"base-tracker"}},{key:"send",value:function(e,t){this.emit(e,this.getAttributes(t))}}]),t}(c.default);v.Events={HEARTBEAT:"HEARTBEAT"},t.default=v},function(e,t){e.exports={_from:"git+https://github.com/newrelic/video-core-js.git#v0.9.1",_id:"newrelic-video-core@0.9.1",_inBundle:!1,_integrity:"sha1-tcYjwjA1ck8cJDIupOm+Jw4Zgq4=",_location:"/newrelic-video-core",_phantomChildren:{},_requested:{type:"git",raw:"newrelic-video-core@git+https://github.com/newrelic/video-core-js.git#v0.9.1",name:"newrelic-video-core",escapedName:"newrelic-video-core",rawSpec:"git+https://github.com/newrelic/video-core-js.git#v0.9.1",saveSpec:"git+https://github.com/newrelic/video-core-js.git#v0.9.1",fetchSpec:"https://github.com/newrelic/video-core-js.git",gitCommittish:"v0.9.1"},_requiredBy:["#USER","/"],_resolved:"git+https://github.com/newrelic/video-core-js.git#acf73b7903c9735588b1e6476a8c1a9c1dc9b592",_spec:"newrelic-video-core@git+https://github.com/newrelic/video-core-js.git#v0.9.1",_where:"/Users/jaguilargorina/workspace/nrvideo/trackers/theplatform",author:{name:"Jordi Aguilar"},bugs:{url:"https://github.com/newrelic/video-core-js/issues"},bundleDependencies:!1,dependencies:{},deprecated:!1,description:"New Relic video tracking core library",devDependencies:{"aws-sdk":"^2.150.0","babel-core":"^6.25.0","babel-loader":"^7.1.1","babel-preset-env":"^1.6.0",chai:"^4.1.0","ink-docstrap":"^1.3.0",jsdoc:"^3.5.4","jsdoc-babel":"^0.3.0",mocha:"^3.5.0",nyc:"^11.1.0",sinon:"^2.4.1",webpack:"^3.4.1"},homepage:"https://github.com/newrelic/video-core-js#readme",license:"MIT",main:"src/index.js",name:"newrelic-video-core",repository:{type:"git",url:"git+https://github.com/newrelic/video-core-js.git"},scripts:{build:"webpack -p","build:dev":"webpack",clean:"rm -rf dist coverage doc",deploy:"node scripts/deploy.js",doc:"jsdoc -c jsdoc.json -d doc",test:"nyc --reporter=html --reporter=text mocha --compilers js:babel-core/register",watch:"webpack -p --progress --color --watch","watch:dev":"webpack --progress --color --watch"},version:"0.9.1"}},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(2),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(){function e(){n(this,e),this.reset(),this._createdAt=Date.now()}return s(e,[{key:"reset",value:function(){this._viewSession=null,this._viewCount=0,this._isAd=!1,this.numberOfErrors=0,this.numberOfAds=0,this.numberOfVideos=0,this.resetFlags(),this.resetChronos()}},{key:"resetFlags",value:function(){this.isPlayerReady=!1,this.isRequested=!1,this.isStarted=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isAdBreak=!1}},{key:"resetChronos",value:function(){this.timeSinceRequested=new a.default,this.timeSinceStarted=new a.default,this.timeSincePaused=new a.default,this.timeSinceSeekBegin=new a.default,this.timeSinceBufferBegin=new a.default,this.timeSinceAdBreakStart=new a.default,this.timeSinceLastDownload=new a.default,this.timeSinceLastHeartbeat=new a.default,this.timeSinceLastRenditionChange=new a.default,this.timeSinceLastAdQuartile=new a.default,this.timeSinceLastAd=new a.default}},{key:"isAd",value:function(){return this._isAd}},{key:"setIsAd",value:function(e){this._isAd=e}},{key:"getViewSession",value:function(){if(!this._viewSession){var e=(new Date).getTime(),t=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);this._viewSession=e+"-"+t}return this._viewSession}},{key:"getViewId",value:function(){return this.getViewSession()+"-"+this._viewCount}},{key:"getStateAttributes",value:function(e){return e=e||{},this.isAd()?(this.isRequested&&(e.timeSinceAdRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastAdHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceAdStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSinceAdPaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceAdBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceAdSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),this.isAdBreak&&(e.timeSinceAdBreakBegin=this.timeSinceAdBreakStart.getDeltaTime()),e.numberOfAds=this.numberOfAds):(this.isRequested&&(e.timeSinceRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSincePaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),e.timeSinceLastAd=this.timeSinceLastAd.getDeltaTime(),e.numberOfVideos=this.numberOfVideos),e.numberOfErrors=this.numberOfErrors,e}},{key:"goViewCountUp",value:function(){this._viewCount++}},{key:"goPlayerReady",value:function(){return!this.isPlayerReady&&(this.isPlayerReady=!0,!0)}},{key:"goRequest",value:function(){return!this.isRequested&&(this.isRequested=!0,this.timeSinceRequested.start(),!0)}},{key:"goStart",value:function(){return!(!this.isRequested||this.isStarted)&&(this.isAd()?this.numberOfAds++:this.numberOfVideos++,this.isStarted=!0,this.timeSinceStarted.start(),!0)}},{key:"goEnd",value:function(){return!!this.isRequested&&(this.numberOfErrors=0,this.resetFlags(),this.timeSinceRequested.stop(),this.timeSinceStarted.stop(),!0)}},{key:"goPause",value:function(){return!(!this.isStarted||this.isPaused)&&(this.isPaused=!0,this.timeSincePaused.start(),!0)}},{key:"goResume",value:function(){return!(!this.isStarted||!this.isPaused)&&(this.isPaused=!1,this.timeSincePaused.stop(),!0)}},{key:"goBufferStart",value:function(){return!(!this.isStarted||this.isBuffering)&&(this.isBuffering=!0,this.timeSinceBufferBegin.start(),!0)}},{key:"goBufferEnd",value:function(){return!(!this.isStarted||!this.isBuffering)&&(this.isBuffering=!1,this.timeSinceBufferBegin.stop(),!0)}},{key:"goSeekStart",value:function(){return!(!this.isStarted||this.isSeeking)&&(this.isSeeking=!0,this.timeSinceSeekBegin.start(),!0)}},{key:"goSeekEnd",value:function(){return!(!this.isStarted||!this.isSeeking)&&(this.isSeeking=!1,this.timeSinceSeekBegin.stop(),!0)}},{key:"goAdBreakStart",value:function(){return!this.isAdBreak&&(this.isAdBreak=!0,this.timeSinceAdBreakStart.start(),!0)}},{key:"goAdBreakEnd",value:function(){return!!this.isAdBreak&&(this.isAdBreak=!1,this.timeSinceAdBreakStart.stop(),!0)}},{key:"goDownload",value:function(){this.timeSinceLastDownload.start()}},{key:"goHeartbeat",value:function(){this.timeSinceLastHeartbeat.start()}},{key:"goRenditionChange",value:function(){this.timeSinceLastRenditionChange.start()}},{key:"goAdQuartile",value:function(){this.timeSinceLastAdQuartile.start()}},{key:"goError",value:function(){this.numberOfErrors++}},{key:"goLastAd",value:function(){this.timeSinceLastAd.start()}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ThePlatformAdsTracker=void 0;var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),d=i(3),l=i(13),c=function(e){return e&&e.__esModule?e:{default:e}}(l),h=function(e){function t(e,i){n(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i));return r.scope=i?i.scope:void 0,!e&&$pdk&&r.setPlayer($pdk.controller),r.resetValues(),r}return r(t,e),a(t,[{key:"resetValues",value:function(){this.src=null,this.title=null,this.duration=null,this.playhead=null,this.renditionBitrate=null,this.renditionWidth=null,this.renditionHeight=null,this.live=null,this.muted=null}},{key:"getTrackerName",value:function(){return"theplatform"}},{key:"getTrackerVersion",value:function(){return d.version}},{key:"getVideoId",value:function(){return this.videoId}},{key:"getPlayhead",value:function(){return this.playhead}},{key:"getDuration",value:function(){return this.duration}},{key:"isLive",value:function(){return this.live}},{key:"getTitle",value:function(){return this.title}},{key:"getSrc",value:function(){return this.src}},{key:"getRenditionBitrate",value:function(){return this.renditionBitrate}},{key:"getRenditionWidth",value:function(){return this.renditionWidth}},{key:"getRenditionHeight",value:function(){return this.renditionHeight}},{key:"getPlayerVersion",value:function(){if($pdk)return $pdk.version.toString()}},{key:"isMuted",value:function(){return this.muted}},{key:"initAdTracker",value:function(){this.setAdsTracker(new c.default(this.player))}},{key:"registerListeners",value:function(){this.initAdTracker(),u.Log.debugCommonVideoEvents(this.player,[null,"OnMediaPause","OnMediaUnpause","OnClipInfoLoaded","OnMediaBuffering","OnMediaEnd","OnMediaError","OnVersionError","OnMediaPlay","OnMediaSeek","OnMediaStart","OnMute","OnMediaLoadStart","OnResetPlayer","OnReleaseEnd","OnReleaseStart","OnReleaseSelected","OnPlayerLoaded","OnMediaBufferStart","OnMediaBufferComplete","OnRenditionSwitched"],function(e){u.Log.debug("Event: "+e.type,e)}),this.player.addEventListener("OnPlayerLoaded",this.onPlayerLoaded.bind(this),this.scope),this.player.addEventListener("OnReleaseStart",this.onReleaseStart.bind(this),this.scope),this.player.addEventListener("OnReleaseEnd",this.onReleaseEnd.bind(this),this.scope),this.player.addEventListener("OnMediaLoadStart",this.onMediaLoadStart.bind(this),this.scope),this.player.addEventListener("OnMediaStart",this.onMediaStart.bind(this),this.scope),this.player.addEventListener("OnRenditionSwitched",this.onRenditionSwitched.bind(this),this.scope),this.player.addEventListener("OnMediaPlaying",this.onMediaPlaying.bind(this),this.scope),this.player.addEventListener("OnMediaPause",this.onMediaPause.bind(this),this.scope),this.player.addEventListener("OnMediaUnpause",this.onMediaUnpause.bind(this),this.scope),this.player.addEventListener("OnMediaError",this.onMediaError.bind(this),this.scope),this.player.addEventListener("OnReleaseError",this.onReleaseError.bind(this),this.scope),this.player.addEventListener("OnMediaSeek",this.onMediaSeek.bind(this),this.scope),this.player.addEventListener("OnMute",this.onMute.bind(this),this.scope),this.player.addEventListener("OnMediaBufferStart",this.onMediaBufferStart.bind(this),this.scope),this.player.addEventListener("OnMediaBufferComplete",this.onMediaBufferComplete.bind(this),this.scope)}},{key:"unregisterListeners",value:function(){this.player.removeEventListener("OnPlayerLoaded",this.onPlayerLoaded,this.scope),this.player.removeEventListener("OnReleaseStart",this.onReleaseStart,this.scope),this.player.removeEventListener("OnReleaseEnd",this.onReleaseEnd,this.scope),this.player.removeEventListener("OnMediaLoadStart",this.onMediaLoadStart,this.scope),this.player.removeEventListener("OnMediaStart",this.onMediaStart,this.scope),this.player.removeEventListener("OnRenditionSwitched",this.onRenditionSwitched,this.scope),this.player.removeEventListener("OnMediaPlaying",this.onMediaPlaying,this.scope),this.player.removeEventListener("OnMediaPause",this.onMediaPause,this.scope),this.player.removeEventListener("OnMediaUnpause",this.onMediaUnpause,this.scope),this.player.removeEventListener("OnMediaError",this.onMediaError,this.scope),this.player.removeEventListener("OnReleaseError",this.onReleaseError,this.scope),this.player.removeEventListener("OnMediaSeek",this.onMediaSeek,this.scope),this.player.removeEventListener("OnMute",this.onMute,this.scope),this.player.removeEventListener("OnMediaBufferStart",this.onMediaBufferStart,this.scope),this.player.removeEventListener("OnMediaBufferComplete",this.onMediaBufferComplete,this.scope)}},{key:"onPlayerLoaded",value:function(e){this.sendPlayerReady()}},{key:"onReleaseStart",value:function(e){this.title=e.data.title,e.data.release&&(this.duration=e.data.release.duration,this.renditionBitrate=e.data.release.bitrate),this.sendRequest()}},{key:"onReleaseEnd",value:function(e){this.sendEnd(),this.resetValues()}},{key:"onMediaLoadStart",value:function(e){var t=e.data,i=t.baseClip||t;i.isAd||(this.live="nonstop"===i.expression,this.src=i.URL,this.duration=i.trueLength||i.mediaLength,this.renditionBitrate=i.bitrate,this.renditionHeight=i.height,this.renditionWidth=i.width,this.videoId=i.contentID)}},{key:"onMediaStart",value:function(e){var t=e.data,i=t.baseClip||t;i.isAd||(this.live="nonstop"===i.expression,this.src=i.URL,this.duration=i.trueLength||i.mediaLength,this.renditionBitrate=i.bitrate,this.renditionHeight=i.height,this.renditionWidth=i.width,this.videoId=i.contentID)}},{key:"onMediaPlaying",value:function(e){this.adsTracker&&this.adsTracker.state.isRequested||(this.playhead=e.data.currentTimeAggregate||e.data.currentTime,this.sendStart(),this.sendBufferEnd(),this.sendSeekEnd())}},{key:"onMediaPause",value:function(e){this.sendPause()}},{key:"onMediaUnpause",value:function(e){this.sendResume()}},{key:"onRenditionSwitched",value:function(e){this.renditionBitrate=e.newRendition,this.sendRenditionChanged()}},{key:"onMediaError",value:function(e){var t=e.data.clip,i=t.baseClip||t;i.isAd?this.sendStart():(this.src=e.data.clip.URL||i.URL,this.title=e.data.clip.title,this.duration=e.data.clip.mediaLength,this.sendError({errorMessage:e.data.friendlyMessage,errorDetail:e.data.message}))}},{key:"onReleaseError",value:function(e){this.src=e.data.URL||e.data,this.sendError({errorMessage:"Release error"})}},{key:"onMediaSeek",value:function(e){this.sendSeekStart()}},{key:"onMute",value:function(e){this.muted=e.data}},{key:"onMediaBufferStart",value:function(e){var t=e.data;(t.baseClip||t).isAd||this.sendBufferStart()}},{key:"onMediaBufferComplete",value:function(e){var t=e.data;(t.baseClip||t).isAd||this.sendBufferEnd()}}]),t}(u.VideoTracker);t.default=h,t.ThePlatformAdsTracker=c.default},function(e,t,i){"use strict";var n=i(0),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(n),r=i(8),a=function(e){return e&&e.__esModule?e:{default:e}}(r);i(14),s.ThePlatformTracker=a.default,e.exports=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){var t=r(e.data);u.default.level<=u.default.Levels.DEBUG?u.default.notice("Sent",e.type,t):u.default.notice("Sent",e.type),d.send(e.type,t)}function r(e){var t={};for(var i in e)null!==e[i]&&void 0!==e[i]&&(t[i]=e[i]);return t}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(1),u=function(e){return e&&e.__esModule?e:{default:e}}(o),d=function(){function e(){n(this,e)}return a(e,null,[{key:"addTracker",value:function(e){e.on&&e.emit?(l.push(e),e.on("*",s)):u.default.error("Tried to load a non-tracker.",e)}},{key:"removeTracker",value:function(e){e.off("*",s),e.dispose();var t=l.indexOf(e);-1!==t&&l.splice(t,1)}},{key:"getTrackers",value:function(){return l}},{key:"send",value:function(e,t){"undefined"!=typeof newrelic&&newrelic.addPageAction?newrelic.addPageAction(e,t):c||(u.default.error("newrelic.addPageAction() is not available.","In order to use NewRelic Video you will need New Relic Browser Agent."),c=!0)}},{key:"sendError",value:function(t){e.send("ERROR",t)}}]),e}(),l=[],c=!1;t.default=d},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function e(){n(this,e)};s.AdPositions={PRE:"pre",MID:"mid",POST:"post"},t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){this.send(e.type,e.data)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(1),l=n(d),c=i(5),h=n(c),f=i(7),v=n(f),p=function(e){function t(e,i){s(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=new v.default,n.adsTracker=null,i=i||{},n.setOptions(i),e&&n.setPlayer(e,i.tag),l.default.notice("Tracker "+n.getTrackerName()+" v"+n.getTrackerVersion()+" is ready."),n}return a(t,e),u(t,[{key:"setOptions",value:function(e){e&&(e.adsTracker&&this.setAdsTracker(e.adsTracker),"boolean"==typeof e.isAd&&this.setIsAd(e.isAd),h.default.prototype.setOptions.apply(this,arguments))}},{key:"setPlayer",value:function(e,t){(this.player||this.tag)&&this.dispose(),"undefined"!=typeof document&&document.getElementById&&("string"==typeof e&&(e=document.getElementById(e)),"string"==typeof t&&(t=document.getElementById(t))),t=t||e,this.player=e,this.tag=t,this.registerListeners()}},{key:"isAd",value:function(){return this.state.isAd()}},{key:"setIsAd",value:function(e){this.state.setIsAd(e)}},{key:"setAdsTracker",value:function(e){this.disposeAdsTracker(),e&&(this.adsTracker=e,this.adsTracker.setIsAd(!0),this.adsTracker.parentTracker=this,this.adsTracker.on("*",o.bind(this)))}},{key:"disposeAdsTracker",value:function(){this.adsTracker&&(this.adsTracker.off("*",o),this.adsTracker.dispose())}},{key:"dispose",value:function(){this.stopHeartbeat(),this.disposeAdsTracker(),this.unregisterListeners(),this.player=null,this.tag=null}},{key:"registerListeners",value:function(){}},{key:"unregisterListeners",value:function(){}},{key:"getViewId",value:function(){return this.parentTracker?this.parentTracker.getViewId():this.state.getViewId()}},{key:"getViewSession",value:function(){return this.parentTracker?this.parentTracker.getViewSession():this.state.getViewSession()}},{key:"getVideoId",value:function(){return null}},{key:"getTitle",value:function(){return null}},{key:"isLive",value:function(){return null}},{key:"getBitrate",value:function(){return null}},{key:"getWebkitBitrate",value:function(){if(this.tag&&this.tag.webkitVideoDecodedByteCount){var e=void 0;if(this._lastWebkitBitrate){e=this.tag.webkitVideoDecodedByteCount;var t=e-this._lastWebkitBitrate,i=this.getHeartbeat()/1e3;e=Math.round(t/i*8)}return this._lastWebkitBitrate=this.tag.webkitVideoDecodedByteCount,e||null}}},{key:"getRenditionName",value:function(){return null}},{key:"getRenditionBitrate",value:function(){return null}},{key:"getRenditionShift",value:function(e){var t=this.getRenditionBitrate(),i=void 0;return this.isAd()?(i=this._lastAdRendition,e&&(this._lastAdRendition=t)):(i=this._lastRendition,e&&(this._lastRendition=t)),t&&i?t>i?"up":t<i?"down":null:null}},{key:"getRenditionHeight",value:function(){return this.tag?this.tag.videoHeight:null}},{key:"getRenditionWidth",value:function(){return this.tag?this.tag.videoWidth:null}},{key:"getDuration",value:function(){return this.tag?this.tag.duration:null}},{key:"getPlayhead",value:function(){return this.tag?this.tag.currentTime:null}},{key:"getLanguage",value:function(){return null}},{key:"getSrc",value:function(){return this.tag?this.tag.currentSrc:null}},{key:"getPlayrate",value:function(){return this.tag?this.tag.playbackRate:null}},{key:"isMuted",value:function(){return this.tag?this.tag.muted:null}},{key:"isFullscreen",value:function(){return null}},{key:"getCdn",value:function(){return null}},{key:"getPlayerName",value:function(){return this.getTrackerName()}},{key:"getPlayerVersion",value:function(){return null}},{key:"getFps",value:function(){return null}},{key:"isAutoplayed",value:function(){return this.tag?this.tag.autoplay:null}},{key:"getPreload",value:function(){return this.tag?this.tag.preload:null}},{key:"getAdQuartile",value:function(){return null}},{key:"getAdPosition",value:function(){return this.state.isStarted?"pre":"mid"}},{key:"getAdPartner",value:function(){return null}},{key:"getAdCreativeId",value:function(){return null}},{key:"getAttributes",value:function(e){e=h.default.prototype.getAttributes.apply(this,arguments),e.isAd=this.isAd(),e.viewSession=this.getViewSession(),e.viewId=this.getViewId(),e.playerName=this.getPlayerName(),e.playerVersion=this.getPlayerVersion();try{e.pageUrl=window.location.href}catch(e){}this.isAd()?(e.adId=this.getVideoId(),e.adTitle=this.getTitle(),e.adBitrate=this.getBitrate()||this.getWebkitBitrate(),e.adRenditionName=this.getRenditionName(),e.adRenditionBitrate=this.getRenditionBitrate(),e.adRenditionHeight=this.getRenditionHeight(),e.adRenditionWidth=this.getRenditionWidth(),e.adDuration=this.getDuration(),e.adPlayhead=this.getPlayhead(),e.adLanguage=this.getLanguage(),e.adSrc=this.getSrc(),e.adCdn=this.getCdn(),e.adIsMuted=this.isMuted(),e.adFps=this.getFps(),e.adQuartile=this.getAdQuartile(),e.adPosition=this.getAdPosition(),e.adCreativeId=this.getAdCreativeId(),e.adPartner=this.getAdPartner()):(e.contentId=this.getVideoId(),e.contentTitle=this.getTitle(),e.contentIsLive=this.isLive(),e.contentBitrate=this.getBitrate()||this.getWebkitBitrate(),e.contentRenditionName=this.getRenditionName(),e.contentRenditionBitrate=this.getRenditionBitrate(),e.contentRenditionHeight=this.getRenditionHeight(),e.contentRenditionWidth=this.getRenditionWidth(),e.contentDuration=this.getDuration(),e.contentPlayhead=this.getPlayhead(),e.contentLanguage=this.getLanguage(),e.contentSrc=this.getSrc(),e.contentPlayrate=this.getPlayrate(),e.contentIsFullscreen=this.isFullscreen(),e.contentIsMuted=this.isMuted(),e.contentCdn=this.getCdn(),e.contentIsAutoplayed=this.isAutoplayed(),e.contentPreload=this.getPreload(),e.contentFps=this.getFps()),this.state.getStateAttributes(e);for(var t in this.customData)e[t]=this.customData[t];return e}},{key:"sendPlayerReady",value:function(e){this.state.goPlayerReady()&&(e=e||{},this.send(t.Events.PLAYER_READY,e))}},{key:"sendRequest",value:function(e){if(this.state.goRequest()){this.state.goViewCountUp();var i=this.isAd()?t.Events.AD_REQUEST:t.Events.CONTENT_REQUEST;this.send(i,e),this.startHeartbeat(),this.state.goHeartbeat()}}},{key:"sendStart",value:function(e){if(this.state.goStart()){var i=this.isAd()?t.Events.AD_START:t.Events.CONTENT_START;this.send(i,e)}}},{key:"sendEnd",value:function(e){if(this.state.goEnd()){e=e||{};var i=void 0;this.isAd()?(i=t.Events.AD_END,e.timeSinceAdRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceAdStarted=this.state.timeSinceStarted.getDeltaTime()):(i=t.Events.CONTENT_END,e.timeSinceRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceStarted=this.state.timeSinceStarted.getDeltaTime()),this.stopHeartbeat(),this.send(i,e),this.parentTracker&&this.isAd()&&this.parentTracker.state.goLastAd(),this.state.goViewCountUp()}}},{key:"sendPause",value:function(e){if(this.state.goPause()){var i=this.isAd()?t.Events.AD_PAUSE:t.Events.CONTENT_PAUSE;this.send(i,e)}}},{key:"sendResume",value:function(e){if(this.state.goResume()){e=e||{};var i=void 0;this.isAd()?(i=t.Events.AD_RESUME,e.timeSinceAdPaused=this.state.timeSincePaused.getDeltaTime()):(i=t.Events.CONTENT_RESUME,e.timeSincePaused=this.state.timeSincePaused.getDeltaTime()),this.send(i,e)}}},{key:"sendBufferStart",value:function(e){if(this.state.goBufferStart()){var i=void 0;i=this.isAd()?t.Events.AD_BUFFER_START:t.Events.CONTENT_BUFFER_START,this.send(i,e)}}},{key:"sendBufferEnd",value:function(e){if(this.state.goBufferEnd()){e=e||{};var i=void 0;this.isAd()?(i=t.Events.AD_BUFFER_END,e.timeSinceAdBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()):(i=t.Events.CONTENT_BUFFER_END,e.timeSinceBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()),this.send(i,e)}}},{key:"sendSeekStart",value:function(e){if(this.state.goSeekStart()){var i=void 0;i=this.isAd()?t.Events.AD_SEEK_START:t.Events.CONTENT_SEEK_START,this.send(i,e)}}},{key:"sendSeekEnd",value:function(e){if(this.state.goSeekEnd()){e=e||{};var i=void 0;this.isAd()?(i=t.Events.AD_SEEK_END,e.timeSinceAdSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()):(i=t.Events.CONTENT_SEEK_END,e.timeSinceSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()),this.send(i,e)}}},{key:"sendDownload",value:function(e){e=e||{},e.state||l.default.warn("Called sendDownload without { state: xxxxx }."),this.send(t.Events.DOWNLOAD,e),this.state.goDownload()}},{key:"sendError",value:function(e){this.state.goError();var i=this.isAd()?t.Events.AD_ERROR:t.Events.CONTENT_ERROR;this.send(i,e)}},{key:"sendRenditionChanged",value:function(e){e=e||{},e.timeSinceLastRenditionChange=this.state.timeSinceLastRenditionChange.getDeltaTime(),e.shift=this.getRenditionShift(!0);var i=void 0;i=this.isAd()?t.Events.AD_RENDITION_CHANGE:t.Events.CONTENT_RENDITION_CHANGE,this.send(i,e),this.state.goRenditionChange()}},{key:"sendHeartbeat",value:function(e){if(this.state.isRequested){var i=void 0;i=this.isAd()?t.Events.AD_HEARTBEAT:t.Events.CONTENT_HEARTBEAT,this.send(i,e),this.state.goHeartbeat()}}},{key:"sendAdBreakStart",value:function(e){this.isAd()&&this.state.goAdBreakStart()&&this.send(t.Events.AD_BREAK_START,e)}},{key:"sendAdBreakEnd",value:function(e){this.isAd()&&this.state.goAdBreakEnd()&&(e=e||{},e.timeSinceAdBreakBegin=this.state.timeSinceAdBreakStart.getDeltaTime(),this.send(t.Events.AD_BREAK_END,e))}},{key:"sendAdQuartile",value:function(e){this.isAd()&&(e=e||{},e.quartile||l.default.warn("Called sendAdQuartile without { quartile: xxxxx }."),e.timeSinceLastAdQuartile=this.state.timeSinceLastAdQuartile.getDeltaTime(),this.send(t.Events.AD_QUARTILE,e),this.state.goAdQuartile())}},{key:"sendAdClick",value:function(e){this.isAd()&&(e=e||{},e.url||l.default.warn("Called sendAdClick without { url: xxxxx }."),this.send(t.Events.AD_CLICK,e))}}]),t}(h.default);p.Events={PLAYER_READY:"PLAYER_READY",DOWNLOAD:"DOWNLOAD",ERROR:"ERROR",CONTENT_REQUEST:"CONTENT_REQUEST",CONTENT_START:"CONTENT_START",CONTENT_END:"CONTENT_END",CONTENT_PAUSE:"CONTENT_PAUSE",CONTENT_RESUME:"CONTENT_RESUME",CONTENT_SEEK_START:"CONTENT_SEEK_START",CONTENT_SEEK_END:"CONTENT_SEEK_END",CONTENT_BUFFER_START:"CONTENT_BUFFER_START",CONTENT_BUFFER_END:"CONTENT_BUFFER_END",CONTENT_HEARTBEAT:"CONTENT_HEARTBEAT",CONTENT_RENDITION_CHANGE:"CONTENT_RENDITION_CHANGE",CONTENT_ERROR:"CONTENT_ERROR",AD_REQUEST:"AD_REQUEST",AD_START:"AD_START",AD_END:"AD_END",AD_PAUSE:"AD_PAUSE",AD_RESUME:"AD_RESUME",AD_SEEK_START:"AD_SEEK_START",AD_SEEK_END:"AD_SEEK_END",AD_BUFFER_START:"AD_BUFFER_START",AD_BUFFER_END:"AD_BUFFER_END",AD_HEARTBEAT:"AD_HEARTBEAT",AD_RENDITION_CHANGE:"AD_RENDITION_CHANGE",AD_ERROR:"AD_ERROR",AD_BREAK_START:"AD_BREAK_START",AD_BREAK_END:"AD_BREAK_END",AD_QUARTILE:"AD_QUARTILE",AD_CLICK:"AD_CLICK"},t.default=p},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=i(0),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(o),d=i(3),l=function(e){function t(){return n(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),a(t,[{key:"resetValues",value:function(){this.src=null,this.title=null,this.duration=null,this.playhead=null,this.position=null,this.bitrate=null}},{key:"getTrackerName",value:function(){return"theplatform-ads"}},{key:"getTrackerVersion",value:function(){return d.version}},{key:"getVideoId",value:function(){return this.videoId}},{key:"getDuration",value:function(){return this.duration}},{key:"getResource",value:function(){return this.src}},{key:"getPlayhead",value:function(){return this.playhead}},{key:"getTitle",value:function(){return this.title}},{key:"getRenditionBitrate",value:function(){return this.bitrate}},{key:"getAdPosition",value:function(){return this.position}},{key:"registerListeners",value:function(){this.player.addEventListener("OnMediaLoadStart",this.onMediaLoadStart.bind(this),this.scope),this.player.addEventListener("OnMediaError",this.onMediaError.bind(this),this.scope),this.player.addEventListener("OnMediaStart",this.onMediaStart.bind(this),this.scope),this.player.addEventListener("OnMediaEnd",this.onMediaEnd.bind(this),this.scope),this.player.addEventListener("OnMediaPlaying",this.onMediaPlaying.bind(this),this.scope),this.player.addEventListener("OnMediaPause",this.onMediaPause.bind(this),this.scope),this.player.addEventListener("OnMediaUnpause",this.onMediaUnpause.bind(this),this.scope),this.player.addEventListener("OnMediaBufferStart",this.onMediaBufferStart.bind(this),this.scope),this.player.addEventListener("OnMediaBufferComplete",this.onMediaBufferComplete.bind(this),this.scope)}},{key:"unregisterListeners",value:function(){this.player.removeEventListener("OnMediaLoadStart",this.onMediaLoadStart,this.scope),this.player.removeEventListener("OnMediaError",this.onMediaError,this.scope),this.player.removeEventListener("OnMediaStart",this.onMediaStart,this.scope),this.player.removeEventListener("OnMediaEnd",this.onMediaEnd,this.scope),this.player.removeEventListener("OnMediaPlaying",this.onMediaPlaying,this.scope),this.player.removeEventListener("OnMediaPause",this.onMediaPause,this.scope),this.player.removeEventListener("OnMediaUnpause",this.onMediaUnpause,this.scope),this.player.removeEventListener("OnMediaBufferStart",this.onMediaBufferStart,this.scope),this.player.removeEventListener("OnMediaBufferComplete",this.onMediaBufferComplete,this.scope)}},{key:"onMediaLoadStart",value:function(e){var t=e.data,i=t.baseClip||t;i.isAd&&(this.duration=i.releaseLength,this.bitrate=i.bitrate,this.src=i.URL,this.title=i.title||e.data.title,this.videoId=i.contentID,i.isMid?this.position=u.Constants.AdPositions.MID:this.position=u.Constants.AdPositions.PRE,this.sendRequest())}},{key:"onMediaStart",value:function(e){var t=e.data,i=t.baseClip||t;i.isAd&&(this.duration=i.releaseLength,this.bitrate=i.bitrate,this.src=i.URL,this.title=i.title||e.data.title,this.videoId=i.contentID,i.isMid?this.position=u.Constants.AdPositions.MID:this.position=u.Constants.AdPositions.PRE)}},{key:"onMediaError",value:function(e){this.state.isRequested&&(this.sendError({errorMessage:e.data.friendlyMessage,errorDetail:e.data.message}),this.sendEnd())}},{key:"onMediaEnd",value:function(e){this.sendEnd(),this.resetValues()}},{key:"onMediaPlaying",value:function(e){this.state.isRequested&&(this.playhead=e.data.currentTimeAggregate||e.data.currentTime,this.sendStart(),this.sendBufferEnd())}},{key:"onMediaPause",value:function(e){this.sendPause()}},{key:"onMediaUnpause",value:function(e){this.sendResume()}},{key:"onMediaBufferStart",value:function(e){var t=e.data;(t.baseClip||t).isAd&&this.sendBufferStart()}},{key:"onMediaBufferComplete",value:function(e){var t=e.data;(t.baseClip||t).isAd&&this.sendBufferEnd()}}]),t}(u.VideoTracker);t.default=l},function(e,t,i){"use strict";var n=i(3),s=i(8),r=function(e){return e&&e.__esModule?e:{default:e}}(s),a=i(0),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(a);!function(){var e={VERSION:n.version,tracker:null,initialize:function(e){this.tracker=new r.default(e.controller,e.vars),o.Core.addTracker(this.tracker)}};$pdk.controller.plugInLoaded(e,null)}()}])});
//# sourceMappingURL=newrelic-video-theplatform.min.js.map