!function(t,e,i){function s(i,s){this.element=i,this.settings=t.extend({},n,s),this._defaults=n,this._name=a,this.settings.cleanUrl=this.settings.URL.split(/[\?#]/).shift();var o=this.settings.services;t.isArray(o)||(o=this.settings.services.desktop,e.matchDevice&&(o=e.matchDevice("tablet")?this.settings.services.tablet:e.matchDevice("wide-phone")||e.matchDevice("phone")?this.settings.services.phone:o)),this.settings.services=o,this.init()}var a="AolShareButtons",n={twitterName:"aoluk",services:{desktop:["facebook","twitter","googleplus","pinterest","email"],tablet:["facebook","twitter","googleplus","pinterest","email"],phone:["facebook","twitter","googleplus","pinterest","email"]},trackingPrefix:"ncid=",showWhatsapp:!1,URL:location.href,media:!1,title:!1,stylesheets:["https://s.aolcdn.com/os/ukmedia/plugins/aolshare/fonts/icons.css","https://s.aolcdn.com/os/ukmedia/plugins/aolshare/default.min.css"],stylesheetOverride:!1,emailBodyPrefix:"Check out this article: ",anchorName:!1,cacheBuster:"cb20170308"},o=!1;t.extend(s.prototype,{init:function(){var e=this;e.$elem=t(e.element);var s=t.trim(t("meta[name='twitter:title']").attr("content"));s=encodeURIComponent(""===s?i.title:s);var a={};a.url=e.settings.URL,a.css={},a.css.standard=[],a.services=e.settings.services,a.trackingPrefix=e.settings.trackingPrefix,a.templates={twitter:{twitterStatus:["url={{url}}&text=",s].join("")}},e.settings.twitterName&&"string"==typeof e.settings.twitterName&&(a.templates.twitter.twitterStatus+=["&via=",e.settings.twitterName].join("")),a.plugins={email:{init:null,className:"share-icon-email",href:["mailto:?subject={{title}}&body=","string"==typeof e.settings.emailBodyPrefix?e.settings.emailBodyPrefix:""," {{url}}"].join(""),trigger_new_window:!1},facebook:{className:"share-icon-facebook"},googleplus:{className:"share-icon-google-plus"},twitter:{className:"share-icon-twitter"},pinterest:{className:"share-icon-pinterest"}};var n=e.facebookDialogUrl();n&&(a.plugins.facebook={href:n,className:"share-icon-facebook"}),e.settings.media&&(a.media=e.settings.media),e.settings.title&&(a.title=e.settings.title),e.addStyles(),e.styleID="aol-share-custom",e.writeCSS(),setTimeout(function(){e.$elem.aolShare(a),e.updateShareUI()},0)},facebookDialogUrl:function(){var t=this,e=!1;if(t.$elem[0].hasAttribute("data-app-id")&&null!==t.$elem.attr("data-app-id").match(/^\d{4,}$/)){var s=t.$elem.attr("data-app-id"),a="https://www.facebook.com/dialog/feed",n=t.$elem.data(),o=t.formattedUrl("aolshare_facebook"),r="";if(null!==n.imgSrc.match(/^(https?:)?\/\//i)&&null!==n.redirPath.match(/^\//i)){n.subTitle&&n.caption?r=[n.subTitle,": ",n.caption].join(""):n.subTitle?r=n.subTitle:n.caption&&(r=n.caption);var l=["app_id=",s,"&","link=",encodeURIComponent(o),"&","picture=",n.imgSrc,"&","name=",encodeURIComponent(n.pageTitle||i.title),"&","caption=",location.hostname,"&","description=",encodeURIComponent(r),"&","redirect_uri=",[location.protocol,"//",location.hostname,n.redirPath].join(""),"&","display=","popup"];e=[a,"?",l.join("")].join("")}}return e},formattedUrl:function(t){var e=this,i=e.settings.URL,s=-1!==i.indexOf("?")&&i.split("?")||!1,a=-1!==i.indexOf("#")&&i.split("#")||!1;if(null!==i.match(new RegExp(e.settings.trackingPrefix,"gi")))i=i.replace(new RegExp(e.settings.trackingPrefix+"[^&#]+","gi"),e.settings.trackingPrefix+t);else if(s){var n=s.pop().split("&");n.splice(0,0,e.settings.trackingPrefix+t),i=e.settings.cleanUrl+"?"+n.join("&")}else if(a){var o=["#",a.pop()].join("");i=e.settings.cleanUrl+"?"+e.settings.trackingPrefix+t+o}else i+="?"+e.settings.trackingPrefix+t;return i},addStyles:function(){t("#aolshare-api-styles").length||t("head").append('<style id="aolshare-api-styles" type="text/css">.aol-share{visibility:hidden}.aol-share.ui-built{visibility:visible}</style>')},writeCSS:function(){var t=this;if(!o){var e=i,s=e.getElementsByTagName("head")[0];t.settings.stylesheets.forEach(function(e){s.appendChild(t.loadCSSFile(e))}),t.settings.stylesheetOverride&&s.appendChild(t.loadCSSFile(t.settings.stylesheetOverride,!1)),t.removeInlineCSS(),o=!0}},loadCSSFile:function(t,e){var s=this,a=i,n=a.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t+"?version="+(s.settings.cacheBuster||20170308)),e&&n.setAttribute("id",e),n},removeInlineCSS:function(){var e=this,i=t("#"+e.styleID),s=i.siblings("style");s.each(function(){var e=t(this),i=e.text();(i.replace(/\s+/g,"").match(/aolshare\-sprite\.png/gi)||i.replace(/\s+/g,"").match(/a\.aol\-share\-stumbleupon/gi))&&e.detach().remove()})},updateShareUI:function(){var e=this,s=encodeURIComponent;try{var a=t("div.aol-share:not(.ui-built)"),n=location.hostname.replace(/(www\.)?([^\.]+\.sandbox\.)?([^\.]+).+/i,"$3");if(a.length<=0)throw new Error("Loading share icons...");if(a.is("aol-share-custom")||a.addClass("aolshare-custom"),a.addClass("is-hidden"),a.find(" > a").each(function(){var e=t(this),i=t.trim(e.attr("class").replace("share-icon-",""));i="google-plus"===i?"google+":i,e.append(i)}),a.addClass(n),e.settings.showWhatsapp&&/iphone/gi.test(navigator.userAgent)){var o=e.formattedUrl("aolshare_whatsapp"),r=s(i.title||""),l=["text=",r," ",s(o)].join(""),c=['data-text="',r,'" data-href="',s(o),'"'].join(""),h=[l,'" ',c].join("");if(a.append('<a href="whatsapp://send?'+h+' class="share-icon-whatsapp"></a>'),"[object Array]"===Object.prototype.toString.call(e.settings.showWhatsapp))for(var p=e.settings.showWhatsapp.length,d=0;p>d;d++)a.find(".share-icon-"+e.settings.showWhatsapp[d]).hide()}a.addClass("ui-built").removeClass("is-hidden")}catch(g){setTimeout(function(){e.updateShareUI()},500)}}}),t.fn[a]=function(e){return this.each(function(){t.data(this,"plugin_"+a)||t.data(this,"plugin_"+a,new s(this,e))}),this}}(jQuery,window,document);