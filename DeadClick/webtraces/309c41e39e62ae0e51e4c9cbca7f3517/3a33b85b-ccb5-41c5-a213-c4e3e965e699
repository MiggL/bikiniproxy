(function(l){"function"===typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],l):"undefined"!==typeof module&&module.exports?l(require("jquery")):l(jQuery)})(function(l){function Y(e){!e||void 0!==e.allowPageScroll||void 0===e.swipe&&void 0===e.swipeStatus||(e.allowPageScroll="none");void 0!==e.click&&void 0===e.tap&&(e.tap=e.click);e||(e={});e=l.extend({},l.fn.swipe.defaults,e);return this.each(function(){var b=l(this),m=b.data("TouchSwipe");m||(m=new qa(this,e),b.data("TouchSwipe",m))})}
function qa(e,b){function m(a){if(!0!==d.data("TouchSwipe_intouch")&&!(0<l(a.target).closest(b.excludedElements,d).length)){var c=a.originalEvent?a.originalEvent:a,f,D=c.touches,e=D?D[0]:c;g="start";D?h=D.length:!1!==b.preventDefaultEvents&&a.preventDefault();p=0;x=r=q=null;z=A=n=0;v=1;y=0;N=Y();O=I=0;P(0,e);if(!D||h===b.fingers||"all"===b.fingers||J()){if(Q=B(),2==h&&(P(1,D[1]),A=z=Z(k[0].start,k[1].start)),b.swipeStatus||b.pinchStatus)f=w(c,g)}else f=!1;if(!1===f)return g="cancel",w(c,g),f;b.hold&&
(K=setTimeout(l.proxy(function(){d.trigger("hold",[c.target]);b.hold&&(f=b.hold.call(d,c,c.target))},this),b.longTapThreshold));R(!0);return null}}function aa(a){var c,f,d,e=a.originalEvent?a.originalEvent:a;if("end"!==g&&"cancel"!==g&&!S()){var m;c=e.touches;var u=ja(c?c[0]:e);L=B();c&&(h=c.length);b.hold&&clearTimeout(K);g="move";2==h&&(0==A?(P(1,c[1]),A=z=Z(k[0].start,k[1].start)):(ja(c[1]),z=Z(k[0].end,k[1].end),x=1>v?"out":"in"),v=(z/A*1).toFixed(2),y=Math.abs(A-z));if(h===b.fingers||"all"===
b.fingers||!c||J()){q=ka(u.start,u.end);r=ka(u.last,u.end);m=r;if(!1!==b.preventDefaultEvents)if("none"===b.allowPageScroll)a.preventDefault();else switch(c="auto"===b.allowPageScroll,m){case "left":(b.swipeLeft&&c||!c&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "right":(b.swipeRight&&c||!c&&"horizontal"!=b.allowPageScroll)&&a.preventDefault();break;case "up":(b.swipeUp&&c||!c&&"vertical"!=b.allowPageScroll)&&a.preventDefault();break;case "down":(b.swipeDown&&c||!c&&"vertical"!=
b.allowPageScroll)&&a.preventDefault()}m=u.start;a=u.end;p=Math.round(Math.sqrt(Math.pow(a.x-m.x,2)+Math.pow(a.y-m.y,2)));n=L-Q;m=q;a=p;a=Math.max(a,la(m));N[m].distance=a;m=w(e,g);if(!b.triggerOnTouchEnd||b.triggerOnTouchLeave){a=!0;if(b.triggerOnTouchLeave){d=l(this);var t=d.offset();a=t.left;c=t.left+d.outerWidth();f=t.top;d=t.top+d.outerHeight();u=u.end;a=u.x>a&&u.x<c&&u.y>f&&u.y<d}!b.triggerOnTouchEnd&&a?g=ba("move"):b.triggerOnTouchLeave&&!a&&(g=ba("end"));"cancel"!=g&&"end"!=g||w(e,g)}}else g=
"cancel",w(e,g);!1===m&&(g="cancel",w(e,g))}}function ca(a){var c=a.originalEvent?a.originalEvent:a,f=c.touches;if(f){if(f.length&&!S())return I=B(),O=c.touches.length+1,!0;if(f.length&&S())return!0}S()&&(h=O);L=B();n=L-Q;da()||!ea()?(g="cancel",w(c,g)):b.triggerOnTouchEnd||0==b.triggerOnTouchEnd&&"move"===g?(!1!==b.preventDefaultEvents&&a.preventDefault(),g="end",w(c,g)):!b.triggerOnTouchEnd&&b.tap?(g="end",t(c,g,"tap")):"move"===g&&(g="cancel",w(c,g));R(!1);return null}function E(){z=A=Q=L=h=0;
v=1;O=I=0;R(!1)}function fa(a){a=a.originalEvent?a.originalEvent:a;b.triggerOnTouchLeave&&(g=ba("end"),w(a,g))}function ma(){d.unbind(T,m);d.unbind(U,E);d.unbind(ga,aa);d.unbind(ha,ca);F&&d.unbind(F,fa);R(!1)}function ba(a){var c=a,f=b.maxTimeThreshold?n>=b.maxTimeThreshold?!1:!0:!0,d=ea(),e=da();!f||e?c="cancel":!d||"move"!=a||b.triggerOnTouchEnd&&!b.triggerOnTouchLeave?!d&&"end"==a&&b.triggerOnTouchLeave&&(c="cancel"):c="end";return c}function w(a,c){var f,d=a.touches;if(na()&&ia()||ia())f=t(a,
c,"swipe");(oa()&&J()||J())&&!1!==f&&(f=t(a,c,"pinch"));pa()&&b.doubleTap&&!1!==f?f=t(a,c,"doubletap"):n>b.longTapThreshold&&10>p&&b.longTap&&!1!==f?f=t(a,c,"longtap"):(1===h||!G)&&(isNaN(p)||p<b.threshold)&&b.tap&&!1!==f&&(f=t(a,c,"tap"));"cancel"===c&&(ia()&&(f=t(a,c,"swipe")),J()&&(f=t(a,c,"pinch")),E(a));"end"===c&&(d?d.length||E(a):E(a));return f}function t(a,c,f){var e;if("swipe"==f){d.trigger("swipeStatus",[c,q||null,p||0,n||0,h,k,r]);if(b.swipeStatus&&(e=b.swipeStatus.call(d,a,c,q||null,p||
0,n||0,h,k,r),!1===e))return!1;if("end"==c&&na()){clearTimeout(M);clearTimeout(K);d.trigger("swipe",[q,p,n,h,k,r]);if(b.swipe&&(e=b.swipe.call(d,a,q,p,n,h,k,r),!1===e))return!1;switch(q){case "left":d.trigger("swipeLeft",[q,p,n,h,k,r]);b.swipeLeft&&(e=b.swipeLeft.call(d,a,q,p,n,h,k,r));break;case "right":d.trigger("swipeRight",[q,p,n,h,k,r]);b.swipeRight&&(e=b.swipeRight.call(d,a,q,p,n,h,k,r));break;case "up":d.trigger("swipeUp",[q,p,n,h,k,r]);b.swipeUp&&(e=b.swipeUp.call(d,a,q,p,n,h,k,r));break;
case "down":d.trigger("swipeDown",[q,p,n,h,k,r]),b.swipeDown&&(e=b.swipeDown.call(d,a,q,p,n,h,k,r))}}}if("pinch"==f){d.trigger("pinchStatus",[c,x||null,y||0,n||0,h,v,k]);if(b.pinchStatus&&(e=b.pinchStatus.call(d,a,c,x||null,y||0,n||0,h,v,k),!1===e))return!1;if("end"==c&&oa())switch(x){case "in":d.trigger("pinchIn",[x||null,y||0,n||0,h,v,k]);b.pinchIn&&(e=b.pinchIn.call(d,a,x||null,y||0,n||0,h,v,k));break;case "out":d.trigger("pinchOut",[x||null,y||0,n||0,h,v,k]),b.pinchOut&&(e=b.pinchOut.call(d,a,
x||null,y||0,n||0,h,v,k))}}if("tap"==f){if("cancel"===c||"end"===c)clearTimeout(M),clearTimeout(K),b.doubleTap&&!pa()?(C=B(),M=setTimeout(l.proxy(function(){C=null;d.trigger("tap",[a.target]);b.tap&&(e=b.tap.call(d,a,a.target))},this),b.doubleTapThreshold)):(C=null,d.trigger("tap",[a.target]),b.tap&&(e=b.tap.call(d,a,a.target)))}else if("doubletap"==f){if("cancel"===c||"end"===c)clearTimeout(M),clearTimeout(K),C=null,d.trigger("doubletap",[a.target]),b.doubleTap&&(e=b.doubleTap.call(d,a,a.target))}else"longtap"!=
f||"cancel"!==c&&"end"!==c||(clearTimeout(M),C=null,d.trigger("longtap",[a.target]),b.longTap&&(e=b.longTap.call(d,a,a.target)));return e}function ea(){var a=!0;null!==b.threshold&&(a=p>=b.threshold);return a}function da(){var a=!1;null!==b.cancelThreshold&&null!==q&&(a=la(q)-p>=b.cancelThreshold);return a}function oa(){var a=h===b.fingers||"all"===b.fingers||!G,c=0!==k[0].end.x,f;f=null!==b.pinchThreshold?y>=b.pinchThreshold:!0;return a&&c&&f}function J(){return!!(b.pinchStatus||b.pinchIn||b.pinchOut)}
function na(){var a=b.maxTimeThreshold?n>=b.maxTimeThreshold?!1:!0:!0,c=ea(),f=h===b.fingers||"all"===b.fingers||!G,d=0!==k[0].end.x;return!da()&&d&&f&&c&&a}function ia(){return!!(b.swipe||b.swipeStatus||b.swipeLeft||b.swipeRight||b.swipeUp||b.swipeDown)}function pa(){if(null==C)return!1;var a=B();return!!b.doubleTap&&a-C<=b.doubleTapThreshold}function S(){var a=!1;I&&B()-I<=b.fingerReleaseThreshold&&(a=!0);return a}function R(a){d&&(!0===a?(d.bind(ga,aa),d.bind(ha,ca),F&&d.bind(F,fa)):(d.unbind(ga,
aa,!1),d.unbind(ha,ca,!1),F&&d.unbind(F,fa,!1)),d.data("TouchSwipe_intouch",!0===a))}function P(a,b){var c={start:{x:0,y:0},last:{x:0,y:0},end:{x:0,y:0}};c.start.x=c.last.x=c.end.x=b.pageX||b.clientX;c.start.y=c.last.y=c.end.y=b.pageY||b.clientY;return k[a]=c}function ja(a){var b=void 0!==a.identifier?a.identifier:0,d=k[b]||null;null===d&&(d=P(b,a));d.last.x=d.end.x;d.last.y=d.end.y;d.end.x=a.pageX||a.clientX;d.end.y=a.pageY||a.clientY;return d}function la(a){if(N[a])return N[a].distance}function Y(){var a=
{};a.left=V("left");a.right=V("right");a.up=V("up");a.down=V("down");return a}function V(a){return{direction:a,distance:0}}function Z(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function ka(a,b){var c;c=Math.round(180*Math.atan2(b.y-a.y,a.x-b.x)/Math.PI);0>c&&(c=360-Math.abs(c));return 45>=c&&0<=c?"left":360>=c&&315<=c?"left":135<=c&&225>=c?"right":45<c&&135>c?"down":"up"}function B(){return(new Date).getTime()}b=l.extend({},b);var W=G||H||!b.fallbackToMouseEvents,
T=W?H?X?"MSPointerDown":"pointerdown":"touchstart":"mousedown",ga=W?H?X?"MSPointerMove":"pointermove":"touchmove":"mousemove",ha=W?H?X?"MSPointerUp":"pointerup":"touchend":"mouseup",F=W?H?"mouseleave":null:"mouseleave",U=H?X?"MSPointerCancel":"pointercancel":"touchcancel",p=0,q=null,r=null,n=0,A=0,z=0,v=1,y=0,x=0,N=null,d=l(e),g="start",h=0,k={},Q=0,L=0,I=0,O=0,C=0,M=null,K=null;try{d.bind(T,m),d.bind(U,E)}catch(a){l.error("events not supported "+T+","+U+" on jQuery.swipe")}this.enable=function(){d.bind(T,
m);d.bind(U,E);return d};this.disable=function(){ma();return d};this.destroy=function(){ma();d.data("TouchSwipe",null);d=null};this.option=function(a,c){if("object"===typeof a)b=l.extend(b,a);else if(void 0!==b[a]){if(void 0===c)return b[a];b[a]=c}else if(a)l.error("Option "+a+" does not exist on jQuery.swipe.options");else return b;return null}}var G="ontouchstart"in window,X=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled&&!G,H=(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)&&
!G;l.fn.swipe=function(e){var b=l(this),m=b.data("TouchSwipe");if(m&&"string"===typeof e){if(m[e])return m[e].apply(this,Array.prototype.slice.call(arguments,1));l.error("Method "+e+" does not exist on jQuery.swipe")}else if(m&&"object"===typeof e)m.option.apply(this,arguments);else if(!(m||"object"!==typeof e&&e))return Y.apply(this,arguments);return b};l.fn.swipe.version="1.6.15";l.fn.swipe.defaults={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,
longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};l.fn.swipe.phases={PHASE_START:"start",PHASE_MOVE:"move",PHASE_END:"end",PHASE_CANCEL:"cancel"};
l.fn.swipe.directions={LEFT:"left",RIGHT:"right",UP:"up",DOWN:"down",IN:"in",OUT:"out"};l.fn.swipe.pageScroll={NONE:"none",HORIZONTAL:"horizontal",VERTICAL:"vertical",AUTO:"auto"};l.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,FOUR:4,FIVE:5,ALL:"all"}});