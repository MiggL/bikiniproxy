!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(1),r=n(o),s=i(7),a=n(s);i(22);var l=window.define;window.define=null;var d=i(2),u=(i(24),i(28),i(29)),c=(i(30),i(6));window.define=l;var h=(i(25),i(31)),p=i(32),f=i(33),g=(i(34),i(35));window.startCMTagMain=function(e,t){function n(){if(e.unitName=e.unitType,e.urlPrefix){var n=e.urlPrefix.split("/");e.unitVersion=n[n.length-2],e.unitVersion=e.unitVersion.replace(/_/g,"")}else e.unitVersion=e.version.replace(/_/g,"");switch(e.unitType){case"INLINE":;break;case"INLINE_INSTREAM":var r;break;case"INLINE_OUT_OF_VIEW":;break;case"INLINE_FEED":var a,r;break;case"INTERSTITIAL":;break;case"SLIDER_OUTSTREAM":;break;case"SLIDER_INSTREAM":var r;break;case"300X600":;break;case"EXPANDABLE":;break;case"COFFEEBREAK":;break;case"SLIDESHOW":;break;case"WIDGET_ITEM":var l=i(39),d=i(44),u=i(46),c=d;s(e)&&(c=u);var a=i(47);b=o(l,c,e);var r=new a({model:b});t.play=r.play.bind(r);break;case"FEED_MANAGER":var r;break;case"CUSTOM":}b.get("multiUnitManager.isActive")&&p.addUnit(b.get("redId"),b)}function o(e,i,n){var o=new u.DeepModel;t&&t._settings&&o.set(t._settings);var r=a.default[n.unitName],s=n.isMobile?"mobile":"desktop";if(r=!!r&&r[s])for(var l in n.preset){var d=n.preset[l];r[l]&&r[l][d]&&o.set(r[l][d])}o.set(n);var c=n.isMobile?i:e;return new c(o.attributes)}function s(e){var t=!1;return e["vForce.isActive"]?t=d.parseBool(e["vForce.isActive"]):e.vForce&&e.vForce.isActive&&(t=e.vForce.isActive),t}function l(){return"FEED_MANAGER"===e.unitType&&(!!window.isCmTagFMOnPage||(window.isCmTagFMOnPage=!0,!1))}function m(){cmTag.units=cmTag.units||{},cmTag.units[d.now()]=e}function v(){t&&(t._events&&(t._events.forEach(function(e){u.on(e.name,e.cb)}),t.on=function(e,t){u.on(e,t)}),t.trigger=function(e,t){u.trigger(e,t)})}function y(){if(u.$=c,d.templateSettings={interpolate:/\{\{(.+?)\}\}/g},cmTag.logger||(cmTag.logger=new r.default(e)),cmTag.logger.info("init",e),cmTag.logger.ga(e.unitType,"start"),!l()){cmTag.utils=d,cmTag.$=c,v();var t=window;d.isInFriendlyIframe(cmTag.config.iframeData)&&(t=d.getTopWindow()),e.isHideIframe&&d.hideDFPIframe(e.iframeData),cmTag.config.scrollSelector?new h(t,cmTag.config.scrollSelector):new h(t);new f(e);n(),m()}}var b;g.beforeCMTag(e),c("document").ready(y)},e.exports=window.cmTag},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(3),c=n(u),h=i(4),p=n(h),f=i(5),g=n(f),m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.addTrace,n=void 0!==i&&i,s=e.isDebug,a=void 0!==s&&s,l=e.isConsole,u=void 0===l?a:l,h=e.isSaveLog,p=void 0===h?a:h,f=e.extraLogGA,m=void 0!==f&&f,v=e.version,y=e.isGA;o(this,t);var b=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return b.addTrace=n,b.isDebug=d.default.parseBool(a),b.isConsole=d.default.parseBool(u),b.isSaveLog=d.default.parseBool(p),b.isGA=d.default.parseBool(y),b.extraLogGA=m,b._ga=c.default.getInstance(v,b.isGA),b._ul=g.default.getInstance(),b.isDebug&&(window.cmLogs=window.cmLogs||[]),b}return s(t,e),a(t,[{key:"pushLog",value:function(e,t){this.isDebug&&window.cmLogs.push({ts:(new Date).getTime(),message:e,obj:t})}},{key:"info",value:function(e,t){this.isDebug&&(console.info("cmTag: "+e,t),this.pushLog("cmTag: "+e,t),this.addTrace&&console.trace())}},{key:"debug",value:function(e,t){this.isDebug&&(console.debug("cmTag: "+e,t),this.pushLog("cmTag: "+e,t))}},{key:"error",value:function(e,t){console.error("cmTag: "+e,t),this.pushLog("cmTag: "+e,t)}},{key:"ga",value:function(e,t,i){return this.extraLogGA&&this.info("GA extra log",{unitType:e,action:t,version:i}),this._ga.send(e,t,i)}},{key:"ul",value:function(e,t,i){return this._ul.send(e,t,i)}},{key:"success",value:function(e,t){this.isDebug&&(console.log("%ccmTag: "+e,"color: green",t),this.pushLog("cmTag: "+e,t))}},{key:"important",value:function(e,t){this.isDebug&&(console.log("%ccmTag: "+e,"color: purple",t),this.pushLog("cmTag: "+e,t))}},{key:"warning",value:function(e,t){this.isDebug&&(console.log("%ccmTag: "+e,"color: orange",t),this.pushLog("cmTag: "+e,t))}},{key:"pixel",value:function(e,t){this.isDebug&&(console.log("%ccmTag: "+e,"color: #00A0B2",t),this.pushLog("cmTag: "+e,t))}}],[{key:"create",value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(t,[null].concat(i)))}}]),t}(p.default);t.default=m},function(e,t,i){var n,o;(function(){function i(e){function t(t,i,n,o,r,s){for(;r>=0&&r<s;r+=e){var a=o?o[r]:r;n=i(n,t[a],a,t)}return n}return function(i,n,o,r){n=S(n,r,4);var s=!O(i)&&T.keys(i),a=(s||i).length,l=e>0?0:a-1;return arguments.length<3&&(o=i[s?s[l]:l],l+=e),t(i,n,o,s,l,a)}}function r(e){return function(t,i,n){i=E(i,n);for(var o=k(t),r=e>0?0:o-1;r>=0&&r<o;r+=e)if(i(t[r],r,t))return r;return-1}}function s(e,t,i){return function(n,o,r){var s=0,a=k(n);if("number"==typeof r)e>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(i&&r&&a)return r=i(n,o),n[r]===o?r:-1;if(o!==o)return r=t(f.call(n,s,a),T.isNaN),r>=0?r+s:-1;for(r=e>0?s:a-1;r>=0&&r<a;r+=e)if(n[r]===o)return r;return-1}}function a(e,t){var i=F.length,n=e.constructor,o=T.isFunction(n)&&n.prototype||c,r="constructor";for(T.has(e,r)&&!T.contains(t,r)&&t.push(r);i--;)r=F[i],r in e&&e[r]!==o[r]&&!T.contains(t,r)&&t.push(r)}var l=this,d=l._,u=Array.prototype,c=Object.prototype,h=Function.prototype,p=u.push,f=u.slice,g=c.toString,m=c.hasOwnProperty,v=Array.isArray,y=Object.keys,b=h.bind,_=Object.create,w=function(){},T=function(e){return e instanceof T?e:this instanceof T?void(this._wrapped=e):new T(e)};"undefined"!=typeof e&&e.exports&&(t=e.exports=T),t._=T,T.VERSION="1.8.3";var S=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)}}return function(){return e.apply(t,arguments)}},E=function(e,t,i){return null==e?T.identity:T.isFunction(e)?S(e,t,i):T.isObject(e)?T.matcher(e):T.property(e)};T.iteratee=function(e,t){return E(e,t,1/0)};var P=function(e,t){return function(i){var n=arguments.length;if(n<2||null==i)return i;for(var o=1;o<n;o++)for(var r=arguments[o],s=e(r),a=s.length,l=0;l<a;l++){var d=s[l];t&&void 0!==i[d]||(i[d]=r[d])}return i}},A=function(e){if(!T.isObject(e))return{};if(_)return _(e);w.prototype=e;var t=new w;return w.prototype=null,t},I=function(e){return function(t){return null==t?void 0:t[e]}},C=Math.pow(2,53)-1,k=I("length"),O=function(e){var t=k(e);return"number"==typeof t&&t>=0&&t<=C};T.each=T.forEach=function(e,t,i){t=S(t,i);var n,o;if(O(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var r=T.keys(e);for(n=0,o=r.length;n<o;n++)t(e[r[n]],r[n],e)}return e},T.map=T.collect=function(e,t,i){t=E(t,i);for(var n=!O(e)&&T.keys(e),o=(n||e).length,r=Array(o),s=0;s<o;s++){var a=n?n[s]:s;r[s]=t(e[a],a,e)}return r},T.reduce=T.foldl=T.inject=i(1),T.reduceRight=T.foldr=i(-1),T.find=T.detect=function(e,t,i){var n;if(n=O(e)?T.findIndex(e,t,i):T.findKey(e,t,i),void 0!==n&&n!==-1)return e[n]},T.filter=T.select=function(e,t,i){var n=[];return t=E(t,i),T.each(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n},T.reject=function(e,t,i){return T.filter(e,T.negate(E(t)),i)},T.every=T.all=function(e,t,i){t=E(t,i);for(var n=!O(e)&&T.keys(e),o=(n||e).length,r=0;r<o;r++){var s=n?n[r]:r;if(!t(e[s],s,e))return!1}return!0},T.some=T.any=function(e,t,i){t=E(t,i);for(var n=!O(e)&&T.keys(e),o=(n||e).length,r=0;r<o;r++){var s=n?n[r]:r;if(t(e[s],s,e))return!0}return!1},T.contains=T.includes=T.include=function(e,t,i,n){return O(e)||(e=T.values(e)),("number"!=typeof i||n)&&(i=0),T.indexOf(e,t,i)>=0},T.invoke=function(e,t){var i=f.call(arguments,2),n=T.isFunction(t);return T.map(e,function(e){var o=n?t:e[t];return null==o?o:o.apply(e,i)})},T.pluck=function(e,t){return T.map(e,T.property(t))},T.where=function(e,t){return T.filter(e,T.matcher(t))},T.findWhere=function(e,t){return T.find(e,T.matcher(t))},T.max=function(e,t,i){var n,o,r=-(1/0),s=-(1/0);if(null==t&&null!=e){e=O(e)?e:T.values(e);for(var a=0,l=e.length;a<l;a++)n=e[a],n>r&&(r=n)}else t=E(t,i),T.each(e,function(e,i,n){o=t(e,i,n),(o>s||o===-(1/0)&&r===-(1/0))&&(r=e,s=o)});return r},T.min=function(e,t,i){var n,o,r=1/0,s=1/0;if(null==t&&null!=e){e=O(e)?e:T.values(e);for(var a=0,l=e.length;a<l;a++)n=e[a],n<r&&(r=n)}else t=E(t,i),T.each(e,function(e,i,n){o=t(e,i,n),(o<s||o===1/0&&r===1/0)&&(r=e,s=o)});return r},T.shuffle=function(e){for(var t,i=O(e)?e:T.values(e),n=i.length,o=Array(n),r=0;r<n;r++)t=T.random(0,r),t!==r&&(o[r]=o[t]),o[t]=i[r];return o},T.sample=function(e,t,i){return null==t||i?(O(e)||(e=T.values(e)),e[T.random(e.length-1)]):T.shuffle(e).slice(0,Math.max(0,t))},T.sortBy=function(e,t,i){return t=E(t,i),T.pluck(T.map(e,function(e,i,n){return{value:e,index:i,criteria:t(e,i,n)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var x=function(e){return function(t,i,n){var o={};return i=E(i,n),T.each(t,function(n,r){var s=i(n,r,t);e(o,n,s)}),o}};T.groupBy=x(function(e,t,i){T.has(e,i)?e[i].push(t):e[i]=[t]}),T.indexBy=x(function(e,t,i){e[i]=t}),T.countBy=x(function(e,t,i){T.has(e,i)?e[i]++:e[i]=1}),T.toArray=function(e){return e?T.isArray(e)?f.call(e):O(e)?T.map(e,T.identity):T.values(e):[]},T.size=function(e){return null==e?0:O(e)?e.length:T.keys(e).length},T.partition=function(e,t,i){t=E(t,i);var n=[],o=[];return T.each(e,function(e,i,r){(t(e,i,r)?n:o).push(e)}),[n,o]},T.first=T.head=T.take=function(e,t,i){if(null!=e)return null==t||i?e[0]:T.initial(e,e.length-t)},T.initial=function(e,t,i){return f.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},T.last=function(e,t,i){if(null!=e)return null==t||i?e[e.length-1]:T.rest(e,Math.max(0,e.length-t))},T.rest=T.tail=T.drop=function(e,t,i){return f.call(e,null==t||i?1:t)},T.compact=function(e){return T.filter(e,T.identity)};var D=function(e,t,i,n){for(var o=[],r=0,s=n||0,a=k(e);s<a;s++){var l=e[s];if(O(l)&&(T.isArray(l)||T.isArguments(l))){t||(l=D(l,t,i));var d=0,u=l.length;for(o.length+=u;d<u;)o[r++]=l[d++]}else i||(o[r++]=l)}return o};T.flatten=function(e,t){return D(e,t,!1)},T.without=function(e){return T.difference(e,f.call(arguments,1))},T.uniq=T.unique=function(e,t,i,n){T.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=E(i,n));for(var o=[],r=[],s=0,a=k(e);s<a;s++){var l=e[s],d=i?i(l,s,e):l;t?(s&&r===d||o.push(l),r=d):i?T.contains(r,d)||(r.push(d),o.push(l)):T.contains(o,l)||o.push(l)}return o},T.union=function(){return T.uniq(D(arguments,!0,!0))},T.intersection=function(e){for(var t=[],i=arguments.length,n=0,o=k(e);n<o;n++){var r=e[n];if(!T.contains(t,r)){for(var s=1;s<i&&T.contains(arguments[s],r);s++);s===i&&t.push(r)}}return t},T.difference=function(e){var t=D(arguments,!0,!0,1);return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){return T.unzip(arguments)},T.unzip=function(e){for(var t=e&&T.max(e,k).length||0,i=Array(t),n=0;n<t;n++)i[n]=T.pluck(e,n);return i},T.object=function(e,t){for(var i={},n=0,o=k(e);n<o;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i},T.findIndex=r(1),T.findLastIndex=r(-1),T.sortedIndex=function(e,t,i,n){i=E(i,n,1);for(var o=i(t),r=0,s=k(e);r<s;){var a=Math.floor((r+s)/2);i(e[a])<o?r=a+1:s=a}return r},T.indexOf=s(1,T.findIndex,T.sortedIndex),T.lastIndexOf=s(-1,T.findLastIndex),T.range=function(e,t,i){null==t&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),r=0;r<n;r++,e+=i)o[r]=e;return o};var M=function(e,t,i,n,o){if(!(n instanceof t))return e.apply(i,o);var r=A(e.prototype),s=e.apply(r,o);return T.isObject(s)?s:r};T.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,f.call(arguments,1));if(!T.isFunction(e))throw new TypeError("Bind must be called on a function");var i=f.call(arguments,2),n=function(){return M(e,n,t,this,i.concat(f.call(arguments)))};return n},T.partial=function(e){var t=f.call(arguments,1),i=function(){for(var n=0,o=t.length,r=Array(o),s=0;s<o;s++)r[s]=t[s]===T?arguments[n++]:t[s];for(;n<arguments.length;)r.push(arguments[n++]);return M(e,i,this,this,r)};return i},T.bindAll=function(e){var t,i,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)i=arguments[t],e[i]=T.bind(e[i],e);return e},T.memoize=function(e,t){var i=function(n){var o=i.cache,r=""+(t?t.apply(this,arguments):n);return T.has(o,r)||(o[r]=e.apply(this,arguments)),o[r]};return i.cache={},i},T.delay=function(e,t){var i=f.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},T.defer=T.partial(T.delay,T,1),T.throttle=function(e,t,i){var n,o,r,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:T.now(),s=null,r=e.apply(n,o),s||(n=o=null)};return function(){var d=T.now();a||i.leading!==!1||(a=d);var u=t-(d-a);return n=this,o=arguments,u<=0||u>t?(s&&(clearTimeout(s),s=null),a=d,r=e.apply(n,o),s||(n=o=null)):s||i.trailing===!1||(s=setTimeout(l,u)),r}},T.debounce=function(e,t,i){var n,o,r,s,a,l=function(){var d=T.now()-s;d<t&&d>=0?n=setTimeout(l,t-d):(n=null,i||(a=e.apply(r,o),n||(r=o=null)))};return function(){r=this,o=arguments,s=T.now();var d=i&&!n;return n||(n=setTimeout(l,t)),d&&(a=e.apply(r,o),r=o=null),a}},T.wrap=function(e,t){return T.partial(t,e)},T.negate=function(e){return function(){return!e.apply(this,arguments)}},T.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},T.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},T.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},T.once=T.partial(T.before,2);var V=!{toString:null}.propertyIsEnumerable("toString"),F=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];T.keys=function(e){if(!T.isObject(e))return[];if(y)return y(e);var t=[];for(var i in e)T.has(e,i)&&t.push(i);return V&&a(e,t),t},T.allKeys=function(e){if(!T.isObject(e))return[];var t=[];for(var i in e)t.push(i);return V&&a(e,t),t},T.values=function(e){for(var t=T.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=e[t[o]];return n},T.mapObject=function(e,t,i){t=E(t,i);for(var n,o=T.keys(e),r=o.length,s={},a=0;a<r;a++)n=o[a],s[n]=t(e[n],n,e);return s},T.pairs=function(e){for(var t=T.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=[t[o],e[t[o]]];return n},T.invert=function(e){for(var t={},i=T.keys(e),n=0,o=i.length;n<o;n++)t[e[i[n]]]=i[n];return t},T.functions=T.methods=function(e){var t=[];for(var i in e)T.isFunction(e[i])&&t.push(i);return t.sort()},T.extend=P(T.allKeys),T.extendOwn=T.assign=P(T.keys),T.findKey=function(e,t,i){t=E(t,i);for(var n,o=T.keys(e),r=0,s=o.length;r<s;r++)if(n=o[r],t(e[n],n,e))return n},T.pick=function(e,t,i){var n,o,r={},s=e;if(null==s)return r;T.isFunction(t)?(o=T.allKeys(s),n=S(t,i)):(o=D(arguments,!1,!1,1),n=function(e,t,i){return t in i},s=Object(s));for(var a=0,l=o.length;a<l;a++){var d=o[a],u=s[d];n(u,d,s)&&(r[d]=u)}return r},T.omit=function(e,t,i){if(T.isFunction(t))t=T.negate(t);else{var n=T.map(D(arguments,!1,!1,1),String);t=function(e,t){return!T.contains(n,t)}}return T.pick(e,t,i)},T.defaults=P(T.allKeys,!0),T.create=function(e,t){var i=A(e);return t&&T.extendOwn(i,t),i},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e},T.isMatch=function(e,t){var i=T.keys(t),n=i.length;if(null==e)return!n;for(var o=Object(e),r=0;r<n;r++){var s=i[r];if(t[s]!==o[s]||!(s in o))return!1}return!0};var N=function(e,t,i,n){if(e===t)return 0!==e||1/e===1/t;if(null==e||null==t)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var o=g.call(e);if(o!==g.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!==+e?+t!==+t:0===+e?1/+e===1/t:+e===+t;case"[object Date]":case"[object Boolean]":return+e===+t}var r="[object Array]"===o;if(!r){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,a=t.constructor;if(s!==a&&!(T.isFunction(s)&&s instanceof s&&T.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===e)return n[l]===t;if(i.push(e),n.push(t),r){if(l=e.length,l!==t.length)return!1;for(;l--;)if(!N(e[l],t[l],i,n))return!1}else{var d,u=T.keys(e);if(l=u.length,T.keys(t).length!==l)return!1;for(;l--;)if(d=u[l],!T.has(t,d)||!N(e[d],t[d],i,n))return!1}return i.pop(),n.pop(),!0};T.isEqual=function(e,t){return N(e,t)},T.isEmpty=function(e){return null==e||(O(e)&&(T.isArray(e)||T.isString(e)||T.isArguments(e))?0===e.length:0===T.keys(e).length)},T.isElement=function(e){return!(!e||1!==e.nodeType)},T.isArray=v||function(e){return"[object Array]"===g.call(e)},T.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},T.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){T["is"+e]=function(t){return g.call(t)==="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return T.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(T.isFunction=function(e){return"function"==typeof e||!1}),T.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},T.isNaN=function(e){return T.isNumber(e)&&e!==+e},T.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===g.call(e)},T.isNull=function(e){return null===e},T.isUndefined=function(e){return void 0===e},T.has=function(e,t){return null!=e&&m.call(e,t)},T.noConflict=function(){return l._=d,this},T.identity=function(e){return e},T.constant=function(e){return function(){return e}},T.noop=function(){},T.property=I,T.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},T.matcher=T.matches=function(e){return e=T.extendOwn({},e),function(t){return T.isMatch(t,e)}},T.times=function(e,t,i){var n=Array(Math.max(0,e));t=S(t,i,1);for(var o=0;o<e;o++)n[o]=t(o);return n},T.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},T.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=T.invert(L),j=function(e){var t=function(t){return e[t]},i="(?:"+T.keys(e).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};T.escape=j(L),T.unescape=j(B),T.result=function(e,t,i){var n=null==e?void 0:e[t];return void 0===n&&(n=i),T.isFunction(n)?n.call(e):n};var R=0;T.uniqueId=function(e){var t=++R+"";return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,$=function(e){return"\\"+U[e]};T.template=function(e,t,i){!t&&i&&(t=i),t=T.defaults({},t,T.templateSettings);var n=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(n,function(t,i,n,s,a){return r+=e.slice(o,a).replace(W,$),o=a+t.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{var s=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var a=function(e){return s.call(this,e,T)},l=t.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},T.chain=function(e){var t=T(e);return t._chain=!0,t};var H=function(e,t){return e._chain?T(t).chain():t};T.mixin=function(e){T.each(T.functions(e),function(t){var i=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return p.apply(e,arguments),H(this,i.apply(T,e))}})},T.mixin(T),T.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];T.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],H(this,i)}}),T.each(["concat","join","slice"],function(e){var t=u[e];T.prototype[e]=function(){return H(this,t.apply(this._wrapped,arguments))}}),T.prototype.value=function(){return this._wrapped},T.prototype.valueOf=T.prototype.toJSON=T.prototype.value,T.prototype.toString=function(){return""+this._wrapped},n=[],o=function(){return T}.apply(t,n),!(void 0!==o&&(e.exports=o))}).call(this)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){return window.ga&&"function"==typeof window.ga}function l(){!function(e,t,i,n,o,r,s){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,r=t.createElement(i),s=t.getElementsByTagName(i)[0],r.async=1,r.src=n,s.parentNode.insertBefore(r,s)}(window,document,"script","//www.google-analytics.com/analytics.js","ga"),window.ga("create","UA-66399520-1","auto"),window.ga("send","pageview")}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(4),c=n(u),h=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.version=e,n.isGa=i,n.isGa&&(a()||l(),n._setup()),n}return s(t,e),d(t,[{key:"_setup",value:function(){window.ga("create","UA-66399520-1","auto",{name:"cmGa"}),window.ga("cmGa.send","pageview")}},{key:"send",value:function(e,t){this.isGa&&window.ga("cmGa.send","event",e+" "+this.version,t,location.host)}}],[{key:"create",value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(t,[null].concat(i)))}}]),t}(c.default);t.default=h},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){if(i(this,e),"instance"in this.constructor)throw new Error("Cannot instantiate more than one '"+this.constructor.name+"'");if("Singleton"==this.constructor.name)throw new Error("Cannot instantiate abstract class 'Singleton'");this.constructor.instance=this}return n(e,null,[{key:"getInstance",value:function(){return"instance"in this||this.create.apply(this,arguments),this.instance}},{key:"create",value:function(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(i)))}}]),e}();t.default=o},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(4),d=n(l),u=i(6),c=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return s(t,e),a(t,[{key:"send",value:function(e,t,i){i||(i="ul");var n=JSON.stringify({timestamp:(new Date).toISOString(),type:e,data:t}),o="//vidanalytics.taboola.com";u.ajax({type:"POST",url:o+"/putes/"+i,data:n,contentType:"text/plain"})}}],[{key:"create",value:function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];return new(Function.prototype.bind.apply(t,[null].concat(i)))}}]),t}(d.default);t.default=c},function(e,t){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=function(){Array.prototype.forEach=function(e){for(var t=0;t<this.length;t++)e(this[t],t,this)};var e=function(){function e(e){return null==e?String(e):G[K.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function o(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function r(t){return"object"==e(t)}function s(e){return r(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function l(e){return O.call(e,function(e){return null!=e})}function d(e){return e.length>0?E.fn.concat.apply([],e):e}function u(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(e){return e in M?M[e]:M[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function h(e,t){return"number"!=typeof t||V[u(e)]?t:t+"px"}function p(e){var t,i;return D[e]||(t=x.createElement(e),x.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==i&&(i="block"),D[e]=i),D[e]}function f(e){return"children"in e?k.call(e.children):E.map(e.childNodes,function(e){if(1==e.nodeType)return e})}function g(e,t,i){for(S in t)i&&(s(t[S])||J(t[S]))?(s(t[S])&&!s(e[S])&&(e[S]={}),J(t[S])&&!J(e[S])&&(e[S]=[]),g(e[S],t[S],i)):t[S]!==T&&(e[S]=t[S])}function m(e,t){return null==t?E(e):E(e).filter(t)}function v(e,i,n,o){return t(i)?i.call(e,n,o):i}function y(e,t,i){try{null==i?e.removeAttribute(t):e.setAttribute(t,i)}catch(e){}}function b(e,t){var i=e.className||"",n=i&&i.baseVal!==T;return t===T?n?i.baseVal:i:void(n?i.baseVal=t:e.className=t)}function _(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?E.parseJSON(e):e):e}catch(t){return e}}function w(e,t){t(e);for(var i=0,n=e.childNodes.length;i<n;i++)w(e.childNodes[i],t)}var T,S,E,P,A,I,C=[],k=C.slice,O=C.filter,x=window.document,D={},M={},V={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},F=/^\s*<(\w+|!)[^>]*>/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,L=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$/i,j=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],z=["after","prepend","before","append"],U=x.createElement("table"),W=x.createElement("tr"),$={tr:x.createElement("tbody"),tbody:U,thead:U,tfoot:U,td:W,th:W,"*":x.createElement("div")},H=/complete|loaded|interactive/,q=/^[\w-]*$/,G={},K=G.toString,Q={},Y=x.createElement("div"),X={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},J=Array.isArray||function(e){return e instanceof Array};return Q.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var i=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(i)return i.call(e,t);var n,o=e.parentNode,r=!o;return r&&(o=Y).appendChild(e),n=~Q.qsa(o,t).indexOf(e),r&&Y.removeChild(e),n},A=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},I=function(e){return O.call(e,function(t,i){return e.indexOf(t)==i})},Q.fragment=function(e,t,i){var n,o,r;return N.test(e)&&(n=E(x.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(L,"<$1></$2>")),t===T&&(t=F.test(e)&&RegExp.$1),t in $||(t="*"),r=$[t],r.innerHTML=""+e,n=E.each(k.call(r.childNodes),function(){r.removeChild(this)})),s(i)&&(o=E(n),E.each(i,function(e,t){R.indexOf(e)>-1?o[e](t):o.attr(e,t)})),n},Q.Z=function(e,t){return e=e||[],e.__proto__=E.fn,e.selector=t||"",e},Q.isZ=function(e){return e instanceof Q.Z},Q.init=function(e,i){var n;if(!e)return Q.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&F.test(e))n=Q.fragment(e,RegExp.$1,i),e=null;else{if(i!==T)return E(i).find(e);n=Q.qsa(x,e)}else{if(t(e))return E(x).ready(e);if(Q.isZ(e))return e;if(J(e))n=l(e);else if(r(e))n=[e],e=null;else if(F.test(e))n=Q.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==T)return E(i).find(e);n=Q.qsa(x,e)}}return Q.Z(n,e)},E=function(e,t){return Q.init(e,t)},E.extend=function(e){var t,i=k.call(arguments,1);return"boolean"==typeof e&&(t=e,e=i.shift()),i.forEach(function(i){g(e,i,t)}),e},Q.qsa=function(e,t){var i,n="#"==t[0],r=!n&&"."==t[0],s=n||r?t.slice(1):t,a=q.test(s);return o(e)&&a&&n?(i=e.getElementById(s))?[i]:[]:1!==e.nodeType&&9!==e.nodeType?[]:k.call(a&&!n?r?e.getElementsByClassName(s):e.getElementsByTagName(t):e.querySelectorAll(t))},E.contains=x.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},E.type=e,E.isFunction=t,E.isWindow=n,E.isArray=J,E.isPlainObject=s,E.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},E.inArray=function(e,t,i){return C.indexOf.call(t,e,i)},E.camelCase=A,E.trim=function(e){return null==e?"":String.prototype.trim.call(e)},E.uuid=0,E.support={},E.expr={},E.map=function(e,t){var i,n,o,r=[];if(a(e))for(n=0;n<e.length;n++)i=t(e[n],n),null!=i&&r.push(i);else for(o in e)i=t(e[o],o),null!=i&&r.push(i);return d(r)},E.each=function(e,t){var i,n;if(a(e)){for(i=0;i<e.length;i++)if(t.call(e[i],i,e[i])===!1)return e}else for(n in e)if(t.call(e[n],n,e[n])===!1)return e;return e},E.grep=function(e,t){return O.call(e,t)},window.JSON&&(E.parseJSON=JSON.parse),E.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()}),E.fn={forEach:C.forEach,
reduce:C.reduce,push:C.push,sort:C.sort,indexOf:C.indexOf,concat:C.concat,map:function(e){return E(E.map(this,function(t,i){return e.call(t,i,t)}))},slice:function(){return E(k.apply(this,arguments))},ready:function(e){return H.test(x.readyState)&&x.body?e(E):x.addEventListener("DOMContentLoaded",function(){e(E)},!1),this},get:function(e){return e===T?k.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return C.every.call(this,function(t,i){return e.call(t,i,t)!==!1}),this},filter:function(e){return t(e)?this.not(this.not(e)):E(O.call(this,function(t){return Q.matches(t,e)}))},add:function(e,t){return E(I(this.concat(E(e,t))))},is:function(e){return this.length>0&&Q.matches(this[0],e)},not:function(e){var i=[];if(t(e)&&e.call!==T)this.each(function(t){e.call(this,t)||i.push(this)});else{var n="string"==typeof e?this.filter(e):a(e)&&t(e.item)?k.call(e):E(e);this.forEach(function(e){n.indexOf(e)<0&&i.push(e)})}return E(i)},has:function(e){return this.filter(function(){return r(e)?E.contains(this,e):E(this).find(e).size()})},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!r(e)?e:E(e)},last:function(){var e=this[this.length-1];return e&&!r(e)?e:E(e)},find:function(e){var t,n=this;return t=e?"object"==("undefined"==typeof e?"undefined":i(e))?E(e).filter(function(){var e=this;return C.some.call(n,function(t){return E.contains(t,e)})}):1==this.length?E(Q.qsa(this[0],e)):this.map(function(){return Q.qsa(this,e)}):E()},closest:function(e,t){var n=this[0],r=!1;for("object"==("undefined"==typeof e?"undefined":i(e))&&(r=E(e));n&&!(r?r.indexOf(n)>=0:Q.matches(n,e));)n=n!==t&&!o(n)&&n.parentNode;return E(n)},parents:function(e){for(var t=[],i=this;i.length>0;)i=E.map(i,function(e){if((e=e.parentNode)&&!o(e)&&t.indexOf(e)<0)return t.push(e),e});return m(t,e)},parent:function(e){return m(I(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return f(this)}),e)},contents:function(){return this.map(function(){return k.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return O.call(f(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return E.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=p(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var i=t(e);if(this[0]&&!i)var n=E(e).get(0),o=n.parentNode||this.length>1;return this.each(function(t){E(this).wrapAll(i?e.call(this,t):o?n.cloneNode(!0):n)})},wrapAll:function(e){if(this[0]){E(this[0]).before(e=E(e));for(var t;(t=e.children()).length;)e=t.first();E(e).append(this)}return this},wrapInner:function(e){var i=t(e);return this.each(function(t){var n=E(this),o=n.contents(),r=i?e.call(this,t):e;o.length?o.wrapAll(r):n.append(r)})},unwrap:function(){return this.parent().each(function(){E(this).replaceWith(E(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=E(this);(e===T?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return E(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return E(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var i=this.innerHTML;E(this).empty().append(v(this,e,t,i))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var i=v(this,e,t,this.textContent);this.textContent=null==i?"":""+i}):0 in this?this[0].textContent:null},attr:function(e,t){var i;return"string"!=typeof e||1 in arguments?this.each(function(i){if(1===this.nodeType)if(r(e))for(S in e)y(this,S,e[S]);else y(this,e,v(this,t,i,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(i=this[0].getAttribute(e))&&e in this[0]?this[0][e]:i:T},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){y(this,e)},this)})},prop:function(e,t){return e=X[e]||e,1 in arguments?this.each(function(i){this[e]=v(this,t,i,this[e])}):this[0]&&this[0][e]},data:function e(t,i){var n="data-"+t.replace(j,"-$1").toLowerCase(),e=1 in arguments?this.attr(n,i):this.attr(n);return null!==e?_(e):T},val:function(e){return 0 in arguments?this.each(function(t){this.value=v(this,e,t,this.value)}):this[0]&&(this[0].multiple?E(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var i=E(this),n=v(this,e,t,i.offset()),o=i.offsetParent().offset(),r={top:n.top-o.top,left:n.left-o.left};"static"==i.css("position")&&(r.position="relative"),i.css(r)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function t(i,n){if(arguments.length<2){var o,r=this[0];if(!r)return;if(o=getComputedStyle(r,""),"string"==typeof i)return r.style[A(i)]||o.getPropertyValue(i);if(J(i)){var s={};return E.each(i,function(e,t){s[t]=r.style[A(t)]||o.getPropertyValue(t)}),s}}var t="";if("string"==e(i))n||0===n?t=u(i)+":"+h(i,n):this.each(function(){this.style.removeProperty(u(i))});else for(S in i)i[S]||0===i[S]?t+=u(S)+":"+h(S,i[S])+";":this.each(function(){this.style.removeProperty(u(S))});return this.each(function(){this.style.cssText+=";"+t})},index:function(e){return e?this.indexOf(E(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&C.some.call(this,function(e){return this.test(b(e))},c(e))},addClass:function(e){return e?this.each(function(t){if("className"in this){P=[];var i=b(this),n=v(this,e,t,i);n.split(/\s+/g).forEach(function(e){E(this).hasClass(e)||P.push(e)},this),P.length&&b(this,i+(i?" ":"")+P.join(" "))}}):this},removeClass:function(e){return this.each(function(t){if("className"in this){if(e===T)return b(this,"");P=b(this),v(this,e,t,P).split(/\s+/g).forEach(function(e){P=P.replace(c(e)," ")}),b(this,P.trim())}})},toggleClass:function(e,t){return e?this.each(function(i){var n=E(this),o=v(this,e,i,b(this));o.split(/\s+/g).forEach(function(e){(t===T?!n.hasClass(e):t)?n.addClass(e):n.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===T?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===T?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),i=this.offset(),n=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(E(e).css("margin-top"))||0,i.left-=parseFloat(E(e).css("margin-left"))||0,n.top+=parseFloat(E(t[0]).css("border-top-width"))||0,n.left+=parseFloat(E(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||x.body;e&&!B.test(e.nodeName)&&"static"==E(e).css("position");)e=e.offsetParent;return e})}},E.fn.detach=E.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});E.fn[e]=function(i){var r,s=this[0];return i===T?n(s)?s["inner"+t]:o(s)?s.documentElement["scroll"+t]:(r=this.offset())&&r[e]:this.each(function(t){s=E(this),s.css(e,v(this,i,t,s[e]()))})}}),z.forEach(function(t,i){var n=i%2;E.fn[t]=function(){var t,o,r=E.map(arguments,function(i){return t=e(i),"object"==t||"array"==t||null==i?i:Q.fragment(i)}),s=this.length>1;return r.length<1?this:this.each(function(e,t){o=n?t:t.parentNode,t=0==i?t.nextSibling:1==i?t.firstChild:2==i?t:null;var a=E.contains(x.documentElement,o);r.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!o)return E(e).remove();o.insertBefore(e,t),a&&w(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},E.fn[n?t+"To":"insert"+(i?"Before":"After")]=function(e){return E(e)[t](this),this}}),Q.Z.prototype=E.fn,Q.uniq=I,Q.deserializeValue=_,E.zepto=Q,E}(),t=e;return function(e){function t(e){return e._zid||(e._zid=h++)}function i(e,i,r,s){if(i=n(i),i.ns)var a=o(i.ns);return(m[t(e)]||[]).filter(function(e){return e&&(!i.e||e.e==i.e)&&(!i.ns||a.test(e.ns))&&(!r||t(e.fn)===t(r))&&(!s||e.sel==s)})}function n(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function r(e,t){return e.del&&!y&&e.e in b||!!t}function s(e){return _[e]||y&&b[e]||e}function a(i,o,a,l,u,h,p){var f=t(i),g=m[f]||(m[f]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(a);var o=n(t);o.fn=a,o.sel=u,o.e in _&&(a=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return o.fn.apply(this,arguments)}),o.del=h;var f=h||a;o.proxy=function(e){if(e=d(e),!e.isImmediatePropagationStopped()){e.data=l;var t=f.apply(i,e._args==c?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=g.length,g.push(o),"addEventListener"in i&&i.addEventListener(s(o.e),o.proxy,r(o,p))})}function l(e,n,o,a,l){var d=t(e);(n||"").split(/\s/).forEach(function(t){i(e,t,o,a).forEach(function(t){delete m[d][t.i],"removeEventListener"in e&&e.removeEventListener(s(t.e),t.proxy,r(t,l))})})}function d(t,i){return!i&&t.isDefaultPrevented||(i||(i=t),e.each(E,function(e,n){var o=i[e];t[e]=function(){return this[n]=w,o&&o.apply(i,arguments)},t[n]=T}),(i.defaultPrevented!==c?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function u(e){var t,i={originalEvent:e};for(t in e)S.test(t)||e[t]===c||(i[t]=e[t]);return d(i,e)}var c,h=1,p=Array.prototype.slice,f=e.isFunction,g=function(e){return"string"==typeof e},m={},v={},y="onfocusin"in window,b={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};v.click=v.mousedown=v.mouseup=v.mousemove="MouseEvents",e.event={add:a,remove:l},e.proxy=function(i,n){var o=2 in arguments&&p.call(arguments,2);if(f(i)){var r=function(){return i.apply(n,o?o.concat(p.call(arguments)):arguments)};return r._zid=t(i),r}if(g(n))return o?(o.unshift(i[n],i),e.proxy.apply(null,o)):e.proxy(i[n],i);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)};var w=function(){return!0},T=function(){return!1},S=/^([A-Z]|returnValue$|layer[XY]$)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(document.body).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(document.body).undelegate(this.selector,t,i),this},e.fn.on=function(t,i,n,o,r){var s,d,h=this;return t&&!g(t)?(e.each(t,function(e,t){h.on(e,i,n,t,r)}),h):(g(i)||f(o)||o===!1||(o=n,n=i,i=c),(f(n)||n===!1)&&(o=n,n=c),o===!1&&(o=T),h.each(function(c,h){r&&(s=function(e){return l(h,e.type,o),o.apply(this,arguments)}),i&&(d=function(t){var n,r=e(t.target).closest(i,h).get(0);if(r&&r!==h)return n=e.extend(u(t),{currentTarget:r,liveFired:h}),(s||o).apply(r,[n].concat(p.call(arguments,1)))}),a(h,t,o,n,i,d||s)}))},e.fn.off=function(t,i,n){var o=this;return t&&!g(t)?(e.each(t,function(e,t){o.off(e,i,t)}),o):(g(i)||f(n)||n===!1||(n=i,i=c),n===!1&&(n=T),o.each(function(){l(this,t,n,i)}))},e.fn.trigger=function(t,i){return t=g(t)||e.isPlainObject(t)?e.Event(t):d(t),t._args=i,this.each(function(){t.type in b&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)})},e.fn.triggerHandler=function(t,n){var o,r;return this.each(function(s,a){o=u(g(t)?e.Event(t):t),o._args=n,o.target=a,e.each(i(a,t.type||t),function(e,t){if(r=t.proxy(o),o.isImmediatePropagationStopped())return!1})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var i=document.createEvent(v[e]||"Events"),n=!0;if(t)for(var o in t)"bubbles"==o?n=!!t[o]:i[o]=t[o];return i.initEvent(e,n,!0),d(i)}}(e),function(e){function t(t,i,n){var o=e.Event(i);return e(t).trigger(o,n),!o.isDefaultPrevented()}function i(e,i,n,o){if(e.global)return t(i||y,n,o)}function n(t){t.global&&0===e.active++&&i(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&i(t,null,"ajaxStop")}function r(e,t){var n=t.context;return t.beforeSend.call(n,e,t)!==!1&&i(t,n,"ajaxBeforeSend",[e,t])!==!1&&void i(t,n,"ajaxSend",[e,t])}function s(e,t,n,o){var r=n.context,s="success";n.success.call(r,e,s,t),o&&o.resolveWith(r,[e,s,t]),i(n,r,"ajaxSuccess",[t,n,e]),l(s,t,n)}function a(e,t,n,o,r){var s=o.context;o.error.call(s,n,t,e),r&&r.rejectWith(s,[n,t,e]),i(o,s,"ajaxError",[n,o,e||t]),l(t,n,o)}function l(e,t,n){var r=n.context;n.complete.call(r,t,e),i(n,r,"ajaxComplete",[t,n]),o(n)}function d(){}function u(e){return e&&(e=e.split(";",2)[0]),e&&(e==S?"html":e==T?"json":_.test(e)?"script":w.test(e)&&"xml")||"text"}function c(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function h(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=c(t.url,t.data),t.data=void 0)}function p(t,i,n,o){return e.isFunction(i)&&(o=n,n=i,i=void 0),e.isFunction(n)||(o=n,n=void 0),{url:t,data:i,success:n,dataType:o}}function f(t,i,n,o){var r,s=e.isArray(i),a=e.isPlainObject(i);e.each(i,function(i,l){r=e.type(l),o&&(i=n?o:o+"["+(a||"object"==r||"array"==r?i:"")+"]"),!o&&s?t.add(l.name,l.value):"array"==r||!n&&"object"==r?f(t,l,n,i):t.add(i,l)})}var g,m,v=0,y=window.document,b=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,T="application/json",S="text/html",E=/^\s*$/,P=y.createElement("a");P.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,i){if(!("type"in t))return e.ajax(t);var n,o,l=t.jsonpCallback,d=(e.isFunction(l)?l():l)||"jsonp"+ ++v,u=y.createElement("script"),c=window[d],h=function(t){e(u).triggerHandler("error",t||"abort")},p={abort:h};return i&&i.promise(p),e(u).on("load error",function(r,l){clearTimeout(o),e(u).off().remove(),"error"!=r.type&&n?s(n[0],p,t,i):a(null,l||"error",p,t,i),window[d]=c,n&&e.isFunction(c)&&c(n[0]),c=n=void 0}),r(p,t)===!1?(h("abort"),p):(window[d]=function(){n=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+d),y.head.appendChild(u),t.timeout>0&&(o=setTimeout(function(){h("timeout")},t.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:T,xml:"application/xml, text/xml",html:S,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var i,o=e.extend({},t||{}),l=e.Deferred&&e.Deferred();for(g in e.ajaxSettings)void 0===o[g]&&(o[g]=e.ajaxSettings[g]);n(o),o.crossDomain||(i=y.createElement("a"),i.href=o.url,i.href=i.href,o.crossDomain=P.protocol+"//"+P.host!=i.protocol+"//"+i.host),o.url||(o.url=window.location.toString()),h(o);var p=o.dataType,f=/\?.+=\?/.test(o.url);if(f&&(p="jsonp"),o.cache!==!1&&(t&&t.cache===!0||"script"!=p&&"jsonp"!=p)||(o.url=c(o.url,"_="+Date.now())),"jsonp"==p)return f||(o.url=c(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===!1?"":"callback=?")),e.ajaxJSONP(o,l);var v,b=o.accepts[p],_={},w=function(e,t){_[e.toLowerCase()]=[e,t]},T=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,S=o.xhr(),A=S.setRequestHeader;if(l&&l.promise(S),o.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",b||"*/*"),(b=o.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),S.overrideMimeType&&S.overrideMimeType(b)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!=o.type.toUpperCase())&&w("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(m in o.headers)w(m,o.headers[m]);if(S.setRequestHeader=w,S.onreadystatechange=function(){if(4==S.readyState){S.onreadystatechange=d,clearTimeout(v);var t,i=!1;if(S.status>=200&&S.status<300||304==S.status||0==S.status&&"file:"==T){p=p||u(o.mimeType||S.getResponseHeader("content-type")),t=S.responseText;try{"script"==p?(0,eval)(t):"xml"==p?t=S.responseXML:"json"==p&&(t=E.test(t)?null:e.parseJSON(t))}catch(e){i=e}i?a(i,"parsererror",S,o,l):s(t,S,o,l)}else a(S.statusText||null,S.status?"error":"abort",S,o,l)}},r(S,o)===!1)return S.abort(),a(null,"abort",S,o,l),S;if(o.xhrFields)for(m in o.xhrFields)S[m]=o.xhrFields[m];var I=!("async"in o)||o.async;S.open(o.type,o.url,I,o.username,o.password);for(m in _)A.apply(S,_[m]);return o.timeout>0&&(v=setTimeout(function(){S.onreadystatechange=d,S.abort(),a(null,"timeout",S,o,l)},o.timeout)),S.send(o.data?o.data:null),S},e.get=function(){return e.ajax(p.apply(null,arguments))},e.post=function(){var t=p.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=p.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,i,n){if(!this.length)return this;var o,r=this,s=t.split(/\s/),a=p(t,i,n),l=a.success;return s.length>1&&(a.url=s[0],o=s[1]),a.success=function(t){r.html(o?e("<div>").html(t.replace(b,"")).find(o):t),l&&l.apply(r,arguments)},e.ajax(a),this};var A=encodeURIComponent;e.param=function(t,i){var n=[];return n.add=function(t,i){e.isFunction(i)&&(i=i()),null==i&&(i=""),this.push(A(t)+"="+A(i))},f(n,t,i),n.join("&").replace(/%20/g,"+")}}(e),function(e){e.fn.serializeArray=function(){var t,i,n=[],o=function e(i){return i.forEach?i.forEach(e):void n.push({name:t,value:i})};return this[0]&&e.each(this[0].elements,function(n,r){i=r.type,t=r.name,t&&"fieldset"!=r.nodeName.toLowerCase()&&!r.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||r.checked)&&o(e(r).val())}),n},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var i=e.Event("submit");this.eq(0).trigger(i),i.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,i){return t=t||[],e.extend(t,e.fn),t.selector=i||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(e){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(e){return null}}}}(e),t}()},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(8),r=n(o),s=i(10),a=n(s),l=i(11),d=n(l),u=i(12),c=n(u),h=i(13),p=n(h),f=i(14),g=n(f),m=i(15),v=n(m),y=i(16),b=n(y),_=i(17),w=n(_),T=i(18),S=n(T),E=i(19),P=n(E),A=i(20),I=n(A),C=i(21),k=n(C),O=i(6),x=n(O);e.exports=x.default.extend(!0,{},r.default,a.default,d.default,c.default,p.default,g.default,v.default,b.default,w.default,S.default,P.default,I.default,k.default)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o);e.exports={"300X600":{desktop:r.default,mobile:r.default}}},function(e,t){"use strict";e.exports={level:{2:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20},3:{}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o);e.exports={CUSTOM:{desktop:r.default,mobile:r.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o);e.exports={EXPANDABLE:{desktop:r.default,mobile:r.default}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_FEED:{desktop:{level:{2:{player:{settings:{mprdct:.0158,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981},4:{isMultiAd:!1},5:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0227,mintimwf:1e4}}}}},mobile:a.default.extend(!0,{},r.default,{level:{3:{pubId:208401,pubTagId:1047981},5:{pubId:208401,pubTagId:1047981}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_INSTREAM_NEW_SINGLE:{desktop:a.default.extend(!0,{},r.default,{level:{2:{player:{settings:{mprdct:.025,mintimwf:7e3}},noaop:1,onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},4:{isMultiAd:!1},5:{isMultiAd:!1,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0289,mintimwf:1e4}}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240,player:{settings:{mprdct:.015,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_INSTREAM_OLD_VFORCE:{desktop:a.default.extend(!0,{},r.default,{level:{2:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_INSTREAM_SINGLE_NEW:{desktop:a.default.extend(!0,{},r.default,{level:{2:{player:{settings:{mprdct:.025,mintimwf:7e3}},noaop:1,onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240,player:{settings:{mprdct:.015,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_INSTREAM_SINGLE_OLD:{desktop:a.default.extend(!0,{},r.default,{level:{2:{player:{settings:{mprdct:.025,mintimwf:7e3}},noaop:1,onOutOfView:"pause","player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240,player:{settings:{mprdct:.015,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={INLINE_INSTREAM_VIEWABILITY_EXPAND:{desktop:a.default.extend(!0,{},r.default,{level:{2:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},playerEndSeconds:120},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{"player.settings.max_ready_vpaid":2,playerEndSeconds:240},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},playerEndSeconds:120},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={SLIDER_INSTREAM:{desktop:a.default.extend(!0,{},r.default,{level:{2:{noaop:1,player:{settings:{mprdct:.025,mintimwf:7e3}}},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}}),mobile:a.default.extend(!0,{},r.default,{level:{2:{noaop:1,player:{settings:{mprdct:.021,mintimwf:7e3}}},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t){"use strict";e.exports={SLIDER_OUTSTREAM:{desktop:{level:{2:{noaop:1,player:{settings:{mprdct:.021,mintimwf:7e3}}},3:{pubId:208401,pubTagId:1047981},4:{vForce:{isActive:!0},isMultiAd:!1},5:{vForce:{isActive:!0},isMultiAd:!1,pubId:208401,pubTagId:1047981}}},mobile:{level:{2:{noaop:1,player:{settings:{mprdct:.0199,mintimwf:7e3}}},3:{pubId:208401,pubTagId:1047981},4:{vForce:{isActive:!0},isMultiAd:!1},5:{vForce:{isActive:!0},isMultiAd:!1,pubId:208401,pubTagId:1047981}}}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={WIDGET_ITEM:{desktop:{level:{1:{pubId:169497,pubTagId:953497},2:{pubId:169497,pubTagId:953497,player:{settings:{mprdct:.025,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},4:{pubId:169497,pubTagId:953497,isMultiAd:!1},5:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0258,mintimwf:1e4}}}}},mobile:a.default.extend(!0,{},r.default,{level:{2:{player:{settings:{mprdct:.0151,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981}}}})}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(9),r=n(o),s=i(6),a=n(s);e.exports={FEED_MANAGER:{desktop:{level:{2:{player:{settings:{mprdct:.025,mintimwf:7e3}},noaop:1},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},4:{isMultiAd:!1},5:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0227,mintimwf:1e4}}}}},mobile:a.default.extend(!0,{},r.default,{level:{2:{player:{settings:{mintimwf:7e3,mprdct:.015}}},3:{pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},5:{pubId:208401,pubTagId:1047981}}})}}},function(e,t){},,function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var r=i(2),s=o(r),a=i(25),l=o(a),d=i(6),u=o(d),c=i(26),h=n(c);s.default.mixin({parseBool:function(e){return"true"===e||e===!0||1===e||"1"===e},hasFlash:function(){function e(){try{return!!new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){return!1}}return"undefined"==typeof navigator.plugins||0==navigator.plugins.length?e():!!navigator.plugins["Shockwave Flash"]},el:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(e);for(var n in t)null!=t[n]&&(i[n]=t[n]);return i},loadJs:function(e,t){return document.head.appendChild(s.default.el("script",{src:e,onload:t}))},loadCss:function(e,t){return document.head.appendChild(s.default.el("link",{href:e,onload:t,rel:"stylesheet",type:"text/css"}))},loadJsArr:function(e,t){function i(){n--,0===n&&t()}var n;t&&(n=e.length);for(var o=0;o<e.length;o++)e[o].indexOf(".css")>-1?s.default.loadCss(e[o],i):s.default.loadJs(e[o],i)},getUrlVars:function(e){e=e||window;for(var t,i=[],n=e.location.href.slice(e.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)t=n[o].split("="),i.push(t[0]),i[t[0]]=t[1];return i},firePixelConditional:function(e,t,i,n){e&&s.default.firePixel(t,i,n)},firePixel:function(e,t,i){if(e){i&&(e=s.default.addParametersToUrl(e,i,e.indexOf("?")===-1)),cmTag.logger.pixel("firing pixel: "+t+" url: "+e);var n=document.createElement("IMG");n.src=e}},fireIframePixel:function(e,t){if(!e)return void cmTag.logger.pixel("fireIframePixel","Url empty.");cmTag.logger.pixel("firing pixel: "+t+" url: "+e);var i=document.createElement("iframe");i.src=e,i.style.display="none";var n=document.getElementsByTagName("body")[0];n||(n=document.getElementsByTagName("html")[0]),n||(n=document.getElementsByTagName("div")[0]),n?n.appendChild(i):cmTag.logger.debug("fireIframePixel","Failed to fire iframe pixel.");
},getViewabilityPercent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.offsetWidth,n=e.getBoundingClientRect(),o={top:Math.max(0,n.top),bottom:Math.min(s.default.viewport().height,n.bottom),left:Math.max(0,n.left),right:Math.min(s.default.viewport().width,n.right)};return 100*(o.bottom-o.top)*(o.right-o.left)/(t*i)},isVisible:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.offsetHeight,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.offsetWidth,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;return s.default.getViewabilityPercent(e,t,i)>=n},viewport:function(){return{get height(){return s.default.viewport().object.document.documentElement.clientHeight},get width(){return s.default.viewport().object.document.documentElement.clientWidth},get object(){return top}}},getVideoHeight:function(e){var t=parseInt(9/16*e);return isNaN(t)?0:t},getVideoWidth:function(e){var t=parseInt(16/9*e);return isNaN(t)?0:t},getVideoBestSize:function(e,t){var i=this.getVideoHeight(e);return t>=i?t=i:e=this.getVideoWidth(t),{width:e,height:t}},isElementInHead:function(e){if(!e)return!1;for(;e!==document.body&&e!==document.head;)e=e.parentNode;return e===document.head},getViewPercent:function(e,t,i,n){var o=s.default.isEmpty(n)?(0,u.default)(this.getTopWindow()):(0,u.default)(n),r={top:0,left:0,right:o.width(),bottom:o.height()},a=Number(i)||0,l=Number(t)||0,d=e.getBoundingClientRect(),c={top:d.top,left:d.left};if(c.right=c.left+l,c.bottom=c.top+a,r.right<c.left||r.left>c.right||r.bottom<c.top||r.top>c.bottom)return 0;var h={top:Math.min(1,(c.bottom-r.top)/a),bottom:Math.min(1,(r.bottom-c.top)/a),left:Math.min(1,(c.right-r.left)/l),right:Math.min(1,(r.right-c.left)/l)},p=h.left*h.right*h.top*h.bottom*100;return p},isViewable:function(e,t,i,n,o){var r=s.default.getViewPercent(e,t,i,o);return!(r<=0)&&(n=n||100,r>=n)},getViewPercentageDeltas:function(e,t,i){var n=(0,u.default)(window),o={top:n.scrollTop(),left:n.scrollLeft()};o.right=o.left+n.width(),o.bottom=o.top+n.height();var r=Number(i)||0,s=Number(t)||0,a=(0,u.default)(e).offset();a.right=a.left+s,a.bottom=a.top+r;var l={top:Math.min(1,(a.bottom-o.top)/r),bottom:Math.min(1,(o.bottom-a.top)/r),left:Math.min(1,(a.right-o.left)/s),right:Math.min(1,(o.right-a.left)/s)};return l},getValidSelectorElements:function(e,t,i){var n=[];return t=t||100,i=i||0,e&&s.default.isArray(e)&&(n=s.default.filter(e,function(e){var n=e.getBoundingClientRect();return n.width>=t&&n.height>=i&&!s.default.has(l.default.INVALID_SELECTOR_TAG_NAMES,e.tagName)})),n},stripObject:function(e,t){if(e){for(var i={},n=0;n<t.length;n++){var o=e[t[n]];void 0!=o&&(i[t[n]]=o)}return i}},getTopOfEl:function(e){if(e){var t=e,i=0,n=0;if(document.getElementById||document.all){do for(n+=e.offsetLeft-e.scrollLeft,i+=e.offsetTop-e.scrollTop,e=e.offsetParent,t=t.parentNode;t!=e;)n-=t.scrollLeft,i-=t.scrollTop,t=t.parentNode;while(e&&e.offsetParent)}else document.layers&&(i+=e.y,n+=e.x);return i}},getLeftOfEl:function(e){return window.pageXOffset+e.getBoundingClientRect().left},PrefixedEvent:function(e,t,i,n){var o=["webkit","moz","MS","o",""];i=i.toLowerCase(),s.default.each(o,function(o){e[t](o+i,n)})},oneAnimationEnd:function(e,t){var i=s.default.debounce(t,200);this.PrefixedEvent(e,"one","transitionend",i),this.PrefixedEvent(e,"one","animationend",i)},addParametersToUrl:function(e,t,i){var n=e;return i&&(n+="?"),u.default.each(t,function(e,t){void 0!==t&&""!==t&&(n+=e+"="+t+"&")}),n},skipTransitionCss:function(e,t){e.addClass("none-transition"),e.css(t),this.flushCss(e[0]),e.removeClass("none-transition")},flushCss:function(e){e.offsetHeight},getTopWindow:function(){var e=window;try{for(;e.document!==e.top.document;)e=e.top;return e}catch(e){return window}},isInIframe:function(e){return e.inIframe||e.inDFP},isInFriendlyIframe:function(e){return!!e&&(this.isInIframe(e)&&e.isFriendlyIframe)},hideDFPIframe:function(e){if(this.isInFriendlyIframe(e)){e.iframe.style.display="none";for(var t=e.iframe.parentNode;s.default.some(l.default.DFP_KEYWORDS,function(e){return t.id.indexOf(e)!==-1});)t.style.display="none",t=t.parentNode}},onceDocReady:function(e){return/complete|loaded|interactive/.test(document.readyState)&&document.body?e():(0,u.default)("document").one("DOMContentLoaded",e),this},crc32:function(e){if(!e||"string"!=typeof e)return 0;var t;e=this.utf8Encode(e);var i="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";"undefined"==typeof t&&(t=0);var n=0,o=0;t^=-1;for(var r=0,s=e.length;r<s;r++)o=255&(t^e.charCodeAt(r)),n="0x"+i.substr(9*o,8),t=t>>>8^n;return t^-1},utf8Encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},isMouseOver:function(e){return 0!==e.filter(":hover").length},rollNumbers:function(e){return!!e&&100*Math.random()<e},isFactor:function(e){return s.default.isNumber(e)&&e===s.default.random(1,e)},sendMail:function(e,t,i){function n(){emailjs.init("user_kHlYxxusLRTxC6yr3PjQl"),emailjs.send("gmail","units_support",e).then(t,i)}t=t||function(){},i=i||function(){},window.emailjs?n():s.default.loadJs("//cdn.emailjs.com/dist/email.min.js",n)},isValidEmail:function(e){return!0},hasAutoPlay:function(){var e=h.UAParser(window.navigator.userAgent);return!("iOS"===e.os.name&&parseInt(e.os.version)<10||"Android"===e.os.name&&"Chrome"===e.browser.name&&parseInt(e.browser.version)<53)},toCssObj:function(e){return"string"==typeof e?JSON.parse(e):e},isLayerVisible:function(e){function t(e,o,r,s,a,l,d){var u=e.parentNode,c=2;return!!n(e)&&(9===u.nodeType||"0"!==i(e,"opacity")&&"none"!==i(e,"display")&&"hidden"!==i(e,"visibility")&&("undefined"!=typeof o&&"undefined"!=typeof r&&"undefined"!=typeof s&&"undefined"!=typeof a&&"undefined"!=typeof l&&"undefined"!=typeof d||(o=e.offsetTop,a=e.offsetLeft,s=o+e.offsetHeight,r=a+e.offsetWidth,l=e.offsetWidth,d=e.offsetHeight),!u||("hidden"!==i(u,"overflow")&&"scroll"!==i(u,"overflow")||!(a+c>u.offsetWidth+u.scrollLeft||a+l-c<u.scrollLeft||o+c>u.offsetHeight+u.scrollTop||o+d-c<u.scrollTop))&&(e.offsetParent===u&&(a+=u.offsetLeft,o+=u.offsetTop),t(u,o,r,s,a,l,d))))}function i(e,t){return window.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:void 0}function n(e){for(;e=e.parentNode;)if(e===document)return!0;return!1}return t(e)},getOffset:function(e,t){if(e&&Array.isArray(e)&&e[0]&&(e=e[0]),e){if(1===t)return(0,u.default)(e).offset();var i=e,n=e,o=0,r=0;if(document.getElementById||document.all){do for(r+=e.offsetLeft-e.scrollLeft,o+=e.offsetTop-e.scrollTop,e=e.offsetParent,n=n.parentNode;n!=e;)r-=n.scrollLeft,o-=n.scrollTop,n=n.parentNode;while(e&&e.offsetParent)}else document.layers&&(o+=e.y,r+=e.x);return{top:o,left:(0,u.default)(i).offset().left||r}}},flatten:function(e){var t={};for(var i in e)t[i]=e[i];return t},cssObjToString:function(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia,n=window.navigator.userAgent.indexOf("Firefox")>-1;return(t||i||n)&&(e=this.flatten(e)),JSON.stringify(e)},isModel:function(e,t,i){return i?i.model.get(e)===t:this.model.get(e)===t},generateGuid:function(e,t){var i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),n=i,o=[],r=0;for(t=t||n.length,e=e||22,r=0;r<e;r++)o[r]=n[0|Math.random()*t];return o.join("")},isObserverInBrowser:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="undefined"!=typeof IntersectionObserver,i=!1;t&&(i=IntersectionObserver.toString().indexOf("[native code]")!==-1);var n=i||e&&t;return n}})},function(e,t){"use strict";e.exports={UNIT_TYPES:{INLINE:0,INTERSTITIAL:1,SLIDER_OUTSTREAM:2,SLIDER_INSTREAM:3,EXPANDABLE:4,"300X600":5,INLINE_FEED:6,COFFEEBREAK:7,SLIDESHOW:8,INLINE_INSTREAM:9,COFFEEBREAK_MOBILE:10,"300X600_MOBILE":11,INLINE_MOBILE:12,INTERSTITIAL_MOBILE:14,SLIDER_OUTSTREAM_MOBILE:15,SLIDER_INSTREAM_MOBILE:16,EXPANDABLE_MOBILE:17,INLINE_INSTREAM_MOBILE:18,INLINE_OUT_OF_VIEW:19,INLINE_OUT_OF_VIEW_MOBILE:20,INLINE_VIEWABILITY_EXPAND:21,INLINE_VIEWABILITY_EXPAND_MOBILE:22,INLINE_INSTREAM_VIEWABILITY_EXPAND:23,INLINE_INSTREAM_VIEWABILITY_EXPAND_MOBILE:24,INLINE_FEED_MOBILE:25,WIDGET_ITEM:26,WIDGET_ITEM_MOBILE:27,NEW_INLINE:28,NEW_INLINE_MOBILE:29,NEW_INLINE_ADJACENT:30,NEW_INLINE_ADJACENT_MOBILE:31,FEED_MANAGER:32,FEED_MANAGER_MOBILE:33},STREAM_TYPES:{IN_STREAM:1,OUT_STREAM:0},UNITS_STREAM_TYPE:{INLINE:0,INTERSTITIAL:0,SLIDER_OUTSTREAM:0,SLIDER_INSTREAM:1,EXPANDABLE:1,"300X600":1,OMNI_TAG:0},APPEND_TYPE:{BEFORE_BEGIN:0,AFTER_BEGIN:1,BEFORE_END:2,AFTER_END:3,beforebegin:0,afterbegin:1,beforeend:2,afterend:3},INVALID_SELECTOR_TAG_NAMES:{IMG:0,UL:1,BUTTON:3,INPUT:4,LABEL:5},OMNI_TAG_UNIT_NAMES:{rightrail1:1,rightrail2:2,rightrail3:3,inlineTop:4,inlineMiddle:5,inlineBottom:6,interstitial:7,sliderOutstream1:8,sliderOutstream2:9,sliderInstream1:10,sliderInstream2:11,coffeeBreak:12,expandable1:13,expandable2:14,expandable3:15,invalidUnitName:1e3},ROLL_TYPE:{preroll:0,"pre-roll":0,midroll:-1,"mid-roll":-1,postroll:-2,"post-roll":-2},TAB_STATE:{focus:0,blur:1,tabOut:2},DFP_KEYWORDS:["google","dfp","gpt"],MIME_TYPES:{1:"video/mp4",5:"video/webm",7:"video/ogg",10:"video/mp4",11:"video/ogg",12:"video/webm"},SUB_UNIT_TYPE:{FEED:0,SLIDER_TO_FEED:1,FEED_TO_SLIDER:2,SLIDER_TO_FEED_TO_SLIDER:3},FEED_SELECTOR:"tbl-feed-container"}},function(e,t,i){var n;!function(o,r){"use strict";var s="0.7.17",a="",l="?",d="function",u="undefined",c="object",h="string",p="major",f="model",g="name",m="type",v="vendor",y="version",b="architecture",_="console",w="mobile",T="tablet",S="smarttv",E="wearable",P="embedded",A={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2===0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===h?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},I={rgx:function(e,t){for(var i,n,o,s,a,l,u=0;u<t.length&&!a;){var h=t[u],p=t[u+1];for(i=n=0;i<h.length&&!a;)if(a=h[i++].exec(e))for(o=0;o<p.length;o++)l=a[++n],s=p[o],typeof s===c&&s.length>0?2==s.length?typeof s[1]==d?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3==s.length?typeof s[1]!==d||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):r:this[s[0]]=l?s[1].call(this,l,s[2]):r:4==s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):r):this[s]=l?l:r;u+=2}},str:function(e,t){for(var i in t)if(typeof t[i]===c&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(A.has(t[i][n],e))return i===l?r:i}else if(A.has(t[i],e))return i===l?r:i;return e}},C={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},k={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[g,y],[/(opios)[\/\s]+([\w\.]+)/i],[[g,"Opera Mini"],y],[/\s(opr)\/([\w\.]+)/i],[[g,"Opera"],y],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser)\/([\w\.-]+)/i],[g,y],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[g,"IE"],y],[/(edge)\/((\d+)?[\w\.]+)/i],[g,y],[/(yabrowser)\/([\w\.]+)/i],[[g,"Yandex"],y],[/(puffin)\/([\w\.]+)/i],[[g,"Puffin"],y],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[g,"UCBrowser"],y],[/(comodo_dragon)\/([\w\.]+)/i],[[g,/_/g," "],y],[/(micromessenger)\/([\w\.]+)/i],[[g,"WeChat"],y],[/(QQ)\/([\d\.]+)/i],[g,y],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[g,y],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[y,[g,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[y,[g,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[y,[g,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[g,/(.+)/,"$1 WebView"],y],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[g,/(.+(?:g|us))(.+)/,"$1 $2"],y],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[y,[g,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[g,y],[/(dolfin)\/([\w\.]+)/i],[[g,"Dolphin"],y],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[g,"Chrome"],y],[/(coast)\/([\w\.]+)/i],[[g,"Opera Coast"],y],[/fxios\/([\w\.-]+)/i],[y,[g,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[y,[g,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[y,g],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[g,"GSA"],y],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[g,[y,I.str,C.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[g,y],[/(navigator|netscape)\/([\w\.-]+)/i],[[g,"Netscape"],y],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[g,y]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[b,"amd64"]],[/(ia32(?=;))/i],[[b,A.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[b,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[b,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[b,/ower/,"",A.lowerize]],[/(sun4\w)[;\)]/i],[[b,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[b,A.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[f,v,[m,T]],[/applecoremedia\/[\w\.]+ \((ipad)/],[f,[v,"Apple"],[m,T]],[/(apple\s{0,1}tv)/i],[[f,"Apple TV"],[v,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[v,f,[m,T]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[f,[v,"Amazon"],[m,T]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[f,I.str,C.device.amazon.model],[v,"Amazon"],[m,w]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[f,v,[m,w]],[/\((ip[honed|\s\w*]+);/i],[f,[v,"Apple"],[m,w]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[v,f,[m,w]],[/\(bb10;\s(\w+)/i],[f,[v,"BlackBerry"],[m,w]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[f,[v,"Asus"],[m,T]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[v,"Sony"],[f,"Xperia Tablet"],[m,T]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[f,[v,"Sony"],[m,w]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[v,f,[m,_]],[/android.+;\s(shield)\sbuild/i],[f,[v,"Nvidia"],[m,_]],[/(playstation\s[34portablevi]+)/i],[f,[v,"Sony"],[m,_]],[/(sprint\s(\w+))/i],[[v,I.str,C.device.sprint.vendor],[f,I.str,C.device.sprint.model],[m,w]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[v,f,[m,T]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[v,[f,/_/g," "],[m,w]],[/(nexus\s9)/i],[f,[v,"HTC"],[m,T]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[f,[v,"Huawei"],[m,w]],[/(microsoft);\s(lumia[\s\w]+)/i],[v,f,[m,w]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[f,[v,"Microsoft"],[m,_]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[v,"Microsoft"],[m,w]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[f,[v,"Motorola"],[m,w]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[f,[v,"Motorola"],[m,T]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[v,A.trim],[f,A.trim],[m,S]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[v,"Samsung"],[m,S]],[/\(dtv[\);].+(aquos)/i],[f,[v,"Sharp"],[m,S]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[v,"Samsung"],f,[m,T]],[/smart-tv.+(samsung)/i],[v,[m,S],f],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[v,"Samsung"],f,[m,w]],[/sie-(\w+)*/i],[f,[v,"Siemens"],[m,w]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[v,"Nokia"],f,[m,w]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[f,[v,"Acer"],[m,T]],[/android.+([vl]k\-?\d{3})\s+build/i],[f,[v,"LG"],[m,T]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[v,"LG"],f,[m,T]],[/(lg) netcast\.tv/i],[v,f,[m,S]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i,/android.+lg(\-?[\d\w]+)\s+build/i],[f,[v,"LG"],[m,w]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[f,[v,"Lenovo"],[m,T]],[/linux;.+((jolla));/i],[v,f,[m,w]],[/((pebble))app\/[\d\.]+\s/i],[v,f,[m,E]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[v,f,[m,w]],[/crkey/i],[[f,"Chromecast"],[v,"Google"]],[/android.+;\s(glass)\s\d/i],[f,[v,"Google"],[m,E]],[/android.+;\s(pixel c)\s/i],[f,[v,"Google"],[m,T]],[/android.+;\s(pixel xl|pixel)\s/i],[f,[v,"Google"],[m,w]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[f,/_/g," "],[v,"Xiaomi"],[m,w]],[/android.+(mi[\s\-_]*(?:pad)?(?:[\s_]*[\w\s]+)?)\s+build/i],[[f,/_/g," "],[v,"Xiaomi"],[m,T]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[f,[v,"Meizu"],[m,T]],[/android.+a000(1)\s+build/i],[f,[v,"OnePlus"],[m,w]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[f,[v,"RCA"],[m,T]],[/android.+[;\/]\s*(Venue[\d\s]*)\s+build/i],[f,[v,"Dell"],[m,T]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[f,[v,"Verizon"],[m,T]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[v,"Barnes & Noble"],f,[m,T]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[f,[v,"NuVision"],[m,T]],[/android.+[;\/]\s*(zte)?.+(k\d{2})\s+build/i],[[v,"ZTE"],f,[m,T]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[f,[v,"Swiss"],[m,w]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[f,[v,"Swiss"],[m,T]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[f,[v,"Zeki"],[m,T]],[/(android).+[;\/]\s+([YR]\d{2}x?.*)\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(.+)\s+build/i],[[v,"Dragon Touch"],f,[m,T]],[/android.+[;\/]\s*(NS-?.+)\s+build/i],[f,[v,"Insignia"],[m,T]],[/android.+[;\/]\s*((NX|Next)-?.+)\s+build/i],[f,[v,"NextBook"],[m,T]],[/android.+[;\/]\s*(Xtreme\_?)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[v,"Voice"],f,[m,w]],[/android.+[;\/]\s*(LVTEL\-?)?(V1[12])\s+build/i],[[v,"LvTel"],f,[m,w]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[f,[v,"Envizen"],[m,T]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(.*\b)\s+build/i],[v,f,[m,T]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[f,[v,"MachSpeed"],[m,T]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[v,f,[m,T]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[f,[v,"Rotor"],[m,T]],[/android.+(KS(.+))\s+build/i],[f,[v,"Amazon"],[m,T]],[/android.+(Gigaset)[\s\-]+(Q.+)\s+build/i],[v,f,[m,T]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[m,A.lowerize],v,f],[/(android.+)[;\/].+build/i],[f,[v,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[y,[g,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[g,y],[/rv\:([\w\.]+).*(gecko)/i],[y,g]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[g,y],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s]+\w)*/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[g,[y,I.str,C.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[g,"Windows"],[y,I.str,C.os.windows.version]],[/\((bb)(10);/i],[[g,"BlackBerry"],y],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[g,y],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[g,"Symbian"],y],[/\((series40);/i],[g],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[g,"Firefox OS"],y],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[g,y],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[g,"Chromium OS"],y],[/(sunos)\s?([\w\.]+\d)*/i],[[g,"Solaris"],y],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[g,y],[/(haiku)\s(\w+)/i],[g,y],[/cfnetwork\/.+darwin/i,/ip[honead]+(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[y,/_/g,"."],[g,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[g,"Mac OS"],[y,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[g,y]]},O=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof O))return new O(e,t).getResult();var i=e||(o&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:a),n=t?A.extend(k,t):k;return this.getBrowser=function(){var e={name:r,version:r};return I.rgx.call(e,i,n.browser),e.major=A.major(e.version),e},this.getCPU=function(){var e={architecture:r};return I.rgx.call(e,i,n.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return I.rgx.call(e,i,n.device),e},this.getEngine=function(){var e={name:r,version:r};return I.rgx.call(e,i,n.engine),e},this.getOS=function(){var e={name:r,version:r};return I.rgx.call(e,i,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};O.VERSION=s,O.BROWSER={NAME:g,MAJOR:p,VERSION:y},O.CPU={ARCHITECTURE:b},O.DEVICE={MODEL:f,VENDOR:v,TYPE:m,CONSOLE:_,MOBILE:w,SMARTTV:S,TABLET:T,WEARABLE:E,EMBEDDED:P},O.ENGINE={NAME:g,VERSION:y},O.OS={NAME:g,VERSION:y},typeof t!==u?(typeof e!==u&&e.exports&&(t=e.exports=O),t.UAParser=O):"function"===d&&i(27)?(n=function(){return O}.call(t,i,t,e),!(n!==r&&(e.exports=n))):o&&(o.UAParser=O);var x=o&&(o.jQuery||o.Zepto);if(typeof x!==u){var D=new O;x.ua=D.getResult(),x.ua.get=function(){return D.getUA()},x.ua.set=function(e){D.setUA(e);var t=D.getResult();for(var i in t)x.ua[i]=t[i]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,i){"use strict";var n=i(2);n.mixin({createVpaidLog:function(e,t){var i=null,o=e,r=e.model,s=Date.now(),a=!1,l=["conversion","soundViolation","timeout","bfRon","adPlayTimeout","vastFilterdByRegex","queExpierd","queTrimmed","tagError","tagFlashError","vpaidFlashClientError","queueTrimmed","tillAdstartTimeout","timeoutAutoKill","error_vpaidGeneralError","error_vpaidLoadError","error_vpaidLoadTimeout","error_vpaidInitAdError","error_vpaidInitAdTimeout","error_vpaidStartAdError","error_vpaidStartAdTimeout","error_vpaidPlayError","adStopped"],d={BfRon:!0};delete t.conversionPixels,t.dp=(t.lp&&t.lp.length>0?t.lp[0]:"").replace(/http:\/\/|.com|https:\/\/|.com/g,"")||"na";var u={tag:t,created:(new Date).toISOString(),dp:t.dp,status:"new",unitType:r.get("unitType")};u.connectionType=-1;var c=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(c){var h=c.type||-1;u.connectionType=h}u.hasFetch=Boolean(window.fetch),u.url=window.location.href,screen&&(u.screen={},u.screen.Size=screen.width+"X"+screen.height||-1,u.screen.PixelDepth=screen.pixelDepth||-1,u.screen.orientation=screen.orientation?screen.orientation.type:"not-found");var p=r.get("session_started")||Date.now(),f=function(e,t){var i=Math.floor(Math.random()*(t-e+1))+e;return i},g=function(){if(null!==i)return i;var e=parseInt(r.get("gaFactor"))||1e3;if(1===e)return i=!0;e>100&&(e=100);var t=r.get("abTest")||"";t&&(e=50);var n=f(0,e);return i=n===e},m=function(e,t){var i="error_";return i+=t.errType?t.errType:e},v=function(e,t){var i=o.version,n=r.get("abTest")||"",s=new XMLHttpRequest,a=r.get("kbnul");s.open("POST",a+"/putes/mobileanalytics",!0);var l={event:e,timestamp:(new Date).toISOString(),version:i,abTest:n};l=Object.assign(l,t),s.send(JSON.stringify(l))},y=function(e,t){g()&&v(e,t)},b=function(){if(!a){var e=u.tag;a=!0,_(".tries"),"conversion"===u.status?(_(".conversions"),r.set(u.dp+".failsRow",0),r.set(e.lineItemId+".failsRow",0)):(_(".fails"),_(".failsRow"));var t=r.get(u.dp)||{fails:0,failsRow:0,conversions:0},i=Object.assign(r.get(e.lineItemId.toString()),{fails:0,failsRow:0,conversions:0});t.lineItems=t.lineItems||[],i.conversions=t.conversions=t.conversions||0,i.fails=t.fails=t.fails||0,i.failsRow=t.failsRow=t.failsRow||0,t.lineItems.indexOf(e.lineItemId)===-1&&t.lineItems.push(e.lineItemId),u.dpLog=t;var n=r.get("lineItems")||[];n.indexOf(e.lineItemId)===-1&&(n.push(e.lineItemId),r.set("lineItems",n)),r.set(e.lineItemId,i)}},_=function(e){var t=r.get(u.dp+e)||0,i=r.get(u.tag.lineItemId+e)||0;r.set(u.dp+e,t+1),r.set(u.tag.lineItemId+e,i+1)};return{push:function(e,t){if(u){if(t=t||{},e.indexOf("Error")>-1||"event_SoundViolation"===e)u.status=m(e,t);else if(this.eventToStatus.hasOwnProperty(e)&&"conversion"!==u.status)u.status=this.eventToStatus[e];else if(d.hasOwnProperty(e)){var i="is"+e;u[i]=!0}var n=Date.now()-p,o=Date.now()-s;if(t.time=o,t.globalTime=n,u.hasOwnProperty(e))return Array.isArray(!u[e])||(u[e]=[u[e]]),void u[e].push(t);u[e]=t,l.indexOf(u.status)!==-1&&b()}},saveToDb:function(){if(u){var e;try{e=n.getLoopTime()}catch(e){}e&&(u.loopTime=e),y("VpaidLog",u),t=null,u=null}},eventToStatus:{event_AdImpression:"conversion",event_SoundViolation:"soundViolation",vpaidGeneralError:"vpaidGeneralError",vpaidLoadError:"vpaidLoadError",vpaidLoadTimeout:"vpaidLoadTimeoutError",vpaidInitAdError:"vpaidInitAdError",vpaidInitAdTimeout:"vpaidInitAdTimeoutError",vpaidStartAdError:"vpaidStartAdError",vpaidStartAdTimeout:"vpaidStartAdTimeoutError",vpaidPlayError:"vpaidPlayError",event_AdLoaded:"adLoaded",fetchVast:"fetchVast",adStopped:"adStopped"}}}})},function(e,t,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=!1;!function(e,n){if(e||(e={}),e.Backbone||(e.Backbone={}),"function"==typeof o&&o.amd)o(["underscore","jquery","exports"],function(t,i,o){e.Backbone=n(e,o,t,i)});else{var r=i(2);n(e,t,r)}}(void 0,function(e,t,i,o){var r=e.Backbone,s=[],a=(s.push,s.slice);s.splice;t.VERSION="1.1.2",t.$=o,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var l=t.Events={on:function(e,t,i){if(!u(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function e(t,n,o){if(!u(this,"once",t,[n,o])||!n)return this;var r=this,e=i.once(function(){r.off(t,e),n.apply(this,arguments)});return e._callback=n,this.on(t,e,o)},off:function(e,t,n){var o,r,s,a,l,d,c,h;if(!this._events||!u(this,"off",e,[t,n]))return this;if(!e&&!t&&!n)return this._events=void 0,this;for(a=e?[e]:i.keys(this._events),l=0,d=a.length;l<d;l++)if(e=a[l],s=this._events[e]){if(this._events[e]=o=[],t||n)for(c=0,h=s.length;c<h;c++)r=s[c],(t&&t!==r.callback&&t!==r.callback._callback||n&&n!==r.context)&&o.push(r);o.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=a.call(arguments,1);if(!u(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&c(i,t),n&&c(n,arguments),this},stopListening:function(e,t,o){var r=this._listeningTo;if(!r)return this;var s=!t&&!o;o||"object"!==("undefined"==typeof t?"undefined":n(t))||(o=this),e&&((r={})[e._listenId]=e);for(var a in r)e=r[a],e.off(t,o,this),(s||i.isEmpty(e._events))&&delete this._listeningTo[a];return this}},d=/\s+/,u=function(e,t,i,o){if(!i)return!0;if("object"===("undefined"==typeof i?"undefined":n(i))){for(var r in i)e[t].apply(e,[r,i[r]].concat(o));return!1}if(d.test(i)){for(var s=i.split(d),a=0,l=s.length;a<l;a++)e[t].apply(e,[s[a]].concat(o));return!1}return!0},c=function(e,t){var i,n=-1,o=e.length,r=t[0],s=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,r,s,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t);return}},h={listenTo:"on",listenToOnce:"once"};i.each(h,function(e,t){l[t]=function(t,o,r){var s=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=i.uniqueId("l"));return s[a]=t,r||"object"!==("undefined"==typeof o?"undefined":n(o))||(r=this),t[e](o,r,this),this}}),l.bind=l.on,l.unbind=l.off,i.extend(t,l);var p=t.Model=function(e,t){var n=e||{};t||(t={}),
this.cid=i.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};i.extend(p.prototype,l,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return i.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return i.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,o){var r,s,a,l,d,u,c,h;if(null==e)return this;if("object"===("undefined"==typeof e?"undefined":n(e))?(s=e,o=t):(s={})[e]=t,o||(o={}),!this._validate(s,o))return!1;a=o.unset,d=o.silent,l=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=i.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(r in s)t=s[r],i.isEqual(h[r],t)||l.push(r),i.isEqual(c[r],t)?delete this.changed[r]:this.changed[r]=t,a?delete h[r]:h[r]=t;if(!d){l.length&&(this._pending=o);for(var p=0,f=l.length;p<f;p++)this.trigger("change:"+l[p],this,h[l[p]],o)}if(u)return this;if(!d)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger("change",this,o);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!i.isEmpty(this.changed):i.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&i.clone(this.changed);var t,n=!1,o=this._changing?this._previousAttributes:this.attributes;for(var r in e)i.isEqual(o[r],t=e[r])||((n||(n={}))[r]=t);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,n=e.success;return e.success=function(i){return!!t.set(t.parse(i,e),e)&&(n&&n(t,i,e),void t.trigger("sync",t,i,e))},B(this,e),this.sync("read",this,e)},save:function(e,t,o){var r,s,a,l=this.attributes;if(null==e||"object"===("undefined"==typeof e?"undefined":n(e))?(r=e,o=t):(r={})[e]=t,o=i.extend({validate:!0},o),r&&!o.wait){if(!this.set(r,o))return!1}else if(!this._validate(r,o))return!1;r&&o.wait&&(this.attributes=i.extend({},l,r)),void 0===o.parse&&(o.parse=!0);var d=this,u=o.success;return o.success=function(e){d.attributes=l;var t=d.parse(e,o);return o.wait&&(t=i.extend(r||{},t)),!(i.isObject(t)&&!d.set(t,o))&&(u&&u(d,e,o),void d.trigger("sync",d,e,o))},B(this,o),s=this.isNew()?"create":o.patch?"patch":"update","patch"===s&&(o.attrs=r),a=this.sync(s,this,o),r&&o.wait&&(this.attributes=l),a},destroy:function e(t){t=t?i.clone(t):{};var n=this,o=t.success,e=function(){n.trigger("destroy",n,n.collection,t)};if(t.success=function(i){(t.wait||n.isNew())&&e(),o&&o(n,i,t),n.isNew()||n.trigger("sync",n,i,t)},this.isNew())return t.success(),!1;B(this,t);var r=this.sync("delete",this,t);return t.wait||e(),r},url:function(){var e=i.result(this,"urlRoot")||i.result(this.collection,"url")||L();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i.extend({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i.extend(t,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(e){p.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}});var g=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,i.extend({silent:!0},t))},m={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(g.prototype,l,{model:p,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,i.extend({merge:!1},t,v))},remove:function(e,t){var n=!i.isArray(e);e=n?[e]:i.clone(e),t||(t={});var o,r,s,a;for(o=0,r=e.length;o<r;o++)a=e[o]=this.get(e[o]),a&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,t.silent||(t.index=s,a.trigger("remove",a,this,t)),this._removeReference(a,t));return n?e[0]:e},set:function(e,t){t=i.defaults({},t,m),t.parse&&(e=this.parse(e,t));var n=!i.isArray(e);e=n?e?[e]:[]:i.clone(e);var o,r,s,a,l,d,u,c=t.at,h=this.model,f=this.comparator&&null==c&&t.sort!==!1,g=i.isString(this.comparator)?this.comparator:null,v=[],y=[],b={},_=t.add,w=t.merge,T=t.remove,S=!(f||!_||!T)&&[];for(o=0,r=e.length;o<r;o++){if(l=e[o]||{},s=l instanceof p?a=l:l[h.prototype.idAttribute||"id"],d=this.get(s))T&&(b[d.cid]=!0),w&&(l=l===a?a.attributes:l,t.parse&&(l=d.parse(l,t)),d.set(l,t),f&&!u&&d.hasChanged(g)&&(u=!0)),e[o]=d;else if(_){if(a=e[o]=this._prepareModel(l,t),!a)continue;v.push(a),this._addReference(a,t)}a=d||a,!S||!a.isNew()&&b[a.id]||S.push(a),b[a.id]=!0}if(T){for(o=0,r=this.length;o<r;++o)b[(a=this.models[o]).cid]||y.push(a);y.length&&this.remove(y,t)}if(v.length||S&&S.length)if(f&&(u=!0),this.length+=v.length,null!=c)for(o=0,r=v.length;o<r;o++)this.models.splice(c+o,0,v[o]);else{S&&(this.models.length=0);var E=S||v;for(o=0,r=E.length;o<r;o++)this.models.push(E[o])}if(u&&this.sort({silent:!0}),!t.silent){for(o=0,r=v.length;o<r;o++)(a=v[o]).trigger("add",a,this,t);(u||S&&S.length)&&this.trigger("sort",this,t)}return n?e[0]:e},reset:function(e,t){t||(t={});for(var n=0,o=this.models.length;n<o;n++)this._removeReference(this.models[n],t);return t.previousModels=this.models,this._reset(),e=this.add(e,i.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,i.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,i.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return a.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return i.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return i.invoke(this.models,"get",e)},fetch:function(e){e=e?i.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,n=this;return e.success=function(i){var o=e.reset?"reset":"set";n[o](i,e),t&&t(n,i,e),n.trigger("sync",n,i,e)},B(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?i.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var n=this,o=t.success;return t.success=function(e,i){t.wait&&n.add(e,t),o&&o(e,i,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof p)return e;t=t?i.clone(t):{},t.collection=this;var n=new this.model(e,t);return n.validationError?(this.trigger("invalid",this,n.validationError,t),!1):n},_addReference:function(e,t){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(y,function(e){g.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),i[e].apply(i,t)}});var b=["groupBy","countBy","sortBy","indexBy"];i.each(b,function(e){g.prototype[e]=function(t,n){var o=i.isFunction(t)?t:function(e){return e.get(t)};return i[e](this.models,o,n)}});var _=t.View=function(e){this.cid=i.uniqueId("view"),e||(e={}),i.extend(this,i.pick(e,T)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,T=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,l,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,i){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=i.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var n=e[t];if(i.isFunction(n)||(n=this[e[t]]),n){var o=t.match(w),r=o[1],s=o[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===s?this.$el.on(r,n):this.$el.on(r,s,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var e=i.extend({},i.result(this,"attributes"));this.id&&(e.id=i.result(this,"id")),this.className&&(e.class=i.result(this,"className"));var n=t.$("<"+i.result(this,"tagName")+">").attr(e);this.setElement(n,!1)}}}),t.sync=function(e,n,o){var r=E[e];i.defaults(o||(o={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var s={type:r,dataType:"json"};if(o.url||(s.url=i.result(n,"url")||L()),null!=o.data||!n||"create"!==e&&"update"!==e&&"patch"!==e||(s.contentType="application/json",s.data=JSON.stringify(o.attrs||n.toJSON(o))),o.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),o.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){s.type="POST",o.emulateJSON&&(s.data._method=r);var a=o.beforeSend;o.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",r),a)return a.apply(this,arguments)}}"GET"===s.type||o.emulateJSON||(s.processData=!1),"PATCH"===s.type&&S&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=o.xhr=t.ajax(i.extend(s,o));return n.trigger("request",n,l,o),l};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var P=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},A=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,C=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(P.prototype,l,{initialize:function(){},route:function(e,n,o){i.isRegExp(e)||(e=this._routeToRegExp(e)),i.isFunction(n)&&(o=n,n=""),o||(o=this[n]);var r=this;return t.history.route(e,function(i){var s=r._extractParameters(e,i);r.execute(o,s),r.trigger.apply(r,["route:"+n].concat(s)),r.trigger("route",n,s),t.history.trigger("route",r,n,s)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,i){return t.history.navigate(e,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var e,t=i.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(k,"\\$&").replace(A,"(?:$1)?").replace(I,function(e,t){return t?e:"([^/?]+)"}).replace(C,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var n=e.exec(t).slice(1);return i.map(n,function(e,t){return t===n.length-1?e||null:e?decodeURIComponent(e):null})}});var O=t.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},x=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,M=/msie [\w.]+/,V=/\/$/,F=/#.*$/;O.started=!1,i.extend(O.prototype,l,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(V,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(x,"")},start:function(e){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=i.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),o=document.documentMode,r=M.exec(navigator.userAgent.toLowerCase())&&(!o||o<=7);if(this.root=("/"+this.root+"/").replace(D,"/"),r&&this._wantsHashChange){var s=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace(x,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();return t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe))),t!==this.fragment&&(this.iframe&&this.navigate(t),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),i.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!O.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(F,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),t.history=new O;var N=function(e,t){var n,o=this;n=e&&i.has(e,"constructor")?e.constructor:function(){return o.apply(this,arguments)},i.extend(n,o,t);var r=function(){this.constructor=n};return r.prototype=o.prototype,n.prototype=new r,e&&i.extend(n.prototype,e),n.__super__=o.prototype,n};p.extend=g.extend=P.extend=_.extend=O.extend=N;var L=function(){throw new Error('A "url" property or function must be specified')},B=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}};return t})},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=__webpack_require__(2),Backbone=__webpack_require__(29);(function(){var e,t,i,n,o,r,s,a=[].slice;i=function(e){var t,n;return!_.isObject(e)||_.isFunction(e)?e:e instanceof Backbone.Collection||e instanceof Backbone.Model?e:_.isDate(e)?new Date(e.getTime()):_.isRegExp(e)?new RegExp(e.source,e.toString().replace(/.*\//,"")):e instanceof HTMLElement?e:e instanceof CSSStyleDeclaration?JSON.stringify(s(e)):(n=_.isArray(e||_.isArguments(e)),t=function(e,t,o){return n?e.push(i(t)):e[o]=i(t),e},_.reduce(e,t,n?[]:{}))},s=function(e){var t=!!document.documentMode,i=!t&&!!window.StyleMedia;if(!t&&!i)return e;var n={};for(var o in e)n[o]=e[o];return n},r=function(e){return null!=e&&((e.prototype==={}.prototype||e.prototype===Object.prototype)&&_.isObject(e)&&!_.isArray(e)&&!_.isFunction(e)&&!_.isDate(e)&&!_.isRegExp(e)&&!_.isArguments(e))},t=function(e){return _.filter(_.keys(e),function(t){return r(e[t])})},e=function(e){return _.filter(_.keys(e),function(t){return _.isArray(e[t])})},o=function(i,n,r){var s,a,l,d,u,c,h,p,f,g;if(null==r&&(r=20),r<=0)return console.warn("_.deepExtend(): Maximum depth of recursion hit."),_.extend(i,n);for(c=_.intersection(t(i),t(n)),a=function(e){return n[e]=o(i[e],n[e],r-1)},h=0,f=c.length;h<f;h++)u=c[h],a(u);for(d=_.intersection(e(i),e(n)),s=function(e){return n[e]=_.union(i[e],n[e])},p=0,g=d.length;p<g;p++)l=d[p],s(l);return _.extend(i,n)},n=function(){var e,t,n,r;if(n=2<=arguments.length?a.call(arguments,0,r=arguments.length-1):(r=0,[]),t=arguments[r++],_.isNumber(t)||(n.push(t),t=20),n.length<=1)return n[0];if(t<=0)return _.extend.apply(this,n);for(e=n.shift();n.length>0;)e=o(e,i(n.shift()),t);return e},_.mixin({deepClone:i,isBasicObject:r,basicObjects:t,arrays:e,deepExtend:n})}).call(void 0),function(e){__WEBPACK_AMD_DEFINE_ARRAY__=[__webpack_require__(2),__webpack_require__(29)],__WEBPACK_AMD_DEFINE_FACTORY__=e,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(function(_,Backbone){function objToPaths(e){var t={},i=DeepModel.keyPathSeparator;for(var n in e){var o=e[n];if(o&&o.constructor===Object&&!_.isEmpty(o)){var r=objToPaths(o);for(var s in r){var a=r[s];t[n+i+s]=a}}else t[n]=o}return t}function getNested(e,t,i){for(var n=DeepModel.keyPathSeparator,o=t.split(n),r=e,s=0,a=o.length;s<a;s++){if(i&&!_.has(r,o[s]))return!1;if(r=r[o[s]],null==r&&s<a-1&&(r={}),"undefined"==typeof r)return!!i||r}return!!i||r}function setNested(e,t,i,n){n=n||{};for(var o=DeepModel.keyPathSeparator,r=t.split(o),s=e,a=0,l=r.length;a<l&&void 0!==s;a++){var d=r[a];a===l-1?n.unset?delete s[d]:s[d]=i:("undefined"!=typeof s[d]&&_.isObject(s[d])||(s[d]={}),s=s[d])}}function parseObject(e){var t={};return"object"!==("undefined"==typeof e?"undefined":_typeof(e))?e:(_.each(e,function(e,i,n){t[i]=parseValue(e)}),t)}function parseValue(value){if(value&&"["===value[0]&&"]"===value[value.length-1]&&(value=eval(value)),_.isArray(value)){var arr=[];return _.each(value,function(e){arr.push(parseValue(e))}),arr}return"object"!==("undefined"==typeof value?"undefined":_typeof(value))||_.isElement(value)?"true"===value||value===!0||"false"!==value&&value!==!1&&(""===value?value:isNaN(value)?value:Number(value)):parseObject(value)}function deleteNested(e,t){setNested(e,t,null,{unset:!0})}var DeepModel=Backbone.Model.extend({constructor:function(e,t){var i,n=e||{};this.cid=_.uniqueId("c"),this.attributes={},t&&t.collection&&(this.collection=t.collection),t&&t.parse&&(n=this.parse(n,t)||{}),(i=_.result(this,"defaults"))&&(n=_.deepExtend({},i,n)),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)},toJSON:function(e){return _.deepClone(this.attributes)},get:function(e){return getNested(this.attributes,e)},set:function(e,t,i){var n,o,r,s,a,l,d,u;if(null==e)return this;if("object"===("undefined"==typeof e?"undefined":_typeof(e))?(o=e,i=t||{}):(o={})[e]=t,o=parseObject(o),i||(i={}),!this._validate(o,i))return!1;r=i.unset,a=i.silent,s=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=_.deepClone(this.attributes),this.changed={}),u=this.attributes,d=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]),o=objToPaths(o);for(n in o)t=o[n],_.isEqual(getNested(u,n),t)||s.push(n),_.isEqual(getNested(d,n),t)?deleteNested(this.changed,n):setNested(this.changed,n,t),r?deleteNested(u,n):setNested(u,n,t);if(!a){s.length&&(this._pending=!0);for(var c=DeepModel.keyPathSeparator,h=0,p=s.length;h<p;h++){var e=s[h];this.trigger("change:"+e,this,getNested(u,e),i);for(var f=e.split(c),g=f.length-1;g>0;g--){var m=_.first(f,g).join(c),v=m+c+"*";this.trigger("change:"+v,this,getNested(u,m),i),this.trigger("change:"+m,this,getNested(u,e),i)}}}if(l)return this;if(!a)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},clear:function(e){var t={},i=objToPaths(this.attributes);for(var n in i)t[n]=void 0;return this.set(t,_.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!_.isEmpty(this.changed):void 0!==getNested(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&objToPaths(this.changed);var t=this._changing?this._previousAttributes:this.attributes;e=objToPaths(e),t=objToPaths(t);var i,n=!1;for(var o in e)_.isEqual(t[o],i=e[o])||((n||(n={}))[o]=i);return n},previous:function(e){return null!=e&&this._previousAttributes?getNested(this._previousAttributes,e):null},previousAttributes:function(){return _.deepClone(this._previousAttributes)}});return DeepModel.keyPathSeparator=".",Backbone.DeepModel=DeepModel,module.exports=DeepModel,Backbone})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l=i(6),d=n(l),u=i(29),c=n(u),h=i(25),p=n(h),f=function(){function e(t,i){o(this,e),this.window=t||window,this.$window=(0,d.default)(window),this.windowHeight=this.$window.height(),this.windowWidth=this.$window.width(),this.scrollSelector=a.default.isEmpty(i)?this.window:(0,d.default)(i)[0],this._timeBetweenEvents=100,this.keyPressMap={18:!1,16:!1,67:!1,77:!1},this._setScrollListener(),this._setMouseMoveListener(),this._setKeyPressListener(),this._setTabViewListener(),this._setOrientationChangeListener(),this._setResizeListener(),this._setTaboolaReadMoreListener()}return r(e,[{key:"_setScrollListener",value:function(){var e=a.default.throttle(this._trigger.bind(this,"window:scroll:change"),this._timeBetweenEvents);this.scrollSelector.addEventListener("scroll",e)}},{key:"_setMouseMoveListener",value:function(){var e=a.default.throttle(this._trigger.bind(this,"window:mouse:move"),this._timeBetweenEvents);this.window.addEventListener("mousemove",e)}},{key:"_setKeyPressListener",value:function(){var e=this;window.addEventListener("keyup",function(t){e._trigger.bind(e,"window:key:press"),t.keyCode in e.keyPressMap&&(e.keyPressMap[t.keyCode]=!1)}),this.window.addEventListener("keydown",function(t){t.keyCode in e.keyPressMap&&(e.keyPressMap[t.keyCode]=!0,e.keyPressMap[18]&&e.keyPressMap[16]&&e.keyPressMap[67]&&e.keyPressMap[77]&&(c.default.trigger("supportTool:event","open"),e.keyPressMap[18]=e.keyPressMap[16]=e.keyPressMap[67]=e.keyPressMap[77]=!1))})}},{key:"_setOrientationChangeListener",value:function(){var e=this,t=a.default.throttle(e._trigger.bind(e,"window:orientation:change"),this._timeBetweenEvents);window.addEventListener("orientationchange",t)}},{key:"_setResizeListener",value:function(){var e=this,t=a.default.throttle(e._handleResizeEvent.bind(e),this._timeBetweenEvents);window.addEventListener("resize",t)}},{key:"_setTabViewListener",value:function(){this.isTabOut=document.hidden,this.window.document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),this.window.addEventListener("focus",this._handleTabEvents.bind(this),!0),this.window.addEventListener("blur",this._handleTabEvents.bind(this),!0)}},{key:"_handleResizeEvent",value:function(e){var t=this.$window.height(),i=t-this.windowHeight;this.windowHeight=t;var n=this.$window.width(),o=n-this.windowWidth;this.windowWidth=n,this._trigger("window:resize:change",{heightChange:i,widthChange:o})}},{key:"_handleVisibilityChange",value:function(e){this.isTabOut=document.hidden,this._handleTabEvents(e)}},{key:"_handleTabEvents",value:function(e){this.isTabOut?this._trigger("window:tab:change",p.default.TAB_STATE.tabOut):"focus"===e.type?this._trigger("window:tab:change",p.default.TAB_STATE.focus):this._trigger("window:tab:change",p.default.TAB_STATE.blur)}},{key:"_trigger",value:function(e,t){c.default.trigger(e,t)}},{key:"_setTaboolaReadMoreListener",value:function(){window._taboola=window._taboola||[],_taboola.push({listenTo:"readmore.click",handler:function(){c.default&&c.default.trigger("taboola:readmore:click")}})}}]),e}(),g=function(){var e;return function(t,i){return e||(e=new f(t,i)),e}}();e.exports=g},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l={ALL:"ALL",P_VIDEO:"P_VIDEO",B_VIDEO:"B_VIDEO"},d=function(){function e(){o(this,e)}return r(e,[{key:"addUnit",value:function(e,t){a.default.isEmpty(window.cmTag.unitList)&&(window.cmTag.unitList={}),this.unitsList=window.cmTag.unitList||{},this.unitsList[e]=t,window.cmTag.unitList=this.unitsList,this._listenUnitsEvents(e)}},{key:"_listenUnitsEvents",value:function(e){var t=this.unitsList[e];t.on("change:generalPlayingUnitState",this._onPlayingChange.bind(this,e))}},{key:"_onPlayingChange",value:function(e,t,i){a.default.size(this.unitsList)>1&&(i===!0||i===!1)&&this._decidePlayOrPause()}},{key:"_findVideo",value:function(e,t){for(var i=a.default.sortBy(this.unitsList,function(e,t){return"CUSTOM"==e.get("unitType")}),n=0;n<i.length;n++){var o=i[n],r=o.get("redId"),s=null;switch(e){case l.ALL:s=!0;break;case l.P_VIDEO:s="CUSTOM"==this._getUnitType(r);break;case l.B_VIDEO:s="CUSTOM"!=this._getUnitType(r)}s&&t.bind(this,r)()}}},{key:"_decidePlayOrPause",value:function(){var e=this._countPlayingUnitsOnView();e.playingUnits>1&&e.eligibleUnits>1?this._decidePause():0==e.playingUnits&&e.eligibleUnits>0&&this._decidePlay()}},{key:"_decidePause",value:function(){this._findVideo(l.P_VIDEO,function(e){this._isUnitEligibleToPlay(e)&&this._isUnitPlaying(e)&&this._pauseUnit(e)})}},{key:"_decidePlay",value:function(){this._findVideo(l.P_VIDEO,function(e){this._isUnitEligibleToPlay(e)&&!this._isUnitPlaying(e)&&this._playUnit(e)}),this._playOutOfView()}},{key:"_playOutOfView",value:function(){var e=null;this._findVideo(l.B_VIDEO,function(t){null===e&&(e=!this._isUnitPlaying(t)&&this._isUnitEligibleToPlay(t))}),e&&this._findVideo(l.P_VIDEO,function(e){this._playUnit(e)})}},{key:"_pauseUnit",value:function(e){this.unitsList[e].set("multiUnitManager.state","pause")}},{key:"_playUnit",value:function(e){this.unitsList[e].set("multiUnitManager.state","play")}},{key:"_countPlayingUnitsOnView",value:function(){var e=this,t=0,i=0;return a.default.each(this.unitsList,function(n){var o=n.get("redId");e._isUnitAllowToPlay(o)&&e._isUnitPlaying(o)&&t++,e._isUnitEligibleToPlay(o)&&i++}),{playingUnits:t,eligibleUnits:i}}},{key:"_isUnitEligibleToPlay",value:function(e){return this.unitsList[e].get("isEligibleToPlay")||this.unitsList[e].get("isUnitEligible")||this.unitsList[e].get("isUnitViewable")}},{key:"_isUnitAllowToPlay",value:function(e){return"pause"!=this.unitsList[e].get("multiUnitManager.state")&&this._isUnitEligibleToPlay(e)}},{key:"_isUnitPlaying",value:function(e){return this.unitsList[e].get("generalPlayingUnitState")}},{key:"_getUnitType",value:function(e){return this.unitsList[e].get("unitType")}}]),e}();cmTag.multiUnitManager=cmTag.multiUnitManager||new d,e.exports=cmTag.multiUnitManager},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(29),s=i(2),a=function(){function e(t){n(this,e),this.callBacks={};var i=!1;s.isFunction(t.onConversion)&&(this.callBacks.onConversion=t.onConversion,i=!0),s.isFunction(t.onFilledImpression)&&(this.callBacks.onFilledImpression=t.onFilledImpression,i=!0),i&&this._setEvenListeners(t)}return o(e,[{key:"_setEvenListeners",value:function(e){r.on("global:creativeEvent",this._onGlobalCreativeEvent.bind(this,e)),r.on("filledImpression",this._onGlobalCreativeEvent.bind(this,e,{type:"filledImpression"}))}},{key:"_onGlobalCreativeEvent",value:function(e,t){t=t||{},"conversion"===t.type&&this.callBacks.onConversion?this.callBacks.onConversion():"filledImpression"===t.type&&this.callBacks.onFilledImpression&&this.callBacks.onFilledImpression()}}]),e}();e.exports=a},function(e,t){"use strict";e.exports={player:void 0}},function(e,t,i){"use strict";e.exports={beforeCMTag:i(36)}},function(e,t,i){"use strict";var n=i(2),o=i(37),r=i(38),s={init:function(e){o.set("Function","bind"),o.set("Event","constructor",!0),o.set("Array","forEach",!1),o.set("Array","every",!1),new r,window.cmTag.customDataForTest={startWithABT:!1};var t=!!e.gaFactor&&n.isFactor(parseInt(e.gaFactor));t&&window.addEventListener("error",function(t){try{if(t.filename.indexOf("infra/cmTag")==-1)return;var i={timestamp:(new Date).toISOString(),message:t.message,lineNum:t.lineno,fullUrl:window.location.href,userAgent:window.navigator.userAgent,firedStartWithABT:window.cmTag.customDataForTest.startWithABT,unitType:e.unitType};t.error&&(i.callStack=t.error.stack);var n=new XMLHttpRequest,o="//vidanalytics.taboola.com";n.open("POST",o+"/putes/cm_units_error_logs",!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=JSON.stringify(i);n.send(r)}catch(e){return}})}};e.exports=s.init},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n);
}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=null,r=function(e){return/\{\s*\[native code\]\s*\}/.test(""+e)},s=function(){function e(){return i(this,e),o||(o=this),o}return n(e,[{key:"set",value:function(e,t,i){r(window[e].prototype[t])||(this.iframe||(this.iframe=document.createElement("iframe"),this.iframe.style.width=0,this.iframe.style.height=0,this.iframe.style.visibility="hidden",this.iframe.style.display="none",document.body.appendChild(this.iframe)),this.iframe.contentWindow[e].prototype[t]&&(window[e].prototype[t]=this.iframe.contentWindow[e].prototype[t],i&&(window[e]=this.iframe.contentWindow[e])))}}]),e}();e.exports=new s},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(){i(this,e),this.arrayFrom()}return n(e,[{key:"arrayFrom",value:function(){Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t},n=Math.pow(2,53)-1,o=function(e){var t=i(e);return Math.min(Math.max(t,0),n)};return function(e){var i=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,s=arguments.length>1?arguments[1]:void 0;if("undefined"!=typeof s){if(!t(s))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(r=arguments[2])}for(var a,l=o(n.length),d=t(i)?Object(new i(l)):new Array(l),u=0;u<l;)a=n[u],s?d[u]="undefined"==typeof r?s(a,u):s.call(r,a,u):d[u]=a,u+=1;return d.length=l,d}}())}}]),e}();e.exports=o},function(e,t,i){"use strict";var n=(i(29),i(2),i(40)),o=i(6);e.exports=n.extend({defaults:o.extend(!0,{},n.prototype.defaults,{animation:{onTransitionOpen:!1},bfFactor:0,noaop:2,wfDynamicPause:!1,wfManual:!0,runWfWhenEmpty:!0,viewPercent:20,allowedHeightChange:75,isFitToSize:!0,brandingTitleSelector:".video-label-box .branding",widgetTitleSelector:".video-label-box .video-title",parentSelector:".tbl-feed-container",kibanaEventsToSend:"all",predictors:{autoKill:{isActive:!0},getAdFail:{isActive:!0},multiAd:{adQState:"completed",isActive:!0,predictPoints:"any"},loading:{isActive:!0,predictPoints:"any"},repeat:{isActive:!0,predictPoints:"any"},playerReady:{isActive:!0,predictPoint:0},distancePercent:{isActive:!1,predictPoints:{}},distancePixels:{isActive:!1,predictPoints:{}},firstScroll:{isActive:!1,predictPoints:0}},playPriority:{type:"rpox"},vForce:{isActive:!0},components:{},category:"blankblack5",isMultiAd:!0,pubId:169497,pubTagId:953497,preroll:{pubId:169497,pubTagId:953497},midroll:{pubId:169497,pubTagId:953497},postroll:{pubId:169497,pubTagId:953497},titleContainer:{titleText:"Video from our partners",BrandingText:"Brought to you by Taboola"},secondsToClose:200,secondsToCloseFeed:20,isMobile:!1,onOutOfView:"pause",unitTitle:"Sponsored Video by Taboola",vertical:"_#VERTICAL#_",secondsBW:10,additionalCss:{"z-index":"999 !important"},timeBetweenAds:1,player:{hasControls:!1,urls:{blankLocation:"{{player.urls.contentVideosLocation}}/blackScreen5.mp4"},bfFactor:0,settings:{vakll:24e4,time_between_waterfall:1,mintimwf:1e4,bfFactor:0,ad_loaded_method:!0,wf_manual:!1,wf_dynmc_ps:!1,disctxt:"Advertisement",rstmrai:!0,pstn:"vforce2",pvpd:"video",mprdct:.025}}}),predefinedSettings:o.extend(!0,{},n.prototype.predefinedSettings,{level:{2:{player:{settings:{mprdct:.0182}}},3:{player:{settings:{mprdct:.0158,mintimwf:7e3}},noaop:1},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0258,mintimwf:1e4}}},5:{isMultiAd:!1},6:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0258,mintimwf:1e4}}}}})})},function(e,t,i){"use strict";var n=(i(29),i(2),i(41)),o=i(6);e.exports=n.extend({defaults:o.extend(!0,{},n.prototype.defaults,{additionalCss:{},appendType:"beforeend",isMultiSelect:!0,isSelectorFallback:!0,isSoundOnHover:!0,isViewable:!1,onAdDone:"none",onOutOfView:"detach",parentPosition:"beforeend",placeholderCss:{},unitTitle:"ADVERTISEMENT",viewPercent:20,detach:{onBackToView:"return"},rescan:{isActive:!1,intervalSeconds:5},components:{TimerView:{hasTimer:!0}},animation:{onTransitionOpen:!0,onTransitionClose:!0}})})},function(e,t,i){"use strict";var n=i(42),o=(i(2),i(6));e.exports=n.extend({defaults:o.extend(!0,{},n.prototype.defaults,{isSoundOnHover:!0,loaderImage:"",noaop:5,secondsBW:60,timeBetweenAds:60,closeButton:{hasCloseButton:!0,secondsToCloseButton:5},player:{urls:{blankLocation:"{{player.urls.contentVideosLocation}}/blackScreen60.mp4"},hasAdControls:!0}}),predefinedSettings:o.extend(!0,{},n.prototype.predefinedSettings,{demo:{1:{originId:15,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0}}}}}),initialize:function(){n.prototype.initialize.call(this),this.set("player.playlist",[{url:this.get("player.urls.blankLocation"),name:"Blank",title:"Blank",type:"video/mp4"}])},getScheduleArr:function(){var e=[];return e.push(this._getSchedule("pre-roll",this.get("pubId"),this.get("pubTagId"))),e}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(2),r=n(o),s=i(29),a=n(s),l=i(30),d=(n(l),i(43)),u=n(d);e.exports=a.default.DeepModel.extend({STATE:{READY:0,GOT_AD:1,PLAYING:2,PAUSED:3,PAUSED_BY_USER:4,STOPPED_BY_USER:5,DETACHED:6,ATTACHED:7,DONE:8,PLAYER_READY:9,PLAYER_CLOSE:10,PLAYER_STOP:11,AD_STOPPED:12,OPT_OUT:13,OPEN_WITH_PAUSE:14,WAITING_FOR_EXPAND:15,REPEAT_STAND_BY:16,REPEAT_SPINNING:17},defaults:{abTest:"",adMaxPlaySeconds:181,adTitle:"Video",adVolume:"auto",aspectRatio:"16:9",autoPlay:!0,baseReportD:"basebanner.com",cfr:0,country:"",defaultAdParameters:"",defaultTagTimeout:20,gaFactor:1e4,gaFrameSrc:"{{urls.base}}/release-r1/assets/ga.html#page={{gaVertical}}&category={{gaVertical}}",gaVertical:"source",height:0,interruptLoading:!0,ip:"",isAllowDuplicateKey:!0,isDebug:!1,isFirePixel:!0,isHideIframe:!1,isMobile:!1,isMobileMacros:!1,isPlayerViewable:!1,isProtectedInIframe:!0,isRepeat:!0,isResponsive:!0,isCallIDLE:!1,isShowOnAd:!1,isShowOnAdLocation:"begin",isSoundOnHover:!1,isUnitEligible:!1,isUnitViewable:!1,isUseObserver:!1,isUseNonNativeObserver:!1,kbnul:"//vidanalytics.taboola.com",lineItemId:"",loaderImage:"",logViewabilityCalc:!1,mfp:4,mobilePlayer:"DP",mobileSpriteTimeoutSeconds:20,mute:!0,noaop:2,noDebugReport:!1,openingEffect:0,originId:15,placement:"",playerContainer:"body",playerEndSeconds:0,playerVolume:0,printCurrentViewPercent:!1,predefinedSettings:{level:1},repeat:!0,retriesLWF:5,reportTimerSeconds:10,ronPercent:5,secondsBW:10,secondsInView:2,secondsLWF:.1,secondsToClose:0,secondsToCloseGlobal:0,sortOrderType:0,state:null,timeBetweenAds:1,totalTimeout:60,traceViewabilitySeconds:2,ulog:[""],vastRetry:2,version:"158_allow_sec",vertical:"source",viewabilityPercent:50,wfManual:!1,volume:"onHover",width:0,maxVimpsInQueue:2,useSwfVideoJs:!0,isPWOV:!0,mpgclrslv:["gcdn.2mdn.net"],cnvsldrt:5,gtvid:"//cnv.tcsrv.com/getvid?url",vForce:{isActive:!1,getAdTimeoutSeconds:10},detach:{width:320,position:{horizontal:"right",vertical:"bottom"}},customization:{unitContainer:{},adTitle:{},placeHolder:{},playerView:{}},midrollCollapse:{isActive:!1,time:5},pixels:{D2DFallback:{id:31468623,type:5},conversion:{id:31425418,type:2},close:{id:31579687,type:5},timeout:{id:31574457,type:5},optOut:{id:31530958,type:5},optOutNever:{id:31419288,type:5},addImpresion:{id:31579657,type:5},eligible:{id:31579697,type:16},networkError:{type:42},lostEligibility:{type:43},fraudDetection:{type:32},clickthrough:{type:44},error:{id:31608187,type:5},quarterly1:{id:31608197,type:5},quarterly2:{id:31608207,type:5},quarterly3:{id:31608217,type:5},complete:{id:31608237,type:5},render:{id:31608177,type:5},startWithABT:{id:31589837,type:45,isFire:!1},repeatClick:{type:46},renderOnDemand:{type:51},stopUnit:{type:52},getAdAny:{type:53,isFire:!1},getAdNoRV:{type:54,isFire:!1},getAd:{type:55,isFire:!1},secondsToCloseTimer:{type:56,isFire:!1},secondsToCloseGlobalTimer:{type:57,isFire:!1},midrollCollapseTimer:{type:58,isFire:!1},attach:{type:61},detach:{type:62},sliderFeedStartWithABT:{type:65},url:"//conv{{dataCenter}}mp.{{baseReportD}}/st"},closeButton:{hasCloseButton:!0,secondsToCloseButton:5},urls:{base:"//vidstat.taboola.com",staticImage:""},player:{versions:{vplayer:"v8.5.8",content:"21_12_17m"},urls:{vplayerLocation:"{{urls.base}}/vpaid/vPlayer",vpaidLocation:"{{player.urls.vplayerLocation}}/vpaidjs/{{player.versions.vplayer}}/main-vpaid.js",playerLocation:"{{player.urls.vplayerLocation}}/player/{{player.versions.vplayer}}",contentVideosLocation:"//cloudvid.cachefly.net/vid",oppsBasePath:"//opps.{{baseReportD}}",oppsRequest:"{{player.urls.oppsBasePath}}/OpportunityServlet",wfBasePath:"//wf.{{baseReportD}}",wfRequest:"{{player.urls.wfBasePath}}/VideoBidRequestHandlerServlet"},settings:{dlgverr:!0},b2b:1,bfFactor:15,hasAdControls:!0,hasBFeature:!0,hasControls:!0,isBypassFlash:!0,isFire99:!0,isFlashPlayer:!0,minVpaidRunTime:4},components:{D2DFallbackView:{pubId:127968,pubTagId:756668,height:"{{height}}",width:"{{width}}",location:"http://15.{{baseReportD}}/WhiteLabelBidRequestHandlerServlet"},OptOut:{hasOptOut:!0,pubId:0,pubTagId:0,imageLocation:"{{urls.base}}/fp/img/closeVideo.png"},CloseButtonView:{hasCloseButton:!1,delay:1500,imageLocation:"{{urls.base}}/assets/x-close-24.png"},TimerView:{hasTimer:!1,time:3,countdownAction:"closeButton"},DetachButtonView:{hasDetuchView:!1,time:1,imageLocation:"{{urls.base}}/assets/ContractButton32.png"},Repeat:{isActive:!1,imageLocation:"{{urls.base}}/assets/repeat1.png"},PosterView:{isActive:!1,imageLocation:"{{urls.base}}/img/play_image_4.jpg",defaultLocation:"{{urls.base}}/img/play_image_3.jpg"},Loading:{type:"img",imgUrl:"{{urls.base}}/assets/loading2.png",staticUrl:"{{urls.base}}/assets/repeat1.PNG"}},fd:{pm:{factor:0,timeoutPeriod:1200,url:"https://data.ad-score.com/score/cors?s=1&pid=1000026&tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}&",pluginUrl:"//js.ad-score.com/score.min.js?pid=1000026#tid=12&l1={{cipid}}&l2={{CMP_ID}}&l3={{creativeId}}&l4={{tagId}}&p1={{EX_ID}}&uid={{USER_ID}}&uip={{IP}}&ref={{referrer}}&cb={{redId}}"}}},predefinedSettings:{demo:{1:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1}},onOutOfView:"pause",isPWOV:!1},2:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1}},onOutOfView:"pause"},3:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1}},isPWOV:!1},4:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1}},onOutOfView:"pause"}},isFireAllPixels:{1:{pixels:{startWithABT:{isFire:!0},getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0},secondsToCloseTimer:{isFire:!0},secondsToCloseGlobalTimer:{isFire:!0},midrollCollapseTimer:{isFire:!0}}},2:{pixels:{getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0}}}}},storage:{},initialize:function(){this.log=new u.default({unitType:this.get("unitType"),className:"BaseUnitModel"});var e=this.get("settingsByConditions");if(e&&e.length>0)for(var t=0;t<e.length;t++){for(var i=e[t].conditions,n=e[t].settings,o=!0,s=0;s<i.length;s++)if(i[s].val&&"function"==typeof i[s].val){var a=i[s].val(this);this.get(i[s].key)!==a&&(o=!1)}else this.get(i[s].key)!==i[s].val&&(o=!1);o&&this.set(n)}var l=this.get("demo");l&&this.set("predefinedSettings.demo",l);var d=this.get("isFireAllPixels");d&&this.set("predefinedSettings.isFireAllPixels",d);var c=this.get("predefinedSettings");if(c){var h;for(var p in c)h=c[p],this.predefinedSettings[p]&&this.predefinedSettings[p][h]&&this.set(this.predefinedSettings[p][h])}this._processPushArray(),this.get("baseReport")&&this.get("oppsBasePath)")&&this.set("oppsBasePath",this.get("baseReport")),this.set("isUseObserverChanged",!1),this.get("isUseObserver")&&!r.default.isObserverInBrowser(this.get("isUseNonNativeObserver"))&&(this.set("isUseObserver",!1),this.set("isUseObserverChanged",!0)),this.log.info("unit model created:",this.attributes),this._handleABTest()},get:function(e){var t=a.default.DeepModel.prototype.get.call(this,e);if(!t||"string"!=typeof t)return t;for(var i=t.match(/\{\{(.*?)\}\}/g);i;){for(var n=0;n<i.length;n++){var o=i[n].substr(2,i[n].length-4),r=a.default.DeepModel.prototype.get.call(this,o);r||(r=""),t=t.replace(i[n],r)}i=t.match(/\{\{(.*?)\}\}/g)}return t},getPixel:function(e){!this.pixel&&this._createPixel();var t=this.get(e);return"pixels.conversion"===e&&a.default.trigger("global:creativeEvent",{type:"conversion"}),this.pixel({type:t.type||"",pixelId:t.id,timestamp:Date.now()})},_createPixel:function(){var e=this.get("pixels.url")+"?cijs=convusmp&ttype={{type}}&cisd=convusmp&cipid="+this.get("cipid")+"&crid="+this.get("creativeId")+"&dast="+this.get("dast")+"&cmcv=&pix={{pixelId}}&cb={{timestamp}}&uv="+this.get("unitVersion");this.get("abTest")&&(e+="&abt="+this.get("abTest")),this.get("referrerUrl")&&(e+="&ru="+this.get("referrerUrl")),e=this._addPixelParameter("tagCpmFloor","cft",e),e=this._addPixelParameter("unitId","blid",e),e=this._addPixelParameter("unitName","unm",e),e=this._addPixelParameter("debugKey1","dk1",e),e=this._addPixelParameter("debugKey2","dk2",e),e=this._addPixelParameter("order","order",e),this.pixel=r.default.template(e)},_addPixelParameter:function(e,t,i){return(this.get(e)||0===this.get(e)||this.get(e)===!1)&&(i+="&"+t+"="+this.get(e)),i},getImpressionPixel:function(){this.get("player.isFire99")},_getSchedule:function(e,t,i){return{roll_type:e,url:this.get("player.urls.vpaidLocation"),volume:"on"===this.get("volume")?100:0,mute:"on"!==this.get("volume"),oid:this.get("originId"),mfp:this.get("mfp"),sortOrderType:this.get("sortOrderType"),ad_parameters:JSON.stringify(this.get("demandConfig")),pubid:t,tagid:i,defaultTagTimeout:this.get("defaultTagTimeout"),totaltimeout:this.get("totalTimeout"),noaop:this.get("noaop"),skip_vast:!0}},_handleABTest:function(){this.get("abTest")&&this.get("pixels.startWithABT.isFire")&&(window.cmTag.customDataForTest.startWithABT=!0,r.default.firePixel(this.getPixel("pixels.startWithABT"),"AB Test started"))},_processPushArray:function(){var e=this.get("pushedArr")||[];"FEED_MANAGER"!==this.get("unitType")&&"INLINE_FEED"!==this.get("unitType")||this._setFeedManagerSubType(e);var t={};if(e){e.forEach(function(e){var i=Object.keys(e)[0];t[i]||(t[i]=[]),t[i].push(e[i])});for(var i in t){var n=t[i],o=this.get(i);o&&n.push(o);var r=n.sort().join("!");this.set(i,r)}}},_setFeedManagerSubType:function(e){var t=this.get("detachToSlider.isStartFromSlider"),i=this.get("detachToSlider.isDetachToSlider"),n="FEED_MANAGER"===this.get("unitType")?"ufm":"uf";n+=t||i?t&&!i?"_vB":!t&&i?"_vC":"_vD":"_vA",e.push({abTest:n})},setStorage:function(e,t){this.storage[e]=t},getStorage:function(e){return this.storage[e]},setNextAd:function(e){this.setStorage("nextAd",e),setTimeout(this.set.bind(this,"hasReadyAd",!0),0)},getNextAd:function(){var e=this.getStorage("nextAd");return e&&this.log.info("NEXT AD TYPE = "+parseInt(e.adData.requiredViewability?"1":"0"),e),this.setStorage("nextAd",void 0),setTimeout(this.set.bind(this,"hasReadyAd",!1),0),e}})},function(e,t){"use strict";function i(e){window.cmTag=window.cmTag||{},e=e||{},this.unitType=e.unitType,this.className=this.className||e.className}i.prototype.info=function(e,t){window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},i.prototype.debug=function(e,t){window.cmTag.logger.info("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},i.prototype.error=function(e,t){window.cmTag.logger.error("unit type: "+this.unitType+" class name: "+this.className+" - "+e,t)},e.exports=i},function(e,t,i){"use strict";var n=(i(29),i(2),i(45)),o=i(6);e.exports=n.extend({defaults:o.extend(!0,{},n.prototype.defaults,{isMobile:!0,mobilePlayer:"DP",timeBetweenAds:1,suppressContentZindex:!0,animation:{onTransitionOpen:!1},bfFactor:0,noaop:2,isMultiAd:!0,secondsToCloseFeed:20,onOutOfView:"pause",viewPercent:20,volume:"off",parentSelector:".tbl-feed-container",allowedHeightChange:75,detachToSlider:{isStartFromSlider:!1,isDetachToSlider:!1,width:500,position:{horizontal:"right",vertical:"bottom",horizontalOffset:0,verticalOffset:0},liquidSize:{isActive:!1,widthPercent:33,minWidth:500},customCss:null,animation:!1,hasCloseButton:!0,onOutOfView:"pause"},components:{Loading:{type:"img",imgUrl:"{{urls.base}}/assets/loading2.png"}},player:{settings:{use_flash_player:!1,adto:12e4,vakll:24e4,altmot:12e4,forcecnvsmpg:!0,wf_dynmc_ps:!1,sprssviderr:!0,useapforcntnt:!0,mintimwf:1e4,time_between_waterfall:1,bfFactor:0,maxReadyVpaid:3}}})})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(42),r=n(o),s=i(2),a=n(s),l=i(6),d=n(l),u=i(25);n(u);e.exports=r.default.extend({defaults:d.default.extend(!0,{},r.default.prototype.defaults,{contentLoadType:"content",category:"travel",isPlaylist:!1,secondsBW:17,isMultiAd:!0,contentCallback:function(){},pixels:{D2DFallback:{id:31468623,type:5}},player:{urls:{contentLocation:"{{urls.base}}/content{{player.versions.content}}.js",contentImagesLocation:"{{player.urls.contentVideosLocation}}/img"},settings:{queue_size:6,max_ready_vpaid:3,mprdct:.025},playlist:[]},components:{D2DFallbackView:{location:"//15.{{baseReportD}}/WhiteLabelBidRequestHandlerServlet",width:0,height:0},ClickTrough:{isActive:!1}}}),predefinedSettings:d.default.extend(!0,{},r.default.prototype.predefinedSettings,{level:{2:{noaop:2,"player.settings.max_ready_vpaid":3,"player.settings.queue_size":4,secondsBW:20},3:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20},4:{noaop:1,"player.settings.max_ready_vpaid":2,"player.settings.queue_size":3,secondsBW:20}},demo:{1:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,player:{settings:{mprdct:0}}}}}),initialize:function(){r.default.prototype.initialize.call(this),"mrss"===this.get("contentLoadType")?d.default.ajax({url:this.get("player.urls.contentLocation"),dataType:"xml",success:this._onMrssLoad.bind(this)}):"direct"===this.get("contentLoadType")?this.set("player.playlist",[{id:0,title:"",link:"",url:this.get("player.urls.contentLocation")||this.get("pVideoUrl"),type:"video/mp4",image:""}]):(window.category=this.get("category"),a.default.loadJs(this.get("player.urls.contentLocation"),this._onContentLoad.bind(this))),this.set("pubId",this.get("preroll.pubId")),this.set("pubTagId",this.get("preroll.pubTagId"))},_onMrssLoad:function(e){var t=[];(0,d.default)(e).find("item").each(function(e,i){var i=(0,d.default)(i),n={};n.id=e,n.title=i.find("title").text(),n.link=i.find("link").text(),n.url=i.find("media\\:content,content").attr("url"),n.type=i.find("media\\:content,content").attr("type"),n.image=i.find("media\\:thumbnail,thumbnail").attr("url"),t.push(n)}),this.set("player.playlist",t)},_onContentLoad:function(){window.playlist.forEach(function(e,t,i){i[t].image=this.get("player.urls.contentImagesLocation")+"/"+e.image,i[t].title=e.title.replace(/([A-Z])/g,"$1").replace(/^./,function(e){return e.toUpperCase()}),i[t].url=this.get("player.urls.contentVideosLocation")+"/"+i[t].filename,i[t].name=i[t].filename,i[t].type="video/mp4"},this),this.set("player.playlist",window.playlist)},getScheduleArr:function(){var e=[];return e.push(this._getSchedule("pre-roll",this.get("preroll.pubId"),this.get("preroll.pubTagId"))),e.push(this._getSchedule("mid-roll",this.get("midroll.pubId"),this.get("midroll.pubTagId"))),e.push(this._getSchedule("post-roll",this.get("postroll.pubId"),this.get("postroll.pubTagId"))),e}})},function(e,t,i){"use strict";var n=(i(29),i(2),i(40)),o=i(6);e.exports=n.extend({defaults:o.extend(!0,{},n.prototype.defaults,{isMobile:!0,mobilePlayer:"DP",timeBetweenAds:1,animation:{onTransitionOpen:!1},bfFactor:0,noaop:2,wfDynamicPause:!1,wfManual:!1,runWfWhenEmpty:!0,isMultiAd:!0,secondsToCloseFeed:20,onOutOfView:"pause",viewPercent:20,volume:"off",parentSelector:".tbl-feed-container",allowedHeightChange:75,isFitToSize:!0,category:"blankblack5",secondsToClose:200,unitTitle:"",pubId:166717,pubTagId:948607,preroll:{pubId:166717,pubTagId:948607},midroll:{pubId:166717,pubTagId:948607},postroll:{pubId:166717,pubTagId:948607},titleContainer:{titleText:"Video from our partners",BrandingText:"Brought to you by Taboola"},brandingTitleSelector:".video-label-box .branding",widgetTitleSelector:".video-label-box .video-title",customization:{adTitle:{display:"none"}},vForce:{isActive:!0},secondsBW:10,additionalCss:{"z-index":"999 !important"},kibanaEventsToSend:"all",predictors:{autoKill:{isActive:!0},getAdFail:{isActive:!0},multiAd:{adQState:"completed",isActive:!0,predictPoints:"any"},loading:{isActive:!0,predictPoints:"any"},repeat:{isActive:!0,predictPoints:"any"},playerReady:{isActive:!0,predictPoint:0},distancePercent:{isActive:!1,predictPoints:{}},distancePixels:{isActive:!1,predictPoints:{}},firstScroll:{isActive:!1,predictPoints:0}},playPriority:{type:"rpox"},components:{},player:{settings:{use_flash_player:!1,adto:12e4,vakll:24e4,altmot:12e4,forcecnvsmpg:!0,wf_dynmc_ps:!1,sprssviderr:!0,useapforcntnt:!0,mintimwf:1e4,time_between_waterfall:1,bfFactor:0,maxReadyVpaid:3,ad_loaded_method:!0,wf_manual:!1,disctxt:"Advertisement",httpsOverride:!0,global_ad_timeout:999999999,rstmrai:!0,mprdct:.015}}}),predefinedSettings:o.extend(!0,{},n.prototype.predefinedSettings,{level:{2:{player:{settings:{mprdct:.0151}}},3:{player:{settings:{mprdct:.0151,mintimwf:7e3}},noaop:1},4:{preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981},noaop:1,player:{settings:{mprdct:.0205,mintimwf:1e4}}},5:{isMultiAd:!1},6:{isMultiAd:!1,pubId:208401,pubTagId:1047981,noaop:1,player:{settings:{mprdct:.0205,mintimwf:1e4}}}}})})},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(29),h=(o(c),i(48)),p=n(h),f=i(49),g=o(f),m=i(56),v=o(m),y=i(58),b=o(y),_=i(63),w=o(_),T=i(64),S=o(T),E=i(66),P=o(E),A=i(68),I=o(A),C=i(31),k=o(C),O=i(70),x=i(91),D=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model.set("renderWasCalled",!1),i.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerStateReady"},{event:"playerState:restarted",funcName:"_onPlayerStateReady"}]),i.windowEventManager=(0,k.default)(),i.model.get("vForce.isActive")?(i.shouldReport=u.default.isFactor(i.model.get("gaFactor")),i.shouldReport&&i.model.get("isReportToKibana")&&(i.model.set("gaFactor",1),i.kibana=new x.Kibana({model:i.model})),i.adService=new x.AdsManager(i.model,i.kibana),i.seerService=new x.Seer(i.model)):i.adService=new x.NoneVForceAd(i.model),i.playerLoader=new x.PlayerLoader(i.model),i.containerView=new v.default({model:i.model}),i.isVVDetachable=i.model.get("detachToSlider.isStartFromSlider")||i.model.get("detachToSlider.isDetachToSlider"),i.isVVDetachable?i.videoView=new w.default({model:i.model,container:i.model.get("videoContainerSelector")}):i.videoView=new b.default({model:i.model,container:i.model.get("videoContainerSelector")}),i.playerService=new x.Player(i.model),i.pixelsService=new x.Pixels(i.model),i.eligibilityService=new x.Eligibility(i.model),i.model.get("isMultiAd")?i.loadingView=new I.default({model:i.model,container:i.model.get("videoViewContainer").parentElement}):i.RepeatView=new S.default({model:i.model,container:i.model.get("videoViewContainer")}),(i.model.get("detachToSlider.isStartFromSlider")||i.model.get("detachToSlider.isDetachToSlider"))&&i._addCloseButton(),i}return a(t,e),l(t,[{key:"play",value:function(e){this.model.get("renderWasCalled")||(this.containerView.render(e),"WIDGET_ITEM"===this.model.get("unitType")&&(this.brandingTitleView=new P.default({model:this.model,container:this.model.get("containerViewPlaceHolder").parentElement})),this.log.info("play was called with container: "+e),this.model.set("renderWasCalled",!0))}},{key:"_addCloseButton",value:function(){u.default.parseBool(this.model.get("closeButton.hasCloseButton"))===!0&&(this.closeButtonView=new O.CloseButtonView({model:this.model,container:this.model.get("videoViewContainer")}),this.closeButtonView.render())}},{key:"terminate",value:function(e,t){this._setTimerReason(t),e&&this.isVVDetachable?this.videoView.permanentAttach():this.model.set("closeState",p.closeState.terminate)}},{key:"pause",value:function(e){this._setTimerReason(e),this.isVVDetachable&&this.videoView.permanentAttach(),this.adService&&this.adService.pauseGetAds()}}]),t}(g.default);e.exports=D},function(e,t){"use strict";e.exports={readyState:"ready",adManagerState:{empty:"empty",hasAds:"hasAds",stopped:"stopped",paused:"paused"},adState:{failed:"failed",playing:"playing",paused:"paused",continueAd:"continueAd",completed:"completed",autoKill:"autoKill"},adQState:{impression:"impression",q0:"q0",q1:"q1",q2:"q2",q3:"q3",completed:"completed"},getAdState:{notCalled:"notCalled",gettingAd:"gettingAd",gotAd:"gotAd",waiting:"waiting",failed:"failed",stopped:"stopped",finished:"finished"},playerState:{error:"error",stopped:"stopped",closed:"closed",restarted:"restarted"},containerViewState:{rendered:"rendered",eligible:"eligible",playing:"playing"},videoViewState:{rendered:"rendered",attached:"attached",detached:"detached"},repeatState:{hiding:"hiding",showing:"showing",spinning:"spinning"},loadingViewState:{hiding:"hiding",showing:"showing",clicked:"clicked"},clickThruState:{clicked:"clicked",waiting:"waiting"},timerState:{working:"started",paused:"paused",stopped:"stopped",done:"done"},closeState:{terminate:"terminate",containerViewClosed:"containerViewClosed",videoViewClosed:"videoViewClosed",adManagerStop:"adManagerStop",playerClosed:"playerClosed"},tabState:{focus:"focus",blur:"blur",tabOut:"tabOut"}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(50),c=n(u),h=i(51),p=i(48),f=n(p),g=i(55),m=n(g),v=i(29),y=n(v),b=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e.model,i.model.set("height",d.default.getVideoHeight(i.model.get("width"))),i.log=new c.default({unitType:i.model.get("unitType"),className:i.constructor.name||"UnitController",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.containerView=void 0,i.videoView=void 0,i.adService=void 0,i.playerService=void 0,i.isClosedByUser=!1,i.createStateHandlers([{event:"closeState",funcName:"handleCloseState"}]),i.model.listenTo(i.model,"ad:stoppedByUser",i.terminate.bind(i,!0)),i._createTimers(),i}return s(t,e),a(t,[{key:"_createTimers",value:function(){if(this.model.get("isMultiAd")&&this.model.get("midrollTimeout")>0){var e={startCondition:{stateToListen:f.default.adManagerState.empty,state:"adManagerState"},stopCondition:{stateToListen:f.default.adManagerState.hasAds,state:"adManagerState"}};this.getAdTimer=new m.default(this.model,e,this.terminate.bind(this,!1,"midrollCollapse"),1e3*this.model.get("midrollTimeout"))}else if(this.model.get("isMultiAd")&&this.model.get("secondsToCloseFeed")>0){var t={startCondition:{stateToListen:f.default.adManagerState.empty,state:"adManagerState"},stopCondition:{stateToListen:f.default.adManagerState.hasAds,state:"adManagerState"}};this.getAdTimer=new m.default(this.model,t,this.pause.bind(this,"midrollCollapse"),1e3*this.model.get("secondsToCloseFeed"))}var i=this.model.get("secondsToClose");if(i>0){var n={startCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:f.default.adQState.impression,state:"adQState"}};this.secondsToCloseTimer=new m.default(this.model,n,this.terminate.bind(this,!1,"secondsToClose"),1e3*i),this.secondsToCloseTimer.start(this.model,"")}var o=this.model.get("secondsToCloseGlobal");if(o>0){var r={startCondition:{stateToListen:"",state:""}};"showReplay"===this.model.get("onTimerClose")?this.secondsToCloseGlobalTimer=new m.default(this.model,r,this.pause.bind(this,"secondsToCloseGlobal"),1e3*this.model.get("secondsToCloseGlobal")):this.secondsToCloseGlobalTimer=new m.default(this.model,r,this.terminate.bind(this,!1,"secondsToCloseGlobal"),1e3*o),this.secondsToCloseGlobalTimer.start(this.model,"")}}},{key:"terminate",value:function(e,t){this.isClosedByUser=e,this._setTimerReason(t),this.model.set("closeState",f.default.closeState.terminate)}},{key:"_setTimerReason",value:function(e){this.model.set("closeTimer",e)}},{key:"handleCloseState",value:function(e,t){switch(t){case f.default.closeState.terminate:this.containerView?this.containerView.close():this.model.set("closeState",f.default.closeState.containerViewClosed);break;case f.default.closeState.containerViewClosed:this.videoView?this.videoView.close(this.isClosedByUser):this.model.set("closeState",f.default.closeState.videoViewClosed);break;case f.default.closeState.videoViewClosed:this.adService?this.adService.close():this.model.set("closeState",f.default.closeState.adManagerStop);break;case f.default.closeState.adManagerStop:this.playerService&&(this.playerService.close(),
this._stopListening())}}},{key:"_stopListening",value:function(){this.model.off(),y.default.off()}},{key:"pause",value:function(e){this._setTimerReason(e),this.adService&&this.adService.pauseGetAds()}}]),t}(h.StateManager);e.exports=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(1),a=n(s),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.unitType,n=t.className,r=t.logger,s=void 0===r?a.default.getInstance():r,l=t.version,d=t.isDebug,u=void 0===d||d;o(this,e),this._logger=s,this.unitType=i,this.className=n,this.version=l,this.isDebug=u}return r(e,[{key:"info",value:function(e,t){this._logger.info("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"success",value:function(e,t){this._logger.success("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"important",value:function(e,t){this._logger.important("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"warning",value:function(e,t){this._logger.warning("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"pixel",value:function(e,t){this._logger.pixel("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"debug",value:function(e,t){this.isDebug&&this._logger.debug("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"error",value:function(e,t){this.isDebug&&this._logger.error("unit type: "+this.unitType+", "+("class name: "+this.className+" - "+e),t)}},{key:"ga",value:function(e){this._logger.ga(this.unitType,e,this.version)}},{key:"ul",value:function(e,t,i){this._logger.ul(e,t,i)}}]),e}();t.default=l},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(52),r=n(o),s=i(54),a=n(s);e.exports={StateManager:r.default,StateManagerView:a.default}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=(n(s),i(53)),l=function(){function e(){o(this,e)}return r(e,[{key:"createStateHandlers",value:function(e){(0,a.createStateHandlers)(this,e)}}]),e}();e.exports=l},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.createStateHandlers=void 0;var r=i(2),s=n(r);t.createStateHandlers=function(e,t){if(e.model&&s.default.isArray(t)){var i=function(e){var t=e.self,i=e.funcName,n=e.withBind,r=e.args;if(s.default.isString(i)&&s.default.isFunction(t[i]))if(n){var a;(a=t[i]).bind.apply(a,[t].concat(o(r)))()}else t[i].apply(t,o(r))},n=function(e){var t=e.self,n=e.funcName,o=e.event,r=e.withBind,s=e.listen,a=e.isListenOnce,l=o.split(":")[0],d=o.split(":")[1],u=function(){var e=t.model.get(l).toString();e==d?i({self:t,funcName:n,withBind:r,args:arguments}):a&&t.model.listenToOnce(t.model,"change:"+l,u)}.bind(t);t.model[s](t.model,"change:"+l,u)};s.default.each(t,function(t){var o=t.event,r=t.funcName,a=t.isListenOnce,l=void 0!==a&&a,d=t.withBind,u=void 0===d||d;if(s.default.isString(o)&&s.default.isString(r)){var c=l?"listenToOnce":"listenTo";o.match(":")?n({self:e,funcName:r,event:o,withBind:u,listen:c,isListenOnce:l}):e.model[c](e.model,"change:"+o,function(){i({self:e,funcName:r,withBind:u,args:arguments})}.bind(e))}}.bind(e))}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(53),c=i(29),h=n(c),p=function(e){function t(e){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return s(t,e),a(t,[{key:"renderTemplate",value:function(){if(this.template&&this.model&&(this.template=d.default.template(this.template),this.$el.append(this.template(this.model.attributes)),this.ui)){var e={};for(var t in this.ui)e[t]=this.$el.find(this.ui[t]);this.ui=e}}},{key:"createStateHandlers",value:function(e){(0,u.createStateHandlers)(this,e)}}]),t}(h.default.View);e.exports=p},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(50),l=o(a),d=i(48),u=n(d),c=function(){function e(t,i,n,o){r(this,e),this.model=t,this.log=new l.default({unitType:this.model.get("unitType"),className:"timerService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.doneFunction=n||function(){},this.time=o||0,this.conditions=i||{startCondition:{stateToListen:"",state:""},pauseCondition:{stateToListen:"",state:""},continueCondition:{stateToListen:"",state:""},stopCondition:{stateToListen:"",state:""}},this._startListeningToConditions(),this.timerState=u.readyState}return s(e,[{key:"_startListeningToConditions",value:function(){this.conditions.startCondition&&this.model.listenTo(this.model,"change:"+this.conditions.startCondition.state,this.start.bind(this)),this.conditions.pauseCondition&&this.model.listenTo(this.model,"change:"+this.conditions.pauseCondition.state,this.pause.bind(this)),this.conditions.continueCondition&&this.model.listenTo(this.model,"change:"+this.conditions.continueCondition.state,this.continue.bind(this)),this.conditions.stopCondition&&this.model.listenTo(this.model,"change:"+this.conditions.stopCondition.state,this.stop.bind(this))}},{key:"start",value:function(e,t){this.conditions.startCondition.stateToListen===t&&(this.timerState=u.timerState.working,this.stTime=(new Date).valueOf(),this.timeout=setTimeout(this.done.bind(this),this.time),this.timeLeft=this.time)}},{key:"pause",value:function(e,t){if(this.timerState===u.timerState.working&&(!t||this.conditions.pauseCondition.stateToListen===t)){this.timerState=u.timerState.paused,this._clearTimer();var i=(new Date).valueOf()-this.stTime;this.timeLeft-=i}}},{key:"continue",value:function(e,t){this.timerState===u.timerState.paused&&(!t||t&&this.conditions.continueCondition.stateToListen===t)&&(this.timerState=u.timerState.working,this.timeout=setTimeout(this.done.bind(this),this.timeLeft),this.stTime=(new Date).valueOf())}},{key:"stop",value:function(e,t,i,n){this.timeout&&(n||this.conditions.stopCondition.stateToListen===t)&&(this.timerState=u.timerState.stopped,this._clearTimer())}},{key:"done",value:function(){this.timerState=u.timerState.done,this.doneFunction(),this.timeout=void 0}},{key:"getTimerState",value:function(){return this.timerState}},{key:"_clearTimer",value:function(){clearTimeout(this.timeout),this.timeout=void 0}},{key:"isTimerActive",value:function(){return this.timerState===u.timerState.working||this.timerState===u.timerState.paused}}]),e}();e.exports=c},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(29),f=o(p),g=i(48),m=n(g),v=i(50),y=o(v),b=i(51),_=i(57),w=o(_),T="_cm-inline",S={title:"._cm-ad-title",placeholder:"._cm-inline-video"},E={FIT_TO_SIZE:0,FEED:1,WIDGET:2},P=function(e){function t(){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),l(t,[{key:"initialize",value:function(e){this.log=new y.default({unitType:this.model.get("unitType"),className:"FeedContainerView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.template=w.default,"WIDGET_ITEM"===this.model.get("unitType")&&this.$el.attr("class","_cm-widget-item"),this.model.get("isFitToSize")?(this.isFitToSize=!0,this.placeholderSizeType=E.FIT_TO_SIZE,this.$el.addClass("_cm-fit-to-size")):"WIDGET_ITEM"===this.model.get("unitType")?this.placeholderSizeType=E.WIDGET:this.placeholderSizeType=E.FEED,this.model.set("containerViewState",m.readyState)}},{key:"_bindWindowEvents",value:function(){this.isFitToSize?(this.listenTo(f.default,"window:orientation:change",this.terminate.bind(this)),this.listenTo(f.default,"window:resize:change",this.terminate.bind(this,!0))):(this.listenTo(f.default,"window:orientation:change",this._orientationChange.bind(this)),this.listenTo(f.default,"window:resize:change",this._onPlaceHolderDomChange.bind(this))),this.listenTo(f.default,"window:scroll:change",this._onPlaceHolderDomChange.bind(this,!1)),this.listenTo(f.default,"taboola:readmore:click",this._onPlaceHolderDomChange.bind(this,!0))}},{key:"render",value:function(e){this.container=e,this.$container=(0,h.default)(this.container),this.renderTemplate(),this._customize(),this.el.id="_cm-video-unit",(0,h.default)(e).append(this.el),this._onPlaceHolderDomChange(),this.model.set("containerViewPlaceHolder",this.ui.placeholder[0]),this._bindWindowEvents(),this.model.set("containerViewState",m.containerViewState.rendered)}},{key:"terminate",value:function(e,t){e&&Math.abs(t.heightChange)<this.model.get("allowedHeightChange")&&0===t.widthChange||(this.stopListening(f.default,"window:scroll:change"),this.model.set("closeState",m.closeState.terminate))}},{key:"hide",value:function(){this.$el.hide()}},{key:"close",value:function(){"WIDGET_ITEM"===this.model.get("unitType")?(this._runAnimation(!1,this.hide.bind(this)),this.model.set("closeState",m.closeState.containerViewClosed)):setTimeout(function(){this.model.set("closeState",m.closeState.containerViewClosed)}.bind(this),1500)}},{key:"_customize",value:function(){var e=this.model.get("customization.unitContainer"),t=this.model.get("customization.placeHolder"),i=this.model.get("customization.adTitle");switch(this.placeholderSizeType){case E.FIT_TO_SIZE:this._customizeFitToSize();break;case E.FEED:this._customizeFeed();break;case E.WIDGET:this._customizeWidget()}this.$el.css(u.default.toCssObj(e)),this.ui.title.css(u.default.toCssObj(i)),this.ui.placeholder.css(u.default.toCssObj(t))}},{key:"_customizeFitToSize",value:function(){this._updateBrandingStyle(),this.ui.title.css("display","none")}},{key:"_customizeWidget",value:function(){this.ui.title.css("display","none"),this.$el.height("auto")}},{key:"_customizeFeed",value:function(){this.ui.title.text(this.model.get("unitTitle"))}},{key:"_onPlaceHolderDomChange",value:function(){this._calcPlaceholderSize(),this._calcPlaceholderPosition()}},{key:"_calcPlaceholderSize",value:function(){switch(this.placeholderSizeType){case E.FIT_TO_SIZE:this._calcPlaceholderSizeFitToSize();break;case E.FEED:this._calcPlaceholderSizeFeed();break;case E.WIDGET:this._calcPlaceholderSizeWidgetItem()}}},{key:"_calcPlaceholderSizeFitToSize",value:function(){this.isAnimated||(this._runAnimation(!0,f.default.trigger.bind(f.default,"renderAnimation:completed")),this.isAnimated=!0);var e=this.$container.width(),t=this.$container.height(),i=u.default.getVideoBestSize(e,t);this.model.set("videoPlaceholderSize",i),this.ui.placeholder.css(i),this.model.set("width",i.width),this.model.set("height",i.height),this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}},{key:"_runAnimation",value:function(e,t){u.default.oneAnimationEnd(this.$el,function(){this.$el.removeClass("animated"),this.$el.removeClass("slideInTop"),this.$el.removeClass("flip"),this.$el.removeClass("slideInLeft"),this.$el.removeClass("fadeIn"),this.$el.removeClass("zoomIn"),this.$el.removeClass("slideOutTop"),this.$el.removeClass("flipOut"),this.$el.removeClass("slideOutLeft"),this.$el.removeClass("fadeOut"),this.$el.removeClass("zoomOut"),t&&t()}.bind(this));var i=this.model.get("openingEffect");e?0==i||(1==i?this.$el.addClass("slideInTop"):2==i?this.$el.addClass("flip"):3==i?this.$el.addClass("slideInLeft"):4==i?this.$el.addClass("fadeIn"):5==i&&this.$el.addClass("zoomIn")):0==i?this.hide():1==i?this.$el.addClass("slideOutTop"):2==i?this.$el.addClass("flipOut"):3==i?this.$el.addClass("slideOutLeft"):4==i?this.$el.addClass("fadeOut"):5==i&&this.$el.addClass("zoomOut"),0!=i&&this.$el.addClass("animated")}},{key:"_calcPlaceholderSizeWidgetItem",value:function(){this.ui.placeholder.height(u.default.getVideoHeight(this.ui.placeholder.width()));var e=this.ui.placeholder.width(),t=this.ui.placeholder.height();this.model.set("videoPlaceholderSize",{width:e,height:t}),this.model.set("width",e),this.model.set("height",t),this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}},{key:"_calcPlaceholderSizeFeed",value:function(){var e=this.ui.placeholder.width(),t=u.default.getVideoHeight(e);this.model.set("width",e),this.model.set("height",t),this.$el.css({height:t+this.ui.title.height(),width:e}),this.model.set("videoPlaceholderSize",{width:e,height:t}),this.model.get("videoViewState")!==m.videoViewState.detached&&this.model.trigger("change:videoPlaceholderSize",this.model,this.model.get("videoPlaceholderSize"))}},{key:"_calcPlaceholderPosition",value:function(){var e=u.default.getOffset(this.ui.placeholder,this.model.get("offsetGetterType"));this.model.set("videoPlaceholderPosition",{top:e.top,left:e.left}),this.model.trigger("change:videoPlaceholderPosition",this.model,this.model.get("videoPlaceholderPosition"))}},{key:"_orientationChange",value:function(){if(this.placeholderSizeType===E.WIDGET){var e=document.querySelector(".videoCube");this.model.set("customization.placeHolder",u.default.cssObjToString(getComputedStyle(e)));var t=e.querySelector(".thumbBlock_holder");this.model.set("customization.unitContainer",u.default.cssObjToString(getComputedStyle(t))),this._updateBrandingStyle(),this.$el.height("auto")}this._onPlaceHolderDomChange()}},{key:"_updateBrandingStyle",value:function(){if(this.container.parentElement){var e=this.container.parentElement.querySelector(".videoCube"),t=e.querySelector(this.model.get("widgetTitleSelector"));t&&this.model.set("customization.titleContainer.title",u.default.cssObjToString(getComputedStyle(t)));var i=e.querySelector(this.model.get("brandingTitleSelector"));i&&this.model.set("customization.titleContainer.branding",u.default.cssObjToString(getComputedStyle(i)))}}},{key:"className",get:function(){return T}},{key:"ui",get:function(){return this.UI?this.UI:this.UI=S},set:function(e){return this.UI=e}}]),t}(b.StateManagerView);e.exports=P},function(e,t){e.exports="<div class=_cm-ad-title></div> <div class=_cm-inline-video> </div> "},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(29),f=o(p),g=i(48),m=n(g),v=i(59),y=o(v),b=i(60),_=o(b),w=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.$el.addClass("_cm-video"),i.template=y.default,i.container=e.container||"body",i.isFirstAttach=!0,i.render(),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"_resize",withBind:!1},{event:"videoPlaceholderPosition",funcName:"_rePosition",withBind:!1},{event:"containerViewState:rendered",funcName:"attach"},{event:"loadingViewState:clicked",funcName:"_onLoadingClick"},{event:"isEligibleToPlay",funcName:"checkEligible"},{event:"isInTab",funcName:"checkEligible"},{event:"videoViewState:detached",funcName:"checkEligible"},{event:"hasReadyAd:true",funcName:"checkEligible"},{event:"adState:completed",funcName:"onAdComplete"}])}},{key:"render",value:function(){this.renderTemplate(),this._customize(),this.ui.video[0].id=this.videoAdId,this.$el.css({width:this.model.get("width")}),(0,h.default)(this.container).append(this.el),this.model.set("videoViewContainer",this.ui.video[0]),this.model.set("targetId",this.videoAdId),this.model.set("videoViewState",m.videoViewState.rendered),this._addDisclosureText()}},{key:"attach",value:function(){if(this.log.info("attaching to placeholder"),this._rePosition(this.model,this.model.get("videoPlaceholderPosition")),this._resize(this.model,this.model.get("videoPlaceholderSize")),this.isFirstAttach){u.default.oneAnimationEnd(this.$el,function(){f.default.trigger("renderAnimation:completed"),this.$el.removeClass("animated"),this.$el.removeClass("slideInTop"),this.$el.removeClass("flip"),this.$el.removeClass("slideInLeft"),this.$el.removeClass("fadeIn"),this.$el.removeClass("zoomIn"),this.model.get("animation.onTransitionClose")?this.$el.addClass("inlineSlideTop"):this.$el.removeClass("inlineSlideTop")}.bind(this));var e=this.model.get("openingEffect");0===e||(1===e?(this.$el.addClass("slideInTop"),this.$el.addClass("animated")):2===e?(this.$el.addClass("flip"),this.$el.addClass("animated")):3===e?(this.$el.addClass("slideInLeft"),this.$el.addClass("animated")):4===e?(this.$el.addClass("fadeIn"),this.$el.addClass("animated")):5===e?(this.$el.addClass("zoomIn"),this.$el.addClass("animated")):6===e&&this.model.get("animation.onTransitionOpen")&&this.$el.addClass("inlineSlideTop")),this.isFirstAttach=!1}this.model.set("videoViewState",m.videoViewState.attached)}},{key:"detach",value:function(){}},{key:"hide",value:function(){this.$el.css("height","0px")}},{key:"close",value:function(){this.hide(),_.default.prototype.close.call(this)}},{key:"_resize",value:function(e,t){t&&((this.model.get("animation.onTransitionOpen")||6===this.model.get("openingEffect"))&&this.model.get("isExpanded")&&(this.$el.addClass("none-transition"),setTimeout(function(){this.$el.removeClass("none-transition")}.bind(this),1e3)),this.ui.video.css(t),this.$el.css(t))}},{key:"onAdComplete",value:function(){this.activeAd=void 0;var e=this.model.get("unitType");return this.model.get("isMultiAd")||"WIDGET_ITEM"!==e&&"INLINE_INSTREAM"!==e?(this.isViewed=!1,void this.checkEligible()):void this.model.set("closeState",m.closeState.terminate)}},{key:"isEligibleToPlay",value:function(){return!("pause"===this.model.get("onOutOfView")&&!this.model.get("isInTab"))&&this.model.get("isEligibleToPlay")}}]),t}(_.default);e.exports=w},function(e,t){e.exports="<div class=_cm-video-ad></div>"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(50),c=n(u),h=i(48),p=n(h),f=i(51),g=i(61),m=n(g),v="_cm-css-reset",y=d.default.now().toString(),b={video:"._cm-video-ad"},_=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new c.default({unitType:i.model.get("unitType"),className:"VideoView",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.model.set("videoAdId",i.videoAdId),i._bindEvents(),i}return s(t,e),a(t,[{key:"_bindEvents",value:function(){}},{key:"hide",value:function(){this.$el.hide()}},{key:"close",value:function(){this.model.set("closeState",p.default.closeState.videoViewClosed)}},{key:"_customize",value:function(){var e=this.model.get("additionalCss");this.$el.css(d.default.toCssObj(e))}},{key:"_rePosition",value:function(e,t){this.$el.css(t)}},{key:"_onLoadingClick",value:function(){this.ui.video[0].id=this.videoAdId}},{key:"_onMouseEnter",value:function(){this.model.set("isMouseOn",!0)}},{key:"_onMouseLeave",value:function(){this.model.set("isMouseOn",!1)}},{key:"onAdComplete",value:function(){return this.activeAd=void 0,this.model.get("isMultiAd")?(this.isViewed=!1,void this.checkEligible()):void this.model.set("closeState",p.default.closeState.terminate)}},{key:"checkEligible",value:function(){this.isEligibleToPlay()?(this.activeAd||this.getReadyAd(),this.activeAd&&this.playAd()):this.activeAd&&(this.activeAd.pause(),this._clearViewabilityTime())}},{key:"isEligibleToPlay",value:function(){return this.model.get("isEligibleToPlay")}},{key:"getReadyAd",value:function(){this.model.get("hasReadyAd")&&(this.activeAd=this.model.getNextAd())}},{key:"playAd",value:function(){this.log.info("Play Ad !!!!",this.activeAd),this.activeAd.play(),this.activeAd.isUsed||(this.activeAd.isUsed=!0),this.model.get("isViewable")||this.model.get("videoViewState")===p.default.videoViewState.detached?this._startViewabilityTime():this.createStateHandlers([{event:"isViewable:true",funcName:"_startViewabilityTime"},{event:"isViewable:false",funcName:"_clearViewabilityTime"},{event:"videoViewState:detached",funcName:"_startViewabilityTime",isListenOnce:!0}])}},{key:"_startViewabilityTime",value:function(){if(!this.isViewed&&!this.viewabilityTimer){var e=this.model.get("traceViewabilitySeconds");this.viewabilityTimer=setTimeout(this._onViewability.bind(this),1e3*e)}}},{key:"_clearViewabilityTime",value:function(){clearTimeout(this.viewabilityTimer),this.viewabilityTimer=void 0}},{key:"_onViewability",value:function(){this.isViewed=!0,this.viewabilityTimer=void 0,this.activeAd.onViewability()}},{key:"_addDisclosureText",value:function(){(this.model.get("components.disclosureText.isActive")||this.model.get("detachToSlider.components.disclosureText.isActive"))&&(this.disclosureTextView=new m.default({model:this.model,container:this.el}),this.disclosureTextView.render())}},{key:"events",get:function(){return{mouseenter:"_onMouseEnter",mouseleave:"_onMouseLeave"}}},{key:"id",get:function(){return v}},{key:"videoAdId",get:function(){return y}},{key:"ui",get:function(){return this.UI?this.UI:this.UI=b},set:function(e){return this.UI=e}}]),t}(f.StateManagerView);e.exports=_},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(53),r=i(62),s=n(r),a=i(29),l=(i(2),i(43));e.exports=a.View.extend({className:"_cm-disc-text",id:"_cm-css-reset",initialize:function(e){this.log=new l({unitType:e.unitType,className:"disclosureTextView"}),this.disclosureText=s.default,this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=o.createStateHandlers},render:function(){this._rendered||(this._rendered=!0,this.container.appendChild(this.el),"detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.isActive")?this.show():this.hide():this.model.get("components.disclosureText.isActive")?this.show():this.hide())},_bindEvents:function(){(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onVideoViewStateChange:function(e,t){switch(t){case"detached":0==this.model.get("detachToSlider.components.disclosureText.isActive")?this.hide():this.show();break;case"attached":this.model.get("components.disclosureText.isActive")?this.show():this.hide()}},hide:function(){this.$el.hide()},show:function(){var e="detached"===this.model.get("videoViewState")?this.model.get("detachToSlider.components.disclosureText.text"):this.model.get("components.disclosureText.text");this.$el[0].innerHTML="",this.$el.append(this.disclosureText.replace("{text}",e)),this.$el.show()}})},function(e,t){e.exports='<div class="title text opt-out-hidden">{text}</div>'},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(48),f=n(p),g=i(59),m=o(g),v=i(60),y=o(v),b=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(i.$el.addClass("_cm-video"),i.template=m.default,i.container=e.container||"body",i.animationTimeOut=null,i.detachOptions=i.model.get("detachToSlider"),i.isDetachActive=i.model.get("detachToSlider").isStartFromSlider||i.model.get("detachToSlider").isDetachToSlider,i.isFirstDetach=!0,i.isDetached=!1,i.isFistImpression=!0,i.isGotImpression=!1,i.model.get("detachToSlider").isStartFromSlider){var n=i.model.get("width"),o=i.model.get("detachToSlider").liquidSize.isActive?i._calcLiquidWidth():i.model.get("detachToSlider").width;n>o&&(i.model.set("width",o),i.model.set("height",u.default.getVideoHeight(o)))}else i.isFirstDetach=!1;return i.render(),i.feedPlayerSize={width:i.model.get("width"),height:i.model.get("height")},i.isClosedByButton=!1,i.animationCss={transition:"all 500ms ease-in-out"},i.animationCssFirstSlide={transition:"all 1s ease"},i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"videoPlaceholderSize",funcName:"setVideoPlaceholderSize",withBind:!1},{event:"videoPlaceholderPosition",funcName:"setVideoPlaceholderPosition",withBind:!1},{event:"containerViewState:rendered",funcName:"containerViewStateRendered"},{event:"adQState:impression",funcName:"onAdImpression"},{event:"isEligibleToPlay",funcName:"isEligibleToPlayChange"},{event:"isInTab",funcName:"isInTabChange"},{event:"loadingViewState:clicked",funcName:"_onLoadingClick"},{event:"adState:completed",funcName:"onAdComplete"},{event:"videoViewState",funcName:"checkEligible"},{event:"isEligibleToPlay",funcName:"checkEligible"},{event:"hasReadyAd:true",funcName:"checkEligible"},{event:"isInTab",funcName:"checkEligible"}]),this.isDetachActive&&this.model.get("detachToSlider").liquidSize.isActive&&(0,h.default)(window).on("resize",this._onResize.bind(this))}},{key:"_onResize",value:function(){if(this.isDetached){var e=this.getDetachPositionAndSize().size;this._resize(this.model,e),this.model.trigger("change:videoViewSize",e)}}},{key:"setVideoPlaceholderSize",value:function(){this.isDetached||this._resize(arguments[0],arguments[1])}},{key:"setVideoPlaceholderPosition",value:function(){this.isDetached||this._rePosition(arguments[0],arguments[1])}},{key:"render",value:function(){this.renderTemplate(),this._customize(),this.ui.video[0].id=this.videoAdId,this.$el.css({width:this.model.get("width")}),(0,h.default)(this.container).append(this.el),this.$el.addClass("_cm-video-with-slider"),this.model.set("videoViewContainer",this.ui.video[0]),this.model.set("targetId",this.videoAdId),this.model.set("videoViewState",f.videoViewState.rendered),this._addDisclosureText()}},{key:"containerViewStateRendered",value:function(){this.model.get("detachToSlider").isStartFromSlider||this.attach()}},{key:"cleanAnimation",value:function(e){setTimeout(function(){this.$el.css({transition:""})}.bind(this),e)}},{key:"isInTabChange",value:function(){this.model.get("isInTab")&&this.model.get("videoViewState")===f.videoViewState.attached&&(this.$el.css({position:"absolute"}),this.isFirstDetach=!1),this.model.get("isInTab")&&!this.model.get("isEligibleToPlay")&&this.model.get("videoViewState")===f.videoViewState.rendered&&this.isEligibleToPlayChange()}},{key:"attach",value:function(){clearTimeout(this.animationTimeOut),this.log.info("attaching to placeholder");var e=this.$el.offset();this.cleanStyle();var t={position:"absolute",top:e.top+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px"};h.default.extend(t,this.model.get("additionalCss")),this.$el.css(t),
this.isFirstDetach=!1,this.animationTimeOut=setTimeout(this.postAttach.bind(this),100)}},{key:"postAttach",value:function(){this.model.get("detachToSlider").animation&&this.$el.css(this.animationCss),this._rePosition(this.model,this.model.get("videoPlaceholderPosition")),this._resize(this.model,this.model.get("videoPlaceholderSize")),this.model.set("videoViewState",f.videoViewState.attached),this.model.trigger("change:videoViewSize",this.model.get("videoPlaceholderSize")),this.isDetached=!1,this.cleanAnimation(500)}},{key:"detach",value:function(){if(!this.isDetached){clearTimeout(this.animationTimeOut),this.log.info("detaching to placeholder"),this.isDetached=!0,this.model.set("videoViewState",f.videoViewState.detached);var e=h.default.extend({},this.$el[0].getBoundingClientRect());e.right=window.innerWidth-e.left-e.width,e.bottom=window.innerHeight-e.bottom;var t={};this.isFirstDetach?(t={position:"fixed"},t[this.model.get("detachToSlider").position.horizontal]="-"+(this.model.get("detachToSlider").width+this.model.get("detachToSlider").position.horizontalOffset)+"px",t[this.model.get("detachToSlider").position.vertical]=this.model.get("detachToSlider").position.verticalOffset+"px",t.width=0,t.height=u.default.getVideoHeight(this.model.get("detachToSlider").width)+"px"):(this.cleanStyle(),t={position:"fixed",top:"auto",bottom:"auto",left:"auto",right:"auto",width:this.model.get("videoPlaceholderSize").width+"px",height:this.model.get("videoPlaceholderSize").height+"px"},t[this.model.get("detachToSlider").position.horizontal]=e[this.model.get("detachToSlider").position.horizontal]+"px",t[this.model.get("detachToSlider").position.vertical]=e[this.model.get("detachToSlider").position.vertical]+"px"),h.default.extend(t,this.model.get("additionalCss")),this.$el.css(t),this.animationTimeOut=setTimeout(this.postDetach.bind(this),100)}}},{key:"postDetach",value:function(){var e=500;this.$el.css({position:"fixed"}),this.model.get("detachToSlider").animation&&this.isFirstDetach===!1&&this.$el.css(this.animationCss),this.isFirstDetach===!0&&(this.isFirstDetach=!1,this.$el.css(this.animationCssFirstSlide),e=1200);var t=this.getDetachPositionAndSize();this._resize(this.model,t.size),this._rePosition(this.model,t.position),this.model.trigger("change:videoViewSize",t.size),u.default.isEmpty(this.model.get("detachToSlider").customCss)||this.$el.css(JSON.parse(this.model.get("detachToSlider").customCss)),this.cleanAnimation(e)}},{key:"cleanStyle",value:function(){this.$el.removeAttr("style")}},{key:"onAdImpression",value:function(){this.isGotImpression=!0,this.model.trigger("getAdState"),this.model.get("isEligibleToPlay")&&(this.isFirstDetach=!1),!this.model.get("isEligibleToPlay")&&this.model.get("detachToSlider").isStartFromSlider&&this.isFistImpression&&(this.isFistImpression=!1,this.model.get("isInTab")&&this.detach())}},{key:"isEligibleToPlayChange",value:function(){this.isGotImpression&&(this.model.get("isEligibleToPlay")&&this.model.get("videoViewState")===f.videoViewState.detached&&this.model.get("renderWasCalled")?this.attach():!this.model.get("isEligibleToPlay")&&(this.model.get("videoViewState")===f.videoViewState.attached||this.model.get("videoViewState")===f.videoViewState.rendered)&&this.isDetachActive&&this.model.get("detachToSlider").isDetachToSlider&&this.model.get("isInTab")&&"string"==typeof this.model.get("adState")&&this.detach())}},{key:"close",value:function(){this.permanentAttach(),y.default.prototype.close.call(this)}},{key:"permanentAttach",value:function(){this.isDetachActive=!1,this.isDetached=!1,this.$el.css(this.animationCss),this.model.set("detachToSlider.isDetachToSlider",!1),setTimeout(function(){this.$el.css({width:0})}.bind(this),0),setTimeout(function(){this.$el.css({transition:""}),this.$el.css({position:"absolute "}),this._rePosition(this.model,this.model.get("videoPlaceholderPosition")),this._resize(this.model,this.model.get("videoPlaceholderSize")),this.model.set("videoViewState",f.videoViewState.attached),this.model.trigger("checkIfShouldPlay")}.bind(this),600)}},{key:"_onStateChange",value:function(e,t){t===e.STATE.STOPPED_BY_USER&&this.close()}},{key:"_calcLiquidWidth",value:function(){var e=this.model.get("detachToSlider").liquidSize.minWidth,t=window.innerWidth*(this.model.get("detachToSlider").liquidSize.widthPercent/100);return t<e&&(t=e),t}},{key:"getDetachPositionAndSize",value:function(e){var t=Math.floor(this.model.get("detachToSlider").liquidSize.isActive?this._calcLiquidWidth():this.model.get("detachToSlider").width),i=u.default.getVideoHeight(t),n={position:{top:"auto",bottom:"auto",left:"auto",right:"auto"},size:{width:t,height:i}};return n.position[this.model.get("detachToSlider").position.horizontal]=this.model.get("detachToSlider").position.horizontalOffset+"px",n.position[this.model.get("detachToSlider").position.vertical]=this.model.get("detachToSlider").position.verticalOffset+"px",n}},{key:"_resize",value:function(e,t){this.$el.css(t)}},{key:"onAdComplete",value:function(){return this.activeAd=void 0,this.model.get("isMultiAd")?(this.isViewed=!1,void this.checkEligible()):void this.permanentAttach()}},{key:"isEligibleToPlay",value:function(){return this.model.get("isInTab")?!!this.model.get("isEligibleToPlay")||this.model.get("videoViewState")===f.videoViewState.detached:this.model.get("videoViewState")===f.videoViewState.detached&&"play"===this.model.get("detachToSlider").onOutOfView}}]),t}(y.default);e.exports=b},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var r=i(29),s=o(r),a=i(50),l=o(a),d=i(6),u=o(d),c=i(2),h=o(c),p=i(48),f=n(p);i(65);e.exports=s.default.View.extend({className:"_cm-repeat",id:"_cm-css-reset",events:{"click ._cm-repeat-div":"_onClick","click ._cm-repeat-image":"_onClick"},initialize:function(e){this.log=new l.default({unitType:"Component",className:"RepeatView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.active=!1,this._createStatesAction(),this._bindEvents(),this.render()},render:function(){var e=new Image;e.className="_cm-repeat-image",e.src=this.model.get("components.Repeat.imageLocation"),this.$el.append(e),this.repeatEl=(0,u.default)(e),this.$el.hide(),this.container.appendChild(this.el)},hide:function(){this.repeatEl.removeClass("_cm-spin"),this.$el.hide(),this.active=!1,this.isSpinning=!1,this.model.set("repeatState",f.repeatState.hiding)},show:function(){this.$el.show(),this.active=!0,this.model.set("repeatState",f.repeatState.showing)},showSpinner:function(){this.repeatEl.addClass("_cm-spin"),this.isSpinning=!0},_bindEvents:function(){this.listenTo(this.model,"change:adState",this._onAdStateChange)},_onClick:function(e){e.stopPropagation(),this.isSpinning||this.model.getPixel&&h.default.firePixel(this.model.getPixel("pixels.repeatClick"),"repeat click Pixel"),this.showSpinner(),this.model.set("repeatState",f.repeatState.spinning),this.trigger("cm:repeat:click")},_createStatesAction:function(){this.adStateActions={playing:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this)}},_onAdStateChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){this.show()}})},function(e,t){e.exports="<div id=_cm-css-reset class=_cm-repeat-div> <div class=_cm-repeat-icon></div> </div>"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(29),r=n(o),s=i(50),a=n(s),l=i(6),d=n(l),u=i(2),c=n(u),h=i(67);e.exports=r.default.View.extend({className:"_cm-branding-title",id:"_cm-css-reset",events:{},initialize:function(e){this.log=new a.default({unitType:"Component",className:"BrandingTitleView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.render(),this.bindEvents()},bindEvents:function(){this.model.listenTo(this.model,"change:customization.titleContainer.branding",this._customize.bind(this))},render:function(){this.template=c.default.template(h),this.$el.append(this.template(this.model.attributes)),this._customize(),this.container.appendChild(this.el),this.model.get("isFitToSize")&&this._fitToSize()},_customize:function(){var e=this.model.get("customization.titleContainer.title"),t=this.model.get("customization.titleContainer.branding");e&&(e=c.default.toCssObj(e),e.height="auto",this.$el.find("._cm-branding-view-title-text").css(e)),t&&(t=c.default.toCssObj(t),t.height="auto",this.$el.find("._cm-branding-view-branding-text").css(t))},_fitToSize:function(){var e=(0,d.default)(this.container),t=e.height(),i=this.model.get("videoPlaceholderSize");t&&i&&(Number(i.height)+this.$el.height()>=t?Number(i.height)+this.$el.find("._cm-branding-view-title-text").height()<t?this.$el.find("._cm-branding-view-branding-text").hide():this.$el.hide():this.$el.show())}})},function(e,t){e.exports="<span class=_cm-branding-view-title-text>{{titleContainer.titleText}}</span> <span class=_cm-branding-view-branding-text>{{titleContainer.BrandingText}}</span>"},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}var r=i(29),s=o(r),a=i(50),l=o(a),d=i(6),u=o(d),c=i(69),h=o(c),p=i(65),f=o(p),g=i(48),m=n(g);e.exports=s.default.View.extend({className:"_cm-loading",id:"_cm-css-reset",initialize:function(e){this.log=new l.default({unitType:"Component",className:"LoadingView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),e.globalModel&&(this.globalModel=e.globalModel),this.container=e.container,this._createStatesAction(),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:adQState",this._onAdStateChange.bind(this,this.adStateActions)),this.listenTo(this.model,"change:getAdState",this._onAdStateChange.bind(this,this.getAdStateActions)),this.globalModel&&this.listenTo(this.globalModel,"change:getAdState",this._onGlobalModelAdStateChange.bind(this,this.getAdStateActions))},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this)},this.getAdStateActions={stopped:this._stop.bind(this)}},_onGlobalModelAdStateChange:function(e,t,i){if(i==m.adManagerState.stopped){var n=e[i];n&&n()}},_onAdStateChange:function(e,t,i){var n=e[i];n&&n()},render:function(){this.$el.append(h.default),this.loadingDiv=this.$el.find("._cm-loading-div"),"css"==this.model.get("components.Loading.type")?this.loadCss():"img"==this.model.get("components.Loading.type")&&this.loadImage(),this._applyAdditionalCss(),this.$el.hide(),this.container.appendChild(this.el),this.repeatEl=(0,u.default)(f.default),this.repeatEl.hide();var e=new Image;e.className="_cm-repeat-image",e.src=this.model.get("components.Repeat.imageLocation"),this.repeatEl=(0,u.default)(e),this.repeatEl.hide(),this.loadingDiv.append(this.repeatEl),this.currentActiveImage=this.innerDisplay},loadCss:function(){var e=document.createElement("div");e.className="_cm-loading-icon",this.loadingDiv.append(e),this.innerDisplay=(0,u.default)(e)},loadImage:function(){var e=document.createElement("img");e.src=this.model.get("components.Loading.imgUrl"),e.className="_cm_loader_img",this.loadingDiv.append(e),this.innerDisplay=(0,u.default)(e)},hide:function(){this.$el.hide(),this._setModel("loadingViewState",m.loadingViewState.hiding)},show:function(){this.$el.show(),this.loadingDiv.css({width:this.currentActiveImage.width(),height:this.currentActiveImage.height()}),this._setModel("loadingViewState",m.loadingViewState.showing)},showRepeat:function(){this._stop()},_onClick:function(e){this.log.info("User click"),this._setModel("loadingViewState",m.loadingViewState.clicked),this.innerDisplay.show(),this.repeatEl.hide(),this.currentActiveImage=this.innerDisplay},_onAdPlaying:function(){this.hide()},_onVideoComplete:function(){this.show()},_stop:function(){this.loadingDiv.one("click",this._onClick.bind(this)),this.show(),this.innerDisplay.hide(),this.repeatEl.show(),this.currentActiveImage=this.repeatEl},_setModel:function(e,t){this.globalModel&&this.globalModel.set(e,t),this.model.set(e,t)},_applyAdditionalCss:function(){var e=this.model.get("additionalCss");if(e){var t=e["z-index"]||e.zIndex;t&&this.$el.css({"z-index":e["z-index"]})}}})},function(e,t){e.exports="<div class=_cm-loading-div> </div>"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DisclosureTextView=t.BrandingTitleView=t.TimerView=t.RepeatView=t.PlayListView=t.OptOutView=t.LoadingView=t.DetachButtonView=t.D2DFallbackView=t.CloseButtonView=t.SubFeedCloseButtonView=t.ClickThroughView=t.BrandLogoView=t.PosterView=void 0;var o=i(71),r=n(o),s=i(72),a=n(s),l=i(74),d=n(l),u=i(75),c=n(u),h=i(77),p=n(h),f=i(78),g=n(f),m=i(80),v=n(m),y=i(68),b=n(y),_=i(81),w=n(_),T=i(83),S=n(T),E=i(64),P=n(E),A=i(89),I=n(A),C=i(66),k=n(C),O=i(61),x=n(O);t.PosterView=r.default,t.BrandLogoView=a.default,t.ClickThroughView=d.default,t.SubFeedCloseButtonView=p.default,t.CloseButtonView=c.default,t.D2DFallbackView=g.default,t.DetachButtonView=v.default,t.LoadingView=b.default,t.OptOutView=w.default,t.PlayListView=S.default,t.RepeatView=P.default,t.TimerView=I.default,t.BrandingTitleView=k.default,t.DisclosureTextView=x.default},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(29),r=n(o),s=i(50),a=n(s),l=i(6);n(l);e.exports=r.default.View.extend({className:"_cm-poster",id:"_cm-css-reset",initialize:function(e){this.log=new a.default({unitType:"Component",className:"PosterView",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.render()},render:function(){this.staticBanner=document.createElement("img"),this.staticBanner.addEventListener("error",this._onError.bind(this));var e=this.model.get("components.PosterView.imageLocation");this.staticBanner.src=e,this.staticBanner.height=this.model.get("height"),this.staticBanner.width=this.model.get("width"),this.staticBanner.onclick=this._onClick.bind(this),this.$el.hide(),this.$el.append(this.staticBanner),this.container.prepend(this.$el)},_onError:function(){r.default.trigger("error",this.staticBanner,"imageLoadError"),this.$el.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()},_onClick:function(e){this.trigger("cm:banner:click")}})},function(e,t,i){"use strict";var n=i(29),o=i(2),r=i(43),s=i(73);e.exports=n.View.extend({className:"_cm-brand-logo",events:{"click ":"_onClick"},initialize:function(e){this.log=new r({unitType:e.unitType,className:"branLogoView"}),this.container=e.container,this.options=this.model.get("components.BrandLogo")||{},this.options.imageSrc=this.model.get("components.BrandLogo.imageSrc"),this.openUrl=this._getOpenUrl(),this.render()},render:function(){this.template=o.template(s),this.$el.append(this.template(this.options)),this.options.style&&this.$el.css(this.options.style),this.options.imageStyle&&this.$el.find("a>img").css(this.options.imageStyle),this.container.appendChild(this.el)},_onClick:function(){window.open(this.openUrl,"_blank")},_getOpenUrl:function(){var e=this.model.get("clickUrl"),t=this.options.logoLander,i=this.options.fallBackClickUrl,n="",o=this._getClickUrlQueryStrings(t);return n=e&&e.length>0&&e.indexOf("_#")===-1?decodeURIComponent(e)+encodeURIComponent(i)+o:i+o},_getClickUrlQueryStrings:function(e){var t="?ttype=1&cipid="+this.model.get("cipid")+"&ttype=1&crid="+this.model.get("creativeId")+"&dast="+this.model.get("dast")+"&tgtf="+encodeURIComponent(e);return t}})},function(e,t){e.exports="<a href=javascript:void(0);> <img src={{imageSrc}}> </a>"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(29),r=n(o),s=i(50),a=n(s);e.exports=r.default.View.extend({className:"_cm-click-through",initialize:function(e){this.log=new a.default({unitType:"Component",className:"ClickThrough",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.container=e.container,this.link=e.link,this.render()},render:function(){this.$el.click(this.onClick.bind(this)),this.container.appendChild(this.el)},onClick:function(){this.link&&window.open(this.link,"_blank")},hide:function(){this.$el.hide()},show:function(){this.$el.show()},updateLink:function(e){this.link=e}})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(53),r=i(76),s=n(r),a=i(29),l=i(2),d=i(43);i(48);e.exports=a.View.extend({className:"_cm-close-area",id:"_cm-close-area",events:{"click ":"_onClick"},initialize:function(e){this.log=new d({unitType:e.unitType,className:"closeButtonView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=o.createStateHandlers},render:function(){this._rendered||(this._rendered=!0,this.$el.append(s.default),this.container.appendChild(this.el),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&("detached"===this.model.get("videoViewState")?this.show():this.hide()))},_bindEvents:function(){this.listenTo(this.model,"change:state",this._onStateChange),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onPlaying:function(){var e=this.model.get("components.CloseButtonView.delay");setTimeout(this.render.bind(this),e)},_onClick:function(){this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||l.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("state",this.model.STATE.STOPPED_BY_USER),a.trigger("Ad:stoppedByUser"),this.model.trigger("ad:stoppedByUser")},_onStateChange:function(e,t){switch(t){case e.STATE.PLAYING:this._onPlaying()}},_onVideoViewStateChange:function(e,t){switch(t){case"detached":this.show();break;case"attached":this.hide()}},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})},function(e,t){e.exports="<div class=_cm-close></div>"},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(53),r=i(76),s=n(r),a=i(29),l=i(2),d=i(43),u=i(48);e.exports=a.View.extend({className:"_cm-close-area",id:"_cm-close-area",closeButtonRenderd:!1,events:{"click ":"_onClick"},initialize:function(e){this.log=new d({unitType:e.unitType,className:"closeButtonView"}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=o.createStateHandlers},render:function(){this._rendered||(this._rendered=!0,this.isInDelay=!1,this.$el.append(s.default),this.container.appendChild(this.el))},_bindEvents:function(){this.listenTo(this.model,"change:state",this._onStateChange),this.listenTo(this.model,"change:adState",this._onStateChange),(this.model.get("detachToSlider.isStartFromSlider")||this.model.get("detachToSlider.isDetachToSlider"))&&this.model.get("detachToSlider.hasCloseButton")&&this.listenTo(this.model,"change:videoViewState",this._onVideoViewStateChange)},_onPlaying:function(){return this.model.get("videoViewState")!==u.videoViewState.attached||this.model.get("hasCloseButton")?void this._startRender():void((this.isInDelay=!0)&&(this.closeButtonRenderd=!1,clearTimeout(this.delayTimeout)))},_startRender:function(){if(!this.closeButtonRenderd){this.closeButtonRenderd=!0;var e=this.model.get("components.CloseButtonView.delay");this.isInDelay=!0,this.delayTimeout=setTimeout(this.render.bind(this),e)}},_onClick:function(){this.model.get("onClose")||"OMNI_TAG"==this.model.get("unitType")||l.firePixel(this.model.getPixel("pixels.close"),"close (user clicked the close button)"),this.model.set("state",this.model.STATE.STOPPED_BY_USER),a.trigger("Ad:stoppedByUser"),this.model.trigger("ad:stoppedByUser")},_onStateChange:function(e,t){switch(t){case"playing":this._onPlaying()}},_onVideoViewStateChange:function(e,t){"detached"===t&&!this.closeButtonRenderd&&this.model.get("detachToSlider.hasCloseButton")&&this._startRender(),"attached"!==t||this.model.get("hasCloseButton")||this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}})},function(e,t,i){"use strict";var n=i(29),o=i(6),r=i(2),s=i(43),a=i(79);e.exports=n.View.extend({className:"_cm-d2d-fallback",initialize:function(e){this.log=new s({unitType:e.unitType,className:"D2dFallbackView"}),this.model=e.model,this.container=e.container,this.pubId=e.pubId?e.pubId:this.model.get("components.D2DFallbackView.pubId"),this.pubTagId=e.pubTagId?e.pubTagId:this.model.get("components.D2DFallbackView.pubTagId"),this.render()},render:function(){this.$el.append(a),o(this.container).append(this.$el),this.iframe=this.$el.find("iframe")[0],this.iframe.contentWindow?this._writeIframe():this.iframe.onload=this._writeIframe.bind(this),r.firePixel(this.model.getPixel("pixels.D2DFallback"),"D2DFallback")},_writeIframe:function(){this.iframe.onload=void 0;var e=this.iframe.contentWindow.document;e.open(),e.write('<script type="text/javascript" src="'+this.buildFallbackURL()+'"></script>'),e.close()},buildFallbackURL:function(){var e=this.model.get("components.D2DFallbackView.location")+"?oid=15&width="+this.model.get("components.D2DFallbackView.width")+("&height="+this.model.get("components.D2DFallbackView.height"))+("&pubid="+this.pubId)+("&tagid="+this.pubTagId)+("&pstn="+this.model.get("components.D2DFallbackView.pstn"))+("&cirf="+this.model.get("referrer"))+"&noaop=1&revmod=INSERT_CONTENT_TYPE&encoded=1&cb=INSERT_CACHEBUSTER&keywords=INSERT_COMMA_SEPARATED_KEYWORDS&urlonly=1&callback=document.write";return e},hide:function(e){e?this.$el.css({display:"none"}):this.$el.css({display:"block"})}})},function(e,t){e.exports="<iframe style=width:100%;height:100% frameborder=0 border=0 padding=0 scrolling=no marginwidth=0 marginheight=0></iframe>"},function(e,t,i){"use strict";var n=i(29),o=(i(2),i(43));e.exports=n.View.extend({className:"_cm-detach",events:{"click ":"_onClick"},initialize:function(e){this.log=new o({unitType:e.unitType,className:"detachButtonView"}),this.container=e.container,this._rendered=!1},render:function(){if(!this._rendered){var e=this.model.get("components.DetachButtonView.imageLocation");this.$el.css("background-image",'url("'+e+'") !important'),this.container.appendChild(this.el)}},_onClick:function(){this.$el.trigger("cm:detach:click")},hide:function(){this.$el.hide()}})},function(e,t,i){"use strict";var n=i(29),o=i(2),r=i(6),s=i(43),a=i(48),l=i(82);e.exports=n.View.extend({events:{"click ._cm-opt-button":"toggleDialog","click ._cm-cancel":"hideDialog","click ._cm-submit":"submitDialog"},id:"_cm-opt-out-view",className:"_cm-opt-out-view",initialize:function(e){this.log=new s({unitType:e.unitType,className:"optOut"}),this.container=e.container,this.render()},render:function(){this.$el.append(l),r(this.container).prepend(this.$el),this.ui={},this.ui.Dialog=this.$el.find("._cm-opt-dialog"),this.hideDialog()},toggleDialog:function(){"none"===this.ui.Dialog.get(0).style.display?this.showDialog():this.hideDialog()},showDialog:function(){this.$el.trigger("cm:optout:dialog:show"),this.ui.Dialog.show()},hideDialog:function(){this.$el.trigger("cm:optout:dialog:hide"),this.ui.Dialog.hide()},submitDialog:function(){var e=this.el.querySelector("._cm-opt-text").value,t=this.model.getPixel("pixels.optOutNever")+"&userComplaint="+e;o.firePixel(t,"Never OptOut"),this.hideDialog(),this.model.set("state",this.model.STATE.OPT_OUT),this.model.set("closeState",a.closeState.terminate),this.$el.trigger("cm:optout:submit")},hide:function(){this.$el.hide()}})},function(e,t){e.exports='<div class=_cm-opt-out> <div class=_cm-opt-button></div> <div class=_cm-opt-dialog> <div id="" class=_cm-opt-message> Never show me Video ads </div> <textarea class=_cm-opt-text placeholder="What was the problem with this ad?"></textarea> <div> <button type=button class=_cm-cancel>Cancel</button> <button type=button class=_cm-submit>Send</button> </div> </div> </div>'},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var o=i(6),r=n(o),s=i(2),a=(n(s),i(29)),l=n(a),d=i(84),u=n(d),c=i(50),h=n(c),p=i(86),f=n(p),g=i(87),m=(n(g),i(88)),v=n(m);e.exports=l.default.View.extend({errorCount:0,className:"_cm-playlist",initialize:function(e){this.log=new h.default({unitType:"playlist",className:"PlayListView"}),this.playListCollection=new f.default,this.container=e.container,this._playlist=e.playlist,this._height=e.height||350,this._itemCount=parseInt(this._height/74),this._itemCount=Math.min(this._playlist.length,this._itemCount),this._playlist=this._playlist.slice(0,this._itemCount),this._height=Math.min(this._height,74*this._itemCount),this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(l.default,"change:player:content",this._onContentChanged),this.listenTo(this.model,"change:state",this._onStateChange),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},render:function(){this.$el.append(v.default),(0,r.default)(this.container).append(this.$el),this._playlist_list=this.$el.find("._cm-playlist-list"),this.$el.css({height:parseInt(this._height)})},_setPlayList:function(){this.playListCollection.length>0||(this.playListCollection.add(this._playlist),this.playListCollection.forEach(function(e){new u.default({model:e,container:this._playlist_list})},this),this.playListCollection.first().set("active",!0))},_onStateChange:function(e,t){switch(t){case e.STATE.PLAYER_READY:this._setPlayList()}},_itemSelected:function(e){e.set("clicked",!1),this._playItem(e),this.listenToOnce(this.playListCollection,"change:clicked",this._itemSelected)},_playItem:function(e){if(!this._playlist_list.hasClass("unclickable")){var t=this.playListCollection.findWhere({active:!0});t&&t.set("active",!1),e.set("active",!0),this.$el.trigger("_cm-unit-play",e.attributes)}},_onContentChanged:function(e){this.log.important("On content changed",e);var t=this.playListCollection.findWhere({active:!0});t&&t.set("active",!1),t=this.playListCollection.findWhere({id:e.id}),t&&t.set("active",!0)},playNext:function(){var e=this.playListCollection.findWhere({active:!0}),t=this.playListCollection.indexOf(e)+1;t>=this._itemCount&&(t=0),this._playItem(this.playListCollection.at(t))},setUnclickable:function(e){e?this._playlist_list.addClass("unclickable"):this._playlist_list.removeClass("unclickable")}})},function(e,t,i){"use strict";var n=i(29),o=i(2),r=i(6),s=i(43),a=i(85);e.exports=n.View.extend({errorCount:0,events:{"click ._cm-playlist-item":"_onItemClick"},initialize:function(e){this.log=new s({unitType:"playlist-item",className:"PlayListView"}),this.model=e.model,this.container=e.container,this._bindEvents(),this.render()},_bindEvents:function(){this.listenTo(this.model,"change:active",this.setActive)},render:function(){var e={image:this.model.get("image"),title:this.model.get("title")},t=o.template(a)(e);this.$el.append(t),r(this.container).append(this.$el),this._item=this.$el.find("._cm-playlist-item")},_onItemClick:function(e){this.model.set("clicked",!0)},setActive:function(e,t){t?this._item.addClass("active"):this._item.removeClass("active")}})},function(e,t){e.exports="<li class=_cm-playlist-item> <img class=_cm-playlist-img src={{image}}> <span class=_cm-playlist-text>{{title}}</span> </li>"},function(e,t,i){"use strict";var n=i(29),o=i(87);e.exports=n.Collection.extend({model:o})},function(e,t,i){"use strict";var n=i(29);e.exports=n.DeepModel.extend({defaults:{id:0,filename:"",image:"",title:"",vidlength:"",active:!1,clicked:!1}})},function(e,t){e.exports="<ul class=_cm-playlist-list> </ul>"},function(e,t,i){"use strict";var n=i(29),o=(i(2),i(6),i(43)),r=i(90);e.exports=n.View.extend({className:"_cm-timer",initialize:function(e){this.log=new o({unitType:e.unitType,className:"timerView"}),this.container=e.container,this._time=Number(e.time)||Number(this.model.get("components.TimerView.time")),this._isHide=e.isHide,this._stepTime=1,this.render()},render:function(){this.$el.append(r),this.hide(),this.container.appendChild(this.el),this.$el.find("._cm-timer-circle ._cm-timer-mask, ._cm-timer-circle ._cm-timer-fill").css("transition","transform "+this._stepTime+"s linear"),this._innerText=this.$el.find("._cm-timer-inset>span")},startTimer:function(){return this.log.info("Timer start"),0===this._time?void this._finish():(this._currentTimer=this._stepTime,this._innerText.text(parseInt(this._time)),this._setDegree(180/this._time*this._currentTimer),void window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime))},_timerUpdate:function(){if(this._innerText.text(parseInt(this._time-this._currentTimer)),this._currentTimer+=this._stepTime,this._currentTimer>this._time)return void this._finish();var e=180/this._time,t=e*this._currentTimer;this._setDegree(t),window.setTimeout(this._timerUpdate.bind(this),1e3*this._stepTime)},_setDegree:function(e){this.$el.find("._cm-timer-circle ._cm-timer-fill, ._cm-timer-circle ._cm-timer-mask._cm-timer-full").css("transform","rotate("+e+"deg)"),this.$el.find("._cm-timer-circle ._cm-timer-fill._cm-timer-fix").css("transform","rotate("+2*e+"deg)")},_finish:function(){this._isHide&&this.hide(),this.$el.trigger("cm:timer:finish")},hide:function(){this.$el.hide()}})},function(e,t){e.exports='<div class=_cm-timer-circle> <div class="_cm-timer-mask _cm-timer-full"> <div class=_cm-timer-fill></div> </div> <div class="_cm-timer-mask _cm-timer-half"> <div class=_cm-timer-fill></div> <div class="_cm-timer-fill _cm-timer-fix"></div> </div> </div> <div class=_cm-timer-inset> <span></span> </div>'},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.TabStatus=t.PlayerSubUnit=t.CardLocator=t.AdsManager=t.PlayerLoader=t.NoneVForceAd=t.FeedEligibility=t.SubFeedEligibility=t.Eligibility=t.Player=t.Pixels=t.Kibana=t.Timer=t.Seer=t.Ad=void 0;var o=i(92),r=n(o),s=i(95),a=n(s),l=i(55),d=n(l),u=i(108),c=n(u),h=i(109),p=n(h),f=i(110),g=n(f),m=i(111),v=n(m),y=i(112),b=n(y),_=i(114),w=n(_),T=i(115),S=n(T),E=i(116),P=n(E),A=i(117),I=n(A),C=i(118),k=n(C),O=i(119),x=n(O),D=i(121),M=n(D);t.Ad=r.default,t.Seer=a.default,t.Timer=d.default,t.Kibana=c.default,t.Pixels=p.default,t.Player=g.default,t.Eligibility=b.default,t.SubFeedEligibility=w.default,t.FeedEligibility=S.default,t.NoneVForceAd=P.default,t.PlayerLoader=I.default,t.AdsManager=k.default,t.CardLocator=x.default,t.PlayerSubUnit=v.default,t.TabStatus=M.default},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(29),f=(o(p),i(51)),g=i(50),m=o(g),v=i(48),y=n(v),b=i(34),_=o(b),w=i(93),T=o(w),S=function(e){function t(e){var i=e.model,n=e.ppKey,o=e.adId,a=e.impressionCb,l=e.completeCb,d=e.kibana,u=e.predictName;r(this,t);var c=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i));
return c.model=i,c.kibana=d,c.getAdKey=isNaN(parseInt(n))?n:parseInt(n),c.adId=o,c.impressionCb=a,c.completeCb=l,c.predictName=u,c.log=new m.default({unitType:c.model.get("unitType"),className:"adService",version:c.model.get("version"),isDebug:c.model.get("isDebug")}),c.adState=y.readyState,c.getAdState=y.getAdState.notCalled,c.adQState=y.adQState.readyState,c.hadPlay=!1,c.isActive=!1,c.hadImpression=!1,c.sizeObj={},c._bindEvents(),c._onPlayerStateReady(),c._getAd(),c}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adManagerState:paused",funcName:"_pauseGetAd",isListenOnce:!0},{event:"adManagerState:stopped",funcName:"_stopGetAd",isListenOnce:!0},{event:"playerState:ready",funcName:"_onPlayerStateReady",isListenOnce:!0},{event:"adViewabilityFired:true",funcName:"adViewabilityFired",isListenOnce:!0},{event:"adConversionFired:true",funcName:"adConversionFired",isListenOnce:!0}])}},{key:"_onPlayerStateReady",value:function(){!this.player&&_.default.player&&(this.player=_.default.player)}},{key:"_pauseGetAd",value:function(){this.cancelGetAd(),this.getAdState=y.getAdState.stopped,this.setToModel("getAdState",y.getAdState.stopped),this.player=void 0}},{key:"_stopGetAd",value:function(){this.cancelGetAd(),this.getAdState=y.getAdState.finished,this.player=void 0}},{key:"adViewabilityFired",value:function(){this._hasVpaidWrapper()&&this.vpaidWrapper.emit&&this.vpaidWrapper.emit("unit::viewability"),this.isViewabilityFired=!0}},{key:"adConversionFired",value:function(){this._hasVpaidWrapper()&&this.vpaidWrapper.emit&&this.vpaidWrapper.emit("unit::conversion")}},{key:"_getAd",value:function(){return this._hasPlayer()&&this.player.getAd?this.getAdState===y.getAdState.gettingAd?void this.log.info("[adID=${trimmedBranch}]getAd was called while trying to get an ad from player",this.adId):(this.log.info("GetAd was called, requiredViewability: "+this.getAdKey),this.setToModel("lastGetAdKey",this.getAdKey),this.model.get("getAdState")===y.getAdState.gettingAd?this.model.trigger("change:getAdState",this.model,this.model.get("getAdState")):this.setToModel("getAdState",y.getAdState.gettingAd),this.getAdState=y.getAdState.gettingAd,"any"===this.getAdKey?this.getAdResult=this.player.getAd():this.getAdResult=this.player.getAd({requiredViewability:this.getAdKey}),void(this.getAdResult?this.getAdResult.then(this._getAdResult.bind(this)).catch(this._getAdCatch.bind(this)):this.log.error("getAd Failed in auction  manager"))):(this.setToModel("getAdCurrId",this.adId),void setTimeout(this.setToModel.bind(this,"getAdState",y.getAdState.failed),0))}},{key:"_getAdResult",value:function(e){this.vpaidWrapper=e,this.rpox=e.tag.rpox,this.adData=u.default.stripObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon","requiredViewability","rpox"]),this.adData.requiredViewability=u.default.parseBool(this.adData.requiredViewability),this.vpaidWrapper.vpaidLog.data.unit_history=[],this.reportToVpaid("gotAd",{tab:this.model.get("isInTab"),eligibility:this.model.get("isEligibleToPlay"),gotVimpCountQ:this.model.get("impressionCount"),hadEligibility:this.model.get("hadEligibility"),hadLostEligibility:!!this.model.get("lostEligibilityTime"),predictName:this.predictName,getAdKey:"any"===this.getAdKey?10:this.getAdKey},!1),this.setToModel("lastGotAdData",this.adData),this.model.get("lastImpressionData.sequenceId")?this.sequenceId=this.model.get("lastImpressionData.sequenceId")+1:this.sequenceId=1;var t=void 0;return this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.data&&(t=this.vpaidWrapper.vpaidLog.data._id),this.lastImpressionData={predictPoint:this.predictPoint,requiredViewability:this.vpaidWrapper.tag.requiredViewability,getAdKey:"any"===this.getAdKey?10:this.getAdKey,sequenceId:this.sequenceId,dp:this.vpaidWrapper.tag.dp,tagData:u.default.stripObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]),vpaidId:t,predictName:this.predictName},this.setToModel("lastImpressionData",this.lastImpressionData),this.kibana&&this.kibana.gotAd(this.lastImpressionData),this.setToModel("impressionCount",this.model.get("impressionCount")+1),this.oppsService=new T.default({model:this.model,adData:this.adData,reportFunc:this.reportToVpaid.bind(this)}),this.log.info("GotAd requiredViewability: "+(e.tag.requiredViewability?1:0)),this.getAdState=y.getAdState.gotAd,this.setToModel("getAdState",y.getAdState.gotAd),this.getAdResult=void 0,this._registerListeners(),this._onAdImpression(e),null}},{key:"_getAdCatch",value:function(e){this.hadImpression||(this.getAdResult=void 0,this.log.info("GetAd failed requiredViewability: "+this.getAdKey,this.adId),this.getAdState=y.getAdState.failed,this.setToModel("getAdCurrId",this.adId),this.setToModel("getAdState",y.getAdState.failed))}},{key:"_registerListeners",value:function(){this.vpaidWrapper.on&&(this.vpaidWrapper.on("AdError",this._onAdError.bind(this)),this.vpaidWrapper.on("AdVideoFirstQuartile",this._onAdVideoFirstQuartile.bind(this)),this.vpaidWrapper.on("AdVideoMidpoint",this._onAdVideoMidpoint.bind(this)),this.vpaidWrapper.on("AdVideoThirdQuartile",this._onAdVideoThirdQuartile.bind(this)),this.vpaidWrapper.on("end",this._adVideoEnd.bind(this)),this.vpaidWrapper.on("AdClickThru",this._onAdClickThru.bind(this)))}},{key:"_onAdImpression",value:function(e){this.vpaidWrapper.pauseAd(),this.kibana&&this.kibana._adPaused(this.getAdData(),"pauseOnAdImpression"),this.reportToVpaid("pauseAdCalled",{reason:"pauseOnAdImpression",tab:this.model.get("isInTab")},!1),this._bringToBack(),this.log.info("onAdImpression (got ad - pausing ad)",this.adId),this.hadImpression=!0,this.rpox=e.tag.rpox,this.adQState=y.adQState.impression,this.model.get("adQState")===y.adQState.impression?setTimeout(this.model.trigger.bind(this.model,"change:adQState",this.adQState),0):setTimeout(this.setToModel.bind(this,"adQState",this.adQState),0),this.impressionCb(this)}},{key:"_onAdError",value:function(e){this.log.error("Vpaid Wrapper Error, key: "+this.getAdKey,this.adId)}},{key:"_onAdVideoFirstQuartile",value:function(){this.hadPlay&&(this.adQState=y.adQState.q1,this.setToModel("adQState",y.adQState.q1,this.adId),this.log.info("AdVideoFirstQuartile"))}},{key:"_onAdVideoMidpoint",value:function(){this.hadPlay&&(this.adQState=y.adQState.q2,this.setToModel("adQState",y.adQState.q2,this.adId),this.log.info("AdVideoMidpoint"))}},{key:"_onAdVideoThirdQuartile",value:function(){this.hadPlay&&(this.adQState=y.adQState.q3,this.setToModel("adQState",y.adQState.q3,this.adId),this.log.info("AdVideoThirdQuartile"))}},{key:"_adVideoEnd",value:function(){if(this.player){if(this.log.info("on ad video end",this.adId),this.reportToVpaid("vpaidDone",{tab:this.model.get("isInTab")},!0),this.isCompleted=!0,!this.hadPlay)return this.adState=y.adState.autoKill,void this.completeCb(this,!0);this.setToModel("activeTag",void 0),this.adQState=y.adQState.completed,this.adState=y.adState.completed,this.completeCb(this,!1),this.setToModel("adQState",this.adQState),this.setToModel("adState",this.adState),this.vpaidWrapper=void 0,this.getAdState=y.getAdState.stopped}}},{key:"_onAdClickThru",value:function(){this.setToModel("clickThruState",y.clickThruState.clicked),this.oppsService.onAdClicked()}},{key:"_bringToFront",value:function(){this.vpaidWrapper.localTarget&&(0,h.default)(this.vpaidWrapper.localTarget).css({zIndex:1e3,display:"block",height:this.model.get("height")+"px"})}},{key:"_bringToBack",value:function(){this.vpaidWrapper.localTarget&&(0,h.default)(this.vpaidWrapper.localTarget).css({zIndex:0})}},{key:"_hasVpaidWrapper",value:function(){return this._hasPlayer()&&this.vpaidWrapper}},{key:"_hasPlayer",value:function(){return this.player&&!this.player.playerIsClosed}},{key:"setActiveTag",value:function(){this.log.info("setActiveTag",this.adId);var e=u.default.stripObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]);this.model.get("activeTag")!==e&&this.setToModel("activeTag",e)}},{key:"getAdData",value:function(){if(this.vpaidWrapper){var e=void 0;this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.data&&(e=this.vpaidWrapper.vpaidLog.data._id);var t={adId:this.adId,predictPoint:this.predictPoint,requiredViewability:this.vpaidWrapper.tag?u.default.parseBool(this.vpaidWrapper.tag.requiredViewability):void 0,getAdKey:"any"===this.getAdKey?10:this.getAdKey,sequenceId:this.sequenceId,dp:this.vpaidWrapper.tag?this.vpaidWrapper.tag.dp:void 0,rpox:this.rpox,isCompleted:this.isCompleted,tagData:u.default.stripObject(this.vpaidWrapper.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"]),vpaidId:e};this.subModel&&this.subModel.get("cardNumber")&&(t.sp=this.subModel.get("cardNumber"));var i=this.model.get("subUnitType");return this.model&&(i||0===i)&&(t.su=this.model.get("subUnitType")),t}}},{key:"isPWOV",value:function(){return!(!this.vpaidWrapper||!this.vpaidWrapper.pwov)&&(this.model.get("isPWOV")&&u.default.isFactor(100/this.vpaidWrapper.pwov))}},{key:"pause",value:function(){return(this.model.get("isInTab")&&"continueAd"===this.model.get("onOutOfView")||this.isPWOV())&&this.isViewabilityFired?(this.log.info("onOutOfView continueAd",this.adId),this.setToModel("adState",y.adState.continueAd),void this.oppsService.fireContinueAd()):(this._hasVpaidWrapper()&&(this.vpaidWrapper.pauseAd(),this.oppsService.onFirstPauseAfterPlay(),this.kibana&&this.kibana._adPaused(this.getAdData(),"outOfView"),this.reportToVpaid("pauseAdCalled",{reason:"outOfView",tab:this.model.get("isInTab")},!1)),void this.setToModel("adState",y.adState.paused))}},{key:"play",value:function(){this.log.info("playing ad",this.adId),this.setToModel("activeAdData",this.getAdData()),this.hadPlay||(this.hadPlay=!0,this.log.info("Winning ad: "+this.getAdKey,this.adId),this.model.get("isMultiActiveAds")||(this._bringToFront(this.vpaidWrapper),(0,h.default)(this.vpaidWrapper.adTarget).removeClass("_cm-ad")),this.setActiveTag(),this.adQState=y.adQState.q0,this.setToModel("adQState",y.adQState.q0),this.oppsService.onConversion(),this.adConversionFired()),this._hasVpaidWrapper()?(this.log.info("resumeAd VpaidWrapper is alive ",this.adId),this.vpaidWrapper.resumeAd(),this.reportToVpaid("resumeAdCalled",{tab:this.model.get("isInTab")},!1),this.kibana&&this.kibana._adPlaying()):this.log.warning("resumeAd failed VpaidWrapper is NOT alive ",this.adId),setTimeout(this.setToModel.bind(this,"adState",y.adState.playing),0)}},{key:"cancelGetAd",value:function(){this.getAdResult&&(this.log.info("GetAd was cancelled",this.adId),this.getAdResult.cancel(),this.getAdResult=void 0)}},{key:"setToModel",value:function(e,t){this.model.set(e,t),this.subModel&&this.subModel.set(e,t)}},{key:"setSubModel",value:function(e){this.subModel=e,this.oppsService&&this.oppsService.setSubModel(this.subModel)}},{key:"resize",value:function(e){return e&&e.width&&e.height?void(this.sizeObj.width===e.width&&this.sizeObj.height===e.height||(this.sizeObj.width=e.width,this.sizeObj.height=e.height,this.vpaidWrapper.resizeAd(e.width,e.height))):void this.log.error("resize was called with empty sizeObj!",e)}},{key:"mute",value:function(){this.vpaidWrapper&&(this.log.info("Mute Player"),this.subModel.set("isMuted",!0),this.vpaidWrapper.mute())}},{key:"unmute",value:function(){this.vpaidWrapper&&(this.log.info("UnMute Player"),this.subModel.set("isMuted",!1),this.vpaidWrapper.unmute())}},{key:"fireSkipVimp1EligibilityLost",value:function(){this.oppsService.fireSkipVimp1EligibilityLost()}},{key:"fireSkipVimp1Vimp0Playing",value:function(){this.oppsService.fireSkipVimp1Vimp0Playing()}},{key:"onViewability",value:function(){this.isViewed||(this.isViewed=!0,this.adViewabilityFired(),this.oppsService.onViewability(),this.kibana&&this.kibana.onViewability())}},{key:"reportToVpaid",value:function(e,t,i){this.subModel&&this.subModel.get("cardNumber")&&(t.sp=this.subModel.get("cardNumber"));var n=this.model.get("subUnitType");this.model&&(n||0===n)&&(t.su=this.model.get("subUnitType")),this._hasVpaidWrapper()&&this.vpaidWrapper.vpaidLog&&this.vpaidWrapper.vpaidLog.push&&(this.vpaidWrapper.vpaidLog.push("unit_"+e,t,!1),this.vpaidWrapper.vpaidLog.data.unit_history.push(e),this.vpaidWrapper.vpaidLog.data.statuses.push(e),i&&this.vpaidWrapper.vpaidLog.push("unit_state",{status:e},i))}},{key:"fireSkipVimp1EligibilityLost",value:function(e){this.oppsService.fireSkipVimp1EligibilityLost(e)}},{key:"fireSkipVimp1Vimp0Playing",value:function(e){this.oppsService.fireSkipVimp1Vimp0Playing(e)}},{key:"reportRpoxSkip",value:function(e){this.reportToVpaid("skipRpox",{otherRpox:e.rpox,otherRequiredViewability:e.requiredViewability,otherAdDp:e.dp,otherSequenceId:e.sequenceId},!1)}},{key:"reportPpKeySkip",value:function(e){this.reportToVpaid("skipPpKey",{otherRpox:e.rpox,otherRequiredViewability:e.requiredViewability,otherAdDp:e.dp,otherSequenceId:e.sequenceId},!1)}},{key:"reportSwapToVpaid",value:function(e,t){this.reportToVpaid(e,t,!1),this.adData.requiredViewability&&this.oppsService.onSwapAd()}}]),t}(f.StateManager);e.exports=S},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(6),u=(o(d),i(2)),c=o(u),h=i(29),p=(o(h),i(51)),f=i(50),g=o(f),m=i(48),v=n(m),y=i(94),b=o(y),_=i(25),w=o(_),T={viewability:{id:30,name:"viewability"},pauseAfterPlay:{id:31,name:"pauseAfterPlay"},conversion:{id:32,name:"adPlay"},clickThru:{id:33,name:"clickThru"},fireSkipVimp1EligibilityLost:{id:43,name:"skipLostEligibility"},fireSkipVimp1Vimp0Playing:{id:44,name:"skipOtherPlaying"},unitImpression:{id:45,name:"unitImpression"},continueAd:{id:46,name:"continueAd"},swapAd:{id:47,name:"swapAd"}},S=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.model));return i.model=e.model,i.adData=e.adData,i.reportFunc=e.reportFunc,i.log=new g.default({unitType:i.model.get("unitType"),className:"oppsService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.oppManager=new b.default(i.model.get("player.urls.oppsRequest"),{"auc-dast":i.model.get("cmDast"),pt:c.default.crc32(i.model.get("abTest")||999)}),i.isViewed=!1,i.hadConversion=!1,i.hadImpression=!1,i.isFirstPlayForAd=!0,i.pageEventHistory=window.cmTag.PEH,i.unifiedPlacementEH=window.cmTag.UPEH,i._bindEvents(),i._fireUnitImpression(),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){}},{key:"_fireUnitImpression",value:function(){this._fireOpp(T.unitImpression.id,T.unitImpression.name),this.reportFunc(T.unitImpression.name,{tab:this.model.get("isInTab"),eligibility:this.model.get("isEligibleToPlay"),gotVimpCountQ:this.model.get("impressionCount"),hadEligibility:this.model.get("hadEligibility"),hadLostEligibility:!!this.model.get("lostEligibilityTime")},!0),this.model.get("hadEligibility")||this.reportFunc("waitingForEligibilty",{tab:this.model.get("isInTab")},!1)}},{key:"fireSkipVimp1EligibilityLost",value:function(e){e&&this._fireOpp(T.fireSkipVimp1EligibilityLost.id,T.fireSkipVimp1EligibilityLost.name),this.reportFunc(T.fireSkipVimp1EligibilityLost.name,{},!1)}},{key:"fireSkipVimp1Vimp0Playing",value:function(e){e&&this._fireOpp(T.fireSkipVimp1Vimp0Playing.id,T.fireSkipVimp1Vimp0Playing.name),this.reportFunc(T.fireSkipVimp1Vimp0Playing.name,{otherAdRequiredViewbility:this.model.get("activeAdData.requiredViewability"),otherAdPlayerSequenceId:this.model.get("activeAdData.tagData.sequenceId"),otherAdDp:this.model.get("activeAdData.dp")},!1)}},{key:"onSwapAd",value:function(){this._fireOpp(T.swapAd.id,T.swapAd.name)}},{key:"onConversion",value:function(){this.hadConversion||(this.shouldFirePauseAfterPlay=!0,this.hadConversion=!0,this._fireOpp(T.conversion.id,T.conversion.name),this.reportFunc(T.conversion.name,{},!0))}},{key:"onFirstPauseAfterPlay",value:function(){this.shouldFirePauseAfterPlay&&!this.isViewed&&(this.shouldFirePauseAfterPlay=!1,this._fireOpp(T.pauseAfterPlay.id,T.pauseAfterPlay.name),this.reportFunc(T.pauseAfterPlay.name,{tab:this.model.get("isInTab")},!0))}},{key:"onViewability",value:function(){this.isViewed=!0,this._fireOpp(T.viewability.id,T.viewability.name),this.reportFunc(T.viewability.name,{},!0)}},{key:"fireContinueAd",value:function(){this._fireOpp(T.continueAd.id,T.continueAd.name),this.reportFunc(T.continueAd.name,{tab:this.model.get("isInTab")},!0)}},{key:"onAdClicked",value:function(){this._fireOpp(T.clickThru.id),this.reportFunc(T.clickThru.name,{},!0),this.model.set("clickThruState",v.clickThruState.waiting)}},{key:"_fireOpp",value:function(e,t){if(this.adData&&e){t&&this.log.info("Fire "+t+" opps");var i={rs:this.adData.sequenceId,st:w.default.ROLL_TYPE[this.adData.rollType],sts:this.model.get("playerRepeatCount"),os:Number(this.adData.waterfallTagId)+1,rst:e,d:(new Date).getTime()-this.adData.created,dast:this.adData.dast,vpd:this.adData.pubId,vptd:this.adData.tagId,pv:this.model.get("playerVersion"),dp:c.default.crc32(this.adData.dp),vmt:Number(this.adData.isRon)||0,abt:this.model.get("abTest"),vstt:this.model.get("isInTab")?1:0,agl:this.model.get("preset.level")?this.model.get("preset.level"):1};this.subModel&&this.subModel.get("cardNumber")&&(i.sp=this.subModel.get("cardNumber"));var n=this.model.get("subUnitType");this.model&&(n||0===n)&&(i.su=this.model.get("subUnitType")),this.oppManager.send(i)}}},{key:"setSubModel",value:function(e){this.subModel=e}},{key:"_onSecondsToCloseGlobal",value:function(){this.reportFunc("secondsToCloseGlobal",{},!0)}},{key:"_onCloseButtonClick",value:function(){this.reportFunc("closeButtonClick",{},!0)}}]),t}(p.StateManager);e.exports=S},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l=i(50),d=n(l),u=function(){function e(t,i){o(this,e),this.oppUrl=t,0!==t.indexOf("//")&&(this.oppUrl="//"+this.oppUrl),this.options={"auc-dast":void 0,dast:void 0,d:void 0,dp:void 0,os:void 0,pv:void 0,pt:void 0,rs:void 0,rst:void 0,st:void 0,sts:void 0,tms:void 0,vmt:void 0,vpd:void 0,vptd:void 0},this.options=a.default.extend(this.options,i),this.log=new d.default({className:"Opportunity Manager"}),this.pixelType={tagStarted:0,tagImpression:1,tagTimeout:2,tagError:4,playerClosed:7,AdVideoFirstQuartile:21,AdVideoMidpoint:22,AdVideoThirdQuartile:23,AdVideoComplete:24,viewability:30,firstImpression:99}}return r(e,[{key:"send",value:function(e){var t=this.oppUrl;e=a.default.extend({},this.options,{tms:Math.floor((new Date).getTime()/1e3)},e),t=a.default.addParametersToUrl(t,e,!0),a.default.firePixel(t,"Opportunity Pixel")}}]),e}();e.exports=u},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(50),u=o(d),c=i(48),h=n(c),p=i(2),f=o(p),g=i(96),m=i(51),v=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new u.default({unitType:i.model.get("unitType"),className:"seerService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i._createPredictors(),i._createPlayerReadyPredict(),i._createRequestedPredictors(),i}return a(t,e),l(t,[{key:"_createPredictors",value:function(){var e=this;this.predictors={},this.predictors.multiAd=function(){e.multiAd=new g.multiAdPredict({model:e.model,onPredict:e.onPredict})},this.predictors.getAdFail=function(){e.getAdFailPredict=new g.getAdFailPredict({model:e.model,onPredict:e.onPredict})},this.predictors.repeat=function(){e.repeatPredict=new g.repeatPredict({model:e.model,onPredict:e.onPredict})},this.predictors.loading=function(){e.loadingPredict=new g.loadingPredict({model:e.model,onPredict:e.onPredict})},this.predictors.autoKill=function(){e.autoKillPredict=new g.autoKillPredict({model:e.model,onPredict:e.onPredict})},this.predictors.distancePercent=function(){e.distancePercent||(e.distancePercent=[]);var t=e.model.get("predictors.distancePercent.predictPoints");f.default.each(t,function(t,i){e.distancePercent.push(new g.distancePercentPredict({model:e.model,onPredict:e.onPredict,startWfFunc:e.startWF,predictPoint:t.requirePercentageToSelector,predictKey:i}))})},this.predictors.distancePixels=function(){e.distancePixels||(e.distancePixels=[]);var t=e.model.get("predictors.distancePixels.predictPoints");f.default.each(t,function(t,i){e.distancePixels.push(new g.distancePixelsPredict({model:e.model,onPredict:e.onPredict,startWfFunc:e.startWF,predictPoint:t.pixelsFromSelectors,predictKey:i}))})},this.predictors.firstScroll=function(){e.firstScrollPredict=new g.firstScrollPredict({model:e.model,onPredict:e.onPredict,startWfFunc:e.startWF})}}},{key:"_createPlayerReadyPredict",value:function(){this.model.get("predictors.playerReady")&&this.model.get("predictors.playerReady.isActive")&&(this.playerPredict=new g.playerReadyPredict({model:this.model,onPredict:this.onPredict,startWfFunc:this.startWF}))}},{key:"onPredict",value:function(e,t){this.model.set("nextPredictName",t),this.model.get("nextPredict")===e?this.model.trigger("change:nextPredict",this.model,e):this.model.set("nextPredict",e)}},{key:"startWF",value:function(){this.model.set("startWF",!0)}},{key:"_createRequestedPredictors",value:function(){if(this.model.get("playerState")!==h.readyState)return void this.model.listenToOnce(this.model,"change:playerState",this._createRequestedPredictors.bind(this));var e=this,t=this.model.get("predictors"),i=Object.keys(t);i.forEach(function(i){var n=t[i];n&&e.predictors[i]&&(n.isActive||n.isStartWF)&&e.predictors[i]()})}}]),t}(m.StateManager);e.exports=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.firstScrollPredict=t.autoKillPredict=t.repeatPredict=t.playerReadyPredict=t.multiAdPredict=t.loadingPredict=t.getAdFailPredict=t.distancePixelsPredict=t.distancePercentPredict=t.basePredict=void 0;var o=i(97),r=n(o),s=i(98),a=n(s),l=i(99),d=n(l),u=i(101),c=n(u),h=i(102),p=n(h),f=i(103),g=n(f),m=i(104),v=n(m),y=i(105),b=n(y),_=i(106),w=n(_),T=i(107),S=n(T);t.basePredict=r.default,t.distancePercentPredict=d.default,t.distancePixelsPredict=c.default,t.getAdFailPredict=p.default,t.loadingPredict=g.default,t.multiAdPredict=v.default,t.playerReadyPredict=b.default,t.repeatPredict=w.default,t.autoKillPredict=a.default,t.firstScrollPredict=S.default},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(51),h=i(50),p=o(h),f=i(48),g=(n(f),function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.model));return i.model=e.model,i.onPredict=e.onPredict,i.currentKey=0,i.log=new p.default({unitType:i.model.get("unitType"),className:"basePredictService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i._bindEvents(),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){}},{key:"_setCuerrentKey",value:function(e){this.currentKey=u.default.last(e.split(".")),this.model.set("adsManagerLastPredictKey",this.currentKey)}},{key:"_predicted",value:function(e){this.log.info("predicted with key: "+e),this.model.set("lastPredictPoint",e),this.model.set("lastPredictPath",this.predictPath),this.model.get(this.predictPath+".isStartWF")&&this.startWf&&this.startWf(),this.predictPath&&!this.model.get(this.predictPath+".isActive")||this.onPredict(e,this.log.className)}}]),t}(c.StateManager));e.exports=g},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(50),u=o(d),c=i(97),h=o(c),p=i(48),f=(n(p),function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new u.default({unitType:i.model.get("unitType"),className:"autoKillPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint="predictors.autoKill.predictPoint",i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adState:autoKill",funcName:"_onAutoKillPredict"}])}},{key:"_onAutoKillPredict",value:function(){setTimeout(this._predicted.bind(this,this.model.get("lastAutoKilledPredict")),0)}}]),t}(h.default));e.exports=f},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(6),d=n(l),u=i(2),c=n(u),h=i(29),p=n(h),f=i(50),g=n(f),m=i(97),v=n(m),y=i(100),b=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new g.default({unitType:i.model.get("unitType"),className:"distancePercentPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint=e.predictPoint,i.predictKey=e.predictKey,i.predictPath="predictors.distancePercent",i.startWf=e.startWfFunc,i.utils=(0,y.distancePredictorUtils)(i,i.model),i._setParentSelector(),i}return s(t,e),a(t,[{key:"_setParentSelector",value:function(){var e=this.utils.getParentSelector();e?(this.parentSelector=e,this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._calcPredict()):(this.log.info("no parentSelector can't predict distance waiting for parentSelector"),this.model.listenToOnce(this.model,"change:parentSelector",this._setParentSelector.bind(this)))}},{key:"_bindEvents",value:function(){this.parentSelector&&p.default.once("window:scroll:change",this._calcPredict.bind(this))}},{key:"_calcPredict",value:function(){if(!this.isPredicted){var e=(0,d.default)(this.model.get("scrollSelector"))[0],t=void 0!==e,i=t?e.clientHeight:window.innerHeight,n=t?i+e.scrollTop:i+window.pageYOffset,o=this.predictPoint||1,r=100/o,s=c.default.getTopOfEl(this.parentSelector),a=s+this.model.get("height")/(100/this.model.get("viewPercent")||1),l=i+(a-i)/r;this.model.get("logViewabilityCalc")&&this.log.info("\ntopParentSelector: "+s+",\neligibilityPoint: "+a+",\nstartPoint: "+i+",\nbottomViewPort: "+n+",\npredictionPoint: "+l+",\ncalc: predictionPoint <= bottomViewPort: "+(l<=n)),l<=n?(this.model.set("distancePercentPredictData",{topParentSelector:s,bottomViewPort:n,eligibilityPoint:a,startPoint:i,predictionPoint:this.predictionPoint,predictKey:this.predictKey}),this.isPredicted=!0,this._predicted(this.predictKey)):this._bindEvents()}}}]),t}(v.default);e.exports=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.distancePredictorUtils=void 0;var o=i(2),r=n(o),s=i(6),a=n(s);t.distancePredictorUtils=function(e,t){e.model=t;var i=e.model.get("parentSelector"),n=function(){if(i){var t=i.toString(),n=(0,a.default)(t);if(e.model.get("predictors.isNeedValidateParentSelector")){var o=r.default.getValidSelectorElements(n);return o[0]}return n[0]}},o=function(){var t=e.model.get(e.predictPoints);r.default.each(t,function(t,i){e._calcPredict(t,i)})};return{getParentSelector:n,calcPredicts:o}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){
if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(6),d=n(l),u=i(2),c=n(u),h=i(29),p=n(h),f=i(50),g=n(f),m=i(97),v=n(m),y=i(100),b=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new g.default({unitType:i.model.get("unitType"),className:"distancePixelsPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint=e.predictPoint,i.predictKey=e.predictKey,i.predictPath="predictors.distancePixels",i.startWf=e.startWfFunc,i.utils=(0,y.distancePredictorUtils)(i,i.model),i._setParentSelector(),i}return s(t,e),a(t,[{key:"_setParentSelector",value:function(){var e=this.utils.getParentSelector();e?(this.parentSelector=e,this.log.info("parentSelector found staring to predict viewability"),this._bindEvents(),this._calcPredict()):(this.log.info("no parentSelector can't predict distance waiting for parentSelector"),this.model.listenToOnce(this.model,"change:parentSelector",this._setParentSelector.bind(this)))}},{key:"_bindEvents",value:function(){this.parentSelector&&p.default.once("window:scroll:change",this._calcPredict.bind(this))}},{key:"_calcPredict",value:function(){if(!this.isPredicted){var e=(0,d.default)(this.model.get("scrollSelector"))[0],t=void 0!=e,i=t?e.clientHeight:window.innerHeight,n=t?i+e.scrollTop:i+window.pageYOffset,o=this.predictPoint,r=c.default.getTopOfEl(this.parentSelector),s=r-o;s<=n?(this.model.set("distancePixelPredictData",{topParentSelector:r,bottomViewPort:n,predictionPoint:this.predictionPoint,predictKey:this.predictKey}),this.isPredicted=!0,this._predicted(this.predictKey)):this._bindEvents()}}}]),t}(v.default);e.exports=b},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(50),u=o(d),c=i(97),h=o(c),p=i(48),f=(n(p),function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new u.default({unitType:i.model.get("unitType"),className:"getAdFailPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint="predictors.getAdFail.predictPoint",i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"getAdState:failed",funcName:"_onFailedToGetAd"}])}},{key:"_onFailedToGetAd",value:function(){setTimeout(this._predicted.bind(this,this.model.get("lastFailedPredict")),200)}}]),t}(h.default));e.exports=f},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(50),d=n(l),u=i(97),c=n(u),h=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new d.default({unitType:i.model.get("unitType"),className:"loadingPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint="predictors.loading.predictPoint",i.predictKey=i.model.get("predictors.loading.predictPoints"),i}return s(t,e),a(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"playerState:restarted",funcName:"_onLoadingClick"}])}},{key:"_incrementAd",value:function(){var e=this.model.get("predictors.loading.counterAd");e=e?++e:1,this.model.set("predictors.loading.counterAd",e)}},{key:"_onLoadingClick",value:function(){this._predicted(this.predictKey)}}]),t}(c.default);e.exports=h},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(50),u=o(d),c=i(97),h=o(c),p=i(48),f=n(p),g=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new u.default({unitType:i.model.get("unitType"),className:"multiAdPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint="predictors.multiAd.predictPoint",i.predictKey=i.model.get("predictors.multiAd.predictPoints"),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){var e=this.model.get("predictors.multiAd.adQState")||f.adState.completed;this.createStateHandlers([{event:"adQState:"+e,funcName:"_onPredictPoint"}]),e!==f.adQState.completed&&this.createStateHandlers([{event:"adManagerState:"+f.adManagerState.empty,funcName:"_onQEmpty"}])}},{key:"_allowPredict",value:function(){return this.model.get("isMultiAd")}},{key:"_onQEmpty",value:function(){this.model.get("getAdState")!==f.getAdState.gettingAd&&this._onPredictPoint()}},{key:"_onPredictPoint",value:function(){this._allowPredict()&&this._predicted(this.predictKey)}}]),t}(h.default);e.exports=g},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(6),u=(o(d),i(2)),c=(o(u),i(29)),h=(o(c),i(50)),p=o(h),f=i(48),g=(n(f),i(97)),m=o(g),v=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new p.default({unitType:i.model.get("unitType"),className:"playerReadyPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPath="predictors.playerReady",i.startWf=e.startWfFunc,i.predictKey=i.model.get(i.predictPath+".predictPoint"),i.predictPoint=i.predictPath+".predictPoint",i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"playerState:ready",funcName:"_onPlayerReady",isListenOnce:!0}])}},{key:"_onPlayerReady",value:function(){this._predicted(this.predictKey)}}]),t}(m.default);e.exports=v},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(6),u=(o(d),i(2)),c=(o(u),i(29)),h=(o(c),i(50)),p=o(h),f=i(48),g=(n(f),i(97)),m=o(g),v=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new p.default({unitType:i.model.get("unitType"),className:"repeatPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPoint="predictors.repeat.predictPoint",i.predictKey=i.model.get("predictors.repeat.predictPoints"),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"repeatState:spinning",funcName:"_onRepeatSpinning"}])}},{key:"_incrementAd",value:function(){var e=this.model.get("predictors.repeat.counterAd");e=e?++e:1,this.model.set("predictors.repeat.counterAd",e)}},{key:"_allowPredict",value:function(){return!this.model.get("isMultiAd")}},{key:"_onRepeatSpinning",value:function(){this._allowPredict&&this._predicted(this.predictKey)}}]),t}(m.default);e.exports=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(29),d=n(l),u=i(50),c=n(u),h=i(97),p=n(h),f=i(6),g=n(f),m=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.log=new c.default({unitType:i.model.get("unitType"),className:"firstScrollPredict",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.predictPath="predictors.firstScroll",i.predictPoints=i.predictPath+".predictPoints",i.predictKey=i.model.get(i.predictPath+".predictPoints"),i.startWf=e.startWfFunc,i.isPredicted=!1,i.model.get("isEligibleToPlay")?i._callPredict():i._onFirstScroll(),i}return s(t,e),a(t,[{key:"_bindEvents",value:function(){d.default.once("window:scroll:change",this._onFirstScroll.bind(this)),this.createStateHandlers([{event:"isEligibleToPlay:true",funcName:"_callPredict"}])}},{key:"_onFirstScroll",value:function(){if(!this.isPredicted){var e=window.pageYOffset,t=5,i=(0,g.default)(this.model.get("scrollSelector"))[0],n=void 0!==i;if(n){var o=i.clientHeight;e=o+i.scrollTop,t=o+5}t<=e?this._callPredict():this._bindEvents()}}},{key:"_callPredict",value:function(){this.isPredicted||(this.isPredicted=!0,this._predicted(this.predictKey))}}]),t}(p.default);e.exports=m},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(51),c=i(6),h=n(c),p={start:"start",renderWasCalled:"renderWasCalled",getAd:"getAd",getAdFailed:"getAdFailed",gotAd:"gotAd",adPlay:"adPlay",adPaused:"adPaused",viewability:"viewability",firstEligibility:"firstEligibility",unitCloseByUser:"unitCloseByUser",unitClosedByMidRollTimeOut:"unitClosedByMidRollTimeOut",attach:"attach",detach:"detach",swap:"swap"},f=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e.model,i.getAdCount=0,i.impressionCount=0,i.isFirstImpression=!0,i.isFirstPlay=!0,i.isFirstPauseAfterPlay=!0,i.isFirstisEligiblilty=!0,i.hadLostEligibility=!1,i.eventsToSend=i.model.get("kibanaEventsToSend")||"all",i.isDirty=!1,i.changesCount=0,i.totalData={_id:d.default.generateGuid(10),redId:i.model.get("redId")},i._start(),i._bindEvents(),i}return s(t,e),a(t,[{key:"_start",value:function(){this.startTime=this._getCurrentTime(),this._saveDataToStorage(p.start,{isEligible:this.model.get("isEligibleToPlay")||!1,startTime:this.startTime,pageUrl:window.location.href,selector:this.model.get("parentSelector").toString(),predictors:this.model.get("predictors"),predictPercent:this.model.get("predictors.distancePercent.requirePercentage"),viewPercent:this.model.get("viewPercent"),creativeId:this.model.get("creativeId"),unitType:this.model.get("unitType"),abTest:this.model.get("abTest"),playerType:this.model.get("mobilePlayer"),playerVersions:this.model.get("player.versions"),urlPrefix:this.model.get("urlPrefix"),version:this.model.get("version"),vForce:this.model.get("vForce"),isInTab:this.model.get("isInTab"),detachToSlider:this.model.get("detachToSlider"),scrollSelector:this.model.get("scrollSelector"),isUseObserver:this.model.get("isUseObserver"),isUseObserverChanged:this.model.get("isUseObserverChanged")},!0)}},{key:"_bindEvents",value:function(){var e=[{event:"renderWasCalled:true",funcName:"_onRenderCalled"},{event:"getAdState:gettingAd",funcName:"_getAdCalled"},{event:"getAdState:failed",funcName:"_getAdFailed"},{event:"isEligibleToPlay:true",funcName:"_onFirstEligibility"},{event:"closeState:closeButtonClicked",funcName:"_closeButtonClicked"},{event:"getAdState:stopped",funcName:"_unitClosedByMidRollTimeOut"},{event:"hadSwapAd",funcName:"_onSwapAd"}];this.createStateHandlers(e)}},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}},{key:"_onRenderCalled",value:function(){this.renderCallTime=this._getCurrentTime();var e={isEligible:this.model.get("isEligibleToPlay"),timeFromAdImpression:this.renderCallTime-this.adImpressionTime,isInTab:this.model.get("isInTab")};this._saveDataToStorage(p.renderWasCalled,e)}},{key:"_getAdFailed",value:function(){this.getAdFailTime=this._getCurrentTime();var e={isEligible:this.model.get("isEligibleToPlay"),timeFromGetAd:this.getAdFailTime-this.getAdTime,isInTab:this.model.get("isInTab")};this._saveDataToStorage(p.getAdFailed,e)}},{key:"_getAdCalled",value:function(){this.getAdCount++,this.getAdTime=this._getCurrentTime();var e={isEligible:this.model.get("isEligibleToPlay"),timeFromStart:this.getAdTime-this.startTime,getAdCount:this.getAdCount,predictPointKey:"any"===this.model.get("lastPredictPoint")?10:this.model.get("lastPredictPoint"),predictName:this.model.get("nextPredictName"),isInTab:this.model.get("isInTab")};this.model.get("distancePercentPredictData")&&d.default.extend(e,this.model.get("distancePercentPredictData")),this.model.get("distancePixelPredictData")&&d.default.extend(e,this.model.get("distancePixelPredictData")),this._saveDataToStorage(p.getAd,e)}},{key:"gotAd",value:function(e){this.isFirstImpression=!1,this.adImpressionTime=this._getCurrentTime();var t=this._calcScrollPercentage(),i={isEligible:this.model.get("isEligibleToPlay"),timeFromGetAd:this.adImpressionTime-this.getAdTime,scrollPercentageFromSelector:t.scrollPercentageFromSelector,bottomViewPort:t.bottomViewPort,topParentSelector:t.topParentSelector,isInTab:this.model.get("isInTab")};i.hadLostEligibility=!!this.model.get("lostEligibilityTime"),this.model.get("lostEligibilityTime")&&(i.timeFromLostEligibility=this.adImpressionTime-this.model.get("lostEligibilityTime")),e&&d.default.extend(i,e),this._saveDataToStorage(p.gotAd,i,!1),this.impressionCount++}},{key:"_adPlaying",value:function(){this.hadPlay=!0,this.adPlayingTime=this._getCurrentTime();var e={timeFromAdImpression:this.adPlayingTime-this.adImpressionTime,isInTab:this.model.get("isInTab"),isFirstPlay:this.isFirstPlay};this.model.get("activeAdData")&&d.default.extend(e,this.model.get("activeAdData")),this.isFirstPlay=!1,this._saveDataToStorage(p.adPlay,e)}},{key:"_adPaused",value:function(e,t){if(this.hadPlay){this.adPausedAfterPlayTime=this._getCurrentTime();var i={timeFromAdPlay:this.adPausedAfterPlayTime-this.adPlayingTime,isInTab:this.model.get("isInTab"),pauseReason:t};e&&d.default.extend(i,e),this._saveDataToStorage(p.adPaused,i)}}},{key:"_onFirstEligibility",value:function(){if(this.isFirstisEligiblilty){this.isFirstisEligiblilty=!1,this.firstEligibilityTime=this._getCurrentTime();var e={timeFromStart:this.firstEligibilityTime-this.startTime};this._saveDataToStorage(p.firstEligibility,e)}}},{key:"_closeButtonClicked",value:function(){this._unitClose(p.unitCloseByUser)}},{key:"_unitClosedByMidRollTimeOut",value:function(){this._unitClose(p.unitClosedByMidRollTimeOut)}},{key:"_unitClose",value:function(e){this.closeTime=this._getCurrentTime();var t={impressionCount:this.impressionCount,timeFromAdPlay:this.closeTime-this.adPlayingTime};this._saveDataToStorage(e,t,!1),clearInterval(this.updateTimer),this.updateTimer=void 0}},{key:"onViewability",value:function(){this.hadViewability=!0,this.viewabilityTime=this._getCurrentTime();var e={timeFromAdPlay:this.viewabilityTime-this.adPlayingTime};this.model.get("activeAdData")&&d.default.extend(e,this.model.get("activeAdData")),this._saveDataToStorage(p.viewability,e,!1)}},{key:"_onSwapAd",value:function(){var e=this.model.get("swappedAds"),t={newAd:e.newAd,oldAd:e.oldAd};this._saveDataToStorage(p.swap,t,!1)}},{key:"_calcScrollPercentage",value:function(){var e=this.model.get("parentSelector");e=d.default.isArray(e)?e[0]:e,e=(0,h.default)(e)[0];var t=d.default.getTopOfEl(e),i=window.innerHeight+window.pageYOffset;return{scrollPercentageFromSelector:i/t*100,topParentSelector:t,bottomViewPort:i}}},{key:"_saveDataToStorage",value:function(e,t,i){("all"===this.eventsToSend||d.default.contains(this.eventsToSend,e))&&(this.totalData[e]?d.default.isArray(this.totalData[e])?this.totalData[e].push(t):this.totalData[e]=[this.totalData[e],t]:this.totalData[e]=t,i?this._saveDataToLogServer(i):this.isDirty=!0)}},{key:"_saveDataToLogServer",value:function(e){if(e||this.isDirty){this.changesCount++,this.totalData.redId=this.model.get("redId"),this.totalData.countChanges=this.changesCount,this.totalData.abTest=this.model.get("abTest"),this.totalData.age=this._getCurrentTime()-this.startTime;var t=this.model.get("kbnul");h.default.ajax({type:"POST",url:t+"/putes/unitsanalytics",data:JSON.stringify(d.default.extend(this.totalData,{timestamp:(new Date).toISOString()})),contentType:"text/plain"}),this.isDirty=!1,this.updateTimer||(this.updateTimer=setInterval(this._saveDataToLogServer.bind(this),1e3*this.model.get("reportTimerSeconds")))}}}]),t}(u.StateManager);e.exports=f},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(6),u=o(d),c=i(2),h=o(c),p=i(29),f=(o(p),i(51)),g=i(50),m=o(g),v=i(48),y=(n(v),i(94)),b=o(y),_=i(25),w=(o(_),function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new m.default({unitType:i.model.get("unitType"),className:"pixelsService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.oppManager=new b.default(i.model.get("player.urls.oppsRequest"),{"auc-dast":i.model.get("cmDast"),pt:h.default.crc32(i.model.get("abTest")||999)}),i.hadEligibility=!1,i.hadImpression=!1,i.shouldFirePauseAfterPlay=!1,i.adsList={},i._bindEvents(),i.model.set("hadEligibility",!1),i.model.get("detachToSlider.isStartFromSlider")&&i._firePixel(i.model.getPixel("pixels.sliderFeedStartWithABT"),"slider to feed start with abTest"),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"adQState:impression",funcName:"_onAdImpression"},{event:"adState:playing",funcName:"_onAdPlaying"},{event:"adState:completed",funcName:"_onAdCompleted"},{event:"repeatState:spinning",funcName:"_onRepeatSpinning"},{event:"isEligibleToPlay",funcName:"_onEligibilityChange"},{event:"videoViewState:attached",funcName:"_fireAttachPixel",isListenOnce:!0},{event:"videoViewState:detached",funcName:"_fireDetachPixel",isListenOnce:!0},{event:"closeTimer",funcName:"_fireTimerPixel"},{event:"getAdState:gettingAd",funcName:"_fireGetAdPixel"},{event:"adState:continueAd",funcName:"_onContinueAd"}])}},{key:"_onAdImpression",value:function(){this._firePixel(this.model.getPixel("pixels.addImpresion"),"addImpresion (the player got an ad)")}},{key:"_onAdPlaying",value:function(){var e=this.model.get("activeAdData");this.adsList[e.adId]&&this.adsList[e.adId].hadPlay||(this.adsList[e.adId]=e,this.adsList[e.adId].hadPlay=!0,this._firePixel(this.model.getPixel("pixels.conversion"),"conversion (the ad is playing)"))}},{key:"_onAdCompleted",value:function(){this.isViewed=!1,this.activeTag=void 0}},{key:"_onEligibilityChange",value:function(e,t){this.stopSendingEligibility||(t&&!this.hadEligibility?(this.model.set("hadEligibility",!0),this.hadEligibility=!0,this._firePixel(this.model.getPixel("pixels.eligible"),"First eligible")):this.hadEligibility&&(this._firePixel(this.model.getPixel("pixels.lostEligibility"),"Lost first eligible"),this.model.set("lostEligibilityTime",(new Date).getTime()),this.stopSendingEligibility=!0))}},{key:"_onRepeatSpinning",value:function(){}},{key:"_onRenderWasCalled",value:function(){this._firePixel(this.model.getPixel("pixels.renderOnDemand"),"Render Was Called")}},{key:"_firePixel",value:function(e,t,i){if(e){i&&(e=this._addParametersToUrl(e,i,e.indexOf("?")===-1)),this.log.pixel("firing pixel: "+t+" url: "+e);var n=document.createElement("IMG");n.src=e}}},{key:"_addParametersToUrl",value:function(e,t,i){var n=e;return i&&(n+="?"),u.default.each(t,function(e,t){void 0!==t&&""!==t&&(n+=e+"="+t+"&")}),n}},{key:"_fireAttachPixel",value:function(){this._firePixel(this.model.getPixel("pixels.attach"),"first attach")}},{key:"_fireDetachPixel",value:function(){this._firePixel(this.model.getPixel("pixels.detach"),"first detach")}},{key:"_fireTimerPixel",value:function(e,t){this.model.get("pixels."+t+"Timer.isFire")&&this._firePixel(this.model.getPixel("pixels."+t+"Timer"),t+" timer")}},{key:"_fireGetAdPixel",value:function(){"any"===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAdAny.isFire")?this._firePixel(this.model.getPixel("pixels.getAdAny"),"getAd"):0===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAdNoRV.isFire")?this._firePixel(this.model.getPixel("pixels.getAdNoRV"),"getAd"):1===this.model.get("lastGetAdKey")&&this.model.get("pixels.getAd.isFire")&&this._firePixel(this.model.getPixel("pixels.getAd"),"getAd")}},{key:"_onContinueAd",value:function(){}}]),t}(f.StateManager));e.exports=w},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(50),h=o(c),p=i(48),f=n(p),g=i(34),m=o(g),v=i(51),y=i(6),b=o(y),_=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new h.default({unitType:i.model.get("unitType"),className:"playerService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.isRestarted=!1,i._bindEvents(),i.model.get("isPlayerLoaded")&&i._onPlayerLoaded(),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"isPlayerLoaded",funcName:"_onPlayerLoaded"},{event:"videoPlaceholderSize",funcName:"resize"},{event:"videoViewSize",funcName:"resize"},{event:"getAdState:stopped",funcName:"_pausePlayer"},{event:"loadingViewState:clicked",funcName:"_onLoadingClick"},{event:"isInTab",funcName:"_onTabEvent"},{event:"startWF",funcName:"startWf"}]),"onHover"===this.model.get("volume")&&this.createStateHandlers([{event:"isMouseOn",funcName:"_onMouseOn"}])}},{key:"_onPlayerLoaded",value:function(){if(this.model.get("isPlayerLoaded")){if(this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this.contentIndex=0,this.playlist=this.model.get("player.playlist"),this.playlist&&u.default.isEmpty(this.playlist))return void this.model.listenToOnce(this.model,"change:player.playlist",this._onPlayerLoaded.bind(this));var e=this.playlist[this.contentIndex];this.model.set("isInIdleMode",!this.model.get("isInTab")&&this.model.get("isCallIDLE")),this.player=new OvaMediaPlayer({abTest:this.model.get("abTest"),ad_controls:this.model.get("player.hasAdControls"),aspect_ratio:this.model.get("aspectRatio"),auc_dast:this.model.get("cmDast"),autostart:this.model.get("autoPlay"),base_url:this.model.get("urls.base"),bf_factor:this.model.get("player.bfFactor"),bug_feature:this.model.get("player.hasBFeature"),cfr:this.model.get("cfr"),cipid:this.model.get("cipid"),cirf:decodeURIComponent(this.model.get("referrer")),creativeId:this.model.get("creativeId"),controls:this.model.get("player.hasControls"),country:this.model.get("country"),debug:this.model.get("isDebug")?["*"]:[],default_ad_parameters:this.model.get("defaultAdParameters"),default_ad_timeout:this.model.get("adMaxPlaySeconds"),default_b2b:this.model.get("player.b2b"),fire99:this.model.get("player.isFire99"),ga_factor:this.model.get("gaFactor"),ga_frame_src:this.model.get("gaFrameSrc"),image:this.model.get("loaderImage"),interrupt_loading:this.model.get("interruptLoading"),ip:this.model.get("ip"),isViewable:this.model.get("isPlayerViewable"),keywords:this.model.get("adTitle"),min_vpaid_run_time:this.model.get("player.minVpaidRunTime"),no_debug_report:this.model.get("noDebugReport"),oid:this.model.get("originId"),opps_base_path:this.model.get("player.urls.oppsBasePath"),page_url:decodeURIComponent(this.model.get("referrer")),referrer:decodeURIComponent(this.model.get("referrer")),repeat:this.model.get("repeat"),ron_percent:this.model.get("ronPercent"),schedule_auto:this.model.get("timeBetweenAds"),tags:this.model.get("tags"),time_between_waterfall:this.model.get("secondsBW"),use_flash_bypass:this.model.get("player.isBypassFlash"),use_flash_player:this.model.get("player.isFlashPlayer"),version:this.model.get("adTitle"),vertical:this.model.get("vertical"),wf_base_path:this.model.get("player.urls.wfBasePath"),wf_url:this.model.get("player.urls.wfRequest"),opps_url:this.model.get("player.urls.oppsRequest"),height:""+this.model.get("height"),width:""+this.model.get("width"),dplayerSettings:this.model.get("player.settings"),loadrsrc:!0,preset:this.model.get("preset"),isDFP:this.model.get("iframeData.inDFP"),can_opt_out:!1,description:e.title,domain:window.location.hostname,mute:this.isMuted,title:e.title,volume:this.volume,isIdleMode:this.model.get("isInIdleMode"),dlywf:this.model.get("dlywf"),target_id:this.getTarget(),schedule:this.model.getScheduleArr(),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),isMobile:this.model.get("isMobile"),queue_size:this.model.get("player.settings.queueSize"),max_ready_vpaid:this.model.get("player.settings.maxReadyVpaid"),
adto:this.model.get("player.settings.adto"),vakll:this.model.get("player.settings.vakll"),mintimwf:this.model.get("player.settings.mintimwf"),red_id:this.model.get("redId"),agressiveLevel:this.model.get("predefinedSettings.level"),suppressContentZindex:this._getSuppressContentZindex(),vimpFireEvent:this.model.get("vimpFireEvent"),vForce:this.model.get("vForce.isActive"),get_ad_timeout_seconds:this.model.get("vForce.getAdTimeoutSeconds"),wf_manual:this.model.get("wfManual"),wf_dynmc_ps:this.model.get("wfDynamicPause"),run_wf_when_empty:this.model.get("runWfWhenEmpty"),rndmt:this.model.get("rndmt"),unit_name:this.model.get("unitName"),unit_loader_version:this.model.get("version"),unit_main_version:this.model.get("unitVersion"),mprdct:this.model.get("player.settings.mprdct"),files:[e],onPlayerClose:this._onPlayerClose.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerStop:this._onPlayerStop.bind(this)}),m.default.player=this.player,this.player.on("AdClickThru",this._onAdClickThru.bind(this))}}},{key:"_getSuppressContentZindex",value:function(){return this.model.get("suppressContentZindex")&&this.model.get("vForce.isActiv")||!1}},{key:"_onAdClickThru",value:function(){this.model.set("clickThruState",f.clickThruState.clicked)}},{key:"_onPlayerReady",value:function(){this._onTabEvent(this.model,this.model.get("isInTab")),this.model.set("playerVersion",this.player.get("player_version")),this.model.set("playerRepeatCount",this.player.repeatCount),this.model.set("playerState",f.readyState),this.player.on("AdVolumeChange",this._onVolumeChange.bind(this)),this.player.on("AdPaused",this._onAdPaused.bind(this)),this.player.on("AdPlaying",this._onAdPlaying.bind(this)),this.player.on("UserInteractionPauseState",this._onPausedChanged.bind(this)),this.player.on("AdImpression",this._onAdImpression.bind(this)),this.isRestarted?(this.model.set("playerState",f.playerState.restarted),this.model.get("player.settings.dlywf")&&this.startWf()):this.model.set("playerState",f.readyState)}},{key:"_onPausedChanged",value:function(e){this.model.set("generalPlayingUnitState",!e)}},{key:"_onAdPaused",value:function(){this.model.set("generalPlayingUnitState",!1)}},{key:"_onAdPlaying",value:function(){this.model.set("generalPlayingUnitState",!0)}},{key:"_onPlayerClose",value:function(){this._setGeneralPlayingUnitState(!1),this.model.set("playerState",f.playerState.closed)}},{key:"_setGeneralPlayingUnitState",value:function(e){this.model.set("generalPlayingUnitState",null),this.model.set("generalPlayingUnitState",e)}},{key:"_onPlayerStop",value:function(){this.model.set("playerState",f.playerState.stopped)}},{key:"_onPlayerError",value:function(){this.model.set("playerState",f.playerState.error)}},{key:"_onAdImpression",value:function(){"FEED_MANAGER"!==this.model.get("unitType")||this.hadImpression||(this.hadImpression=!0,this.playerDiv.css({display:"block"}))}},{key:"close",value:function(){setTimeout(function(){this.player&&(this.player.closeCleanPlayer(),this.player=null,this.model.set("closeState",f.closeState.playerClosed),this.model.set("playerState",f.playerState.closed),this.log.info("player was closed"),"onHover"===this.model.get("volume")&&this.model.stopListening(this.model,"change:isMouseOn"))}.bind(this),0)}},{key:"resize",value:function(e,t){var i=t||e;this.lastSize=this.lastSize||{},this.lastSize.width===i.width&&this.lastSize.height===i.height||this.player&&this.player.resize&&i&&i.width&&i.height&&(this.lastSize=u.default.extend({},i),this.player.resize(i.width,i.height),this.log.info("player was resize",i))}},{key:"_pausePlayer",value:function(){this.close()}},{key:"_onLoadingClick",value:function(){var e=this;this.isRestarted=!0,setTimeout(e._onPlayerLoaded.bind(e),0)}},{key:"_hasPlayer",value:function(){return this.player&&!this.player.playerIsClosed}},{key:"_onMouseOn",value:function(e,t){t?this.unMute():this.mute()}},{key:"_onVolumeChange",value:function(e){this.isMuted=0===e.adVolume}},{key:"mute",value:function(){return this.unMuteTimer?(clearTimeout(this.unMuteTimer),void(this.unMuteTimer=!1)):void(!this.isMuted&&this._hasPlayer()&&(this.isMuted=!0,this.volume=this.player.volume(),this.player.volume(0),this.player.mute()))}},{key:"unMute",value:function(){return!this.unMuteTimer&&this.model.get("isThrottleUnMute")?void(this.unMuteTimer=window.setTimeout(this.unMute.bind(this),100)):(this.unMuteTimer=!1,void(this._hasPlayer()&&(this.isMuted=!1,this.player.volume(this.volume),this.player.unMute())))}},{key:"getTarget",value:function(){if(this.model.get("targetId"))return this.model.get("targetId").toString();var e=u.default.now().toString(),t=(0,b.default)("<div>");return t.attr("id",e),t.css({width:this.model.get("width")+"px",height:0,position:"absolute",top:0,left:0,display:"none"}),"FEED_MANAGER"!==this.model.get("unitType")&&t.css({}),t.appendTo("body"),this.playerDiv=t,e}},{key:"_onTabEvent",value:function(e,t){this.model.get("isCallIDLE")&&this.player&&this.player.startIdleMode&&this.player.stopIdleMode&&(t?(this.player.stopIdleMode(),this.model.set("isInIdleMode",!1),this.log.info("Stop idle mode")):(this.player.startIdleMode(),this.model.set("isInIdleMode",!0),this.log.info("Start idle mode")))}},{key:"startWf",value:function(){this._hasPlayer()&&this.player.startWf&&!this.model.get("isInIdleMode")?(this.log.info("Starting Waterfall"),this.player.startWf()):this.model.get("isInIdleMode")&&this.createStateHandlers([{event:"isInIdleMode:false",funcName:"startWf",isListenOnce:!0}])}}]),t}(v.StateManager);e.exports=_},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(50),h=o(c),p=i(48),f=n(p),g=i(34),m=o(g),v=i(51),y=i(6),b=o(y),_=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new h.default({unitType:i.model.get("unitType"),className:"playerService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.isRestarted=!1,i._bindEvents(),i.model.get("isPlayerLoaded")&&i._onPlayerLoaded(),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"isPlayerLoaded",funcName:"_onPlayerLoaded"},{event:"getAdState:stopped",funcName:"_pausePlayer"},{event:"isInTab",funcName:"_onTabEvent"},{event:"startWF",funcName:"startWf"}])}},{key:"_onPlayerLoaded",value:function(){if(this.model.get("isPlayerLoaded")){if(this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this.contentIndex=0,this.playlist=this.model.get("player.playlist"),this.playlist&&u.default.isEmpty(this.playlist))return void this.model.listenToOnce(this.model,"change:player.playlist",this._onPlayerLoaded.bind(this));var e=this.playlist[this.contentIndex];this.model.set("isInIdleMode",!this.model.get("isInTab")&&this.model.get("isCallIDLE")),this.player=new OvaMediaPlayer({abTest:this.model.get("abTest"),ad_controls:this.model.get("player.hasAdControls"),aspect_ratio:this.model.get("aspectRatio"),auc_dast:this.model.get("cmDast"),autostart:this.model.get("autoPlay"),base_url:this.model.get("urls.base"),bf_factor:this.model.get("player.bfFactor"),bug_feature:this.model.get("player.hasBFeature"),cfr:this.model.get("cfr"),cipid:this.model.get("cipid"),cirf:decodeURIComponent(this.model.get("referrer")),creativeId:this.model.get("creativeId"),controls:this.model.get("player.hasControls"),country:this.model.get("country"),debug:this.model.get("isDebug")?["*"]:[],default_ad_parameters:this.model.get("defaultAdParameters"),default_ad_timeout:this.model.get("adMaxPlaySeconds"),default_b2b:this.model.get("player.b2b"),fire99:this.model.get("player.isFire99"),ga_factor:this.model.get("gaFactor"),ga_frame_src:this.model.get("gaFrameSrc"),image:this.model.get("loaderImage"),interrupt_loading:this.model.get("interruptLoading"),ip:this.model.get("ip"),isViewable:this.model.get("isPlayerViewable"),keywords:this.model.get("adTitle"),min_vpaid_run_time:this.model.get("player.minVpaidRunTime"),no_debug_report:this.model.get("noDebugReport"),oid:this.model.get("originId"),opps_base_path:this.model.get("player.urls.oppsBasePath"),page_url:decodeURIComponent(this.model.get("referrer")),referrer:decodeURIComponent(this.model.get("referrer")),repeat:this.model.get("repeat"),ron_percent:this.model.get("ronPercent"),schedule_auto:this.model.get("timeBetweenAds"),tags:this.model.get("tags"),time_between_waterfall:this.model.get("secondsBW"),use_flash_bypass:this.model.get("player.isBypassFlash"),use_flash_player:this.model.get("player.isFlashPlayer"),version:this.model.get("adTitle"),vertical:this.model.get("vertical"),wf_base_path:this.model.get("player.urls.wfBasePath"),wf_url:this.model.get("player.urls.wfRequest"),opps_url:this.model.get("player.urls.oppsRequest"),height:""+this.model.get("height"),width:""+this.model.get("width"),dplayerSettings:this.model.get("player.settings"),loadrsrc:!0,preset:this.model.get("preset"),isDFP:this.model.get("iframeData.inDFP"),can_opt_out:!1,description:e.title,domain:window.location.hostname,mute:this.isMuted,title:e.title,volume:this.volume,isIdleMode:this.model.get("isInIdleMode"),dlywf:this.model.get("dlywf"),target_id:this.getTarget(),schedule:this.model.getScheduleArr(),dtagid:this.model.get("dtagid"),dpubid:this.model.get("dpubid"),isMobile:this.model.get("isMobile"),queue_size:this.model.get("player.settings.queueSize"),max_ready_vpaid:this.model.get("player.settings.maxReadyVpaid"),adto:this.model.get("player.settings.adto"),vakll:this.model.get("player.settings.vakll"),mintimwf:this.model.get("player.settings.mintimwf"),agressiveLevel:this.model.get("predefinedSettings.level"),suppressContentZindex:this._getSuppressContentZindex(),vimpFireEvent:this.model.get("vimpFireEvent"),vForce:this.model.get("vForce.isActive"),get_ad_timeout_seconds:this.model.get("vForce.getAdTimeoutSeconds"),wf_manual:this.model.get("wfManual"),wf_dynmc_ps:this.model.get("wfDynamicPause"),run_wf_when_empty:this.model.get("runWfWhenEmpty"),rndmt:this.model.get("rndmt"),unit_name:this.model.get("unitName"),unit_loader_version:this.model.get("version"),unit_main_version:this.model.get("unitVersion"),mprdct:this.model.get("player.settings.mprdct"),subUnitType:this.model.get("subUnitType"),red_id:this.model.get("redId"),files:[e],onPlayerClose:this._onPlayerClose.bind(this),onPlayerError:this._onPlayerError.bind(this),onPlayerReady:this._onPlayerReady.bind(this),onPlayerStop:this._onPlayerStop.bind(this)}),m.default.player=this.player,this.player.on("AdClickThru",this._onAdClickThru.bind(this))}}},{key:"_getSuppressContentZindex",value:function(){return this.model.get("suppressContentZindex")&&this.model.get("vForce.isActiv")||!1}},{key:"_onAdClickThru",value:function(){this.model.set("clickThruState",f.clickThruState.clicked)}},{key:"_onPlayerReady",value:function(){this._onTabEvent(this.model,this.model.get("isInTab")),this.model.set("playerVersion",this.player.get("player_version")),this.model.set("playerRepeatCount",this.player.repeatCount),this.model.set("playerState",f.readyState),this.player.on("AdVolumeChange",this._onVolumeChange.bind(this)),this.player.on("AdPaused",this._onAdPaused.bind(this)),this.player.on("AdPlaying",this._onAdPlaying.bind(this)),this.player.on("UserInteractionPauseState",this._onPausedChanged.bind(this)),this.isRestarted?(this.model.set("playerState",f.playerState.restarted),this.model.get("player.settings.dlywf")&&this.startWf()):this.model.set("playerState",f.readyState),(0,b.default)(".vpaid-player-container").css({height:"0px"})}},{key:"_onPausedChanged",value:function(e){this.model.set("generalPlayingUnitState",!e)}},{key:"_onAdPaused",value:function(){this.model.set("generalPlayingUnitState",!1)}},{key:"_onAdPlaying",value:function(){this.model.set("generalPlayingUnitState",!0)}},{key:"_onPlayerClose",value:function(){this._setGeneralPlayingUnitState(!1),this.model.set("playerState",f.playerState.closed)}},{key:"_setGeneralPlayingUnitState",value:function(e){this.model.set("generalPlayingUnitState",null),this.model.set("generalPlayingUnitState",e)}},{key:"_onPlayerStop",value:function(){this.model.set("playerState",f.playerState.stopped)}},{key:"_onPlayerError",value:function(){this.model.set("playerState",f.playerState.error)}},{key:"close",value:function(){setTimeout(function(){this.player&&(this.player.closeCleanPlayer(),this.player=null,this.model.set("closeState",f.closeState.playerClosed),this.model.set("playerState",f.playerState.closed),this.log.info("player was closed"),this.createStateHandlers([{event:"loadingViewState:clicked",funcName:"_onLoadingClick",isListenOnce:!0}]),"onHover"===this.model.get("volume")&&this.model.stopListening(this.model,"change:isMouseOn"))}.bind(this),0)}},{key:"resize",value:function(e,t){var i=t||e;this.lastSize=this.lastSize||{},this.lastSize.width===i.width&&this.lastSize.height===i.height||this.player&&this.player.resize&&i&&i.width&&i.height&&(this.lastSize=u.default.extend({},i),this.player.resize(i.width,i.height),this.log.info("player was resize",i))}},{key:"_pausePlayer",value:function(){this.close()}},{key:"_onLoadingClick",value:function(){var e=this;this.isRestarted=!0,setTimeout(e._onPlayerLoaded.bind(e),0)}},{key:"_hasPlayer",value:function(){return this.player&&!this.player.playerIsClosed}},{key:"_onVolumeChange",value:function(e){this.isMuted=0===e.adVolume}},{key:"mute",value:function(){return this.unMuteTimer?(clearTimeout(this.unMuteTimer),void(this.unMuteTimer=!1)):void(!this.isMuted&&this._hasPlayer()&&(this.isMuted=!0,this.volume=this.player.volume(),this.player.volume(0),this.player.mute()))}},{key:"unMute",value:function(){return!this.unMuteTimer&&this.model.get("isThrottleUnMute")?void(this.unMuteTimer=window.setTimeout(this.unMute.bind(this),100)):(this.unMuteTimer=!1,void(this._hasPlayer()&&(this.isMuted=!1,this.player.volume(this.volume),this.player.unMute())))}},{key:"getTarget",value:function(){if(this.model.get("targetId"))return this.model.get("targetId").toString();var e=u.default.now().toString(),t=(0,b.default)("<div>");t.attr("id",e),t.css({width:this.model.get("width")+"px",height:0,position:"absolute",top:0,left:0}),"FEED_MANAGER"!==this.model.get("unitType")?t.css({display:"none"}):t.addClass("_cm-ad-feed-manager");var i=this.model.get("additionalCss");if(i){var n=i["z-index"]||i.zIndex;n&&t.css({"z-index":i["z-index"]})}var o=this.model.get("videoContainerSelector")||"body";return t.appendTo(o),e}},{key:"_onTabEvent",value:function(e,t){this.model.get("isCallIDLE")&&this.player&&this.player.startIdleMode&&this.player.stopIdleMode&&(t?(this.player.stopIdleMode(),this.model.set("isInIdleMode",!1),this.log.info("Stop idle mode")):(this.player.startIdleMode(),this.model.set("isInIdleMode",!0),this.log.info("Start idle mode")))}},{key:"startWf",value:function(){this._hasPlayer()&&this.player.startWf&&!this.model.get("isInIdleMode")?(this.log.info("Starting Waterfall"),this.player.startWf()):this.model.get("isInIdleMode")&&this.createStateHandlers([{event:"isInIdleMode:false",funcName:"startWf",isListenOnce:!0}])}}]),t}(v.StateManager);e.exports=_},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(29),f=o(p),g=i(50),m=o(g),v=i(48),y=n(v),b=i(25),_=o(b),w=i(113),T=o(w),S=function(e){function t(e,i){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.$parentElement=i,n.model.set("isInTab",!document.hidden),n.log=new m.default({unitType:"Service",className:"Eligibility",version:n.model.get("version"),isDebug:n.model.get("isDebug")}),n.placeHolders=[],n.model.get("isUseObserver")&&n._initObserver(),n.bindEvent(),n._createPlaceHolders(),n._initEligibilityListener(),n}return a(t,e),l(t,[{key:"bindEvent",value:function(){this.model.listenTo(f.default,"window:tab:change",this._onTabEvent.bind(this)),this.createStateHandlers([{event:"containerViewState:rendered",funcName:"_setPlaceHolderToVideoView"}])}},{key:"_setPlaceHolderToVideoView",value:function(){this.model.get("isUseObserver")?(this.observer.disconnect(),this.observer.observe(this.model.get("containerViewPlaceHolder"))):(this.placeHolders=[this.model.get("containerViewPlaceHolder")],this._calculateEligibility())}},{key:"_initEligibilityListener",value:function(){this.model.get("isUseObserver")?this._registerObserverListeners():(this._calculateEligibility(),f.default.on("window:scroll:change",this._calculateEligibility.bind(this)))}},{key:"_createPlaceHolders",value:function(){for(var e=this.$parentElement||(0,h.default)(this.model.get("parentSelector").toString()),t=0;t<e.length;t++){var i=e[t];if(!i.querySelector("#_cm-css-reset")){var n=this._createTempDiv(i);i.appendChild(n),this.placeHolders.push(n)}}}},{key:"_createTempDiv",value:function(){var e=document.createElement("div");return e.classList.add("_cm-div"),e.id="_cm-css-reset",e.setAttribute("data-tracked","true"),e}},{key:"_onTabEvent",value:function(e){e===_.default.TAB_STATE.tabOut?(this.model.set("isInTab",!1),this.model.set("isEligibleToPlay",!1),this.model.set("isViewable",!1)):(this.model.set("isInTab",!0),this._calculateEligibility())}},{key:"_registerObserverListeners",value:function(){for(var e=0;e<this.placeHolders.length;e++)this.observer.observe(this.placeHolders[e])}},{key:"_testEligibility",value:function(){this.inViewDiv?(this.model.set("isEligibleToPlay",!0),!this.model.get("eligiblePlaceholder")&&u.default.isModel("getAdState",y.getAdState.gotAd,this)&&this.model.set("eligiblePlaceholder",this.inViewDiv),this.model.get("hadEligibility")||this.model.set("hadEligibility",!0)):this.model.set("isEligibleToPlay",!1)}}]),t}(T.default);e.exports=S},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(6),c=n(u),h=i(51),p=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.model.set("isEligibleToPlay",!1),i}return s(t,e),a(t,[{key:"_initObserver",value:function(){var e={rootMargin:"0px",threshold:[0,this.model.get("viewPercent")/100,this.model.get("viewabilityPercent")/100]};this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),this.log.info("IntersectionObserver was created")}},{key:"bindEvent",value:function(){}},{key:"_getDimensions",value:function(e){var t=(0,c.default)(e),i=t.width()||this.model.get("width"),n=t.height()||this.model.get("height");return{width:i,height:n}}},{key:"_calculateEligibility",value:function(){this.model.get("isUseObserver")||(this.inViewDiv=this._getInViewDiv()),this._testEligibility()}},{key:"_onTabEvent",value:function(e){}},{key:"_getInViewDiv",value:function(){for(var e=0;e<this.placeHolders.length;e++){var t=this.placeHolders[e],i=this._getDimensions(t),n=d.default.getViewPercent(t,i.width,d.default.getVideoHeight(i.width),this.model.get("scrollSelector"));this.model.get("printCurrentViewPercent")&&this.log.info(n);var o=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.model.get("viewabilityPercent")<=n),o<=n)return this.placeHolders[e]}}},{key:"_observerCallback",value:function(e,t){this.inViewDiv=void 0;for(var i=0;i<e.length;i++)if(this.model.set("isViewable",this.model.get("viewabilityPercent")<=100*e[i].intersectionRatio),e[i].intersectionRatio>=this.model.get("viewPercent")/100){this.inViewDiv=e[i];break}this._testEligibility()}},{key:"_testEligibility",value:function(){}}]),t}(h.StateManager);e.exports=p},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(6),h=o(c),p=i(29),f=o(p),g=i(50),m=o(g),v=i(48),y=n(v),b=i(113),_=o(b),w=function(e){function t(e,i,n){r(this,t);var o=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.globalModel=n,o.model.set("isInTab",o.globalModel.get("isInTab")),o.log=new m.default({unitType:"Service",className:"SubFeedEligibility",version:o.model.get("version"),isDebug:o.model.get("isDebug")}),o.placeHolders=[(0,h.default)(i)[0]],o.isEligibile=null,o.isEligibileOldVal=null,o.bindEvent(),o.model.get("isUseObserver")?(o._initObserver(),o.observer.observe(o.placeHolders[0])):o._initEligibilityListener(),o}return a(t,e),l(t,[{key:"bindEvent",value:function(){this.globalModel.listenTo(this.globalModel,"change:isInTab",this._onTabEvent.bind(this)),this.createStateHandlers([{event:"getAdState",funcName:"_calculateEligibility"}])}},{key:"_initEligibilityListener",value:function(){"rendered"===this.model.get("containerViewState")?this._calculateEligibility():this.createStateHandlers([{event:"containerViewState:rendered",funcName:"_calculateEligibility"}]),f.default.on("window:scroll:change",this._calculateEligibility.bind(this))}},{key:"_onTabEvent",value:function(e,t){this.model.set("isInTab",t),t?this._calculateEligibility():this.model.set("isEligibleToPlay",!1)}},{key:"_getInViewDiv",value:function(){for(var e=0;e<this.placeHolders.length;e++){var t=this.placeHolders[e],i=this._getDimensions(),n=u.default.getViewPercent(t,i.width,i.height,this.model.get("scrollSelector"));this.model.get("printCurrentViewPercent")&&this.log.info(n);var o=this.model.get("viewPercent")||100;if(this.model.set("isViewable",this.model.get("viewabilityPercent")<=n),o<=n)return this.placeHolders[e]}}},{key:"_testEligibility",value:function(){this.inViewDiv?(this.isEligibile=!0,this.model.set("isEligibleToPlay",!0),!this.model.get("eligiblePlaceholder")&&u.default.isModel("getAdState",y.getAdState.gotAd,this)&&this.model.set("eligiblePlaceholder",this.inViewDiv)):(this.isEligibile=!1,this.model.set("isEligibleToPlay",!1)),this.isEligibileOldVal!==this.isEligibile&&(this.log.info("Sub unit eligiblity="+this.isEligibile,"subUnitId="+this.model.get("subUnitId")),this.isEligibileOldVal=this.isEligibile)}}]),t}(_.default);e.exports=w},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(6),c=n(u),h=i(29),p=n(h),f=i(50),g=n(f),m=i(113),v=n(m),y=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.log=new g.default({unitType:"Service",className:"FeedEligibility",version:n.model.get("version"),isDebug:n.model.get("isDebug")}),n.placeHolder=(0,c.default)(i)[0],n.bindEvent(),n.model.get("isUseObserver")?(n._initObserver(),n.observer.observe(n.placeHolder)):n._initEligibilityListener(),n}return s(t,e),a(t,[{key:"bindEvent",value:function(){this.createStateHandlers([{event:"getAdState",funcName:"_calculateEligibility"},{event:"isInTab",funcName:"_onTabEvent"}])}},{key:"_initEligibilityListener",value:function(){this._calculateEligibility(),p.default.on("window:scroll:change",this._calculateEligibility.bind(this))}},{key:"_onTabEvent",value:function(e,t){t?this._calculateEligibility():this.model.set("isEligibleToPlay",!1)}},{key:"_getInViewDiv",value:function(){var e=window.innerHeight,t=e+window.pageYOffset,i=d.default.getTopOfEl(this.placeHolder),n=i+1;if(n<=t)return this.placeHolder}},{key:"_observerCallback",value:function(e,t){this.inViewDiv=void 0;for(var i=0;i<e.length;i++)if(e[i].isIntersecting){this.inViewDiv=e[i];break}this._testEligibility()}},{key:"_testEligibility",value:function(){this.inViewDiv?this.model.set("isEligibleToPlay",!0):this.model.set("isEligibleToPlay",!1)}}]),t}(v.default);e.exports=y},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(2),u=o(d),c=i(29),h=o(c),p=i(51),f=i(50),g=o(f),m=i(48),v=n(m),y=i(55),b=o(y),_=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new g.default({unitType:i.model.get("unitType"),className:"noneVForceAdService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i._createTimers(),i._bindEvents(),i.hadImpression=!1,i.model.set("getAdState",v.readyState),i}return a(t,e),l(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"isEligibleToPlay",funcName:"_playPause"},{event:"auctionManager",funcName:"_onAuctionManagerLoaded",isListenOnce:!0}]),this.model.get("isMultiAd")||this.createStateHandlers([{event:"repeatState:spinning",funcName:"_startMidRoll"}])}},{key:"_createTimers",value:function(){if(this.model.get("isMultiAd")&&this.model.get("secondsToCloseFeed")>0){var e={startCondition:{stateToListen:v.adQState.completed,state:"adQState"},stopCondition:{stateToListen:v.adQState.impression,state:"adQState"}};this.getAdTimer=new b.default(this.model,e,this._stopGetAd.bind(this),1e3*this.model.get("secondsToCloseFeed"))}}},{key:"_onAuctionManagerLoaded",value:function(e){this.player=e,this.isMuted="on"!==this.model.get("volume"),this.volume="off"!==this.model.get("volume")?40:0,this._registerListeners()}},{key:"_registerListeners",value:function(){this.player.on&&(this.player.on("AdVideoComplete",this._onVideoComplete.bind(this)),this.player.on("AdStopped",this._onStop.bind(this)),this.player.on("AdImpression",this._onAdImpression.bind(this)),this.player.on("AdPaused",this._adPaused.bind(this)),this.player.on("AdError",this._onAdError.bind(this)),this.player.on("AdVolumeChange",this._onVolumeChange.bind(this)))}},{key:"_onVideoComplete",value:function(e){this.model.set("adQState",v.adQState.completed),this.model.set("adState",v.adState.completed),this.model.set("getAdState",v.getAdState.waiting),this.model.set("activeTag",void 0),this.shouldPlay=!1}},{key:"_onStop",value:function(e){}},{key:"_onAdImpression",value:function(e){var t=this;this.log.info("onAdImpression (got ad - pausing ad)"),this.model.set("adQState",v.adQState.impression),this.model.set("getAdState",v.getAdState.gotAd),this.model.set("activeTag",u.default.stripObject(e.tag,["sequenceId","rollType","waterfallTagId","created","dast","cpmFloor","pubId","tagId","dp","isRon"])),(this.model.get("isMultiAd")||!this.hadImpression||this.shouldPlay)&&this.model.get("isEligibleToPlay")?this.model.set("adState",v.adState.playing):this._pause(),setTimeout(function(){t.isMuted||t.unMute()},200),!this.model.get("isMultiAd")&&e.dontDie,this.hadImpression||h.default.trigger("ready"),this.hadImpression=!0}},{key:"_adPaused",value:function(e){}},{key:"_onAdError",value:function(e){this.log.error("onPlayerError")}},{key:"_onVolumeChange",value:function(e){this.isMuted=0===e.adVolume}},{key:"_playPause",value:function(){return this.player&&this.model.get("getAdState")===v.getAdState.gotAd?void(this.model.get("repeatState")!==v.repeatState.showing&&(this.model.get("isEligibleToPlay")===!0?this._play():this._pause())):void this._handleGetAdTimerContinuePause();
}},{key:"_startMidRoll",value:function(){this.model.get("getAdState")===v.getAdState.gotAd?this._play():this.shouldPlay=!0}},{key:"_play",value:function(){this.player.play(),this.player.ova.resumeAd(),this.model.set("adState",v.adState.playing)}},{key:"_pause",value:function(){this.player.pause(),this.player.ova.pauseAd(),this.model.set("adState",v.adState.paused)}},{key:"_onVolumeChange",value:function(e){this.isMuted=0===e.adVolume}},{key:"mute",value:function(){this.isMuted||(this.isMuted=!0,this.volume=this.player.volume(),this.player.volume(0),this.player.mute())}},{key:"unMute",value:function(){this.isMuted=!1,this.player.volume(this.volume),this.player.unMute()}},{key:"_handleGetAdTimerContinuePause",value:function(){this.getAdTimer&&this.getAdTimer.isTimerActive()&&(this.model.get("isEligibleToPlay")?this.getAdTimer.continue():this.getAdTimer.pause())}},{key:"_stopGetAd",value:function(){this.model.stopListening(this.model,"change:isEligibleToPlay"),this.player&&(this.player.closeCleanPlayer(),this.player=null),this.model.set("getAdState",v.getAdState.stopped)}}]),t}(p.StateManager);e.exports=_},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l=i(50),d=n(l),u=function(){function e(t){o(this,e),this.model=t,this.log=new d.default({unitType:this.model.get("unitType"),className:"playerLoaderService",version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this._createLoaders(),this._loadPlayer()}return r(e,[{key:"_createLoaders",value:function(){var e=this;this.loaders={SR:function(e){},AV:function(e){},DP:function(t){var i=e.model.get("player.urls.playerLocation");e.dependencies=[i+"/OvaMediaPlayer.js"],window.OvaMediaPlayer?t():a.default.loadJsArr(e.dependencies,t.bind(e))}}}},{key:"_loadPlayer",value:function(){var e=this.loaders[this.model.get("mobilePlayer")];this.model.get("isMobile")&&e?e(this._onPlayerLoaded.bind(this)):this.loaders.DP(this._onPlayerLoaded.bind(this))}},{key:"_onPlayerLoaded",value:function(){this.model.set("isPlayerLoaded",!0)}}]),e}();e.exports=u},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(2),d=n(l),u=i(51),c=i(92),h=n(c),p=i(48),f=n(p),g=i(50),m=n(g),v=i(29),y=n(v),b=function(e){function t(e,i){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.model=e,n.kibana=i,n.log=new m.default({unitType:n.model.get("unitType"),className:"adsManager",version:n.model.get("version"),isDebug:n.model.get("isDebug")}),n.model.set("adState",f.default.readyState),n.model.set("getAdState",f.default.getAdState.notCalled),n.model.set("adManagerState",f.default.adManagerState.empty,{silent:!0}),n.adsList=[],n.model.set("nextPredict",NaN),n.adId=0,n.currentAdIndex=-1,n.model.set("activeTag",!1),n.model.set("activeAd",!1),n.model.set("impressionCount",0),n._bindEvents(),n}return s(t,e),a(t,[{key:"_bindEvents",value:function(){this.createStateHandlers([{event:"nextPredict",funcName:"adPredict"},{event:"getAdState:failed",funcName:"_onFailedToGetAd"},{event:"hasReadyAd:false",funcName:"_updateNextAd"}])}},{key:"adPredict",value:function(){if(!(this.countReadyAds(!1)>=this.model.get("maxVimpsInQueue"))){var e=this.model.get("nextPredict");d.default.isArray(e)?d.default.forEach(e,this.createNewAd,this):this.createNewAd(e)}}},{key:"createNewAd",value:function(e){var t=this.model.get("nextPredictName");if(!this.model.get("isAllowDuplicateKey")){var i=this.adsList.some(function(t,i,n){var o=t.adQState===f.default.adQState.readyState||t.adQState===f.default.adQState.impression;return o&&t.getAdKey===e});if(i)return}this.adId++;var n=new h.default({model:this.model,ppKey:e,adId:this.adId,impressionCb:this.onAdImpression.bind(this),completeCb:this.onAdComplete.bind(this),kibana:this.kibana,predictName:t});this.adsList.push(n)}},{key:"onAdImpression",value:function(e){e.setActiveTag(),this._updateNextAd(),this.model.set("adManagerState",f.default.adManagerState.hasAds),this.model.get("hadReady")||(y.default.trigger("ready"),this.model.set("hadReady",!0));var t=e.getAdData();!this.model.get("isEligibleToPlay")&&this.model.get("lostEligibilityTime")&&e.fireSkipVimp1EligibilityLost(t.requiredViewability),this.model.get("activeAdData")&&e.fireSkipVimp1Vimp0Playing(!this.model.get("activeAdData.requiredViewability")&&t.requiredViewability)}},{key:"onAdComplete",value:function(e,t){if(this._removeAd(e.adId,!1),this.model.get("hasReadyAd")){var i=this.model.getStorage("nextAd");i.adId===e.adId&&this.model.set("hasReadyAd",!1)}t&&!this.model.get("hasReadyAd")&&(this.model.set("lastAutoKilledPredict",e.getAdKey),this.model.set("adState",e.adState))}},{key:"close",value:function(){this.model.set("adManagerState",f.default.adManagerState.stopped),this.model.set("closeState",f.default.closeState.adManagerStop)}},{key:"pauseGetAds",value:function(){this.model.set("adManagerState",f.default.adManagerState.paused),this.adsList=[],this.model.set("hasReadyAd",!1)}},{key:"_onFailedToGetAd",value:function(){var e=this.model.get("getAdCurrId"),t=d.default.find(this.adsList,function(t){return t.adId===e},this);this.model.set("lastFailedPredict",t.getAdKey),this._removeAd(e,!0)}},{key:"_removeAd",value:function(e,t){d.default.size(this.adsList)>0&&(this.adsList=this.adsList.filter(function(t){return t.adId===e,t.adId!==e})),0===this.countReadyAds(t)&&this.model.set("adManagerState",f.default.adManagerState.empty)}},{key:"_updateNextAd",value:function(){var e=this.adsList.filter(function(e){return e.adQState===f.default.adQState.impression&&!e.isUsed}),t=this._chooseBestAd(e);e[t]&&this.model.setNextAd(e[t]);var i=e[t];this.model.get("hasReadyAd")&&("rpox"===this.model.get("playPriority.type")?d.default.each(this.adsList,function(e,n){t!==n&&e.adQState===f.default.adQState.impression&&i&&i.getAdData&&e.reportRpoxSkip(i.getAdData())}.bind(this)):"ppKey"===this.model.get("playPriority.type")&&d.default.each(this.adsList,function(e,n){t!==n&&e.adQState===f.default.adQState.impression&&i&&i.getAdData&&e.reportPpKeySkip(i.getAdData())}.bind(this)))}},{key:"_chooseBestAd",value:function(e){var t=this,i=0;if(1===d.default.size(e))return i;var n=this.model.get("playPriority.type")||"rpox";if("ppKey"===n)d.default.find(e,function(e,n){e.getAdKey===t.model.get("playPriority.key")&&(i=n)});else if("function"===n){var o=this.model.get("playPriority.func");i=o(e)}else"rpox"===n&&(i=this.priorityByRpox(e));return i}},{key:"priorityByRpox",value:function(e){var t=0,i=(this.model,0);return d.default.each(e,function(e,n){e.rpox>=i&&(i=e.rpox,t=n)}),t}},{key:"_hasPlayingAd",value:function(){return!!this.model.get("activeTag")}},{key:"countReadyAds",value:function(e){var t=0;return d.default.forEach(this.adsList,function(i){e&&i.adQState!==f.default.adQState.readyState?t++:i.adQState===f.default.adQState.impression&&t++},this),t}}]),t}(u.StateManager);e.exports=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),l=i(6),d=n(l),u=i(2),c=n(u),h=i(29),p=n(h),f=i(120),g=(n(f),i(51)),m=i(50),v=n(m),y=function(e){function t(e){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,i.log=new v.default({unitType:i.model.get("unitType"),className:"CardLocator",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i._lastCardElement=null,i._setMinDistance(),i._decisionCallbacks=[{callback:i._biggerThenLastCard,onFalseRunNext:!1},{callback:i._isCardInViewPort,onFalseRunNext:!1},{callback:i._biggerThenMinDistance,onFalseRunNext:!1},{callback:i._canHaveVideoBrotherAbove,onFalseRunNext:!1},{callback:i._isAtViewPercent,onFalseRunNext:!1}],i._decisionCallbacksOutOfView=[{callback:i._biggerThenLastCard,onFalseRunNext:!1},{callback:i._biggerThenMinDistance,onFalseRunNext:!1},{callback:i._canHaveVideoBrotherOutOfView,onFalseRunNext:!1},{callback:i._isCardInViewPortOutOfView,onFalseRunNext:!1}],i._isGetCardOnEligibility=i.model.get("isGetCardOnEligibility"),i._isGetCardOnEligibility&&(i._viewPercent=i.model.get("viewPercent")),i._isStartFromSlider=i.model.get("detachToSlider.isStartFromSlider"),i._feedContainer=(0,d.default)(".tbl-feed-container")[0],i._startCard=parseInt(i.model.get("startCard"))||0,i._isOpenInViewPort=i.model.get("isOpenInViewPort"),i._permanentCard=i.model.get("permanentCard"),void 0===i._isOpenInViewPort&&(i._isOpenInViewPort=!0),i}return s(t,e),a(t,[{key:"_setMinDistance",value:function(){this._minDistance=this.model.get("cardsMinDistance");var e=(0,d.default)(window).height();this._minDistance<e&&(this._minDistance=e,this.model.set("cardsMinDistance",e))}},{key:"_bindListeners",value:function(){p.default.on("window:orientation:change",this._getCardOnDomEvent,this),p.default.on("window:resize:change",this._getCardOnDomEvent,this),p.default.on("window:scroll:change",this._getCardOnDomEvent,this),p.default.on("feed:resize:change",this._getCardOnDomEvent,this),this._listenersBinded=!0}},{key:"_unBindListeners",value:function(){p.default.off("window:orientation:change",this._getCardOnDomEvent,this),p.default.off("window:resize:change",this._getCardOnDomEvent,this),p.default.off("window:scroll:change",this._getCardOnDomEvent,this),p.default.off("feed:resize:change",this._getCardOnDomEvent,this),this._listenersBinded=!1}},{key:"_biggerThenLastCard",value:function(e){return!this._lastCardElement||this._getCardNumber(e)>this._getCardNumber(this._lastCardElement)}},{key:"_isCardInViewPort",value:function(e){return c.default.getViewPercent(e,e.offsetWidth,e.offsetHeight)>0}},{key:"_isCardInViewPortOutOfView",value:function(e,t){var i=c.default.getViewPercent(e,e.offsetWidth,e.offsetHeight),n=c.default.getViewPercent(e,e.offsetWidth,e.offsetHeight);return i>0&&i<99.9&&n<=0}},{key:"_biggerThenMinDistance",value:function(e){return!this._lastCardElement||this._isMinDistancePassed(e)}},{key:"_isMinDistancePassed",value:function(e){var t=(0,d.default)(e)[0].offsetTop,i=(0,d.default)(this._lastCardElement)[0].offsetTop,n=i+(0,d.default)(this._lastCardElement).height();return!(t-n<this._minDistance)}},{key:"_canHaveVideoBrotherAbove",value:function(e,t){var i=!(0,d.default)(e).hasClass("no-vabove"),n=!(0,d.default)(t).hasClass("no-vbelow");return i&&n}},{key:"_canHaveVideoBrotherOutOfView",value:function(e,t){var i=!(0,d.default)(e).hasClass("no-vbelow"),n=!(0,d.default)(t).hasClass("no-vabove");return i&&n}},{key:"_isCurrentCardIsValid",value:function(e,t){var i=void 0;i=this._isOpenInViewPort?this._decisionCallbacks:this._decisionCallbacksOutOfView;for(var n=0;n<i.length;n++){var o=i[n],r=o.callback.call(this,e,t);if(r===!1&&o.onFalseRunNext===!1)return!1}return!0}},{key:"_getCardNumber",value:function(e){var t=(0,d.default)(e).data("card-index");return t}},{key:"_getCardOnDomEvent",value:function(e){this._isOpenInViewPort?this._searchCard():this._searchCardPerf()}},{key:"_searchCard",value:function(e){var t=(0,d.default)(".tbl-feed-container .tbl-feed-card"),i=Array.prototype.slice.call(t);if(i=i.slice(this._startCard),this._permanentCard&&this._permanentCard>0)return this._getPermanentCard(i);i=i.reverse(),e&&(this._lastCardElement=this._getLastCardInViewPort(i),this.log.info("Once out of view - Last card updated to - ",this._getCardNumber(this._lastCardElement)));for(var n=0;n<i.length;n++){var o=i[n],r=i[n+1];if(this._isCurrentCardIsValid(o,r))return this._updateLastCard(o),this._unBindListeners(),this.log.info("found valid card: "+this._lastCardElementId),this._insert="before",0!==n||this._isCardInViewPort(i[1])||(this._insert="after"),this.model.set("hasValidCard",this._lastCardElementId),{cardElement:o,cardNumber:this._lastCardElementId,insert:this._insert}}if(!this._isGetCardOnEligibility||this._isStartFromSlider&&!this._lastCardElement){var s=this._tryFirstCard(i[i.length-1]);if(s)return s;var a=this._tryLastCard(i[0]);if(a)return a}}},{key:"_searchCardPerf",value:function(){var e=(0,d.default)(".tbl-feed-card"),t=Array.prototype.slice.call(e);if(t=t.slice(this._startCard),this._permanentCard&&this._permanentCard>0)return this._getPermanentCard(t);t=t.reverse();for(var i=1;i<t.length;i++){var n=t[i],o=t[i-1];if(this._isCurrentCardIsValid(n,o))return n=t[i-1],this._updateLastCard(n),this._unBindListeners(),this.log.info("found valid card: "+this._lastCardElementId),this._insert="before",1===i&&(this._insert="after"),this.model.set("hasValidCard",this._lastCardElementId),{cardElement:n,cardNumber:this._lastCardElementId,insert:this._insert}}var r=this._tryFirstCard(t[t.length-1]);if(r)return r;var s=this._tryLastCardPerf(t[0]);return s?s:void 0}},{key:"_tryFirstCard",value:function(e){if(!this._lastCardElement&&this.isFeedNotInViewport()&&this._isCloseToTop())return this._unBindListeners(),this._updateLastCard(e),this._insert="before",this.model.set("hasValidCard",this._lastCardElementId),{cardElement:this._lastCardElement,cardNumber:this._lastCardElementId,insert:this._insert}}},{key:"_tryLastCard",value:function(e){if(this.isFeedNotInViewport()&&!this._isCloseToTop())return this._getIfLastCard(e)}},{key:"_tryLastCardPerf",value:function(e){if((this._isCardInViewPort(e)||this.isFeedNotInViewport())&&!this._isCloseToTop())return this._getIfLastCard(e)}},{key:"_getIfLastCard",value:function(e){if(!this._lastCardElement||this._isMinDistancePassed(e)&&this._lastCardElement!==e)return this._unBindListeners(),this._updateLastCard(e),this._insert="after",this.model.set("hasValidCard",this._lastCardElementId),{cardElement:this._lastCardElement,cardNumber:this._lastCardElementId,insert:this._insert}}},{key:"_getCardByCardNumber",value:function(e){if(this.log.info("getCard by number was called. cardNumber = "+e),e==this._lastCardElementId)return this._unBindListeners(),this.model.set("hasValidCard",void 0,{silent:!0}),{cardElement:this._lastCardElement,cardNumber:this._lastCardElementId,insert:this._insert}}},{key:"_updateLastCard",value:function(e){this._lastCardElement=e,this._lastCardElementId=this._getCardNumber(e)}},{key:"getCard",value:function(e,t){if(e)return this._getCardByCardNumber(e);if(this.isOpenOnCardFound)return void this.log.info("Has permanent card already - ",this._permanentCard);this.log.info("getCard was called");var i;return i=this._isOpenInViewPort?this._searchCard(t):this._searchCardPerf(),i||this._listenersBinded||(this.log.info("Waiting for valid card - binding listeners"),this._bindListeners()),i}},{key:"_isCloseToTop",value:function(){var e=document.body,t=document.documentElement,i=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight),n=i/2,o=(0,d.default)(window).height()/2,r=(0,d.default)(window).scrollTop(),s=o+r;return s<=n}},{key:"isFeedNotInViewport",value:function(){var e=this._feedContainer&&c.default.getViewPercent(this._feedContainer,this._feedContainer.offsetWidth,this._feedContainer.offsetHeight)<=0;return e}},{key:"_getPermanentCard",value:function(e){for(var t=0;t<e.length;t++)if(this._permanentCard===this._getCardNumber(e[t]))return this._unBindListeners(),this._lastCardElement=e[t],this._lastCardElementId=this._permanentCard,this._insert="before",this.isOpenOnCardFound=!0,this.model.set("hasValidCard",this._permanentCard),{cardElement:e[t],cardNumber:this._permanentCard,insert:this._insert}}},{key:"_getLastCardInViewPort",value:function(e){for(var t=void 0,i=0;i<e.length;i++)if(this._isCardInViewPort(e[i])){t=e[i];break}return!t||this._getCardNumber(t)<this._lastCardElementId?this._lastCardElement:t}},{key:"_isAtViewPercent",value:function(e){if(!this._isGetCardOnEligibility)return!0;var t=(0,d.default)(window),i={top:t.scrollTop(),left:t.scrollLeft()};i.right=i.left+t.width(),i.bottom=i.top+t.height();var n=(0,d.default)(e).width(),o=c.default.getVideoHeight(n);if(!n||!o)return!1;var r=(0,d.default)(e).offset();r.right=r.left+n,r.bottom=r.top+o;var s={top:Math.min(1,(r.bottom-i.top)/o),bottom:Math.min(1,(i.bottom-r.top)/o),left:Math.min(1,(r.right-i.left)/n),right:Math.min(1,(i.right-r.left)/n)},a=s.top*s.bottom*100;this.log.info("Video card view percent - ",a);var l=a>=this._viewPercent;return l}}]),t}(g.StateManager);e.exports=y},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(2),a=n(s),l=i(29),d=n(l),u=i(25),c=n(u),h=function(){function e(t){o(this,e),this.feedDiv=t?t:document.getElementsByClassName(c.default.FEED_SELECTOR)[0],this._timeBetweenEvents=100,this.keyPressMap={18:!1,16:!1,67:!1,77:!1},this._setMutationObserver()}return r(e,[{key:"_setMutationObserver",value:function(){var e=a.default.throttle(this._handleMutationCb.bind(this),this._timeBetweenEvents),t=new MutationObserver(e),i={attributes:!0,childList:!0,characterData:!0,subtree:!0,attributeOldValue:!0};t.observe(this.feedDiv,i)}},{key:"_handleMutationCb",value:function(e){this._trigger("feed:resize:change",{})}},{key:"_trigger",value:function(e,t){d.default.trigger(e,t)}}]),e}(),p=function(){var e;return function(t){return e||(e=new h(t)),e}}();e.exports=p},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),d=i(6),u=(o(d),i(2)),c=o(u),h=i(29),p=o(h),f=i(51),g=i(50),m=o(g),v=i(48),y=(n(v),i(25)),b=o(y),_=function(e){function t(e){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.model=e,document.hidden?i.model.set("isInTab",!1):i.model.set("isInTab",!0),i.log=new m.default({unitType:i.model.get("unitType"),className:"tabStatusService",version:i.model.get("version"),isDebug:i.model.get("isDebug")}),i.bindEvent(),i}return a(t,e),l(t,[{key:"bindEvent",value:function(){this.model.listenTo(p.default,"window:tab:change",this._onTabEvent.bind(this))}},{key:"_onTabEvent",value:function(e){this.model.set("tabState",c.default.find(Object.keys(b.default.TAB_STATE),function(t){return b.default.TAB_STATE[t]===e})),e===b.default.TAB_STATE.tabOut?this.model.set("isInTab",!1):this.model.set("isInTab",!0)}}]),t}(f.StateManager);e.exports=_}]);