(function(b,d){b.ObjectRegistry=b.ObjectRegistry||{};b.ObjectRegistry.Slideshow=b.ObjectRegistry.Slideshow||{};b.ObjectRegistry.Slideshow.Register=function(a,d){b.ObjectRegistry.Slideshow.hasOwnProperty(a)&&f("WARNING \x3e Slideshow object is already registered. Rebinding new slideshow "+a+". Old one will fade into darkness.");return b.ObjectRegistry.Slideshow[a]=d};b.Slideshow=function(){this.slideCount=0;this.transitionType;this.slider=null;this.slideViewTime=this.transitionTime=1E3;this.currentSlideIndex=
0;this.uniqueID=this.autoTransition=null;this.liveEditEnabled=!1;return this};b.Slideshow.prototype.DIAGNOSTIC_MODE=!1;var f=function(a){b.Slideshow.prototype.DIAGNOSTIC_MODE&&console.log("Slideshow diagnostic[SlideshowGenerator.js] "+a)};b.Slideshow.prototype.initSlides=function(a){d("img[data-delay-load]",a).each(function(){var a=d(this),b=a.attr("data-delay-load");a.attr("src",b)})};b.Slideshow.prototype.initSlidePlusAndMinusOneIndex=function(a,b){if(0<d("img[data-delay-load]",b).length){var g=
d("img[data-delayed-image]",b),c=g.length,f=function(a){a=d(a);var c=a.attr("data-delay-load"),b=a.attr("src");a.css("height","auto");c!==b&&(void 0!==c&&""!==c&&null!==c)&&(a.attr("src",c),a.removeAttr("data-delay-load"))};f(g[a]);a+1>=c?f(g[0]):f(g[a+1]);0>a-1?f(g[c-1]):f(g[a-1])}else d("img",b).css("height","auto")};b.Slideshow.prototype.generate=function(a,k,g,c,m){f("Generating Slideshow for "+a);b.ObjectRegistry.Slideshow.Register(a,this);var e=this.mapUi(a);this.slider=this.createSlider(e);
this.slider.$slider.removeClass("slide");this.initSlidePlusAndMinusOneIndex(0,e.$slider);null===k?(this.transitionTime=1E3*e.values.transitionTiming,this.slideViewTime=1E3*e.values.slideTiming):(this.transitionTime=1E3*k,this.slideViewTime=1E3*g);this.transitionType=e.transitionType;this.slideCount=e.$slides.length;this.currentSlideIndex=0;this.uniqueID=a;this.liveEditEnabled=c;a=100/this.slideCount;1<this.slideCount&&e.$slides.first().addClass("showing");if(this.transitionType===this.TransitionType.Slide)this.slider.createOverlapImagesForFirstAndLastSlides(),
this.slideCount=e.$slides.length,a=100/this.slideCount,e.$slides.removeClass("hidden"),e.$slider.css("left","-100%");else if(this.transitionType===this.TransitionType.Fade)for(e.$slides.slice(1).animate({opacity:0},0),e.$slides.removeClass("hidden"),k=0;k<this.slideCount;k++)g=a*k,/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(g=(Math.floor(100*a)/100).toFixed(2)*k),d(e.$slides[k]).css("left","-"+g+"%");e.$slider.css("width",this.slideCount+"00%");e.$slides.css("width",
a+"%");e.$pages.first().addClass("active");e.$slides.addClass("slideshowOptions nonEmpty");this.autoTransition=function(){var a=this;this.isDisposed()||e.$slider.animate({delay:1},this.slideViewTime,function(){f("Begin Slide Transition Cycle ( Slide View Time: "+a.slideViewTime+" ms, Transition Time: "+a.transitionTime+" ms  )");a.next(a.autoTransition)})};m||this.autoTransition();this.bindUx()};b.Slideshow.prototype.isDisposed=function(){return this!==b.ObjectRegistry.Slideshow[this.uniqueID]};b.Slideshow.prototype.pause=
function(){this.slider.$slider.stop(!0);this.slider.$slides.stop(!0);this.autoTransition=null};b.Slideshow.prototype.transitionToSlide=function(a,b,g){f("Transition to "+a);var c=this,m=function(){if(!c.isDisposed()){f("Fade Animation Complete for slide "+c.currentSlideIndex+" to "+a+" - Update Indexes and Classes. Invoke Next Transition");c.slider.$slider.find(".showing").removeClass("showing");c.slider.$pager.find(".active").removeClass("active");d(c.slider.$pages[a]).addClass("active");d(c.slider.$slides[a]).addClass("showing");
c.currentSlideIndex=a;for(var b=0,b=0;b<c.slider.$slides.length;b++)b!=a&&d(c.slider.$slides[b]).stop(!0).animate({opacity:0},0);"function"===typeof g&&g.call(c)}},e=function(){if(!c.isDisposed()){var b=d(c.slider.$slides[a]);f("Dot Update Invoked for "+a+" corresponding to id "+b.attr("id")+".");d("#dot"+b.attr("id")).parent("ol").children("li").removeClass("active");d("#dot"+b.attr("id")).addClass("active")}};if(this.transitionType===this.TransitionType.Slide){a>this.slideCount-2?a=1:1>a&&(a=this.slideCount-
2);f("(Slide) Current Slide: "+this.currentSlideIndex+"; Target Slide: "+a);b=this.GetSlideDirectionTransitionType(a,b);e();var h=0,l=0;switch(b){case this.SlideTransitionDirectionType.FirstToLast:h=0;f("First Slide to Last Slide Transition");this.slider.$slider.animate({left:"0%"},this.transitionTime,function(){var a=c.slider.$slides.length-2;/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(h=100/c.slider.$slides.length%c.slider.$slides[a].style.width.replace("%","")*
a*a);l=100*a-h;c.slider.$slider.css("left","-"+l+"%");c.slider.$slider.find(".showing").removeClass("showing");c.slider.$pager.find(".active").removeClass("active");d(c.slider.$pages[a]).addClass("active");d(c.slider.$slides[a]).addClass("showing");c.currentSlideIndex=a;"function"===typeof g&&g.call(c)});break;case this.SlideTransitionDirectionType.LastToFirst:h=0;/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&(h=100/c.slider.$slides.length%c.slider.$slides[c.currentSlideIndex].style.width.replace("%",
"")*a*a);l=100*(c.currentSlideIndex+1)-h;this.slider.$slider.animate({left:"-"+l+"%"},this.transitionTime,function(){f("Last Slide to First Slide Transition");c.slider.$slider.css("left","-100%");c.slider.$slider.find(".showing").removeClass("showing");c.slider.$pager.find(".active").removeClass("active");d(c.slider.$pages[1]).addClass("active");d(c.slider.$slides[1]).addClass("showing");c.currentSlideIndex=1;"function"===typeof g&&g.call(c)});break;default:h=0,/(?:\b(MS)?IE\s+|\bTrident\/7\.0;.*\s+rv:)(\d+)/.test(navigator.userAgent)&&
(h=100/c.slider.$slides.length%c.slider.$slides[c.currentSlideIndex].style.width.replace("%","")*a*a),l=100*a-h,this.slider.$slider.animate({left:"-"+l+"%"},this.transitionTime,function(){f("Inner Slide Transition");c.slider.$slider.find(".showing").removeClass("showing");c.slider.$pager.find(".active").removeClass("active");d(c.slider.$pages[c.currentSlideIndex]).addClass("active");d(c.slider.$slides[c.currentSlideIndex]).addClass("showing");c.currentSlideIndex=a;"function"===typeof g&&g.call(c)})}}else this.transitionType===
this.TransitionType.Fade&&(f("(Fade) Current Slide: "+this.currentSlideIndex+"; Target Slide: "+a),a>this.slideCount-1?a=0:0>a&&(a=this.slideCount-1),d(this.slider.$slides).css("zindex",1),d(this.slider.$slides).animate({opacity:0},this.transitionTime,e),d(this.slider.$slides[a]).stop(!0).css("zindex",2).animate({opacity:1},this.transitionTime,m));c.initSlidePlusAndMinusOneIndex(a,c.slider.$slider)};b.Slideshow.prototype.next=function(a){this.transitionToSlide(this.currentSlideIndex+1,this.DirectionType.Forward,
a)};b.Slideshow.prototype.previous=function(a){this.transitionToSlide(this.currentSlideIndex-1,this.DirectionType.Backward,a)};b.Slideshow.prototype.dotClick=function(a){a=this.mapDotClickUi(a);this.transitionToSlide(a.selectedSlideIndex,this.DirectionType.Omni)};b.Slideshow.prototype.TransitionType={Fade:0,Slide:1};b.Slideshow.prototype.DirectionType={Forward:0,Backward:1,Omni:2};b.Slideshow.prototype.SlideTransitionDirectionType={Inside:0,FirstToLast:1,LastToFirst:2};b.Slideshow.prototype.GetSlideDirectionTransitionType=
function(a,b){return 1>=this.currentSlideIndex&&a===this.slideCount-2&&b===this.DirectionType.Backward?this.SlideTransitionDirectionType.FirstToLast:1===a&&this.currentSlideIndex>=this.slideCount-2&&b===this.DirectionType.Forward?this.SlideTransitionDirectionType.LastToFirst:this.SlideTransitionDirectionType.Inside};b.Slideshow.prototype.mapUi=function(a){var b={$slideshow:d(".cpSliderJS"+a).closest(".widget.slideShow"),$slider:d(".cpSliderJS"+a),$slides:d(".cpSliderJS"+a).find("li"),$pager:d(".pagerJS"+
a),$pages:d(".pagerJS"+a).find("li"),transitionType:d(".cpSliderJS"+a).hasClass("slide")?this.TransitionType.Slide:this.TransitionType.Fade,NotifySlidesAdded:function(){b.$slides=d(".cpSliderJS"+a).find("li")},values:{}};b.values.transitionTiming=b.$slideshow.children("input.transitionTiming").val();b.values.slideTiming=b.$slideshow.children("input.slideTiming").val();return b};b.Slideshow.prototype.createSlider=function(a){var b={$slider:a.$slider,$slides:a.$slides,$pager:a.$pager,$pages:a.$pages,
setSlide:function(b){a.$slider.hasClass("slide")&&a.$slider.css("left","-"+b.toString()+"00%")},getCurrentlyShownSlide:function(){return a.$slider.find(".showing")},createOverlapImagesForFirstAndLastSlides:function(){var d=a.$slider.find("li");d.first().clone().insertAfter(a.$slider.find("li").last());d.last().clone().insertBefore(a.$slider.find("li").first());a.NotifySlidesAdded();b.$slides=a.$slides}};return b};b.Slideshow.prototype.mapDotClickUi=function(a){return{$dots:a.parents(".pager").children("li"),
$selectedDot:a.parent("li"),$selectedImage:d("#"+a.attr("data-targetImageli")),$images:d("#"+a.attr("data-targetImageli")).parent("ol").children("li"),selectedSlideIndex:this.transitionType===this.TransitionType.Slide?parseInt(a.html()):parseInt(a.html()-1)}};b.Slideshow.prototype.bindUx=function(){var a=this;d(".prevJS"+this.uniqueID).unbind("click").click(function(){a.pause();a.previous()});d(".dotJS"+this.uniqueID).unbind("click").click(function(){a.pause();a.dotClick(d(this))});d(".nextJS"+this.uniqueID).unbind("click").click(function(){a.pause();
a.next()});a.liveEditEnabled&&(a.slider.$slides.add("p.slideshowOptions.empty.placeholder").unbind("click").click(function(a){a=d(this).closest(".widget.slideShow");var b=ContentCollectionInstance.PageID,c=ContentCollectionInstance.ModuleID,f=a.data("widgetid"),e=a.find(".hdnSlideshowUniqueID").val();callbackfnSlideshowSave=null;parentID_Slideshow=a.attr("id");ContentCollectionInstance.SlideshowWidgetID=f;$popUp_Slideshow=openCpModal({title:"Slideshow",className:"newCP adminWrap cpPopOver admin modalSlideshow",
isFrontEnd:!1,useIframe:!1,draggable:!0,url:"/Slideshow/SlideshowConfiguration/"+e+("?pageID\x3d"+b+"\x26moduleID\x3d"+c)})}),d(".widget.slideShow").siblings("a.handle.options").each(function(){var a=d(this);a.data("cpPopover")&&a.data("cpPopover").destroy();var b=a.parents('[data-cprole$\x3d"ontentContainer"]').attr("id"),c=a.parents(".pageContent").filter(":first").data("containerid"),b="/ContentWidgets/SlideshowOptions?widgetID\x3d"+a.data("widgetid")+"\x26pageID\x3d"+ContentCollectionInstance.PageID+
"\x26contentContainerExternalID\x3d"+b+"\x26moduleID\x3d"+ContentCollectionInstance.ModuleID+"\x26contentContainerID\x3d"+c;a.cpPopover({url:b,className:"options adminWrap",onClose:function(a,b){a.preventDefault();window.CommonPopoverInstance.hide(b);d(document.activeElement).change()}})}))}})(this,"undefined"==typeof $?window.parent.$:$);
function SlideshowColorPicker(b,d,f){this.$spectrumInput=$(b);this.$colorInput=$(d);this.defaultColor=f;this.startingColor=this.$colorInput&&this.$colorInput.val()?this.$colorInput.val():this.defaultColor}
SlideshowColorPicker.prototype.init=function(){var b=this;b.$spectrumInput.spectrum("destroy").spectrum({color:b.startingColor,showInput:!0,showPalette:!0,showPaletteOnly:!1,showSelectionPalette:!0,preferredFormat:"hex",change:function(d){d=d.toHexString();b.setValueSpectrum(d)}});b.setValueSpectrum(b.startingColor);b.$spectrumInput.parent().delegate(".clearValue","click",function(d){d&&(d.stopPropagation?d.stopPropagation():d.cancelBubble=!0);b.clearValueSpectrum()})};
SlideshowColorPicker.prototype.setValueSpectrum=function(b){this.$colorInput.val(b);this.$spectrumInput.spectrum("set",b);this.$spectrumInput.siblings("a.clearValue").remove();b&&b!==this.defaultColor&&this.$spectrumInput.next().after('\x3ca class\x3d"clearValue" title\x3d"Clear Color" href\x3d"#" onclick\x3d"return false;" style\x3d""\x3eClear\x3c/a\x3e')};
SlideshowColorPicker.prototype.clearValueSpectrum=function(){this.$spectrumInput.siblings("a.clearValue").fadeOut(300);this.$colorInput.val("");this.setValueSpectrum(this.defaultColor)};