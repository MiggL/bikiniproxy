var loadLigatusAds=[];function adsJsonpCallbackLig(m){var a,h,p,k;for(k in objectLigatusAds)objectLigatusAds.hasOwnProperty(k)&&objectLigatusAds[k].id==m.placementid&&(a=k,h=objectLigatusAds[k]);h=document.querySelectorAll("#"+h.container_id);h=h[h.length-1];k=0;for(var t=h.childNodes.length;k<t;k++)h.childNodes[k].getAttribute&&h.childNodes[k].getAttribute("position")==a&&(p=h.childNodes[k]);a=angular.element(p).scope();"error"!=m?("object"!==typeof a.data.veeseo?a.data.datas=m:(a.data.datas.abtest=m.abtest,a.data.datas.country=
m.country,a.data.datas.aisTrackers=m.aisTrackers,a.data.datas.adChoice=m.adChoice,a.data.datas.branding=m.branding,a.data.ligatusCampaigns=m.campaigns,a.data.datas.campaigns=[]),"object"==typeof a.data.css&&(a.data.stylesheet=a.data.css[a.data.datas.abtest-1].css),a.data.loaded=!0):a.data.timeOut=!0}
(function(){function m(){var a=0,n,g,b=[],e;for(e in window.objectLigatusAds)if(window.objectLigatusAds.hasOwnProperty(e)&&(g=window.objectLigatusAds[e],null!==document.getElementById(g.container_id))){g.container_id!=n&&(b[a]=g.container_id,a++);n=g.container_id;g=document.getElementById(g.container_id);var q=document.createElement("div");9>h()&&!1!==h()?(q.position=e,q.ligatusplacement=""):(q.setAttribute("position",e),q.setAttribute("ligatusplacement",""));g.appendChild(q)}for(a=0;a<b.length;a++)angular.element(document.getElementById(b[a])).data("$injector",
null),angular.bootstrap(document.getElementById(b[a]),["ligatusApp"])}function a(){var a=angular.module("ligatusApp",["ngSanitize"]);a.factory("widget",function(){return{tracking:{}}});a.directive("ligatusplacement",["$sce","getAdsService",function(a,g){return{restrict:"A",scope:!0,templateUrl:function(b,e){return a.trustAsResourceUrl(objectLigatusAds[e.position].html)},controller:["$scope","$element","$attrs","$compile",function(b,e,a,r){b.position=a.position;loadLigatusAds[a.position]=function(){"undefined"==
typeof loadLigatusAds[a.position].nbReload?loadLigatusAds[a.position].nbReload=1:loadLigatusAds[a.position].nbReload++;objectLigatusAds[a.position+loadLigatusAds[a.position].nbReload.toString()]=JSON.parse(JSON.stringify(objectLigatusAds[a.position]));var d=b.$new(!0);d.data=objectLigatusAds[a.position+loadLigatusAds[a.position].nbReload.toString()];var f=document.querySelectorAll("#"+b.data.container_id),f=f[f.length-1],c=document.createElement("div");9>h()&&!1!==h()?(c.position=a.position+loadLigatusAds[a.position].nbReload,
c.ligatusplacement=""):(c.setAttribute("position",a.position+loadLigatusAds[a.position].nbReload),c.setAttribute("ligatusplacement",""));f.appendChild(c);r(c)(d)};b.data=objectLigatusAds[a.position];"object"!==typeof b.data.css&&(b.data.stylesheet=b.data.css);b.data.datas={};void 0===b.data.ellipsis&&(b.data.ellipsis={});b.data.oba_swap=!1;b.data.isVisible=!1;b.data.timer=!1;b.data.loaded=!1;b.data.nb_cmp=void 0;b.data.https="";b.data.protocol="http://i.ligatus.com/";"https:"==window.location.protocol&&
(b.data.https="s",b.data.protocol="https://i-ssl.ligatus.com/");b.data.ligatusUrl="http"+b.data.https+"://d2.ligatus.com/?ids="+b.data.id+"&a=1&bce="+navigator.cookieEnabled+"&bl="+encodeURIComponent(window.location.href)+"&s=1";if("object"!==typeof b.data.veeseo)g.jsonpAds(b.data.ligatusUrl);else{var l;e="";if(!0===b.data.veeseo.performance)l="performance:","object"!==typeof b.data.veeseo.group&&(l+="?group="+b.data.veeseo.group);else if(l=window.location.protocol+"//"+window.location.hostname+window.location.pathname,
b.data.veeseo.devLocal&&(l="http://www.ligatus.fr/"),l=encodeURIComponent(l),"object"==typeof b.data.veeseo.group)for(var n=0;n<b.data.veeseo.group.length;n++)e+="&group["+n+"]="+b.data.veeseo.group[n];else e+="&group[0]="+b.data.veeseo.group;l="http"+b.data.https+"://rce.veeseo.com/data/"+b.data.veeseo.feedId+"/rce.json?url="+l+"&mediatype="+b.data.veeseo.mediatype;!0!==b.data.veeseo.performance&&(l+=e);g.getAds(l).then(function(d){b.data.veeseo.isFinal=d.isFinal;b.data.datas.veeseo_reco=[];var f;
if("object"!=typeof b.data.veeseo.group)f=d.rec,b.data.datas.campaigns=[],b.data.veeseoVisibleItems=[],angular.forEach(f,function(c,d){var a={};a.headline=c.title;a.teaser=c.description;a.image356=c.thumbnail_url;a.url=c.url;a.objectid=c.source_id;a.domain=c.categories[0];b.data.datas.campaigns[d]=a;b.data.veeseoVisibleItems[d]=c.source_id}),b.data.loaded=!0;else for(var c=0;c<b.data.veeseo.group.length;c++){f=d.rec_groups[b.data.veeseo.group[c]];b.data.datas.veeseo_reco[b.data.veeseo.group[c]]=[];
for(var a=b.data.datas.veeseo_reco[b.data.veeseo.group[c]].compteur=0;a<f.rec.length;a++){var e={};e.headline=f.rec[a].title;e.teaser=f.rec[a].description;e.image356=f.rec[a].thumbnail_url;e.url=f.rec[a].url;e.objectid=f.rec[a].source_id;e.domain=f.rec[a].categories[0];b.data.datas.veeseo_reco[b.data.veeseo.group[c]][a]=e}}0===b.data.id%1?g.jsonpAds(b.data.ligatusUrl):b.data.loaded=!0})}}]}}]);a.service("getAdsService",["$http","$q",function(a,g){function b(a){return a.data}function e(){g.reject();
return"error"}return{jsonpAds:function(g){return a.jsonp(g,{timeout:2E4}).then(b,e)},getAds:function(g){return a.get(g,{timeout:2E4}).then(b,e)}}}]);a.directive("responsive",["$window","$timeout","widget",function(a,g,b){return{link:function(e){function q(c,d){var a=c.split("/"),b=a[5],b=b.split("_");b.splice(d,b.length-d);a[5]=b.join("_");return a.join("/")}function r(c){"object"==typeof c.css&&"object"==typeof c.css[c.datas.abtest-1].placements&&(c.placements=c.css[c.datas.abtest-1].placements);
if(c.placements){var a=0,b=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,f=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;if("object"===typeof c.placements.portrait||"object"===typeof c.placements.paysage)a=b>=f?"landscape":"portrait";else for(f=0;f<c.placements.length;f++)b<=c.placements[f].breakpoint&&(a=f);c.nb_cmp!=c.placements[a].nb_cmp&&(d=c.placements[a],c.nb_cmp=d.nb_cmp,c.imageFormat=d.imageFormat,"object"==typeof c.veeseoVisibleItems&&
c.veeseoVisibleItems.splice(d.nb_cmp,c.veeseoVisibleItems.length-d.nb_cmp),"undefined"==typeof d.ellipsis?(c.ellipsis.headline=25,c.ellipsis.teaser=80):(c.ellipsis.headline=d.ellipsis.headline,c.ellipsis.teaser=d.ellipsis.teaser),"undefined"!=typeof d.ads_position&&l(c),"object"===typeof c.veeseo&&h(c),g(function(){e.$apply();"object"===typeof ligatusCallbacks&&"function"===typeof ligatusCallbacks[e.position]&&e.$$postDigest(function(){ligatusCallbacks[e.position]()})}))}}function l(c){c.nb_ligatus_cmp=
0;c.veeseoVisibleItems=[];for(var a=0;a<c.veeseo.group.length;a++)c[c.veeseo.group[a]]=0;c.datas.campaigns=[];for(var b=0;b<d.ads_position.length;b++){for(a=0;a<c.veeseo.group.length;a++)if(d.ads_position[b]==c.veeseo.group[a]){c.datas.campaigns[b]=c.datas.veeseo_reco[c.veeseo.group[a]][c[c.veeseo.group[a]]];c.veeseoVisibleItems.push(c.datas.veeseo_reco[c.veeseo.group[a]][c[c.veeseo.group[a]]].objectid);c[c.veeseo.group[a]]++;break}void 0===c.datas.campaigns[b]&&(c.datas.campaigns[b]=c.ligatusCampaigns[c.nb_ligatus_cmp],
c.nb_ligatus_cmp++)}if(d.random){c=c.datas.campaigns;for(var f,e,a=c.length;a;f=parseInt(Math.random()*a),e=c[--a],c[a]=c[f],c[f]=e);}}function h(a){loadLigatusScript("http"+e.data.https+"://veeseo-widget-sharedlib.s3.amazonaws.com/tracking.js",function(){b.tracking=new window.veeseoRecommendationTracking(a.veeseo.feedId);b.tracking.setCurrentUrl(encodeURIComponent(window.location.href)).setWidgetName(a.veeseo.widgetName).setLanguage(a.veeseo.language).setFinalState(a.veeseo.isFinal);b.tracking.fireTracking("load",
a.veeseoVisibleItems)})}var d;angular.element(a).bind("resize",function(){r(e.data)});r(e.data);e.data.isLigatusPresent=!1;if("object"==typeof d)if("object"==typeof d.ads_position)for(var f=0;f<d.ads_position.length;f++){if("ligatus"==d.ads_position[f]){e.data.isLigatusPresent=!0;break}}else 0===e.data.id%1&&(e.data.isLigatusPresent=!0);if(e.data.isLigatusPresent||void 0===e.data.veeseo)e.data.datas.aisTrackers[0].current_pixel=q(e.data.datas.aisTrackers[0].aisTrk,"undefined"!=typeof e.data.nb_ligatus_cmp?
e.data.nb_ligatus_cmp:e.data.nb_cmp)}}}]);a.directive("ligatusLink",["widget",function(a){return{restrict:"A",link:function(g,b,e){b.on("click",function(b){b.preventDefault();b=""===e.objectid?e.ligatusLink+"&d="+(new Date).getTime():a.tracking.getLink(e.ligatusLink,g.data.veeseoVisibleItems,{destination:e.objectid});g.data.openLinkInSameWindow?window.location=b:window.open(b)})}}}]);a.directive("visibility",["$window","$timeout","widget",function(a,g,b){return{link:function(e,h){function r(){var a=
navigator.userAgent.toLowerCase(),b=a.indexOf("msie"),c=a.indexOf(".net"),a=a.indexOf("firefox");return-1!=b||-1!=c||-1!=a?!1:!0}function l(a){try{return a.offset()}catch(b){}a=a[0];var f,c=document.documentElement||document.body;f=window.pageXOffset||c.scrollLeft;c=window.pageYOffset||c.scrollTop;f=a.getBoundingClientRect().left+f;a=a.getBoundingClientRect().top+c;return{left:f,top:a}}function k(){var a;a=r()?document.body.scrollTop:document.documentElement.scrollTop;var f=l(h).top,c=h[0].offsetHeight,
n=c/2;(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)+a>=f+c-n&&a<=f+n?!1===e.data.isVisible&&!1===e.data.timer&&(e.data.timer=!0,e.data.timer=g(function(){!1===e.data.isVisible&&(void 0!==e.data.veeseo?(b.tracking.fireTracking("track",e.data.veeseoVisibleItems),"object"==typeof e.data.veeseo.group&&(e.data.isVisible=!0)):e.data.isVisible=!0)},1E3)):(g.cancel(e.data.timer),e.data.timer=!1)}angular.element(a).bind("scroll",k);angular.element(a).bind("resize",
k);g(k,100)}}}]);a.filter("ellipsis",function(){return function(a,g){a=angular.element("<div/>").html(a).text();return a.length>g?a.substr(0,g)+"...":a}});m()}function h(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?parseInt(a.split("msie")[1]):!1}9>=h()&&function(){if(window.XDomainRequest&&!("withCredentials"in new window.XMLHttpRequest)&&!0!==window.XMLHttpRequest.supportsXDR){var a=window.XMLHttpRequest,h=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,g=/^https?:\/\//i,
b=/^get|post$/i,e=new RegExp("^"+location.protocol,"i"),k=function(a,l,k){var d,f,c,m;try{return l&&0>l.indexOf("://")&&0<document.getElementsByTagName("base").length&&(d=document.getElementsByTagName("base")[0].href)&&(l=d+l),f=h.exec(location.href),c=h.exec(l),(m=f[2].toLowerCase()!==c[2].toLowerCase())&&k&&b.test(a)&&g.test(l)&&e.test(l)}catch(p){return!1}};window.XMLHttpRequest=function(){var a=this;this._setReadyState=function(b){if(a.readyState!==b&&(a.readyState=b,"function"===typeof a.onreadystatechange))a.onreadystatechange()};
this.readyState=0;this.responseText="";this.status=0;this.statusText="";this.withCredentials=!1};window.XMLHttpRequest.prototype.open=function(b,e,g){var d=this,f;k(b,e,g)?(f=new XDomainRequest,f._xdr=!0,f.onerror=function(){d.status=400;d.statusText="Error";d._setReadyState(0);if(d.onerror)d.onerror()},f.ontimeout=function(){d.status=408;d.statusText="Timeout";d._setReadyState(2);if(d.ontimeout)d.ontimeout()},f.onload=function(){d.responseText=f.responseText;d.status=200;d.statusText="OK";d._setReadyState(4);
if(d.onload)d.onload()}):(f=new a,f.withCredentials=this.withCredentials,f.onreadystatechange=function(){if(4===f.readyState)try{d.status=f.status,d.statusText=f.statusText,d.responseText=f.responseText,d.responseXML=f.responseXML}catch(a){}d._setReadyState(f.readyState)},f.onabort=function(){d.onabort&&d.onabort.apply(d,arguments)},f.onerror=function(){d.onerror&&d.onerror.apply(d,arguments)},f.onload=function(){d.onload&&d.onload.apply(d,arguments)},f.onloadend=function(){d.onloadend&&d.onloadend.apply(d,
arguments)},f.onloadstart=function(){d.onloadstart&&d.onloadstart.apply(d,arguments)});f.onprogress=function(){d.onprogress&&d.onprogress.apply(d,arguments)};this._request=f;f.open.apply(f,arguments);this._setReadyState(1)};window.XMLHttpRequest.prototype.abort=function(){this._request.abort();this._setReadyState(0);this.onreadystatechange=null};window.XMLHttpRequest.prototype.send=function(a){var b=this;this._request.withCredentials=this.withCredentials;this._request._xdr?setTimeout(function(){b._request.send(a)},
0):this._request.send(a);4===this._request.readyState?(this.status=this._request.status,this.statusText=this._request.statusText,this.responseText=this._request.responseText,this.readyState=this._request.readyState):this._setReadyState(2)};window.XMLHttpRequest.prototype.setRequestHeader=function(){this._request.setRequestHeader&&this._request.setRequestHeader.apply(this._request,arguments)};window.XMLHttpRequest.prototype.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders?
this._request.getAllResponseHeaders():"Content-Length: "+this.responseText.length+"\r\nContent-Type:"+this._request.contentType};window.XMLHttpRequest.prototype.getResponseHeader=function(a){if(this._request.getResponseHeader)return this._request.getResponseHeader.apply(this._request,arguments);if("string"===typeof a){a=a.toLowerCase();if("content-type"===a)return this._request.contentType;if("content-length"===a)return this.responseText.length}};window.XMLHttpRequest.supportsXDR=!0}}();var p="";
"https:"==window.location.protocol&&(p="s");var k="1.2.9";if("undefined"!==typeof jQuery){var t=jQuery.fn.jquery.split(".");1>=t[0]&&7>t[1]&&(document.body.setAttribute("ng-jq",""),k="1.4.0")}"undefined"!=typeof angular?loadLigatusScript("http"+p+"://ajax.googleapis.com/ajax/libs/angularjs/"+angular.version.full+"/angular-sanitize.min.js",a):loadLigatusScript("http"+p+"://ajax.googleapis.com/ajax/libs/angularjs/"+k+"/angular.min.js",function(){loadLigatusScript("http"+p+"://ajax.googleapis.com/ajax/libs/angularjs/"+
k+"/angular-sanitize.min.js",a)})})();