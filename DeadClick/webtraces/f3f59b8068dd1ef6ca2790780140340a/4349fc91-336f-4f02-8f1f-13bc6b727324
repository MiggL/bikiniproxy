if (self.CavalryLogger) { CavalryLogger.start_js(["GFszu"]); }

__d("ChannelConstants",[],(function a(b,c,d,e,f,g){var h="channel/",i={CHANNEL_MANUAL_RECONNECT_DEFER_MSEC:2e3,MUTE_WARNING_TIME_MSEC:25e3,WARNING_COUNTDOWN_THRESHOLD_MSEC:15e3,ON_SHUTDOWN:h+"shutdown",ON_INVALID_HISTORY:h+"invalid_history",ON_CONFIG:h+"config",ON_ENTER_STATE:h+"enter_state",ON_EXIT_STATE:h+"exit_state",ATTEMPT_RECONNECT:h+"attempt_reconnect",RTI_SESSION:h+"new_rti_address",GET_RTI_SESSION_REQUEST:h+"rti_session_request",SKYWALKER:h+"skywalker",CHANNEL_ESTABLISHED:h+"established",OK:"ok",ERROR:"error",ERROR_MAX:"error_max",ERROR_MISSING:"error_missing",ERROR_MSG_TYPE:"error_msg_type",ERROR_SHUTDOWN:"error_shutdown",ERROR_STALE:"error_stale",SYS_OWNER:"sys_owner",SYS_NONOWNER:"sys_nonowner",SYS_ONLINE:"sys_online",SYS_OFFLINE:"sys_offline",SYS_TIMETRAVEL:"sys_timetravel",HINT_AUTH:"shutdown auth",HINT_CONN:"shutdown conn",HINT_DISABLED:"shutdown disabled",HINT_INVALID_STATE:"shutdown invalid state",HINT_MAINT:"shutdown maint",HINT_UNSUPPORTED:"shutdown unsupported",reason_Unknown:0,reason_AsyncError:1,reason_TooLong:2,reason_Refresh:3,reason_RefreshDelay:4,reason_UIRestart:5,reason_NeedSeq:6,reason_PrevFailed:7,reason_IFrameLoadGiveUp:8,reason_IFrameLoadRetry:9,reason_IFrameLoadRetryWorked:10,reason_PageTransitionRetry:11,reason_IFrameLoadMaxSubdomain:12,reason_NoChannelInfo:13,reason_NoChannelHost:14,CAPABILITY_VOIP_INTEROP:8,FANTAIL_SERVICE:"WebchatClient",SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe",FAKE_DFF:"fake_dff",THROTTLED:h+"throttled",JUMPSTART:h+"jumpstart",ENTITY_PRESENCE_ACTIVE_PING:"entity_presence/active_ping",SUBSCRIPTION_STATE:{SUBSCRIBE:"s",MUTATE_CONTEXT:"m",UNSUBSCRIBE:"u"},DEFAULT_MAX_SUBSCRIPTIONS:300,DEFAULT_EVICTION_BATCH_SIZE:20,getArbiterType:function j(k){return h+"message:"+k},getSkywalkerArbiterType:function j(k){return h+"skywalker:"+k}};f.exports=i}),null);
__d("RTISubscriptionData",["ArbiterToken","ChannelConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ChannelConstants").SUBSCRIPTION_STATE;function i(j,k,l,m,n,o){__p&&__p();this.$RTISubscriptionData1=j;this.$RTISubscriptionData2=k;this.$RTISubscriptionData6=true;this.$RTISubscriptionData7=false;this.$RTISubscriptionData8=h.SUBSCRIBE;this.$RTISubscriptionData9=null;this.$RTISubscriptionData10=Date.now();this.$RTISubscriptionData3=m?m:{};this.$RTISubscriptionData4=n?n:null;this.$RTISubscriptionData5=o?o:null;this.$RTISubscriptionData11=l}i.prototype.getCreatedTime=function(){return this.$RTISubscriptionData10};i.prototype.getTopic=function(){return this.$RTISubscriptionData1};i.prototype.getViewId=function(){return this.$RTISubscriptionData11};i.prototype.getListener=function(){return this.$RTISubscriptionData2};i.prototype.getSubscribeCallback=function(){return this.$RTISubscriptionData4};i.prototype.getUnsubscribeHook=function(){return this.$RTISubscriptionData5};i.prototype.getArbiterToken=function(){return this.$RTISubscriptionData9};i.prototype.setArbiterToken=function(j){this.$RTISubscriptionData9=j};i.prototype.isDirty=function(){return this.$RTISubscriptionData6};i.prototype.setDirty=function(j){this.$RTISubscriptionData6=j};i.prototype.getState=function(){return this.$RTISubscriptionData8};i.prototype.setState=function(j){this.$RTISubscriptionData8=j};i.prototype.getContext=function(){return this.$RTISubscriptionData3};i.prototype.isSent=function(){return this.$RTISubscriptionData7};i.prototype.setSent=function(j){this.$RTISubscriptionData7=j};i.prototype.prepareMutateContext=function(j){this.setState(h.MUTATE_CONTEXT);this.setDirty(true);this.setSent(false);this.$RTISubscriptionData3=j};i.prototype.prepareUnsubscribe=function(){this.setState(h.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);this.$RTISubscriptionData2=null};f.exports=i}),null);
__d("CurrentLocale",["LocaleInitialData"],(function a(b,c,d,e,f,g){var h={};h.get=function(){return c("LocaleInitialData").locale};f.exports=h}),null);
__d("SystemEvents",["ArbiterMixin","ErrorUtils","SystemEventsInitialData","UserAgent_DEPRECATED","TimeSlice","mixin","setIntervalAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=1e3;h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function k(){i.constructor.call(this);this.USER="SystemEvents/USER";this.ONLINE="SystemEvents/ONLINE";this.TIME_TRAVEL="SystemEvents/TIME_TRAVEL";this.$SystemEvents1=c("SystemEventsInitialData").ORIGINAL_USER_ID;this.$SystemEvents2=this.$SystemEvents1;this.$SystemEvents3=navigator.onLine;this.$SystemEvents4=Date.now();this.$SystemEvents5()}k.prototype.isPageOwner=function(l){return(l||this.$SystemEvents6())==this.$SystemEvents1};k.prototype.isOnline=function(){return!!(c("UserAgent_DEPRECATED").chrome()||this.$SystemEvents3)};k.prototype.checkTimeTravel=function(){var l=Date.now(),m=l-this.$SystemEvents4;this.$SystemEvents4=l;if(m<0||m>1e4)this.inform(this.TIME_TRAVEL,m)};k.prototype.$SystemEvents5=function(){this.$SystemEvents7();this.$SystemEvents8();this.$SystemEvents9();this.$SystemEvents10()};k.prototype.$SystemEvents7=function(){__p&&__p();var l=c("TimeSlice").guard(function(){if(!this.$SystemEvents3){this.$SystemEvents3=true;this.inform(this.ONLINE,this.$SystemEvents3)}}.bind(this),"SystemEvents onOnline"),m=c("TimeSlice").guard(function(){if(this.$SystemEvents3){this.$SystemEvents3=false;this.inform(this.ONLINE,this.$SystemEvents3)}}.bind(this),"SystemEvents onOffline");if(c("UserAgent_DEPRECATED").ie())if(c("UserAgent_DEPRECATED").ie()>=11){window.addEventListener("online",l,false);window.addEventListener("offline",m,false)}else if(c("UserAgent_DEPRECATED").ie()>=8)window.attachEvent("onload",function(){document.body.ononline=l;document.body.onoffline=m});else c("setIntervalAcrossTransitions")(function(){(navigator.onLine?l:m)()},j);else if(window.addEventListener){window.addEventListener("online",l,false);window.addEventListener("offline",m,false)}};k.prototype.$SystemEvents8=function(){c("setIntervalAcrossTransitions")(function(){var l=this.$SystemEvents6();if(this.$SystemEvents2!=l){this.$SystemEvents2=l;this.inform(this.USER,l)}}.bind(this),j)};k.prototype.$SystemEvents9=function(){c("setIntervalAcrossTransitions")(this.checkTimeTravel.bind(this),j)};k.prototype.$SystemEvents10=function(){c("setIntervalAcrossTransitions")(function(){if(window.onerror!=c("ErrorUtils").onerror)window.onerror=c("ErrorUtils").onerror},j)};k.prototype.$SystemEvents6=function(){return/c_user=(\d+)/.test(document.cookie)&&RegExp.$1||"0"};f.exports=new k()}),19);
__d("UserActivity",["Arbiter","Event"],(function a(b,c,d,e,f,g){__p&&__p();var h=5e3,i=500,j=-5,k=Date.now(),l=k,m=false,n=Date.now(),o=document.hasFocus?document.hasFocus():true,p=0,q=Date.now(),r=-1,s=-1,t={EVENT_INTERVAL_MS:i,subscribeOnce:function x(y){var z=t.subscribe(function(A,B){t.unsubscribe(z);y(B)});return z},subscribe:function x(y){return c("Arbiter").subscribe("useractivity/activity",y)},unsubscribe:function x(y){y.unsubscribe()},isActive:function x(y){return new Date()-k<(y||h)},isOnTab:function x(){return o},hasBeenInactive:function x(){return m},resetActiveStatus:function x(){o=true;m=false},getLastInActiveEnds:function x(){return n},getLastActive:function x(){return k},setIdleTime:function x(y){p=y},getLastLeaveTime:function x(){return q},getLastInformTime:function x(){return l},reset:function x(){k=Date.now();l=k;m=false;n=Date.now();o=document.hasFocus?document.hasFocus():true;p=0;q=Date.now();r=-1;s=-1}};function u(event){__p&&__p();var x=b.MouseEvent;if(x&&event instanceof x){if(event.pageX==r&&event.pageY==s&&event.type!="click")return;r=event.pageX;s=event.pageY}k=Date.now();var y=k-l;if(y>i){l=k;if(!o)q=k;if(y>=(p||h)){m=true;n=k}c("Arbiter").inform("useractivity/activity",{event:event,idleness:y,last_inform:l})}else if(y<j)l=k}function v(event){o=true;n=Date.now();u(event)}function w(event){o=false;m=true;q=Date.now()}c("Event").listen(window,"scroll",u);c("Event").listen(window,"focus",v);c("Event").listen(window,"blur",w);c("Event").listen(document.documentElement,{DOMMouseScroll:u,mousewheel:u,keydown:u,mouseover:u,mousemove:u,click:u},undefined,undefined,{passive:true});c("Arbiter").subscribe("Event/stop",function(x,y){u(y.event)});f.exports=t}),null);
__d("RTISubscriptionManager",["invariant","Arbiter","ChannelConstants","CurrentLocale","CurrentUser","ErrorUtils","RTIFriendFanoutConfig","RTISubscriptionData","RTISubscriptionManagerConfig","Run","SystemEvents","UserActivity","idx","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ChannelConstants").SUBSCRIPTION_STATE;function j(p){if(k(p)===false)return null;return p.split("/",2)[1]}function k(p){return p.startsWith("gqls/")}var l=void 0;function m(){if(l===undefined){var p,q=(p=c("RTISubscriptionManagerConfig"))!=null?(p=p.config)!=null?p.www_unevictable_topic_regexes:p:p;l=q?q.map(function(r){return new RegExp(r)}):null}return l}function n(p){var l=m();return l==null||l.every(function(q){return q.test(p)===false})}function o(){__p&&__p();this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=[];this.$RTISubscriptionManager3={};this.$RTISubscriptionManager4=null;this.$RTISubscriptionManager5;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=false;this.$RTISubscriptionManager8=false;this.$RTISubscriptionManager9=true;this.$RTISubscriptionManager10=document.readyState==="complete";c("Run").onAfterLoad(function(){this.$RTISubscriptionManager10=true;this.flush()}.bind(this));this.$RTISubscriptionManager11=null;c("Arbiter").subscribe(c("ChannelConstants").ON_ENTER_STATE,function(p,q){__p&&__p();if(!this.$RTISubscriptionManager11)return;var r=/pull/.test(q.state);if(!this.$RTISubscriptionManager4&&r){this.$RTISubscriptionManager5=true;if(!this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=true;c("setTimeoutAcrossTransitions")(function(){this.$RTISubscriptionManager4=this.$RTISubscriptionManager5;this.$RTISubscriptionManager6=false;if(this.$RTISubscriptionManager4)this.flush()}.bind(this),o.PULL_HINT_DELAY_MILLIS)}}else if(!r){this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager4=false}else if(r){this.$RTISubscriptionManager4=true;this.flush()}}.bind(this));c("SystemEvents").subscribe(c("SystemEvents").ONLINE,function(p,q){if(!q){this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false}}.bind(this));c("SystemEvents").subscribe(c("SystemEvents").USER,function(p,q){this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=[];this.$RTISubscriptionManager3={}}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").RTI_SESSION,function(p,q){if(!this.$RTISubscriptionManager11&&q)this.deleteSubscriptions(function(r){return r.getState()===i.UNSUBSCRIBE});this.$RTISubscriptionManager11=q;if(this.$RTISubscriptionManager11){this.$RTISubscriptionManager4=true;this.flush()}}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").ON_INVALID_HISTORY,function(){this.$RTISubscriptionManager4=true;this.forEachSubscription(function(p,q){q.setDirty(true)});this.getCurrentSession()}.bind(this));this.getCurrentSession();c("Arbiter").subscribe(c("ChannelConstants").SKYWALKER,function(p,q){var r=q.obj.topic,s={};if(q.obj.payloads===undefined)s.obj=[q.obj.payload];else s.obj=q.obj.payloads;c("Arbiter").inform(c("ChannelConstants").getSkywalkerArbiterType(r),s)})}o.prototype.subscribe=function(p,q,r,s,t){var u=this.subscribeInternal(p,q,r,s,t),v=p.substr(0,p.lastIndexOf("/"));if(!c("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK||c("RTIFriendFanoutConfig").topicPrefixes.indexOf(v)<0)return u;var w=p+"_user_id_"+c("CurrentUser").getID();this.subscribeInternal(w,q,r);return u};o.prototype.subscribeInternal=function(p,q,r,s,t){__p&&__p();var u,v=this;p||h(0);q||h(0);var w=this.getMaxSubscriptions(),x=Object.keys(this.$RTISubscriptionManager1).length-Object.keys(this.$RTISubscriptionManager3).length;if(x>=w){var u=function(){__p&&__p();var E=v.getEvictionBatchSize();if(E===0)return{v:null};var F=0;v.$RTISubscriptionManager2=v.$RTISubscriptionManager2.filter(function(p){__p&&__p();if(!this.isSubscribed(p)||this.$RTISubscriptionManager1[p].getState()!==i.SUBSCRIBE)return false;if(F===0&&x<w)return true;if(F<E)if(n(p)){this.unsubscribe(p);F++;x--;if(F>=E)F=0;return false}return true}.bind(v));if(v.$RTISubscriptionManager2.length===0&&x>=w)return{v:null}}();if(typeof u==="object")return u.v}r=r||{};r.locale=c("CurrentLocale").get();if(c("RTISubscriptionManagerConfig").assimilator){r.tierType=c("RTISubscriptionManagerConfig").assimilator.tierType;r.sandboxIP=c("RTISubscriptionManagerConfig").assimilator.sandboxIP;r.sandboxPort=c("RTISubscriptionManagerConfig").assimilator.sandboxPort;r.sandboxHostname=c("RTISubscriptionManagerConfig").assimilator.sandboxHostname}var y=new(c("RTISubscriptionData"))(p,q,0,r,s,t);if(this.isSubscribed(p)){var z=this.$RTISubscriptionManager1[p],A=JSON.stringify(y.getContext())===JSON.stringify(z.getContext());if(p in this.$RTISubscriptionManager3)if(A){y.setDirty(false);y.setSent(true);delete this.$RTISubscriptionManager3[p]}else this.flush();else{if(z&&z.getArbiterToken()){c("Arbiter").unsubscribe(z.getArbiterToken());z.setArbiterToken(null)}y.setDirty(z.isDirty());y.setSent(z.isSent());k(p)}}var B=new o.SubscriptionToken(y);this.$RTISubscriptionManager1[p]=y;this.$RTISubscriptionManager2.push(p);var C=c("ChannelConstants").getSkywalkerArbiterType(p),D=c("Arbiter").subscribe(C,function(E,event){var F=event.obj.length;for(var G=0;G<F;G++){var H={topic:p,payload:event.obj[G]};c("ErrorUtils").applyWithGuard(q,this,[H])}this.$RTISubscriptionManager12()}.bind(this));y.setArbiterToken(D);this.flush();return B};o.prototype.mutateContext=function(p,q){p||h(0);if(p in this.$RTISubscriptionManager1&&!(p in this.$RTISubscriptionManager3)){var r=this.$RTISubscriptionManager1[p];r.prepareMutateContext(q||{});this.flush()}};o.prototype.unsubscribe=function(p){__p&&__p();p||h(0);if(p in this.$RTISubscriptionManager1){var q=this.$RTISubscriptionManager1[p];q.prepareUnsubscribe();if(q.getArbiterToken()){c("Arbiter").unsubscribe(q.getArbiterToken());q.setArbiterToken(null)}this.$RTISubscriptionManager3[p]=true}};o.prototype.unsubscribeAll=function(){if(this.isReady()){var p={reset:"t"};this.$RTISubscriptionManager11.issueRequest("/sub",p,{},function(q){})}};o.prototype.activePing=function(){if(this.isReady()){var p={state:"active"};this.$RTISubscriptionManager11.issueRequest("/active_ping",p,{},function(q){})}};o.prototype.flush=function(){__p&&__p();var p,q=this;if(this.isReady()&&!this.$RTISubscriptionManager7){var r;(function(){__p&&__p();q.$RTISubscriptionManager7=true;q.$RTISubscriptionManager8=false;var s=[],t={},u=true;q.forEachSubscription(function(y,z){__p&&__p();if(z.isDirty()){if(z.getState()===i.MUTATE_CONTEXT)u=false;var A="subscriptions",B=t[A];if(!B){B=[];t[A]=B}s.push(z);z.setDirty(false);z.setSent(false);var C={topic:z.getTopic(),state:z.getState(),context:z.getContext()};B.push(C)}else u=false});if(u&&t.subscriptions&&t.subscriptions.length>0){var v=[];for(r=0;r<t.subscriptions.length;r++)if(t.subscriptions[r].state===i.SUBSCRIBE)v.push(t.subscriptions[r]);t.subscriptions=v;q.$RTISubscriptionManager9=true}var w=function(y){__p&&__p();var z=y.data!=null;if(this.$RTISubscriptionManager9&&z)this.$RTISubscriptionManager9=false;for(var A=0;A<s.length;A++){var B=s[A];B.setSent(z);B.setDirty(!z);if(B.getState()===i.SUBSCRIBE){var C=B.getSubscribeCallback();if(C!==null)c("ErrorUtils").applyWithGuard(C,this,[y])}else if(B.getState()===i.MUTATE_CONTEXT){if(z)B.setState(i.SUBSCRIBE)}else if(B.getState()===i.UNSUBSCRIBE)if(z)delete this.$RTISubscriptionManager3[B.getTopic()]}this.deleteSubscriptions(function(B){return B.getState()===i.UNSUBSCRIBE&&B.isSent()});this.$RTISubscriptionManager7=false;if(this.$RTISubscriptionManager8){this.$RTISubscriptionManager8=false;this.flush()}}.bind(q);if(Object.keys(t).length>0){var x={};if(q.$RTISubscriptionManager9)x.reset="t";q.$RTISubscriptionManager11.issueRequest("/sub",x,t,w)}else q.$RTISubscriptionManager7=false})()}else{this.$RTISubscriptionManager8=true;if(this.$RTISubscriptionManager11===null)this.getCurrentSession()}};o.prototype.deleteSubscriptions=function(p){p||h(0);var q=[];this.forEachSubscription(function(s,t){if(p.apply(this,[t]))q.push(s)});for(var r=0;r<q.length;r++)delete this.$RTISubscriptionManager1[q[r]]};o.prototype.forEachSubscription=function(p){p||h(0);for(var q in this.$RTISubscriptionManager1)if(Object.prototype.hasOwnProperty.call(this.$RTISubscriptionManager1,q))p.apply(this,[q,this.$RTISubscriptionManager1[q]])};o.prototype.getSubscriptions=function(){var p=[];this.forEachSubscription(function(q,r){p.push(r)});return p};o.prototype.isUnflushedUnsubscribe=function(p){p||h(0);return p in this.$RTISubscriptionManager3};o.prototype.isSubscribed=function(p){p||h(0);return p in this.$RTISubscriptionManager1};o.prototype.isReady=function(){if(this.$RTISubscriptionManager11&&this.$RTISubscriptionManager4!==null&&this.$RTISubscriptionManager4&&this.$RTISubscriptionManager10)return true;return false};o.prototype.getCurrentSession=function(){c("Arbiter").inform(c("ChannelConstants").GET_RTI_SESSION_REQUEST)};o.prototype.getEvictionBatchSize=function(){if(c("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(c("RTISubscriptionManagerConfig").config,"eviction_batch_size"))return c("RTISubscriptionManagerConfig").config.eviction_batch_size;else return c("ChannelConstants").DEFAULT_EVICTION_BATCH_SIZE};o.prototype.getMaxSubscriptions=function(){if(c("RTISubscriptionManagerConfig").config&&Object.prototype.hasOwnProperty.call(c("RTISubscriptionManagerConfig").config,"max_subscriptions"))return c("RTISubscriptionManagerConfig").config.max_subscriptions;else return c("ChannelConstants").DEFAULT_MAX_SUBSCRIPTIONS};o.prototype.$RTISubscriptionManager12=function(){__p&&__p();var p=null,q=null;if(c("RTISubscriptionManagerConfig").config){p=c("RTISubscriptionManagerConfig").config.www_idle_unsubscribe_min_time_ms;q=c("RTISubscriptionManagerConfig").config.www_idle_unsubscribe_times_ms}if(!p||!q)return;if(c("UserActivity").isActive(p))return;this.forEachSubscription(function(r,s){var t=s.getTopic(),u=false,v=j(t);if(v!==null&&n(t))if(q!==null&&typeof q==="object"&&q[v]!==undefined)u=!c("UserActivity").isActive(q[v]);else u=false;if(u)this.unsubscribe(t)}.bind(this))};o.SubscriptionToken=function(){__p&&__p();function p(q){"use strict";this.$SubscriptionToken1=q}p.prototype.getContext=function(){"use strict";return this.$SubscriptionToken1.getContext()};p.prototype.mutateContext=function(q){"use strict";var r=this.$SubscriptionToken1.getTopic();o.mutateContext(r,q)};p.prototype.unsubscribe=function(){"use strict";__p&&__p();var q=this.$SubscriptionToken1.getUnsubscribeHook();if(q)q();var r=this.$SubscriptionToken1.getTopic();o.unsubscribe(r);var s=r.substr(0,r.lastIndexOf("/"));if(!c("RTIFriendFanoutConfig").passFriendFanoutSubscribeGK||c("RTIFriendFanoutConfig").topicPrefixes.indexOf(s)<0)return;o.unsubscribe(r+"_user_id_"+c("CurrentUser").getID())};p.prototype.fastUnsubscribe=function(){"use strict";this.unsubscribe();o.flush()};return p}();c("Run").onUnload(function(){o.unsubscribeAll()});o.PULL_HINT_DELAY_MILLIS=1e4;Object.keys(o.prototype).forEach(function(p){o[p]=function(){var q=o;return o.prototype[p].apply(q,arguments)}});o.call(o);f.exports=o}),null);