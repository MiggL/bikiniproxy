define(["jquery","wcs.product-views","jquery-ui","domReady","wcs.utils","wcs.net","wcs.alert","wcs.product-context","wcs.teaser","foundation.core","foundation.reveal","shared.lazyload","shared.wheretogetit","jquery.tooltipster","promise!wcs.lang-msg","coremetrics.wcs.product-detail","wcs.product-detail-read-more"],function(e,s,o,j,t,r,w){var b=false;var k=function(){if(b){console.log("productDetailsDomEventBindings")}e(".share-button").mouseover(function(x){f()});e(".reveal-modal").on("click",c);e(".delivery-information").on("click",d);e("body").on("click",".pr-snippet-write-first-review .pr-snippet-link, .pr-snippet-write-review .pr-snippet-link, .pr-write-review-link",u)};var g=function(){if(b){console.log("populateProductDetailsDrawer")}var D=e(".drawer-description-content-list-js"),C=D.attr("data-list-content")||"",A=WCS_CONFIG.PDP.productDescriptionListDelimiter,y=C.split(A),x=y.length>0&&y[0]!=="",z,B=e("<"+WCS_CONFIG.PDP.productDescriptionListContainerTag+">");if(x){for(i=0;i<y.length;i++){z=e("<"+WCS_CONFIG.PDP.productDescriptionListItemTag+">");z.html(y[i]);B.append(z)}D.append(B).removeClass("hidden")}};var n=(function(){if(b){console.log("toggleProductDetailsDrawer")}var x={};x.open=function(A){var y=e(A);var z=e(".product-details-drawer-js");z.slideToggle("slow");y.parent().parent().toggleClass("expanded")};x.enableClicking=function(){e(".product-details-drawer-button-js").on("click",function(){x.open(this)});e(".drawer-close-btn-js").on("click",function(){e(".product-details-drawer-button-js").trigger("click")})};return x}());var l=(function(){if(b){console.log("toggleProductDetailsDrawerAccordion")}var x={};x.open=function(A){var y=e(A);var z=y.parent().siblings(".accordion-drawer-content");z.slideToggle("slow");y.parent().parent().toggleClass("collapsed")};x.enableClicking=function(){e(".accordion-close-btn-js").on("click",function(){l.open(this)})};return x})();var q=(function(){if(b){console.log("toggleProductFeature")}var x={};x.open=function(z){var y=e(z).closest("ul.feature .product-feature-js");y.find(".show-more-separator, .show-more, .flex-video").fadeToggle()};x.enableClicking=function(){e(".product-feature-button-js").on("click",function(){q.open(this)})};return x}());var h=(function(){if(b){console.log("toggleProductFeatures")}var x={};x.open=function(z){var y=e(z).closest("ul.feature");y.find(".more-features-js").slideToggle("slow",function(){e(".show-more-features-js").fadeOut()})};x.enableClicking=function(){e(".show-more-features-js").on("click",function(){h.open(this)})};return x}());function v(x){if(b){console.log("toggleText")}var y=x.data("alt-text");x.data("alt-text",x.text()).text(y)}function m(){if(b){console.log("openDetailsDrawer")}e(".product-details-drawer-js").show();v(e(".product-details-drawer-button-js"))}function p(){if(b){console.log("resizeShareThis")}var x=e(".share-control-item-js").width();var y=0;e(".share-control-container-js").first().find(".share-control-item-js").each(function(){y=y+1});x=x*y+10*(y+1);e(".share-control-container-js").width(x)}function f(){if(b){console.log("appendWaneloScript")}if(!e(".wanelo-script-appended").length){e(".wanelo-save-button").addClass("wanelo-script-appended");var x=document.createElement("script");x.type="text/javascript";x.src="//cdn-saveit.wanelo.com/bookmarklet/3/save.js";e(".wanelo-save-button").append(x)}}function d(x){if(main.screen.size()!=="small"){e(".shipping-popup").addClass("medium");e(".shipping-popup").foundation("reveal","open")}else{e(".delivery-information").addClass("hide");e(".shipping-popup").removeClass("reveal-modal");e(".shipping-popup").addClass("reveal-modal-mobile-show");e(".close-reveal-modal-js").addClass("close-reveal-modal-mobile-js");e(".close-reveal-modal-js").one("click",function(){e(".shipping-popup").removeClass("reveal-modal-mobile-show").addClass("reveal-modal-hide");e(".delivery-information").removeClass("hide")})}}function u(z){z.preventDefault();var x=e(this).attr("href"),A=e(".product-info-title-js").text(),y="width=1040,height=680,resizable=yes,scrollbars=yes,location=no,status=no,menubar=no";window.open(x,A,y)}function c(y){var x=e(y.target).parents("form");if(e(y.target).is(".notify-me-submit-js")&&x.valid()){y.preventDefault();r.submitForm(".notify-me-form-js").done(function(z){e(".reveal-modal").foundation("reveal","close");e(".notify-me-response-js").removeClass("error").addClass("message success").html(z.message)}).fail(function(z,A){e(".reveal-modal").foundation("reveal","close");e(".notify-me-response-js").removeClass("success").addClass("message error").html(LANG_MSG.GENERIC_ERROR_MESSAGE)})}}function a(){var C="olapic_specific_widget",y=OLAPIC_SETTINGS.CUSTOMER_ID,G=e(".product-form-js").attr("data-olapic-partnumber"),A=OLAPIC_SETTINGS.CAROUSEL_WIDGET_ID,B=true,z=false,D=false,E=document.createElement("script"),F="",x=F===""?document.domain+document.location.pathname:F;E.async=true;E.type="text/javascript";E.src=encodeURI("http://widgets.photorank.me/automator?e="+C+"&customer_id="+y+"&url="+encodeURIComponent(x)+"&title="+encodeURIComponent(document.title)+"&widget="+A+"&tags="+G+"&tag_based="+B+"&cat_based="+z+"&collection="+D);(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(E)}j(function(){k();s.setupPDP();s.handleContextChangePDP();p();g();l.enableClicking();m();if(typeof OLAPIC_SETTINGS!=="undefined"&&OLAPIC_SETTINGS.SHOW_CAROUSEL==="true"){a()}if(WCS_CONFIG.get("PDP::isBloomReachPdpEnabled")&&WCS_CONFIG.get("global::isBloomReachMoreLinkEnabled")){t.showSearchWidgetMoreLink()}var x=t.getParamFromHash("action");if(x=="findInStore"){e(".find-store-js").click()}var y=e(".br-sf-widget");if(y.length===4){y.addClass("br-sf-widget-product-4")}})});