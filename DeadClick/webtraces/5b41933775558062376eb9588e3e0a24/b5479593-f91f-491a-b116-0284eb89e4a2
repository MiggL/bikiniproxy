define(["jquery"],function(a){jQuery.cookie=function(a,b,c){if(arguments.length>1&&String(b)!=="[object Object]"){c=jQuery.extend({},c);if(b===null||b===undefined)c.expires=-1;if(typeof c.expires=="number"){var d=c.expires,e=c.expires=new Date;e.setDate(e.getDate()+d)}return b=String(b),document.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};var f,g=c.raw?function(a){return a}:decodeURIComponent;return(f=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?g(f[1]):null};var b=function(){var b=a('meta[name = "turl"]').attr("content")||(a('meta[name = "paid-content-url"]').attr("content")?"http://"+document.domain+a('meta[name = "paid-content-url"]').attr("content"):undefined),c=b,d=!!document.domain.match("pw-stage.time.com"),e=d?"https://qa-auth.time.com/logout.php":"https://auth.time.com/logout.php",f='<div id="allAccess"><p class="constrain">You are logged into TIME magazine <em>ALL</em> ACCESS <a href="'+e+"?turl="+window.location+'">Log Out</a></p></div>',g=a('meta[name = "rurl"]').attr("content")||document.location.href+"#paid-wall",h=b!==undefined,i=a.cookie("TimeSub")||null,j=i!==null,k=a.cookie("TimeCpgn")||null,l=a('meta[name = "magazine"]').attr("content")==="toc",m=k!==null,n=a.browser.mozilla&&parseFloat(a.browser.version)<4,o=a.cookie("time-status")||null,p=a.cookie("time_visit")||null,q=p!==null,r=new Date;return r.setTime(r.getTime()+18e5),setFreqCookie=function(){a.cookie("time_visit","yes",{expires:r,path:"/",domain:".time.com"})},$html=a("html"),deleteErrorCookie=function(){a.cookie("time-status",null,{path:"/",domain:".time.com"})},gotToPaidContent=function(){window.location=b},renderAllAccessDiv=function(){a(function(){a("#allAccess").length||a("#site-header").prepend(f)})},{paidContentUrl:b,isLoggedIn:j,isFreqCapped:q,init:function(){j?h&&!l?gotToPaidContent():renderAllAccessDiv():m&&(h&&!l?gotToPaidContent():renderAllAccessPromoDiv()),q||setFreqCookie()}}}();return b})