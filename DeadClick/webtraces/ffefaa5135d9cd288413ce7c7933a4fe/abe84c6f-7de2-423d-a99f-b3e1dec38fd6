define(["jquery","wcs.utils"],function(e,d){var b="ViewerController",a=window.debug||false;var c=function(f){this.element=f};c.prototype={init:function(){if(a){console.log("ViewerController.prototype.init")}this.addEventHandlers();this.updateHeroIndex()},updateHeroIndex:function(){if(a){console.log("ViewerController.prototype.updateHeroIndex")}var f=d.getParamFromHash("hero"),g=e(this.element);if(!isNaN(f)&&g.attr("data-viewer-state")==="ready"){g.attr("data-viewer-options",JSON.stringify({media:{set:{index:f}}}))}},updateHeroIndexOnSwatchChange:function(f){if(a){console.log("ViewerController.prototype.updateHeroIndexOnSwatchChange")}var g=d.getParamFromHash("hero"),h=e(this.element);if(!isNaN(g)&&h.attr("data-viewer-state")==="ready"){window.history.replaceState(null,null,"#hero="+f)}},addEventHandlers:function(){if(a){console.log("ViewerController.prototype.addEventHandlers")}var f=this;window.addEventListener("init.viewer.complete.ready",function(g){if(a){console.log("ViewerController.prototype.addEventHandlers","init.viewer.complete.ready")}f.updateHeroIndex()},false);window.addEventListener("viewer.activeIndex.change",function(g){if(a){console.log("ViewerController.prototype.addEventHandlers","viewer.activeIndex.change")}f.updateHeroIndexOnSwatchChange(g.detail.activeIndex)},false);window.addEventListener("hashchange",function(g){if(a){console.log("ViewerController.prototype.addEventHandlers","hashchange")}f.updateHeroIndex()},false)}};e.fn.ViewerController=function(f){return this.each(function(){var g=e(this).data(b);if(!g){g=new c(this,f).init();e(this).data(b,g)}})}});