s7getClientLibsOverride=function(){return{root:"../../../../../../../../s7sdk/3.3/js/s7sdk/utils/Utils.js"}};/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s*/,"").replace(/\s*$/,"")}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){for(var b=0;b<this.length;b++){if(this[b]===c){return b}}return -1}}if(!Array.prototype.map){Array.prototype.map=function(f,c){var b=new Array(this.length);for(var d=0,e=this.length;d<e;d++){if(d in this){b[d]=f.call(c,this[d],d,this)}}return b}}if(!window.console){window.console={log:function(){}}}window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c,b){window.setTimeout(c,1000/60)}})();function s7getCurrentScriptNoStack(){if(document.currentScript){return document.currentScript}else{var b=document.scripts;if(b.length===0){return null}if(b.length===1){return b[0]}if("readyState" in b[0]){for(var c=b.length;c--;){if(b[c].readyState==="interactive"){return b[c]}}}var d=null;for(var c=0;c<b.length;c++){var e=b[c].hasAttribute("data-src")?b[c].getAttribute("data-src"):b[c].getAttribute("src");if(e&&e.indexOf("s7sdk/utils/Utils.js")>0){if(/\/(1\.0)|(2\.([0-9])|(10))\//i.test(e)){}else{if(d==null){d=b[c]}else{d=null;break}}}}return d}}function s7getNameSpacePrefixFromStack(){var b;try{throw new Error()}catch(d){b=d.stack}var c=/[\?]+.*namespace=([^&#:]+):[^\r\n]+(?:\r|\n)?$/i.exec(b);if((c!=null)&&(c.length==2)){return c[1]}else{return null}}function s7getCurrentScript(){var g=s7getCurrentScriptNoStack();if(g==null){var c=s7getNameSpacePrefixFromStack();if(c!=null){var b=document.scripts;for(var e=0;e<b.length;e++){var h=b[e].hasAttribute("data-src")?b[e].getAttribute("data-src"):b[e].getAttribute("src");if(h&&h.indexOf("s7sdk/utils/Utils.js")>0){var d=/[^\?]+[\?]+.*namespace=([^&#]+)/i.exec(h);var f="";if((d!=null)&&(d.length==2)){f=d[1]}if((f==c)||((f=="")&&(c==""))){return b[e]}}}}return null}else{return g}}function s7getCurrentNameSpacePrefix(){var b=s7getCurrentScriptNoStack();if(b!=null){var e=b.hasAttribute("data-src")?b.getAttribute("data-src"):b.getAttribute("src");var d=/[^\?]+[\?]+.*namespace=([^&#]+)/i.exec(e);if((d!=null)&&(d.length==2)){return d[1]}}else{var c=s7getNameSpacePrefixFromStack();if(c!=null){return c}}return""}function s7getCurrentNameSpace(){var b=s7getCurrentNameSpacePrefix();if(b==""){return window.s7sdk}else{return window[b].s7sdk}}(function(){var b=s7getCurrentNameSpacePrefix();var c=s7getCurrentScript();if(b==""){window.s7sdk={namespacePrefix:"",utilsScriptElement:c}}else{if(typeof window[b]=="undefined"){window[b]={}}if(!window[b].s7sdk){window[b].s7sdk={};window[b].s7sdk.namespacePrefix=b;window[b].s7sdk.utilsScriptElement=c}}})();(function(b){if(!b){b={}}else{if(typeof b!="object"){throw new Error("Cannot initialize a root 's7sdk' package. s7sdk is not an object")}}var c=s7getCurrentScript();if((c!=null)&&!c.hasAttribute("data-src")&&(c.getAttribute("src").indexOf("s7sdk/utils/Utils.js")!=-1)){c.setAttribute("data-src",c.getAttribute("src"));c.setAttribute("src","")}if(!b.pkg){b.pkg=function(f){var g,j,e=b,h=f.split(".");for(g=1;g<h.length;g++){j=h[g];if(!e[j]){e[j]={}}e=e[j]}}}if(!b.Util){b.Util={write:function(e){document.write(e)},byId:function(e){return document.getElementById(e)},getHead:function(){return document.getElementsByTagName("head")[0]},borrowMethods:function(h,g,k){var j=h.__proto__||(h.constructor?h.constructor.prototype:Object.prototype);var i=g.__proto__||(g.constructor?g.constructor.prototype:Object.prototype);for(var e in j){if(typeof j[e]!="function"){continue}var f=i.superclass;if(f){f=f.prototype}if((i.hasOwnProperty(e)==false)&&(f&&f.hasOwnProperty(e)==false)){i[e]=j[e];b.Class.override(k,e,function(){return arguments.callee.parent.apply(this.component,arguments)})}}},getGenericModifierObject:function(g,f){var e={};var i=g.getModifiers();for(mod in i){if(g.getParam(mod)){e[mod.toLowerCase()]=g.getParam(mod)}}e.set=function k(l,m){this[l.toLowerCase()]=m};e.get=function h(l,m){if(this[l.toLowerCase()]){return this[l.toLowerCase()]}if(m){return m}return""};e.originalSettings=f;e.i18n=f.i18n;e.getLocalizedText=f.getLocalizedText;j(e,f);function j(m,l){if(!m.trackLoad){m.trackLoad=l.trackLoad}if(!m.sendLoadMessage){m.sendLoadMessage=l.sendLoadMessage}if(!m.createLoadData){m.createLoadData=l.createLoadData}if(!m.params){m.params=l.params}}return e},resolveModifier:function(i,h,e,f){var g=b.Util.getGenericModifierObject(e,f);if(i&&h){g.set(i,h)}return g},assignListeners:function(g,e){for(var f in g){for(var h in g[f]){if(g[f]){if(g[f][h].handler){e.addEventListener(f,g[f][h].handler,g[f][h].useCapture)}}}}},copyListeners:function(e){if(e){var h={};var g=e.events;for(var f in g){h[f]=g[f]}return h}},removeTags:function(e){while(e.hasChildNodes()){e.removeChild(e.lastChild)}},byFirstTag:function(f){var e=document.getElementsByTagName(f);if(e.length>0){return e[0]}else{return undefined}},wrapContext:function(f,e){return function(){f.apply(e,Array.prototype.slice.call(arguments,0))}},noop:function(){},objByClassName:function(i,o){function j(r){return r.replace(/\./g,"")}function p(t){var s="";for(var r=0;r<t.length;r++){s+=j(t[r])+" "}return s}function l(x,w){var v=x.replace(/(^\s+|\s+$)/g,"").split(" ");if(v.length>1){var u=v.shift();var t=q(u,w);for(var s=0;s<t.length;s++){var r=t[s];return l(v.join(" "),r)}}else{return q(x,w)}}function q(t,x){if(!x){x=document}var r=[],z;if(x.getElementsByClassName){z=x.getElementsByClassName(t);for(var u=0,v=z.length;u<v;u++){r[u]=z[u]}}else{t=t.split(/\s+/);var y,s=t.length,w,z=x.getElementsByTagName("*"),v=z.length;for(var u=0;u<s;u++){t[u]=RegExp("\\b"+t[u]+"\\b")}classnameLoop:while(v){y=z[--v];w=y.className;if(w){for(var u=0;u<s;u++){if(t[u].test(w)==false){continue classnameLoop}}r.push(y)}}}return r}try{var n=i.split(" ");var h=j(i);if(h==o.className){return[o]}var k=o.className.split(" ");var f;if(n.length>0){f=j(n.shift())}var g=p((n.length==0)?[f]:n);var e=null;e=l(g,o);return e}catch(m){throw new Error("Unable to parse "+i+". "+m)}},cssPropToJSProp:function(j){var e=(j.indexOf("-")>0);if(e){var g=j.split("-");if(g.length>1){var h="";for(var f=0;f<g.length;f++){if(f==0){h+=g[f]}else{h+=g[f].charAt(0).toUpperCase()+g[f].slice(1)}}return h}else{return a}}else{return j}},byTagAndAttributes:function(k,g){var j,e,l,h=[],f=document.getElementsByTagName(k);for(j=0;j<f.length;j++){l=true;for(e in g){if(Object.prototype.hasOwnProperty.call(g,e)&&f[j].getAttribute(e)!==g[e]){l=false;break}}if(l){h.push(f[j])}}return h},createElement:function(h,f){var g=document.createElement(h),e;for(e in f){if(f.hasOwnProperty(e)&&f.propertyIsEnumerable(e)){g.setAttribute(e,f[e])}}return g},elementInDOM:function(e){while(e=e.parentNode){if(e==document){return true}}return false},resolveURL:function(f,e){if(/^\s*http[s]?:\/\//.test(e)){return e}else{return this.normalizeUrl(f)+this.normalizeAsset(e)}},normalizeAsset:function(f){var e=f;if(typeof e!="undefined"&&e!=null&&e.length!=0){if(typeof e!="undefined"&&e!=null&&e.length!=0){e=e.replace(/^(?:\/|%2f|%2F)+/,"")}}return e},normalizeUrl:function(f){var e=f;if(typeof e!="undefined"&&e!=null){e=e.replace(/%2f|%2F/g,"/");while(e.length>0&&e.lastIndexOf("/")==(e.length-1)){e=e.substr(0,e.length-1)}e+="/"}return e},lib:{scriptElement:function(){return b.utilsScriptElement}(),root:function(){var f="js/";var h="";if(b.utilsScriptElement){var g=b.utilsScriptElement.hasAttribute("data-src")?b.utilsScriptElement.getAttribute("data-src"):b.utilsScriptElement.getAttribute("src");if(g){h=g}}if(typeof(s7getClientLibsOverride)=="function"){h=h.substr(0,h.lastIndexOf("/")+1);h+=s7getClientLibsOverride().root;e=h.indexOf("s7sdk/utils/Utils.js");f=h.substring(0,e);return f}var e=h.indexOf("s7sdk/utils/Utils.js");if(e>=0){f=h.substring(0,e)}else{if(b&&b.Logger){b.Logger.log(b.Logger.SEVERE,"Utils.js not found, using default lib.root = %0",f)}}return f}(),jsList:[],isLoaded:function(f){for(var e=0;e<b.Util.lib.jsList.length;e++){if(b.Util.lib.jsList[e].name==f){return true}}return false},flagFileLoaded:function(e){},flagFile:function(f){for(var e=0;e<b.Util.lib.jsList.length;e++){if(b.Util.lib.jsList[e].name==f){b.Util.lib.jsList[e].loaded=true;break}}},isAllJSLoaded:function(){for(var f=0;f<b.Util.lib.jsList.length;f++){if(!b.Util.lib.jsList[f].loaded){return false}}if(b.Util.css.defaultCSSText.text.length>0){var e=b.Util.createElement("style",{type:"text/css",media:"screen","data-description":"Scene7DefaultCSS"});b.Util.css.addDefaultStyleCSS(b.Util.css.defaultCSSText.text,e);b.Util.css.defaultCSSText.text=""}b.Event.dispatch(document.body,"S7JSLOAD",false);return true},checkJS:function(){if(!b.Util.lib.isAllJSLoaded()){setTimeout(b.Util.lib.checkJS,100)}},addJS:function(f){if(!b.Util.lib.isLoaded(f)){var e={name:f,loaded:false};b.Util.lib.jsList.push(e)}},include:function(h,g){var e=b.Util.lib.parsePkg(h);if(typeof g=="undefined"){g=true}if(!b.Util.lib.isLoaded(h)){if(g){if(b.Util.byFirstTag("head")){var f=document.createElement("script");f.setAttribute("language","javascript");f.setAttribute("type","text/javascript");var i=b.Util.lib.root+e+".js";if(b.namespacePrefix!=""){i+="?namespace="+b.namespacePrefix}f.setAttribute("src",i);f.setAttribute("id",h);if((b.browser.name=="ie"&&b.browser.version.major>=11)||b.browser.name!="ie"){f.onload=function(){b.Util.lib.flagFile(this.id);f.onload=null}}else{f.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){b.Util.lib.flagFile(this.id);f.onreadystatechange=null}}}b.Util.byFirstTag("head").appendChild(f);b.Util.lib.addJS(h)}}else{b.Util.write('<script language="javascript" type="text/javascript" src="'+b.Util.lib.root+e+'.js"><\/script>');b.Util.lib.addJS(h)}}},parsePkg:function(e){return e.replace(/\./g,"/")}},css:{root:"",defaultCSS:"",list:{},inPageCSS:{obj:null,classes:[]},defaultCSSText:{text:"",component:{}},include:function(f,h,e,i){e=(typeof e=="boolean")?e:false;var g=b.Util.createElement("link",{media:(h?h:"all"),href:f,rel:"stylesheet",type:"text/css",pmid:(i?i:"")});if("onreadystatechange" in g){g.onreadystatechange=function(){if(g.readyState=="loaded"||g.readyState=="complete"){b.Util.css.list[g.href]=true;g.onreadystatechange=null}}}else{if("onload" in g){g.onload=function(){b.Util.css.list[g.href]=true;g.onload=null}}}b.Util.css.list[g.href]=false;if(e===true||b.Util.getHead()!==g.parentNode){b.Util.getHead().appendChild(g)}else{b.Util.getHead().insertBefore(g,b.Util.lib.scriptElement.nextSibling)}},checkSheetLoaded:function(f){var j,g;for(var h=0;h<document.styleSheets.length;h++){j=document.styleSheets[h];g=false;try{g=(b.browser.name!="ie")&&(typeof j.cssRules==="object")}catch(k){if((k.name==="NS_ERROR_DOM_SECURITY_ERR")||(k.name==="SecurityError")){g=true}}if(j.href===f&&g){return true}}return false},isAllLoaded:function(){var e,f=b.Util.css.list;for(e in f){if(!f.hasOwnProperty(e)){continue}if(f[e]===true){}else{if(b.Util.css.checkSheetLoaded(e)===true){f[e]=true}else{return false}}}return true},add:function(e,f){if(!b.Util.css.inPageCSS.obj){b.Util.css.inPageCSS.obj=document.createElement("style");b.Util.css.inPageCSS.obj.setAttribute("type","text/css");b.Util.css.inPageCSS.obj.setAttribute("media","all");b.Util.byFirstTag("head").appendChild(b.Util.css.inPageCSS.obj);if(b.browser.name=="ie"){b.Util.css.inPageCSS.obj.styleSheet.cssText=""}else{b.Util.css.inPageCSS.obj.innerHTML=""}}if(b.Util.css.inPageCSS.classes.indexOf(e)<0){b.Util.css.inPageCSS.classes.push(e);if(b.browser.name=="ie"){b.Util.css.inPageCSS.obj.styleSheet.cssText+=e+"{"+f+"} "}else{b.Util.css.inPageCSS.obj.innerHTML+=e+"{"+f+"} "}}},getCss:function(h,e,k,j,f,g){var i=[];if(j){i.push({className:j,id:k})}i.push({className:h,id:(j?null:k),attributes:g});f=(f&&b.Util.isElement(f))?f:document.body;return b.Util.css.getCssExt(f,i,e)},getCssExt:function(e,g,m){var j=(b.namespacePrefix=="")?false:true;var n=null;var k=null;for(var h=g.length-1;h>=0;h--){var l=g[h];tempElm=b.Util.createElement("div",l.attributes);tempElm.className=l.className;if(l.id){tempElm.setAttribute("id",l.id)}if(j){tempElm.setAttribute("data-namespace",b.namespacePrefix)}if(n==null){n=tempElm}if(k!=null){tempElm.appendChild(k)}k=tempElm}e.appendChild(k);var f=b.Util.getStyle(n,m);e.removeChild(k);return f},createCssRuleText:function(h,g){var f=(b.namespacePrefix=="")?"":"[data-namespace='"+b.namespacePrefix+"']";var i,e=f+h+" {\n";for(i in g){if(Object.prototype.hasOwnProperty.call(g,i)){e+="\t"+i+":"+g[i]+";\n"}}e+=" }\n";return e},createCssImgUrlText:function(f){var e=b.Util.lib.root;if(e.substr(e.length-3,3)==="js/"){e=e.substr(0,e.length-3)+"images/sdk/"}else{throw new Error("Unexpected SDK root URL!")}return"url("+e+f+")"},setCSSAttributeSelector:function(e,f,g){e.setAttribute(f,g);if(b.browser.name==="ie"){e.className=e.className}},addDefaultStyleCSS:function(g,e){function f(){if(!e.parentNode){b.Util.getHead().insertBefore(e,b.Util.getHead().firstChild)}}var h=document.createTextNode(g);if(b.browser.name==="ie"){f()}if(e.styleSheet&&!("textContent" in e)){e.styleSheet.cssText=h.nodeValue}else{e.appendChild(h)}f()},addDefaultCSS:function(h,f){if(f in b.Util.css.defaultCSSText.component){return}b.Util.css.defaultCSSText.component[f]=true;if(b.browser.name==="ie"&&b.browser.version.major<11){var h="\r\n/*"+f+"*/\r\n"+h;b.Util.css.defaultCSSText.text+=h}else{var e={type:"text/css",media:"screen","data-description":"Scene7DefaultCSS","data-component":f};if(b.namespacePrefix!=""){e["data-namespace"]=b.namespacePrefix}var g=b.Util.createElement("style",e);b.Util.css.addDefaultStyleCSS(h,g)}},createCssAnimationText:function(h,i,g,e){var m="@-webkit-keyframes "+h+" {\n";var k="@-webkit-keyframes "+h+" {\n";var l="@-webkit-keyframes "+h+" {\n";var f="0% {\n"+i+":"+g+";\n}100% {\n"+i+":"+e+";\n}\n}";m+=f;k+=f;l+=f;var j=(m+k+l);return j},forceCSSEval:function(){var f=b.Util.getHead().childNodes;for(var e=0;e<f.length;e++){var h=f[e];if(h.nodeName.toUpperCase()=="LINK"||h.nodeName.toUpperCase()=="STYLE"){var g=h.getAttribute("type");h.setAttribute("type","none");if(g){h.setAttribute("type",g)}else{h.removeAttribute("type")}}}}},require:function(e){b.Util.lib.include(e,true)},addObj:function(e,k,h,g,f){var j=(e==null?document.body:document.getElementById(e));var i=b.Util.createObj(k,h,g,f);j.appendChild(i)},createObj:function(m,h,g,f){var k=document.createElement(h);if(m!=null){k.setAttribute("id",m)}var j=(g==null?[]:g.split(";"));for(var e=0;e<j.length;e++){var l=j[e].split(":");if(l.length>1){k.style[b.Util.cssParse(l[0])]=l[1]}}if(f!=null){k.className=f}return k},createUniqueId:function(){if(!b.Util.createUniqueId.count){b.Util.createUniqueId.count=0}return(b.namespacePrefix==""?"":b.namespacePrefix+"_")+(b.Util.createUniqueId.count++).toString(16).toUpperCase()},cssParse:function(g){if(g.indexOf("-")<0){return g}var f=g.split("-");for(var e=1;e<f.length;e++){f[e]=f[e].charAt(0).toUpperCase()+f[e].slice(1)}return f.join("")},setObjSize:function(g,e,f){if(b.Util.isNumber(e)){g.style.width=e+"px"}if(b.Util.isNumber(f)){g.style.height=f+"px"}},setObjPos:function(f,e,g){if(b.Util.isNumber(e)&&b.Util.isNumber(g)){f.style.position="absolute";f.style.left=e+"px";f.style.top=g+"px"}},getScrollXY:function(){var f=0,e=0;if(b.browser.device.name=="iphone"&&b.browser.device.version>3){return{x:f,y:e}}if(typeof(window.pageYOffset)=="number"){e=window.pageYOffset;f=window.pageXOffset}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){e=document.body.scrollTop;f=document.body.scrollLeft}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){e=document.documentElement.scrollTop;f=document.documentElement.scrollLeft}}}return{x:f,y:e}},getObjPos:function(i){var e=0;var j=0;var g=0;var f=0;if(i.getBoundingClientRect){g=b.Util.getStyle(i,"border-left-width");f=b.Util.getStyle(i,"border-top-width");if(b.Util.isNumber(g)&&(g!="")){e+=parseInt(g)}if(b.Util.isNumber(f)&&(f!="")){j+=parseInt(f)}var h=i.getBoundingClientRect();e+=h.left+b.Util.getScrollXY().x;j+=h.top+b.Util.getScrollXY().y}else{while(i!=null){g=b.Util.getStyle(i,"border-left-width");f=b.Util.getStyle(i,"border-top-width");if(b.Util.isNumber(g)&&(g!="")){e+=parseInt(g)}if(b.Util.isNumber(f)&&(f!="")){j+=parseInt(f)}e+=i.offsetLeft;j+=i.offsetTop;i=i.offsetParent}}return{x:e,y:j}},getEventPos:function(g){var f=0;var h=0;if(g.touches){if(g.touches.length>0){f=g.touches[0].pageX;h=g.touches[0].pageY}else{f=g.changedTouches[0].pageX;h=g.changedTouches[0].pageY}}else{if(g.pageX){f=g.pageX;h=g.pageY}else{f=g.clientX+document.documentElement.scrollLeft;h=g.clientY+document.documentElement.scrollTop}}return{x:f,y:h}},canvasPool:[],getCanvas:function(){b.Logger.log(b.Logger.FINEST,"getCanvas start pool size %0",b.Util.canvasPool.length);if(b.Util.canvasPool.length<1){return b.Util.createObj(null,"canvas",null,null)}return b.Util.canvasPool.pop()},releaseCanvas:function(e){e.width=0;e.height=0;b.Util.canvasPool.push(e);b.Logger.log(b.Logger.FINEST,"releaseCanvas end pool size %0",b.Util.canvasPool.length)},clearMatte:function(j,i,f,m,g,l){var e=j.width;var k=j.height;i.clearRect(0,0,f,k);i.clearRect(f,0,g,m);i.clearRect(f,m+l,g,k-(m+l));i.clearRect(f+g,0,e-(f+g),k)},isNumberType:function(e){return Object.prototype.toString.apply(e)==="[object Number]"},isNumber:function(e){return b.Util.isNumberType(e)&&!isNaN(e)},isNull:function(e){return(typeof e=="undefined"||e==null)},isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},isString:function(e){return Object.prototype.toString.apply(e)==="[object String]"},isBoolean:function(e){return Object.prototype.toString.apply(e)==="[object Boolean]"},isNonEmptyString:function(e){return b.Util.isString(e)&&e.length>0},isElement:function(f){try{return f instanceof HTMLElement}catch(g){return(f.nodeType===1)&&(typeof f==="object")&&(typeof f.style==="object")&&(typeof f.ownerDocument==="object")}},merge:function(){var e={},g,h;function f(j,i){for(var k in i){if(i.hasOwnProperty(k)){j[k]=i[k]}}}for(g=0;g<arguments.length;g++){h=arguments[g];if(h instanceof window.Object){f(e,h)}}return e},checkDefault:function(f,e){return(b.Util.isNull(f)||f==="")?e:f},checkDefaultText:function(f,e){return b.Util.isNull(f)?e:f},getStyle:function(g,h){var f="";if(window.getComputedStyle){f=document.defaultView.getComputedStyle(g,null).getPropertyValue(h)+""}else{if(g.currentStyle){var e=/(\-([a-z]){1})/g;if(h=="float"){h="styleFloat";if(e.test(h)){h=h.replace(e,function(){return arguments[2].toUpperCase()})}}else{if(h=="opacity"){return g.filters.alpha?(g.filters.alpha.opacity/100):1}}f=g.currentStyle[b.Util.cssParse(h)]?g.currentStyle[b.Util.cssParse(h)]+"":null}else{f=g.style[h]+""}}if(f&&f.indexOf("url(")==0){f=f.replace('url("',"");f=f.replace('")',"");f=f.replace("url(","");f=f.replace(")","")}return f},setOpacity:function(e,f){if(f<0){f=0}if(f>0.99){f=1}e.style.opacity=f;if(b.browser.name=="ie"){if((b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)&&(document.body.filters)){if(e.filters){if(e.filters.length>0){if(e.filters["DXImageTransform.Microsoft.Alpha"]){e.filters.item("DXImageTransform.Microsoft.Alpha").Opacity=Math.round(f*100)}else{e.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}}else{e.style.filter=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}}}}},convertColor:function(i,o){if(i&&i.length>0&&o&&o.length>0){var k=i.indexOf("rgb")==0;var f=i.indexOf("#")==0;var l=i.indexOf("0x")==0;if((k&&o=="rgb")||(f&&o=="hex")||(l&&o=="flash")){return i}else{if(k){var h=i.replace("rgb","");h=h.replace("(","");h=h.replace(")","");var m=h.split(",");var e=parseInt(m[0]);var j=parseInt(m[1]);var n=parseInt(m[2]);e=e.toString(16);j=j.toString(16);n=n.toString(16);e=(e.length==1?"0":"")+e;j=(j.length==1?"0":"")+j;n=(n.length==1?"0":"")+n;return(o=="hex"?"#":"0x")+e+j+n+(o=="flash"?"FF":"")}else{if(o=="rgb"){var h=i.replace("#","");h=h.replace("0x","");h=h.substring(0,6);var e=parseInt(h.substring(0,2),16);var j=parseInt(h.substring(2,4),16);var n=parseInt(h.substring(4,6),16);e=(!b.Util.isNumber(e)||e<0?0:(e>255?255:e));j=(!b.Util.isNumber(j)||j<0?0:(j>255?255:j));n=(!b.Util.isNumber(n)||n<0?0:(n>255?255:n));return"rgb("+e+","+j+","+n+")"}else{if(o=="hex"){var h=h.replace("0x","");return"#"+h.substring(0,6)}else{var h=i.replace("#","");return"0x"+h+"FF"}}}}}else{return i}},fade:function(l,f,h,k,j,i,g){if(typeof i=="undefined"&&f){i=b.Util.getStyle(l,"opacity");i=(!i||i==null||i.length==0?1:parseFloat(i))}else{if(typeof i=="undefined"&&!f){i=1}}if(typeof j=="undefined"&&f){j=i}else{if(typeof j=="undefined"&&!f){j=0}}var e=j+(f?-1:1)*0.05/h;if(!f){l.style.display=k}if(e>0&&e<1){l.style.opacity=i*e;b.Util.timeout(b.Util.fade,50,[l,f,h,k,e,i,g])}else{if(e>=1){l.style.opacity=1;if(typeof(g)!="undefined"){g()}}else{if(e<=0){l.style.display="none";if(typeof(g)!="undefined"){g()}}}}},isAbsPath:function(e){return(e&&((e.indexOf("http://")==0)||(e.indexOf("https://")==0)))},stripWhiteSpace:function(e){return e.replace(/[\s\t]+/g,"")},resizeToFitScreen:function(e){if(e){b.browser.screensize=b.browser.detectScreen();e.resize(b.browser.screensize.w,b.browser.screensize.h)}},adjustDevicePixelRatio:function(h,g,f){var e;if(h==-1||h==NaN){e=b.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1}else{if(h==0){e=1}else{if(h>0){e=b.Util.hasProperty(window,"devicePixelRatio")?window.devicePixelRatio:1;if(e>1&&(e*f*e*g>h)){e=1}}}}return e},hasProperty:function(e,f){return Boolean(f in e)},timeout:function(g,f,e){var h=function(){g.apply(this,e)};return setTimeout(h,f)},interval:function(g,f,e){var h=function(){g.apply(this,e)};return setInterval(h,f)},async:function(g,f,e){setTimeout(function(){g.apply(f,e||[])},0)},init:function(){b.Util.lib.checkJS()}}}if(!b.DEVICE){b.DEVICE=[[/iPhone/i,"iphone",[],""],[/iPod/i,"ipod",[],""],[/iPad/i,"ipad",[],""],[/Android/i,"android",[],""],[/Symbian/i,"symbian",[],""],[/(BlackBerry|BB10|PlayBook)/i,"blackberry",[[/BB10/i,"10"]],""],[/Palm/i,"palm",[],""],[/Windows CE; PPC/i,"pocketpc",[],""]]}if(!b.OS){b.OS=[[/Win/i,"win"],[/Android/i,"android"],[/Mac/i,"mac"],[/(iPhone|iPad)/i,"ios"],[/(BlackBerry|BB10|PlayBook)/i,"blackberry"]]}if(!b.browser){b.browser={raw:{ua:navigator.userAgent.toLowerCase(),ver:navigator.appVersion.toLowerCase()},name:"undefined",version:{major:"0",minor:"0",js:"0"},device:{name:"",version:"",pixelratio:1},os:"undefined",screensize:{w:0,h:0},supportflash:function(){if(navigator.plugins!=null&&navigator.plugins.length>0){if(navigator.plugins["Shockwave Flash"]){return true}}else{if((this.name=="msie")||(this.name=="ie")&&(navigator.appVersion.toLowerCase().indexOf("win")!=-1)){try{var f=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(f){return true}}catch(g){}}}return false},detectdevice:function(){var l="desktop";var k="";for(var h=0;h<b.DEVICE.length;h++){if(navigator.userAgent.match(b.DEVICE[h][0])){l=b.DEVICE[h][1];k=b.DEVICE[h][3];var f=b.DEVICE[h][2];for(var g=0;g<f.length;g++){var e=f[g];if(navigator.userAgent.match(e[0])){k=e[1];break}}break}}this.device.name=l;this.device.version=k;if(this.device.name=="iphone"||this.device.name=="ipad"||this.device.name=="ipod"){this.device.version=this.getiosversion()}if(this.device.name=="android"){this.device.version=this.getandroidversion()}if(typeof window.devicePixelRatio!="undefined"){this.device.pixelratio=window.devicePixelRatio}},supportsTouch:function(){var e=!!((window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0)||("ontouchstart" in window)||(window.DocumentTouch&&document instanceof window.DocumentTouch));return e},detectos:function(){for(var e=0;e<b.OS.length;e++){if(navigator.userAgent.match(b.OS[e][0])){this.os=b.OS[e][1]}}},getandroidversion:function(){var f=navigator.userAgent.toLowerCase();var e=f.match(/android\s([0-9\.]*)/);return e?parseInt(e[1],10):2},getiosversion:function(){var f=navigator.userAgent.toLowerCase();var e=f.match(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i);return e?parseInt(e[1],10):9},init:function(){var e=this.raw.ua;var m=this.raw.ver;this.version.minor=parseFloat(m);this.version.major=parseInt(this.version.minor);if(e.indexOf("opera")>-1){this.name="opera";if(this.version.major==5||this.version.major==6){this.version.js="1.3"}else{if(this.version.major>=7){this.version.js="1.5"}else{this.version.js="1.1"}}}else{if(e.indexOf("chrome")>-1&&e.indexOf("edge")>-1&&e.indexOf("like")>-1&&e.indexOf("applewebkit")>-1){this.name="ie";this.version.js="1.5";var f=e.substring(e.indexOf("edge")+5);this.version.minor=parseFloat(f);this.version.major=parseInt(this.version.minor)}else{if(e.indexOf("chrome")>-1){this.name="chrome";this.version.js="1.5"}else{if(e.indexOf("phantomjs")>-1){this.name="phantomjs";this.version.js="1.5"}else{if(e.indexOf("safari")>-1&&e.indexOf("mac")>-1){this.name="safari";this.version.js="1.5";var j=e.match(/(version|CriOS)\/([\d]+\.[\w]?\.?[\w]+)/gi);if(navigator.userAgent.match("CriOS")){this.name="chrome"}this.version.minor=parseFloat(j[0].split("/")[1]);this.version.major=parseInt(j[0].split("/")[1])}else{if(e.indexOf("applewebkit")>-1&&e.indexOf("mobile")>-1){this.name="safari";this.version.js="1.5"}else{if(e.indexOf("konqueror")>-1){var n=e.indexOf("konqueror");this.name="konquerer";this.version.minor=parseFloat(e.substring(n+10,e.indexOf(";",n)));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}else{if(navigator.product&&navigator.product.toLowerCase()=="gecko"){if(e.indexOf("mozilla/5")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){if(navigator.vendor=="Firebird"){this.name="firebird"}else{if(e.indexOf("navigator")>-1){this.name="netscape"}else{if(navigator.vendor=="Firefox"||e.indexOf("firefox")>-1){this.name="firefox"}else{if(navigator.vendor==""||navigator.vendor=="Mozilla"||navigator.vendor=="Debian"){this.name="mozilla"}else{if(navigator.vendor.indexOf("Google")>-1){this.name="mozilla"}}}}}if(navigator.vendor==""&&e.indexOf("mozilla")>-1&&e.indexOf("like")>-1){this.name="ie";var f=e.substring(e.indexOf("rv:")+3);var g=f.indexOf(")");this.version.minor=parseFloat(f.substring(0,g));this.version.major=parseInt(this.version.minor)}else{if(this.name!="undefined"&&this.name!="netscape"){var l=(navigator.vendorSub)?navigator.vendorSub:0;var k;if(this.name=="firefox"&&!l){l=parseFloat(e.substring(e.indexOf("firefox/")+8))}else{if(!l){l=e.substring(e.substring("rv:")+3);k=l.indexOf(")");l=parseFloat(l.substring(0,k))}}this.version.minor=l;this.version.major=parseInt(l);this.version.js="1.5"}else{if(this.name=="netscape"){var i=e.indexOf("navigator");this.version.minor=parseFloat(e.substring(i+10,i+13));this.version.major=parseInt(this.version.minor);this.version.js="1.5"}}}}}else{if(e.indexOf("mozilla")>-1&&e.indexOf("spoofer")==-1&&e.indexOf("compatible")==-1&&e.indexOf("webtv")==-1&&e.indexOf("hotjava")==-1){this.name="netscape";if(navigator.vendor&&(navigator.vendor=="Netscape6"||navigator.vendor=="Netscape")){this.version.minor=parseFloat(navigator.vendorSub);this.version.major=parseInt(navigator.vendorSub)}if(this.version.major==2){this.version.js="1.0"}else{if(this.version.major==3){this.version.js="1.1"}else{if(this.version.major==4){this.version.js=(this.version.minor<=4.05?"1.2":"1.3")}else{if(this.version.major==5){this.version.js="1.4"}else{if(this.version.major>=6){this.version.js="1.5"}}}}}}else{if(e.indexOf("msie")>-1){this.name="ie";if(e.indexOf("mac")>-1){var h=e.indexOf("msie");this.version.minor=parseFloat(e.substring(h+5,e.indexOf(";",h)))}else{var h=m.indexOf("msie");this.version.minor=parseFloat(m.substring(h+5,m.indexOf(";",h)))}this.version.major=parseInt(this.version.minor);if(this.version.major<4){this.version.js="1.0"}else{if(this.version.major==4){this.version.js="1.2"}else{if(this.version.major>=5&&e.indexOf("mac")>-1){this.version.js="1.4"}else{if(this.version.major>=5){this.version.js="1.3"}}}}}else{if(e.indexOf("aol")>-1){this.name="aol"}else{if(e.indexOf("webtv")>-1){this.name="webtv"}else{if(e.indexOf("hotjava")>-1){this.name="hotjava";if(this.version.major>=3){this.version.js="1.4"}}}}}}}}}}}}}}this.detectdevice();this.detectos();this.screensize=this.detectScreen();this.supportsTouch()},detectScreen:function(){var e={w:0,h:0};if(self.innerHeight){e.w=self.innerWidth;e.h=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){e.w=document.documentElement.clientWidth;e.h=document.documentElement.clientHeight}else{if(document.body){e.w=document.body.clientWidth;e.h=document.body.clientHeight}}}return e},isNoScreenSize:function(){this.screensize=this.detectScreen();return(this.screensize.w==0||this.screensize.h==0)}};b.browser.init()}if(!b.query){b.query={qs:"",params:{},init:function(){this.qs=window.location.search;this.qs=this.qs.substring(1,this.qs.length);var h=this.qs.split("&");for(var f=0;f<h.length;f++){var e="";var g=null;if(h[f].indexOf("=")>=0){e=h[f].substring(0,h[f].indexOf("="));e=b.query.fixKey(e);g=decodeURIComponent(h[f].substring(h[f].indexOf("=")+1))}else{e=b.query.fixKey(h[f])}this.params[e]=g}},getValue:function(e,f){var h=f;var g=b.query.fixKey(e);if(this.params[g]){h=this.params[g]}return h},fixKey:function(f){var h="";var e=f.split(".");if(e.length>1){for(var g=0;g<e.length-1;g++){h+=e[g]+"."}h+=e[e.length-1].toLowerCase()}else{h=f.toLowerCase()}return h}};b.query.init()}if(!b.Class){b.Class=new function(){var j=[];var h=[];this.inherits=function(k,p){var r=false,s,m;if(!b.Util.isString(k)||!b.Util.isString(p)){throw new Error("s7sdk.Class.inherit requires string parameters!")}m=k;k=f(k);s=p;p=f(p);if(typeof p==="undefined"||p.inheritancePending){k.inheritancePending=true;j.push(function n(){b.Class.inherits(m,s)})}else{t(k,p);k.inheritancePending=false;r=true}function t(w,v){var y=function u(){},x;y.prototype=v.prototype;x={};e(w.prototype,x);w.prototype=new y();w.prototype.constructor=w;w.prototype.superproto=v.prototype;w.prototype.superclass=v;w.superclass=v;e(x,w.prototype)}for(var q=h.length-1;q>-1;--q){var l=h[q];if(!l.objName||!l.fnName||!l.fn){continue}if(l.objName==m){var o=f(l.objName);g(o,l.fnName,l.fn);h.splice(q,1)}}return r};this.override=function(l,n,k){var m=f(l);if(typeof m==="undefined"){throw new Error("Object must be defined before calling override.")}if(typeof k!="function"){throw new Error("A function is required to override a base function.")}if(m.inheritancePending){h.push({objName:l,fnName:n,fn:k})}else{g(m,n,k)}};function g(l,m,k){if(!l.prototype[m]||typeof l.prototype[m]!="function"){b.Logger.log(b.Logger.WARNING,"s7sdk.Class.override: base function %0 does not exist.",m)}k.parent=l.prototype[m];l.prototype[m]=k}this.resolveAllPending=function(){var k=j.length;while(k--&&j.length){i()}if(j.length){throw new Error("Class.resolveAllPending Inheritance Failure!")}};function i(){var l=j;j=[];for(var k=0;k<l.length;k++){l[k].apply(null,[])}}function f(m){var l=window,k=m.split(".");if(k[0]==="s7sdk"){l=b;k.shift()}while(k.length&&typeof l!=="undefined"){l=l[k.shift()]}return l}function e(k,l){for(var m in k){if(k.hasOwnProperty(m)&&k.propertyIsEnumerable(m)){l[m]=k[m]}}}}}if(!b.ControlComponent){b.ControlComponent=function ControlComponent(f,g,h,e){arguments.callee.superclass.apply(this,[null,null,null,null,null]);this.component=f;this.storedStyles={};this.dynamicModifiers=null;this.listenerProxy={};this.compId=this.component.getId();this.restrictedStyles=(e==null)?{}:e;this.parentId=this.component.pid;this.namespace=g;this.componentconstructor=h;b.Util.borrowMethods(this.component,this,g);f.settings.registerComponent(this);this.dynamicModifiers=b.Util.resolveModifier(null,null,this.component,this.component.settings);delete this.dynamicModifiers.asset;this.restrictedStylesValues=this.readRestrictedStylesValues()};b.ControlComponent.prototype.storeStyles=function(f,e,g){if(!this.storedStyles[g]){this.storedStyles[g]={}}this.storedStyles[g][f]=e;b.CSSUtility.addStyle(g,f,e,this.storedStyles,this.compId);b.Logger.log(b.Logger.INFO,"s7sdk.ControlComponent.storeStyles property: %0 value %1 for component %2",f,e,this.component.getClassName())};b.ControlComponent.prototype.addStyleAndCheckRebuild=function(h,g,f){this.storeStyles(g,f,h);var e=this.isRestrictedCSSProperty(this.restrictedStyles,g)?this.restrictedStylesInvalidated():false;if(e||(h==".s7tooltip")){this.rebuild(this.dynamicModifiers?this.dynamicModifiers:this.component.settings)}};b.ControlComponent.prototype.dispose=function(){var e=this.getCl();if(!e||e.length==0){throw new Error("Invalid css classname specified for removing css style in dispose")}b.CSSUtility.removeStyle("."+e,this.getId());this.component.dispose()};b.ControlComponent.prototype.setCSS=function(h,g,f){if(this.component){function e(i){return i.replace(/\./g,"")}if((e(h)==this.getCl())&&((g=="width")||(g=="height"))){this.cntrlresize(g,f)}else{this.addStyleAndCheckRebuild(h,g,f)}this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{id:this.component.getObj().id,classname:h,property:g,value:f},false))}};b.ControlComponent.prototype.cntrlresize=function(i,h){if(this.component){var g=/[%]/gi;if(g.test(h)){}else{if(typeof this.component.resize=="function"){var e,f,j;j=parseInt(h);e=this.component.getWidth();f=this.component.getHeight();switch(i){case"width":e=j;break;case"height":f=j;break}this.component.resize(e,f)}}}};b.ControlComponent.prototype.setModifier=function(e){var g="";var n=this.component.getModifiers();var p=this.component.settings;var j=false;var o={};for(var l in e){var q=l.toLowerCase();o[q]=e[l]}for(var h in n){var f=h.toLowerCase(),m;if(typeof o[f]!="undefined"){m=o[f];if(f=="serverurl"){continue}j=true;g=this.dynamicModifiers.get(f);this.dynamicModifiers.set(f,m);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getObj().id,oldvalue:g,newvalue:m,property:f},false))}}if(this.dynamicModifiers&&j){this.addParameterMappings(this.dynamicModifiers);b.CSSUtility.addStyle(null,null,null,this.storedStyles,this.compId);this.rebuild(this.dynamicModifiers)}};b.ControlComponent.prototype.addParameterMappings=function(e){if(!e.trackLoad){e.trackLoad=this.component.settings.trackLoad}if(!e.sendLoadMessage){e.sendLoadMessage=this.component.settings.sendLoadMessage}if(!e.createLoadData){e.createLoadData=this.component.settings.createLoadData}if(!e.params){e.params=this.component.settings.params}};b.ControlComponent.prototype.rebuild=function(m){if(this.component){this.listenerProxy=b.Util.copyListeners(this.component);this.component.disableEvents();var h=m.asset;var j;if(h){j=h;delete m.asset}else{if(typeof this.component.getCurrentAsset=="function"){j=this.component.getCurrentAsset()}}var l,k,e;if((typeof this.component.getWidth=="function")&&(typeof this.component.getHeight=="function")){l=this.component.getWidth();k=this.component.getHeight()}var i,g;if(this.restrictedStylesValues[this.getCl()]){i=this.restrictedStylesValues[this.getCl()].width;g=this.restrictedStylesValues[this.getCl()].height}this.unload();this.component=new this.componentconstructor(this.parentId,m,this.compId,true);this.restrictedStylesValues=this.readRestrictedStylesValues();var f=false;if(i&&g&&this.restrictedStylesValues[this.getCl()]){f=(i!=this.restrictedStylesValues[this.getCl()].width);f=f||(g!=this.restrictedStylesValues[this.getCl()].height)}if(!f&&(typeof this.component.resize=="function")){this.component.resize(l,k)}b.Util.assignListeners(this.listenerProxy,this.component);if(j&&(typeof this.component.setCurrentAsset=="function")){this.component.setCurrentAsset(j)}}};b.ControlComponent.prototype.unload=function(){if(this.component){this.component.cleanUp()}};b.ControlComponent.prototype.reload=function(){if(this.component){var e=(this.dynamicModifiers?this.dynamicModifiers:b.Util.resolveModifier("","",this.component,this.component.settings));this.rebuild(e)}};b.ControlComponent.prototype.restrictedStylesInvalidated=function(){var i=this.readRestrictedStylesValues();for(var e in this.restrictedStylesValues){var g=this.restrictedStylesValues[e];var f=i[e];for(var h in g){if(g[h]!=f[h]){return true}}}return false};b.ControlComponent.prototype.readRestrictedStylesValues=function(){var j={};if(this.restrictedStyles){for(var e in this.restrictedStyles){j[e]={};var k=e.split(" ");var l=[];for(var h=0;h<k.length;h++){l.push({className:k[h]})}l[0].id=this.component.id;for(var h=0;h<this.restrictedStyles[e].length;h++){var g=this.restrictedStyles[e][h];var f=b.Util.css.getCssExt(this.getParent(),l,g);j[e][g]=f}}}return j}}b.Class.inherits("s7sdk.ControlComponent","s7sdk.UIComponent");if(!b.Base){b.Base=function Base(j,f,g,e,h){if(!!j){this.id=j}else{this.id="";var i="";if(this.constructor&&this.constructor.NS&&this.constructor.NS.length>0){i=this.constructor.NS}else{i=this.getClassName()}if(i&&i.length>0){this.id=i+="_"}this.id+=b.Util.createUniqueId()}if(typeof f=="string"&&f!=""){this.pid=f}else{if(f&&(typeof f=="object")){if(b.common&&((b.common.ContainerControl&&f instanceof b.common.ContainerControl)||(b.common.ControlBarControl&&f instanceof b.common.ControlBarControl))){this.pid=f}else{this.pid=null}}else{this.pid=null}}this.nt=g;this.cl=(typeof e=="string")?e:"";this.settings=h;this.obj=null;this.events=new Object();this.trackingManager=null};b.Base.prototype.symbols=null;b.Base.prototype.getSymbols=function(){return this.symbols};b.Base.prototype.createElement=function(){var e=(typeof this.id=="string"&&this.id.length);var f=e?document.getElementById(this.id):null;if(f){this.obj=f;this.nt=f.tagName}else{this.obj=document.createElement(this.nt);if(e){this.obj.setAttribute("id",this.id)}}this.obj.className=this.cl;this.obj.setAttribute("data-description","Scene7ComponentHolder");this.obj.setAttribute("data-component",this.getClassName());if(b.namespacePrefix!=""){this.obj.setAttribute("data-namespace",b.namespacePrefix)}this.obj.s7base=this;if(!b.Util.isNull(this.settings)&&!b.Util.isNull(this.settings.locale)){this.obj.setAttribute("lang",this.settings.locale)}return this.obj};b.Base.prototype.getParent=function(){return this.pid==null?document.body:b.common&&((b.common.ContainerControl&&this.pid instanceof b.common.ContainerControl)||(b.common.ControlBarControl&&this.pid instanceof b.common.ControlBarControl))?document.getElementById(this.pid.component.id):document.getElementById(this.pid)};b.Base.prototype.getObj=function(){return this.obj};b.Base.prototype.getId=function(){return this.id};b.Base.prototype.getCl=function(){return this.cl};b.Base.prototype.getParam=function(g,h){var f;var e=this.getClassName();if(this.settings&&typeof this.settings.get=="function"){f=this.settings.get.apply(this.settings,[g,h,e,this.id])}else{f=h}return f};b.Base.prototype.addEventListener=function(i,h,e){if(!i){throw new Error("Invalid event type!")}e=(typeof e=="boolean"&&e);if(!b.Util.hasProperty(this.events,i)){this.events[i]=[];this.events[i].indexOfHandler=function(l,j){function k(n,m){return(n.handler===l&&n.useCapture==j)?m:-1}return Math.max.apply(null,this.map(k))}}var f=this.hasEventListener(i,h,e);if(!f){this.events[i].push({handler:h,useCapture:e});if(this.obj.addEventListener){this.obj.addEventListener(i,h,e)}else{if(this.obj.attachEvent){var g=b.Event.getIEEvent(i)||"onpropertychange";b.Logger.log(b.Logger.FINEST,"Registered S7Event is %0 , IE Event is %1",i,g);if(g=="onpropertychange"){this.obj.handler=this.obj.handler||{};this.obj.handler[i]=this.obj.handler[i]||[];this.obj.handler[i].push(h);this.obj.attachEvent(g,function(l){l=l||window.event;var k=l.srcElement.handler[l.s7eventName];if(k){var j=k.indexOf(h);if((j>-1)&&(i==l.s7eventName)){k[j](l)}}})}else{this.obj.attachEvent(g,h)}}}}};b.Base.prototype.removeEventListener=function(h,g,e){e=(typeof e=="boolean"&&e);var f=this.events[h]?this.events[h].indexOfHandler(g,e):-1;if(f>=0){if(this.obj.removeEventListener){this.obj.removeEventListener(h,g,e);this.events[h].splice(f,1);if(!this.events[h].length){delete this.events[h]}}else{if(this.obj.handler&&this.obj.handler[h]){delete this.obj.handler[h]}}}};b.Base.prototype.hasEventListener=function(g,f,e){return this.events[g]?this.events[g].indexOfHandler(f,e)>=0:false};b.Base.prototype.dispatchEvent=function(e){b.Event.dispatch(this.obj,e)};b.Base.prototype.disableEvent=function(h){if(h==null){for(var g in this.events){for(var e=0;e<this.events[g].length;e++){if(g=="onpropertychange"){continue}if(this.obj.removeEventListener){this.obj.removeEventListener(g,this.events[g][e].handler,this.events[g][e].useCapture)}else{this.obj.detachEvent("on"+g,this.events[g][e].handler)}}}}else{if(this.events.hasOwnProperty(h)){for(var f=0;f<this.events[h].length;f++){if(this.obj.removeEventListener){this.obj.removeEventListener(h,this.events[h][f].handler,this.events[h][f].useCapture)}else{this.obj.detachEvent("on"+h,this.events[h][f].handler)}}}}};b.Base.prototype.enableEvent=function(h){if(h==null){for(var g in this.events){for(var e=0;e<this.events[g].length;e++){if(g=="onpropertychange"){continue}if(this.obj.addEventListener){this.obj.addEventListener(g,this.events[g][e].handler,this.events[g][e].useCapture)}else{this.obj.attachEvent("on"+g,this.events[g][e].handler)}}}}else{if(this.events.hasOwnProperty(h)){for(var f=0;f<this.events[h].length;f++){if(this.obj.addEventListener){this.obj.addEventListener(h,this.events[h][f].handler,this.events[h][f].useCapture)}else{this.obj.attachEvent("on"+h,this.events[h][f].handler)}}}}};b.Base.prototype.enableEvents=function(){for(var e in this.events){this.enableEvent(e)}};b.Base.prototype.disableEvents=function(){for(var e in this.events){this.disableEvent(e)}};b.Base.prototype.getClassName=function(){var g;if(this.constructor&&this.constructor.name&&this.constructor.name.length){g=this.constructor.name}else{var e=/function\s([^(]{1,})\(/;var f=(e).exec((this).constructor.toString());if(f&&f.length>1){g=f[1]}}return g};b.Base.prototype.getLocalizedText=function(e){var g="";if(!b.Util.isNull(this.settings)){var h=e;var f=e;if(!b.Util.isNull(this.getClassName())){h=this.getClassName()+"."+h;if(!b.Util.isNull(this.id)){f=this.id+"."+h}}g=this.settings.getLocalizedText(f,null);if(g==null){g=this.settings.getLocalizedText(h,this.symbols[e])}}return g};b.Base.prototype.wrapContext=function(f){var e=this;return(function(){f.apply(e,arguments)})};b.Base.prototype.getNamespacePrefix=function(){return b.namespacePrefix}}if(!b.Component){b.Component=function Component(i,f,g,e,h){arguments.callee.superclass.apply(this,[i,f,g,e,h]);this.parseMods()};b.Class.inherits("s7sdk.Component","s7sdk.Base");b.Component.prototype.modifiers=null;b.Component.prototype.getModifiers=function(){return this.modifiers};b.Component.prototype.parseMods=function(){var l,f,m,e,j,h;if(this.settings&&b&&this.settings instanceof b.ParameterManager&&this.getClassName()=="Swatches"){if(this.settings.params.hasOwnProperty(this.id+".transition")){var k=this.getParam("transition");this.settings.push(this.id+".scrolltransition",k);this.settings.del(this.id+".transition")}else{if(this.settings.params.hasOwnProperty("Swatches.transition")){var k=this.getParam("transition");this.settings.push("Swatches.scrolltransition",k);this.settings.del("Swatches.transition")}}}for(l in this.modifiers){if(!this.modifiers.hasOwnProperty(l)){continue}f=this.modifiers[l];try{e=this.getParam(l,"");if(f.parseParams===false){j=new b.Modifier([e!=""?e:f.defaults[0]])}else{j=b.Modifier.parse(e,f.defaults,f.ranges)}if(l in this){throw new Error("Cannot add modifier property to component! "+this.getClassName()+" already defines property '"+l+"'!")}if(j.values.length==1){this[l]=j.values[0]}else{if(j.values.length>1){m={};for(h=0;h<j.values.length;h++){m[f.params[h]]=j.values[h]}this[l]=m}}}catch(g){throw new Error("Unable to process modifier: '"+l+"'. "+g)}}}}if(!b.UIComponent){b.UIComponent=function UIComponent(i,f,g,e,h){this.owner=null;arguments.callee.superclass.apply(this,[i,f,g,e,h,arguments[5]])};b.Class.inherits("s7sdk.UIComponent","s7sdk.Component");b.UIComponent.prototype.resize=function(f,e){b.Logger.log(b.Logger.FINE,"UIComponent.resize %0: %1x%2",this.id,f,e)};b.UIComponent.prototype.getOwner=function(){return this.owner};b.UIComponent.prototype.setOwner=function(e){this.owner=e};b.UIComponent.prototype.attachToContainer=function(){var e=this.getParent();if(e.s7base&&((b.Container&&e.s7base instanceof b.Container)||(b.ControlBar&&e.s7base instanceof b.ControlBar))){e=e.firstChild}if(this.obj.parentNode!=e){e.appendChild(this.obj)}};b.UIComponent.prototype.setCSS=function(h,g,f){b.Logger.log(b.Logger.FINE,"UIComponent.setCSS %0 %1 %2",h,g,f);var k=b.Util.objByClassName(h,this.getParent());var j=b.Util.cssPropToJSProp(g);for(var e=0;e<k.length;e++){k[e].style[j]=f}};b.UIComponent.prototype.isRestrictedCSSProperty=function(j,h){if(!j){throw new Error()}for(var e in j){for(var g=0;g<j[e].length;g++){var f=j[e][g];if(h==f){return true}}}return false}}if(!b.Modifier){b.Modifier=function(e){this.values=e};b.Modifier.parse=function(n,h,e){var k=[];if(b.Util.isArray(h)==false){throw new Error("A valid 'defaults' array must be provided!")}if(b.Util.isString(n)){var m=n.trim().split(",");for(var l=0;l<h.length;l++){if(typeof m[l]=="undefined"){m[l]=""}m[l]=m[l].trim();if(l>m.length-1||m[l].length==0){k[l]=h[l];continue}if(b.Util.isNumberType(h[l])){k[l]=Number(m[l]);if(isNaN(k[l])){throw new Error("The "+f(l)+" parameter should be Number!")}if(e&&e[l]&&b.Modifier.numericRangeValidator(k[l],e[l])==false){throw new Error("The "+f(l)+" parameter is out of range!")}}else{if(b.Util.isString(h[l])){k[l]=String(m[l]);if(e&&b.Util.isArray(e[l])&&b.Modifier.stringRangeValidator(k[l],e[l])==false){var o=parseInt(k[l]);if(o===Number(k[l])&&o>=0&&o<e[l].length){k[l]=e[l][o]}else{throw new Error("The "+f(l)+" parameter is not a valid enumeration string or index!")}}}else{if(b.Util.isBoolean(h[l])){var g=m[l].toLowerCase();if(g!="1"&&g!="true"&&g!="false"&&g!="0"){throw new Error("The "+f(l)+" parameter should be Boolean!")}k[l]=g=="true"?true:g=="false"?false:Boolean(Number(g))}else{k[l]=m[l]}}}}if(m.length>l){throw new Error("Too many parameters passed!")}}else{throw new Error("A valid 'input' string must be provided!")}function f(i){return(i+1)+j(i+1)}function j(i){var p=i%10;return(i<4||i>20)?(p==1?"st":p==2?"nd":p==3?"rd":"th"):"th"}return new b.Modifier(k)};b.Modifier.numericRangeValidator=function(e,g){var h=false,k=g.trim().split(","),j,f;for(f=0;f<k.length;f++){j=k[f].trim().split(":");if(Number(j[0])==e||(j.length==2&&(j[0].length==0||e>=Number(j[0]))&&(j[1].length==0||e<=Number(j[1])))){h=true;break}}return h};b.Modifier.stringRangeValidator=function(h,f){var e=false,j=h.toLowerCase().trim(),g;for(g=0;g<f.length;g++){if(b.Util.isString(f[g])==false){throw new Error("String ranges must be specified as strings!")}if(f[g].toLowerCase().trim()==j){e=true;break}}return e}}if(!b.Event){b.Event=function(){};b.Event.dispatch=function(i,e,f){f=(typeof f=="boolean")?f:false;if(!i){throw new Error("Cannot dispatch event to non-exist target!")}else{if(!e){throw new Error("Cannot dispatch event without type id or s7event object!")}}if(document.createEvent){var g=document.createEvent("Events");if(typeof e!="string"){g.s7event=e;g.initEvent(e.type,e.bubbles,e.useCapture)}else{g.initEvent(e,true,false)}if(f){setTimeout(function(){i.dispatchEvent(g)},0)}else{i.dispatchEvent(g)}}else{var h=document.createEventObject();h.s7event=e;h.s7eventName=(typeof e!="string"?e.type:e);if(i.fireEvent){var j=function(){if(b.Util.elementInDOM(i)){i.fireEvent("onpropertychange",h)}else{document.body.appendChild(i);i.fireEvent("onpropertychange",h);document.body.removeChild(i)}};if(f){setTimeout(function(){j()},0)}else{j()}}}};b.Event.addEventHandler=function(f,i,g,h,e){e=b.Util.isNull(e)?false:e;b.Event.addDOMListener(f,i,function(j){if(!j){j=window.event}h.apply(b.Util.isNull(g)?this:g,[j])},e)};b.Event.supportsPassive=function(){var f=false;try{var g=Object.defineProperty({},"passive",{get:function(){f=true}});window.addEventListener("testPassive",null,g)}catch(h){}return f};b.Event.addDOMListener=function(i,g,h,e){if("addEventListener" in i){i.addEventListener(g,h,e)}else{if("attachEvent" in i){var f=b.Event.getIEEvent(g)||g;i.attachEvent(f,h)}}};b.Event.removeDOMListener=function(i,g,h,e){if("removeEventListener" in i){i.removeEventListener(g,h,e)}else{if("detachEvent" in i){var f=b.Event.getIEEvent(g)||g;i.detachEvent(f,h)}}};b.Event.preventDefault=function(e){if(e){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}}};b.Event.stopPropagation=function(e){if(e){if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}};b.Event.getTarget=function(e){var f;if(!e){var e=window.event}if(e.target){f=e.target}else{if(e.srcElement){f=e.srcElement}}if(f&&f.nodeType==3){f=f.parentNode}return f};b.Event.getIEEvent=function(e){return b.Event.IEEVENT[e]};b.Event.TILE_LOADED="tileLoaded";b.Event.TILE_FAILED="tileFailed";b.Event.RES_INVALIDATED="invalidated";b.Event.INIT_COMPLETE="initComplete";b.Event.VIEW_LOADED="viewLoaded";b.Event.RENDER="render";b.Event.ENTER_FRAME="enterFrame";b.Event.SWIPE="s7swipe";b.Event.CLICK="s7click";b.Event.DBLCLICK="s7dblclick";b.Event.SDK_READY="sdkReady";b.Event.IEEVENT={mouseover:"onmouseover",mouseout:"onmouseout",mousedown:"onmousedown",mouseup:"onmouseup",mousemove:"onmousemove",mouseenter:"onmouseenter",mouseleave:"onmouseleave",mousewheel:"onmousewheel",contextmenu:"oncontextmenu",click:"onclick",dblclick:"ondblclick",keydown:"onkeydown",keyup:"onkeyup",keypress:"onkeypress",load:"onload",unload:"onunload",focus:"onfocus",blur:"onblur",focusin:"onfocusin",focusout:"onfocusout",resize:"onresize",scroll:"onscroll",change:"onchange"}}if(!b.ParameterManager){b.ParameterManager=function ParameterManager(f,e,i,h){b.Logger.log(b.Logger.CONFIG,"s7sdk.ParameterManager constructor - config: %0, locale: %1 , modifierMap: %2, defaultCSS: %3",f,e,i,h);arguments.callee.superclass.call(this,b.Util.createUniqueId(),null,"span");this.registeredComponents=[];this.params=new Object();this.config=(f?f:null);this.eventObj=new Image();this.hadCustomSize=false;this.hadCustomStyle=false;this.createElement();this.getParent().appendChild(this.obj);this.obj.style.display="none";this.eventObj=this.obj;this.loadTracked=false;this.i18n={};this.locale=(e?e:null);this.localizedTexts={};this.viewerType=b.ParameterManager.TYPE;this.viewerVersion="UNKNOWN";var g=window.location.href;this.viewerName=g.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}this.modifierMap=(b.Util.isNull(i)?null:i);this.defaultCSS=(b.Util.isNull(h)?"":h);this.bulkPush(b.query.params);this.isDisposed=false};b.Class.inherits("s7sdk.ParameterManager","s7sdk.Base");b.ParameterManager.TYPE="s7_html5_sdk";b.ParameterManager.prototype.registerComponent=function(e){if(e instanceof b.Component){var f=e.getParent();if((e.getClassName()==="ImageMapEffect")||(e.getClassName()==="FavoritesEffect")||(!f||(f.s7base&&(f.s7base.getClassName()==="Container"||f.s7base.getClassName()==="ControlBar"||f.s7base.getClassName()==="SocialShare"))||!f.s7base)){this.registeredComponents.push(e)}}else{throw new Error("Cannot register component that is not a sub-class of s7sdk.Component!")}};b.ParameterManager.prototype.getRegisteredComponents=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.getRegisteredComponents");var e=[];for(var f=0;f<this.registeredComponents.length;f++){e.push(this.registeredComponents[f])}return e};b.ParameterManager.prototype.setLocalizedTexts=function(f){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.setLocalizedTexts - inObj: %0",f);if(typeof f=="object"){for(var e in f){this.localizedTexts[e]=f[e]}}};b.ParameterManager.prototype.addEventListener=function(g,f,e){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.addEventListener - type: %0, handler: %1, useCapture: %2",g,f.toString().substring(0,f.toString().indexOf("(")),e);b.Base.prototype.addEventListener.apply(this,[g,f,e])};b.ParameterManager.loadConfig=function(j,g){g.hadCustomStyle=g.get("style",null)!=null;for(var f in j){if(!j.hasOwnProperty(f)){continue}g.push(f,j[f]);if(f.indexOf("i18n")==0&&f.split(".").length>1){var n="";var e=f.split(".");for(var h=1;h<e.length;h++){n+=(n!=""?".":"")+e[h]}g.i18n[n]=j[f]}}g.hadCustomSize=g.get("size",null)!=null;var l=g.resolveCSSPathFromStyleModifier(g);if(!g.hadCustomStyle){var m=decodeURIComponent((new RegExp("[?|&]cache=([^&;]+?)(&|#|;|$)","gi").exec(g.config)||[,""])[1].replace(/\+/g,"%20"))||null;if(m){l=l+(l.indexOf("?")>=0?"&":"?")+"cache="+m}}g.remap();if(l==null){if(g.defaultCSS!=""){b.Util.css.include(g.defaultCSS,null,false,g.id)}else{if(b.Util.css.defaultCSS!=""){b.Util.css.include(b.Util.css.defaultCSS,null,false,g.id)}}}else{b.Util.css.include(l,null,true,g.id)}b.ParameterManager.checkCSS(g,0)};b.ParameterManager.prototype.init=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.init");if(typeof this.params.config!="undefined"&&this.params.config!=null&&this.params.config.length>0){this.config=(typeof this.params.serverurl!="undefined"&&this.params.serverurl!=null?this.params.serverurl:"/is/image/");this.config=b.Util.resolveURL(this.config,unescape(this.params.config))}if(!b.Util.isNull(this.params.locale)&&this.params.locale.length>0){this.locale=this.params.locale}else{if(!b.Util.isNull(this.localizedTexts.defaultLocale)&&b.Util.isNull(this.locale)){this.locale=this.localizedTexts.defaultLocale}else{if(b.Util.isNull(this.locale)){this.locale="en"}}}this.populateLocalizedTexts();b.ParameterManager.check(this)};b.ParameterManager.prototype.resolveCSSPathFromStyleModifier=function(){var i=this.get("style",null);if(i==null){return null}var j=i.match(/^(data)\:(.*?),(.*)/);if(j){return i}var k=this.get("contentRoot",null);var g=this.get("contentURL","/is/content");if(!b.Util.isAbsPath(i)){var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;var m=null;var f=null;var h=null;var l=(k!=null)?k:g;if(l!=null){l=l+(l.charAt(l.length-1)!="/"?"/":"");m=l.match(e);f=m[2]||null;h=m[4]||null;if((f)&&(h)){if(i.indexOf("/")==0){i=f+"://"+h+i}else{i=l+i}}else{i=(i.charAt(0)=="/")?i.substr(1,i.length-1):i;i=l+i}}}return i==""?null:i};b.ParameterManager.checkCSS=function(f,e){if(f.isDisposed){return}if(!b.Util.css.isAllLoaded()&&e<30){b.Util.timeout(b.ParameterManager.checkCSS,100,[f,++e])}else{if(e>=30){b.Logger.log(b.Logger.SEVERE,"Cannot load CSS")}if(b.browser.name==="ie"){}b.Event.dispatch(f.eventObj,b.Event.SDK_READY,true);var g=f.get("title","",f.getClassName(),f.id);if(g!=""){window.document.title=g}}};b.ParameterManager.check=function(g){if(g.isDisposed){return}if(!b.Util.lib.isAllJSLoaded()||b.browser.isNoScreenSize()){b.Util.timeout(b.ParameterManager.check,100,[g])}else{b.Class.resolveAllPending();if(g.config!=null){var e=new b.IS();g.config+=(/\?/.test(g.config)?"&":"?");e.getHttpReq(g.config+"req=userdata,json,UTF-8&locale="+g.locale,b.ParameterManager.loadConfig,null,g)}else{g.hadCustomSize=g.get("size",null)!=null;var f=g.resolveCSSPathFromStyleModifier();if(f==null){if(g.defaultCSS!=""){b.Util.css.include(g.defaultCSS,null,false,g.id)}else{if(b.Util.css.defaultCSS!=""){b.Util.css.include(b.Util.css.defaultCSS,null,false,g.id)}}}else{b.Util.css.include(f,null,true,g.id)}b.ParameterManager.checkCSS(g,0)}}};b.ParameterManager.prototype.trackLoad=function(e){if(this.loadTracked){return}var f=new b.event.UserEvent(b.event.UserEvent.LOAD,this.createLoadData().split(","),true);b.Event.dispatch(e.obj,f,false);this.sendLoadMessage();this.loadTracked=true};b.ParameterManager.prototype.sendLoadMessage=function(){var j="";var g=(new Date()).getTime();var m="";for(var l in this.params){if(typeof l==="string"){if((l.indexOf(".asset")!=-1&&l.indexOf(".asset")==l.lastIndexOf(".asset"))||(l=="asset")){m=this.params[l]}}}var e=this.params.serverurl?this.params.serverurl:"/is/image/";var k=b.Util.resolveURL(e,m).replace(/%2f|%2F/g,"/").match(new RegExp("^(http[s]?://[^/]+)?[/]+([^/]+[/]+[^/]+)[/]+([^/]+)[/]+([^\\?]+)[\\?]?","i"));if((k==null)||(k.length<3)){b.Logger.log(b.Logger.WARNING,"Invalid image set.")}else{var h=this.params.aemmode==("1"||true);var f=new Image();j=b.Util.resolveURL(e,(!h)?escape(k[3]):"")+"?req=message&message=,0,LOAD,"+this.viewerType+","+this.viewerName+","+this.viewerVersion+","+b.Version.version+",,,"+k[3]+"/"+k[4];f.src=j}};b.ParameterManager.prototype.setViewer=function(e){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.setViewer - inParams: %0",e);var f=e.split(",");if(f.length==3){this.viewerType=f[0];this.viewerVersion=f[1];this.viewerName=f[2]}else{if(f.length==2){this.viewerType=f[0];this.viewerVersion=f[1]}else{b.Logger.log(b.Logger.WARNING,"Invalid parameter for ParameterManager.setViewer(<inParams>):"+e)}}};b.ParameterManager.prototype.createLoadData=function(){var g=window.location.href;if(!this.viewerName||this.viewerName.length<1){this.viewerName=g.split("?")[0].split("/").pop();if(this.viewerName.indexOf(".")>0){this.viewerName=this.viewerName.split(".")[0]}}var h="",f="";var i=this.get("asset");if(!i){i=this.get("asset","","MediaSet")}if(i&&i.length>0){var e=i.indexOf("/");if(e>-1){f=i.substring(0,e);h=i.substring(e+1)}}return this.viewerType+","+this.viewerName+","+this.viewerVersion+","+b.Version.version+","+f+","+h};b.ParameterManager.prototype.onReady=function(){};b.ParameterManager.prototype.getModKey=function(f){var e=f.split(".");e[e.length-1]=e[e.length-1].toLowerCase();return e.join(".")};b.ParameterManager.prototype.push=function(e,g){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.push - key: %0, value: %1",e,g);var f=this.getModKey(e);if(!b.Util.isNull(this.modifierMap)&&!b.Util.isNull(this.modifierMap[f])){f=this.modifierMap[f]}if(!this.params[f]){this.params[f]=g}};b.ParameterManager.prototype.del=function(e){var f=this.getModKey(e);delete this.params[f]};b.ParameterManager.prototype.bulkPush=function(f){for(var e in f){if(!f.hasOwnProperty(e)){continue}this.push(e,(f.hasOwnProperty(e)?f[e]:null))}};b.ParameterManager.prototype.get=function(f,e,g,j){var i;var h=f.toLowerCase();if(j&&this.params[j+"."+h]){i=this.params[j+"."+h]}else{if(g&&this.params[g+"."+h]){i=this.params[g+"."+h]}else{i=(this.params[h]?this.params[h]:e)}}return i};b.ParameterManager.prototype.toString=function(){var f="ParameterManager: { ";for(var e in this.params){if(this.params.hasOwnProperty(e)){f+=e+"="+this.params[e]+" "}}f+="}";return f};b.ParameterManager.prototype.getLocalizedText=function(e,f){if(!b.Util.isNull(this.i18n[e])){return this.i18n[e]}return f};b.ParameterManager.prototype.listSymbols=function(){b.Logger.log(b.Logger.FINE,"s7sdk.ParameterManager.listSymbols");var m=this.getRegisteredComponents();var e={};var l="";var h;for(var j=0;j<m.length;j++){h=m[j].getSymbols();if(h!=null){for(var g in h){if(this.i18n[m[j].getClassName()+"."+g]){e[m[j].getClassName()+"."+g]=this.i18n[m[j].getClassName()+"."+g]}else{e[m[j].getClassName()+"."+g]=h[g]}var f='"'+m[j].getClassName()+"."+g+'":"'+e[m[j].getClassName()+"."+g]+'"';if(l==""){l+=f}else{l+=","+f}}}}return"{"+l+"}"};b.ParameterManager.prototype.populateLocalizedTexts=function(){var f=this.localizedTexts[this.locale];if(b.Util.isNull(f)){f=this.localizedTexts[(!b.Util.isNull(this.localizedTexts.defaultLocale)?this.localizedTexts.defaultLocale:"en")]}for(var e in f){if(f.hasOwnProperty(e)){this.i18n[e]=f[e]}}};b.ParameterManager.prototype.remap=function(){if(this.modifierMap!=null){var g={};for(var f in this.params){if(!this.params.hasOwnProperty(f)){continue}if(!b.Util.isNull(this.modifierMap[f])){var e=this.modifierMap[f];g[e]=this.params[f]}else{g[f]=this.params[f]}}this.params=g}};b.ParameterManager.prototype.dispose=function(){var g=this.resolveCSSPathFromStyleModifier();var e=document.getElementsByTagName("link");for(var f=e.length;f>=0;f--){if(e[f]&&e[f].getAttribute("href")!=null&&e[f].getAttribute("href").indexOf(g)!=-1&&e[f].getAttribute("pmid")==this.id){e[f].parentNode.removeChild(e[f]);break}}this.isDisposed=true;this.registeredComponents=[];this.eventObj=null;if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}this.obj=null}}if(!b.Color){b.Color=function(e){this.rawdata=e;this.hex=(typeof e=="number"?e.toString(16):e);this.hex=this.hex.replace("#","");this.hex=this.hex.replace("0x","");this.hex=this.hex.substring(0,6);var f=parseInt(this.hex,16);this.rgb={r:(f>>16)&255,g:(f>>8)&255,b:f&255}};b.Color.prototype.toString=function(){return"RAW:"+this.rawdata+"HEX:"+this.hex};b.Color.prototype.hexColor=function(){return"#"+this.hex};b.Color.prototype.rgbColor=function(){return this.rgb}}if(!b.Logger){b.Logger={console:{minlink:{id:"s7debugmaxlink",obj:null,pos:{x:5,y:5}},popup:{id:"s7debug",obj:null,pos:{x:5,y:5}},content:{id:"s7debugcontent",obj:null},nativeConsole:null},NONE:-1,SEVERE:0,WARNING:1,INFO:2,CONFIG:3,FINE:4,FINER:5,FINEST:6,severity:["SEVERE","WARNING","INFO","CONFIG","FINE","FINER","FINEST"],traceLevel:-1,enablePopup:false,enableInline:false,init:function(){var f=b.query.getValue("loglevel","SEVERE").toUpperCase();var g=f.split(",")[0];b.Logger.enablePopup=((f.split(",").length>1?f.split(",")[1]:"NONE")=="POPUP");b.Logger.enableInline=((f.split(",").length>1?f.split(",")[1]:"NONE")=="INLINE");var e=b.Logger[g];b.Logger.traceLevel=(typeof e=="undefined"?0:e);if(b.Logger.traceLevel>-1){if(b.Logger.enableInline){b.Logger.inlineDiv=null;b.Util.css.add("div.s7debuginline","height:300px;background-color:#FFFFFF;border:1px solid #CCCCCC;overflow:auto;position:relative;bottom:0px;width:100%")}if(b.Logger.enablePopup){b.Util.css.add("a.s7debugmaxlink","position:absolute;top:0px;left:0px;font-family:Arial;font-size:10px;font-weight:bold;text-align:center;display:block;height:15px;line-height:15px;width:80px;border:1px dotted #FF6600;color: #FF6600;background-color:#FFFFFF;z-index:1000;text-decoration:none;opacity:0.8;");b.Util.css.add("a.s7debugmaxlink:hover","border:1px solid #FF0000; color:#FF0000;");b.Util.css.add("a.s7debugminlink","display:block;width:80px;margin-right:5px;font-family:Arial;font-size:10px;font-weight:bold;color:#FF6600;text-decoration:none;");b.Util.css.add("a.s7debugminlink:hover","color:#FF6600;");b.Util.css.add("div.s7debugpopup","position:absolute;width:300px;height:200px;z-index:1000;border:1px solid #CCCCCC;background-color:#CCCCCC;box-shadow:2px 2px 2px #555555;cursor:move;opacity:0.9;border-radius:5px;");b.Util.css.add("div.s7debugcontent","width:280px;height:170px;margin: 0 0 0 9px; border:1px solid #CCCCCC;overflow:scroll;background-color:#FFFFFF;cursor:pointer;");b.Util.css.add("div.s7debugheader","width:298px;line-height:20px;clear:both;");b.Util.css.add("div.s7debuglabel","width:150px;font-weight:bold;color:#222222;float:left;margin-left:5px;font-family:Arial;font-size:11px;");b.Util.css.add("div.s7debugitem","border-bottom:1px dotted #CCCCCC;font:11px Arial;padding:5px 0px 5px 5px;");if(window.addEventListener){window.addEventListener("load",b.Logger.createConsole,false)}else{if(document.attachEvent){window.attachEvent("onload",function(){b.Logger.createConsole()})}}}if(typeof window.console!="undefined"){b.Logger.console.nativeConsole=function(h){window.console.log(h)}}else{if(typeof console!="undefined"&&typeof console.log!="undefined"){b.Logger.console.nativeConsole=function(h){console.log(h)}}else{b.Logger.console.nativeConsole=function(h){}}}}},minimize:function(e){b.Logger.console.popup.obj.style.top=(e?"-1000px":b.Logger.console.popup.pos.y+"px");b.Logger.console.minlink.obj.style.top=(e?b.Logger.console.minlink.pos.y+"px":"-1000px")},createConsole:function(){var f=document.createElement("a");f.className="s7debugmaxlink";f.setAttribute("id","s7debugmaxlink");f.setAttribute("href","javascript:void(0);");f.setAttribute("title","Click to show trace console");f.appendChild(document.createTextNode("+ Show Trace"));if(f.addEventListener){f.addEventListener("click",function(){b.Logger.minimize(false)},false)}else{f.attachEvent("onclick",function(){b.Logger.minimize(false)})}b.Util.setObjPos(f,b.Logger.console.minlink.pos.x,b.Logger.console.minlink.pos.y);b.Logger.console.minlink.obj=f;document.body.appendChild(f);var i=document.createElement("div");i.setAttribute("id","s7debug");b.Util.setObjPos(i,b.Logger.console.popup.pos.x,b.Logger.console.popup.pos.y);i.className="s7debugpopup";if(i.addEventListener){i.addEventListener("mousedown",b.Logger.drag,false);i.addEventListener("mouseup",b.Logger.drop,false)}else{i.attachEvent("onmousedown",b.Logger.drag);i.attachEvent("onmouseup",b.Logger.drop)}i.dragStart=false;i.dragRef={x:0,y:0};b.Logger.console.popup.obj=i;var e=document.createElement("div");e.setAttribute("align","right");e.className="s7debugheader";var g=document.createElement("div");g.className="s7debuglabel";g.setAttribute("align","left");g.appendChild(document.createTextNode("S7 Trace Console"));e.appendChild(g);var j=document.createElement("a");j.setAttribute("href","javascript:void(0);");j.className="s7debugminlink";j.setAttribute("title","Click to minimize trace console");j.onclick=function(){b.Logger.minimize(true)};j.appendChild(document.createTextNode("- minimize"));e.appendChild(j);i.appendChild(e);var h=document.createElement("div");h.setAttribute("id","s7debugcontent");h.nodrag=true;h.className="s7debugcontent";i.appendChild(h);b.Logger.console.content.obj=h;document.body.appendChild(i);b.Logger.minimize(false)},getPos:function(f){if(f.pageX||f.pageY){return{x:f.pageX,y:f.pageY}}else{return{x:f.clientX+document.body.scrollLeft-document.body.clientLeft,y:f.clientY+document.body.scrollTop-document.body.clientTop}}},drag:function(h){var g=b.Event.getTarget(h);var f=(typeof g.nodrag=="undefined"?false:g.nodrag);if(!f){b.Logger.console.popup.obj.dragStart=true;b.Logger.console.popup.obj.dragRef=b.Logger.getPos(h);if(document.addEventListener){document.addEventListener("mousemove",b.Logger.move,false)}else{document.attachEvent("onmousemove",b.Logger.move)}}},move:function(h){if(b.Logger.console.popup.obj.dragStart){var i=b.Logger.getPos(h);var g=i.x-b.Logger.console.popup.obj.dragRef.x;var f=i.y-b.Logger.console.popup.obj.dragRef.y;b.Logger.console.popup.obj.dragRef=i;b.Logger.console.popup.pos.x=b.Logger.console.popup.pos.x+g;b.Logger.console.popup.pos.y=b.Logger.console.popup.pos.y+f;b.Logger.console.popup.obj.style.top=b.Logger.console.popup.pos.y+"px";b.Logger.console.popup.obj.style.left=b.Logger.console.popup.pos.x+"px"}},drop:function(g){var f=b.Event.getTarget(g);b.Logger.console.popup.obj.dragStart=false;if(document.addEventListener){document.addEventListener("mousemove",b.Logger.move,false)}else{document.attachEvent("onmousemove",b.Logger.move)}},log:function(){var m=(arguments.length>=1?arguments[0]:"");if(b.Logger.traceLevel>=m){var g=b.Logger.severity[m];var l=(arguments.length>=2?arguments[1]:"");var f=new Array();for(var h=2;h<arguments.length;h++){f.push(arguments[h])}l=b.Logger.parseMacro(l,f);var k=(new Date()+" ").substring(0,34);if(b.Logger.console.content.obj!=null){var j=document.createElement("div");j.className="s7debugitem";j.appendChild(document.createTextNode(k+" - "+g+":"+l));j.nodrag=true;b.Logger.console.content.obj.appendChild(j);b.Logger.console.content.obj.scrollTop=b.Logger.console.content.obj.scrollHeight}if(b.Logger.enableInline&&document.body){if(null==b.Logger.inlineDiv){b.Logger.inlineDiv=document.createElement("div");b.Logger.inlineDiv.className="s7debuginline";document.body.appendChild(b.Logger.inlineDiv)}var e=b.Logger.inlineDiv.innerHTML;if(e.length>5000){e=e.substr(0,5000)}b.Logger.inlineDiv.innerHTML=g+":"+l+"<br>"+e}if(b.browser.name!="ie"){b.Logger.console.nativeConsole(k+" - "+g+":"+l)}}},parseMacro:function(j,h){var e=j;for(var f=h.length;f>0;f--){var g=new RegExp("%"+(f-1),"g");e=e.replace(g,h[f-1])}return e}};b.Logger.init()}if(!b.ImagePool){b.ImagePool=function(){this.freeImages=[];this.usedImages=[]};b.ImagePool.prototype.getImage=function(){var e;if(this.freeImages.length>0){e=this.freeImages.pop()}else{e=new Image()}this.usedImages.push(e);return e};b.ImagePool.prototype.releaseImage=function(f){f.height=1;f.width=1;f.onload=function(){};f.onerror=function(){};f.onabort=function(){};var e=this.usedImages.indexOf(f);if(e>=0){this.usedImages.splice(e,1)}else{b.Logger.log(b.Logger.WARNING,"ImagePool.releaseImage with unused image.")}var e=this.freeImages.indexOf(f);if(e>=0){b.Logger.log(b.Logger.SEVERE,"ImagePool.releaseImage double release.")}else{this.freeImages.push(f)}};b.imagePool=new b.ImagePool()}if(!b.CSSUtility){b.CSSUtility=function(){};b.CSSUtility.getPageCSSByDescription=function(h,g){var e=document.getElementsByTagName("style");var f=this.getStyleByDataDescriptor(h,e,h,g);return f};b.CSSUtility.getStyleByDataDescriptor=function(e,j,k,h){var g=0,f=j.length;for(g=0;g<f;g+=1){element=j[g];if((element.getAttribute("data-description")==k)&&(element.getAttribute("data-instance")==h)){return element}}return null};b.CSSUtility.addStyle=function(f,o,n,k,j){var h="";for(var g in k){h=(j?"#"+j:"")+g+"{\n";for(var m in k[g]){h+=("\t"+m+":"+k[g][m]+";\n")}h+="}";var e=b.Util.createElement("style",{type:"text/css",media:"screen","data-description":g,"data-component":g,"data-instance":j});if(e.styleSheet){e.styleSheet.cssText=h}else{e.appendChild(document.createTextNode(h))}var l=document.head||document.getElementsByTagName("head")[0];b.CSSUtility.removeStyle(g,j);l.appendChild(e)}};b.CSSUtility.removeStyle=function(h,g){var f=document.head||document.getElementsByTagName("head")[0];var e=b.CSSUtility.getPageCSSByDescription(h,g);if(e){f.removeChild(e)}}}if(!b.Window){b.Window={resizedObjs:[],resizeTimeout:null,currentSize:{w:0,h:0},monitorSizeTime:10000,monitorSizeTimeout:0,monitorSizeTimer:null,attach:function(f,e){if(typeof e!="string"){e="resize"}this.resizedObjs.push({o:f,fn:e})},detach:function(h,g){var e=-1;for(var f=0;f<this.resizedObjs.length;f++){if(this.resizedObjs[f].o===h&&this.resizedObjs[f].fn===g){e=f;break}}if(e!=-1){this.resizedObjs.splice(e,1)}},notfWindowResized:function(){b.browser.screensize=b.browser.detectScreen();if((b.browser.name=="ie")&&(b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)){b.Window.ignoreNextResize=true}b.Window.sendNotifications()},sendNotifications:function(){for(var e=0;e<b.Window.resizedObjs.length;e++){if(b.Window.resizedObjs[e]){var g=b.Window.resizedObjs[e].o;var f=b.Window.resizedObjs[e].fn;g[f](b.browser.screensize.w,b.browser.screensize.h)}}},monitorSize:function(){b.browser.screensize=b.browser.detectScreen();if(b.Window.currentSize.w!=b.browser.screensize.w||b.Window.currentSize.h!=b.browser.screensize.h){b.Window.currentSize=b.browser.screensize;b.Window.sendNotifications()}if((new Date()).getTime()>b.Window.monitorSizeTimeout){clearInterval(b.Window.monitorSizeTimer);b.Window.monitorSizeTimer=null}},startMonitoringSize:function(){b.Window.monitorSizeTimeout=(new Date()).getTime()+b.Window.monitorSizeTime;if(null==b.Window.monitorSizeTimer){b.Window.monitorSizeTimer=window.setInterval(b.Window.monitorSize,100)}}};if(("onorientationchange" in window)&&b.browser.device!=""){window.onorientationchange=b.Window.startMonitoringSize;window.onresize=b.Window.startMonitoringSize}else{window.onresize=function(){if(b.Window.ignoreNextResize){b.Window.ignoreNextResize=false;return}if(b.Window.resizeTimeout){clearTimeout(b.Window.resizeTimeout)}b.Window.resizeTimeout=setTimeout(b.Window.notfWindowResized,100)}}}if(!b.Observable){b.Observable=function d(){this.listeners={};this.properties={}};b.Observable.prototype.notifyPropertyChanged=function(l,g,m){if(g&&g.equal(m)||g===m){return}var e=this.listeners["*"]||[];for(var f=0;f<e.length;f++){e[f](l,g,m)}var k=this.listeners[l];if(b.Util.isNull(k)){return}for(var h=0;h<k.length;h++){k[h](l,g,m)}};b.Observable.prototype.addPropertyListener=function(g,f){if(!f||typeof f!=="function"){return}var e=this.listeners[g];if(!e){e=this.listeners[g]=[]}e.push(f)};b.Observable.prototype.addPropertyListeners=function(e){this.addPropertyListener("*",e)};b.Observable.prototype.removePropertyListener=function(h,g){if(!g||typeof g!=="function"){return}var f=this.listeners[h];if(!f){return}var e=f.indexOf(g);if(e!==-1){f.splice(e,1)}};b.Observable.prototype.removePropertyListeners=function(e){this.removePropertyListener("*",e)}}if(!b.TrackingManager){b.TrackingManager=function TrackingManager(e,g,f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager constructor - containerId: %0, settings: %1 , compId: %2",e,g,f);if(null==g){g=new b.ParameterManager()}if(null==e){e="TrackMan"+b.Util.createUniqueId()}arguments.callee.superclass.apply(this,[f,e,"span",null,g]);this.initialized=false;this.trackComponents=[];this.trackEvents=[];this.eventObj=new Image();this.hadCustomSize=false;this.obj=this.eventObj;this.obj.style.display="none";this.eventTable={};this.handlerTable={};this.callback=undefined};b.Class.inherits("s7sdk.TrackingManager","s7sdk.Component");b.TrackingManager.prototype.modifiers={enableTracking:{params:["events"],defaults:[""],parseParams:false},disableTracking:{params:["events"],defaults:[""],parseParams:false}};b.TrackingManager.prototype.setCallback=function(f,e){this.callback=f;if(e){this.callbackContext=e}};b.TrackingManager.prototype.initializeComponentEvents=function(h){var k=[];if(b.TrackingManager.AVAILABLE_EVENTS.length<1){b.TrackingManager.AVAILABLE_EVENTS=[b.event.UserEvent.SWAP,b.event.UserEvent.SWATCH,b.event.UserEvent.PAGE,b.event.UserEvent.PLAY,b.event.UserEvent.PAUSE,b.event.UserEvent.STALLED,b.event.UserEvent.STOP,b.event.UserEvent.MILESTONE,b.event.UserEvent.METADATA,b.event.UserEvent.HREF,b.event.UserEvent.ITEM,b.event.UserEvent.TARG,b.event.UserEvent.LOAD,b.event.UserEvent.ZOOM,b.event.UserEvent.SPIN,b.event.UserEvent.PAN,b.event.UserEvent.BANNER,b.event.UserEvent.INTERACTIVE_SWATCH]}var j=this.disableTracking.split(",");var g;if(j.length>0&&this.enableTracking.length==0){g=b.TrackingManager.AVAILABLE_EVENTS}else{g=this.enableTracking.split(",")}if(j.length>0){for(var f=0;f<g.length;f++){var i=g[f];if(j.indexOf(i)<0){k.push(i)}}}this.eventTable[h.pid]=k};b.TrackingManager.prototype.initializeEvents=function(){this.trackEvents=[];if(b.TrackingManager.AVAILABLE_EVENTS.length<1){b.TrackingManager.AVAILABLE_EVENTS=[b.event.UserEvent.SWAP,b.event.UserEvent.SWATCH,b.event.UserEvent.PAGE,b.event.UserEvent.PLAY,b.event.UserEvent.PAUSE,b.event.UserEvent.STALLED,b.event.UserEvent.STOP,b.event.UserEvent.MILESTONE,b.event.UserEvent.METADATA,b.event.UserEvent.HREF,b.event.UserEvent.ITEM,b.event.UserEvent.TARG,b.event.UserEvent.LOAD,b.event.UserEvent.ZOOM,b.event.UserEvent.SPIN,b.event.UserEvent.PAN,b.event.UserEvent.BANNER,b.event.UserEvent.INTERACTIVE_SWATCH]}var h=this.disableTracking.split(",");var i;if(h.length>0&&this.enableTracking.length==0){i=b.TrackingManager.AVAILABLE_EVENTS}else{i=this.enableTracking.split(",")}if(h.length>0){for(var f=0;f<i.length;f++){var g=i[f];if(h.indexOf(g)<0){this.trackEvents.push(g)}}}this.initialized=true};b.TrackingManager.AVAILABLE_EVENTS=[];b.TrackingManager.modifiers="";b.TrackingManager.prototype.attach=function(e,f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.attach - component: %0",e);if(null==e){return}if(this.trackComponents.indexOf(e)<0){this.trackComponents.push(e);this.initializeComponentEvents(e);e.trackingManager=this;b.Event.addEventHandler(e,b.event.UserEvent.NOTF_USER_EVENT,e,this.onUserEvent,false)}if(f){this.handlerTable[e.pid]=f}};b.TrackingManager.prototype.detach=function(f){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.detach - component: %0",f);if(null==f){return}f.removeEventListener(b.event.UserEvent.NOTF_USER_EVENT,this.onUserEvent,false);var e=this.trackComponents.indexOf(f);if(e<0){return}this.eventTable[f.pid]=[];this.trackComponents=this.trackComponents.splice(e,1);this.handlerTable[f.pid]=null;delete f.trackingManager};b.TrackingManager.prototype.onUserEvent=function(e){if(!this.trackingManager){return}var g=this.trackingManager.eventTable[this.pid];if(g.indexOf(e.s7event.trackEvent)==-1){return}b.Logger.log(b.Logger.CONFIG,"onUserEvent "+e.s7event.toString());var f=b.Event.getTarget(e);this.trackingManager.callTrackingHandler(this,(f&&f.id)?f.id:"",e.s7event.toString())};b.TrackingManager.prototype.callTrackingHandler=function(h,f,j){b.Logger.log(b.Logger.FINE,"s7sdk.TrackingManager.callTrackingHandler - component: %0, instanceName: %1 , dataString: %2",h,f,j);var e=h.compId;var i=h.getClassName();var g=(new Date()).getTime();if(null==f){f=""}if(this.handlerTable[e]&&typeof this.handlerTable[e]=="function"){(this.handlerTable[e])(e,i,f,g,j)}else{if(this.callback&&typeof this.callback=="function"){if(this.callbackContext){this.callback.apply(this.callbackContext,[e,i,f,g,j])}else{(this.callback)(e,i,f,g,j)}}else{if("s7ComponentEvent" in window){s7ComponentEvent(e,i,f,g,j)}}}};b.TrackingManager.prototype.parseTrack=function(h,e){var f=h.split(",");if(f.length==1){if((f[0]).toLowerCase()=="all"){this.trackEvents=e?b.TrackingManager.AVAILABLE_EVENTS.concat():[];return}}if(e){this.trackEvents=[]}for(var g=0;g<f.length;g++){var k=f[g].toUpperCase();k=k.replace(/^[ \t]+/,"");k=k.replace(/[ \t]+$/,"");var j=this.AVAILABLE_EVENTS.indexOf(k);if(j!=-1){if(e){j=this.trackEvents.indexOf(k);if(j==-1){this.trackEvents.push(k)}}else{j=this.trackEvents.indexOf(k);if(j!=-1){this.trackEvents.splice(j,1)}}}}};b.TrackingManager.prototype.dispose=function(){this.setCallback(null);for(var e=0;e<this.trackComponents.length;e++){this.detach(this.trackComponents[e])}if(this.settings){this.settings.dispose()}}}})(s7getCurrentNameSpace());(function(a){(function(){var f="s7sdk.set.MediaSet,s7sdk.common.Geometry,s7sdk.common.IS,s7sdk.common.Data,s7sdk.common.ItemDesc,s7sdk.utils.SwatchesParser,s7sdk.event.Event,s7sdk.utils.Version,s7sdk.image.ZoomView,s7sdk.image.rgn.View,s7sdk.common.Enumeration,s7sdk.image.rgn.Resolution,s7sdk.image.View,s7sdk.image.Resolution,s7sdk.image.Tile,s7sdk.common.IconEffect,s7sdk.event.InputController2,s7sdk.common.Button,s7sdk.common.Thumb,s7sdk.common.Container";if(f.indexOf("PREDEFINEDPKG")==-1){var b=f.split(",");for(var d=0;d<b.length;d++){var e=false;for(var c=0;c<a.Util.lib.jsList.length;c++){if(a.Util.lib.jsList[c].name==b[d]){a.Util.lib.jsList[c].loaded=true;e=true;break}}if(!e){a.Util.lib.jsList.push({name:b[d],loaded:true})}}}})()})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.pkg("s7sdk.set");a.Util.require("s7sdk.common.Geometry");a.Util.require("s7sdk.common.IS");a.Util.require("s7sdk.common.ItemDesc");a.Util.require("s7sdk.utils.SwatchesParser");a.Util.require("s7sdk.event.Event");if(!a.set.MediaSetControl){a.set.MediaSetControl=function(b){arguments.callee.superclass.apply(this,[b,a.set.MediaSetControl.NS,b.constructor,a.set.MediaSet.RESTRICTED_STYLES])};a.set.MediaSetControl.NS="s7sdk.set.MediaSetControl";a.set.MediaSetControl.prototype.setModifier=function(b){var e="";var o=this.component.getModifiers();var q=this.component.settings;var n=false;var p={};for(var l in b){var r=l.toLowerCase();p[r]=b[l]}var f=p.asset;var h=(f?f:this.component.asset);var j=false;for(var g in o){var d=g.toLowerCase();var m;if(p[d]){if(d=="serverurl"){a.Logger.log(a.Logger.INFO,"s7sdk.set.MediaSet setModifier - unsupported modifier: %0",g);continue}m=p[d];if(d=="enableorientation"&&this.component.jsonSet){var c=m.toString().toLowerCase();if(c=="1"||c=="true"||c=="false"||c=="0"){this.component.enableOrientation=c=="1"||c=="true";this.component.requestComplete({set:this.component.jsonSet},this.component)}else{continue}}else{if(d=="asset"&&m&&m!=""){e=this.component.asset;n=true;j=true}else{if(d=="labelkey"&&m){e=this.component.labelKey;this.component.labelKey=m;n=true}else{if(d=="flattensets"&&m){var c=m.toString().toLowerCase();if(c=="1"||c=="true"||c=="false"||c=="0"||(c.split(",").length>1)){e=this.component.flattenSets.enabled+","+this.component.flattenSets.ignoreSwatches;if(c.split(",").length>1){this.component.flattenSets.enabled=c.split(",")[0]==("1"||"true")?true:false;this.component.flattenSets.ignoreSwatches=c.split(",")[1]==("1"||"true")?true:false}else{this.component.flattenSets.enabled=c==("1"||"true")?true:false;this.component.flattenSets.ignoreSwatches=false}this.component.requestComplete({set:this.component.jsonSet},this.component)}else{continue}}}}}this.dispatchEvent(new a.event.ControlComponentEvent(a.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:e,newvalue:m,property:d},false))}}if(n){this.component.setAssetInternal(h,j)}};a.set.MediaSetControl.prototype.unload=function(){}}a.Class.inherits(a.set.MediaSetControl.NS,"s7sdk.ControlComponent");if(!a.set.MediaSet){a.set.MediaSet=function MediaSet(b,d,c){var e=!!arguments[3];a.Logger.log(a.Logger.CONFIG,"s7sdk.set.MediaSet constructor - containerId: %0, settings: %1 , compId: %2",b,d,c);arguments.callee.superclass.apply(this,[c,b,"div","s7mediaset",d,!e]);this.createElement();this.mediaSetDesc=null;this.globalISModifier=null;this.locale=this.getParam("locale","");this.dir=this.direction=="auto"?this.locale=="ja":this.direction!="left";this.serverUrl=a.Util.normalizeUrl(this.serverUrl);if(typeof(this.asset)=="string"&&this.asset.length>0){this.requestMediaSet()}if(!e){return new a.set.MediaSetControl(this)}else{return this}};a.Class.inherits("s7sdk.set.MediaSet","s7sdk.UIComponent");a.set.MediaSet.prototype.symbols={};a.set.MediaSet.prototype.modifiers={asset:{params:["asset"],defaults:[""],parseParams:false},serverUrl:{params:["isRootPath"],defaults:["/is/image/"]},direction:{params:["direction"],defaults:["auto"],ranges:[["auto","left","right"]]},enableOrientation:{params:["value"],defaults:[false],ranges:[[true,false]]},labelKey:{params:["key"],defaults:["label"]},aemmode:{params:["value"],defaults:[false],ranges:[[true,false]]},flattenSets:{params:["enabled","ignoreSwatches"],defaults:[false,false]}};a.set.MediaSet.prototype.setAsset=function(b){this.setAssetInternal(b,true)};a.set.MediaSet.prototype.setAssetInternal=function(b,c){a.Logger.log(a.Logger.FINE,"s7sdk.set.MediaSet.setAsset - asset: %0",b);this.blockLabels=c;b=b.toString();if(b==""||b==null){return}if(b!=null&&this.asset!=null&&this.asset!=""){var d=decodeURIComponent(b).split("/",2);var e=(d.length==2)?d[1]:d[0];this.dispatchEvent(new a.event.UserEvent(a.event.UserEvent.SWAP,[0,e]))}this.asset=b;this.requestMediaSet()};a.set.MediaSet.prototype.addEventListener=function(d,c,b){a.Logger.log(a.Logger.FINE,"s7sdk.set.MediaSet.addEventListener - type: %0, handler: %1, useCapture: %2",d,c.toString().substring(0,c.toString().indexOf("(")),b);this.superproto.addEventListener.apply(this,[d,c,b])};a.set.MediaSet.prototype.requestMediaSet=function(){a.Logger.log(a.Logger.INFO,"MediaSet.requestMediaSet");this.mediaSet_=this.asset;var c;var b=a.MediaSetParser.parseAssetForSetReq(this.asset);this.globalISModifier=b.mod;if(this.aemmode){c=a.Util.resolveURL(this.serverUrl,this.asset);c+=(c.indexOf("?")==-1)?"?":"&";c+="req=set,json,UTF-8"}else{c=a.Util.resolveURL(this.serverUrl,b.req)}if(a.Util.isNonEmptyString(this.labelKey)){c+="&labelkey="+this.labelKey}if(a.Util.isNonEmptyString(this.locale)){c+="&locale="+this.locale}this.isReq_=new a.IS();this.isReq_.getHttpReq(c,this.requestComplete,this.requestError,this)};a.set.MediaSet.prototype.requestComplete=function(c,g){var b=c.set;if(b==null){return}g.jsonSet=c.set;var j=a.MediaSetParser.parse(b,g.aemmode?undefined:g.globalISModifier,g.aemmode,g.dir);if(g.aemmode&&j.type==a.ItemDescType.SPIN_SET&&j.items.length==1){var h=new a.MediaSetDesc(j.parent,j.level,j.type,j.name,j.swatch);for(var e=0;e<j.items[0].items.length;e++){h.items.push(j.items[0].items[e])}j=h}else{if(g.flattenSets.enabled){var h=new a.MediaSetDesc(j.parent,j.level,j.type,j.name,j.swatch);for(var e=0;e<j.items.length;e++){if(j.items[e].type==a.ItemDescType.IMAGE_SET){for(var d=0;d<j.items[e].items.length;d++){if(g.flattenSets.ignoreSwatches){if(j.items[e].items[d].swatch){j.items[e].items[d].swatch.image=j.items[e].items[d].name}}h.items.push(j.items[e].items[d])}}else{h.items.push(j.items[e])}}j=h}}g.mediaSetDesc_=g.enableOrientation?a.set.MediaSet.prototype.createSplitFramesMediaSet(j,true):j;if(g.updateLandscapeLabels){g.updateLabels()}var f=new a.event.AssetEvent(a.event.AssetEvent.NOTF_SET_PARSED,g.mediaSetDesc_,0,true);g.dispatchEvent(f)};a.set.MediaSet.prototype.setMediaSetData=function(c){if(c){var b={};b.set=c;this.requestComplete(b,this)}};a.set.MediaSet.prototype.updateLabels=function(){this.updateLandscapeLabels();this.updatePortraitLabels()};a.set.MediaSet.prototype.updateLandscapeLabels=function(){var j=this.mediaSetDesc_.landscape?this.mediaSetDesc_.landscape.items:this.mediaSetDesc_.items;var b=this.getLocalizedText("LABEL_DELIM");b=b&&!this.blockLabels?b:" - ";for(var g=0;g<j.length;g++){var m=j[g];var k=g.toString();var e=m.label;var h=undefined;var f=undefined;if(m.images){e=undefined;if(m.images[0].label){h=m.images[0].label}if(m.images[1]&&m.images[1].label){f=m.images[1].label}}var n=this.blockLabels?null:this.getLocalizedText("LABEL_"+k);var d=this.blockLabels?null:this.getLocalizedText("LABEL_"+k+"_0");var c=this.blockLabels?null:this.getLocalizedText("LABEL_"+k+"_1");var l=undefined;if(!m.np){if(n){l=n}else{if(d){l=d;if(c){l+=b+c}}else{if(e){l=e}else{if(h){l=h;if(f){l+=b+f}}else{if(f){l=f}}}}}}else{if(n){l=n}else{if(d){l=d}else{if(e){l=e}}}}m.label=l}};a.set.MediaSet.prototype.updatePortraitLabels=function(){if(!this.mediaSetDesc_.portrait){return}var g=this.mediaSetDesc_.portrait.items;var b=null;var c=false;var e=0;for(var f=0;f<g.length;f++){var j=g[f];if(f==0&&j.halfFrame){c=true}b=((c?f:f-1)&1)==0?"_0":"_1";var d=null;var h=e.toString();var k=this.getLocalizedText("LABEL_"+h);if(b=="_0"){d=this.getLocalizedText("LABEL_"+h+"_0")}else{d=this.getLocalizedText("LABEL_"+h+"_1");e++}if(d){j.label=d}else{if(k){j.label=k}}}};a.set.MediaSet.prototype.requestError=function(b,c){a.Logger.log(a.Logger.WARNING,"s7sdk.set.MediaSet.requestError - response: %0",b)};a.set.MediaSet.prototype.setModifier=function(b){throw new Error("Trying to use setModifier on the Core class (MediaSet) is unsupported! Please refer to SDK documentation on using setModifier.")};a.set.MediaSet.prototype.cloneImageDesc=function(b,d){var c=new a.ImageDesc(b,d.type,d.name,d.swatch);c.isDefault=d.isDefault;c.mod=d.mod;c.pmod=d.pmod;c.label=d.label;c.width=d.width;c.height=d.height;c.version=d.version;c.maps=d.maps;c.targets=d.targets;c.userData=d.userData;c.mapsuppressed=d.mapsuppressed;c.userdatasuppressed=d.userdatasuppressed;c.np=d.np;c.images=d.images;return c};a.set.MediaSet.prototype.createSplitFramesMediaSet=function(n,c){var m=new a.MediaSetDesc(n.parent,n.level,n.type,n.name,n.swatch);this.maps=n.maps;this.targets=n.targets;this.userdata=n.userdata;var l=new a.OrientationSetDesc(n,m);l.portraitTolandscapeHash=new Object();l.landscapeToportraitHash=new Object();if(!c||!(n.type===a.ItemDescType.ECAT_SET)){for(var h=0;h<n.items.length;h++){var p=n.items[h];m.items.push(p);l.portraitTolandscapeHash[h]=l.landscapeToportraitHash[h]=h}l.splitted=false;return l}var b=0;for(var h=0;h<n.items.length;h++){var p=n.items[h];if(!p.np){if(p.images&&p.images.length==2){var g=Math.round(p.width/2);var d=this.cloneImageDesc(m,p.images[0]);d.np=true;d.width=g;d.mapsuppressed=(p.mapsuppressed||(p.maps&&p.maps.length))?true:false;m.items.push(d);m.items[m.items.length-1].halfFrame=true;l.portraitTolandscapeHash[b]=h;l.landscapeToportraitHash[h]=b;b++;d=this.cloneImageDesc(m,p.images[1]);d.np=true;d.width=g;d.mapsuppressed=(p.mapsuppressed||(p.maps&&p.maps.length))?true:false;m.items.push(d);m.items[m.items.length-1].halfFrame=true}else{var o=p.name.split("?")[0].split("/")[0];var g=Math.round(p.width/2);var k=o+"?src=is("+p.name+(p.name.indexOf("?")==-1?"?":"&")+"rgn=0,0,"+g+","+p.height+")";var j=o+"?src=is("+p.name+(p.name.indexOf("?")==-1?"?":"&")+"rgn="+g+",0,"+g+","+p.height+")";var f,e;e=f=p.label;if(p.images){e=undefined;if(p.images[0].label){f=p.images[0].label}if(p.images[1]&&p.images[1].label){e=p.images[1].label}}m.items.push(new a.ImageDesc(m,p.type,k,null,g,p.height,p.version,p.isDefault,p.mod,p.pmod,f,null,null,null,(p.mapsuppressed||(p.maps&&p.maps.length))?true:false,false,true));m.items[m.items.length-1].halfFrame=true;l.portraitTolandscapeHash[b]=h;l.landscapeToportraitHash[h]=b;b++;m.items.push(new a.ImageDesc(m,p.type,j,null,g,p.height,p.version,p.isDefault,p.mod,p.pmod,e,null,null,null,(p.mapsuppressed||(p.maps&&p.maps.length))?true:false,false,true));m.items[m.items.length-1].halfFrame=true}l.portraitTolandscapeHash[b]=h;b++}else{m.items.push(this.cloneImageDesc(m,p));l.landscapeToportraitHash[h]=b;l.portraitTolandscapeHash[b]=h;b++}}l.splitted=true;return l};a.set.MediaSet.prototype.dispose=function(){if(this.isReq_){this.isReq_.cancelHttpReq();this.isReq_=null}if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}};a.MediaSet=a.set.MediaSet}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(s7sdk){if(!s7sdk.Point2D){s7sdk.Point2D=function Point2D(x,y){this.x=x==null?0:x;this.y=y==null?0:y};s7sdk.Point2D.prototype.clone=function(){return new s7sdk.Point2D(this.x,this.y)};s7sdk.Point2D.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))};s7sdk.Point2D.prototype.add=function(point){return new s7sdk.Point2D(this.x+point.x,this.y+point.y)};s7sdk.Point2D.prototype.subtract=function(point){return new s7sdk.Point2D(this.x-point.x,this.y-point.y)};s7sdk.Point2D.prototype.negate=function(){return new s7sdk.Point2D(-this.x,-this.y)};s7sdk.Point2D.prototype.scale=function(value){return new s7sdk.Point2D(this.x*value,this.y*value)};s7sdk.Point2D.prototype.toString=function(){return""+this.x+", "+this.y};s7sdk.Point2D.prototype.equals=function(value){return this.x==value.x&&this.y==value.y}}if(!s7sdk.Rectangle){s7sdk.Rectangle=function(x,y,width,height){this.x=!x||typeof(x)=="undefined"?0:x;this.y=!y||typeof(y)=="undefined"?0:y;this.width=!width||typeof(width)=="undefined"?0:width;this.height=!height||typeof(height)=="undefined"?0:height};s7sdk.Rectangle.prototype.containsRect=function(rect){if(rect.x<this.x){return false}if(rect.y<this.y){return false}if(rect.width+rect.x>this.width+this.x){return false}if(rect.height+rect.y>this.height+this.y){return false}return true};s7sdk.Rectangle.prototype.containsPoint=function(x,y){if(x<this.x){return false}if(y<this.y){return false}if(x>this.width+this.x){return false}if(y>this.height+this.y){return false}return true};s7sdk.Rectangle.prototype.isEmpty=function(){with(this){if(width>0&&height>0){return false}return true}};s7sdk.Rectangle.prototype.equals=function(rect){if(rect.x!=this.x){return false}if(rect.y!=this.y){return false}if(rect.width!=this.width){return false}if(rect.height!=this.height){return false}return true};s7sdk.Rectangle.prototype.intersection=function(rect){var rectDest=new s7sdk.Rectangle(0,0,0,0);rectDest.x=Math.max(this.x,rect.x);rectDest.y=Math.max(this.y,rect.y);var right=Math.min(this.x+this.width,rect.x+rect.width);var bottom=Math.min(this.y+this.height,rect.y+rect.height);rectDest.width=right>rectDest.x?right-rectDest.x:0;rectDest.height=bottom>rectDest.y?bottom-rectDest.y:0;return rectDest};s7sdk.Rectangle.prototype.topLeft=function(){return new s7sdk.Point2D(this.x,this.y)};s7sdk.Rectangle.prototype.bottomRight=function(){return new s7sdk.Point2D(this.x+this.width,this.y+this.height)};s7sdk.Rectangle.prototype.toString=function(){with(this){return"s7sdk.Rectangle "+x+", "+y+", "+width+", "+height}};s7sdk.Rectangle.prototype.getLeft=function(){return this.x};s7sdk.Rectangle.prototype.getRight=function(){return this.x+this.width};s7sdk.Rectangle.prototype.getTop=function(){return this.y};s7sdk.Rectangle.prototype.getBottom=function(){return this.y+this.height}}if(!s7sdk.Matrix2D){s7sdk.Matrix2D=function(a,b,c,d,tx,ty){this.a=a==null?1:a;this.b=b==null?0:b;this.c=c==null?0:c;this.d=d==null?1:d;this.tx=tx==null?0:tx;this.ty=ty==null?0:ty};s7sdk.Matrix2D.prototype.clone=function(){return new s7sdk.Matrix2D(this.a,this.b,this.c,this.d,this.tx,this.ty)};s7sdk.Matrix2D.prototype.translate=function(dx,dy){this.tx+=dx;this.ty+=dy};s7sdk.Matrix2D.prototype.scale=function(sx,sy){this.a*=sx;this.b*=sy;this.c*=sx;this.d*=sy;this.tx*=sx;this.ty*=sy};s7sdk.Matrix2D.prototype.transformPoint=function(p){var p_out=p.clone();p_out.x=this.a*p.x+this.c*p.y+this.tx;p_out.y=this.b*p.x+this.d*p.y+this.ty;return p_out};s7sdk.Matrix2D.prototype.transformRect=function(rect){var tL=this.transformPoint(rect.topLeft());var bR=this.transformPoint(rect.bottomRight());return new s7sdk.Rectangle(tL.x,tL.y,bR.x-tL.x,bR.y-tL.y)};s7sdk.Matrix2D.prototype.invert=function(){var det=this.a*this.d-this.b*this.c;if(det==0){throw new Error("Matrix is not inversible")}var m=this.clone();this.a=m.d/det;this.b=-m.b/det;this.c=-m.c/det;this.d=m.a/det;this.tx=(m.ty*m.c-m.tx*m.d)/det;this.ty=(m.tx*m.b-m.ty*m.a)/det};s7sdk.Matrix2D.prototype.concat=function(m2){var m1=this.clone();this.a=m2.a*m1.a+m2.c*m1.b;this.b=m2.b*m1.a+m2.d*m1.b;this.c=m2.a*m1.c+m2.c*m1.d;this.d=m2.b*m1.c+m2.d*m1.d;this.ty=m2.b*m1.tx+m2.d*m1.ty+m2.ty;this.tx=m2.a*m1.tx+m2.c*m1.ty+m2.tx};s7sdk.Matrix2D.prototype.toString=function(){with(this){return"Matrix2D("+a+", "+b+", "+c+", "+d+", "+tx+", "+ty+")"}}}if(!s7sdk.TileAddress){s7sdk.TileAddress=function(w,h,idx,pos_x,pos_y){this.w=w;this.h=h;this.idx=idx;this.pos_x=pos_x;this.pos_y=pos_y};s7sdk.TileAddress.prototype.x=function(){return this.pos_x};s7sdk.TileAddress.prototype.y=function(){return this.pos_y}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.Util.require("s7sdk.common.Data");if(!b.Callback){b.Callback=function a(h,g,f,e){this.onSuccess=h;this.onError=g;this.context=f;this.status=e};b.Callback.prototype.cleanUp=function d(){this.onSuccess=b.Callback.noop;this.onError=b.Callback.noop;this.context=b.Callback.noop};b.Callback.pending={};b.Callback.noop=function c(){}}if(!b.IS){b.IS=function(){this.callback=null;this.lastReqId=null};b.IS.STATUS_SUCCESS="success";b.IS.STATUS_ERROR="error";b.IS.STATUS_PENDING="pending";b.IS.STATUS_CANCELLED="cancelled";b.IS.prototype.getHttpReq=function(i,k,g,e){var j=this.lastReqId=this.getHashCode(i);var f=i+"&id="+j+"&handler="+b.namespacePrefix+"s7sdkJSONResponse";b.Callback.pending[j]=b.Callback.pending[j]||[];this.callback=new b.Callback(k,g,e,b.IS.STATUS_PENDING);b.Callback.pending[j].push(this.callback);var h=b.Util.byId("s7req_"+j);if(h){}h=document.createElement("script");h.setAttribute("id","s7req_"+j);h.setAttribute("type","text/javascript");h.setAttribute("language","javascript");h.setAttribute("src",f);if(b.browser.name==="ie"){b.Util.async(function(){b.Util.byFirstTag("head").appendChild(h)},this)}else{b.Util.byFirstTag("head").appendChild(h)}};b.IS.prototype.cancelHttpReq=function(){if((this.callback!=null)&&(this.callback.status==b.IS.STATUS_PENDING)){this.callback.status=b.IS.STATUS_CANCELLED;this.callback.cleanUp()}};b.IS.prototype.getStatus=function(){return this.callback.status};b.IS.prototype.getHashCode=function(k){if(!k||k==""){return 1}var f=0,j=0;for(var e=k.length-1;e>=0;e--){var l=parseInt(k.charCodeAt(e));f=((f<<6)&268435455)+l+(l<<14);if((j=f&266338304)!=0){f=(f^(j>>21))}}return f}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){window[a.namespacePrefix+"s7sdkJSONResponse"]=function(b,d){var c=a.Callback.pending[d].shift();if(c.status==a.IS.STATUS_CANCELLED){return}c.status=a.IS.STATUS_SUCCESS;c.onSuccess(b,c.context);c.cleanUp()};window.s7jsonError=function(b,d){var c=a.Callback.pending[d].shift();if(c.status==a.IS.STATUS_CANCELLED){return}c.status=a.IS.STATUS_ERROR;c.onError(b);c.cleanUp()}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.Util.require("s7sdk.utils.SwatchesParser");if(!b.ItemDesc){b.ItemDesc=function ItemDesc(g,f,d,e){this.parent=g;this.type=f;this.name=d;this.swatch=e};b.ItemDesc.prototype.toString=function(){return this.name}}if(!b.ItemDescType){b.ItemDescType={UNKNOWN:0,IMG:1,VIDEO:2,IMAGE_SET:4,SPIN_SET:8,ECAT_SET:16,MEDIA_SET:32,EMPTY:64,VIDEO_SET:128,VIDEO_GROUP:256};b.ItemDescType.decodeItemDescType=function(d){switch(d){case"img":return b.ItemDescType.IMG;case"img_set":return b.ItemDescType.IMAGE_SET;case"spin":return b.ItemDescType.SPIN_SET;case"video":return b.ItemDescType.VIDEO;case"ecat":return b.ItemDescType.ECAT_SET;case"media_set":return b.ItemDescType.MEDIA_SET;case"empty":return b.ItemDescType.EMPTY;case"video_set":return b.ItemDescType.VIDEO_SET;case"video_group":return b.ItemDescType.VIDEO_GROUP}return b.ItemDescType.UNKNOWN}}if(!b.ImageDesc){b.ImageDesc=function ImageDesc(p,m,d,r,f,t,k,g,n,h,o,l,j,e,s,i,q){arguments.callee.superclass.call(this,p,m,d,r);this.isDefault=g;this.mod=(typeof(n)=="undefined"?null:n);this.pmod=(typeof(h)=="undefined"?null:h);this.label=o;this.width=f;this.height=t;this.version=k;this.maps=l;this.targets=j;this.userData=e;this.mapsuppressed=s;this.userdatasuppressed=i;this.np=q;this.images=null};b.Class.inherits("s7sdk.ImageDesc","s7sdk.ItemDesc");b.ImageDesc.createEmptyImageDesc=function c(f,e,d){return new b.ImageDesc(f,b.ItemDescType.EMPTY,null,null,e,d,null,false,null,null,null,null,null,null,true,false,true)}}if(!b.MapDesc){b.MapDesc=function MapDesc(e,g,i,d,f,h){this.shape=e;this.coords=g;this.alt=i;this.href=d;this.rolloverKey=f;this.target=h}}if(!b.MapDescShape){b.MapDescShape={SHAPE_RECT:"rect",SHAPE_CIRCLE:"circle",SHAPE_POLY:"poly"}}if(!b.MediaSetDesc){b.MediaSetDesc=function MediaSetDesc(g,h,f,d,e){arguments.callee.superclass.call(this,g,f,d,e);this.level=h;this.items=new Array();this.maps=null;this.targets=null;this.userdata=null};b.Class.inherits("s7sdk.MediaSetDesc","s7sdk.ItemDesc")}if(!b.VideoSetDesc){b.VideoSetDesc=function a(g,i,f,d,e,h){arguments.callee.superclass.call(this,g,i,f,d,e);this.image=h};b.Class.inherits("s7sdk.VideoSetDesc","s7sdk.MediaSetDesc")}if(!b.OrientationSetDesc){b.OrientationSetDesc=function OrientationSetDesc(d,e){arguments.callee.superclass.call(this,null,null,null,null);this.landscape=d;this.portrait=e?e:null;this.portraitTolandscapeHash=[];this.landscapeToportraitHash=[]};b.OrientationSetDesc.prototype.getPortraitIndex=function(d){return this.landscapeToportraitHash[d]};b.OrientationSetDesc.prototype.getLandscapeIndex=function(d){return this.portraitTolandscapeHash[d]};b.Class.inherits("s7sdk.OrientationSetDesc","s7sdk.ItemDesc")}if(!b.SwatchDesc){b.SwatchDesc=function SwatchDesc(h,e,f,d,g,i){this.image=h;this.color=e;this.label=f;this.mod=typeof(g)=="undefined"?null:g;this.pmod=typeof(i)=="undefined"?null:i;this.version=d;this.asset=null;this.frame=-1;this.sourceFrame=-1}}if(!b.TargetDesc){b.TargetDesc=function TargetDesc(f,h,g,e,d){this.frameId=h;this.index=f;this.rect=g;this.label=e;this.userdata=d}}if(!b.VideoDesc){b.VideoDesc=function VideoDesc(l,i,d,k,m,o,h,f,n,e,g,j){arguments.callee.superclass.call(this,l,i,d,m);this.suffix=o;this.version=h;this.width=f;this.height=n;this.userData=e;this.image=g;this.videoType=k;this.bitrate=j};b.Class.inherits("s7sdk.VideoDesc","s7sdk.ItemDesc")}if(!b.VideoDescType){b.VideoDescType={FILE:0,CATALOG_ID:1,PATH:2}}if(!b.MediaSetParser){b.MediaSetParser=function MediaSetParser(){};b.MediaSetParser.parse=function(f,g,d,e){return b.MediaSetParser.parseSet(null,f,0,null,g,d,e)};b.MediaSetParser.parseSet=function(m,f,e,n,o,l,g){if(o&&o.length>0){f.n+=(f.n.indexOf("?")==-1)?"?":"&";f.n+=o}var h;if(b.ItemDescType.decodeItemDescType(f.type)==b.ItemDescType.VIDEO_SET){var d=null;if(f.i){d=b.MediaSetParser.parseItemImage(null,f)}h=new b.VideoSetDesc(m,e,b.ItemDescType.decodeItemDescType(f.type),f.n,n,d)}else{h=new b.MediaSetDesc(m,e,b.ItemDescType.decodeItemDescType(f.type),f.n,n)}if(b.Util.isArray(f.item)){var k=f.item;for(var j=0;j<k.length;++j){h.items[j]=b.MediaSetParser.parseItem(h,k[j],e,o,l,g)}}else{h.items[0]=b.MediaSetParser.parseItem(h,f.hasOwnProperty("item")?f.item:f,e,o,l,g)}h.targets=b.MediaSetParser.parseTargets(f);h.maps=b.MediaSetParser.parseMaps(f);h.userdata=f.userdata;return h};b.MediaSetParser.parseItem=function(g,f,i,h,d,e){if(f.v!=undefined){return b.MediaSetParser.parseItemVideo(g,f,i,h,d)}else{if(f.set!=undefined){return b.MediaSetParser.parseItemSet(g,f,i,h,d,e)}else{if(f.i!=undefined){return b.MediaSetParser.parseItemImage(g,f,i,h,e)}}}};b.MediaSetParser.parseItemImage=function(p,e,d,t,f){var r=b.MediaSetParser.parseSwatch(e,e.iv,t,f);var n=b.MediaSetParser.parseMaps(e);var l=b.MediaSetParser.parseTargets(e);var s=(e.map=="1");var k=(e.userdata=="1");var q=(e.np=="1");if(b.Util.isArray(e.i)){var m=new Array();var i=new Array();for(var h=0;h<e.i.length;++h){m.push(new b.ImageDesc(null,b.ItemDescType.IMG,e.i[h].n,null,parseInt(e.dx),parseInt(e.dy),e.iv,e.i[h].isDefault,e.i[h].mod,e.i[h].pmod,e.i[h].l,null,null,null,false,false,false));i.push(e.i[h].n)}var o=new b.ImageDesc(p,e.type==undefined?b.ItemDescType.IMG:b.ItemDescType.decodeItemDescType(e.type),e.i[0].n,r,parseInt(e.dx),parseInt(e.dy),e.iv,e.i[0].isDefault,e.i[0].mod,e.i[0].pmod,e.i[0].l,n,l,e.userdata,(n&&f)?true:s,k,q);o.name=b.SwatchesParser.combinedImageName(i,f);if(t&&t.length>0){if(o.name.indexOf("?")){var g=o.name.substring(0,o.name.indexOf("?"));g+="?";g+=t+"&";o.name=g+o.name.substring(o.name.indexOf("?"))}}o.mod+="?";o.images=m;return o}else{if(t&&t.length>0){e.i.n+=(e.i.n.indexOf("?")==-1)?"?":"&";e.i.n+=t}return new b.ImageDesc(p,b.ItemDescType.IMG,e.i.n,r,parseInt(e.dx),parseInt(e.dy),e.iv,e.i.isDefault,e.i.mod,e.i.pmod,e.i.l,n,l,e.userdata,s,k,q)}};b.MediaSetParser.parseItemVideo=function(j,g,d,l,h){var k=b.MediaSetParser.parseSwatch(g,g.iv,l);var m=null;var f=g.v.name;var i=b.VideoDescType.FILE;if(h){if(g.v.path!=undefined){f=decodeURI(g.v.path);i=b.VideoDescType.PATH}else{if(g.v.id!=undefined){f=g.v.id;i=b.VideoDescType.CATALOG_ID}}}else{if(g.v.path!=undefined){f=g.v.path;i=b.VideoDescType.PATH}if(g.v.id!=undefined){f=g.v.id;i=b.VideoDescType.CATALOG_ID}}if(g.i!=undefined){m=b.MediaSetParser.parseItemImage(null,g)}b.Logger.log(b.Logger.FINER,"posterImage: "+(m!=null?m:"none"));var e=parseInt(g.v.bitrate)*(h?1024:1);return new b.VideoDesc(j,b.ItemDescType.VIDEO,f,i,k,g.v.suffix,g.iv,parseInt(g.v.dx),parseInt(g.v.dy),g.userdata,m,e)};b.MediaSetParser.resolveVideoAsset=function(i,h,e,f,g){var j=!f&&(i.name.indexOf("?")!=-1)?i.name.split("?")[0]:i.name;var d=(/^((http|https):\/\/[^\/]*)\b(\/DMGateway\/(private-ssl|private)\/)/.test(g));if(i.type==b.ItemDescType.VIDEO_GROUP&&f){if((b.browser.supportflash()&&(h.type=="flash"))||(h.type=="auto"&&!(/^((http|https):\/\/[^\/]*)\b(\/DMGateway\/(private-ssl|private)\/)/.test(g)))){throw new Error("Sets with type 'video_group'("+i.type+") could not be played by this video proxy.")}else{j=b.MediaSetParser.formNonAVS(i.items,e)}}else{if(!d&&h.type=="auto"&&((b.browser.name=="safari"||((b.browser.device.name=="blackberry")&&(b.browser.device.version==10)))||((b.browser.name=="firefox"&&b.browser.version.minor>=45)||(b.browser.name=="ie"&&b.browser.version.minor>=11&&(typeof(MediaSource)!="undefined"))||(("ipad"==b.browser.device.name||"iphone"==b.browser.device.name||b.browser.device.name=="desktop")&&b.browser.name=="chrome")))){if(i.videoType!=b.VideoDescType.PATH){j+=".m3u8"}}else{if((h.type!="flash"||(!b.browser.supportflash()&&h.type=="flash")||d||b.browser.device.name=="android")&&(i.type==b.ItemDescType.VIDEO_SET)){j=b.MediaSetParser.getAssetByNearestBitrate(i.items,e)}}}return j};b.MediaSetParser.getAssetByNearestBitrate=function(l,k){var j,e;var d=-1;var h=-1;var f="";if(!l.length){f=l.name}else{for(j=0;j<l.length;j++){e=parseInt(l[j].bitrate);if((e<=k)&&(e>h)){d=e;h=e;f=l[j].name}}if(f==""){var g=-1;for(j=0;j<l.length;j++){e=parseInt(l[j].bitrate);if((g==-1)||(e<g)){g=e;f=l[j].name}}}}return f};b.MediaSetParser.formNonAVS=function(j,g){var k=Array.apply(this,j);var f=Array.apply(this,j);for(var e=f.length-1;e>=0;e--){if(f[e].suffix=="mp4"){f.splice(e,1)}}for(var e=k.length-1;e>=0;e--){if(k[e].suffix=="webm"){k.splice(e,1)}}var l=[],h=b.MediaSetParser.getAssetByNearestBitrate(f,g),d=b.MediaSetParser.getAssetByNearestBitrate(k,g);if(!b.Util.isNull(d)){l.push(d)}if(!b.Util.isNull(h)){l.push(h)}return l};b.MediaSetParser.parseItemSet=function(h,f,j,i,d,e){var g=b.MediaSetParser.parseSwatch(f,f.iv,i);return b.MediaSetParser.parseSet(h,f.set,j+1,g,i,d,e)};b.MediaSetParser.parseSwatch=function(f,d,g){if(f.s!=undefined){if(g&&g.length>0){f.s.n+=(f.s.n.indexOf("?")==-1)?"?":"&";f.s.n+=g}var e=f.s.n;return new b.SwatchDesc(e,f.s.c,f.s.l,d,f.s.mod,f.s.pmod)}return null};b.MediaSetParser.parseTargets=function(h){if(h.targets!=undefined&&h.targets.target!=undefined){var e=new Array();if(h.targets.target instanceof Array){for(var g=0;g<h.targets.target.length;g++){var f=h.targets.target[g];var k=(f.frame!=undefined&&f.frame!=""?f.frame:-1);var d=f.rect.split(",");var j=new b.Rectangle(parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3]));e.push(new b.TargetDesc(f.number,k,j,f.label,f.userData))}}else{var f=h.targets.target;var k=(f.frame!=undefined&&f.frame!=""?f.frame:-1);var d=f.rect.split(",");var j=new b.Rectangle(parseInt(d[0]),parseInt(d[1]),parseInt(d[2]),parseInt(d[3]));e.push(new b.TargetDesc(f.number,k,j,f.label,f.userData))}return e}return null};b.MediaSetParser.parseMaps=function(e){var g=null;function f(k){var j=k.coords.split(",");for(var h=0;h<j.length;h++){j[h]=parseFloat(j[h])}return new b.MapDesc(k.shape,j,k.alt,k.href,k.rollover_key,k.target)}if(e.map&&e.map.area){g=[];if(b.Util.isArray(e.map.area)){for(var d=0;d<e.map.area.length;d++){g.push(f(e.map.area[d]))}}else{if(e.map.area.coords&&e.map.area.shape){g.push(f(e.map.area))}}}return g};b.MediaSetParser.findCompanyNameInAsset=function(d){var e=b.MediaSetParser.parseAssetForSetReq(d).name;return e};b.MediaSetParser.parseAssetForSetReq=function(m){function f(o){var p=o;var r;do{r=p;p=p.replace(/[\({][^{}\(\)]+[}\)]/g,function(s){return new Array(s.length+1).join("X")})}while(p!=r);var q=p.indexOf("?");if(q==-1){return{mainAssetPart:o,globalISModifier:null}}else{return{mainAssetPart:o.substring(0,q),globalISModifier:o.substring(q+1)}}}var j=m.match(/^[\{\(]?([^{\(\?\/]+)/);var n=j?j[1]:"";j=m.match(/^[{\(][^{}\(\)]+[}\)](?:,[{\(][^{}\(\)]+[}\)])+/);var h=j?j[0]:"";var e=f(m);var d=e.mainAssetPart;var g=e.globalISModifier;var i=(m.match(/^[{\(]/)||d.match(/[,:;]+/))?true:false;var l=(i&&((h.length>0)||d.match(/^[^{\(]/)))?true:false;var k;if(i){if(l){k=n+"?req=set,json,UTF-8&imageSet=("+d+")"+((g)?"&"+g:"")}else{k=n+"?req=set,json,UTF-8&imageSet="+d+((g)?"&"+g:"")}}else{k=d+"?req=set,json,UTF-8"+((g)?"&"+g:"")}return{req:k,name:n,mod:g}}}if(!b.InteractiveSwatchDesc){b.InteractiveSwatchDesc=function InteractiveSwatchDesc(j,f,g,d,h,k,e,i){arguments.callee.superclass.apply(this,[j,f,g,d,h,k]);this.image=j;this.color=f;this.label=g;this.mod=typeof(h)=="undefined"?null:h;this.pmod=typeof(k)=="undefined"?null:k;this.version=d;this.href=typeof(e)=="undefined"?null:e;this.target=typeof(i)=="undefined"?null:i};b.Class.inherits("s7sdk.InteractiveSwatchDesc","s7sdk.SwatchDesc")}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.Util.require("s7sdk.common.ItemDesc");if(!a.SwatchesParser){a.SwatchesParser={};a.SwatchesParser.parse=function(m){var b=new Array();if(m==null){return b}var n=m.split(/,/);var l=null;var g=null;var p=null;var c=new RegExp(/{\s*(0x|0X|#)?([\dabcdefABCDEF]{1,6})\s*(.*)}/);var e=new RegExp(/^\s*$/);for(var k=0;k<n.length;k++){var f=String(n[k]).split(/;/);if(f==null||f[0]==null||e.test(f[0])){continue}g=null;p=null;l=null;if(f.length>1){var q=String(f[1]).match(c);if(q!=null&&q[2]!=null){g=q[1]+q[2];g=g.replace(/\s*(0x|0X|#)?/,"0x");p=q[3]}else{l=f[1]}}var d=f[0];var o=d!=null?d.split(":"):new Array();if(o.length>1){for(var h=0;h<o.length;h++){o[h]=String(o[h]).trim()}d=a.SwatchesParser.combinedImageName(o)}else{d=String(d).trim()}l=l!=null?String(l).trim():(g==null||g=="")?d:null;b[k]=new a.SwatchDesc(l,g,p,"","","");b[k].asset=d;b[k].frame=k;b[k].sourceFrame=k}return b};a.SwatchesParser.combinedImageName=function(b,h,f){var e;if(h){e=b[0]+"?layer=0"+(f&&f[0]?f[0]:"")+"&extendN="+(b.length-1)+",0,0,0&originN="+(1/b.length-0.5)+",-0.5";for(var d=1;d<b.length;d++){e+="&layer="+d+(f&&f[d]?f[d]:"")+"&src="+g(b[d])+"&originN="+(d-b.length+1.5)+",-0.5&sizeN="+1/b.length+",1"}}else{e=b[0]+"?layer=0"+(f&&f[0]?f[0]:"")+"&extendN=0,0,"+(b.length-1)+",0&originN="+(1/b.length-0.5)+",-0.5";for(var c=1;c<b.length;c++){e+="&layer="+c+(f&&f[c]?f[c]:"")+"&src="+g(b[c])+"&originN="+(0.5-c)+",-0.5&sizeN="+1/b.length+",1"}}return e;function g(i){if(i.indexOf("?")!=-1){return"is("+i+")"}return i}};a.SwatchesParser.parseItems=function(d){var c=a.SwatchesParser.parse(d);var b=null;if(c!=null){b=[];for(var e=0;e<c.length;e++){var f=c[e];b.push(new a.ItemDesc(null,a.ItemDescType.IMG,f.asset,f))}}return b};a.SwatchesParser.filterSet=function(j,f,g){f=(typeof f=="number")?f:0;g=(typeof g=="boolean")?g:true;var h=[];var e=0;if(j==null||j.items.length==0){return h}for(var c=0;c<j.items.length;c++){var l=j.items[c];var b=l&&((f==a.ItemDescType.UNKNOWN)?true:((l.type&f)!=0));if(b){var k=a.SwatchesParser.getItemSwatch(l,g);if(k!=null){k.frame=e++;k.sourceFrame=c;k.asset=j.items[c].name;k.owner=l;var d={};d.swatch=k;d.type=l.type;d.np=l.np;h.push(d)}}}return h};a.SwatchesParser.getItemSwatch=function(c,d){d=(typeof d=="boolean")?d:true;var b=(d&&c.swatch!=null)?c.swatch:null;if(b==null){if(c instanceof a.ImageDesc){b=new a.SwatchDesc(c.name,null,c.label,c.version,c.mod,c.pmod)}else{b=(c instanceof a.MediaSetDesc)?a.SwatchesParser.getMissingSwatchFromImage(c):null}}return b};a.SwatchesParser.getMissingSwatchFromImage=function(g){for(var d=0;d<g.items.length;d++){if(g.items[d] instanceof a.ImageDesc){var b=g.items[d];return new a.SwatchDesc(b.name,null,b.label,b.version,b.mod,b.pmod)}}for(var c=0;c<g.items.length;c++){if(g.items[c] instanceof a.MediaSetDesc){var f=g.items[c];var e=a.SwatchesParser.getMissingSwatchFromImage(f);if(e!=null){return e}}}return null}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.event");b.Util.require("s7sdk.utils.Version");if(!b.event.AssetEvent){b.event.AssetEvent=function(s,r,t,q){this.type=s;this.asset=r;this.frame=t;this.bubbles=q};b.event.AssetEvent.SWATCH_SELECTED_EVENT="swatchSelectedEvent";b.event.AssetEvent.ITEM_SELECTED_EVENT="itemSelectedEvent";b.event.AssetEvent.NOTF_SET_PARSED="notfSetParsed";b.event.AssetEvent.ASSET_CHANGED="assetChanged";b.AssetEvent=b.event.AssetEvent}if(!b.event.SwatchEvent){b.event.SwatchEvent=function(r,s,q){this.type=r;this.page=s;this.bubbles=q};b.event.SwatchEvent.SWATCH_PAGE_CHANGE="swatchPageChanged";b.SwatchEvent=b.event.SwatchEvent}if(!b.event.RolloverKeyEvent){b.event.RolloverKeyEvent=function(u,t,s,r,q,w,v){this.type=u;this.rolloverKey=t;this.boundingBox=s;this.href=r;this.bubbles=q;this.frame=w;this.quickViewData=v||undefined};b.event.RolloverKeyEvent.prototype.rolloverKey=null;b.event.RolloverKeyEvent.prototype.boundingBox=null;b.event.RolloverKeyEvent.prototype.href=null;b.event.RolloverKeyEvent.prototype.frame=null;b.event.RolloverKeyEvent.prototype.quickViewData=undefined;b.event.RolloverKeyEvent.ROLLOVER_ACTIVATED="rolloverActivated";b.event.RolloverKeyEvent.ROLLOVER_DEACTIVATED="rolloverDeactivated";b.event.RolloverKeyEvent.VIEWER_ACTIVATED="viewerActivated";b.event.RolloverKeyEvent.TARGET_INDEX="targetIndex";b.event.RolloverKeyEvent.QUICKVIEW_ACTIVATED="quickviewActivate";b.event.RolloverKeyEvent.FOCUSED="focused";b.event.RolloverKeyEvent.BLURRED="blurred";b.RolloverKeyEvent=b.event.RolloverKeyEvent}if(!b.event.ZoomRgnEvent){b.event.ZoomRgnEvent=function(t,q,s,r){if(s==undefined||s==null){s=false}if(r==undefined||r==null){r=false}this.type=t;this.zoomRgn=q;this.bubbles=s;this.cancelable=r};b.event.ZoomRgnEvent.NOTF_ZOOM_RGN="notfZoomRgn";b.event.ZoomRgnEvent.NOTF_ZOOM_NRGN="notfZoomNRgn";b.ZoomRgnEvent=b.event.ZoomRgnEvent}if(!b.event.ZoomPanEvent){b.event.ZoomPanEvent=function(t,s,r,q){this.type=t;this.dx=s;this.dy=r;this.bubbles=q?q:true};b.event.ZoomPanEvent.ACT_ZOOM_PAN="actZoomPan";b.event.ZoomPanEvent.ACT_ZOOM_NPAN="actZoomNPan";b.event.ZoomPanEvent.NOTF_ZOOM_PAN="notfZoomPan";b.event.ZoomPanEvent.NOTF_ZOOM_NPAN="notfZoomNPan";b.ZoomPanEvent=b.event.ZoomPanEvent}if(!b.event.ZoomTargetEvent){b.event.ZoomTargetEvent=function n(s,r,u,t,q){this.type=s;this.idx=r;this.frame=u;this.image=t;this.zoomRgn=q;this.bubbles=true};b.event.ZoomTargetEvent.ZOOM_TARGET="zoomTarget";b.ZoomTargetEvent=b.event.ZoomTargetEvent}if(!b.event.CapabilityStateEvent){b.event.CapabilityStateEvent=function f(r,s,q){this.type=r;this.state=s;this.bubbles=q};b.event.CapabilityStateEvent.NOTF_PAGEVIEW_CAPABILITY_STATE="notfPageViewCapabilityState";b.event.CapabilityStateEvent.NOTF_SPIN_CAPABILITY_STATE="notfSpinCapabilityState";b.event.CapabilityStateEvent.NOTF_ZOOM_CAPABILITY_STATE="notfZoomCapabilityState";b.event.CapabilityStateEvent.NOTF_VIDEO_CAPABILITY_STATE="notfVideoCapabilityState";b.event.CapabilityStateEvent.NOTF_CAROUSELVIEW_CAPABILITY_STATE="notfCarouselViewCapabilityState";b.CapabilityStateEvent=b.event.CapabilityStateEvent}if(!b.event.FrameEvent){b.event.FrameEvent=function g(r,s,t,q){this.type=r;this.image=s;this.frameIndex=t;this.bubbles=q?q:true};b.event.FrameEvent.FRAME_EVENT="frameEvent";b.event.FrameEvent.NOTF_FRAME_TRANSITION_START="notfFrameTransitionStart";b.event.FrameEvent.NOTF_FRAME_TRANSITION_END="notfFrameTransitionEnd";b.FrameEvent=b.event.FrameEvent}if(!b.event.FlyoutEvent){b.event.FlyoutEvent=function d(r,q){this.type=r;this.bubbles=q?q:true};b.event.FrameEvent.FLYOUT_EVENT="flyoutEvent";b.event.FlyoutEvent.NOTF_FLYOUT_SHOW_START="notfFlyoutShowStart";b.event.FlyoutEvent.NOTF_FLYOUT_HIDE_END="notfFlyoutHideEnd";b.FlyoutEvent=b.event.FlyoutEvent}if(!b.Gesture){b.Gesture=function(){this.view=null;this.type;this.currentX;this.currentY;this.initialTimeStamp=0;this.currentTimeStamp=0;this.speedX=0;this.speedY=0;this.doubleClickTestTimer=null;this.inPinch=false;var q=b.browser.device;this.multiTouchSafe=!(q.name=="android"&&parseFloat(q.version)<3)};b.Gesture.prototype.setEventData=function(q,v,s){var u=s-this.currentTimeStamp;this.currentTimeStamp=s;var t=q-this.currentX;var r=v-this.currentY;this.currentX=q;this.currentY=v;this.speedX=Math.abs(t/u);this.speedY=Math.abs(r/u)}}if(!b.VisibilityManager){b.VisibilityManager=function(){b.Logger.log(b.Logger.CONFIG,"s7sdk.VisibilityManager constructor");arguments.callee.superclass.call(this,b.Util.createUniqueId(),null,"span");this.objs=[];this.refobj=null;this.hidden=false;this.enabled=true;this.createElement();this.getParent().appendChild(this.obj);this.obj.style.display="none"};b.Class.inherits("s7sdk.VisibilityManager","s7sdk.Base");b.VisibilityManager.prototype.attach=function(q){b.Logger.log(b.Logger.FINE,"s7sdk.VisibilityManager.attach - obj: %0",q);if(this.objs.indexOf(q)==-1){this.objs.push(q)}};b.VisibilityManager.prototype.detach=function(q){b.Logger.log(b.Logger.FINE,"s7sdk.VisibilityManager.detach - obj: %0",q);if(this.objs.indexOf(q)!=-1){this.objs.splice(this.objs.indexOf(q),1)}};b.VisibilityManager.prototype.detachAll=function(){b.Logger.log(b.Logger.FINE,"s7sdk.VisibilityManager.detachAll");this.objs.splice(0,this.objs.length)};b.VisibilityManager.prototype.tap=function(r){var s=null;if(r.target){s=(r.target.nodeType==3)?r.target.parentNode:r.target}else{s=r.srcElement}if(s&&s.visibilityManager.enabled){for(var q=0;q<s.visibilityManager.objs.length;q++){if(s.visibilityManager.hidden&&s.visibilityManager.objs[q]&&s.visibilityManager.objs[q].show){s.visibilityManager.objs[q].show()}else{if(s.visibilityManager.objs[q]&&s.visibilityManager.objs[q].hide){s.visibilityManager.objs[q].hide()}}}s.visibilityManager.hidden=!s.visibilityManager.hidden}};b.VisibilityManager.prototype.reference=function(q){b.Logger.log(b.Logger.FINE,"s7sdk.VisibilityManager.reference - obj: %0",q);this.refobj=q;if(!this.refobj.getObj().visibilityManager){this.refobj.getObj().visibilityManager=this;this.refobj.addEventListener(b.Event.CLICK,this.tap,true)}};b.VisibilityManager.prototype.dispose=function(){this.detachAll();if(this.refobj&&this.refobj.getObj().visibilityManager){this.refobj.removeEventListener(b.Event.CLICK,this.tap,true)}this.refobj=null;this.objs=[];if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}}if(!b.event.PageMouseEvent){b.event.PageMouseEvent={getPos:function(q){},isSwipe:function(){},mousedown:function(q){},mouseup:function(q){},touchstart:function(q){},touchend:function(q){},delayClick:function(){},issue:function(q){}};b.PageMouseEvent=b.event.PageMouseEvent}if(!b.event.ResizeEvent){b.event.ResizeEvent=function(t,r,s,q){this.type=t;this.w=r;this.h=s;this.bubbles=q?q:true};b.event.ResizeEvent.WINDOW_RESIZE="windowResize";b.event.ResizeEvent.COMPONENT_RESIZE="componentResize";b.event.ResizeEvent.FULLSCREEN_RESIZE="fullScreenResize";b.event.ResizeEvent.ADDED_TO_LAYOUT="addedToLayout";b.event.ResizeEvent.REMOVED_FROM_LAYOUT="removedFromLayout";b.event.ResizeEvent.SIZE_MARKER_CHANGE="sizeMarkerChange";b.ResizeEvent=b.event.ResizeEvent}if(!b.event.UserEvent){b.event.UserEvent=function o(r,s,q){this.type=b.event.UserEvent.NOTF_USER_EVENT;this.trackEvent=r;this.data=s;this.bubbles=q?q:true;this.useCapture=false};b.event.UserEvent.prototype.getEncodedData=function(){var q=[];if(b.Util.isArray(this.data)){for(var r in this.data){if(typeof this.data[r]!="function"){q.push(encodeURIComponent(this.data[r]))}}}else{q.push(encodeURIComponent(this.data))}return q};b.event.UserEvent.prototype.toString=function(){return this.trackEvent+(this.data==null?"":","+this.getEncodedData())};b.event.UserEvent.NOTF_USER_EVENT="notfUserEvent";b.event.UserEvent.SWAP="SWAP";b.event.UserEvent.SWATCH="SWATCH";b.event.UserEvent.INTERACTIVE_SWATCH="INTERACTIVE_SWATCH";b.event.UserEvent.INTERACTIVE_THUMBNAIL_GRID_VIEW_SWATCH="INTERACTIVE_THUMBNAIL_GRID_VIEW_SWATCH";b.event.UserEvent.PAGE="PAGE";b.event.UserEvent.PLAY="PLAY";b.event.UserEvent.PAUSE="PAUSE";b.event.UserEvent.RECORD="RECORD";b.event.UserEvent.STOP="STOP";b.event.UserEvent.MILESTONE="MILESTONE";b.event.UserEvent.METADATA="METADATA";b.event.UserEvent.HREF="HREF";b.event.UserEvent.ITEM="ITEM";b.event.UserEvent.TARG="TARG";b.event.UserEvent.LOAD="LOAD";b.event.UserEvent.ZOOM="ZOOM";b.event.UserEvent.SPIN="SPIN";b.event.UserEvent.PAN="PAN";b.event.UserEvent.BANNER="BANNER";b.UserEvent=b.event.UserEvent}if(!b.event.ScrollEvent){b.event.ScrollEvent=function(s,q,r){this.type=s;this.position=q;this.bubbles=r};b.event.ScrollEvent.SCROLL_POSITION_EVENT="scrollPositionEvent";b.ScrollEvent=b.event.ScrollEvent}if(!b.event.SliderEvent){b.event.SliderEvent=function l(s,q,r){this.type=s;this.position=q;this.bubbles=r?r:true;this.useCapture=false};b.event.SliderEvent.NOTF_SLIDER_DOWN="notfSliderDown";b.event.SliderEvent.NOTF_SLIDER_MOVE="notfSliderMove";b.event.SliderEvent.NOTF_SLIDER_UP="notfSliderUp";b.SliderEvent=b.event.SliderEvent}if(!b.event.VideoEvent){b.event.VideoEvent=function i(r,s,q){this.type=r;this.data=s;this.bubbles=q?q:true;this.useCapture=false};b.event.VideoEvent.NOTF_CURRENT_TIME="notfCurrentTime";b.event.VideoEvent.NOTF_DURATION="notfDuration";b.event.VideoEvent.NOTF_LOAD_PROGRESS="notfLoadProgress";b.event.VideoEvent.NOTF_VOLUME="notfVolume";b.event.VideoEvent.NOTF_SEEK="notfSeek";b.event.VideoEvent.NOTF_VIDEO_END="notfVideoEnd";b.event.VideoEvent.NOTF_NAVIGATION="notfVideoNavigation";b.VideoEvent=b.event.VideoEvent}if(!b.event.SocialEvent){b.event.SocialEvent=function e(r,q){this.type=r;this.bubbles=q?q:true};b.event.SocialEvent.NOTF_SOCIAL_ACTIVATED="notfSocialActivated";b.event.SocialEvent.NOTF_SOCIAL_DEACTIVATED="notfSocialDeactivated"}if(!b.event.ControlComponentEvent){b.event.ControlComponentEvent=function p(r,s,q){this.type=r;this.data=s;this.bubbles=q?q:true};b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED="notfControlComponentCSSUpdated";b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED="notfControlComponentModifierUpdated"}if(!b.event.StatusEvent){b.event.StatusEvent=function m(r,q){this.type=r;this.bubbles=q};b.event.StatusEvent.NOTF_ASSET_METADATA_READY="notfAssetMetaDataReady";b.event.StatusEvent.NOTF_VIEW_READY="notfViewReady";b.event.StatusEvent.NOTF_HIGHRES_VIEW_READY="notfHighResViewReady";b.event.StatusEvent.NOTF_PRELOAD_START="notfPreloadStart";b.event.StatusEvent.NOTF_PRELOAD_COMPLETE="notfPreloadComplete";b.StatusEvent=b.event.StatusEvent}if(!b.event.FavoritesEvent){b.event.FavoritesEvent=function c(r,q){this.type=r;this.bubbles=q?q:true};b.event.FavoritesEvent.NOTF_ADD_FAVORITE="notfAddFavorite";b.event.FavoritesEvent.NOTF_REMOVE_FAVORITE="notfRemoveFavorite";b.event.FavoritesEvent.NOTF_VIEW_ALL_FAVORITES="notfViewAllFavorites";b.event.FavoritesEvent.FAVORITES_CHANGED="favoritesChanged";b.FavoritesEvent=b.event.FavoritesEvent}if(!b.event.InteractiveDataEvent){b.event.InteractiveDataEvent=function a(r,s,q){this.type=r;this.data=s;this.bubbles=q};b.event.InteractiveDataEvent.NOTF_INTERACTIVE_DATA="notfInteractiveData";b.event.InteractiveDataEvent.NOTF_ACTIVE_INTERACTIVE_DATA_UPDATED="notfActiveInteractiveDataUpdated"}if(!b.event.InteractiveSwatchesEvent){b.event.InteractiveSwatchesEvent=function j(s,r,t,q){this.type=s;this.href=r;this.data=t||undefined;this.bubbles=q};b.event.InteractiveSwatchesEvent.SWATCH_QUICKVIEW_ACTIVATED="swatchQuickviewActivate";b.event.InteractiveSwatchesEvent.SWATCH_URL_ACTIVATED="swatchUrlActivate";b.event.InteractiveSwatchesEvent.NOTF_VISIBLE_INTERACTIVE_SWATCHES="notfVisibleInteractiveSwatch";b.InteractiveSwatchesEvent=b.event.InteractiveSwatchesEvent}if(!b.event.PopupEvent){b.event.PopupEvent=function h(r,q){this.type=r;this.bubbles=q?q:true};b.event.PopupEvent.POPUP_CLOSED="popupClose";b.PopupEvent=b.event.PopupEvent}if(!b.event.SearchEvent){b.event.SearchEvent=function k(s,t,r,q){this.type=s;this.searchRequest=t;this.searchResults=r;this.bubbles=q};b.event.SearchEvent.SEARCH_SUBMITTED="searchsubmitted";b.event.SearchEvent.SEARCH_COMPLETED="searchcompleted";b.event.SearchEvent.SEARCH_FAILED="searchfailed";b.SearchEvent=b.event.SearchEvent}})(s7getCurrentNameSpace());(function(a){if(!a.Version){a.Version={version:"3.3.4",build:"s7sdk-8088-g80f66bb"};(function(){a.Logger.log(a.Logger.INFO,"Adobe Scene7 Viewer SDK %0 (%1)",a.Version.version,a.Version.build)})()}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(c){c.pkg("s7sdk.image");if(c.browser.name==="ie"&&c.browser.version.major<"11"){c.Util.require("s7sdk.image.rgn.View")}else{c.Util.require("s7sdk.image.View")}c.Util.require("s7sdk.common.IS");c.Util.require("s7sdk.common.IconEffect");c.Util.require("s7sdk.common.ItemDesc");c.Util.require("s7sdk.event.InputController2");if(!c.image.ZoomViewControl){c.image.ZoomViewControl=function(d){arguments.callee.superclass.apply(this,[d,c.image.ZoomViewControl.NS,d.constructor,c.image.ZoomView.RESTRICTED_STYLES])};c.image.ZoomViewControl.NS="s7sdk.image.ZoomViewControl";c.image.ZoomViewControl.prototype.getCurrentAsset=function(){return this.component.getAsset()};c.image.ZoomViewControl.prototype.setCurrentAsset=function(d){this.component.setAsset(d)};c.image.ZoomViewControl.prototype.setModifier=function(o){var m=null;var d=null;var e=this.component.getModifiers();var n=true;for(var h in e){var f=h.toLowerCase();if(f=="frametransition"){if(!o[f]){continue}n=false;d=o[f];m=this.component.getFrameTransition();var l=[];for(var g in m){l.push(m[g])}m=l.join(",");this.component.setFrameTransition(d);this.dispatchEvent(new c.event.ControlComponentEvent(c.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{oldvalue:m,newvalue:d,property:f},false))}}if(n){this.superproto.setModifier.apply(this,[o])}};c.image.ZoomViewControl.prototype.rebuild=function(d){if(this.component){var e=this.component.item;this.superproto.rebuild.apply(this,[d]);if(e){this.component.setItem(e)}}}}c.Class.inherits(c.image.ZoomViewControl.NS,"s7sdk.ControlComponent");if(!c.image.ZoomView){c.image.ZoomView=function ZoomView(e,h,g){var j=!!arguments[3];c.Logger.log(c.Logger.CONFIG,"s7sdk.image.ZoomView constructor - container: %0, settings: %1 , compId: %2",e,h,g);arguments.callee.superclass.apply(this,[g,e,"div","s7zoomview",h,!j]);g=(typeof g=="string"&&g.length)?g:"ZoomView_"+c.Util.createUniqueId();this.id=(c.Util.isNull(g)?"":g);this.createElement();this.container=this.getParent();if(this.container.tagName=="DIV"&&(!this.container.style.position||this.container.style.position=="static")){this.container.style.position="relative"}this.preloadIdx=null;if(this.enableHD.enable.toLowerCase()=="always"){this.enableHD.maxHdPixels=-1}else{if(this.enableHD.enable.toLowerCase()=="never"){this.enableHD.maxHdPixels=0}else{if(this.enableHD.enable.toLowerCase()=="limit"){if(NaN==this.enableHD.maxHdPixels){this.enableHD.maxHdPixels=2250000}else{this.enableHD.maxHdPixels=this.enableHD.maxHdPixels*this.enableHD.maxHdPixels}}else{this.enableHD.maxHdPixels=2250000}}}this.view=null;this.serverUrl=c.Util.normalizeUrl(this.serverUrl);this.compId=(c.Util.isNull(g)?"":g);this.locale=this.getParam("locale","");this.imageModifier=c.MediaSetParser.parseAssetForSetReq(this.asset).mod;this.wid=this.stagesize.width;this.hei=this.stagesize.height;if(this.wid==0||this.hei==0){this.wid=this.size.width;this.hei=this.size.height}if(this.wid==0||this.hei==0){this.wid=parseInt(c.Util.css.getCss("s7zoomview","width",this.compId,null,this.container));this.hei=parseInt(c.Util.css.getCss("s7zoomview","height",this.compId,null,this.container));if(!c.Util.isNumber(this.wid)||!c.Util.isNumber(this.hei)||this.wid<=0||this.hei<=0){if("clientHeight" in this.container&&"clientWidth" in this.container){this.wid=this.container.clientWidth;this.hei=this.container.clientHeight}if(this.wid==0||this.hei==0){this.wid=400;this.hei=400}}}this.devicePixelRatio=c.Util.adjustDevicePixelRatio(this.enableHD.maxHdPixels,this.hei,this.wid);this.outWidth=this.wid*this.devicePixelRatio;this.outHeight=this.hei*this.devicePixelRatio;this.item=null;this.timerSetItemDelayed=null;this.timerSetDuration=null;this.clickToZoom=0;if((/reset/i).test(this.singleclick)){this.clickToZoom|=c.Enum.CLICK_STATE.CLICK_TO_RESET}if((/zoom/i).test(this.singleclick)){this.clickToZoom|=c.Enum.CLICK_STATE.CLICK_TO_ZOOM}if((/reset/i).test(this.doubleclick)){this.clickToZoom|=c.Enum.CLICK_STATE.DOUBLE_CLICK_TO_RESET}if((/zoom/i).test(this.doubleclick)){this.clickToZoom|=c.Enum.CLICK_STATE.DOUBLE_CLICK_TO_ZOOM}var i=c.Util.resolveURL(this.serverUrl,c.MediaSetParser.parseAssetForSetReq(this.asset).req);if(c.Util.isNonEmptyString(this.locale)){i+="&locale="+this.locale}this.mediaSet=null;this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px";this.obj.setAttribute("tabindex",0);this.prevFrame={};this.obj.style.overflow="hidden";this.spacing=this.frametransition.transition=="fade"?0:this.frametransition.spacing*this.wid;this.container3=c.Util.createObj(null,"div",null,null);this.container3.style.zIndex=0;this.container3.style.position="absolute";this.container3.style.left=-this.getSwipeAreaWidth()+"px";this.container3.style.width=3*this.getSwipeAreaWidth()+"px";this.container3.style.height=this.hei+"px";this.tempDisplay=new c.ViewWrapper(this,1,1,0,this.hei,0,this.spacing,900);this.displ=new c.ViewWrapper(this,this.outWidth,this.outHeight,this.wid,this.hei,1,this.spacing,910);this.addIE78overlay();this.displayElement=this.displ.displayElement;this.left=new c.ViewWrapper(this,this.outWidth,this.outHeight,this.wid,this.hei,0,this.spacing,900);this.right=new c.ViewWrapper(this,this.outWidth,this.outHeight,this.wid,this.hei,2,this.spacing,920);this.container3.appendChild(this.tempDisplay.obj);this.container3.appendChild(this.left.obj);this.container3.appendChild(this.displ.obj);this.container3.appendChild(this.right.obj);this.obj.appendChild(this.container3);this.initialSlide=false;this.view=null;this.moved=false;this.displayElement.s7gesture=new c.Gesture();this.attachToContainer();this.displayElement.onselectstart=function(){return false};this.iconEffectObj=new c.IconEffect(this,this.iconEffect.enabled,this.iconEffect.count,this.iconEffect.fade,this.iconEffect.autoHide);var f=this;if(!(this.frametransition.transition=="none")){this.iconEffectObj.iconEffectDiv_.style.zIndex=1000}this.iconEffectVisible=true;this.handler=new c.event.InputController2(this.obj);this.handler.startTouchCallback=function(l,k,n){if(f.view){f.dragStarted=false;f.startX=k;f.startY=n;f.detectEventOwner=true;f.componentOwnsEvent=true;f.startScrollX=window.scrollX;f.startScrollY=window.scrollY;var m=f.view.state;f.isStartLeft=!(m&16);f.isStartRight=!(m&32);f.obj.focus()}};this.handler.singleTapCallback=function(l,k,m){if(f.swipeController.isAnimationInProgress()){return}k-=c.Util.getObjPos(f.obj).x;m-=c.Util.getObjPos(f.obj).y;if(f.view){if(f.clickToZoom&c.Enum.CLICK_STATE.CLICK_TO_ZOOM){if(f.clickToZoom&c.Enum.CLICK_STATE.CLICK_TO_RESET){if(f.view.state&1){f.view.zoomClick(k,m,l.shiftKey)}else{f.view.zoomReset()}}else{f.view.zoomClick(k,m,l.shiftKey)}}else{if(f.view.clickToZoom&c.Enum.CLICK_STATE.CLICK_TO_RESET){f.view.zoomReset()}}}c.Event.dispatch(f.obj,c.Event.CLICK,false)};this.handler.doubleTapCallback=function(l,k,m){if(f.swipeController.isAnimationInProgress()){return}k-=c.Util.getObjPos(f.obj).x;m-=c.Util.getObjPos(f.obj).y;if(f.view){if(f.clickToZoom&c.Enum.CLICK_STATE.DOUBLE_CLICK_TO_ZOOM){if(f.clickToZoom&c.Enum.CLICK_STATE.DOUBLE_CLICK_TO_RESET){if(f.view.state&1){f.view.zoomClick(k,m,l.shiftKey)}else{f.view.zoomReset()}}else{f.view.zoomClick(k,m,l.shiftKey)}}else{if(f.clickToZoom&c.Enum.CLICK_STATE.DOUBLE_CLICK_TO_RESET){f.view.zoomReset()}}}};this.handler.swipeCallback=function(l){if(f.view){if(!(f.state&4)&&f.swipe){if(f.componentOwnsEvent){var k=f.getIndexFromItem(f.item);if((l=="right"&&f.mediaSet.items[k-1])||(l=="left"&&f.mediaSet.items[k+1])){f.swipeController.animate(l);f.dragStarted=false}}}else{if(f.dragStarted){f.swipeController.animate(l);f.dragStarted=false}else{f.view.inPinch=false;f.view.inPan=false;f.view.doPan(0,0,false);f.invalidate();var m=new c.event.UserEvent(c.event.UserEvent.PAN,[],true);c.Event.dispatch(f.obj,m,false)}}f.setInPan(false)}};this.handler.dragCallback=function(l,p,m,o,n){if(f.detectEventOwner&&(f.startScrollX!=window.scrollX||f.startScrollY!=window.scrollY)){f.componentOwnsEvent=false;f.detectEventOwner=false}if(f.view){if(!(f.state&4)&&f.swipe){if(f.detectEventOwner){var s=Math.abs(f.startX-p);var r=Math.abs(f.startY-m);if(s>0||r>0){f.componentOwnsEvent=s>r;if((f.leftEdge&&(f.startX-p)<0)||(f.rightEdge&&(f.startX-p)>0)){f.componentOwnsEvent=false}}else{return}}if(f.componentOwnsEvent){f.detectEventOwner=false;l.preventDefault();f.swipeController.processDrag(l,o,n)}}else{var k=f.view.state;var q=Math.abs(o)>Math.abs(n);if((!(k&128)&&n<=0&&!q)||(!(k&64)&&n>=0&&!q)){if(f.detectEventOwner){f.componentOwnsEvent=false;f.detectEventOwner=false}}else{if(f.detectEventOwner){if(f.isStartLeft){if(!(k&16)){if(o>0&&q){if(f.swipe==1){f.dragStarted=true}}else{f.isStartLeft=false}}}if(f.isStartRight){if(!(k&32)){if(o<0&&q){if(f.swipe==1){f.dragStarted=true}}else{f.isStartRight=false}}}}if(f.componentOwnsEvent){if(f.dragStarted){f.detectEventOwner=false;l.preventDefault();f.swipeController.processDrag(l,o,n)}else{if(!f.isStartLeft&&!f.isStartRight){f.detectEventOwner=false;l.preventDefault();f.view.inPan=true;f.view.doPan(o,n,true);f.setInPan(true)}}}}}}};this.handler.endDragCallback=function(n,k,p,m,l){if(f.view){if(!(f.state&4)&&f.swipe){f.swipeController.processEndDrag(n,k,p,m,l);f.dragStarted=false}else{f.view.inPinch=false;f.view.inPan=false;if(f.dragStarted){f.swipeController.processEndDrag(n,k,p,m,l)}else{f.view.doPan(0,0,false);f.invalidate();var o=new c.event.UserEvent(c.event.UserEvent.PAN,[],true);c.Event.dispatch(f.obj,o,false)}f.setInPan(false);f.dragStarted=false}}};this.handler.pinchCallback=function(l,k,n,m){if(f.view){k-=c.Util.getObjPos(f.obj).x;n-=c.Util.getObjPos(f.obj).y;f.view.inPinch=true;f.view.pinchZoom(k,n,m,f.view.viewToImage)}};this.handler.endPinchCallback=function(l,k,n,m){if(f.view){if(f.dragStarted||f.componentOwnsEvent){f.swipeController.processEndDrag(l,k,n)}f.view.inPinch=false;f.view.inPan=false;c.Logger.log(c.Logger.FINEST,"s7sdk.image.ZoomView.endPinchCallback - invalidate");f.view.invalidate(false);f.invalidate();if(f.userEventScale!=f.lastScale){f.userEventScale=f.lastScale;userEvent=new c.event.UserEvent(c.event.UserEvent.ZOOM,[f.lastScale],true);c.Event.dispatch(f.obj,userEvent,false)}}};this.swipeController=new c.event.SwipeController(this.frametransition.duration,this.getSwipeAreaWidth(),this.hei,this.swipe);this.swipeController.onStep=function(k){if(!f.moved&&f.frametransition.transition!="none"){f.moved=true;f.dispatchTransitionEvent(c.event.FrameEvent.NOTF_FRAME_TRANSITION_START)}if(f.frametransition.transition=="slide"){f.forceDraw("left",f.getSwipeAreaWidth()*(k-1)+"px")}else{if(f.frametransition.transition=="fade"){if(k!=0){if(k>0){if(f.left.obj.style.left!=(f.getSwipeAreaWidth()+"px")){f.left.obj.style.left=f.getSwipeAreaWidth()+"px";f.right.obj.style.left=2*f.getSwipeAreaWidth()+"px"}f.setOpacity(f.left.displayElement,Math.abs(k))}else{if(f.right.obj.style.left!=(f.getSwipeAreaWidth()+"px")){f.left.obj.style.left="0px";f.right.obj.style.left=f.getSwipeAreaWidth()+"px"}f.setOpacity(f.right.displayElement,Math.abs(k))}}else{if(f.left.obj.style.left!=(f.getSwipeAreaWidth()+"px")){f.left.obj.style.left=f.getSwipeAreaWidth()+"px";f.right.obj.style.left=2*f.getSwipeAreaWidth()+"px"}}f.setOpacity(f.displ.displayElement,1-Math.abs(k))}else{}}};this.swipeController.onStart=function(){if(f.frametransition.transition=="fade"){if(c.browser.device.name=="android"&&c.browser.device.version=="4"){f.container3.style.display="none";var k=f.container3.offsetWidth;f.container3.style.display="block"}}};this.swipeController.onStop=function(k){if(k==0){f.dispatchTransitionEvent(c.event.FrameEvent.NOTF_FRAME_TRANSITION_END)}else{f.animationStop(k)}f.moved=false};this.focusHandler=function(k){f.inFocus=true};this.blurHandler=function(k){f.inFocus=false};this.obj.addEventListener("focus",this.focusHandler);this.obj.addEventListener("blur",this.blurHandler);this.keyDownHandler=function(l){var m=(l.which)?l.which:l.keyCode;if(f.inFocus){if(m==c.Enum.KEY_CODE.TAB){return}if(m==c.Enum.KEY_CODE.ESCAPE){c.Event.preventDefault(l);f.zoomReset()}if((m==c.Enum.KEY_CODE.NUM_PLUS)||(m==c.Enum.KEY_CODE.PLUS)){c.Event.preventDefault(l);f.zoomIn()}if((m==c.Enum.KEY_CODE.NUM_MINUS)||(m==c.Enum.KEY_CODE.MINUS)){c.Event.preventDefault(l);f.zoomOut()}if((m==c.Enum.KEY_CODE.UP)){c.Event.preventDefault(l);if(typeof f.lastScale!="undefined"){f.zoomNPan(0,1/f.lastScale)}}if((m==c.Enum.KEY_CODE.DOWN)){c.Event.preventDefault(l);if(typeof f.lastScale!="undefined"){f.zoomNPan(0,-1/f.lastScale)}}if((m==c.Enum.KEY_CODE.RIGHT)){c.Event.preventDefault(l);if(!(f.state&4)&&f.swipe){var k=f.getIndexFromItem(f.item);if(f.mediaSet.items[k+1]){f.swipeController.animate("right")}}else{if(typeof f.lastScale!="undefined"){f.zoomNPan(-1/f.lastScale,0)}}}if((m==c.Enum.KEY_CODE.LEFT)){c.Event.preventDefault(l);if(!(f.state&4)&&f.swipe){var k=f.getIndexFromItem(f.item);if(f.mediaSet.items[k-1]){f.swipeController.animate("left")}}else{if(typeof f.lastScale!="undefined"){f.zoomNPan(1/f.lastScale,0)}}}if((m==c.Enum.KEY_CODE.SPACE)){c.Event.preventDefault(l)}}};this.obj.addEventListener("keydown",this.keyDownHandler,true);if(c.browser.name==="ie"&&c.browser.version.minor<=8){var d=f.handler;this.handlerOverlay=new c.event.InputController2(this.iconEffectObj);this.handlerOverlay.singleTapCallback=function(l,k,m){d.singleTapCallback(l,k,m)};this.handlerOverlay.doubleTapCallback=function(l,k,m){d.doubleTapCallback(l,k,m)};this.handlerOverlay.flickCallback=function(k){d.flickCallback(k)};this.handlerOverlay.swipeCallback=function(n,k,o,m,l){d.swipeCallback(n,k,o)};this.handlerOverlay.endSwipeCallback=function(n,k,o,m,l){d.endSwipeCallback(n,k,o)};this.handlerOverlay.pinchCallback=function(l,k,n,m){d.pinchCallback(l,k,n)};this.handlerOverlay.endPinchCallback=function(l,k,n,m){d.endPinchCallback(l,k,n)}}this.iconEffectVisibility={show:function(){f.iconEffectVisible=true;f.checkIconEffect()},hide:function(){f.iconEffectVisible=false;f.checkIconEffect()}};this.viewIsReadySent=false;this.hiresIsReadySent=false;if(this.asset&&this.asset.length>0){this.isReq=new c.IS();this.currentAsset=this.asset;this.isReq.getHttpReq(i,function(l,k){c.image.ZoomView.prototype.loadRequest.apply(k,[l])},null,this)}if(!j){return new c.image.ZoomViewControl(this)}else{return this}};c.Class.inherits("s7sdk.image.ZoomView","s7sdk.UIComponent");c.image.ZoomView.prototype.modifiers={serverUrl:{params:["isRootPath"],defaults:["/is/image/"]},asset:{params:["asset"],defaults:[""],parseParams:false},iscommand:{params:["value"],defaults:[""],parseParams:false},stagesize:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"],deprecated:true},size:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"],deprecated:true},zoomStep:{params:["step","limit"],defaults:[1,1],ranges:["0:","0.1:"]},rgn:{params:["x","y","w","h"],defaults:[0,0,0,0]},rgnN:{params:["x","y","w","h"],defaults:[0,0,0,0]},transition:{params:["time","easing"],defaults:[0.5,0],ranges:["0:","0:5"]},singleclick:{params:["singleclick"],defaults:["none"],ranges:[["none","zoom","reset","zoomReset"]]},doubleclick:{params:["doubleclick"],defaults:["zoomReset"],ranges:[["none","zoom","reset","zoomReset"]]},reset:{params:["reset"],defaults:[true]},frametransition:{params:["transition","duration","spacing"],ranges:[["none","fade","slide"],"0:","0:1"],defaults:["none",0.3,0]},enableHD:{params:["enable","maxHdPixels"],defaults:["limit",1500],ranges:[["always","never","limit"],"1:"]},iconEffect:{params:["enabled","count","fade","autoHide"],defaults:[true,1,0.3,3],ranges:[,"-1:","0:","0:"]},elasticZoom:{params:["elasticzoom"],defaults:[0],ranges:["0.0:1.0"],deprecated:true},swipe:{params:["swipe"],defaults:[true]},fmt:{params:["fmt"],defaults:["jpg"],ranges:[["jpg","jpeg","png","png-alpha","gif","gif-alpha"]]}};c.image.ZoomView.RESTRICTED_STYLES={s7zoomview:["width","height"],"s7zoomview s7iconeffect":["width","height"]};c.image.ZoomView.prototype.setCSS=function(f,e,d){if(this.isRestrictedCSSProperty(c.image.ZoomView.RESTRICTED_STYLES,e)){throw new Error("You cannot set "+f+" : "+e+" CSS property for this component ")}else{this.superproto.setCSS.apply(this,[f,e,d])}};c.image.ZoomView.prototype.setModifier=function(d){throw new Error("Trying to use setModifier on the Core class (ZoomView) is unsupported! Please refer to SDK documentation on using setModifier.")};c.image.ZoomView.prototype.disposeView=function(){if(this.timerSetDuration){clearTimeout(this.timerSetDuration);this.timerSetDuration=null}if(this.timerSetItemDelayed){clearTimeout(this.timerSetItemDelayed);this.timerSetItemDelayed=null}if(this.swipeController){this.swipeController.dispose();this.swipeController=null}if(this.handler){this.handler.detach(this.obj)}if(this.handlerOverlay&&this.iconEffectObj){this.handlerOverlay.detach(this.iconEffectObj)}if(this.view){this.view.detach();this.view.unload(8);this.view.viewParent=null}if(this.left){if(this.left.view){this.left.view.detach();this.left.view.unload(8)}this.left.dispose();delete this.left}if(this.right){if(this.right.view){this.right.view.detach();this.right.view.unload(8)}this.right.dispose();delete this.right}if(this.displ){if(this.displ.view){this.displ.view.detach();this.displ.view.unload(8)}this.displ.dispose();delete this.displ}if(this.tempDisplay){if(this.tempDisplay.view){this.tempDisplay.view.detach();this.tempDisplay.view.unload(8)}this.tempDisplay.dispose();delete this.tempDisplay}this.obj.removeEventListener("focus",this.focusHandler);this.obj.removeEventListener("blur",this.blurHandler);this.obj.removeEventListener("keydown",this.keyDownHandler,true);this.displayElement=null;delete this.iconEffectVisibility};c.image.ZoomView.prototype.dispatchTransitionEvent=function(f){var e=this.getIndexFromItem(this.item);var d=new c.event.FrameEvent(f,this.item,e,false);c.Event.dispatch(this.obj,d,false)};c.image.ZoomView.prototype.cleanUp=function(){this.disposeView();if(this.iconEffectObj){this.iconEffectObj.dispose();this.iconEffectObj=null}this.prevFrame=null;this.onReadyToDislpay=null;if(this.container3){this.container3.parentNode.removeChild(this.container3)}c.Util.removeTags(this.obj);this.obj.style.cssText=""};c.image.ZoomView.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};c.image.ZoomView.prototype.addIE78overlay=function(){if(c.browser.name==="ie"&&c.browser.version.minor<=8){var d=document.createElement("div");d.className="s7zoomview";d.style.position="absolute";d.style.top="0px";d.style.left="0px";d.style.width=this.wid+"px";d.style.height=this.hei+"px";d.style.backgroundColor="rgb(0,0,0)";d.style.filter="alpha(opacity =0)";d.style.zIndex=915;this.ovrl=d;this.displ.obj.appendChild(d)}};c.image.ZoomView.prototype.addEventListener=function(f,e,d){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.addEventListener - type: %0, handler: %1, useCapture: %2",f,e.toString().substring(0,e.toString().indexOf("(")),d);this.superproto.addEventListener.apply(this,[f,e,d])};c.image.ZoomView.prototype.sendStatusEvent=function(d){if(d.viewReady){if(!this.hiresIsReadySent){var e=new c.event.StatusEvent(c.event.StatusEvent.NOTF_HIGHRES_VIEW_READY,true);c.Event.dispatch(this.obj,e,false);this.hiresIsReadySent=true}}if(!d.viewReady){if(!this.viewIsReadySent){var e=new c.event.StatusEvent(c.event.StatusEvent.NOTF_VIEW_READY,true);c.Event.dispatch(this.obj,e,false);this.viewIsReadySent=true}d.viewReady=true}};c.image.ZoomView.prototype.setItemDelayed=function(){var d=this.delayed;this.delayed=null;this.setItem(d)};c.image.ZoomView.prototype.setItem=function(p){if(this.swipeController){if(this.delayed){this.delayed=p;return}if(this.swipeController.isAnimationInProgress()){this.delayed=p;var j=this;this.timerSetItemDelayed=setTimeout(function(){j.setItemDelayed()},50);return}}c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.setItem - item: %0",p);if(this.isReq){this.isReq.cancelHttpReq()}if(p instanceof c.ItemDesc==false){throw new Error("Item must be a descendant of ItemDesc!")}this.currentAsset=p;if(p.parent==null){throw new Error("ItemDesc must be part of a parent set!")}var d=false;var g=false;this.msFrame=-1;if(this.mediaSet==null||this.item==null){g=false}else{g=this.compareSet(this.mediaSet,p.parent,["name","items.length"]);if(g){var m=this.mediaSet.items;var n=p.parent.items;if(m.length==n.length){for(var h=0;h<m.length;h++){var k=this.compareSet(m[h],n[h],["name","version"]);if(!k){g=k;break}}}}d=this.compareSet(this.item,p,["name","version"]);this.msFrame=this.getIndexFromItem(this.item)}if(g&&d){return}this.mediaSet=p.parent;this.viewIsReadySent=false;this.hiresIsReadySent=false;var f=this.setSwipeCapability(p);if(this.view){this.initialSlide=true;this.createViewExt(this.item,this.msFrame>f?this.left:this.right)}else{this.initialSlide=false;this.createView(this.item);var o=Math.min(Math.max(0,f-1),this.mediaSet.items.length-1);var l=Math.min(Math.max(0,f+1),this.mediaSet.items.length-1);if(f==(this.mediaSet.items.length-1)){this.createViewExt(this.mediaSet.items[o],this.left)}else{if(f==0){this.createViewExt(this.mediaSet.items[l],this.right)}else{this.createViewExt(this.mediaSet.items[o],this.left);this.createViewExt(this.mediaSet.items[l],this.right)}}}if(c.browser.device.name=="desktop"){c.Util.css.setCSSAttributeSelector(this.obj,"cursortype","zoomin")}var e=new c.event.StatusEvent(c.event.StatusEvent.NOTF_ASSET_METADATA_READY,true);c.Event.dispatch(this.obj,e,false)};c.image.ZoomView.prototype.setSwipeCapability=function(e){this.item=e;var d=this.getIndexFromItem(this.item);if(this.swipe==0){this.leftEdge=this.rightEdge=true;this.swipeController.setSwipeCapability(true,true)}else{this.leftEdge=d==0;this.rightEdge=d==this.mediaSet.items.length-1;this.swipeController.setSwipeCapability(this.leftEdge,this.rightEdge)}return d};c.image.ZoomView.prototype.compareSet=function(l,g,i){this.getVal=function(n,m){if(m.length==0){return n}var o=m.shift();var j=n[o];return this.getVal(j,m)};for(var f=0;f<i.length;f++){var k=i[f];var e=k.split(".");var h=this.getVal(l,e);e=k.split(".");var d=this.getVal(g,e);if(h!=d){return false}}return true};c.image.ZoomView.prototype.doInitialSlide=function(){if(!this.initialSlide||!this.view){return}this.initialSlide=false;var d=this.getIndexFromItem(this.item);this.preloadIdx=Math.min(Math.max(0,d+1),this.mediaSet.items.length-1);this.swipeController.animate(this.msFrame>d?"left":"right")};c.image.ZoomView.prototype.loadRequest=function(d){this.mediaSet=c.MediaSetParser.parse(d.set,this.imageModifier);if(this.mediaSet.items.length>0&&this.mediaSet.items[0] instanceof c.ItemDesc){if(this.mediaSet.items.length>1){this.createViewExt(this.mediaSet.items[1],this.right)}this.setSwipeCapability(this.mediaSet.items[0]);this.createView(this.item);var e=new c.event.StatusEvent(c.event.StatusEvent.NOTF_ASSET_METADATA_READY,true);c.Event.dispatch(this.obj,e,false)}else{throw new Error("Set response did not contain valid items! Set may be empty.")}};c.image.ZoomView.prototype.createViewExt=function(g,d){if(d.view){if(d.view.transitionTimer){clearTimeout(d.view.transitionTimer);d.view.transitionTimer=null}d.view.unload(1|8)}var e=new c.Rectangle(0,0,g.width,g.height);var h=g.name;function f(j,i,k){j+=((j.indexOf("?")==-1)?"?":"&")+i;j+=(typeof k=="undefined")?"":"="+k;return j}if(this.iscommand!=null&&this.iscommand.length>0){h=f(h,this.iscommand)}if(c.Util.isNonEmptyString(this.locale)){h=f(h,"locale",this.locale)}if(c.Util.isNonEmptyString(g.version)){h=f(h,"id",g.version)}d.view=this.createViewElement(c.Util.resolveURL(this.serverUrl,h),e.width,e.height,this.outWidth,this.outHeight,this.devicePixelRatio,this.zoomStep.step,this.zoomStep.limit,this.transition.time,this.transition.easing,null,this.elasticZoom,this.clickToZoom,this.fmt,0,true);d.view.viewParent=d;if(this.devicePixelRatio!=d.view.devicePixelRatio){this.adjustDevicePixelRatio()}d.view.attach(d);if(d.view.resetImageLoaded){d.onReadyToDislpay()}};c.image.ZoomView.prototype.createViewElement=function(g,k,t,d,j,s,p,u,v,q,f,m,h,e,l,o,i,r){var n;if(c.browser.name==="ie"&&c.browser.version.major<"11"){n=new c.rgn.View(g,k,t,d,j,s,p,u,v,q,f,m,h,e,l,o)}else{n=new c.View(g,k,t,d,j,s,p,u,v,q,f,m,h,e,l,o)}return n};c.image.ZoomView.prototype.adjustDevicePixelRatio=function(){this.devicePixelRatio=1;this.swipeController.resize(this.getSwipeAreaWidth(),this.hei);this.outWidth=this.wid;this.outHeight=this.hei;this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px";this.displ.resize(this.outWidth,this.outHeight,this.wid,this.hei,this.devicePixelRatio);if(this.ovrl){this.ovrl.style.width=this.wid+"px";this.ovrl.style.height=this.hei+"px"}this.container3.style.left=-this.getSwipeAreaWidth()+"px";this.container3.style.width=3*this.getSwipeAreaWidth()+"px";this.container3.style.height=this.hei+"px";this.left.resize(this.outWidth,this.outHeight,this.wid,this.hei,this.devicePixelRatio);this.right.resize(this.outWidth,this.outHeight,this.wid,this.hei,this.devicePixelRatio);if(c.browser.device.name=="android"&&c.browser.device.version=="4"){var d=this.container3.offsetWidth}if(this.iconEffectObj.enabled){this.iconEffectObj.centerOverlay(this.wid,this.hei)}if(this.view){this.view.devicePixelRatio=this.devicePixelRatio;if((this.view.w!=this.wid)||(this.view.h!=this.hei)){this.view.resize(this.wid,this.hei)}this.view.invalidate(true)}};c.image.ZoomView.prototype.createView=function(k){var h=null;if(this.view){if(this.view.transitionTimer){clearTimeout(this.view.transitionTimer);this.view.transitionTimer=null}if(!this.reset){h=this.view.getViewPort()}this.view.unload(1|8)}var l=new c.Rectangle(this.rgnN.x,this.rgnN.y,this.rgnN.w,this.rgnN.h);if(!l.isEmpty()){h=l;this.rgnN.x=this.rgnN.y=this.rgnN.w=this.rgnN.h=0}var e=new c.Rectangle(this.rgn.x/k.width,this.rgn.y/k.height,this.rgn.w/k.width,this.rgn.h/k.height);if(!e.isEmpty()){h=e;this.rgn.x=this.rgn.y=this.rgn.w=this.rgn.h=0}var g=new c.Rectangle(0,0,k.width,k.height);var f=k.name;function i(n,m,o){n+=((n.indexOf("?")==-1)?"?":"&")+m;n+=(typeof o=="undefined")?"":"="+o;return n}if(this.iscommand!=null&&this.iscommand.length>0){f=i(f,this.iscommand)}if(c.Util.isNonEmptyString(this.locale)){f=i(f,"locale",this.locale)}if(c.Util.isNonEmptyString(k.version)){f=i(f,"id",k.version)}this.view=this.createViewElement(c.Util.resolveURL(this.serverUrl,f),g.width,g.height,this.outWidth,this.outHeight,this.devicePixelRatio,this.zoomStep.step,this.zoomStep.limit,this.transition.time,this.transition.easing,h,this.elasticZoom,this.clickToZoom,this.fmt,0,true);this.view.viewParent=this;if(this.devicePixelRatio!=this.view.devicePixelRatio){this.adjustDevicePixelRatio()}if(this.container){this.view.attach(this)}this.viewStateChange(this.view.state);this.settings.trackLoad(this);var j=this.getIndexFromItem(k);var d=new c.AssetEvent(c.event.AssetEvent.ASSET_CHANGED,k,j,true);if(!this.delayed){this.dispatchEvent(d)}};c.image.ZoomView.prototype.getIndexFromItem=function(g){if(this.mediaSet==null){throw new Error("Cannot get index of item because media-set is does not exist!")}var f=-1;var e=this.mediaSet.items;for(var d=0;d<e.length;d++){if(g&&e[d].name==g.name){f=d;break}}return f};c.image.ZoomView.prototype.setAsset=function(d){if(typeof d!="string"){throw new Error("Asset name must be represented by a string!")}c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.setAsset - asset: %0",d);if(d==""){return}var g=this.asset;this.currentAsset=d;this.asset=unescape(d);this.mediaSet=null;this.viewIsReadySent=false;this.hiresIsReadySent=false;var e=c.Util.resolveURL(this.serverUrl,c.MediaSetParser.parseAssetForSetReq(this.asset).req);if(c.Util.isNonEmptyString(this.locale)){e+="&locale="+this.locale}if(this.isReq){this.isReq.cancelHttpReq()}this.isReq=new c.IS();this.isReq.getHttpReq(e,function(i,h){c.image.ZoomView.prototype.loadRequest.apply(h,[i])},null,this);if(g!=this.asset&&g!=null){var f=new c.event.UserEvent(c.event.UserEvent.SWAP,[0,this.asset],true);c.Event.dispatch(this.obj,f,false)}};c.image.ZoomView.prototype.getAsset=function(){return(this.asset?this.asset:this.mediaSet.name)};c.image.ZoomView.prototype.zoomIn=function(){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomIn");if(this.view){this.view.zoomIn()}};c.image.ZoomView.prototype.zoomOut=function(){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomOut");if(this.view){this.view.zoomOut()}};c.image.ZoomView.prototype.zoomReset=function(){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomReset");if(this.view){this.view.zoomReset()}};c.image.ZoomView.prototype.zoomNPan=function(e,d){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomNPan - dx: %0, dy: %1",e,d);if(this.view){this.view.doNPan(e,d)}};c.image.ZoomView.prototype.zoomNRgn=function(d){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomNRgn - rgn: %0",d);if(this.view){this.view.zoomNRgn(d)}};c.image.ZoomView.prototype.zoomRgn=function(d){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.zoomRgn - rgn: %0",d);if(this.view){this.view.zoomRgn(d)}};c.image.ZoomView.prototype.viewInvalidate=function(j){var g=new c.Rectangle(Math.round(j.x*this.view.imageWidth),Math.round(j.y*this.view.imageHeight),Math.round(j.width*this.view.imageWidth),Math.round(j.height*this.view.imageHeight));c.Event.dispatch(this.obj,new c.event.ZoomRgnEvent(c.event.ZoomRgnEvent.NOTF_ZOOM_NRGN,j),false);c.Event.dispatch(this.obj,new c.event.ZoomRgnEvent(c.event.ZoomRgnEvent.NOTF_ZOOM_RGN,g),false);if(!this.lastViewPort||this.lastViewPort.isEmpty()||j.equals(this.lastViewPort)){this.lastViewPort=j;return}var e=this.imagePixelsToViewPoint(g.topLeft());var d=this.imagePixelsToViewPoint(g.bottomRight());var h=(d.y-e.y)/(j.height*this.view.imageHeight);h=Math.round((h+0.00005)*10000)/100;if(h!=this.lastScale){if(!this.view.inTransition){}this.lastScale=h}else{var i=this.imagePixelsToViewPoint(new c.Point2D(Math.round(this.lastViewPort.x*this.view.imageWidth),Math.round(this.lastViewPort.y*this.view.imageHeight)));var l=Math.round(i.x-e.x);var k=Math.round(i.y-e.y);if(l!=0||k!=0){var f=new c.event.ZoomPanEvent(c.event.ZoomPanEvent.NOTF_ZOOM_NPAN,this.lastViewPort.x-j.x,this.lastViewPort.y-j.y);c.Event.dispatch(this.obj,f,false);f=new c.event.ZoomPanEvent(c.event.ZoomPanEvent.NOTF_ZOOM_PAN,l,k);c.Event.dispatch(this.obj,f,false)}}this.lastViewPort=j};c.image.ZoomView.prototype.viewTransitionStop=function(){var d=new c.event.UserEvent(c.event.UserEvent.ZOOM,[this.lastScale],true);c.Event.dispatch(this.obj,d,false)};c.image.ZoomView.prototype.setInPan=function(d){if(this.state&4){if(this.inPan!=(d&&(this.state&4))){this.inPan=d&&(this.state&4);this.cursorChange(this.view.state)}}else{if(this.frametransition.transition=="slide"){this.inPan=d;this.cursorChange(this.view.state|(d?2048:0))}}};c.image.ZoomView.prototype.cursorChange=function(g){if(c.browser.device.name!="desktop"){return}var e=["default","zoomin","reset","drag","slide"];var d=g==0?0:(this.inPan?((g&2048)?4:3):(g&8?1:2));if(this.prevCur==d){return}this.prevCur=d;c.Util.css.setCSSAttributeSelector(this.obj,"cursortype",e[d]);var f=this.obj.offsetWidth};c.image.ZoomView.prototype.viewStateChange=function(d){var e=this.state!=d;this.state=d;this.cursorChange(d);if(e){this.dispatchEvent(new c.event.CapabilityStateEvent(c.event.CapabilityStateEvent.NOTF_ZOOM_CAPABILITY_STATE,new c.ZoomCapabilityState(this.state)))}this.checkIconEffect()};c.image.ZoomView.prototype.checkIconEffect=function(){if(this.iconEffectObj&&this.iconEffectObj.enabled){if(!this.iconEffectVisible||(this.state&4)||(this.state==0)){this.iconEffectObj.hide()}else{if(this.iconEffectVisible){this.iconEffectObj.show(this.wid,this.hei)}}}};c.image.ZoomView.prototype.getWidth=function(){return this.wid};c.image.ZoomView.prototype.getHeight=function(){return this.hei};c.image.ZoomView.prototype.resize=function(f,d){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.resize - width: %0, height: %1",f,d);if(f==this.wid&&d==this.hei){return}this.wid=f;this.hei=d;this.swipeController.resize(this.getSwipeAreaWidth(),d);this.devicePixelRatio=c.Util.adjustDevicePixelRatio(this.enableHD.maxHdPixels,this.hei,this.wid);if(this.view){this.view.devicePixelRatio=this.devicePixelRatio}this.outWidth=this.wid*this.devicePixelRatio;this.outHeight=this.hei*this.devicePixelRatio;this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px";this.displ.resize(this.outWidth,this.outHeight,f,d,this.devicePixelRatio);if(this.ovrl){this.ovrl.style.width=this.wid+"px";this.ovrl.style.height=this.hei+"px"}if(!this.displ.view&&this.view){this.view.resize(f*this.devicePixelRatio,d*this.devicePixelRatio);this.view.draw()}this.container3.style.left=-this.getSwipeAreaWidth()+"px";this.container3.style.width=3*this.getSwipeAreaWidth()+"px";this.container3.style.height=this.hei+"px";this.left.resize(this.outWidth,this.outHeight,f,d,this.devicePixelRatio);if(this.left.displayElement.view){this.left.displayElement.view.resize(f*this.devicePixelRatio,d*this.devicePixelRatio);this.left.displayElement.view.draw()}this.right.resize(this.outWidth,this.outHeight,f,d,this.devicePixelRatio);if(this.right.displayElement.view){this.right.displayElement.view.resize(f*this.devicePixelRatio,d*this.devicePixelRatio);this.right.displayElement.view.draw()}if(c.browser.device.name=="android"&&c.browser.device.version=="4"){var e=this.container3.offsetWidth}if(this.iconEffectObj.enabled){this.iconEffectObj.centerOverlay(f,d)}this.dispatchEvent(new c.event.ResizeEvent(c.event.ResizeEvent.COMPONENT_RESIZE,f,d,false));c.UIComponent.prototype.resize.apply(this,[f,d])};c.image.ZoomView.prototype.forceDraw=function(e,f){this.container3.style[e]=f;if(c.browser.device.name=="android"&&c.browser.device.version=="4"){this.container3.style.display="none";var d=this.container3.offsetWidth;this.container3.style.display="block"}};c.image.ZoomView.prototype.setOpacity=function(e,d){if(c.browser.name=="ie"){if((c.browser.version.minor>5.5)&&(c.browser.version.minor<=8)&&(document.body.filters)){e.style.filter="alpha(opacity ="+(d*100)+")"}else{e.style.opacity=d}}else{e.style.opacity=d}};c.image.ZoomView.prototype.animationStop=function(g){var e;var f;e=this.getIndexFromItem(this.item);if(this.preloadIdx!=null){f=this.preloadIdx;this.preloadIdx=null;if(g==1){this.finalizeReplace(this.right,this.left,f,true)}else{this.finalizeReplace(this.left,this.right,f,false)}var d=Math.min(Math.max(0,e-1),this.mediaSet.items.length-1);this.createViewExt(this.mediaSet.items[d],this.left);this.forceDraw("left",-this.getSwipeAreaWidth()+"px");this.checkAssetChanged(e);return}f=Math.min(Math.max(0,e+(g==1?-2:2)),this.mediaSet.items.length-1);e=Math.min(Math.max(0,e+(g==1?-1:1)),this.mediaSet.items.length-1);if(this.frametransition.transition=="fade"){this.left.obj.style.left="0px";this.right.obj.style.left=2*this.getSwipeAreaWidth()+"px";this.setOpacity(this.displ.displayElement,1)}this.replaceFrame(true,e,f);this.forceDraw("left",-this.getSwipeAreaWidth()+"px");this.checkAssetChanged(e)};c.image.ZoomView.prototype.checkAssetChanged=function(d){if(typeof(d)!="undefined"){var f=this.mediaSet.items[d];if(this.prevFrame.idx!=d||this.prevFrame.setname!=f.parent.name){this.prevFrame.idx=d;this.prevFrame.setname=f.parent.name;var e=new c.AssetEvent(c.event.AssetEvent.ASSET_CHANGED,f,d,true);if(!this.delayed){this.dispatchEvent(e)}}}};c.image.ZoomView.prototype.replaceFrame=function(d,e,f){if(d){if(e<f||f==(this.mediaSet.items.length-1)){this.finalizeReplace(this.left,this.right,f)}else{this.finalizeReplace(this.right,this.left,f)}}this.setSwipeCapability(this.mediaSet.items[e])};c.image.ZoomView.prototype.finalizeReplace=function(d,f,g,e){if(!this.view){return}this.view.detach();if(d.view){d.view.detach();d.view.unload(1|8)}d.view=this.view;d.view.viewParent=d;d.view.attach(d);if(d.view.state&4){d.view.zoomReset()}else{d.view.draw()}f.view.detach();this.view=f.view;this.view.viewParent=this;this.view.attach(this);this.view.draw();this.viewStateChange(this.view.state);f.view=null;this.createViewExt(this.mediaSet.items[g],e?d:f);if(this.frametransition.transition=="fade"){this.setOpacity(this.displ.displayElement,1);this.right.changePosition(false);this.left.changePosition(false)}};c.image.ZoomView.prototype.selectItemByIndex=function(d){if(this.mediaSet&&d>=0&&d<this.mediaSet.items.length){this.setItem(this.mediaSet.items[d])}else{throw new Error("Invalid index or media-set!")}};c.image.ZoomView.prototype.invalidate=function(){};c.image.ZoomView.prototype.imagePixelsToViewPoint=function(e){if(this.view==null){return new c.Point2D(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}var d=this.view.imagePixelsToViewPoint(e);var g=new c.Point2D(0,0);d.x=d.x+g.x;d.y=d.y+g.y;var f=new c.Point2D(e.x-g.x,e.y-g.y);return d};c.image.ZoomView.prototype.viewPointToImagePixels=function(d){if(this.view==null){return new c.Point2D(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)}var f=new c.Point2D(0,0);var e=new c.Point2D(d.x-f.x,d.y-f.y);return this.view.viewPointToImagePixels(e)};c.image.ZoomView.prototype.getCapabilityState=function(){c.Logger.log(c.Logger.FINE,"s7sdk.image.ZoomView.getCapabilityState");return new c.ZoomCapabilityState(this.state)};c.image.ZoomView.prototype.getSwipeAreaWidth=function(){return this.wid+this.spacing};c.image.ZoomView.prototype.getCurrentAsset=function(){return typeof this.currentAsset=="undefined"?null:this.currentAsset};c.image.ZoomView.prototype.setCurrentAsset=function(d){this.viewIsReadySent=true;this.hiresIsReadySent=true;if(typeof(d)=="string"){this.setAsset(d)}else{this.setItem(d)}};c.image.ZoomView.prototype.getFrameTransition=function(){return this.frametransition};c.image.ZoomView.prototype.setFrameTransition=function(j){if(this.swipeController){var h=this.getModifiers().frametransition;var f=c.Modifier.parse(j,h.defaults,h.ranges);var d=false;if(f.values[2]!=this.frametransition.spacing){d=true}if(this.swipeController.isAnimationInProgress()){var g=this;this.timerSetDuration=setTimeout(function(){g.setFrameTransition(j)},50)}else{for(var e=0;e<h.params.length;e++){this.frametransition[h.params[e]]=f.values[e]}if(d){this.spacing=this.frametransition.transition=="fade"?0:this.frametransition.spacing*this.wid;this.tempDisplay.setSpacing(this.spacing);this.displ.setSpacing(this.spacing);this.left.setSpacing(this.spacing);this.right.setSpacing(this.spacing);this.adjustDevicePixelRatio()}this.swipeController.setTransitionTime(this.frametransition.duration*1000)}}};c.ZoomView=c.image.ZoomView;(function b(){var g=c.Util.css.createCssRuleText;var f=c.Util.css.createCssImgUrlText;var e=c.browser&&c.browser.name=="ie"&&c.browser.version.major>=10;var d=g(".s7zoomview",{width:"400px",height:"400px",position:"absolute","background-color":"#FFFFFF","user-select":"none","-moz-user-select":"-moz-none","-webkit-user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","text-align":"left","-ms-touch-action":e?"none":"","touch-action":e?"none":""})+g(".s7zoomview img",{width:"auto","max-width":"none !important","max-height":"none !important"})+g(".s7zoomview[cursortype='default']",{cursor:"default"})+g(".s7zoomview[cursortype='zoomin']",{cursor:"default"})+g(".s7zoomview[cursortype='reset']",{cursor:"default"})+g(".s7zoomview[cursortype='drag']",{cursor:"default"})+g(".s7zoomview[cursortype='slide']",{cursor:"default"})+g(".s7zoomview .s7iconeffect",{width:"120px",height:"120px","-webkit-transform":"translateZ(0px)","background-repeat":"no-repeat","background-position":"center"})+g(".s7zoomview .s7iconeffect[media-type='standard']",{"background-image":f("doubletapicon.png")})+g(".s7zoomview .s7iconeffect[media-type='multitouch']",{"background-image":f("zoomicon.png")});c.Util.css.addDefaultCSS(d,"ZoomView")})()}if(!c.ViewWrapper){c.ViewWrapper=function a(j,e,i,d,g,f,l,k){this.parentObj=j;this.leftPos=f;this.spacing=l;this.w=d;this.h=g;this.obj=c.Util.createObj(null,"div",null,null);this.obj.style.zIndex=k;if(c.browser.name==="ie"&&c.browser.version.major<"11"){this.displayElement=c.rgn.View.createDisplay()}else{this.displayElement=c.View.createDisplay()}this.displayElement.width=e;this.displayElement.height=i;this.displayElement.style.position="absolute";this.obj.style.position="absolute";this.displayElement.style.width=this.obj.style.width=d+"px";this.displayElement.style.height=this.obj.style.height=g+"px";this.obj.style.left=f*(d+l)+"px";this.obj.style.width=(d+l)+"px";this.obj.appendChild(this.displayElement);this.loresIsloaded=false};c.ViewWrapper.prototype.changePosition=function(d){this.obj.style.left=(d?1:this.leftPos)*(this.w+this.spacing)+"px"};c.ViewWrapper.prototype.viewStateChange=function(d){};c.ViewWrapper.prototype.viewInvalidate=function(d){};c.ViewWrapper.prototype.onReadyToDislpay=function(){this.loresIsloaded=true;if(this.parentObj&&this.parentObj.doInitialSlide){this.parentObj.doInitialSlide()}};c.ViewWrapper.prototype.resize=function(f,i,e,g,d){this.displayElement.width=f;this.displayElement.height=i;this.displayElement.style.width=this.obj.style.width=e+"px";this.displayElement.style.height=this.obj.style.height=g+"px";this.obj.style.left=this.leftPos*(e+this.spacing)+"px";this.obj.style.width=(e+this.spacing)+"px";this.w=e;this.h=g;if(this.view){this.view.resize(e*d,g*d);this.view.draw()}};c.ViewWrapper.prototype.setSpacing=function(d){this.spacing=d;this.obj.style.left=this.leftPos*(this.w+this.spacing)+"px";this.obj.style.width=(this.w+this.spacing)+"px"};c.ViewWrapper.prototype.dispatchEvent=function(d){if(this.parentObj){this.parentObj.dispatchEvent(d)}};c.ViewWrapper.prototype.dispose=function(){this.parentObj=null;c.Util.removeTags(this.obj)};c.ViewWrapper.prototype.sendStatusEvent=function(d){if(d){if(this.parentObj&&this.parentObj.sendStatusEvent){this.parentObj.sendStatusEvent(d)}}}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.pkg("s7sdk.rgn");a.Util.require("s7sdk.event.Event");a.Util.require("s7sdk.common.Enumeration");a.Util.require("s7sdk.image.rgn.Resolution");if(!a.rgn.View){a.VIEW_ALIGN_LEFT=1;a.VIEW_ALIGN_CENTER=0;a.VIEW_ALIGN_RIGHT=2;a.rgn.View=function(f,k,u,b,j,t,o,v,w,p,e,m,g,d,l,n,h,r){a.Logger.log(a.Logger.FINER,"View.ctor (no canvas) url: %0 image size: %1 x %2 view size: %3 x %4",f,k,u,b,j);this.idx=typeof(h)=="undefined"?0:h;this.aspect=k/u;this.imageWidth=k;this.imageHeight=u;this.zoomLimit=a.Util.checkDefault(l,0);this.h=j;this.w=b;if(this.w==0){this.w=Math.round(this.aspect*j)}this.align=typeof(r)=="undefined"?a.VIEW_ALIGN_CENTER:r;this.constrainWidth=(this.align==a.VIEW_ALIGN_CENTER)?1:0.5;this.url=f;this.textoverlay=null;this.state=7;this.maxHeight=Math.round(u*v);this.zoomStep=a.Util.checkDefault(o,1);this.limit=a.Util.checkDefault(v,1);this.transitionTime=a.Util.checkDefault(w,0.5)*1000;this.transitionEasing=a.Util.checkDefault(p,0);this.clickToZoom=a.Util.checkDefault(g,9);this.elasticZoom=a.Util.checkDefault(m,0);this.elasticZoom=(this.elasticZoom<0)?0:(this.elasticZoom>1)?1:this.elasticZoom;this.elasticZoom=(this.elasticZoom>0)?this.elasticZoom*0.3+0.69:0;this.fmt=a.Util.checkDefault(d,"jpg");this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.zoomLimit=a.Util.checkDefault(l,0);this.inPan=false;this.inPinch=false;this.sliding=false;this.speedX=0;this.speedY=0;this.lastTx=0;this.lastTy=0;this.inTransition=false;this.prevStep=0;this.maxStep=1;this.resized=false;this.tileRender=true;this.loadResetImage=a.Util.checkDefault(n,true);this.viewReady=false;this.onResetImageLoaded=a.Util.noop;this.devicePixelRatio=t;this.setInitView();this.targetViewToImage=this.resetView();this.topScale=1/this.maxHeight;this.initScale=this.targetViewToImage.d;if(!a.Util.isNull(e)){this.targetViewToImage=this.zoomViewTransform(e)}this.viewToImage=this.targetViewToImage.clone();this.checkState();this.resolutions=new Array();var s=Math.floor(Math.log(1/this.limit)/Math.log(2));var q=Math.round(k/Math.pow(2,s));var c=Math.round(u/Math.pow(2,s));var x;do{x=new a.rgn.Resolution(s++,q,c,f,this.fmt,this);this.resolutions.push(x);q=Math.round(q/2);c=Math.round(c/2)}while(q>256||c>256);this.resolutions.reverse();this.calcRes();this.displayElement=null;this.resetImageLoaded=false;this.resetImage=new Image();this.resetImage.onload=this.onLoadImage;this.resetImage.onerror=this.onErrorImage;this.resetImage.onabort=this.onAbortImage;this.resetImage.view=this;this.delayTileLoad=false;this.parentView=null;this.invalidated=false;this.drawInterval=a.Util.interval(a.rgn.View.intervalDraw,1000/12,[this])};a.rgn.View.epsilon1=0.01;a.rgn.View.epsilon2=0.00001;a.rgn.View.createDisplay=function(){var b=a.Util.createObj(null,"div",null,null);b.style.position="relative";b.style.overflow="hidden";return b};a.rgn.View.prototype.changeStatus=function(b){};a.rgn.View.prototype.writeOverlay=function(b){this.textoverlay=b};a.rgn.View.prototype.init=function(){var b=24;if(this.transitionTime>0){this.maxStep=2000/(b*transitionTime)}};a.rgn.View.prototype.findParentElement=function(){return this.parentView.obj};a.rgn.View.prototype.getDisplayElement=function(){return this.displayElement};a.rgn.View.prototype.attach=function(b){this.parentView=b;this.displayElement=b.displayElement;this.displayElement.view=this;this.loadImage();this.invalidate()};a.rgn.View.prototype.detach=function(){if(null!=this.displayElement){this.displayElement.view=null;this.displayElement=null}};a.rgn.View.prototype.loadImage=function(){if(this.resetImageLoaded||this.resetImage.src){return}var b=this.url+(this.url.indexOf("?")>=0?"&":"?")+"wid="+Math.floor(this.width)+"&hei="+Math.floor(this.height)+"&fmt="+this.fmt;a.Logger.log(a.Logger.INFO,"View.loadImage %0",b);this.resetImage.src=b};a.rgn.View.prototype.onLoadImage=function(d){var d=d||window.event;var c=a.Event.getTarget(d)||this;if(c.view.viewParent!=null&&c.view.viewParent.onReadyToDislpay){c.view.viewParent.onReadyToDislpay()}c.view.invalidate(true);c.view.resetImageLoaded=true;if(c.view.resized){if(c.width==c.view.width&&c.height==c.view.height){c.view.resized=false}}c.view.onResetImageLoaded.apply(c.view,[true,c.view.idx]);if(c.view.viewParent&&c.view.viewParent.sendStatusEvent){c.view.viewReady=true;c.view.viewParent.sendStatusEvent(c.view)}else{var b=new a.event.StatusEvent(a.event.StatusEvent.NOTF_VIEW_READY,true);a.Event.dispatch(c.view.findParentElement(),b,false);if(!c.view.viewReady){var b=new a.event.StatusEvent(a.event.StatusEvent.NOTF_HIGHRES_VIEW_READY,true);a.Event.dispatch(c.view.findParentElement(),b,false)}c.view.viewReady=true}};a.rgn.View.prototype.onErrorImage=function(c){var c=c||window.event;var b=a.Event.getTarget(c)||this;b.view.onResetImageLoaded.apply(b.view,[false,b.view.idx]);a.Logger.log(a.Logger.WARNING,"Reset image failed to load")};a.rgn.View.prototype.onAbortImage=function(c){var c=c||window.event;var b=a.Event.getTarget(c)||this;b.view.onResetImageLoaded.apply(b.view,[false,b.view.idx]);a.Logger.log(a.Logger.WARNING,"Reset image did not finish loading")};a.rgn.View.prototype.clampScale=function(b,d,c){if(b.d*d>this.initScale){d=this.initScale/b.d}else{if(b.d*d<this.topScale){d=this.topScale/b.d}}if(c&&this.zoomLimit>0&&b.d*d<this.initScale/this.zoomLimit){d=this.initScale/(this.zoomLimit*b.d)}if(Math.abs(d-1)<a.rgn.View.epsilon2){return 1}else{return d}};a.rgn.View.prototype.scaleView=function(b){if(this.elasticZoom==0){b=this.clampScale(this.viewToImage,b);if(b==1){return}this.scaleTransform(this.viewToImage,b);this.clampToImage(this.viewToImage);this.calcRes();this.invalidate(true);this.checkState()}else{if(!this.inTransition){this.targetViewToImage=this.viewToImage.clone()}b=this.clampScale(this.targetViewToImage,b);if(b==1){return}this.scaleTransform(this.targetViewToImage,b);this.clampToImage(this.targetViewToImage);this.startTransition()}};a.rgn.View.prototype.scaleTransform=function(d,e){var f=d.transformPoint(new a.Point2D(this.w/2,this.h/2));d.scale(e,e);var c=d.a*this.w/2+d.b*this.h/2;var b=d.c*this.w/2+d.d*this.h/2;d.tx=f.x-c;d.ty=f.y-b};a.rgn.View.prototype.resize=function(e,f){this.stopAction();if(this.displayElement!=null){this.displayElement.width=e;this.displayElement.height=f}var g=this.width;var c=this.height;var j=this.viewToImage.transformPoint(new a.Point2D(this.w/2,this.h/2));this.w=e;this.h=f;this.setInitView();this.initScale=1/this.height;var i=this.clampScale(this.viewToImage,c/this.height);this.viewToImage.translate(this.viewToImage.tx*-1,this.viewToImage.ty*-1);this.viewToImage.scale(i,i);var d=this.viewToImage.a*this.w/2+this.viewToImage.b*this.h/2;var b=this.viewToImage.c*this.w/2+this.viewToImage.d*this.h/2;this.viewToImage.tx=j.x-d;this.viewToImage.ty=j.y-b;this.clampToImage(this.viewToImage);this.calcRes();this.resized=true;this.resized=true;if(this.resetImageLoaded){if(this.width==this.resetImage.width&&this.height==this.resetImage.height){this.resized=false}}this.invalidate(false);if(this.viewParent!=null&&this.viewParent.viewInvalidate){this.viewParent.viewInvalidate(this.getViewPort())}this.checkState()};a.rgn.View.prototype.checkState=function(){var b=0;if(Math.abs(this.viewToImage.d-this.initScale)>a.rgn.View.epsilon2){b=6}if(Math.abs(this.viewToImage.d-this.topScale)>a.rgn.View.epsilon2){b|=8;if(this.zoomLimit>0&&this.viewToImage.d>this.initScale/this.zoomLimit&&this.viewToImage.d-this.initScale/this.zoomLimit>a.rgn.View.epsilon2){b|=1}else{if(this.zoomLimit<=0){b|=1}}}if(b&4){var c=this.getViewPort();if(c.x>a.rgn.View.epsilon2){b|=16}if(Math.abs(1-(c.x+c.width))>a.rgn.View.epsilon2){b|=32}if(c.y>a.rgn.View.epsilon2){b|=64}if(Math.abs(1-(c.y+c.height))>a.rgn.View.epsilon2){b|=128}}if(b==this.state){return}this.state=b;if(this.viewParent!=null){this.viewParent.viewStateChange.apply(this.viewParent,[b])}};a.rgn.View.prototype.pinchZoom=function(h,f,b,i){a.Logger.log(a.Logger.FINER,"pinchZoom x %0 y %1 scaleInc %2",h,f,b);h*=this.devicePixelRatio;f*=this.devicePixelRatio;var j=this.clampScale(i,b,false);if(j==1){return}var g=this.viewToImage.transformPoint(new a.Point2D(h,f));this.viewToImage=i.clone();var d=this.viewToImage.tx;var c=this.viewToImage.ty;this.viewToImage.translate(-d,-c);this.viewToImage.scale(j,j);var e=this.viewToImage.transformPoint(new a.Point2D(h,f));this.viewToImage.tx=g.x-e.x;this.viewToImage.ty=g.y-e.y;this.clampToImage(this.viewToImage);this.calcRes();this.invalidate(true);this.checkState()};a.rgn.View.prototype.zoomClick=function(c,h,e){c*=this.devicePixelRatio;h*=this.devicePixelRatio;a.Logger.log(a.Logger.FINER,"zoomClick(%0, %1, %2)",c,h,e);var f;if(e){f=this.zoomScale}else{f=1/this.zoomScale}f=this.clampScale(this.viewToImage,f,true);if(f==1){return}this.targetViewToImage=this.viewToImage.clone();var g=this.targetViewToImage.transformPoint(new a.Point2D(c,h));this.targetViewToImage.scale(f,f);var d=this.targetViewToImage.a*this.w/2+this.targetViewToImage.b*this.h/2;var b=this.targetViewToImage.c*this.w/2+this.targetViewToImage.d*this.h/2;this.targetViewToImage.tx=g.x-d;this.targetViewToImage.ty=g.y-b;this.clampToImage(this.targetViewToImage);this.startTransition()};a.rgn.View.prototype.doNPan=function(c,b,d){this.viewToImage.tx-=c;this.viewToImage.ty-=b;this.clampToImage(this.viewToImage);this.checkState();this.invalidate(d)};a.rgn.View.prototype.doPan=function(c,b,d){this.viewToImage.tx=this.viewToImage.tx-c*this.viewToImage.a*this.devicePixelRatio;this.viewToImage.ty=this.viewToImage.ty-b*this.viewToImage.d*this.devicePixelRatio;this.clampToImage(this.viewToImage);this.checkState();this.invalidate(d)};a.rgn.View.prototype.draw=function(){if(!this.invalidated){return}if(this.displayElement==null){return}var k=this.viewToImage.clone();k.invert();var c=k.transformPoint(new a.Point2D(0,0));var b=k.transformPoint(new a.Point2D(1,1));var d=new a.Rectangle(c.x,c.y,b.x-c.x,b.y-c.y);var f=new a.Rectangle(0,0,this.w,this.h);d=d.intersection(f);if(this.res.loaded()&&(!this.inTransition&&!this.inPan&&!this.inPinch&&(this.tileRender&&(this.resized||Math.abs(this.viewToImage.d-this.initScale)>a.rgn.View.epsilon2)))){var l=this.viewToRes();var g=this.res.getResToRgn();var h=l;h.concat(g);var i=h;i.invert();var j=this.res.getRegionImage();if(j&&j.imageRegion.loaded){this.drawImage(j,i)}}else{if(!this.resetImageLoaded){return}var e=this.viewToImage.clone();e.scale(this.resetImage.width,this.resetImage.height);e.invert();a.Util.setObjSize(this.resetImage,Math.round(this.resetImage.width*e.a),Math.round(this.resetImage.height*e.d));a.Util.setObjPos(this.resetImage,Math.round(e.tx),Math.round(e.ty));if(this.displayElement.firstChild){this.displayElement.replaceChild(this.resetImage,this.displayElement.firstChild)}else{this.displayElement.appendChild(this.resetImage)}}this.invalidated=false;if(typeof(this.parentView.drawChild)!="undefined"){this.parentView.drawChild()}this.displayElement.firstChild.style.filter="inherit"};a.rgn.View.prototype.drawImage=function(c,b){c.width=Math.round(c.startWidth*b.a);c.height=Math.round(c.startHeight*b.d);a.Util.setObjPos(c,Math.round(b.tx),Math.round(b.ty));if(this.displayElement.firstChild){if(this.displayElement.firstChild!=c){this.displayElement.replaceChild(c,this.displayElement.firstChild)}}else{this.displayElement.appendChild(c)}};a.rgn.View.prototype.resetView=function(){var e=1/this.height;var d=new a.Matrix2D(e/this.aspect,0,0,e,0,0);var c=d.a*this.w/2+d.b*this.h/2;var b=d.c*this.w/2+d.d*this.h/2;if(this.align==a.VIEW_ALIGN_LEFT){d.tx=1-c}else{if(this.align==a.VIEW_ALIGN_RIGHT){d.tx=0-c}else{d.tx=0.5-c}}d.ty=0.5-b;return d};a.rgn.View.prototype.setInitView=function(){var b=(this.constrainWidth<1)?this.w*this.constrainWidth:this.w;if(b/this.h>this.aspect){this.width=Math.round(this.aspect*this.h);this.height=this.h}else{this.width=b;this.height=Math.round(b/this.aspect)}if(this.maxHeight<this.height){this.height=this.maxHeight;this.width=Math.round(this.aspect*this.height)}var c=(this.zoomStep>0)?this.zoomStep:Math.log(2)/Math.log(this.maxHeight/this.h);this.zoomScale=Math.pow(2,1/c);if(this.elasticZoom<=0){this.scaleInc=Math.pow(2,1/(c*10))}else{this.scaleInc=Math.pow(2,1/(c))}};a.rgn.View.prototype.startTransition=function(){this.startViewToImage=this.viewToImage.clone();var b=new Date();this.startTime=b.getTime();this.prevStep=0;if(!this.inTransition){a.Util.timeout(a.rgn.View.transitionHandler,25,[this])}this.inTransition=true;if(this.viewParent!=null&&this.viewParent.viewTransitionStart!=null){this.viewParent.viewTransitionStart()}};a.rgn.View.transitionHandler=function(b){var c=false;c=b.onEnterFrame();if(c){a.Util.timeout(a.rgn.View.transitionHandler,25,[b])}};a.rgn.View.prototype.stopTransition=function(){if(this.inTransition){this.viewToImage=this.targetViewToImage.clone();this.inTransition=false;this.checkState();if(this.viewParent!=null&&this.viewParent.viewTransitionStop!=null){this.viewParent.viewTransitionStop()}}};a.rgn.View.prototype.stopAction=function(){this.stopTransition()};a.rgn.View.prototype.onEnterFrame=function(){var b=new Date();var c=b.getTime();var k=(this.transitionTime!=0)?(c-this.startTime)/this.transitionTime:1;if(k>this.prevStep+this.maxStep){k=this.prevStep+this.maxStep}this.prevStep=k;if(k==0){return true}if(k>=1){this.viewToImage=this.targetViewToImage.clone();this.calcRes();this.invalidate(false);this.stopTransition();return false}if(this.transitionEasing==a.Enum.TRANSITION_EASING.AUTO){if(this.elasticZoom>0){if(this.transitionTime>=1500){k=(k*(k-2))*-1}else{if(this.transitionTime>1000){k=(k-=1)*k*k+1}else{if(this.transitionTime>500){k=((k-=1)*k*k*k-1)*-1}else{k=(k-=1)*k*k*k*k+1}}}}}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUADRATIC){k=(k*(k-2))*-1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.CUBIC){k=(k-=1)*k*k+1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUARTIC){k=((k-=1)*k*k*k-1)*-1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUINTIC){k=(k-=1)*k*k*k*k+1}}}}}var j=1/k;var d=Math.exp(Math.log(this.targetViewToImage.d/this.startViewToImage.d)/j);var i;if(Math.abs(1-d)>1e-12){i=(1-Math.pow(d,j))/(1-d)}else{i=j}var h=(this.targetViewToImage.tx-this.startViewToImage.tx)/i;var g=(this.targetViewToImage.ty-this.startViewToImage.ty)/i;this.viewToImage=this.startViewToImage.clone();var f=this.viewToImage.tx;var e=this.viewToImage.ty;this.viewToImage.translate(-f,-e);this.viewToImage.scale(d,d);this.viewToImage.translate(f+h,e+g);this.calcRes();if((1-k)<0.1){this.invalidate(false)}else{this.invalidate(true)}this.checkState();return true};a.rgn.View.prototype.calcRes=function(){var c;var b=this.resolutions.length-1;if(this.viewToImage.a>this.viewToImage.d){c=this.viewToImage.a*this.resolutions[b].w}else{c=this.viewToImage.d*this.resolutions[b].h}while(c+a.rgn.View.epsilon1>2&&b>0){b--;c/=2}this.res=this.resolutions[b]};a.rgn.View.prototype.invalidate=function(c){c=!!c;if(c==false&&this.tileRender&&this.resized==false&&Math.abs(this.viewToImage.d-this.initScale)<a.rgn.View.epsilon2){c=true}var d=new a.Rectangle(0,0,this.w,this.h);var b=this.viewToRes();d.x=Math.round(b.a*d.x+b.b*d.y+b.tx);d.y=Math.round(b.c*d.x+b.d*d.y+b.ty);d.width=Math.round(b.a*d.width+b.b*d.height);d.height=Math.round(b.c*d.width+b.d*d.height);if(!c){this.res.intersect(d)}this.invalidated=true;if(this.viewParent!=null){this.viewParent.viewInvalidate(this.getViewPort())}};a.rgn.View.intervalDraw=function(b){b.draw()};a.rgn.View.prototype.unload=function(b){if(b&8){if(this.drawInterval){clearInterval(this.drawInterval);this.drawInterval=null}}if(this.resolutions==null){return}if(b&1){for(var c=0;c<this.resolutions.length;c++){this.resolutions[c].release()}}};a.rgn.View.prototype.clampToImage=function(d){var f=this.h*d.d;var e=this.w*d.a;if(f<=1){d.ty=Math.max(d.ty,0);d.ty=Math.min(d.ty,1-f)}else{var b=d.d*this.h/2;d.ty=0.5-b}if(e<=1){d.tx=Math.max(d.tx,0);d.tx=Math.min(d.tx,1-e)}else{var c=d.a*this.w/2;if(this.align==a.VIEW_ALIGN_LEFT){d.tx=1-c;d.tx=Math.min(d.tx,0)}else{if(this.align==a.VIEW_ALIGN_RIGHT){d.tx=0-c;d.tx=Math.max(d.tx,1-e)}else{d.tx=0.5-c}}}};a.rgn.View.prototype.zoomViewTransform=function(j){var g=j.width*this.aspect;var c=j.height;var f;var k;var i=this.w;if((Math.abs(j.x-0)<a.rgn.View.epsilon2)&&(Math.abs(j.y-0)<a.rgn.View.epsilon2)&&(Math.abs(j.right-1)<a.rgn.View.epsilon2)&&(Math.abs(j.bottom-1)<a.rgn.View.epsilon2)){i=this.constrainWidth*i}if(i/this.h>g/c){k=j.height/this.h;f=k/this.aspect}else{f=j.width/i;k=f*this.aspect}var h=new a.Matrix2D(f,0,0,k,j.x,j.y);if(h.d<this.topScale){var b=this.topScale/h.d;var e=h.tx;var d=h.ty;h.translate(-e,-d);h.scale(b,b);h.translate(e,d)}this.clampToImage(h);return h};a.rgn.View.prototype.viewToRes=function(){var b=this.viewToImage.clone();b.scale(this.res.w,this.res.h);return b};a.rgn.View.prototype.getViewPort=function(){var b=new a.Rectangle(0,0,this.w,this.h);b.x=this.viewToImage.a*b.x+this.viewToImage.b*b.y+this.viewToImage.tx;b.y=this.viewToImage.c*b.x+this.viewToImage.d*b.y+this.viewToImage.ty;b.width=this.viewToImage.a*b.width+this.viewToImage.b*b.height;b.height=this.viewToImage.c*b.width+this.viewToImage.d*b.height;return b.intersection(new a.Rectangle(0,0,1,1))};a.rgn.View.prototype.imagePixelsToViewPoint=function(b){var c=this.viewToImage.clone();c.scale(this.imageWidth,this.imageHeight);c.invert();return c.transformPoint(b)};a.rgn.View.prototype.viewPointToImagePixels=function(b){var c=this.viewToImage.clone();c.scale(this.imageWidth,this.imageHeight);return c.transformPoint(b)};a.rgn.View.prototype.zoomIn=function(){this.zoomClick(this.w/2,this.h/2,false)};a.rgn.View.prototype.zoomOut=function(){this.zoomClick(this.w/2,this.h/2,true)};a.rgn.View.prototype.zoomReset=function(){this.targetViewToImage=this.resetView();this.startTransition()};a.rgn.View.prototype.zoomNRgn=function(b){this.targetViewToImage=this.zoomViewTransform(b);this.startTransition()};a.rgn.View.prototype.zoomRgn=function(b){this.zoomNRgn(new a.Rectangle(b.x/this.imageWidth,b.y/this.imageHeight,b.width/this.imageWidth,b.height/this.imageHeight))};a.rgn.View.prototype.intervalDraw=function(b){b.draw();requestAnimFrame(function(){b.intervalDraw(b)})}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(e){if(!e.Enum){e.Enum={TILE:{SIZE:256},TRANSITION_EASING:{AUTO:0,LINEAR:1,QUADRATIC:2,CUBIC:3,QUARTIC:4,QUINTIC:5},CLICK_STATE:{CLICK_TO_ZOOM:1,CLICK_TO_RESET:2,DOUBLE_CLICK_TO_ZOOM:4,DOUBLE_CLICK_TO_RESET:8},SPIN_DIRECTION:{EAST:0,WEST:1,NORTH_WEST:2,NORTH_EAST:3,SOUTH_WEST:4,SOUTH_EAST:5,SOUTH:6,NORTH:7},KEY_CODE:{TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM_PLUS:107,NUM_MINUS:109,PLUS:(navigator.userAgent.indexOf("Firefox")>-1)?61:187,MINUS:(navigator.userAgent.indexOf("Firefox")>-1)?173:189}}}if(!e.CapabilityState){e.CapabilityState=function c(h){this.state=(typeof h=="number")?h:0};e.CapabilityState.prototype.setCapability=function(h){this.state|=h};e.CapabilityState.prototype.removeCapability=function(h){this.state&=~h};e.CapabilityState.prototype.hasCapability=function(h){return Boolean(this.state&h)};e.CapabilityState.prototype.clone=function(){return new this.constructor(this.state)};e.CapabilityState.prototype.toString=function(){var h=[],j,i;for(j in this.constructor){i=this.constructor[j];if(this.constructor.hasOwnProperty(j)&&typeof i=="number"&&this.hasCapability(i)){h.push(j)}}return h.toString()}}if(!e.SpinCapabilityState){e.SpinCapabilityState=function d(h){arguments.callee.superclass.apply(this,[h])};e.Class.inherits("s7sdk.SpinCapabilityState","s7sdk.CapabilityState");e.SpinCapabilityState.ZOOM_IN=1;e.SpinCapabilityState.ZOOM_OUT=2;e.SpinCapabilityState.ZOOM_RESET=4;e.SpinCapabilityState.ZOOM_IN_CONT=8;e.SpinCapabilityState.PAN_LEFT=16;e.SpinCapabilityState.PAN_RIGHT=32;e.SpinCapabilityState.PAN_UP=64;e.SpinCapabilityState.PAN_DOWN=128;e.SpinCapabilityState.SPIN_WEST=256;e.SpinCapabilityState.SPIN_EAST=512;e.SpinCapabilityState.SPIN_NORTH=1024;e.SpinCapabilityState.SPIN_SOUTH=2048}if(!e.ZoomCapabilityState){e.ZoomCapabilityState=function f(h){arguments.callee.superclass.apply(this,[h])};e.Class.inherits("s7sdk.ZoomCapabilityState","s7sdk.CapabilityState");e.ZoomCapabilityState.ZOOM_IN=1;e.ZoomCapabilityState.ZOOM_OUT=2;e.ZoomCapabilityState.ZOOM_RESET=4;e.ZoomCapabilityState.ZOOM_IN_CONT=8;e.ZoomCapabilityState.PAN_LEFT=16;e.ZoomCapabilityState.PAN_RIGHT=32;e.ZoomCapabilityState.PAN_UP=64;e.ZoomCapabilityState.PAN_DOWN=128}if(!e.VideoCapabilityState){e.VideoCapabilityState=function g(h){arguments.callee.superclass.apply(this,[h])};e.Class.inherits("s7sdk.VideoCapabilityState","s7sdk.CapabilityState");e.VideoCapabilityState.PAUSE=1;e.VideoCapabilityState.PLAY=2;e.VideoCapabilityState.STOP=4;e.VideoCapabilityState.MUTE=8;e.VideoCapabilityState.UNMUTE=16;e.VideoCapabilityState.REPLAY=32}if(!e.PageViewCapabilityState){e.PageViewCapabilityState=function a(h){arguments.callee.superclass.apply(this,[h])};e.Class.inherits("s7sdk.PageViewCapabilityState","s7sdk.CapabilityState");e.PageViewCapabilityState.ZOOM_IN=1;e.PageViewCapabilityState.ZOOM_OUT=2;e.PageViewCapabilityState.ZOOM_RESET=4;e.PageViewCapabilityState.ZOOM_IN_CONT=8;e.PageViewCapabilityState.PAN_LEFT=16;e.PageViewCapabilityState.PAN_RIGHT=32;e.PageViewCapabilityState.PAN_UP=64;e.PageViewCapabilityState.PAN_DOWN=128;e.PageViewCapabilityState.FIRST_PAGE=256;e.PageViewCapabilityState.LAST_PAGE=512}if(!e.CarouselViewCapabilityState){e.CarouselViewCapabilityState=function b(h){arguments.callee.superclass.apply(this,[h])};e.Class.inherits("s7sdk.CarouselViewCapabilityState","s7sdk.CapabilityState");e.CarouselViewCapabilityState.FIRST_PAGE=256;e.CarouselViewCapabilityState.LAST_PAGE=512}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.pkg("s7sdk.rgn");a.Util.require("s7sdk.common.Geometry");a.Util.require("s7sdk.event.Event");if(!a.rgn.Resolution){a.rgn.Resolution=function(g,d,f,e,c,b){this.view=b;this.level=g;this.w=d;this.h=f;this.regions=new Array();this.url=e+(e.indexOf("?")>=0?"&":"?")+"scl="+Math.pow(2,g);this.fmt=c;this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.currentRgn=null;this.resToRgn=null};a.rgn.Resolution.prototype.getRegionImage=function(){if(this.currentRgn){return this.currentRgn.image}return null};a.rgn.Resolution.prototype.getResToRgn=function(){return this.resToRgn};a.rgn.Resolution.prototype.intersect=function(g){var i=new a.Rectangle(0,0,this.w,this.h);i=i.intersection(g);this.currentRgn=null;var b;for(var h=0;h<this.regions.length;h++){b=this.regions[h];if(b.rect.containsRect(i)){this.currentRgn=b;break}}if(this.currentRgn==null){var e=Math.floor(i.x/256)*256;var f=Math.floor(i.y/256)*256;var c=f;while(c<i.y+i.height&&c<this.h){c+=Math.min(this.h-c,256)}var d=e;while(d<i.x+i.width&&d<this.w){d+=Math.min(this.w-d,256)}var j=new a.Rectangle(e,f,d-e,c-f);this.currentRgn=new a.Region(this,this.level,j,this.url,this.fmt);this.regions.push(this.currentRgn)}this.resToRgn=new a.Matrix2D(1,0,0,1,-1*this.currentRgn.rect.x,-1*this.currentRgn.rect.y)};a.rgn.Resolution.prototype.release=function(){};a.rgn.Resolution.prototype.invalidate=function(){this.view.invalidated=true};a.rgn.Resolution.prototype.loaded=function(){if(this.currentRgn==null){return false}return this.currentRgn.loaded}}if(!a.Region){a.Region=function(d,f,e,c,b){this.res=d;this.fmt=a.Util.checkDefault(b,"jpg");this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.url=c;this.level=f;this.rect=e;this.loaded=false;this.image=new Image();this.load()};a.Region.prototype.load=function(){var c=Math.pow(2,this.level);var b=this.url+(this.url.indexOf("?")<0?"?":"&");b+="req=tile&rect="+this.rect.x+","+this.rect.y+",";b+=this.rect.width+","+this.rect.height;b+="&fmt="+this.fmt;this.image.onload=this.onLoadImage;this.image.onerror=this.onErrorImage;this.image.onabort=this.onAbortImage;this.image.imageRegion=this;this.image.src=b;a.Logger.log(a.Logger.FINER,"Region.load %0",b)};a.Region.prototype.onLoadImage=function(b){this.startWidth=this.width;this.startHeight=this.height;this.imageRegion.loaded=true;this.imageRegion.res.invalidate()};a.Region.prototype.onErrorImage=function(b){a.Logger.log(a.Logger.WARNING,"Region image failed to load")};a.Region.prototype.onAbortImage=function(b){a.Logger.log(a.Logger.WARNING,"Region image failed to load")}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.Util.require("s7sdk.event.Event");a.Util.require("s7sdk.common.Enumeration");a.Util.require("s7sdk.image.Resolution");a.Util.require("s7sdk.image.Tile");if(!a.View){a.VIEW_ALIGN_LEFT=1;a.VIEW_ALIGN_CENTER=0;a.VIEW_ALIGN_RIGHT=2;a.View=function(f,k,u,b,j,t,o,v,y,p,e,m,g,d,l,n,h,r){a.Logger.log(a.Logger.FINER,"s7sdk.View constructor (canvas based) - url: %0, image size: %1 x %2, view size: %3 x %4",f,k,u,b,j);this.idx=typeof(h)=="undefined"?0:h;this.aspect=k/u;this.imageWidth=k;this.imageHeight=u;this.zoomLimit=a.Util.checkDefault(l,0);this.h=j;this.w=b;if(this.w==0){this.w=Math.round(this.aspect*j)}this.align=typeof(r)=="undefined"?a.VIEW_ALIGN_CENTER:r;this.constrainWidth=(this.align==a.VIEW_ALIGN_CENTER)?1:0.5;this.url=f;this.textoverlay=null;this.state=7;this.maxHeight=Math.round(u*v);this.zoomStep=a.Util.checkDefault(o,1);this.limit=a.Util.checkDefault(v,1);this.transitionTime=a.Util.checkDefault(y,0.5)*1000;this.transitionEasing=a.Util.checkDefault(p,0);this.clickToZoom=a.Util.checkDefault(g,9);this.elasticZoom=a.Util.checkDefault(m,0);this.elasticZoom=(this.elasticZoom<0)?0:(this.elasticZoom>1)?1:this.elasticZoom;this.elasticZoom=(this.elasticZoom>0)?this.elasticZoom*0.3+0.69:0;this.fmt=a.Util.checkDefault(d,"jpg");this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.zoomLimit=a.Util.checkDefault(l,0);this.inPan=false;this.inPinch=false;this.sliding=false;this.speedX=0;this.speedY=0;this.lastTx=0;this.lastTy=0;this.inTransition=false;this.prevStep=0;this.maxStep=1;this.resized=false;this.tileRender=true;this.loadResetImage=a.Util.checkDefault(n,true);this.viewReady=false;this.devicePixelRatio=t;this.setInitView();this.targetViewToImage=this.resetView();this.topScale=1/this.maxHeight;this.initScale=this.targetViewToImage.d;if(!a.Util.isNull(e)){this.targetViewToImage=this.zoomViewTransform(e)}this.viewToImage=this.targetViewToImage.clone();this.checkState();this.resolutions=new Array();var s=Math.floor(Math.log(1/this.limit)/Math.log(2));var q=Math.round(k/Math.pow(2,s));var c=Math.round(u/Math.pow(2,s));var z;do{z=new a.Resolution(s++,q,c,f,this.fmt,this);this.resolutions.push(z);q=Math.round(q/2);c=Math.round(c/2)}while(z.nTiles()>1);a.View.maxLevel=s-1;this.resolutions.reverse();this.calcRes();var w=new a.TileAddress(this.resolutions[0].w,this.resolutions[0].h,0,0,0);var x=this.resolutions[0].getCreateTile(w,0);if(x.image!=null&&x.image.addEventListener!=null){x.image.parentView=this;x.image.addEventListener(a.Event.TILE_LOADED,a.View.onTileLoad,true);x.image.addEventListener(a.Event.TILE_FAILED,a.View.onTileLoad,true)}this.canvas=null;this.resetImageLoaded=false;this.resetImage=new Image();this.resetImage.onload=this.onLoadImage;this.resetImage.onerror=this.onErrorImage;this.resetImage.onabort=this.onAbortImage;this.resetImage.view=this;this.onResetImageLoaded=a.Util.noop;this.delayTileLoad=false;this.parentView=null;this.invalidated=false;this.drawInterval=a.Util.interval(a.View.intervalDraw,60,[this])};a.View.epsilon1=0.01;a.View.epsilon2=0.00001;a.View.epsilon3=1e-9;a.View.createDisplay=function(){return a.Util.createObj(null,"canvas",null,null)};a.View.prototype.changeStatus=function(b){};a.View.prototype.writeOverlay=function(b){this.textoverlay=b};a.View.prototype.init=function(){var b=24;if(this.transitionTime>0){this.maxStep=2000/(b*transitionTime)}};a.View.prototype.findParentElement=function(){return this.parentView.obj};a.View.prototype.getDisplayElement=function(){return this.canvas};a.View.prototype.attach=function(c){this.parentView=c;this.canvas=c.displayElement;var b=this.findParentElement();this.canvas.view=this;this.invalidate()};a.View.prototype.detach=function(){if(null!=this.canvas){this.canvas.view=null;this.canvas=null}this.parentView=null};a.View.onTileLoad=function(c){var b=a.Event.getTarget(c);if(b.parentView.isLowerTileLoaded()&&!b.parentView.viewReady){if(!b.parentView.viewParent){b.removeEventListener(a.Event.TILE_LOADED,a.View.onTileLoad,true);b.removeEventListener(a.Event.TILE_FAILED,a.View.onTileLoad,true);b.parentView=null;return}b.parentView.onTileLoadArise=true}b.removeEventListener(a.Event.TILE_LOADED,a.View.onTileLoad,true);b.removeEventListener(a.Event.TILE_FAILED,a.View.onTileLoad,true);if(b.parentView.viewParent!=null&&b.parentView.viewParent.onReadyToDislpay){b.parentView.viewParent.onReadyToDislpay()}b.parentView.invalidate(true);if(b.parentView.loadResetImage){b.parentView.loadImage()}b.parentView=null};a.View.prototype.loadImage=function(){if(this.resetImageLoaded||this.resetImage.src){return}var b=this.url+(this.url.indexOf("?")>=0?"&":"?")+"wid="+Math.floor(this.width)+"&hei="+Math.floor(this.height)+"&fmt="+this.fmt;a.Logger.log(a.Logger.INFO,"s7sdk.View.loadImage - requestUrl: %0",b);this.resetImage.src=b};a.View.prototype.onLoadImage=function(c){var c=c||window.event;var b=a.Event.getTarget(c);b.view.invalidate(true);b.view.resetImageLoaded=true;if(b.view.resized){if(b.width==b.view.width&&b.height==b.view.height){b.view.resized=false}}b.view.onResetImageLoaded.apply(b.view,[true,b.view.idx]);b.view.onLoadImageArise=true};a.View.prototype.onErrorImage=function(c){var b=a.Event.getTarget(c);b.view.onResetImageLoaded.apply(b.view,[false,b.view.idx]);a.Logger.log(a.Logger.WARNING,"s7sdk.View.onErrorImage - Reset image failed to load")};a.View.prototype.onAbortImage=function(c){var b=a.Event.getTarget(c);b.view.onResetImageLoaded.apply(b.view,[false,b.view.idx]);a.Logger.log(a.Logger.WARNING,"s7sdk.View.onAbortImage - Reset image did not finish the load")};a.View.prototype.lowerTile=function(i,f){var c=null;var h=i+1;var g;while((c==null||!c.loaded)&&h<=this.resolutions[0].level){var b=this.resolutions[0].level-h;var e=this.resolutions[b];var d=Math.floor(f.x()/Math.pow(2,h-i))+Math.floor(f.y()/Math.pow(2,h-i))*Math.ceil(e.w/a.Enum.TILE.SIZE);c=e.getTile(d);h++}return c};a.View.prototype.isLowerTileLoaded=function(){var b=this.resolutions[0].getTile(0);return((b!=null)&&(b.loaded))};a.View.prototype.clampScale=function(b,d,c){if(b.d*d>this.initScale){d=this.initScale/b.d}if(b.d*d<this.topScale){d=this.topScale/b.d}if(c&&this.zoomLimit>0&&b.d*d<this.initScale/this.zoomLimit){d=this.initScale/(this.zoomLimit*b.d)}if(Math.abs(d-1)<a.View.epsilon2){return 1}else{return d}};a.View.prototype.scaleView=function(b){if(this.elasticZoom==0){b=this.clampScale(this.viewToImage,b);if(b==1){return}this.scaleTransform(this.viewToImage,b);this.clampToImage(this.viewToImage);this.calcRes();this.invalidate(true);this.checkState()}else{if(!this.inTransition){this.targetViewToImage=this.viewToImage.clone()}b=this.clampScale(this.targetViewToImage,b);if(b==1){return}this.scaleTransform(this.targetViewToImage,b);this.clampToImage(this.targetViewToImage);this.startTransition()}};a.View.prototype.scaleTransform=function(d,e){var f=d.transformPoint(new a.Point2D(this.w/2,this.h/2));d.scale(e,e);var c=d.a*this.w/2+d.b*this.h/2;var b=d.c*this.w/2+d.d*this.h/2;d.tx=f.x-c;d.ty=f.y-b};a.View.prototype.resize=function(e,f){this.stopAction();if(this.canvas!=null){this.canvas.width=e;this.canvas.height=f}var g=this.width;var c=this.height;var j=this.viewToImage.transformPoint(new a.Point2D(this.w/2,this.h/2));this.w=e;this.h=f;this.setInitView();this.initScale=1/this.height;var i=this.clampScale(this.viewToImage,c/this.height);this.viewToImage.translate(this.viewToImage.tx*-1,this.viewToImage.ty*-1);this.viewToImage.scale(i,i);var d=this.viewToImage.a*this.w/2+this.viewToImage.b*this.h/2;var b=this.viewToImage.c*this.w/2+this.viewToImage.d*this.h/2;this.viewToImage.tx=j.x-d;this.viewToImage.ty=j.y-b;this.clampToImage(this.viewToImage);this.calcRes();this.resized=true;this.resized=true;if(this.resetImageLoaded){if(this.width==this.resetImage.width&&this.height==this.resetImage.height){this.resized=false}}this.invalidate(false);if(this.viewParent!=null&&this.viewParent.viewInvalidate){this.viewParent.viewInvalidate(this.getViewPort())}this.checkState()};a.View.prototype.checkState=function(){var b=0;if(Math.abs(this.viewToImage.d-this.initScale)>a.View.epsilon2){b=6}if(Math.abs(this.viewToImage.d-this.topScale)>a.View.epsilon2){b|=8;if(this.zoomLimit>0&&this.viewToImage.d>this.initScale/this.zoomLimit&&this.viewToImage.d-this.initScale/this.zoomLimit>a.View.epsilon2){b|=1}else{if(this.zoomLimit<=0){b|=1}}}if(b&4){var c=this.getViewPort();if(c.x>a.View.epsilon2){b|=16}if(Math.abs(1-(c.x+c.width))>a.View.epsilon2){b|=32}if(c.y>a.View.epsilon2){b|=64}if(Math.abs(1-(c.y+c.height))>a.View.epsilon2){b|=128}}if(b==this.state){return}this.state=b;if(this.viewParent!=null){this.viewParent.viewStateChange.apply(this.viewParent,[b])}};a.View.prototype.pinchZoom=function(h,f,b,i){a.Logger.log(a.Logger.FINEST,"s7sdk.View.pinchZoom - x: %0, y: %1, scale: %2",h,f,b);h*=this.devicePixelRatio;f*=this.devicePixelRatio;var j=this.clampScale(i,b,false);if(j==1){return}var g=this.viewToImage.transformPoint(new a.Point2D(h,f));this.viewToImage=i.clone();var d=this.viewToImage.tx;var c=this.viewToImage.ty;this.viewToImage.translate(-d,-c);this.viewToImage.scale(j,j);var e=this.viewToImage.transformPoint(new a.Point2D(h,f));this.viewToImage.tx=g.x-e.x;this.viewToImage.ty=g.y-e.y;this.clampToImage(this.viewToImage);this.calcRes();this.invalidate(true);this.checkState()};a.View.prototype.zoomClick=function(c,h,e){c*=this.devicePixelRatio;h*=this.devicePixelRatio;a.Logger.log(a.Logger.FINEST,"s7sdk.View.zoomClick - x: %0, y: %1, ctrlDown: %2",c,h,e);var f;if(e){f=this.zoomScale}else{f=1/this.zoomScale}f=this.clampScale(this.viewToImage,f,true);if(f==1){return}this.targetViewToImage=this.viewToImage.clone();var g=this.targetViewToImage.transformPoint(new a.Point2D(c,h));this.targetViewToImage.scale(f,f);var d=this.targetViewToImage.a*this.w/2+this.targetViewToImage.b*this.h/2;var b=this.targetViewToImage.c*this.w/2+this.targetViewToImage.d*this.h/2;this.targetViewToImage.tx=g.x-d;this.targetViewToImage.ty=g.y-b;this.clampToImage(this.targetViewToImage);this.startTransition()};a.View.prototype.doNPan=function(c,b,d){this.viewToImage.tx-=c;this.viewToImage.ty-=b;this.clampToImage(this.viewToImage);this.checkState();this.invalidate(d)};a.View.prototype.doPan=function(c,b,d){this.viewToImage.tx=this.viewToImage.tx-c*this.viewToImage.a*this.devicePixelRatio;this.viewToImage.ty=this.viewToImage.ty-b*this.viewToImage.d*this.devicePixelRatio;this.clampToImage(this.viewToImage);this.checkState();this.invalidate(d)};a.View.prototype.draw=function(){if(!this.invalidated){return}if(this.canvas==null){return}var o=this.canvas.getContext("2d");if(o==null){return}var n=this.viewToImage.clone();n.invert();var d=n.transformPoint(new a.Point2D(0,0));var c=n.transformPoint(new a.Point2D(1,1));var g=new a.Rectangle(d.x,d.y,c.x-d.x,c.y-d.y);var i=new a.Rectangle(0,0,this.w,this.h);g=g.intersection(i);var e=new a.Rectangle(Math.round(g.x),Math.round(g.y),Math.round(g.width),Math.round(g.height));if(g.containsRect(i)==false){if(e.y>0){o.clearRect(0,0,this.canvas.width,e.y+1)}if(e.height+e.y<this.canvas.height){o.clearRect(0,e.height+e.y-1,this.canvas.width,this.canvas.height-e.height+e.y+1)}if(e.x>0){o.clearRect(0,0,e.x+1,this.canvas.height)}if(e.width+e.x<this.canvas.width){o.clearRect(e.x+e.width-1,0,this.canvas.width-e.x+e.width+1,this.canvas.height)}}if(!this.resetImageLoaded||(!this.inTransition&&!this.inPan&&!this.inPinch&&(this.tileRender&&(this.resized||Math.abs(this.viewToImage.d-this.initScale)>a.View.epsilon2)))){if(!this.isLowerTileLoaded()){return}var j=this.viewToRes();j.invert();this.cleanUpCanvasAndroid4();this.res.draw(g,j,this);a.Logger.log(a.Logger.FINEST,"s7sdk.View.draw - Rendering from tiles: %0",g.toString())}else{var h=this.viewToImage.clone();h.scale(this.resetImage.width,this.resetImage.height);var f=h.transformRect(g);var l=new a.Rectangle(0,0,this.resetImage.width,this.resetImage.height);var m=f.intersection(l);var k=Math.abs(this.viewToImage.d-this.initScale)>a.View.epsilon3;a.Logger.log(a.Logger.FINEST,"s7sdk.View.draw - Rendering from image: %0 to: %1",m.toString(),g.toString());a.Logger.log(a.Logger.FINEST,"s7sdk.View - inPan: %0, inPinch: %1, resetImageLoaded: %2, inTransition: %3, tileRender: %4, resized: %5",this.inPan,this.inPinch,this.resetImageLoaded,this.inTransition,this.tileRender,this.resized);if(!isNaN(m.x)&&!isNaN(m.y)&&m.height>0&&m.width>0){if(this.transparent){if(g.x==0&&g.y==0&&g.width==this.canvas.width&&g.height==this.canvas.height){this.canvas.width=g.width}else{o.clearRect(g.x,g.y,g.width,g.height)}}this.cleanUpCanvasAndroid4();if(k||this.resized){o.drawImage(this.resetImage,m.x,m.y,m.width,m.height,g.x,g.y,g.width,g.height)}else{o.drawImage(this.resetImage,0,0,this.resetImage.width,this.resetImage.height,Math.round(g.x),Math.round(g.y),this.resetImage.width,this.resetImage.height)}}}if(this.textoverlay!=null){o.font="30px Times New Roman";o.fillStyle="Black";o.fillText(this.textoverlay,this.canvas.width/2-50,this.canvas.height/2-15)}this.invalidated=false;if(typeof(this.parentView.drawChild)!="undefined"){this.parentView.drawChild()}if(this.onTileLoadArise){if(this.viewParent.sendStatusEvent){this.viewParent.sendStatusEvent(this)}else{var b=new a.event.StatusEvent(a.event.StatusEvent.NOTF_VIEW_READY,true);a.Event.dispatch(this.viewParent,b,false);this.viewReady=true}this.onTileLoadArise=false}if(this.onLoadImageArise){if(this.viewParent&&this.viewParent.sendStatusEvent){this.viewParent.sendStatusEvent(this)}else{if(!this.viewParent){return}if(this.viewReady){var b=new a.event.StatusEvent(a.event.StatusEvent.NOTF_HIGHRES_VIEW_READY,true);a.Event.dispatch(this.viewParent,b,false)}if(!this.viewReady){var b=new a.event.StatusEvent(a.event.StatusEvent.NOTF_VIEW_READY,true);a.Event.dispatch(this.viewParent,b,false);this.viewReady=true}}this.onLoadImageArise=false}};a.View.prototype.cleanUpCanvasAndroid4=function(){if(a.browser.device.name=="android"&&a.browser.device.version=="4"&&!(a.browser.name=="chrome")){this.canvas.style.visibility="hidden";var b=this.canvas.offsetHeight;this.canvas.style.visibility=""}};a.View.prototype.resetView=function(){var e=1/this.height;var d=new a.Matrix2D(e/this.aspect,0,0,e,0,0);var c=d.a*this.w/2+d.b*this.h/2;var b=d.c*this.w/2+d.d*this.h/2;if(this.align==a.VIEW_ALIGN_LEFT){d.tx=1-c}else{if(this.align==a.VIEW_ALIGN_RIGHT){d.tx=0-c}else{d.tx=0.5-c}}d.ty=0.5-b;return d};a.View.prototype.setInitView=function(){var c=(this.constrainWidth<1)?this.w*this.constrainWidth:this.w;var b=c/this.h;if(b>this.aspect){this.width=Math.round(this.aspect*this.h);this.height=this.h}else{this.width=c;this.height=Math.round(c/this.aspect)}if(this.maxHeight<this.height){if(this.devicePixelRatio&&this.devicePixelRatio!=1){this.w=Math.round(this.w/this.devicePixelRatio);this.h=Math.round(this.h/this.devicePixelRatio);this.devicePixelRatio=1;if(b>this.aspect){this.height=this.maxHeight<this.h?this.maxHeight:this.h;this.width=Math.round(this.aspect*this.height)}else{this.width=(this.constrainWidth<1)?this.w*this.constrainWidth:this.w;this.height=this.maxHeight<Math.round(this.width/this.aspect)?this.maxHeight:Math.round(this.width/this.aspect)}if(this.viewParent&&this.viewParent.adjustDevicePixelRatio){this.viewParent.adjustDevicePixelRatio()}}else{this.height=this.maxHeight;this.width=Math.round(this.aspect*this.height)}}var d=(this.zoomStep>0)?this.zoomStep:Math.log(2)/Math.log(this.maxHeight/this.h);this.zoomScale=Math.pow(2,1/d);if(this.elasticZoom<=0){this.scaleInc=Math.pow(2,1/(d*10))}else{this.scaleInc=Math.pow(2,1/(d))}};a.View.prototype.startTransition=function(){this.startViewToImage=this.viewToImage.clone();var b=new Date();this.startTime=b.getTime();this.prevStep=0;if(!this.inTransition){this.transitionTimer=a.Util.timeout(a.View.transitionHandler,25,[this])}this.inTransition=true;if(this.viewParent!=null&&this.viewParent.viewTransitionStart!=null){this.viewParent.viewTransitionStart()}};a.View.transitionHandler=function(b){var c=false;c=b.onEnterFrame();if(c){b.transitionTimer=a.Util.timeout(a.View.transitionHandler,25,[b])}};a.View.prototype.stopTransition=function(){if(this.inTransition){if(this.transitionTimer){clearTimeout(this.transitionTimer);this.transitionTimer=null}this.viewToImage=this.targetViewToImage.clone();this.inTransition=false;this.checkState();if(this.viewParent!=null&&this.viewParent.viewTransitionStop!=null){this.viewParent.viewTransitionStop()}}};a.View.prototype.stopAction=function(){this.stopTransition()};a.View.prototype.setViewPort=function(b){this.stopAction();this.viewToImage=this.zoomViewTransform(b);this.calcRes();this.invalidate(false)};a.View.prototype.onEnterFrame=function(){var b=new Date();var c=b.getTime();var k=(this.transitionTime!=0)?(c-this.startTime)/this.transitionTime:1;if(k>this.prevStep+this.maxStep){k=this.prevStep+this.maxStep}this.prevStep=k;if(k==0){return true}if(k>=1){this.viewToImage=this.targetViewToImage.clone();this.calcRes();this.invalidate(false);this.stopTransition();return false}if(this.transitionEasing==a.Enum.TRANSITION_EASING.AUTO){if(this.elasticZoom>0){if(this.transitionTime>=1500){k=(k*(k-2))*-1}else{if(this.transitionTime>1000){k=(k-=1)*k*k+1}else{if(this.transitionTime>500){k=((k-=1)*k*k*k-1)*-1}else{k=(k-=1)*k*k*k*k+1}}}}}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUADRATIC){k=(k*(k-2))*-1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.CUBIC){k=(k-=1)*k*k+1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUARTIC){k=((k-=1)*k*k*k-1)*-1}else{if(this.transitionEasing==a.Enum.TRANSITION_EASING.QUINTIC){k=(k-=1)*k*k*k*k+1}}}}}var j=1/k;var d=Math.exp(Math.log(this.targetViewToImage.d/this.startViewToImage.d)/j);var i;if(Math.abs(1-d)>1e-12){i=(1-Math.pow(d,j))/(1-d)}else{i=j}var h=(this.targetViewToImage.tx-this.startViewToImage.tx)/i;var g=(this.targetViewToImage.ty-this.startViewToImage.ty)/i;this.viewToImage=this.startViewToImage.clone();var f=this.viewToImage.tx;var e=this.viewToImage.ty;this.viewToImage.translate(-f,-e);this.viewToImage.scale(d,d);this.viewToImage.translate(f+h,e+g);this.calcRes();if((1-k)<0.1){this.invalidate(false)}else{this.invalidate(true)}this.checkState();return true};a.View.prototype.calcRes=function(){var c;var b=this.resolutions.length-1;if(this.viewToImage.a>this.viewToImage.d){c=this.viewToImage.a*this.resolutions[b].w}else{c=this.viewToImage.d*this.resolutions[b].h}while(c+a.View.epsilon1>2&&b>0){b--;c/=2}if(this.res){this.res.release()}this.res=this.resolutions[b]};a.View.prototype.invalidate=function(c){var e=this.delayTileLoad?this.delayTileLoad:a.Util.checkDefault(c,false);if(e==false&&this.tileRender&&this.resized==false&&Math.abs(this.viewToImage.d-this.initScale)<a.View.epsilon2){e=true}var d=new a.Rectangle(0,0,this.w,this.h);var b=this.viewToRes();d.x=Math.round(b.a*d.x+b.b*d.y+b.tx);d.y=Math.round(b.c*d.x+b.d*d.y+b.ty);d.width=Math.round(b.a*d.width+b.b*d.height);d.height=Math.round(b.c*d.width+b.d*d.height);this.res.invalidate(d,e?-1:0);this.invalidated=true;if(this.viewParent!=null){this.viewParent.viewInvalidate(this.getViewPort())}};a.View.intervalDraw=function(b){b.draw()};a.View.prototype.unload=function(b){if(b&8){if(this.drawInterval){clearInterval(this.drawInterval);this.drawInterval=null}this.resetImage.onload=function(){};this.resetImage.onerror=function(){};this.resetImage.onabort=function(){};this.resetImageLoaded=false}if(this.resolutions==null){return}if(b&1){for(var c=0;c<this.resolutions.length;c++){this.resolutions[c].release()}}};a.View.prototype.clampToImage=function(d){var f=this.h*d.d;var e=this.w*d.a;if(f<=1){d.ty=Math.max(d.ty,0);d.ty=Math.min(d.ty,1-f)}else{var b=d.d*this.h/2;d.ty=0.5-b}if(e<=1){d.tx=Math.max(d.tx,0);d.tx=Math.min(d.tx,1-e)}else{var c=d.a*this.w/2;if(this.align==a.VIEW_ALIGN_LEFT){d.tx=1-c;d.tx=Math.min(d.tx,0)}else{if(this.align==a.VIEW_ALIGN_RIGHT){d.tx=0-c;d.tx=Math.max(d.tx,1-e)}else{d.tx=0.5-c}}}};a.View.prototype.zoomViewTransform=function(j){var g=j.width*this.aspect;var c=j.height;var f;var k;var i=this.w;if((Math.abs(j.x-0)<a.View.epsilon2)&&(Math.abs(j.y-0)<a.View.epsilon2)&&(Math.abs(j.right-1)<a.View.epsilon2)&&(Math.abs(j.bottom-1)<a.View.epsilon2)){i=this.constrainWidth*i}if(i/this.h>g/c){k=j.height/this.h;f=k/this.aspect}else{f=j.width/i;k=f*this.aspect}var h=new a.Matrix2D(f,0,0,k,j.x,j.y);if(h.d<this.topScale){var b=this.topScale/h.d;var e=h.tx;var d=h.ty;h.translate(-e,-d);h.scale(b,b);h.translate(e,d)}this.clampToImage(h);return h};a.View.prototype.viewToRes=function(){var b=this.viewToImage.clone();b.scale(this.res.w,this.res.h);return b};a.View.prototype.getViewPort=function(){var b=new a.Rectangle(0,0,this.w,this.h);b.x=this.viewToImage.a*b.x+this.viewToImage.b*b.y+this.viewToImage.tx;b.y=this.viewToImage.c*b.x+this.viewToImage.d*b.y+this.viewToImage.ty;b.width=this.viewToImage.a*b.width+this.viewToImage.b*b.height;b.height=this.viewToImage.c*b.width+this.viewToImage.d*b.height;return b.intersection(new a.Rectangle(0,0,1,1))};a.View.prototype.imagePixelsToViewPoint=function(c){var d=this.viewToImage.clone();d.scale(this.imageWidth,this.imageHeight);d.invert();var b=d.transformPoint(c);b.x/=this.devicePixelRatio;b.y/=this.devicePixelRatio;return b};a.View.prototype.viewPointToImagePixels=function(d){var b=new a.Point2D(d.x*this.devicePixelRatio,d.y*this.devicePixelRatio);var c=this.viewToImage.clone();c.scale(this.imageWidth,this.imageHeight);return c.transformPoint(b)};a.View.prototype.zoomIn=function(){this.zoomClick(this.w/(2*this.devicePixelRatio),this.h/(2*this.devicePixelRatio),false)};a.View.prototype.zoomOut=function(){this.zoomClick(this.w/(2*this.devicePixelRatio),this.h/(2*this.devicePixelRatio),true)};a.View.prototype.zoomReset=function(){this.targetViewToImage=this.resetView();this.startTransition()};a.View.prototype.zoomNRgn=function(b){this.targetViewToImage=this.zoomViewTransform(b);this.startTransition()};a.View.prototype.zoomRgn=function(b){this.zoomNRgn(new a.Rectangle(b.x/this.imageWidth,b.y/this.imageHeight,b.width/this.imageWidth,b.height/this.imageHeight))};a.View.prototype.parentToClientX=function(c,d){var e=d.getBoundingClientRect();var b=c.clientX-e.left;return b};a.View.prototype.parentToClientY=function(c,d){var e=d.getBoundingClientRect();var b=c.clientY-e.top;return b}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.Util.require("s7sdk.common.Geometry");a.Util.require("s7sdk.event.Event");if(!a.Resolution){a.Resolution=function(i,d,g,e,c,b){this.view=b;this.level=i;this.w=d;this.h=g;this.loadTiles=0;var f=Math.ceil(d/256)*Math.ceil(g/256);this.tiles=new Array(f);this.url=e+(e.indexOf("?")>=0?"&":"?")+"scl="+Math.pow(2,i);this.fmt=c;this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.tileWidth=0;this.tileHeight=0;this.invalidTiles=new Array()};a.Resolution.prototype.nTiles=function(){return Math.ceil(this.w/256)*Math.ceil(this.h/256)};a.Resolution.prototype.getCreateTile=function(c){if(this.tiles[c.idx]==null){this.tiles[c.idx]=new a.Tile(this.level,c,this.url,this.fmt,this.loadTiles)}else{var b=this.tiles[c.idx];if(this.loadTiles>=0&&!b.loadSent){b.loadTile(this.loadTiles);b.image.resolutionBuffer=this}}return this.tiles[c.idx]};a.Resolution.prototype.getTile=function(b){return this.tiles[b]};a.Resolution.prototype.intersect=function(l,k,n,g){var b;var p;var i=Math.max(0,Math.floor(l/256)*256);var e=i;var d=Math.max(0,Math.floor(k/256)*256);var f=Math.ceil(this.w/256);var o=new Array();var m;var c;var j;this.tileHeight=0;while(d<k+g&&d<this.h){this.tileWidth=0;p=d/256;while(e<l+n&&e<this.w){b=e/256;m=p*f+b;c=Math.min(this.w-e,256);j=Math.min(this.h-d,256);o.push(new a.TileAddress(c,j,m,b,p));e+=256;this.tileWidth+=256}d+=256;this.tileHeight+=256;e=i}return o};a.Resolution.onResInvalidated=function(c){var b=a.Event.getTarget(c)};a.Resolution.onTileLoad=function(c){var b=a.Event.getTarget(c);if(b.resolutionBuffer!=null){b.resolutionBuffer.view.invalidated=true;b.resolutionBuffer=null;b.removeEventListener(a.Event.TILE_LOADED,a.Resolution.onTileLoad,true)}};a.Resolution.prototype.draw=function(f,j,k){if(this.invalidTiles.length==0){return}if(this.canvas==null){a.Logger.log(a.Logger.FINEST,"s7sdk.Resolution.draw - getting canvas this.loadTiles=%0",this.loadTiles);this.canvas=a.Util.getCanvas();this.canvas.width=this.tileWidth;this.canvas.height=this.tileHeight;a.Util.setObjPos(this.canvas,0,0);this.canvas.parentView=this.view}else{if(this.canvas.width<this.tileWidth||this.canvas.height<this.tileHeight){this.canvas.width=this.tileWidth;this.canvas.height=this.tileHeight}}var b=new a.Matrix2D(1,0,0,1,this.invalidTiles[0].pos_x*a.Enum.TILE.SIZE*-1,this.invalidTiles[0].pos_y*a.Enum.TILE.SIZE*-1);var d=0;for(var e=0;e<this.invalidTiles.length;e++){var h=this.getCreateTile(this.invalidTiles[e]);if(h.loadSent&&h.loaded==false){d++;h.image.resolutionBuffer=this;h.image.addEventListener(a.Event.TILE_LOADED,a.Resolution.onTileLoad,true)}h.draw(b,this.canvas,k)}if(k.canvas!=null&&k.canvas.getContext!=null){var m=k.canvas.getContext("2d");var c=b.clone();c.invert();c.concat(j);var g=c.clone();g.invert();var l=g.transformRect(f);var i=new a.Rectangle(0,0,this.canvas.width,this.canvas.height);l=l.intersection(i);if(this.transparent){m.clearRect(f.x,f.y,f.width,f.height)}m.drawImage(this.canvas,l.x,l.y,l.width,l.height,f.x,f.y,f.width,f.height)}if(d==0){a.Util.releaseCanvas(this.canvas);delete this.canvas.parentView;this.canvas=null;a.Logger.log(a.Logger.FINEST,"s7sdk.Resolution.draw - Releasing Canvas");this.invalidTiles=new Array()}};a.Resolution.prototype.release=function(){if(this.canvas!=null){a.Util.releaseCanvas(this.canvas);delete this.canvas.parentView;this.canvas=null;a.Logger.log(a.Logger.FINEST,"s7sdk.Resolution.release - Explicit canvas release")}};a.Resolution.prototype.invalidate=function(d,b){this.loadTiles=(b!=undefined&&b!=null)?b:0;this.invalidTiles=this.intersect(d.x,d.y,d.width,d.height);a.Logger.log(a.Logger.FINEST,"s7sdk.Resolution.invalidate - viewport: "+d.x+", "+d.y+", "+d.width+", "+d.height+"  Tiles: "+this.invalidTiles.length);for(var e=0;e<this.invalidTiles.length;e++){var c=this.getCreateTile(this.invalidTiles[e]);c.invalidate()}}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){a.Util.require("s7sdk.common.Geometry");a.Util.require("s7sdk.event.Event");if(!a.Tile){a.Tile=function(f,d,c,b,e){if(b==null){b="jpg"}if(e==null){e=0}this.invalidated=true;this.loaded=false;this.loadSent=false;this.level=f;this.tileAddress=d;this.url=c;this.fmt=b;this.transparent=((this.fmt.indexOf("png")!=-1||this.fmt.indexOf("gif")!=-1)&&(this.fmt.indexOf("-alpha")>0))?true:false;this.image=null;this.loadTile(e)};a.Tile.loadedTileStack=[];a.Tile.maxHighResTileImages=-1;a.Tile.timeout=function(b){b.load()};a.Tile.prototype.releaseImage=function(b){b.image=this.image;this.image=null};a.Tile.prototype.loadTile=function(b){if(b<0){return}a.Logger.log(a.Logger.FINEST,"Tile.loadTile %0, %1",this.tileAddress.pos_x,this.tileAddress.pos_y);if(b==0){this.load()}else{a.Util.timeout(a.Tile.timeout,b,[this])}this.loadSent=true};a.Tile.prototype.load=function(){var b=this.url+(this.url.indexOf("?")<0?"?":"&");b+="req=tile&rect="+this.tileAddress.pos_x*256+","+this.tileAddress.pos_y*256+",";b+=this.tileAddress.w+","+this.tileAddress.h;b+="&fmt="+this.fmt;if(a.Tile.maxHighResTileImages>0&&a.Tile.loadedTileStack.length>a.Tile.maxHighResTileImages){var c=a.Tile.loadedTileStack.shift();this.image=c.image;c.image=null;c.loaded=false;c.loadSent=false}else{this.image=new Image()}if(a.Tile.maxHighResTileImages>0&&this.level==0){a.Tile.loadedTileStack.push(this)}this.image.onload=this.onLoadImage;this.image.onerror=this.onErrorImage;this.image.onabort=this.onAbortImage;this.image.imageTile=this;this.image.src=b;a.Logger.log(a.Logger.FINER,"Tile.load %0",b)};a.Tile.prototype.onLoadImage=function(b){this.imageTile.loaded=true;this.imageTile.invalidated=true;a.Event.dispatch(this,a.Event.TILE_LOADED,true)};a.Tile.prototype.onErrorImage=function(b){a.Logger.log(a.Logger.WARNING,"Tile failed to load");a.Event.dispatch(this,a.Event.TILE_FAILED,true)};a.Tile.prototype.onAbortImage=function(b){a.Logger.log(a.Logger.WARNING,"Tile failed to load");a.Event.dispatch(this,a.Event.TILE_FAILED,true)};a.Tile.prototype.invalidate=function(){this.invalidated=true};a.Tile.prototype.addEventListener=function(d,c,b){a.Base.prototype.addEventListener.apply(this,[d,c,b])};a.Tile.prototype.draw=function(b,h,l){if(this.invalidated==false){return}var j=new a.Matrix2D(1,0,0,1,this.tileAddress.pos_x*a.Enum.TILE.SIZE,this.tileAddress.pos_y*a.Enum.TILE.SIZE);j.concat(b);var c=h.getContext("2d");if(this.loaded){this.invalidated=false;if(this.transparent){c.clearRect(j.tx,j.ty,this.tileAddress.w,this.tileAddress.h)}c.drawImage(this.image,0,0,this.tileAddress.w,this.tileAddress.h,j.tx,j.ty,this.tileAddress.w,this.tileAddress.h)}else{var d=256;var g=256;var f=0;var e=0;var i=l.lowerTile(this.level,this.tileAddress);if(i!=null){var m=i.image;var k=Math.pow(2,i.level-this.level);d=256/k;g=256/k;f=d*(this.tileAddress.x()%k);e=g*(this.tileAddress.y()%k);if(d+f>i.image.width){d=i.image.width-f}if(g+e>i.image.height){g=i.image.height-e}if(d>0&&g>0){if(this.transparent){c.clearRect(j.tx,j.ty,this.tileAddress.w,this.tileAddress.h)}c.drawImage(i.image,f,e,d,g,j.tx,j.ty,this.tileAddress.w,this.tileAddress.h);a.Logger.log(a.Logger.FINEST,"Tile.draw Rendering from lower tile: %0 %1 %2 %3 to %4 %5 %6 %7 ",f,e,d,g,j.tx,j.ty,this.tileAddress.w,this.tileAddress.h)}else{a.Logger.log(a.Logger.FINER,"Tile.draw empty source size: %0 %1 %2 %3 to %4 %5 %6 %7 ",f,e,d,g,j.tx,j.ty,this.tileAddress.w,this.tileAddress.h)}}else{a.Logger.log(a.Logger.FINER,"Tile.draw level "+this.level+" empty tile idx "+this.tileAddress.idx+" x "+this.tileAddress.pos_x+" y "+this.tileAddress.pos_y)}}}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(a){if(!a.IconEffect){a.IconEffect=function IconEffect(c,d,f,g,b){arguments.callee.superclass.call(this,null,c.id,"div","s7iconeffect");this.container_=c;this.baseOpacity_=null;this.currentOpacity_=0;this.hiddenState_=true;this.iconType_="standard";this.iconWidth=0;this.iconHeight=0;var e=a.browser.device;if(e.name=="ipad"||e.name=="ipod"||e.name=="iphone"||(e.name=="android"&&parseFloat(e.version)>=3)){this.iconType_="multitouch"}this.iconEffectDiv_=this.createDiv();this.enabled=d;this.count=f;this.fade=g;this.autoHide=b;this.fadeTimeoutId=null};a.Class.inherits("s7sdk.IconEffect","s7sdk.UIComponent");a.IconEffect.prototype.createDiv=function(){this.createElement();var b=this.obj;b.setAttribute("media-type",this.iconType_);b.style.pointerEvents="none";b.style.position="absolute";return b};a.IconEffect.prototype.setCSSSizes=function(){this.iconWidth=parseInt(a.Util.getStyle(this.iconEffectDiv_,"width"));this.iconHeight=parseInt(a.Util.getStyle(this.iconEffectDiv_,"height"));var c=parseInt(a.Util.getStyle(this.iconEffectDiv_,"padding"));var b=parseInt(a.Util.getStyle(this.iconEffectDiv_,"border"));if(a.Util.isNumber(c)){this.iconWidth+=c*2;this.iconHeight+=c*2}if(a.Util.isNumber(b)){this.iconWidth+=b*2;this.iconHeight+=b*2}};a.IconEffect.prototype.show=function(e,d){if(!this.hiddenState_||this.count==0||!this.enabled){return}if(this.count>0){this.count--}this.hiddenState_=false;this.container_.obj.appendChild(this.iconEffectDiv_);this.setCSSSizes();if(this.baseOpacity_==null){this.baseOpacity_=a.Util.getStyle(this.iconEffectDiv_,"opacity")}this.centerOverlay(e||this.container_.wid,d||this.container_.hei);var c=this;function b(){if(c.currentOpacity_<1&&!c.hiddenState_){c.currentOpacity_+=0.05/c.fade;a.Util.setOpacity(c.iconEffectDiv_,c.baseOpacity_*c.currentOpacity_);if(a.browser.device.name=="android"&&a.browser.device.version=="4"){var f=c.iconEffectDiv_.offsetWidth}c.fadeTimeoutId=setTimeout(b,50)}else{c.fadeTimeoutId=null}}if(this.fade>0){b()}else{this.currentOpacity_=1;a.Util.setOpacity(this.iconEffectDiv_,this.baseOpacity_*this.currentOpacity_)}if(this.autoHide>0){if(this.displayTimeoutId){clearTimeout(this.displayTimeoutId);this.displayTimeoutId=null}this.displayTimeoutId=setTimeout(function(){c.hide()},(c.autoHide+c.fade)*1000)}};a.IconEffect.prototype.hide=function(){if(this.hiddenState_){return}this.hiddenState_=true;var b=this;function c(){if(b.hiddenState_){if(b.currentOpacity_>0){b.currentOpacity_-=0.05/b.fade;a.Util.setOpacity(b.iconEffectDiv_,b.baseOpacity_*b.currentOpacity_);b.fadeTimeoutId=setTimeout(c,50)}else{b.fadeTimeoutId=null;if(b.iconEffectDiv_.parentNode!=null){b.iconEffectDiv_.parentNode.removeChild(b.iconEffectDiv_)}}}}if(this.fade>0){c()}else{this.currentOpacity_=0;a.Util.setOpacity(this.iconEffectDiv_,this.baseOpacity_*this.currentOpacity_);if(this.iconEffectDiv_.parentNode!=null){this.iconEffectDiv_.parentNode.removeChild(this.iconEffectDiv_)}}};a.IconEffect.prototype.dispose=function(){if(this.iconEffectDiv_.parentNode){this.iconEffectDiv_.parentNode.removeChild(this.iconEffectDiv_)}if(this.displayTimeoutId){clearTimeout(this.displayTimeoutId);this.displayTimeoutId=null}if(this.fadeTimeoutId){clearTimeout(this.fadeTimeoutId);this.fadeTimeoutId=null}};a.IconEffect.prototype.centerOverlay=function(c,b){this.iconEffectDiv_.style.left=(c-(this.iconEffectDiv_.offsetWidth?this.iconEffectDiv_.offsetWidth:this.iconWidth))/2+"px";this.iconEffectDiv_.style.top=(b-(this.iconEffectDiv_.offsetHeight?this.iconEffectDiv_.offsetHeight:this.iconHeight))/2+"px"}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.event");if(!b.event.InputController2){b.event.InputController2=function c(B,x){this.supportsPassive=b.Event.supportsPassive();this.fixEvent=function(H){if(!H){H=window.event}var G=null;if(H.target){G=(H.target.nodeType==3)?H.target.parentNode:H.target}else{G=H.srcElement}H.targetNode=G;if(!H.preventDefault){H.preventDefault=function(){H.returnValue=false}}if(!H.stopPropagation){H.stopPropagation=function(){H.cancelBubble=true}}if(window.PointerEvent&&H instanceof PointerEvent){switch(H.type){case"pointerdown":var F=false;for(var E=0;E<r.length;E++){if(r[E].pointerId==H.pointerId){r[E]=H;F=true;break}}if(!F){r.push(H)}break;case"pointermove":var F=false;for(var E=0;E<r.length;E++){if(r[E].pointerId==H.pointerId){r[E]=H;F=true;break}}if(!F){r.push(H)}break;case"pointerup":for(var E=0;E<r.length;E++){if(r[E].pointerId==H.pointerId){r.splice(E,1);break}}break}switch(H.pointerType){case"mouse":break;case"pen":break;case"touch":break;default:}H.isPrimary=H.isPrimary||false;H.touches=[];for(var E=0;E<r.length;E++){if(r[E]){H.touches.push({pageX:r[E].pageX||r[E].clientX+(document&&document.scrollLeft||document.body&&document.body.scrollLeft||0)-(document&&document.clientLeft||document.body&&document.body.clientLeft||0),pageY:r[E].pageY||r[E].clientY+(document&&document.scrollTop||document.body&&document.body.scrollTop||0)-(document&&document.clientTop||document.body&&document.body.clientTop||0)})}}H.changedTouches=[H]}else{if(window.MouseEvent&&H instanceof MouseEvent){H.pointerType="mouse";H.pointerId=1;H.isPrimary=true}else{if(window.TouchEvent&&H instanceof TouchEvent){H.pointerType="touch";H.pointerId=H.identifier+2;H.isPrimary=true}else{H.pointerType="";H.pointerId=0;H.isPrimary=false}}}if(!H.touches){H.touches=[{pageX:H.pageX||H.clientX+(document&&document.scrollLeft||document.body&&document.body.scrollLeft||0)-(document&&document.clientLeft||document.body&&document.body.clientLeft||0),pageY:H.pageY||H.clientY+(document&&document.scrollTop||document.body&&document.body.scrollTop||0)-(document&&document.clientTop||document.body&&document.body.clientTop||0)}]}return H};var i=0;var D=5;var q=30;var p=30;var g=30;var s=5;var j=300;var o=0;var v=null;var f=0;var z;var y;var t=false;var A=false;var l=false;var n=false;var C=false;var m={};var e=null;var k=250;var d={};var u=false;this.params=x||{};this.singleTapCallback=this.params.singleTapCallback||null;this.doubleTapCallback=this.params.doubleTapCallback||null;this.swipeCallback=this.params.swipeCallback||null;this.startTouchCallback=this.params.startTouchCallback||null;this.dragCallback=this.params.dragCallback||null;this.endDragCallback=this.params.endDragCallback||null;this.pinchCallback=this.params.pinchCallback||null;this.endPinchCallback=this.params.endPinchCallback||null;this.endTouchCallback=this.params.endTouchCallback||null;this.elem=B||null;var h=this;var r=[];var w=0;this.touchStart=function(E){h.fixEvent(E);if((b.browser.name==="ie")&&(b.browser.version.major>=9)){h.stop(h.elem);E.preventDefault()}i=E.targetTouches?E.targetTouches.length:E.touches.length;h.start(h.elem);t=true;A=true;l=false;if(i==1){f=new Date().getTime();z=m.startX=m.curX=E.touches[0].pageX;y=m.startY=m.curY=E.touches[0].pageY;m.last=m.start=f;if(h.startTouchCallback){h.startTouchCallback(E,m.startX,m.startY)}}else{u=true;E.preventDefault();h.touchCancel(E);d.scale=null;d.X=null;d.Y=null;d.start=new Date().getTime();d.initialSize=Math.sqrt(Math.pow(E.touches[0].pageX-E.touches[1].pageX,2)+Math.pow(E.touches[0].pageY-E.touches[1].pageY,2))}};this.touchMove=function(H){if(!A){return}h.fixEvent(H);m.move=new Date().getTime();l=true;n=true;if(H.touches.length==1){m.curX=H.touches[0].pageX;m.curY=H.touches[0].pageY;if((h.dragCallback)&&m.last){var F=m.curX-z;var E=m.curY-y;if(F!=0||E!=0){h.dragCallback(H,m.curX,m.curY,F,E)}}z=H.touches[0].pageX;y=H.touches[0].pageY}else{if((H.touches.length>1)&&u){H.preventDefault();h.touchCancel(H);if((new Date().getTime()-d.start)<g){return false}d.X=(H.touches[0].pageX+H.touches[1].pageX)/2;d.Y=(H.touches[0].pageY+H.touches[1].pageY)/2;d.changeSize=Math.sqrt(Math.pow(H.touches[0].pageX-H.touches[1].pageX,2)+Math.pow(H.touches[0].pageY-H.touches[1].pageY,2));d.pinchScale=d.changeSize/d.initialSize;if(d.pinchScale>1){var I=Math.pow(2,(d.pinchScale-1)/2);d.pinchScale=1/I}else{var G=1/(d.pinchScale);d.pinchScale=Math.pow(2,(G-1)/2)}if((h.pinchCallback)&&(d.pinchScale!=1)){h.pinchCallback(H,d.X,d.Y,d.pinchScale)}d.initialSize=d.changeSize}}};this.touchEndCapture=function(I){if(l){h.fixEvent(I);m.end=new Date().getTime();n=false;if(i==1){if(h.endTouchCallback){h.endTouchCallback(I,m.curX,m.curY)}o=Math.round(Math.sqrt(Math.pow(m.curX-m.startX,2)+Math.pow(m.curY-m.startY,2)));if((o>=D)&&(m.curX!=0)&&(((m.end-m.start)>s)&&((m.end-m.start)<j))){I.preventDefault();var H=m.curX-m.startX;var G=m.curY-m.startY;if((Math.abs(H)>=D)&&(Math.abs(H)>Math.abs(G))){if(H<0){v="left"}else{v="right"}}else{if(Math.abs(G)>=D){if(G<0){v="down"}else{v="up"}}}if(h.swipeCallback&&v){h.swipeCallback(v)}C=true;h.touchCancel(I)}else{if((o>0)&&(m.curX!=0)){C=false;if(h.endDragCallback){var F=m.curX-m.startX;var E=m.curY-m.startY;h.endDragCallback(I,m.curX,m.curY,F,E)}h.touchCancel(I)}}}else{h.touchCancel(I);if(h.endPinchCallback){h.endPinchCallback(I,d.X,d.Y,d.pinchScale)}}}A=false;u=false};this.touchEnddblclick=function(E){t=true;l=false;h.touchEnd(E)};this.touchEnd=function(H){if(!(t&&!l)){t=false;return}t=false;h.fixEvent(H);m.end=new Date().getTime();n=false;m.isDoubleTap=false;if(i==1){o=Math.round(Math.sqrt(Math.pow(m.curX-m.startX,2)+Math.pow(m.curY-m.startY,2)));if((o>=D)&&(m.curX!=0)&&(((m.end-m.start)>s)&&((m.end-m.start)<j))){}else{if((o>0)&&(m.curX!=0)){}else{C=false;var F=false;H.preventDefault();if(e){clearTimeout(e);e=null;if(h.doubleTapCallback){h.doubleTapCallback(H,m.curX,m.curY)}m={};F=true}else{if(("last" in m)&&(o<D)&&!n){F=true;var E={};for(var G in H){E[G]=H[G]}e=setTimeout(function(){if(h.singleTapCallback){h.singleTapCallback(E,m.curX,m.curY)}if(e){clearTimeout(e);e=null}m={}},k)}}if(!F){h.touchCancel(H)}}}}h.stop(h.elem)};this.touchCancel=function(E){t=false;if(e){clearTimeout(e)}e=null;i=0;o=0;v=null;m={};n=false};if(this.elem){this.attach(this.elem)}return this};b.event.InputController2.prototype.attach=function(d){this.elem=d;if(this.elem){if(window.PointerEvent&&b.browser.name==="ie"){b.Event.addDOMListener(this.elem,"pointerdown",this.touchStart,false);b.Event.addDOMListener(this.elem,"dblclick",this.touchEnddblclick,false)}else{if("ontouchstart" in window){b.Event.addDOMListener(this.elem,"touchstart",this.touchStart,this.supportsPassive?{passive:false,capture:false}:false)}}if(!(b.browser.device.name=="ipad"||b.browser.device.name=="iphone")){b.Event.addDOMListener(this.elem,"mousedown",this.touchStart,this.supportsPassive?{passive:false,capture:false}:false);b.Event.addDOMListener(this.elem,"dblclick",this.touchEnddblclick,this.supportsPassive?{passive:false,capture:false}:false)}}};b.event.InputController2.prototype.detach=function(d){this.elem=d;if(this.elem){if(window.PointerEvent&&b.browser.name==="ie"){b.Event.removeDOMListener(this.elem,"pointerdown",this.touchStart,false);b.Event.removeDOMListener(this.elem,"dblclick",this.touchEnddblclick,false)}else{if("ontouchstart" in window){b.Event.removeDOMListener(this.elem,"touchstart",this.touchStart,this.supportsPassive?{passive:false,capture:false}:false)}}if(!(b.browser.device.name=="ipad"||b.browser.device.name=="iphone")){b.Event.removeDOMListener(this.elem,"mousedown",this.touchStart,this.supportsPassive?{passive:false,capture:false}:false);b.Event.removeDOMListener(this.elem,"dblclick",this.touchEnddblclick,this.supportsPassive?{passive:false,capture:false}:false)}}this.singleTapCallback=null;this.doubleTapCallback=null;this.swipeCallback=null;this.startTouchCallback=null;this.dragCallback=null;this.endDragCallback=null;this.pinchCallback=null;this.endPinchCallback=null;this.endTouchCallback=null;this.elem=null};b.event.InputController2.prototype.start=function(d){this.elem=d;if(this.elem){var e=b.browser.name=="ie"?document:window;if(window.PointerEvent&&b.browser.name==="ie"){b.Event.addDOMListener(e,"pointermove",this.touchMove,false);b.Event.addDOMListener(e,"pointerup",this.touchEndCapture,true);b.Event.addDOMListener(e,"pointerup",this.touchEnd,false);b.Event.addDOMListener(e,"pointercancel",this.touchCancel,false)}else{if("ontouchstart" in window){b.Event.addDOMListener(e,"touchmove",this.touchMove,this.supportsPassive?{passive:false,capture:false}:false);b.Event.addDOMListener(e,"touchend",this.touchEndCapture,this.supportsPassive?{passive:false,capture:true}:true);b.Event.addDOMListener(e,"touchend",this.touchEnd,this.supportsPassive?{passive:false,capture:false}:false);b.Event.addDOMListener(e,"touchcancel",this.touchCancel,this.supportsPassive?{passive:false,capture:false}:false)}}if(!(b.browser.device.name=="ipad"||b.browser.device.name=="iphone")){b.Event.addDOMListener(e,"mousemove",this.touchMove,this.supportsPassive?{passive:false,capture:false}:false);b.Event.addDOMListener(e,"mouseup",this.touchEndCapture,this.supportsPassive?{passive:false,capture:true}:true);b.Event.addDOMListener(e,"mouseup",this.touchEnd,this.supportsPassive?{passive:false,capture:false}:false)}}};b.event.InputController2.prototype.stop=function(d){this.elem=d;if(this.elem){var e=b.browser.name=="ie"?document:window;if(window.PointerEvent&&b.browser.name==="ie"){b.Event.removeDOMListener(e,"pointermove",this.touchMove,false);b.Event.removeDOMListener(e,"pointerup",this.touchEndCapture,true);b.Event.removeDOMListener(e,"pointerup",this.touchEnd,false);b.Event.removeDOMListener(e,"pointercancel",this.touchCancel,false)}else{if("ontouchstart" in window){b.Event.removeDOMListener(e,"touchmove",this.touchMove,this.supportsPassive?{passive:false,capture:false}:false);b.Event.removeDOMListener(e,"touchend",this.touchEndCapture,this.supportsPassive?{passive:false,capture:true}:true);b.Event.removeDOMListener(e,"touchend",this.touchEnd,this.supportsPassive?{passive:false,capture:false}:false);b.Event.removeDOMListener(e,"touchcancel",this.touchCancel,this.supportsPassive?{passive:false,capture:false}:false)}}if(!(b.browser.device.name=="ipad"||b.browser.device.name=="iphone")){b.Event.removeDOMListener(e,"mousemove",this.touchMove,this.supportsPassive?{passive:false,capture:false}:false);b.Event.removeDOMListener(e,"mouseup",this.touchEndCapture,this.supportsPassive?{passive:false,capture:true}:true);b.Event.removeDOMListener(e,"mouseup",this.touchEnd,this.supportsPassive?{passive:false,capture:false}:false)}}}}if(!b.event.SwipeController){b.event.SwipeController=function a(d,f,g,e){this.inDrag=false;this.wid=f;this.hei=g;this.swipeEnable=e;this.absoluteX=0;this.absoluteY=0;this.maxStep=300;this.transitionTime=typeof(d)=="undefined"?5000:d*1000;this.transitionEasing=typeof(transitionEasing)=="undefined"?b.Enum.TRANSITION_EASING.AUTO:transitionEasing;this.shift=0;this.shiftTime=0;this.inTransition=false;this.leftEdge=false;this.rightEdge=false;this.diffRelX=0;return this};b.event.SwipeController.prototype.resize=function(d,e){this.wid=d;this.hei=e};b.event.SwipeController.prototype.processDrag=function(i,f,d){if(this.inTransition){return}this.inDrag=true;this.absoluteX+=f;this.absoluteY+=d;var g=this.absoluteX/this.wid;if(Math.abs(g)>1){g=g>0?1:-1;this.absoluteX=this.wid*g}var h=(this.leftEdge&&g>0)||(this.rightEdge&&g<0);this.diffRelX=h?0:g;this.onStep(this.diffRelX);if(this.diffRelX==0){this.absoluteX=0}if(h){return}};b.event.SwipeController.prototype.processEndDrag=function(j,h,f,g,d){if(!this.inDrag||this.inTransition){return}this.inDrag=false;var k=0.5;var i=this.diffRelX>0;this.reverse=Math.abs(this.diffRelX)<k;this.direction=(this.reverse?!i:i)?1:-1;this.shift=Math.abs(this.diffRelX);if(this.reverse){this.shift=1-this.shift}this.animationStartInt()};b.event.SwipeController.prototype.processSwipe=function(e){if(e=="right"||e=="left"){if(this.inTransition){return}this.inDrag=true;var d=(this.leftEdge&&this.diffRelX>=0)||(this.rightEdge&&this.diffRelX<=0);if(!d){this.direction=e=="right"?1:-1;this.shift=Math.abs(this.diffRelX);this.reverse=false;this.animationStartInt()}else{this.inDrag=false}}else{if(this.diffRelX!=0){this.processEndDrag()}}};b.event.SwipeController.prototype.setSwipeCapability=function(e,d){this.leftEdge=e;this.rightEdge=d};b.event.SwipeController.prototype.isAnimationInProgress=function(){return this.inTransition};b.event.SwipeController.prototype.animationStartInt=function(){var d=new Date();this.shiftTime=0;this.startTime=d.getTime();this.prevStep=0;if(!this.inTransition){this.timerAnimationStartInt=b.Util.timeout(b.event.SwipeController.transitionHandler,25,[this])}this.inTransition=true;this.onStart()};b.event.SwipeController.prototype.animate=function(d){if(this.inDrag&&this.swipeEnable){this.processSwipe(d)}else{this._animate(d=="left"?1:-1)}};b.event.SwipeController.prototype._animate=function(e){var d=new Date();this.shiftTime=0;this.startTime=d.getTime();this.prevStep=0;this.direction=e;this.shift=0;this.reverse=false;this.timer_animate=b.Util.timeout(b.event.SwipeController.transitionHandler,25,[this]);this.inTransition=true;this.onStart()};b.event.SwipeController.prototype.onEnterFrame=function(){if(!this.inTransition){return}var e=new Date();var f=e.getTime();var d=this.calcStep(f);if(this.shift!=0){while(d<this.shift){d=this.calcStep(f);this.shiftTime++;if(d==0){return true}if(d>=1){this.animationStop();return false}}this.shift=0}if(d==0){return true}if(d>=1){this.animationStop();return false}this.stepSize=d;this.onStep(this.direction*(this.reverse?this.stepSize-1:this.stepSize));return true};b.event.SwipeController.prototype.calcStep=function(e){var d=(this.transitionTime!=0)?(e+this.shiftTime-this.startTime)/this.transitionTime:1;if(d>this.prevStep+this.maxStep){d=this.prevStep+this.maxStep}this.prevStep=d;if(d==0){return d}if(d>=1){return d}if(this.transitionEasing==b.Enum.TRANSITION_EASING.AUTO){if(this.elasticZoom>0){if(this.transitionTime>=1500){d=(d*(d-2))*-1}else{if(this.transitionTime>1000){d=(d-=1)*d*d+1}else{if(this.transitionTime>500){d=((d-=1)*d*d*d-1)*-1}else{d=(d-=1)*d*d*d*d+1}}}}}else{if(this.transitionEasing==b.Enum.TRANSITION_EASING.QUADRATIC){d=(d*(d-2))*-1}else{if(this.transitionEasing==b.Enum.TRANSITION_EASING.CUBIC){d=(d-=1)*d*d+1}else{if(this.transitionEasing==b.Enum.TRANSITION_EASING.QUARTIC){d=((d-=1)*d*d*d-1)*-1}else{if(this.transitionEasing==b.Enum.TRANSITION_EASING.QUINTIC){d=(d-=1)*d*d*d*d+1}}}}}this.prevStep=d;return d};b.event.SwipeController.transitionHandler=function(d){var e=false;e=d.onEnterFrame();if(e){this.timerTransitionHandler=b.Util.timeout(b.event.SwipeController.transitionHandler,25,[d])}};b.event.SwipeController.prototype.animationStop=function(){this.inTransition=false;if(!this.reverse){this.onStop(this.direction)}else{this.onStep(0);this.onStop(0)}this.absoluteX=0;this.absoluteY=0;this.step=0;this.inDrag=false};b.event.SwipeController.prototype.getTransitionTime=function(){return this.transitionTime};b.event.SwipeController.prototype.setTransitionTime=function(d){this.transitionTime=d};b.event.SwipeController.prototype.dispose=function(){if(this.timerAnimationStartInt){clearTimeout(this.timerAnimationStartInt);this.timerAnimationStartInt=null}if(this.timer_animate){clearTimeout(this.timer_animate);this.timer_animate=null}if(this.timerTransitionHandler){clearTimeout(this.timerTransitionHandler);this.timerTransitionHandler=null}}}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(c){c.pkg("s7sdk.common");c.Util.require("s7sdk.common.Enumeration");c.Util.require("s7sdk.common.Thumb");if(!c.common.ButtonControl){c.common.ButtonControl=function(e){var f={};for(var d in c.common.Button.RESTRICTED_STYLES){if(d=="s7button"){f[e.getCl()]=c.common.Button.RESTRICTED_STYLES[d]}else{f[d]=c.common.Button.RESTRICTED_STYLES[d]}}arguments.callee.superclass.apply(this,[e,c.common.ButtonControl.NS,e.constructor,f])};c.common.ButtonControl.prototype.reload=function(){if(this.component){var d=(this.dynamicModifiers?this.dynamicModifiers:c.Util.resolveModifier("","",this.component,this.component.settings));this.rebuild(d)}};c.common.ButtonControl.NS="s7sdk.common.ButtonControl"}c.Class.inherits(c.common.ButtonControl.NS,"s7sdk.ControlComponent");if(!c.common.Button){c.common.Button=function(k,e,j,d,i,f,g){c.Logger.log(c.Logger.FINER,"s7sdk.common.Button %0 %1 %2 %3 %4 %5 ",k,e,j,d,i,f);arguments.callee.superclass.call(this,k,e,"div",f,g);this.hint="";this.css=(typeof f!="undefined"?f:"");this.currentState=0;this.activated=true;this.init();this.makeToolTip();this.changeState(this.currentState);this.w=parseInt(c.Util.css.getCss(this.getCl(),"width",k,null,this.getParent()));this.h=parseInt(c.Util.css.getCss(this.getCl(),"height",k,null,this.getParent()))};c.Class.inherits("s7sdk.common.Button","s7sdk.UIComponent");c.common.Button.RESTRICTED_STYLES={s7button:["width","height"]};c.common.Button.prototype.getCl=function(){return this.css};c.common.Button.prototype.setCSS=function(f,e,d){if(this.isRestrictedCSSProperty(c.common.Button.RESTRICTED_STYLES,e)){throw new Error("You cannot set "+f+" : "+e+" CSS property for this component ")}else{this.superclass.superclass.prototype.setCSS.apply(this,[f,e,d])}};c.common.Button.prototype.setModifier=function(d){throw new Error("Trying to use setModifier on the Core class (PageScrubber) is unsupported! Please refer to SDK documentation on using setModifier.")};c.common.Button.prototype.init=function(){this.hint=this.getLocalizedText("TOOLTIP");this.createElement();if(typeof this.obj!="undefined"){this.obj.className="s7button "+this.css;this.obj.setAttribute("tabindex",0);this.obj.button=this;this.resize(this.w,this.h);this.attachToContainer();this.addEventListener("mouseover",function(f){var e=(this.button?this.button:f.srcElement.button);e.enableEvent("click");d.call(e,2)});this.addEventListener("focus",function(f){var e=(this.button?this.button:f.srcElement.button);if(!e.activated){e.blur();return}e.enableEvent("click");d.call(e,2)});this.addEventListener("mouseout",function(f){var e=(this.button?this.button:f.srcElement.button);d.call(e,0)});this.addEventListener("blur",function(f){var e=(this.button?this.button:f.srcElement.button);d.call(e,0)});this.addEventListener("mousedown",function(f){var e=(this.button?this.button:f.srcElement.button);d.call(e,1)});this.addEventListener("mouseup",function(f){var e=(this.button?this.button:f.srcElement.button);d.call(e,2)});this.addEventListener("keydown",function(f){if((f.keyCode==c.Enum.KEY_CODE.ENTER)||(f.keyCode==c.Enum.KEY_CODE.SPACE)){var e=(this.button?this.button:f.srcElement.button);e.inKey=true;d.call(e,1);c.Event.dispatch(e,"click");c.Event.preventDefault(f)}});this.addEventListener("keyup",function(f){if((f.keyCode==c.Enum.KEY_CODE.ENTER)||(f.keyCode==c.Enum.KEY_CODE.SPACE)){var e=(this.button?this.button:f.srcElement.button);d.call(e,2);e.inKey=false}});this.addEventListener("touchstart",function(h){h.preventDefault();h.stopPropagation();var g=c.Event.getTarget(h);if(g&&g.hasOwnProperty("button")){var f=g.button;f.inTouch=true;f.touchX=h.targetTouches[0].clientX;f.touchY=h.targetTouches[0].clientY;d.call(f,1);g.button.enableEvent("click")}});this.addEventListener("touchmove",function(h){h.preventDefault();h.stopPropagation();if(h.targetTouches.length>0){var g=c.Event.getTarget(h);if(g&&g.hasOwnProperty("button")){var f=g.button;f.inTouch=true;f.touchX=h.targetTouches[0].clientX;f.touchY=h.targetTouches[0].clientY}}});this.addEventListener("touchend",function(i){i.preventDefault();i.stopPropagation();var h=c.Event.getTarget(i);if(h&&h.hasOwnProperty("button")){var g=h.button;if(g.inTouch){if(i.targetTouches.length>0){var h=c.Event.getTarget(i);if(h&&h.hasOwnProperty("button")){var g=h.button;g.inTouch=true;g.touchX=i.targetTouches[0].clientX;g.touchY=i.targetTouches[0].clientY}}var f={x:c.Util.getObjPos(h).x,y:c.Util.getObjPos(h).y,ofs:c.Util.getScrollXY()};if((g.touchX+f.ofs.x>f.x&&g.touchX+f.ofs.x<f.x+h.offsetWidth&&g.touchY+f.ofs.y>f.y&&g.touchY+f.ofs.y<f.y+h.offsetHeight)||("android"==c.browser.device.name&&c.browser.name==="chrome")){c.Event.dispatch(h,"click");h.button.disableEvent("click")}d.call(g,0);g.inTouch=false}}});this.addEventListener("touchcancel",function(h){h.preventDefault();h.stopPropagation();var g=c.Event.getTarget(h);if(g&&g.hasOwnProperty("button")){var f=g.button;f.inTouch=false}});function d(e){this.currentState=e;if(this.activated){this.changeState(e)}}}else{c.Logger.log(c.Logger.WARNING,'s7sdk.common.Button - Cannot initialize "%0" due to lack of button skins',this.id)}};c.common.Button.prototype.addEventListener=function(f,e,d){c.Base.prototype.addEventListener.apply(this,[f,e,d])};c.common.Button.prototype.makeToolTip=function(){if(this.hint&&this.hint.length){this.toolTip_=new c.SimpleToolTip(this.obj,this.hint)}};c.common.Button.prototype.getActivated=function(){return this.activated};c.common.Button.prototype.dispose=function(){this.cleanUp();if(this.obj){if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}};c.common.Button.prototype.cleanUp=function(d){if(this.toolTip_){this.toolTip_.cleanUp()}if(this.obj){c.Util.removeTags(this.obj);this.obj.style.cssText=""}};c.common.Button.prototype.activate=function(){if(!this.activated){this.activated=true;this.currentState=0;this.changeState(this.currentState);this.enableEvent(null);this.obj.setAttribute("tabindex",0)}};c.common.Button.prototype.deactivate=function(){if(this.activated){this.blur();this.activated=false;this.changeState(3);this.disableEvent(null);this.enableEvent("focus");this.enableEvent("blur");this.obj.setAttribute("tabindex",-1)}};c.common.Button.prototype.resize=function(d,e){if(d>0&&e>0){this.w=d;this.h=e;this.obj.style.height=this.h+"px";this.obj.style.width=this.w+"px"}c.UIComponent.prototype.resize.apply(this,[d,e])};c.common.Button.prototype.getWidth=function(){return this.w};c.common.Button.prototype.getHeight=function(){return this.h};c.common.Button.prototype.changeState=function(d){var e=["up","down","over","disabled"];c.Util.css.setCSSAttributeSelector(this.obj,"state",e[d])};c.common.Button.prototype.hide=function(){c.Util.fade(this.obj,true,0.3,"")};c.common.Button.prototype.show=function(){c.Util.fade(this.obj,false,0.3,"")};c.common.Button.prototype.reposition=function(){this.obj.className="s7button "+this.css};c.common.Button.prototype.focus=function(){if(this.activated){this.obj.focus()}};c.common.Button.prototype.blur=function(){this.obj.blur()};c.common.Button.buttonsDefaultCSS=function(h,d,i,e){var k=c.Util.css.createCssRuleText;var g=c.Util.css.createCssImgUrlText;e=(typeof e==="string")?e:"";var j="";if(i){j+=i[0]?k(d+"[state='up']",{"background-image":g(i[0])}):"";j+=i[1]?k(d+"[state='over']",{"background-image":g(i[1])}):"";j+=i[2]?k(d+"[state='down']",{"background-image":g(i[2])}):"";j+=i[3]?k(d+"[state='disabled']",{"background-image":g(i[3])}):""}j+=e;var f=k(d,{width:"25px",height:"25px","background-size":"contain","background-repeat":"no-repeat","background-position":"center","-webkit-touch-callout":"none","-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)"})+j;c.Util.css.addDefaultCSS(f,h)};c.Button=c.common.Button}if(!c.common.CloseButton){c.common.CloseButton=function CloseButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.CloseButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7closebutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.CloseButton","s7sdk.common.Button");c.common.CloseButton.prototype.makeToolTip=function(){if(this.hint&&this.hint.length){this.toolTip_=new c.SimpleToolTip(this.obj,this.hint)}};c.common.CloseButton.prototype.symbols={TOOLTIP:"Close"};c.CloseButton=c.common.CloseButton;(function a(){c.common.Button.buttonsDefaultCSS("CloseButton",".s7closebutton",["close_up.png","close_over.png","close_down.png","close_disabled.png"],c.Util.css.createCssRuleText(".s7closebutton",{width:"32px",height:"32px"}))})()}if(!c.common.ZoomResetButton){c.common.ZoomResetButton=function ZoomResetButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.ZoomResetButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7zoomresetbutton",f]);this.obj.zoomResetObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ZoomResetButton","s7sdk.common.Button");c.common.ZoomResetButton.prototype.symbols={TOOLTIP:"Reset Zoom"};c.ZoomResetButton=c.common.ZoomResetButton;(function a(){c.common.Button.buttonsDefaultCSS("ZoomResetButton",".s7zoomresetbutton",["zoomreset_up.png","zoomreset_over.png","zoomreset_down.png","zoomreset_disabled.png"])})()}if(!c.common.ZoomInButton){c.common.ZoomInButton=function ZoomInButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.ZoomInButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7zoominbutton",f]);this.obj.zoomInObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ZoomInButton","s7sdk.common.Button");c.common.ZoomInButton.prototype.symbols={TOOLTIP:"Zoom In"};c.ZoomInButton=c.common.ZoomInButton;(function a(){c.common.Button.buttonsDefaultCSS("ZoomInButton",".s7zoominbutton",["zoomin_up.png","zoomin_over.png","zoomin_down.png","zoomin_disabled.png"])})()}if(!c.common.ZoomOutButton){c.common.ZoomOutButton=function ZoomOutButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.ZoomOutButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7zoomoutbutton",f]);this.obj.zoomOutObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ZoomOutButton","s7sdk.common.Button");c.common.ZoomOutButton.prototype.symbols={TOOLTIP:"Zoom Out"};c.ZoomOutButton=c.common.ZoomOutButton;(function a(){c.common.Button.buttonsDefaultCSS("ZoomOutButton",".s7zoomoutbutton",["zoomout_up.png","zoomout_over.png","zoomout_down.png","zoomout_disabled.png"])})()}if(!c.common.PanUpButton){c.common.PanUpButton=function PanUpButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.PanUpButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7panupbutton",f]);this.obj.panObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.PanUpButton","s7sdk.common.Button");c.common.PanUpButton.prototype.symbols={TOOLTIP:"Pan up"};c.PanUpButton=c.common.PanUpButton;(function a(){c.common.Button.buttonsDefaultCSS("PanUpButton",".s7panupbutton",["panup_up.png","panup_over.png","panup_down.png","panup_disabled.png"])})()}if(!c.common.PanDownButton){c.common.PanDownButton=function PanDownButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.PanDownButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7pandownbutton",f]);this.obj.panObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.PanDownButton","s7sdk.common.Button");c.common.PanDownButton.prototype.symbols={TOOLTIP:"Pan down"};c.PanDownButton=c.common.PanDownButton;(function a(){c.common.Button.buttonsDefaultCSS("PanDownButton",".s7pandownbutton",["pandown_up.png","pandown_over.png","pandown_down.png","pandown_disabled.png"])})()}if(!c.common.PanLeftButton){c.common.PanLeftButton=function PanLeftButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.PanLeftButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7panleftbutton",f]);this.obj.panObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.PanLeftButton","s7sdk.common.Button");c.common.PanLeftButton.prototype.symbols={TOOLTIP:"Pan left"};c.PanLeftButton=c.common.PanLeftButton;(function a(){c.common.Button.buttonsDefaultCSS("PanLeftButton",".s7panleftbutton",["panleft_up.png","panleft_over.png","panleft_down.png","panleft_disabled.png"])})()}if(!c.common.PanRightButton){c.common.PanRightButton=function PanRightButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.PanRightButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7panrightbutton",f]);this.obj.panObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.PanRightButton","s7sdk.common.Button");c.common.PanRightButton.prototype.symbols={TOOLTIP:"Pan right"};c.PanRightButton=c.common.PanRightButton;(function a(){c.common.Button.buttonsDefaultCSS("PanRightButton",".s7panrightbutton",["panright_up.png","panright_over.png","panright_down.png","panright_disabled.png"])})()}if(!c.common.ScrollLeftButton){c.common.ScrollLeftButton=function ScrollLeftButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7scrollleftbutton",f]);this.obj.arrowObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrollLeftButton","s7sdk.common.Button");c.common.ScrollLeftButton.prototype.symbols={TOOLTIP:"Scroll left"};c.ScrollLeftButton=c.common.ScrollLeftButton;(function a(){c.common.Button.buttonsDefaultCSS("ScrollLeftButton",".s7scrollleftbutton",["scroll_left_up.png","scroll_left_over.png","scroll_left_down.png","scroll_left_disabled.png"],c.Util.css.createCssRuleText(".s7scrollleftbutton",{width:"20px",height:"20px"}))})()}if(!c.common.ScrollRightButton){c.common.ScrollRightButton=function ScrollRightButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7scrollrightbutton",f]);this.obj.arrowObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrollRightButton","s7sdk.common.Button");c.common.ScrollRightButton.prototype.symbols={TOOLTIP:"Scroll right"};c.ScrollRightButton=c.common.ScrollRightButton;(function a(){c.common.Button.buttonsDefaultCSS("ScrollRightButton",".s7scrollrightbutton",["scroll_right_up.png","scroll_right_over.png","scroll_right_down.png","scroll_right_disabled.png"],c.Util.css.createCssRuleText(".s7scrollrightbutton",{width:"20px",height:"20px"}))})()}if(!c.common.ScrollUpButton){c.common.ScrollUpButton=function ScrollUpButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7scrollupbutton",f]);this.obj.arrowObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrollUpButton","s7sdk.common.Button");c.common.ScrollUpButton.prototype.symbols={TOOLTIP:"Scroll up"};c.ScrollUpButton=c.common.ScrollUpButton;(function a(){c.common.Button.buttonsDefaultCSS("ScrollUpButton",".s7scrollupbutton",["scroll_up_up.png","scroll_up_over.png","scroll_up_down.png","scroll_up_disabled.png"],c.Util.css.createCssRuleText(".s7scrollupbutton",{width:"20px",height:"20px"}))})()}if(!c.common.ScrollDownButton){c.common.ScrollDownButton=function ScrollDownButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7scrolldownbutton",f]);this.obj.arrowObj=this;var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrollDownButton","s7sdk.common.Button");c.common.ScrollDownButton.prototype.symbols={TOOLTIP:"Scroll down"};c.ScrollDownButton=c.common.ScrollDownButton;(function a(){c.common.Button.buttonsDefaultCSS("ScrollDownButton",".s7scrolldownbutton",["scroll_down_up.png","scroll_down_over.png","scroll_down_down.png","scroll_down_disabled.png"],c.Util.css.createCssRuleText(".s7scrolldownbutton",{width:"20px",height:"20px"}))})()}if(!c.common.InfoPanelCloseButton){c.common.InfoPanelCloseButton=function InfoPanelCloseButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7closebutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.InfoPanelCloseButton","s7sdk.common.Button");c.common.InfoPanelCloseButton.prototype.symbols={TOOLTIP:"Close"};c.InfoPanelCloseButton=c.common.InfoPanelCloseButton}if(!c.common.TwoStateButton){c.common.TwoStateButton=function(l,f,e,j,g,i,d){c.Logger.log(c.Logger.FINER,"s7sdk.common.TwoStateButton %0 %1 %2 %3 %4 ",l,f,e,j,g);arguments.callee.superclass.call(this,l,f,null,null,null,g,i);this.selected=false;this.changeState(this.currentState);if(typeof(d)!="undefined"&&d){return}var k=this;if(c.browser.name==="ie"&&c.browser.version.major<9){this.stateChanged=false;this.addEventListener("mousedown",function(){k.stateChanged=true},false);this.addEventListener("mouseup",function(){if(k.stateChanged){k.setSelected(!k.selected)}k.stateChanged=false},false)}else{this.addEventListener("click",function(){k.setSelected(!k.selected)},false)}};c.Class.inherits("s7sdk.common.TwoStateButton","s7sdk.common.Button");c.common.TwoStateButton.prototype.symbols={};c.common.TwoStateButton.prototype.setCSS=function(f,e,d){if(this.isRestrictedCSSProperty(c.common.Button.RESTRICTED_STYLES,e)){throw new Error("You cannot set "+f+" : "+e+" CSS property for this component ")}else{this.superclass.superclass.superclass.prototype.setCSS.apply(this,[f,e,d])}};c.common.TwoStateButton.prototype.makeToolTip=function(){this.toolTipSelected=this.getLocalizedText("TOOLTIP_SELECTED");this.toolTipUnselected=this.getLocalizedText("TOOLTIP_UNSELECTED");if(this.toolTipSelected||this.toolTipUnselected){this.toolTip_=new c.SimpleToolTip(this.obj,this.toolTipSelected)}};c.common.TwoStateButton.prototype.changeState=function(d){c.common.Button.prototype.changeState.apply(this,[d]);c.Util.css.setCSSAttributeSelector(this.obj,"selected",this.selected);if(this.toolTip_){if(this.selected){this.toolTip_.setContent(this.toolTipSelected)}else{this.toolTip_.setContent(this.toolTipUnselected)}}};c.common.TwoStateButton.prototype.isSelected=function(){return this.selected};c.common.TwoStateButton.prototype.setSelected=function(d){if(d!=this.selected){this.selected=d;this.obj.className=this.css;this.changeState(this.currentState)}};c.TwoStateButton=c.common.TwoStateButton}if(!c.common.PlayPauseButton){c.common.PlayPauseButton=function PlayPauseButton(d,f,e){this.replayEnabled=false;c.Logger.log(c.Logger.CONFIG,"s7sdk.common.PlayPauseButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,0,0,"s7playpausebutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.common.PlayPauseButton.prototype.enableReplay=function(d){if(d!=this.replayEnabled){this.replayEnabled=d;this.obj.className=this.css;c.Util.css.setCSSAttributeSelector(this.obj,"replay",this.replayEnabled);this.changeState(this.currentState)}};c.common.PlayPauseButton.prototype.makeToolTip=function(){this.toolTipSelected=this.getLocalizedText("TOOLTIP_SELECTED");this.toolTipUnselected=this.getLocalizedText("TOOLTIP_UNSELECTED");this.toolTipReplay=this.getLocalizedText("TOOLTIP_REPLAY");if(this.toolTipSelected||this.toolTipUnselected||this.toolTipReplay){this.toolTip_=new c.SimpleToolTip(this.obj,this.toolTipSelected)}};c.common.PlayPauseButton.prototype.changeState=function(d){c.common.Button.prototype.changeState.apply(this,[d]);c.Util.css.setCSSAttributeSelector(this.obj,"selected",this.selected);if(this.toolTip_){var e="";if(this.selected){e=this.toolTipSelected}else{e=this.toolTipUnselected}if(this.replayEnabled&&this.selected){e=this.toolTipReplay}this.toolTip_.setContent(e)}};c.Class.inherits("s7sdk.common.PlayPauseButton","s7sdk.common.TwoStateButton");c.common.PlayPauseButton.prototype.symbols={TOOLTIP_SELECTED:"Play",TOOLTIP_UNSELECTED:"Pause",TOOLTIP_REPLAY:"Replay"};c.PlayPauseButton=c.common.PlayPauseButton;(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7playpausebutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7playpausebutton[selected='true'][state='up']",{"background-image":e("play_up.png")})+f(".s7playpausebutton[selected='true'][state='over']",{"background-image":e("play_over.png")})+f(".s7playpausebutton[selected='true'][state='down']",{"background-image":e("play_down.png")})+f(".s7playpausebutton[selected='true'][state='disabled']",{"background-image":e("play_disabled.png")})+f(".s7playpausebutton[selected='false'][state='up']",{"background-image":e("pause_up.png")})+f(".s7playpausebutton[selected='false'][state='over']",{"background-image":e("pause_over.png")})+f(".s7playpausebutton[selected='false'][state='down']",{"background-image":e("pause_down.png")})+f(".s7playpausebutton[selected='false'][state='disabled'][state='up']",{"background-image":e("pause_disabled.png")})+f(".s7playpausebutton[selected='true'][replay='true'][state='up']",{"background-image":e("replay_up.png")})+f(".s7playpausebutton[selected='true'][replay='true'][state='over']",{"background-image":e("replay_over.png")})+f(".s7playpausebutton[selected='true'][replay='true'][state='down']",{"background-image":e("replay_down.png")})+f(".s7playpausebutton[selected='true'][replay='true'][state='disabled']",{"background-image":e("replay_disabled.png")});c.common.Button.buttonsDefaultCSS("PlayPauseButton",".s7playpausebutton",[],d)})()}if(!c.common.FullScreenButton){c.common.FullScreenButton=function FullScreenButton(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.FullScreenButton constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,0,0,"s7fullscreenbutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.FullScreenButton","s7sdk.common.TwoStateButton");c.common.FullScreenButton.prototype.symbols={TOOLTIP_SELECTED:"Minimize",TOOLTIP_UNSELECTED:"Full Screen"};c.FullScreenButton=c.common.FullScreenButton;(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7fullscreenbutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7fullscreenbutton[selected='true'][state='up']",{"background-image":e("fullscreen_up.png")})+f(".s7fullscreenbutton[selected='true'][state='over']",{"background-image":e("fullscreen_over.png")})+f(".s7fullscreenbutton[selected='true'][state='down']",{"background-image":e("fullscreen_down.png")})+f(".s7fullscreenbutton[selected='true'][state='disabled']",{"background-image":e("fullscreen_disabled.png")})+f(".s7fullscreenbutton[selected='false'][state='up']",{"background-image":e("minscreen_up.png")})+f(".s7fullscreenbutton[selected='false'][state='over']",{"background-image":e("minscreen_over.png")})+f(".s7fullscreenbutton[selected='false'][state='down']",{"background-image":e("minscreen_down.png")})+f(".s7fullscreenbutton[selected='false'][state='disabled']",{"background-image":e("minscreen_disabled.png")});c.common.Button.buttonsDefaultCSS("FullScreenButton",".s7fullscreenbutton",[],d)})()}if(!c.common.ScrubberSwatchesButton){c.common.ScrubberSwatchesButton=function ScrubberSwatchesButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,0,0,"s7scrubberswatchesbutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrubberSwatchesButton","s7sdk.common.TwoStateButton");c.common.ScrubberSwatchesButton.prototype.symbols={TOOLTIP_SELECTED:"Page Scroll",TOOLTIP_UNSELECTED:"Thumbnail Scroll"};(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7scrubberswatchesbutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7scrubberswatchesbutton[selected='true'][state='up']",{"background-image":e("swatches_up.png")})+f(".s7scrubberswatchesbutton[selected='true'][state='over']",{"background-image":e("swatches_over.png")})+f(".s7scrubberswatchesbutton[selected='true'][state='down']",{"background-image":e("swatches_down.png")})+f(".s7scrubberswatchesbutton[selected='true'][state='disabled']",{"background-image":e("swatches_disabled.png")})+f(".s7scrubberswatchesbutton[selected='false'][state='up']",{"background-image":e("scrubber_up.png")})+f(".s7scrubberswatchesbutton[selected='false'][state='over']",{"background-image":e("scrubber_over.png")})+f(".s7scrubberswatchesbutton[selected='false'][state='down']",{"background-image":e("scrubber_down.png")})+f(".s7scrubberswatchesbutton[selected='false'][state='disabled']",{"background-image":e("scrubber_disabled.png")});c.common.Button.buttonsDefaultCSS("ScrubberSwatchesButton",".s7scrubberswatchesbutton",[],d)})()}if(!c.common.ThumbnailPageButton){c.common.ThumbnailPageButton=function ThumbnailPageButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,0,0,"s7thumbnailpagebutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ThumbnailPageButton","s7sdk.common.TwoStateButton");c.common.ThumbnailPageButton.prototype.symbols={TOOLTIP_SELECTED:"Page View",TOOLTIP_UNSELECTED:"Grid View"};(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7thumbnailpagebutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7thumbnailpagebutton[selected='true'][state='up']",{"background-image":e("thumb_up.png")})+f(".s7thumbnailpagebutton[selected='true'][state='over']",{"background-image":e("thumb_over.png")})+f(".s7thumbnailpagebutton[selected='true'][state='down']",{"background-image":e("thumb_down.png")})+f(".s7thumbnailpagebutton[selected='true'][state='disabled']",{"background-image":e("thumb_disabled.png")})+f(".s7thumbnailpagebutton[selected='false'][state='up']",{"background-image":e("page_up.png")})+f(".s7thumbnailpagebutton[selected='false'][state='over']",{"background-image":e("page_over.png")})+f(".s7thumbnailpagebutton[selected='false'][state='down']",{"background-image":e("page_down.png")})+f(".s7thumbnailpagebutton[selected='false'][state='disabled']",{"background-image":e("page_disabled.png")});c.common.Button.buttonsDefaultCSS("ThumbnailPageButton",".s7thumbnailpagebutton",[],d)})()}if(!c.common.ClosedCaptionButton){c.common.ClosedCaptionButton=function ClosedCaptionButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,0,0,"s7closedcaptionbutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ClosedCaptionButton","s7sdk.common.TwoStateButton");c.common.ClosedCaptionButton.prototype.symbols={TOOLTIP_SELECTED:"Disable Closed Captioning",TOOLTIP_UNSELECTED:"Enable Closed Captioning"};(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7closedcaptionbutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7closedcaptionbutton[selected='true'][state='up']",{"background-image":e("closedcaptions_up.png")})+f(".s7closedcaptionbutton[selected='true'][state='over']",{"background-image":e("closedcaptions_over.png")})+f(".s7closedcaptionbutton[selected='true'][state='down']",{"background-image":e("closedcaptions_down.png")})+f(".s7closedcaptionbutton[selected='true'][state='disabled']",{"background-image":e("closedcaptions_disabled.png")})+f(".s7closedcaptionbutton[selected='false'][state='up']",{"background-image":e("closedcaptions_disabled.png")})+f(".s7closedcaptionbutton[selected='false'][state='over']",{"background-image":e("closedcaptions_over.png")})+f(".s7closedcaptionbutton[selected='false'][state='down']",{"background-image":e("closedcaptions_down.png")})+f(".s7closedcaptionbutton[selected='false'][state='disabled']",{"background-image":e("closedcaptions_disabled.png")});c.common.Button.buttonsDefaultCSS("ClosedCaptionButton",".s7closedcaptionbutton",[],d)})()}if(!c.common.Download){c.common.Download=function Download(d,f,e){c.Logger.log(c.Logger.CONFIG,"s7sdk.common.Download constructor - container: %0, settings: %1 , compId: %2",d,f,e);arguments.callee.superclass.apply(this,[e,d,null,0,0,"s7download",f]);var h=!!arguments[3];var g=this;this.addEventListener("click",function(){g.onDownload()},false);if(!h){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.Download","s7sdk.common.Button");c.common.Download.prototype.symbols={TOOLTIP:"Download"};c.common.Download.prototype.modifiers={contentUrl:{params:["contenturl"],defaults:["/is/content/"]}};c.common.Download.prototype.onDownload=function(){if(!this.canDownload_){return}try{var g=this.downloadId?this.downloadId:(this.mediasetId?this.mediasetId:null);var d=c.Util.resolveURL(this.contentUrl,g);window.open(d)}catch(f){c.Logger.log(c.Logger.WARN,"Cannot download "+d)}};c.common.Download.prototype.checkAssetAvailable=function(e){var d=c.Util.resolveURL(this.contentUrl,e)+"?req=exists,json";this.isReq_=new c.IS();this.isReq_.getHttpReq(d,this.requestComplete,this.requestError,this)};c.common.Download.prototype.requestComplete=function(d,f){f.canDownload_=d["catalogRecord.exists"]=="1";var e=new c.event.StatusEvent(c.event.StatusEvent.NOTF_ASSET_METADATA_READY,true);c.Event.dispatch(f.obj,e,false)};c.common.Download.prototype.requestError=function(d,e){e.canDownload_=false;var f=e.downloadId?e.downloadId:(e.mediasetId?e.mediasetId:null);c.Logger.log(c.Logger.WARN,"s7sdk.common.Download.requestError "+c.Util.resolveURL(e.contentUrl,f))};c.common.Download.prototype.formatDownloadId=function(e){var d=e;if(d.indexOf("?")!=-1){d=d.substr(0,d.indexOf("?"))}return d+"pdf"};c.common.Download.prototype.setMediaSet=function(d){if(!this.downloadId&&d){var e;if(d.name){e=d.name}else{if(d.landscape&&d.landscape.name){e=d.landscape.name}else{return}}this.canDownload_=false;this.mediasetId=this.formatDownloadId(e);this.checkAssetAvailable(this.mediasetId)}};c.common.Download.prototype.addEventListener=function(f,e,d){c.Logger.log(c.Logger.FINE,"s7sdk.common.Download.addEventListener - type: %0, handler: %1, useCapture: %2",f,e.toString().substring(0,e.toString().indexOf("(")),d);this.superproto.addEventListener.apply(this,[f,e,d])};c.common.Download.prototype.setDownloadableAsset=function(d){this.downloadId=this.formatDownloadId(d);this.checkAssetAvailable(this.downloadId)};c.common.Download.prototype.canDownload=function(){return this.canDownload_};c.common.Download.prototype.cleanUp=function(){if(this.isReq_){this.isReq_.cancelHttpReq();this.isReq_=null}this.superclass.prototype.cleanUp.apply(this)};(function a(){c.common.Button.buttonsDefaultCSS("Download",".s7download",["download_up.png","download_over.png","download_down.png","download_disabled.png"])})()}if(!c.common.SearchButton){c.common.SearchButton=function SearchButton(d,f,e){arguments.callee.superclass.apply(this,[e,d,0,0,"s7searchbutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.SearchButton","s7sdk.common.TwoStateButton");c.common.SearchButton.prototype.symbols={TOOLTIP_SELECTED:"Disable search",TOOLTIP_UNSELECTED:"Enable search"};(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7searchbutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7searchbutton[selected='true'][state='up']",{"background-image":e("searchbutton_on_over.png")})+f(".s7searchbutton[selected='true'][state='over']",{"background-image":e("searchbutton_on_over.png")})+f(".s7searchbutton[selected='true'][state='down']",{"background-image":e("searchbutton_on_over.png")})+f(".s7searchbutton[selected='true'][state='disabled']",{"background-image":e("searchbutton_off_disabled.png")})+f(".s7searchbutton[selected='false'][state='up']",{"background-image":e("searchbutton_off_up.png")})+f(".s7searchbutton[selected='false'][state='over']",{"background-image":e("searchbutton_off_over.png")})+f(".s7searchbutton[selected='false'][state='down']",{"background-image":e("searchbutton_off_down.png")})+f(".s7searchbutton[selected='false'][state='disabled']",{"background-image":e("searchbutton_off_disabled.png")});c.common.Button.buttonsDefaultCSS("SearchButton",".s7searchbutton",[],d)})()}if(!c.common.ScrollLeftRightButton){c.common.ScrollLeftRightButton=function b(d,f,e){arguments.callee.superclass.apply(this,[e,d,0,0,"s7scrollleftrightbutton",f]);var g=!!arguments[3];if(!g){return new c.common.ButtonControl(this)}else{return this}};c.Class.inherits("s7sdk.common.ScrollLeftRightButton","s7sdk.common.TwoStateButton");c.common.ScrollLeftRightButton.prototype.symbols={TOOLTIP_SELECTED:"Scroll left",TOOLTIP_UNSELECTED:"Scroll right"};(function a(){var f=c.Util.css.createCssRuleText;var e=c.Util.css.createCssImgUrlText;var d=f(".s7scrollleftrightbutton",{position:"absolute",width:"25px",height:"25px"})+f(".s7scrollleftrightbutton[selected='true'][state='up']",{"background-image":e("controlbarleftbutton_dark_up.png")})+f(".s7scrollleftrightbutton[selected='true'][state='over']",{"background-image":e("controlbarleftbutton_dark_over.png")})+f(".s7scrollleftrightbutton[selected='true'][state='down']",{"background-image":e("controlbarleftbutton_dark_down.png")})+f(".s7scrollleftrightbutton[selected='true'][state='disabled']",{"background-image":e("controlbarleftbutton_dark_disabled.png")})+f(".s7scrollleftrightbutton[selected='false'][state='up']",{"background-image":e("controlbarrightbutton_dark_up.png")})+f(".s7scrollleftrightbutton[selected='false'][state='over']",{"background-image":e("controlbarrightbutton_dark_over.png")})+f(".s7scrollleftrightbutton[selected='false'][state='down']",{"background-image":e("controlbarrightbutton_dark_down.png")})+f(".s7scrollleftrightbutton[selected='false'][state='disabled']",{"background-image":e("controlbarrightbutton_dark_disabled.png")});c.common.Button.buttonsDefaultCSS("ScrollLeftRightButton",".s7scrollleftrightbutton",[],d)})()}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.Util.require("s7sdk.common.Geometry");if(!b.Thumb){b.Thumb=function(l,p,m,u,j,n,d,h,f,g,r,e,o,i,q,s,c){this.serverUrl_=p;this.iscommand_=m;this.item=u;this.wid_=j;this.hei_=n;this.fmt_=d;this.highlight_=h;this.highlightColor_=f;this.textPos_=r||b.Thumb.TEXT_BOTTOM;this.parentClassName_=e||"";this.toolTip_=null;this.locale_=o;this.sourceRect=g;this.container_=l;this.x=0;this.y=0;this.div=null;this.selected_=false;this.mouseOver_=false;this.labelHeight_=0;this.labelWidth_=0;this.isgridview=i;this.div=this.createMainDiv();var k=c==b.ItemDescType.EMPTY;if(k){b.Util.css.setCSSAttributeSelector(this.div,"type","none");return}this.imgDiv=this.createImgDiv();this.overlayDiv=this.createOverlayDiv();this.imgDiv.appendChild(this.overlayDiv);this.div.appendChild(this.imgDiv);switch(c){case b.ItemDescType.IMG:this.overlayType="image";break;case b.ItemDescType.IMAGE_SET:this.overlayType="swatchset";break;case b.ItemDescType.SPIN_SET:this.overlayType="spinset";break;case b.ItemDescType.VIDEO:this.overlayType="video";break;case b.ItemDescType.VIDEO_SET:this.overlayType="video";break;default:this.overlayType="";break}this.setOverlayType(this.overlayType);this.item_label=this.item.label?this.item.label:q;if((this.item_label&&this.item_label.length)||(this.item.customlabel&&u.customlabel.length)){this.txtDiv=this.createTxtDiv();if(this.textPos_==b.Thumb.TEXT_RIGHT||this.textPos_==b.Thumb.TEXT_LEFT){b.Thumb.setInlineBlock(this.imgDiv);b.Thumb.setInlineBlock(this.txtDiv);this.txtDiv.style.verticalAlign="top"}this.txtDiv.innerHTML=this.item_label}this.layoutComp();b.Event.addDOMListener(this.div,"mousedown",function(v){b.Event.preventDefault(v||window.event)},false);var t=this;b.Event.addDOMListener(this.div,"mousemove",function(v){if(!t.mouseOver_){t.showOverState(true);t.mouseOver_=true}},false);b.Event.addDOMListener(this.div,"mouseout",function(v){t.mouseOver_=false;t.showOverState(false)},false);b.Event.addDOMListener(this.div,"focus",function(v){t.inFocus=true},false);b.Event.addDOMListener(this.div,"blur",function(v){t.inFocus=false},false);if(this.textPos_==b.Thumb.TEXT_TOOLTIP&&this.item_label&&this.item_label.length){this.toolTip_=new b.SimpleToolTip(this.div,this.item_label)}this.setSelected(false);this.delayedLoad_=s==true;this.isLoading=false;this.isComlete=false;if(this.item.image!=null&&this.item.image!=""&&!this.delayedLoad_){this.loadImage()}};b.Thumb.TEXT_BOTTOM="bottom";b.Thumb.TEXT_TOP="top";b.Thumb.TEXT_LEFT="left";b.Thumb.TEXT_RIGHT="right";b.Thumb.TEXT_NONE="none";b.Thumb.TEXT_ONLY="only";b.Thumb.TEXT_TOOLTIP="tooltip";b.Thumb.setInlineBlock=function(c){if(b.browser.name=="ie"&&b.browser.version.major=="7"){c.style.display="inline";c.style.zoom="1"}else{c.style.display="inline-block"}};b.Thumb.prototype.getWidth=function(){var c=this.wid_;if(this.getLabelEnabled()){if(this.textPos_==b.Thumb.TEXT_LEFT||this.textPos_==b.Thumb.TEXT_RIGHT){if(this.isgridview){c=this.labelWidth_+this.wid_}else{c*=2}}}return c};b.Thumb.prototype.getHeight=function(){var c=this.hei_;if(this.textPos_==b.Thumb.TEXT_TOP||this.textPos_==b.Thumb.TEXT_BOTTOM){if(this.getLabelEnabled()){c+=this.labelHeight_}}return c};b.Thumb.prototype.getLabelEnabled=function(){return Boolean(this.item_label&&this.item_label.length)};b.Thumb.prototype.loadImage=function(){this.isLoading=true;var c;if(!this.item.image&&this.item.color){c=b.Util.resolveURL(this.serverUrl_,b.MediaSetParser.findCompanyNameInAsset(this.item.asset));c+="?bgc="+this.item.color+"&"}else{c=b.Util.resolveURL(this.serverUrl_,this.item.image);if(c.indexOf("?")==-1){c+="?"}else{c+="&layer=comp&"}}c+="fit=constrain,1&";c+="wid="+this.wid_+"&hei="+this.hei_;c+="&fmt="+this.fmt_;if(typeof(this.sourceRect)!="undefined"){c+="&rgn="+this.sourceRect.x+","+this.sourceRect.y;c+=","+this.sourceRect.width+","+this.sourceRect.height}if(this.iscommand_!=null&&this.iscommand_.length>0){c+=(c.indexOf("?")==-1)?"?":"&";c+=this.iscommand_}if(b.Util.isNonEmptyString(this.locale_)){c+="&locale="+this.locale_}b.Logger.log(b.Logger.FINER,"s7sdk.Thumb.loadImage - req: %0",c);this.image_=new Image();var d=this;this.image_.onload=function(f){d.onLoadImage()};this.image_.onerror=function(f){d.onErrorImage()};this.image_.onabort=function(f){d.onAbortImage()};this.image_.src=c};b.Thumb.prototype.onLoadImage=function(){this.imgDiv.style.backgroundImage='url("'+this.image_.src+'")';this.isComlete=true;this.isLoading=false};b.Thumb.prototype.onErrorImage=function(){this.isComlete=true;this.isLoading=false};b.Thumb.prototype.onAbortImage=function(){this.isComlete=true;this.isLoading=false};b.Thumb.prototype.layoutComp=function(){this.imgDiv.style.width=this.wid_+"px";this.imgDiv.style.height=this.hei_+"px";if(this.item_label&&this.item_label.length){this.txtDiv.style.width=this.wid_+"px";this.labelHeight_=0;this.labelWidth_=0;this.container_.appendChild(this.txtDiv);this.labelHeight_=this.txtDiv.clientHeight;this.labelWidth_=this.txtDiv.clientWidth;this.container_.removeChild(this.txtDiv);switch(this.textPos_){case b.Thumb.TEXT_RIGHT:case b.Thumb.TEXT_BOTTOM:this.div.appendChild(this.txtDiv);break;case b.Thumb.TEXT_LEFT:case b.Thumb.TEXT_TOP:this.div.insertBefore(this.txtDiv,this.imgDiv);break}}};b.Thumb.prototype.updatePosition=function(){this.div.style.left=this.x+"px";this.div.style.top=this.y+"px"};b.Thumb.prototype.getSelected=function(){return this.selected_};b.Thumb.prototype.setSelected=function(c){this.selected_=c;this.showHighlight(c)};b.Thumb.prototype.showHighlight=function(d){b.Util.css.setCSSAttributeSelector(this.imgDiv,"state",d?"selected":"default");if(this.highlight_!=-1){var c=d?"inset 0 0 0px "+this.highlight_+"px "+this.highlightColor_:"none";this.imgDiv.style.boxShadow=c;this.imgDiv.style.webkitBoxShadow=c}};b.Thumb.prototype.showOverState=function(c){if(!this.selected_){b.Util.css.setCSSAttributeSelector(this.imgDiv,"state",c?"over":"default")}};b.Thumb.prototype.setOverlayType=function(c){b.Util.css.setCSSAttributeSelector(this.overlayDiv,"type",c?c:"")};b.Thumb.prototype.createOverlayDiv=function(){var c=this.createDiv();c.className="s7thumboverlay";return c};b.Thumb.prototype.createImgDiv=function(){var c=this.createDiv();c.className="s7thumb";return c};b.Thumb.prototype.createTxtDiv=function(){var c=this.createDiv();c.className="s7label";return c};b.Thumb.prototype.createMainDiv=function(){var c=this.createDiv();c.className="s7thumbcell";c.setAttribute("tabindex",0);return c};b.Thumb.prototype.createDiv=function(d){var e=document.createElement("div");var c=(b.namespacePrefix=="")?false:true;if(c){e.setAttribute("data-namespace",b.namespacePrefix)}return e};(function a(){var e=b.Util.css.createCssRuleText;var d=b.Util.css.createCssImgUrlText;var c=e(".s7thumbcell .s7thumb",{"background-repeat":"no-repeat","background-position":"center"})+e(".s7thumbcell .s7thumboverlay",{"background-repeat":"no-repeat","background-position":"center"})+e(".s7thumbcell .s7label",{"text-align":"center","word-wrap":"break-word"});b.Util.css.addDefaultCSS(c,"Thumb")})()}if(!b.SimpleToolTip){b.SimpleToolTip=function SimpleToolTip(e,d){this.target_=null;this.content_=null;this.toolTip_=null;if(b.browser.supportsTouch()){return}this.createToolTip();var c=this;this.__rollOverHandler=function(f){c.rollOverHandler(f)};this.__rollOutHandler=function(f){c.rollOutHandler(f)};this.__mouseMoveHandler=function(f){c.mouseMoveHandler(f)};this.setTarget(e);this.setContent(d)};b.SimpleToolTip.prototype.getContainer=function(){return this.target_.parentNode};b.SimpleToolTip.prototype.getTarget=function(){return this.target_};b.SimpleToolTip.prototype.setTarget=function(c){if(this.toolTip_){this.removeToolTip();if(this.target_){b.Event.removeDOMListener(this.target_,"mouseover",this.__rollOverHandler);b.Event.removeDOMListener(this.target_,"mouseout",this.__rollOutHandler);b.Event.removeDOMListener(this.target_,"mousemove",this.__mouseMoveHandler)}if(c){b.Event.addDOMListener(c,"mouseover",this.__rollOverHandler,true);b.Event.addDOMListener(c,"mouseout",this.__rollOutHandler,true);b.Event.addDOMListener(c,"mousemove",this.__mouseMoveHandler,true)}}this.target_=c};b.SimpleToolTip.prototype.getContent=function(){return this.content_};b.SimpleToolTip.prototype.setContent=function(c){if(this.toolTip_){this.toolTip_.innerHTML=c;this.content_=c}};b.SimpleToolTip.prototype.cleanUp=function(){this.setTarget(null)};b.SimpleToolTip.prototype.removeToolTip=function(){if(this.toolTip_&&this.toolTip_.parentNode){this.toolTip_.parentNode.removeChild(this.toolTip_)}};b.SimpleToolTip.prototype.rollOverHandler=function(e){var f=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement||document.msFullscreenElement;var d=this.getAnchors();this.anchor=f?f:d.s7Container?d.s7Container.parentNode:document.body;if(this.toolTip_){var c=this.toolTip_.style.visibility;this.toolTip_.style.visibility="hidden";this.anchor.appendChild(this.toolTip_);this.positionToolTip(new b.Point2D(e.clientX,e.clientY));this.toolTip_.style.visibility=c}};b.SimpleToolTip.prototype.getAnchors=function(){var d={};if(this.toolTip_){var c=this.target_;while(c!=null){c=c.parentNode;if(c==document.body){break}if(c!=null&&typeof(c.s7base)=="object"&&b.common&&b.common.Container&&(c.s7base instanceof b.common.Container)){d.s7Container=c}}d.nod=c}return d};b.SimpleToolTip.prototype.positionToolTip=function(c){if(this.toolTip_){var h=20;var f=b.browser.detectScreen();var d=b.Util.getScrollXY();var g=this.anchor!=document.body?b.Util.getObjPos(this.anchor):{x:0,y:0};var k={x:Math.max(d.x,g.x),y:Math.max(d.y,g.y)};var e=this.anchor!=document.body?{x:Math.min(d.x+f.w,g.x+this.anchor.offsetWidth),y:Math.min(d.y+f.h,g.y+this.anchor.offsetHeight)}:{x:d.x+f.w,y:d.y+f.h};var i={x:d.x+c.x+h,y:d.y+c.y+h};if(i.x+this.toolTip_.clientWidth+35>=e.x){i.x-=this.toolTip_.clientWidth+2*h;if(i.x<k.x){i.x-=h}}if(i.y+this.toolTip_.clientHeight+35>=e.y){i.y-=this.toolTip_.clientHeight+2*h;if(i.y<k.y){i.y-=h}}this.toolTip_.style.left=i.x+"px";this.toolTip_.style.top=i.y+"px";var j=b.Util.getObjPos(this.toolTip_);this.toolTip_.style.left=2*i.x-j.x+"px";this.toolTip_.style.top=2*i.y-j.y+"px"}};b.SimpleToolTip.prototype.rollOutHandler=function(c){this.removeToolTip()};b.SimpleToolTip.prototype.mouseMoveHandler=function(d){if(this.toolTip_&&this.toolTip_.parentNode){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;var c=this.getAnchors();this.anchor=e?e:c.s7Container?c.s7Container.parentNode:document.body;this.positionToolTip(new b.Point2D(d.clientX,d.clientY))}};b.SimpleToolTip.prototype.getElementCoords=function(e){var d=document.documentElement||document.body;var g=window.pageXOffset||d.scrollLeft;var f=window.pageYOffset||d.scrollTop;var c=e.getBoundingClientRect().left+g;var h=e.getBoundingClientRect().top+f;return new b.Point2D(c,h)};b.SimpleToolTip.prototype.createToolTip=function(){this.toolTip_=document.createElement("div");var c=(b.namespacePrefix=="")?false:true;if(c){this.toolTip_.setAttribute("data-namespace",b.namespacePrefix)}this.toolTip_.className="s7tooltip";this.toolTip_.style.position="absolute";this.toolTip_.style.whiteSpace="nowrap";this.toolTip_.style.pointerEvents="none"}}if(b.SimpleToolTip){(function a(){var e=b.Util.css.createCssRuleText;var d=b.Util.css.createCssImgUrlText;var c=e(".s7tooltip",{position:"absolute",padding:"5px","line-height":"100%","text-align":"center","background-color":"rgb(224, 224, 224)",color:"rgb(26,26,26)","font-family":"Helvetica, sans-serif","font-size":"11px","z-index":"10000",border:"1px solid rgb(191,191,191)"});b.Util.css.addDefaultCSS(c,"SimpleToolTip")})()}})(s7getCurrentNameSpace());/*!************************************************************************
*
* ADOBE CONFIDENTIAL
* ___________________
*
*  Copyright 2011 Adobe Systems Incorporated
*  All Rights Reserved.
*
* NOTICE:  All information contained herein is, and remains
* the property of Adobe Systems Incorporated and its suppliers,
* if any.  The intellectual and technical concepts contained
* herein are proprietary to Adobe Systems Incorporated and its
* suppliers and are protected by trade secret or copyright law.
* Dissemination of this information or reproduction of this material
* is strictly forbidden unless prior written permission is obtained
* from Adobe Systems Incorporated.
**************************************************************************/
(function(b){b.pkg("s7sdk.common");b.Util.require("s7sdk.event.Event");if(!b.common.ContainerControl){b.common.ContainerControl=function(c){arguments.callee.superclass.apply(this,[c,b.common.ContainerControl.NS,c.constructor,b.common.Container.RESTRICTED_STYLES])};b.common.ContainerControl.NS="s7sdk.common.ContainerControl";b.common.ContainerControl.prototype.setCSS=function(f,e,d){if(this.component){if(e=="width"||e=="height"){this.component.wid=-1;this.component.hei=-1;var h=b.Util.objByClassName(f,this.getParent());var g=b.Util.cssPropToJSProp(e);for(var c=0;c<h.length;c++){if(h[c]!=this.component.innerContainer){h[c].style[g]=d}}}else{this.component.setCSS(f,e,d)}this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_CSSUPDATED,{classname:f,property:e,value:d},false))}};b.common.ContainerControl.prototype.setModifier=function(e){var f="";var p=false;var s=this.component.getModifiers();var u=this.component.settings;for(var l in s){var g=l.toLowerCase();var q;if(e[g]){q=e[g];if(g=="stagesize"){if(q){var o,m;f=this.getWidth()+","+this.getHeight();var s=q.split(",");if(s&&s.length>1){o=parseInt(s[0]);m=parseInt(s[1]);this.component.resize(o,m);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{id:this.component.getId(),oldvalue:f,newvalue:o+","+m,property:g},false));p=true;continue}}}else{if(g=="aspect"&&!p){if(q){f=this.component.responsive.aspect;if(q){this.component.setAspect(q);this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{oldvalue:f,newvalue:q,property:g},false));continue}}}}b.Logger.log(b.Logger.WARNING,"s7sdk.common.Container.setModifier ignored - %0: %1",g,q)}if((g=="sizemarkers")&&e.sizeMarkers){var r,j,t,d,v,c,n;v={};n="";c=this.component.sizeMarkers;j=s.sizeMarkers;d=b.Modifier.parse(e.sizeMarkers,s.sizeMarkers.defaults,s.sizeMarkers.ranges);if(d.values.length>0){for(var l=0;l<d.values.length;l++){v[j.params[l]]=d.values[l];n+=d.values[l]+" "}this.component.sizeMarkers=v}if(JSON.stringify(c)!=JSON.stringify(this.component.sizeMarkers)){this.component.sizeMarker=this.component.sizeSwitch(this.getWidth(),this.getHeight());this.dispatchEvent(new b.event.ControlComponentEvent(b.event.ControlComponentEvent.NOTF_CONTROLCOMPONENT_MODIFIERUPDATED,{oldvalue:JSON.stringify(c),newvalue:JSON.stringify(v),property:g},false))}}}};b.common.ContainerControl.prototype.unload=function(){};b.common.ContainerControl.prototype.rebuild=function(){}}b.Class.inherits(b.common.ContainerControl.NS,"s7sdk.ControlComponent");if(!b.common.Container){b.common.Container=function Container(h,d,k){var g=!!arguments[3];b.Logger.log(b.Logger.CONFIG,"s7sdk.common.Container constructor - containerId: %0, settings: %1 , compId: %2",h,d,k);arguments.callee.superclass.apply(this,[k,h,"div","s7container",d,!g]);this.settings=d;this.container=b.Util.byId(h);this.isPopup_=false;function j(m){var i=new RegExp("^\\s*$","gi").test(m);return !i}this.responsive={};if(!this.container||this.container.parentNode==document.body){var c=document.body.childNodes;var l=false;for(var e=0;e<c.length;e++){if(this.container&&this.container==c[e]){continue}switch(c[e].nodeType){case 1:if(c[e].tagName&&c[e].getAttribute&&(c[e].tagName.toLowerCase()=="script"||c[e].tagName.toLowerCase()=="style"||(c[e].getAttribute("data-description")=="Scene7ComponentHolder"&&c[e].tagName.toLowerCase()=="span"))){continue}else{l=true}break;case 3:if(j(c[e].nodeValue)){l=true}break}if(l){break}}this.isPopup_=!l}this.wid=this.stagesize.width;this.hei=this.stagesize.height;this.storedPosition=null;if(this.wid==0||this.hei==0){this.wid=this.size.width;this.hei=this.size.height}this.ie11NativeIsFullscreen=document.msFullscreenElement?true:false;this.isFixedSize_=false;this.storedWidth=this.wid;this.storedHeight=this.hei;this.inFullScreen=false;this.fullScreenRequested=false;this.sizeMarker=b.common.Container.SIZE_MARKER_NONE;this.init();this.isRemoved=this.getLayoutState();var f=this;if(this.isRemoved){setTimeout(function(){f.waitDisplay()},0)}else{this.completeInit();this.checkTimer=setInterval(function(){f.onCheckSize()},50)}if(!g){return new b.common.ContainerControl(this)}else{return this}};b.common.Container.prototype.completeInit=function(){this.responsive_wh=this.checkRelativeCssWH("s7container s7supressminsize",this.id,null,this.container,{mode:"normal"});this.responsive.aspect=this.aspect;this.responsive.freeRatio=this.aspect==0;this.responsive.fixedSize=false;if(this.wid!=0||this.hei!=0){this.responsive.fixedSize=true;this.responsive.freeRatio=true}if((this.wid!=0&&this.hei!=0)||(!this.responsive_wh.w&&!this.responsive_wh.h)){this.isFixedSize_=true}if(!this.responsive.freeRatio&&!this.responsive_wh.w){this.isFixedSize_=true}b.Logger.log(b.Logger.FINE,"s7sdk.common.Container responsive enabled: %0, freeRatio: %1",this.responsive.enabled,this.responsive.freeRatio);if(this.responsive.fixedSize){this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px"}this.obj.style.boxSizing="content-box";if((b.browser.name=="ie")&&(b.browser.version.minor<=8)&&!this.responsive.freeRatio){this.obj.style.height=1+"px"}this.onCheckSize(true);this.restoreSizeFlags();this.prewW=this.resH=this.resW=-1;this.onCheckSize();this.obj.style.boxSizing=""};b.common.Container.prototype.waitDisplay=function(){var c=this;if(this.getLayoutState()){setTimeout(function(){c.waitDisplay()},100);return}this.completeInit();this.checkTimer=setInterval(function(){c.onCheckSize()},50)};b.Class.inherits("s7sdk.common.Container","s7sdk.UIComponent");b.common.Container.prototype.getComponent=function(){return this};b.common.Container.prototype.dispose=function(){if(this.innerContainer.hasChildNodes()){}else{if(this.obj){if(this.checkTimer){clearInterval(this.checkTimer);this.checkTimer=null}b.Window.detach(this,"resizeByWindow");b.Util.removeTags(this.obj);if(this.obj.parentElement){this.obj.parentElement.removeChild(this.obj)}}}};b.common.Container.prototype.setCSS=function(e,d,c){this.superproto.setCSS.apply(this,[e,d,c])};b.common.Container.prototype.setModifier=function(c){throw new Error("Trying to use setModifier on the Core class (Container) is unsupported! Please refer to SDK documentation on using setModifier.")};b.common.Container.prototype.modifiers={stagesize:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"]},aspect:{params:["ratio"],defaults:[0],ranges:["0:"]},size:{params:["width","height"],defaults:[0,0],ranges:["0:","0:"],deprecated:true},sizeMarkers:{params:["measurementType","smallMediumSize","mediumLargeSize"],defaults:["area",310000,920000],ranges:[["area","width"],"0:","0:"]}};b.common.Container.SIZE_MARKER_LARGE="size_large";b.common.Container.SIZE_MARKER_MEDIUM="size_medium";b.common.Container.SIZE_MARKER_SMALL="size_small";b.common.Container.SIZE_MARKER_NONE="size_none";b.common.Container.prototype.sizeSwitch=function(f,c){var e=0;var d=b.common.Container.SIZE_MARKER_LARGE;if(this.isRemoved){return d=b.common.Container.SIZE_MARKER_NONE}if(arguments.length>1&&this.sizeMarkers.measurementType=="area"){e=f*c}else{e=f}if(e<=this.sizeMarkers.smallMediumSize){d=b.common.Container.SIZE_MARKER_SMALL}else{if((e>this.sizeMarkers.smallMediumSize)&&(e<=this.sizeMarkers.mediumLargeSize)){d=b.common.Container.SIZE_MARKER_MEDIUM}else{d=b.common.Container.SIZE_MARKER_LARGE}}return d};b.common.Container.prototype.getSizeMarker=function(){this.onCheckSize(true);var c=this.sizeMarker;this.restoreSizeFlags();return c};b.common.Container.prototype.getWH=function(e,c){var d=b.Util.getStyle(e,c);if(d.indexOf("%")!=-1||d=="auto"){var g,f;if(c=="height"){g=e.offsetHeight;e.style.height=g+"px";f=e.offsetHeight;e.style.height=""}else{g=e.offsetWidth;e.style.width=g+"px";f=e.offsetWidth;e.style.width=""}d=2*g-f}return d.toString().indexOf("px")!=-1?d:d+"px"};b.common.Container.prototype.checkRelativeCssWH=function(k,f,d,e,i){var m,j;var g={};if(b.browser.name==="ie"&&b.browser.version.major<9){m=b.Util.css.getCss(k,"width",f,d,e,i);g.w=m.indexOf("%")!=-1;j=b.Util.css.getCss(k,"height",f,d,e,i);g.h=j.indexOf("%")!=-1}else{var l=b.Util.createElement("div",i);e=(e&&b.Util.isElement(e))?e:document.body;l.className=k;if(f&&f.length>0){l.setAttribute("id",f)}var c=document.createElement("div");c.style.position="absolute";g.origW=this.getWH(e,"width");g.origH=this.getWH(e,"height");c.style.width="100px";c.style.height="100px";c.style.backgroundColor="#ff6060";e.appendChild(c);c.appendChild(l);m=this.getWH(l,"width");c.style.width="200px";g.w=m!=this.getWH(l,"width");m=this.getWH(l,"height");c.style.height="200px";g.h=m!=this.getWH(l,"height");c.removeChild(l);e.removeChild(c)}return g};b.common.Container.prototype.isInLayout=function(){this.onCheckSize(true);var c=!this.isRemoved;this.restoreSizeFlags();return c};b.common.Container.prototype.invalidate=function(c){this.ssb=null;this.prewW=this.resH=this.resW=-1;this.onCheckSize(c);if(c){this.restoreSizeFlags()}};b.common.Container.prototype.getLayoutState=function(){return this.obj.offsetParent==null||((b.browser.name==="ie"&&b.browser.version.major<11)&&this.obj.offsetParent==document.body&&this.obj.offsetWidth==0&&this.obj.offsetHeight==0)};b.common.Container.prototype.restoreSizeFlags=function(){this.sizeMarker=this.prevSizeMarker;this.isRemoved=this.prevIsRemoved;this.resW=this.prevResW;this.resH=this.prevResH};b.common.Container.prototype.onCheckSize=function(j){this.prevSizeMarker=this.sizeMarker;this.prevIsRemoved=this.isRemoved;this.prevResW=this.resW;this.prevResH=this.resH;var l=this.obj.clientWidth;var g=this.obj.clientHeight;var i=this.getLayoutState();var e=null;var d;if(this.isRemoved!=i){this.isRemoved=i;this.resW=this.resH=-1;e=this.sizeSwitch(l,g);d=this.sizeMarker!=e;this.sizeMarker=e;if(!j){this.dispatchEvent(new b.event.ResizeEvent(this.isRemoved?b.event.ResizeEvent.REMOVED_FROM_LAYOUT:b.event.ResizeEvent.ADDED_TO_LAYOUT,l,g,false));if(d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,l,g,false))}}}if(this.prewW!=l&&!this.isRemoved){if(!this.responsive.freeRatio){var n=this.hasVerticalScroll().vScrollbar;if(this.ssb&&this.ssb.min){if(this.ssb.min<=l&&l<=this.ssb.max&&Math.abs(this.prewW-l)<=this.ssb.w){if(this.resW!=l||this.resH!=g){this.resW=l;this.resH=g;if(!j&&!this.isFullScreen()){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,l,g,false))}}e=this.sizeSwitch(l,g);d=this.sizeMarker!=e;this.sizeMarker=e;if(!j&&d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,l,g,false))}return}}g=Math.round(l/this.responsive.aspect);this.obj.style.height=g+"px";var o=this.obj.offsetHeight;this.obj.style.maxHeight="none";var f=this.obj.offsetHeight;this.obj.style.maxHeight="";if(o!=f){l=Math.round(o*this.responsive.aspect);this.obj.style.maxWidth=l+"px";l=this.obj.clientWidth}var m=this.hasVerticalScroll().vScrollbar;if(!this.ssb&&m){this.ssb={};var k=(b.browser.name==="ie"&&b.browser.version.major<9)?document.body:document.documentElement;var c=k.offsetWidth;k.style.overflow="hidden";this.ssb.w=k.offsetWidth-c+2;k.style.overflow=""}if(this.ssb&&n!=m){this.ssb.max=l+this.ssb.w;this.ssb.min=l-this.ssb.w}}this.prewW=l=this.obj.clientWidth;g=this.obj.clientHeight}if(this.resW!=l||this.resH!=g){this.resW=l;this.resH=g;e=this.sizeSwitch(l,g);d=this.sizeMarker!=e;this.sizeMarker=e;if(!j&&d){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,l,g,false))}if(this.isFullScreen()){j=true}if(!j){this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,l,g,false))}}};b.common.Container.prototype.hasVerticalScroll=function(){var c={vScrollbar:true,hScrollbar:true};try{var d=document.compatMode=="BackCompat"?document.body:document.documentElement;c.vScrollbar=d.scrollHeight>d.clientHeight;c.hScrollbar=d.scrollWidth>d.clientWidth}catch(f){}return c};b.common.Container.prototype.getInnerContainerId=function(){return this.innerContainer.id};b.common.Container.prototype.init=function(){var c=this.getParent();this.createElement();this.obj.setAttribute("mode","normal");if(typeof this.obj!="undefined"){this.obj.style.position="relative";c.appendChild(this.obj);this.resize(this.wid,this.hei);b.Window.attach(this,"resizeByWindow")}this.innerContainer=document.createElement("div");this.innerContainer.setAttribute("mode","normal");this.innerContainer.className="s7container s7innercontainer";var d=this.obj.id;this.innerContainer.id=this.obj.id+"_inner";this.obj.appendChild(this.innerContainer)};b.common.Container.prototype.getFocusableElements=function(){var e=[];var d=this.innerContainer.querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]),[tabindex]:not([tabindex='-1']):not([notfocusable='true'])");arrElements=Array.prototype.slice.call(d);for(var c=0;c<arrElements.length;c++){if((b.Util.getStyle(arrElements[c],"visibility")!="hidden")&&((b.Util.getStyle(arrElements[c],"display")!="none")&&(b.Util.getStyle(arrElements[c].parentNode,"display")!="none"))){e.push(arrElements[c])}}return e};b.common.Container.prototype.resizeByWindow=function(c,d){if(this.inFullScreen){b.Util.css.setCSSAttributeSelector(this.obj,"mode","fullscreen");this.innerContainer.style.width=c+"px";this.innerContainer.style.height=d+"px";this.moveToTopLeft(this.innerContainer);this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.COMPONENT_RESIZE,c,d,false));return}this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.WINDOW_RESIZE,c,d,false));if((b.browser.name=="ie")&&(b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)){b.Window.ignoreNextResize=true}};b.common.Container.prototype.resize=function(c,d){if(this.wid!=c||this.hei!=d){this.responsive.fixedSize=true;this.responsive.freeRatio=true;this.wid=c;this.hei=d;this.obj.style.width=this.wid+"px";this.obj.style.height=this.hei+"px";this.commonresize(c,d)}};b.common.Container.prototype.commonresize=function(c,e,d){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.commonresize - w: %0, h: %1",c,e);if(b.Util.isNumber(c)&&b.Util.isNumber(e)){this.storedWidth=c;this.storedHeight=e;this.wid=c;this.hei=e;if(d){this.obj.style.width="";this.obj.style.height="";if((b.browser.name=="ie")&&(b.browser.version.minor<=8)&&!this.responsive.freeRatio){this.obj.style.height=1+"px"}}else{this.obj.style.width=c+"px";this.obj.style.height=e+"px"}this.ssb=null;this.prewW=this.resH=this.resW=-1;if(!d){this.onCheckSize()}if((b.browser.name=="ie")&&(b.browser.version.minor>5.5)&&(b.browser.version.minor<=8)){b.Window.ignoreNextResize=true}}b.UIComponent.prototype.resize.apply(this,[c,e])};b.common.Container.prototype.supportsNativeFullScreen=function(){var c=false;if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){c=true}return c};b.common.Container.prototype.requestFullScreen=function(){if(!this.fullScreenRequested&&!this.isFullScreen()){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.requestFullScreen");var c,g;this.fullScreenRequested=true;this.storedPosition=new Object();this.lastFocus=document.activeElement;if(this.supportsNativeFullScreen()){var e=this;function f(q){var o=(b.browser.name==="ie"&&b.browser.version.major>=11)?!e.ie11NativeIsFullscreen:e.isFullScreen();if(o){e.ie11NativeIsFullscreen=true;e.inFullScreen=true;k=b.browser.detectScreen().w;m=b.browser.detectScreen().h;b.Util.css.setCSSAttributeSelector(e.innerContainer,"mode","fullscreen");if(b.browser.name=="safari"){var p=[];var n=[];if(b.browser.raw.ua.indexOf("version/6")!=-1){p=b.browser.raw.ua.split("version/6.")}else{if(b.browser.raw.ua.indexOf("version/10")!=-1){p=b.browser.raw.ua.split("version/10.")}}n=p[1]?p[1].split("."):[];if(parseInt(n[0])<2){b.Util.css.setCSSAttributeSelector(e.obj,"mode","fullscreen");e.innerContainer.style.width=k+"px";e.innerContainer.style.height=m+"px";e.moveToTopLeft(e.innerContainer)}}var l=e.sizeSwitch(k,m);if(e.sizeMarker!=l){e.sizeMarker=l;e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,k,m,false))}e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,k,m,false))}else{e.inFullScreen=false;e.ie11NativeIsFullscreen=false;e.fullScreenRequested=false;if(e.innerContainer.requestFullscreen){b.Event.removeDOMListener(document,"fullscreenchange",f,true)}else{if(e.innerContainer.webkitRequestFullscreen){b.Event.removeDOMListener(document,"webkitfullscreenchange",f,true)}else{if(e.innerContainer.mozRequestFullScreen){b.Event.removeDOMListener(document,"mozfullscreenchange",f,true)}else{if(e.innerContainer.msRequestFullscreen){b.Event.removeDOMListener(document,"MSFullscreenChange",f,true)}}}}e.innerContainer.style.left="0px";e.innerContainer.style.top="0px";e.innerContainer.style.width="";e.innerContainer.style.height="";e.invalidate(false);b.Util.css.setCSSAttributeSelector(e.obj,"mode","normal");b.Util.css.setCSSAttributeSelector(e.innerContainer,"mode","normal");var k=e.getWidth();var m=e.getHeight();var l=e.sizeSwitch(k,m);if(e.sizeMarker!=l){e.sizeMarker=l;e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,k,m,false))}e.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,e.getWidth(),e.getHeight(),false));if((e.innerContainer.requestFullscreen)||(e.innerContainer.webkitRequestFullscreen)||(e.innerContainer.mozRequestFullScreen)||(e.innerContainer.msRequestFullscreen)){b.Event.removeDOMListener(window,"focus",e.focusHandler,true)}}}if(this.innerContainer.requestFullscreen){b.Event.addDOMListener(document,"fullscreenchange",f,true);this.innerContainer.requestFullscreen()}else{if(this.innerContainer.webkitRequestFullscreen){b.Event.addDOMListener(document,"webkitfullscreenchange",f,true);this.innerContainer.webkitRequestFullscreen()}else{if(this.innerContainer.mozRequestFullScreen){b.Event.addDOMListener(document,"mozfullscreenchange",f,true);this.innerContainer.mozRequestFullScreen()}else{if(this.innerContainer.msRequestFullscreen){b.Event.addDOMListener(document,"MSFullscreenChange",f,true);this.innerContainer.msRequestFullscreen()}}}}if((this.innerContainer.requestFullscreen)||(this.innerContainer.webkitRequestFullscreen)||(this.innerContainer.mozRequestFullScreen)||(this.innerContainer.msRequestFullscreen)){var j=this;j.firstFocusEnter=true;this.focusHandler=function(h){j.focusableElements=j.getFocusableElements();j.firstFocusableElement=j.focusableElements[0];j.lastFocusableElement=j.focusableElements[j.focusableElements.length-1];if((j.focusableElements.indexOf(j.lastFocus)!=-1)&&j.firstFocusEnter){h.stopPropagation();j.lastFocus.focus();j.firstFocusEnter=null}else{if(j.inFullScreen&&((h.target===h.target.window)||!j.obj.contains(h.target))){h.stopPropagation();j.firstFocusableElement.focus()}}};b.Event.addDOMListener(window,"focus",this.focusHandler,true)}}else{this.inFullScreen=true;if(b.browser.supportsTouch()){b.Event.addDOMListener(document.body,"touchmove",this.preventScroll,false)}this.storedPosition.scrollBody=document.body.style.overflow;this.storedPosition.scrollBodyX=document.body.style.overflowX;this.storedPosition.scrollBodyY=document.body.style.overflowY;var i=b.browser.device;c=b.browser.detectScreen().w;g=b.browser.detectScreen().h;if(!((i.name=="ipad"||i.name=="iphone")&&b.browser.device.version<9.2)){document.body.style.overflow="hidden"}this.moveToTopLeft(this.innerContainer);if((i.name=="ipad"||i.name=="iphone")&&b.browser.detectScreen().w==981){c-=1}this.resizeByWindow(c,g);var d=this.sizeSwitch(c,g);if(this.sizeMarker!=d){this.sizeMarker=d;this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.SIZE_MARKER_CHANGE,c,g,false))}this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,c,g,false));var j=this;j.firstFocusEnter=true;this.focusHandler=function(h){j.focusableElements=j.getFocusableElements();j.firstFocusableElement=j.focusableElements[0];j.lastFocusableElement=j.focusableElements[j.focusableElements.length-1];if((j.focusableElements.indexOf(j.lastFocus)!=-1)&&j.firstFocusEnter){h.stopPropagation();j.lastFocus.focus();j.firstFocusEnter=null}else{if(j.inFullScreen&&((h.target===h.target.window)||!j.obj.contains(h.target))){h.stopPropagation();j.firstFocusableElement.focus()}}};b.Event.addDOMListener(window,"focus",this.focusHandler,true)}}};b.common.Container.prototype.preventScroll=function(c){var c=c||window.event;b.Event.preventDefault(c)};b.common.Container.prototype.isMobile=function(){var c=navigator.userAgent.toLowerCase();return(c.match(/(iphone|ipod|ipad|android)/))};b.common.Container.prototype.moveToTopLeft=function(h){b.Util.css.setCSSAttributeSelector(h,"mode","fullscreen");var d=parseInt(b.Util.getStyle(h,"left"));var g=parseInt(b.Util.getStyle(h,"top"));d=b.Util.isNumber(d)?d:-parseInt(b.Util.getStyle(h,"right"));g=b.Util.isNumber(g)?g:-parseInt(b.Util.getStyle(h,"bottom"));d=b.Util.isNumber(d)?d:0;g=b.Util.isNumber(g)?g:0;var e=h.getBoundingClientRect();var c=e.left-d;var f=e.top-g;h.style.left=-c+"px";h.style.top=-f+"px"};b.common.Container.prototype.cancelFullScreen=function(){this.fullScreenRequested=false;if(this.isFullScreen()){this.innerContainer.style.width="";this.innerContainer.style.height="";b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.cancelFullScreen");this.inFullScreen=false;if(this.supportsNativeFullScreen()){if(document.exitFullscreen){document.exitFullscreen()}else{if(document.webkitExitFullscreen){document.webkitExitFullscreen()}else{if(document.mozCancelFullScreen){document.mozCancelFullScreen()}else{if(document.msExitFullscreen){document.msExitFullscreen()}}}}}else{if(b.browser.supportsTouch()){b.Event.removeDOMListener(document.body,"touchmove",this.preventScroll,false)}document.body.style.overflow=this.storedPosition.scrollBody;document.body.style.overflowX=this.storedPosition.scrollBodyX;document.body.style.overflowY=this.storedPosition.scrollBodyY;b.Util.css.setCSSAttributeSelector(this.obj,"mode","normal");b.Util.css.setCSSAttributeSelector(this.innerContainer,"mode","normal");this.innerContainer.style.left="";this.innerContainer.style.top="";this.invalidate(false);this.dispatchEvent(new b.event.ResizeEvent(b.event.ResizeEvent.FULLSCREEN_RESIZE,this.getWidth(),this.getHeight(),false));b.Event.removeDOMListener(window,"focus",self.focusHandler,true);this.lastFocus.focus()}}};b.common.Container.prototype.isFullScreen=function(){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.isFullScreen");var c=typeof(document.webkitIsFullScreen)!="undefined"?document.webkitIsFullScreen:document.mozFullScreen;if(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement){c=true}return(typeof c!="undefined"?c:this.inFullScreen)};b.common.Container.prototype.addEventListener=function(e,d,c){b.Logger.log(b.Logger.FINE,"s7sdk.common.Container.addEventListener - type: %0, handler: %1, useCapture: %2",e,d.toString().substring(0,d.toString().indexOf("(")),c);b.Base.prototype.addEventListener.apply(this,[e,d,c])};b.common.Container.prototype.getWidth=function(){var c=this.resW;if(typeof(c)=="undefined"||c<=0||this.obj.clientWidth!=c){this.onCheckSize(true);c=this.resW;this.restoreSizeFlags()}return c};b.common.Container.prototype.getHeight=function(){var c=this.resH;if(typeof(c)=="undefined"||c<=0||this.obj.clientHeight!=c){this.onCheckSize(true);c=this.resH;this.restoreSizeFlags()}return c};b.common.Container.prototype.isFixedSize=function(){return this.isFixedSize_};b.common.Container.prototype.isPopup=function(){return this.isPopup_};b.common.Container.prototype.setAspect=function(c){this.responsive.aspect=c;this.responsive.freeRatio=c==0;this.invalidate(false)};b.Container=b.common.Container;(function a(){var d=b.browser&&b.browser.name=="ie"&&b.browser.version.major>=10;var c=b.Util.css.createCssRuleText(".s7container",{width:"100%",height:"100%","-ms-touch-action":d?"none":"","touch-action":d?"none":""})+b.Util.css.createCssRuleText(".s7container .s7innercontainer",{position:"relative",left:"0px",top:"0px",width:"100%",height:"100%",border:"0px !important",margin:"0px !important",padding:"0px !important","max-width":"none !important","max-height":"none !important"})+b.Util.css.createCssRuleText(".s7container[mode='fullscreen']",{"z-index":"9900",overflow:"visible !important"})+b.Util.css.createCssRuleText(".s7container .s7innercontainer[mode='fullscreen']",{position:"absolute"})+(b.browser.device.name=="android"&&b.browser.raw.ua.match(/Android 4.0./i)?b.Util.css.createCssRuleText(".s7container .s7innercontainer[mode='normal']",{"z-index":"0"}):"")+b.Util.css.createCssRuleText(".s7supressminsize",{padding:"0px !important",border:"0px !important","min-width":"0px !important","min-height":"0px !important"});b.Util.css.addDefaultCSS(c,"Container")})()}})(s7getCurrentNameSpace());if(typeof(s7getClientLibsOverride)=="function"){delete s7getClientLibsOverride};