define("modules/live/components/live.scroll.bis",["jquery-full","base/base"],function(e,t){"use strict";var n={_screenSize:null,_prevHeaderPosition:"",init:function(){this._resizeHandler=this._resizeHandler.bind(this),this._subnavigationScrollHandler=this._subnavigationScrollHandler.bind(this),this._resetSubnavigationScrollHandler=this._resetSubnavigationScrollHandler.bind(this),this._setSubnavigationWidth=this._setSubnavigationWidth.bind(this),this.$doc=t.elements.getDocument(),this.$win=t.elements.getWindow(),this.$subnavigationContainer=e(".live_match_nav_v8_5_bis, .nav_team_person_tabs_bis_v8_5"),this.$subnavigation=e("#subnavigation-nav-wrapper"),this.$border=e("#subnavigation-nav-border"),this.$subnavigationShares=this.$subnavigationContainer.find(".live-match-nav__sharing"),this.$content=e(".col-content");if(this.$subnavigationContainer.length===0||this.$subnavigation.length===0)return;t.responsive.registerMainSizeFn(this._resizeHandler)},_resizeHandler:function(t){if(this._screenSize===t.size){t.size==="desktop"&&this._setSubnavigationWidth();return}switch(t.size){case"desktop":this._setSubnavigationWidth(),e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),e.subscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),e.publish("SCROLL_SUBNAVIGATION.NEW"),this.$win.off("scroll.subnavigation"),this.$win.on("scroll.subnavigation",function(){e.publish("SCROLL_SUBNAVIGATION.NEW")});break;case"tablet":this._resetSubnavigationWidth(),this.$win.off("scroll.subnavigation"),e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),this._resetSubnavigationScrollHandler();break;case"mobile":this._resetSubnavigationWidth(),this.$win.off("scroll.subnavigation"),e.unsubscribe("SCROLL_SUBNAVIGATION.NEW",this._subnavigationScrollHandler),this._resetSubnavigationWidth(),this._resetSubnavigationScrollHandler()}this._screenSize=t.size},_subnavigationScrollHandler:function(){var t=this.$doc.scrollTop(),n=parseInt(this.$subnavigationContainer.offset().top),r=e("#top").height(),i=e("#top").hasClass("headerhidden")?0:r,s=e("#top").hasClass("headerhidden")?n:n-r;t>=parseInt(s)+this.$subnavigationContainer.height()?(this.$subnavigation.css({top:i+"px"}),this.$border.css({top:i+"px"}),this.$subnavigationShares.length>0&&this.$subnavigationShares.css({top:i+"px"}),this.$subnavigation.hasClass("sticky")||(this.$content.css({paddingTop:this.$subnavigation.height()+this.$subnavigationShares.height()}),this.$subnavigation.addClass("sticky"),this.$border.addClass("sticky"))):this._resetSubnavigationScrollHandler()},_resetSubnavigationScrollHandler:function(){this.$subnavigation.hasClass("sticky")&&(this.$content.css({paddingTop:""}),this.$subnavigation.css({top:""}).removeClass("sticky"),this.$border.css({top:""}).removeClass("sticky"),this.$subnavigationShares.length>0&&this.$subnavigationShares.css({top:""}),this.$subnavigationContainer.css({paddingTop:""}))},_setSubnavigationWidth:function(){this.$subnavigation.css({"min-width":this.$content.width()+"px"})},_resetSubnavigationWidth:function(){this.$subnavigation.css({"min-width":""})}},r={init:function(){n.init()}};return r}),define("modules/live/components/live.subnavigationmenu.bis",["jquery-full","base/base","modules/live/components/live.Core","helpers/helpers"],function(e,t,n,r){"use strict";var i={_tabs:null,_TAB_NAMES:null,_defaultTabsPrioArray:null,_observable:null,_matchFeedId:null,_matchStatusId:null,_sportId:null,_isDefaultTabSet:!1,_url:null,_isUserCommentsActivated:!1,_isCommentsTabLoaded:!1,getTabsConfig:function(){var t={SUMMARY:"navtab_Summary",OLYMPICS_WIDGET:"navtab_Widget",MULTIPLEX_RESULTS:"navtab_TodayResults",LIVE_COMMENTS:"navtab_Comments",STATISTICS:"navtab_Statistics",FIS:"navtab_Fis",IBU:"navtab_IBU",EUROSPORT_PLAYER:"navtab_EurosportPlayer",TEAMS:"navtab_Teams",PLAYERS:"navtab_Players",BRACKET:"navtab_Bracket",START_GRID:"navtab_StartGrid",STANDING:"navtab_Standing",MATCH_RESULT:"navtab_MatchResult",USER_COMMENTS:"navtab_UserComments",CYCLING_POC_APP:"navtab_CyclingPoCApp"},s=[{tab:null,name:t.SUMMARY,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Summary")}},{tab:null,name:t.OLYMPICS_WIDGET,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:OlympicsWidget")}},{tab:null,name:t.MULTIPLEX_RESULTS,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:MultiplexResults")}},{tab:null,name:t.LIVE_COMMENTS,onAfterAjaxRequest:null},{tab:null,name:t.STATISTICS,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:TeamStats")}},{tab:null,name:t.FIS,onAfterAjaxRequest:null},{tab:null,name:t.IBU,onAfterAjaxRequest:null},{tab:null,name:t.EUROSPORT_PLAYER,onAfterAjaxRequest:function(t){var n=t.tab.getContent().getElem();e.publish("subnavigation.tabInit:EurosportPlayer",n)}},{tab:null,name:t.TEAMS,updateInterval:18e4,onAfterAjaxRequest:function(e){this._matchFeedId&&n.MatchHelper.isMatchLive(this._matchStatusId)&&setTimeout(function(){r.navTabs.resetAjax(e.tab.getContent().getElem()),e.tab.ajax.getData()},e.updateInterval)}},{tab:null,name:t.PLAYERS,onAfterAjaxRequest:null},{tab:null,name:t.BRACKET,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Brackets")}},{tab:null,name:t.START_GRID,onAfterAjaxRequest:null},{tab:null,name:t.STANDING,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:Brackets")}},{tab:null,name:t.MATCH_RESULT,onAfterAjaxRequest:null},{tab:null,name:t.USER_COMMENTS,onAfterAjaxRequest:function(){i._isCommentsTabLoaded||e.publish("subnavigation.tabInit:UserComments"),i._isCommentsTabLoaded=!0}},{tab:null,name:t.CYCLING_POC_APP,onAfterAjaxRequest:function(){e.publish("subnavigation.tabInit:CyclingPoCApp")}}],o={upcoming:[t.LIVE_COMMENTS,t.MULTIPLEX_RESULTS,t.SUMMARY,t.OLYMPICS_WIDGET,t.TEAMS,t.PLAYERS,t.MATCH_RESULT,t.FIS,t.IBU,t.BRACKET,t.STANDING,t.STATISTICS,t.USER_COMMENTS,t.START_GRID,t.EUROSPORT_PLAYER,t.CYCLING_POC_APP],live:[t.MULTIPLEX_RESULTS,t.LIVE_COMMENTS,t.OLYMPICS_WIDGET,t.FIS,t.IBU,t.MATCH_RESULT,t.STATISTICS,t.TEAMS,t.SUMMARY,t.PLAYERS,t.BRACKET,t.STANDING,t.START_GRID,t.USER_COMMENTS,t.EUROSPORT_PLAYER,t.CYCLING_POC_APP],cyclingPast:[t.MULTIPLEX_RESULTS,t.MATCH_RESULT,t.SUMMARY,t.STANDING,t.LIVE_COMMENTS,t.OLYMPICS_WIDGET,t.STATISTICS,t.FIS,t.IBU,t.TEAMS,t.PLAYERS,t.BRACKET,t.START_GRID,t.USER_COMMENTS,t.EUROSPORT_PLAYER,t.CYCLING_POC_APP],past:[t.LIVE_COMMENTS,t.MULTIPLEX_RESULTS,t.OLYMPICS_WIDGET,t.MATCH_RESULT,t.STATISTICS,t.FIS,t.IBU,t.TEAMS,t.PLAYERS,t.BRACKET,t.STANDING,t.START_GRID,t.SUMMARY,t.USER_COMMENTS,t.EUROSPORT_PLAYER,t.CYCLING_POC_APP]};return{TAB_NAMES:t,tabs:s,defaultTabPriorities:o}},initAvailableTabs:function(){var e=null;this._tabs=this._tabs.filter(function(t){return e=r.navTabs.getElements(t.name),e.length&&(t.tab=e[0]),t.tab!==null})},reflowTabs:function(){this._tabs=this._tabs.map(function(e){return e.tab=null,e}),this.initAvailableTabs(),this.initAjaxCallbacks(),this.initCommentsCount()},initAjaxCallbacks:function(){for(var e=0,t=this._tabs.length;e<t;e++)this._tabs[e].onAfterAjaxRequest&&this._tabs[e].tab.ajax&&this._tabs[e].tab.ajax.onAfterAjaxRequest(this._tabs[e].onAfterAjaxRequest.bind(this,this._tabs[e]))},subscribeToAdriaFeed:function(){var t=this;if(n.adria!==undefined)this._matchFeedId=n.adria.subscribe("match",function(e){t.setUpMatchInfo(e),t.setUpDefaultTab(),t.getTabsAjax(),t.checkFeedUnsubscribe(e)},function(n,r,i){if(i)return;var s=e("#subnavigation-nav-wrapper");t._matchStatusId=s.data("match-status-id"),t._sportId=s.data("match-sport-id"),t.setUpDefaultTab()});else{var r=e("#subnavigation-nav-wrapper");this._matchStatusId=r.data("match-status-id"),this._sportId=r.data("match-sport-id"),t.setUpDefaultTab()}},setUpMatchInfo:function(e){e!==null&&(this._matchStatusId=e[0].v[0].s,this._sportId=e[0].k._0)},checkFeedUnsubscribe:function(e){if(e===null){n.adria.unsubscribe("match",this._matchFeedId),this._matchFeedId=null;return}n.MatchHelper.isMatchFinished(this._matchStatusId)&&this._matchFeedId&&(n.adria.unsubscribe("match",this._matchFeedId),this._matchFeedId=null)},isHashValid:function(e){if(e==="")return!1;var t="navtab_"+e.slice(1);return this._tabs.some(function(e){return e.name.toLowerCase()===t.toLowerCase()})},setUpDefaultTab:function(){if(this._isDefaultTabSet||this.isHashValid(document.location.hash))return;var e=this,t="";n.MatchHelper.isMatchFinished(this._matchStatusId)?(t="past",this._sportId===18&&(t="cyclingPast")):n.MatchHelper.isMatchUpcoming(this._matchStatusId)?t="upcoming":n.MatchHelper.isMatchLive(this._matchStatusId)&&(t="live"),e._tabs=e._tabs.sort(function(n,r){return e._defaultTabsPrioArray[t].indexOf(n.name)-e._defaultTabsPrioArray[t].indexOf(r.name)}),e._tabs.length>0?(e._tabs[0].tab.activate(),e._isDefaultTabSet=!0):console.warn("live subnavigation: no tabs to filter and set up as default")},getTabsAjax:function(){var t=e("#subnavigation-nav-tabs"),n=this;e.get({url:t.parent().data("ajax-url"),success:function(i){var s,o,u=e(i).find("#subnavigation-nav-tabs"),a=t.find("li a"),f=u.find("li a");s=a.text(),o=f.text();if(s===o)return;var l=t.find(".active").data("tab-content-id");u.find('[data-tab-content-id="'+l+'"]').addClass("active"),t.html(u.html()),r.navTabs.reflow(),n.reflowTabs()}})},initCommentsCount:function(){typeof LF!="undefined"&&LF.CommentCount({replacer:function(e,n){e.innerHTML=n+" "+(n===0||n===1?t.storage.labels.get("6732"):t.storage.labels.get("6731"))}})},init:function(){var t=this.getTabsConfig();this._tabs=t.tabs,this._TAB_NAMES=t.TAB_NAMES,this._defaultTabsPrioArray=t.defaultTabPriorities,this.initAvailableTabs();if(this._tabs.length===0){console.warn("live.subnavigation: no tabs awvailable");return}this.initAjaxCallbacks(),this.subscribeToAdriaFeed(),this.initCommentsCount(),e.subscribe("subnavigation.reflow",this.reflowTabs.bind(this))}};return{init:function(){i.init()},reflow:function(){i.reflowTabs()},isCommentsTabLoaded:function(){return i._isCommentsTabLoaded}}}),define("modules/live/components/live.CyclingGraph.bis",["jquery-full","base/base"],function(e,t){"use strict";var n=t.elements.getWindow(),r;return r={$moduleContainer:null,$timeline:null,$container_ref:null,tl_data:null,data:null,labels:null,current:null,container:null,subArea1:null,subArea2:null,graph_area:null,xScale:null,yScale:null,tip:null,timeout_tooltip:null,touchTooltipHideTimeout:4e3,initData:function(){this.$moduleContainer=e(".livehero__content").eq(0),this.$timeline=this.$moduleContainer.find(".timeline");if(this.$timeline.length===0)return;this.tl_data=this.$timeline.data("data"),this.data=this.tl_data.infoData.points,this.labels=this.tl_data.labels},checkData:function(){return this.data===null||this.data.length===0?(this.$moduleContainer.addClass("livehero__content--no-graph"),!1):!0},checkGraphVisibility:function(){return this.$moduleContainer.find(".cycling-graph").is(":visible")},prepareData:function(){this.data[0].x>0&&this.data.unshift({x:0,y:this.data[0].y,type:2}),this.tl_data.infoData.length>0&&this.data[this.data.length-1].x<this.tl_data.infoData.length&&this.data.push({x:this.tl_data.infoData.length,y:this.data[this.data.length-1].y})},updateCurrentValue:function(e){e||(e=this.tl_data.infoData),this.current=e.finished?e.length:e.current},calcGraphArea:function(e){var t=this.$container_ref.height(),n=this.$container_ref.width(),r={screen:{left:60,right:20,top:40,bottom:5},tablet:{left:60,right:20,top:40,bottom:5},mobile:{left:45,right:10,top:1,bottom:5}},i;switch(e.size){case"desktop":i="screen";break;case"tablet":i="tablet";break;case"mobile":i="mobile"}this.graph_area={w:n,h:t,left:r[i].left,right:n-r[i].right,width:n-r[i].left-r[i].right,top:r[i].top,bottom:t-r[i].bottom,height:t-r[i].top-r[i].bottom}},updatePosition:function(e,t){var n=this.data[this.data.length-1].x;this.updateCurrentValue(t),t.finished?this.subArea1.attr({x:0,width:this.xScale(n),fill:"url(#graphFillGradient2)"}):(this.subArea1.transition().duration(1e3).ease("linear").attr("width",this.xScale(this.current)-this.graph_area.left),this.subArea2.transition().duration(1e3).ease("linear").attr({x:this.xScale(this.current)-this.graph_area.left,width:this.xScale(n-this.current)}))},addTooltipEvents:function(e,t){var n=this,r=t?"graph-popup graph-popup--white":"graph-popup";e.on("mouseenter",function(e){var t=n.graph_area.w-n.xScale(e.x)<=220;n.tip.direction(t?"w":"e").attr({"class":r+(t?" graph-popup--right":"")}).show(e,this)}).on("mouseleave",n.tip.hide).on("touchstart",function(e){var t=n.graph_area.w-n.xScale(e.x)<=220;n.tip.hide().direction(t?"w":"e").attr({"class":r+(t?" graph-popup--right":"")}).show(e,this),clearTimeout(n.timeout_tooltip),n.timeout_tooltip=setTimeout(function(){n.tip.hide()},n.touchTooltipHideTimeout)})},removeTooltipEvents:function(){this.svgG.selectAll(".shield, .dot").on("mouseenter",null).on("mouseleave",null).on("touchstart",null)},drawDotPoints:function(){var e=this.data.filter(function(e){return e.type===0&&e.description&&e.description.trim()}),t=this.data.filter(function(e){return e.type===1})[0],n=this.data.filter(function(e){return e.type===2})[0];e=e.slice(0);var r=[];e.map(function(e){if(r.some(function(t){return t.x===e.x}))return;e.x===t.x?(e.type=1,e.c="white"):e.x===n.x&&(e.type=2,e.c="white"),r.push(e)}),this.svgG.selectAll(".dot").data(r).enter().append("circle").attr({"class":"dot",cx:this.area.x(),cy:this.area.y(),r:3})},drawGraph:function(){var e=this;this.svgG=this.svg.append("g"),this.svgG.append("path").attr({"class":"area",fill:"url(#doubleGradient)",d:this.area(this.data)}),this.svgG.append("g").attr("transform",n.width()>900?"translate("+e.graph_area.left+",0)":"translate(40,-6)").attr("class","y axis").call(this.yAxis),this.drawGrid(),this.drawDotPoints(),this.svgG.call(e.tip)},drawGrid:function(){var e=this,t=function(){e.svgG.selectAll("line.horizontalGrid").data(e.axisValues).enter().append("line").attr({"class":"horizontalGrid",x1:e.graph_area.left,x2:e.graph_area.right,y1:function(t){return e.yScale(t)},y2:function(t){return e.yScale(t)}})},n=function(){var t=e.data.filter(function(e){return e.type>0}).map(function(e){return e.x});e.svgG.selectAll("line.verticalGrid").data(t).enter().append("line").attr({"class":"verticalGrid",y1:e.graph_area.top,y2:e.graph_area.bottom,x1:function(t){return e.xScale(t)},x2:function(t){return e.xScale(t)}})};t(),n()},initAxisValues:function(e){var t=this,n,r=null,i=[{key:500,value:100},{key:1e3,value:250},{key:2500,value:500},{key:5e3,value:1e3},{key:9999,value:2e3}];this.domainX=this.data[this.data.length-1].x,this.domainY=e.max(this.data,function(e){return e.y});for(n=0;n<i.length;n++)if(this.domainY<i[n].key){r=i[n].value;break}r===null&&(r=e.max(i,function(e){return e.value})),this.axisValues=[0],this.domainY<500&&(this.domainY=this.domainY*3);while(this.domainY>=this.axisValues[this.axisValues.length-1])this.axisValues.push(this.axisValues[this.axisValues.length-1]+r);this.domainY=this.axisValues[this.axisValues.length-1]},initScale:function(e){this.xScale=e.scale.linear().domain([0,this.domainX]).range([this.graph_area.left,this.graph_area.right]),this.yScale=e.scale.linear().domain([this.domainY,0]).range([this.graph_area.top,this.graph_area.bottom])},initTipHTML:function(t){function r(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}var n=this,i={0:{s:" ",c:"graph-popup--white"},1:{s:" ",c:"graph-popup--white"},2:{s:" ",c:"graph-popup--white"},4:{s:"S",c:"graph-popup--green"},8:{s:"HC",c:"graph-popup--red"},16:{s:"1",c:"graph-popup--red"},32:{s:"2",c:"graph-popup--red"},64:{s:"3",c:"graph-popup--red"},128:{s:"4",c:"graph-popup--red"},256:{s:"F",c:"graph-popup--blue"}};this.tip=t.tip().attr("class","graph-popup").html(function(t){var s=i[t.type].s,o="";isNaN(s)||(s=n.labels["cat."]+" "+s),s==="F"&&n.tl_data.graph_picto_feed_custom&&(s='<img src="'+n.tl_data.graph_picto_feed_custom+'"/>');if(i[t.type].c=="graph-popup--white"){switch(t.type){case 0:s=n.tl_data.graph_icon_info;break;case 1:s=n.tl_data.graph_icon_start;break;case 2:s=n.tl_data.graph_icon_finish}o='<img src="'+s+'"/>'}var u='<div class="graph-popup__symbol">'+(o?o:s)+"</div>"+'<div class="graph-popup__content">'+'<div class="graph-popup__caption">'+(t.description&&t.description.trim()||t.text)+"</div>"+'<div class="graph-popup__name">'+n.labels.height+'</div><div class="graph-popup__value">'+t.a+"m</div>"+'<div class="graph-popup__name">'+n.labels.length+"</div>"+'<div class="graph-popup__value">'+r(n.tl_data.infoData.length-t.x,2)+"km</div>"+"</div>"+'<div class="graph-popup__arrow"></div>';return e(".graph-popup").removeClass("graph-popup--red graph-popup--blue graph-popup--green").addClass(i[t.type].c),u})},startD3:function(e){var t=this,n,r,i,s;this.container=e.select(".cycling-graph .container"),this.subArea1=e.select("#subArea1"),this.subArea2=e.select("#subArea2"),this.updateCurrentValue(),this.initAxisValues(e),this.initScale(e),this.svg=this.container.select("svg"),this.svg.datum(this.data).attr({width:this.graph_area.w,height:this.graph_area.h}),this.updatePosition(null,this.tl_data.infoData);var o=e.svg.area().x(function(e){return t.xScale(e.x)}).y1(function(e){return t.yScale(e.y)}).y0(this.graph_area.h-5);this.area=o,this.yAxis=e.svg.axis().scale(this.yScale).orient("left").tickValues(this.axisValues).tickFormat(function(e){return e+"m"}),this.initTipHTML(e),this.drawGraph(),this.types=[{id:4,size:23,icon:this.tl_data.graph_picto_s,css_id:1},{id:8,size:29,icon:this.tl_data.graph_picto_hc,css_id:9},{id:16,size:23,icon:this.tl_data.graph_picto_1,css_id:4},{id:32,size:23,icon:this.tl_data.graph_picto_2,css_id:5},{id:64,size:23,icon:this.tl_data.graph_picto_3,css_id:6},{id:128,size:23,icon:this.tl_data.graph_picto_4,css_id:7},{id:256,size:23,icon:this.tl_data.graph_picto_feed,css_id:8}];for(n=0;n<this.types.length;n++)r=this.types[n],i="shield shield"+r.css_id,s=this.svgG.selectAll("."+i).data(this.data.filter(function(e){return e.type==r.id})).enter().append("g").attr({"class":i,cx:o.x(),cy:o.y()}).append("image").attr({"xlink:href":r.icon,width:r.size,height:29,x:o.x(),y:o.y(),transform:"translate(-"+r.size/2+", -24)"})},initEvent:function(n){var r=this,i=function(e){var t,i;r.xScale.range([r.graph_area.left,r.graph_area.right]),r.svg.datum(r.data).attr({width:r.graph_area.w}),n.select(".area").attr("d",r.area(r.data)),r.subArea1.attr("width",r.xScale(r.current)-r.graph_area.left),r.subArea2.attr({x:r.xScale(r.current)-r.graph_area.left,width:r.xScale(r.domainX-r.current)}),r.svgG.select(".axis.y").attr("transform",e.size==="desktop"||e.size==="tablet"?"translate("+r.graph_area.left+",0)":"translate(48,-6)"),r.svgG.selectAll("line.horizontalGrid").attr({x1:r.graph_area.left,x2:r.graph_area.right}),r.svgG.selectAll("line.verticalGrid").attr({x1:function(e){return r.xScale(e)},x2:function(e){return r.xScale(e)}}),r.svgG.selectAll(".dot").attr({cx:r.area.x()});for(t=0;t<r.types.length;t++)i=r.types[t],r.svgG.selectAll(".shield.shield"+i.css_id).attr({cx:r.area.x()}).select("image").attr({x:r.area.x()});e.size==="mobile"?r.removeTooltipEvents():(r.addTooltipEvents(r.svgG.selectAll(".shield")),r.addTooltipEvents(r.svgG.selectAll(".dot").filter(function(e){return e.description&&e.type==0||e.type==1||e.type==2}),!0))};t.responsive.registerMainSizeFn(i),e.subscribe("updateTimelinePosition",function(e,t){r.updatePosition(null,t)})},init:function(){var e=this;e.initData();if(!e.checkData()||!e.checkGraphVisibility())return;require(["libs/d3","libs/d3-tip"],function(n,r){n.tip=r,e.prepareData(),e.$container_ref=e.$moduleContainer.find(".container"),t.responsive.registerMainSizeFn(e.calcGraphArea.bind(e)),e.startD3(n),e.initEvent(n)})}},r}),define("modules/live/components/live.StandingsHeader",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore","modules/live/components/live.Match"],function(e,t,n,r,i,s){"use strict";function o(t){s.call(this,t),this.options=e.extend({target:null},t),this._initObservable(),this._initListeners(),this._initViewModel(),this._liveUpdate=!0,this._prevStandings=[],this._matchFeedId=n.adria.subscribe("match",e.proxy(this._onMatchData,this),e.proxy(this._onMatchDataError,this))}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype._onMatchData=function(e,t){this._adriaData=e,this._namesObject=t,s.prototype._onMatchData.call(this,e)},o.prototype._initObservable=function(){var t=+e("#"+this.options.target).find(".race-standings").data("items-per-column");i.extend(this.observable,{isLive:r.observable(),status:r.observable(),minute:r.observable(),standingsAvailable:r.observable(!1),standings:r.observableArray([]),page:r.observable(0),mediaScreenType:r.observable(),nextPage:function(){var e=this.totalPages(),t=this.page();e>t&&this.page(t+1)},prevPage:function(){var e=this.page();e>0&&this.page(e-1)},itemsPerColumn:t>0?t:5}),this.observable.displayItems=r.pureComputed(function(){var e=this.observable.mediaScreenType()==="mobile"?1:2;return this.observable.itemsPerColumn*e},this),this.observable.displayStandings=r.pureComputed(function(){return this.observable.standings().slice(this.observable.page()*this.observable.displayItems(),(this.observable.page()+1)*this.observable.displayItems())},this),this.observable.totalPages=r.pureComputed(function(){return Math.ceil(this.observable.standings().length/this.observable.displayItems()-1)},this),this.observable.isLastPage=r.pureComputed(function(){return this.observable.page()===this.observable.totalPages()},this)},o.prototype._initListeners=function(){var e=this;t.responsive.registerMainSizeFn(function(t){e.observable.mediaScreenType(t.size)})},o.prototype._onMatchDataError=function(t,n,r){if(r)return;var i=e("#subnavigation-nav-wrapper").length&&e("#subnavigation-nav-wrapper").data("match-status-id");i?(this.observable.status(this.statuses[i]),this.observable.isLoaded(!0),console.log(t+" feed error, match status taken from subnav")):console.log(t+" feed error, match status is unknown")},o.prototype._parseResponse=function(){this.observable.status(this._getMatchStatus()),this.observable.isLive(this._isLive()),this._prevStandings=this.observable.standings();if(this._isLive()){var e=this._parseStandings();this.observable.standings(e),this.observable.standingsAvailable(this.observable.isLive()&&e&&e.length>0)}},o.prototype._parseStandings=function(){var e=this,t=this._adriaData[0].v,n=this._namesObject,r=[];try{var s=t[0].r.c,o=s[0].t.__==1,u=n.filter(function(e){return e.k===1}),a=n.filter(function(e){return e.k===2}),f=n.filter(function(e){return e.k===8}),l=o?u[0].v.reduce(function(e,t){return e[t._]=t,e},{}):[],c=[],h=[];a.length>0&&a[0].hasOwnProperty("v")&&(c=a[0].v.reduce(function(e,t){return e[t._]=t,e},{})),f.length>0&&f[0].hasOwnProperty("v")&&(h=f[0].v.reduce(function(e,t){return e[t._]=t,e},{})),r=s.map(function(t){var n="",r=l[t.t._];return o?n=r&&r.n&&r.n.split(" ").reduce(function(e,t,n){return n===0?t[0]+". ":e+" "+t},""):n=c[t.t._].n,{p:t.p,l:t.l,_:o?i.extend(l[t.t._],{ns:n}):i.extend(c[t.t._],{ns:n}),_2:o?c[t.t._2]!==undefined?c[t.t._2]:{n:""}:{n:""},_8:h[t.t._8]!==undefined?h[t.t._8]:{m:""},i:t.i,pp:e._getPositionDiff(t)}})}catch(p){console.error("Adria parse error: ",p)}return r},o.prototype._getPositionDiff=function(e){var t=this._prevStandings.filter(function(t){return t._._===e.t._});return this._prevStandings.length&&t.length?!t[0].p||t[0].p===999?0:t[0].p!==e.p?t[0].p-e.p:0:0};var u={init:function(){if(typeof n.adria!="undefined"){var t=e(".race-standings");t.length&&new o({target:"livehero__content"})}}},a={init:function(){u.init()},constructorFunc:o};return a}),define("modules/live/components/live.Pelotons.bis",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s,o,u,a,f={setOptions:function(e){this.options={target:e.target,initialData:e.initialData,ajaxURL:e.ajaxURL,ajaxCheckURL:e.ajaxCheckURL,status:e.status,localization:e.localization}},initPelotonData:function(n){this.setOptions(n),this.GROUP_CONFIG={},this.GROUP_CONFIG[a.HEAD]={name:n.localization.head,maxBicycles:5},this.GROUP_CONFIG[a.PELOTON]={name:n.localization.peloton,maxBicycles:7},this.GROUP_CONFIG[a.PURSUERS]={name:n.localization.pursuers,maxBicycles:5},this.pelotonUpdateInterval=null,this.resultsGetInterval=null,this.$peloton=e("#peloton"),this.$pelotonStandings=null,this.$draggable=this.$peloton.find(".groups"),this.$arrows=this.$peloton.find(".arrow"),this.popupEnabled=!1,this._initObservable(this.options.initialData),t.responsive.registerMainSizeFn(this._resizeHandler.bind(this)),this._initDraggable()},_initObservable:function(t){var n=this._parseData(t.differences),s=this;this.observable={status:r.observable(this.options.status),groups:r.observableArray(n),groupsWidth:r.observable(0),containerWidth:r.observable(this.$peloton.width()),offsetLeft:r.observable(0)},this.observable.isScrollable=r.pureComputed(function(){return this.groupsWidth()>this.containerWidth()},this.observable),this.observable.draggableOffset=r.computed(function(){var e=this.offsetLeft();if(!this.isScrollable())return 0;if(e>=50)return this.offsetLeft(50),50;var t=this.maxLeft();return e<=t?(this.offsetLeft(t),t):e},this.observable),this.observable.maxLeft=r.pureComputed(function(){return this.containerWidth()-this.groupsWidth()-50},this.observable),this.observable.arrowLeftDisabled=r.pureComputed(function(){return!this.isScrollable()||this.draggableOffset()>=50},this.observable),this.observable.arrowRightDisabled=r.pureComputed(function(){return!this.isScrollable()||this.draggableOffset()<=-this.groupsWidth()+this.containerWidth()-50},this.observable),document.getElementById(this.options.target)&&r.applyBindings(this.observable,document.getElementById(this.options.target)),this.observable.status()!=="past"&&(this.pelotonUpdateInterval=setInterval(i.bind(this._requestData,this),3e4),e.subscribe("subnavigation.tabInit:Brackets",function(){s.$pelotonStandings=e("#peloton-standings"),s.$pelotonStandings.length&&r.applyBindings(s.observable,s.$pelotonStandings[0])}))},_initDraggable:function(){var t=this;this.$arrows.off("click"),this.$arrows.on("click",function(n){var r=e(n.currentTarget).hasClass("arrow-left")?1:-1;if(t.observable.arrowLeftDisabled()&&r===1)return!1;if(t.observable.arrowRightDisabled()&&r===-1)return!1;t.observable.offsetLeft(t.observable.offsetLeft()+(r!==1?-200:200))}),this.$draggable.draggable({axis:"x",drag:function(e,n){if(!t.observable.isScrollable())return!1;t.observable.offsetLeft(n.position.left),n.position.left=t.observable.draggableOffset()}})},_initTooltipster:function(){i.each(this.$draggable.find(".group"),function(t){var n=e(t),r=n.data("index"),o=this.observable.groups()[r],u=this._getEventSettings(o.eventId),a={info:[],scrollClass:o.cyclists.length>5?"scroll":"",listHeader:o.isPeloton?this.options.localization.others:o.cyclists.length+" "+(o.cyclists.length>1?this.options.localization.cyclists:this.options.localization.cyclist)};o.deficit&&a.info.push({label:this.options.localization.timeGap,value:this._formatPopupDuration(o.deficit,!1)});var f=this._calculateTimeAdvance(o);f<0&&a.info.push({label:this.options.localization.timeAdvance,value:this._formatPopupDuration(f,!1)}),o.attack&&a.info.push({label:this.options.localization.attack,value:(o.attack/1e3).toFixed()+" km"}),a.cyclists=i.map(o.cyclists,function(e){return{imgSrc:e.isgpicture?e.isgpicture.medium:"",name:e.firstname[0]+"."+e.lastname,countryFlag:e.countryflag,team:e.team,icons:e.icons,playerLink:e.playerlink,teamLink:e.teamlink}},this),o.total&&n.tooltipster({trigger:"click",content:s(a),contentAsHTML:!0,theme:"tooltipster-shadow",interactive:!0,position:"top",offsetX:-60,offsetY:-2})},this)},_destroyTooltipster:function(){this.$draggable.find(".group").tooltipster("destroy")},_getGroupsWidth:function(){return this.$draggable.width()},_resizeHandler:function(e){e&&(e.size!=="mobile"&&!this.popupEnabled?(this._initTooltipster(),this.popupEnabled=!0):e.size==="mobile"&&this.popupEnabled&&(this._destroyTooltipster(),this.popupEnabled=!1)),this.observable.groupsWidth(this._getGroupsWidth()),this.observable.containerWidth(this.$peloton.width()),this.observable.offsetLeft(this.observable.maxLeft())},_parseData:function(e){var t=[],n=0;i.each(e,function(e,r){var s={eventId:e.eventid||-1,name:"",isFirst:!1,leaderJacket:!1,bicycles:[],cyclists:[],leader:"",total:0,rest:"",time:"",deficit:r>0?e.deficit:0,attack:e.attack,number:e.number,isPeloton:e.number==0,including:"",diff:0},f=this._getGroupType(s.number,r),l=this._getEventSettings(e.eventid),c=this.GROUP_CONFIG[f];s.name=c.name,f==a.PURSUERS&&(n+=1,s.name+=n>1?" "+n:""),s.isFirst=r==0,s.leaderJacket=e.generalleader&&i.indexOf(i.keys(u),e.eventid.toString())>=0?"icon-font-"+l.bicycles.generalleader:"";var h=i.filter(e.players,function(e){return e.generalleader})[0]||i.first(e.players);s.leader=h&&!s.isPeloton?h.firstname+" "+h.lastname:"",s.total=e.players.length,s.total>0&&(s.rest=s.isPeloton?this.options.localization.others:s.total>1?s.total+" "+this.options.localization.cyclists:""),s.leaderJacket&&l.leaderGroupName&&(!s.isFirst||s.isPeloton)&&s.total>1&&(s.name=l.leaderGroupName),s.including=s.total>1?this.options.localization.including+" ":"";var p=this._getGroupIcons(e),d=[];p.generalleader&&d.push(l.bicycles.generalleader),p.pointsleader&&d.push(l.bicycles.pointsleader),p.mountainleader&&d.push(l.bicycles.mountainleader),p.youngestleader&&d.push(l.bicycles.youngestleader);if(s.isPeloton){var v=[],m=d.length==1?2:0;for(var g=0;g<c.maxBicycles;g++)if(g==m||g%2==0&&g!=0){var y=d.shift();y?v.push(y):v.push(o.GREY)}else v.push(o.GREY);d=v}else{var b=s.total>c.maxBicycles?c.maxBicycles:s.total;d.length==1&&s.total>1&&d.unshift(o.GREY);var w=b-d.length;for(var E=0;E<w;E++)d.push(o.GREY)}d.reverse(),s.bicycles=d,s.cyclists=e.players.map(function(e){var t=[];return e.generalleader&&l.jackets.generalleader&&t.push("jacket-icon "+l.jackets.generalleader),e.pointsleader&&l.jackets.pointsleader&&t.push("jacket-icon "+l.jackets.pointsleader),e.mountainleader&&l.jackets.mountainleader&&t.push("jacket-icon "+l.jackets.mountainleader),e.youngestleader&&l.jackets.youngestleader&&t.push("jacket-icon "+l.jackets.youngestleader),e.icons=t,e}),t.push(s)},this);if(t.length==1){var r=i.first(t),s=this.GROUP_CONFIG[a.PELOTON].maxBicycles,f=s-r.bicycles.length;if(f)for(var l=0;l<f;l++)r.bicycles.unshift(o.GREY)}t.reverse();if(t.length){var c=i.last(t).number;i.each(t,function(e){var t=0,n=e.number;if(e.isFirst||e.deficit===0)return;e.diff=e.deficit,e.diff&&(e.time=this._formatDuration(e.diff))},this)}return t},_padNumber:function(e,t){var n=t-e.toString().length+1;return Array(+(n>0&&n)).join("0")+e},_formatDuration:function(e){var t=new Date(e);return"+"+this._padNumber(t.getUTCHours(),2)+":"+this._padNumber(t.getUTCMinutes(),2)+"'"+this._padNumber(t.getUTCSeconds(),2)+'"'},_formatPopupDuration:function(e,t){var n="";t&&(e<0?n+="-":e>0&&(n+="+"));var r=Math.abs(e)/1e3,i=Math.floor(r/60),s=r-i*60;return i&&(n+=i+"min "),s&&(n+=s+"s"),n},_calculateTimeGap:function(e){var t=0,n=this.observable.groups(),r=i.last(n).number,s=e.number;if(r!=s){var o=i.filter(n,function(e){return e.number<=s},this),u=i.pluck(o,"deficit");t=i.reduce(u,function(e,t){return e+t},0)}return t},_calculateTimeAdvance:function(e){var t=0,n=this.observable.groups(),r=e.number,s=[];r<0?(s=i.filter(n,function(e){return e.number>r&&e.number<=0},this),t=-1):r>0&&(s=i.filter(n,function(e){return e.number<=r&&e.number>0},this),t=1);var o=i.pluck(s,"diff"),u=i.reduce(o,function(e,t){return e+t},0);return u*t},_getEventSettings:function(e){switch(e){case 703:u[703].leaderGroupName=this.options.localization.yellowGroup;break;case 704:u[704].leaderGroupName=this.options.localization.pinkGroup;break;case 740:u[740].leaderGroupName=this.options.localization.redGroup;break;default:u["-1"].leaderGroupName=""}return u[e]||u["-1"]},_getGroupType:function(e,t){return e==0?a.PELOTON:t==0?a.HEAD:a.PURSUERS},_getGroupIcons:function(e){var t={generalleader:!1,pointsleader:!1,mountainleader:!1,youngestleader:!1};return i.each(e.players,function(e){e.generalleader?t.generalleader=!0:e.pointsleader?t.pointsleader=!0:e.mountainleader?t.mountainleader=!0:e.youngestleader&&(t.youngestleader=!0)},this),t},_requestData:function(){var t=this.options.ajaxURL;e.ajax({type:"GET",url:t,dataType:"json",success:i.bind(this._success,this),error:i.bind(this._error,this)})},_success:function(e){var n=this.observable.status();e&&e.differences&&e.differences.length?(this.observable.groups(this._parseData(e.differences)),t.responsive.getMainSize()!=="mobile"&&this._initTooltipster()):n=="live"&&(clearInterval(this.pelotonUpdateInterval),this.resultsGetInterval=setInterval(i.bind(this._requestResults,this),3e4)),this.observable.groupsWidth(this._getGroupsWidth())},_error:function(){},_requestResults:function(){var t=this.options.ajaxCheckURL;e.ajax({type:"GET",url:t,success:i.bind(this._requestResultsSuccess,this),error:i.bind(this._requestResultsError,this)})},_requestResultsSuccess:function(e){e&&(clearInterval(this.resultsGetInterval),location.reload())},_requestResultsError:function(){},initVariables:function(){s=i.template("<div class='peloton-popup'><% if (info.length) { %><div class='info'><% for (var i = 0; i < info.length; i++) { %><div class='info-row'><span><%- info[i].label %>:</span><span class='value'><%- info[i].value %></span></div><% } %></div><% } %><div class='numberInGroup'><%- listHeader %>:</div><ul class='cyclists <%= scrollClass %>'><% for (var i = 0; i < cyclists.length; i++) { %><li class='cyclist'><div class='photo'><img src='<%= cyclists[i].countryFlag %>' class='photo-image'/></div><div class='description'><div class='name'><a href='<%= cyclists[i].playerLink %>'><%- cyclists[i].name %></a></div><div class='team'><a href='<%= cyclists[i].teamLink %>'><%- cyclists[i].team %></a></div></div><div class='jackets'><% for (var j = 0; j < cyclists[i].icons.length; j++) { %><span class='<%= cyclists[i].icons[j] %>'></span><% } %></div></li><% } %></ul></div>"),o={GREY:"bicycle--grey",YELLOW:"bicycle--yellow",WHITE:"bicycle--white",PINK:"bicycle--pink",RED:"bicycle--red",GREEN:"bicycle--green",BLUE:"bicycle--blue",RED_DOTTED:"bicycle--red-dotted",BLUE_DOTTED:"bicycle--blue-dotted"},u={703:{bicycles:{generalleader:o.YELLOW,pointsleader:o.GREEN,mountainleader:o.RED_DOTTED,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-yellow",pointsleader:"icon-solid icon-font-green",mountainleader:"icon-dotted icon-font-red",youngestleader:"icon-solid icon-font-white"}},704:{bicycles:{generalleader:o.PINK,pointsleader:o.RED,mountainleader:o.BLUE,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-pink",pointsleader:"icon-solid icon-font-red",mountainleader:"icon-dotted icon-font-blue",youngestleader:"icon-solid icon-font-white"}},740:{bicycles:{generalleader:o.RED,pointsleader:o.GREEN,mountainleader:o.BLUE_DOTTED,youngestleader:o.WHITE},jackets:{generalleader:"icon-solid icon-font-red",pointsleader:"icon-solid icon-font-green",mountainleader:"icon-dotted icon-font-blue",youngestleader:"icon-solid icon-font-white"}},"-1":{bicycles:{generalleader:o.YELLOW,pointsleader:o.GREY,mountainleader:o.GREY,youngestleader:o.GREY},jackets:{generalleader:"icon-solid icon-font-yellow",pointsleader:"",mountainleader:"",youngestleader:""}}},a={HEAD:"head",PELOTON:"peloton",PURSUERS:"pursuers"}},init:function(){this.initVariables();var t=e("#peloton");this.initPelotonData({target:"race-info",initialData:t.data("data"),ajaxURL:t.data("ajaxurl"),ajaxCheckURL:t.data("ajaxcheckurl"),status:t.data("status"),localization:t.data("localization")})}},l={init:function(){f.init()}};return l}),define("modules/live/components/live.Timeline.bis",["jquery-full","base/base","underscore"],function(e,t,n){"use strict";var r=null,i={},s=null,o=null,u=null,a=null,f=null,l={initVariables:function(){r=Date.now(),i.timeline=e(".timeline"),i=n.extend(i,{timelineStart:i.timeline.find(".timeline__axis-start"),timelineEnd:i.timeline.find(".timeline__axis-end"),timelineInfo:i.timeline.find(".timeline__axis"),totalBar:i.timeline.find(".timeline__total-bar"),elapsed:i.timeline.find(".timeline__elapsed-bar"),currentPosition:i.timeline.find(".timeline__current-dot")}),s=i.timeline.data("data"),o=20,u=15e3,f={start:s.infoData.start,distance:s.infoData.length,finished:s.infoData.finished,live:s.infoData.live}},init:function(){this.initVariables(),this.generateDots(),t.responsive.registerMainSizeFn(this.setEventDotVisibility.bind(this)),i.timelineEnd.find("span").html(f.distance),f.finished?(this.endRace(),i.timeline.hasClass("timeline--hidden")||i.timeline.addClass("timeline--hidden")):(this.updateTimeline(null,{current:s.infoData.current,elapsed:s.infoData.elapsed}),f.live?(i.timeline.removeClass("timeline--hidden"),this.startRace()):setTimeout(function(){this.startRace()}.bind(this),f.start-r+u))},generateDots:function(){n.each(s.infoData.points,function(t){var n,r;if(t.type==1||t.type>3)n=t.x/s.infoData.length*100,r=e('<div class="timeline__event-dot" data-pointx="'+t.x+'"><span class="distance">'+t.x+"</span></div>").css("left",n+"%").appendTo(i.timelineInfo)})},setEventDotVisibility:function(){i.timelineStart.show(),i.timelineEnd.show(),i.timelineInfo.find(".timeline__event-dot").each(function(){var t=e(this),n=t.prev(".timeline__event-dot"),r=t.position().left;n.length&&r-n.position().left<15||r<i.timelineStart.width()+10||r>i.timelineInfo.width()-i.timelineEnd.width()-10?t.addClass("covered"):t.removeClass("covered")})},startRace:function(){i.currentPosition.length||(i.currentPosition=e('<span class="timeline__current-dot"><span class="distance"></span></span>').appendTo(i.timelineInfo)),i.currentPosition.show();var t=this;a=setInterval(function(){e.getJSON(s.ajaxURL,function(n){if(n.finished){l.endRace();return}e.publish("updateTimelinePosition",[n]),t.updateTimeline(null,n)})},u)},updateTimeline:function(t,n){var r=n.current/f.distance*100,s=i.timelineInfo.width();if(n.elapsed>0&&n.current>0){var o=Math.floor(n.current/(n.elapsed/36e5)),u=Math.floor(f.start+n.elapsed+(f.distance-n.current)/o*60*60*1e3);u?i.currentPosition.find(".distance").text(n.current+"km").show():i.currentPosition.find(".distance").hide()}r>=90&&i.currentPosition.find(".distance").animate({"margin-left":-i.currentPosition.find(".distance").width()/2},700),r>=95&&i.timelineEnd.hide(),i.timelineInfo.find(".timeline__event-dot").each(function(){var t=e(this),n=s*(r/100);t.position().left>n-20&&t.position().left<n+20&&t.find(".distance").hide()}),i.elapsed.finish().animate({width:r+"%"},1e3,"linear"),i.currentPosition.finish().animate({left:r+"%"},1e3,"linear",function(){i.timelineInfo.find(".timeline__event-dot").each(function(){var t=e(this);t.position().left<i.currentPosition.position().left-20&&t.find(".distance").show()})})},endRace:function(){clearInterval(a),i.elapsed.css("width","100%"),i.currentPosition.hide()}},c={init:function(){l.init()}};return c}),define("modules/live/sport-cycling.bis",["modules/live/components/live.CyclingGraph.bis","modules/live/components/live.StandingsHeader","modules/live/components/live.FocalPoint","modules/live/components/live.Pelotons.bis","modules/live/components/live.Timeline.bis"],function(e,t,n,r,i){"use strict";return{init:function(){e.init(),t.init(),n.init(),r.init(),i.init()}}}),define("modules/live/components/live.FootballMatch",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore","modules/live/components/live.Match"],function(e,t,n,r,i,s){"use strict";function o(t){s.call(this,t),this.options=e.extend({target:null,picture:""},t),this.items=null,this.actionTypes={7:{name:"penaltyGoal"},9:{name:"ownGoal"},10:{name:"goal"},11:{name:"yellowCard"},12:{name:"redCard"},8:{name:"substitutionIn"},14:{name:"substitutionOut"},16:{name:"tries"},18:{name:"transformations"},22:{name:"penalties"},19:{name:"drops"},15:{name:"penaltyTries"},101:{name:"quarter1"},102:{name:"quarter2"},103:{name:"quarter3"},104:{name:"quarter4"}},this.sportSettings={22:{periods:[{minutes:45,axisPoint:0,range:[0,45]},{minutes:45,axisPoint:45,range:[46,90]},{minutes:30,axisPoint:90,range:[91,120]}],minPeriods:2,totalMinutes:{min:90,max:120},statuses:{2:1,3:2,4:2,6:3,7:3},goals:[7,10],ownGoals:[9],penalty:[7],redCard:[12]},44:{periods:[{minutes:40,axisPoint:0,range:[0,40]},{minutes:40,axisPoint:40,range:[41,80]}],minPeriods:2,totalMinutes:{min:80,max:80},statuses:{2:1,3:1,4:2,6:3,7:3},goals:[16,19,22,15],ownGoals:[],cards:[]},8:{goals:[101,102,103,104]}},this._localization=t.localization,this._initObservable(),this._initViewModel(),this._liveUpdate=!0,this._matchFeedId=n.adria.subscribe("match",e.proxy(this._onMatchData,this),e.proxy(this._onMatchDataError,this))}o.prototype=Object.create(s.prototype),o.prototype.constructor=o,o.prototype.getSportSettings=function(){return this.sportSettings[this.sportId]||this.sportSettings[22]},o.prototype._initObservable=function(){var e=this;i.extend(this.observable,{status:r.observable(),minute:r.observable(),scoreHome:r.observable(),scoreAway:r.observable(),scorersHome:r.observableArray([]),scorersAway:r.observableArray([]),cardsHome:r.observable({redCard:{total:0,data:[]}}),cardsAway:r.observable({redCard:{total:0,data:[]}}),groupedActionsHomeRugby:r.observable({penalties:{total:0,data:[]},drops:{total:0,data:[]},transformations:{total:0,data:[]},tries:{total:0,data:[]}}),groupedActionsAwayRugby:r.observable({penalties:{total:0,data:[]},drops:{total:0,data:[]},transformations:{total:0,data:[]},tries:{total:0,data:[]}}),groupedActionsHomeBasket:r.observable({quarter1:0,quarter2:0,quarter3:0,quarter4:0}),groupedActionsAwayBasket:r.observable({quarter1:0,quarter2:0,quarter3:0,quarter4:0}),progressBarPoints:r.observableArray([]),isLoaded:r.observable(!1)}),this.observable.liveHeroCSS=r.computed(function(){var t=[e.observable.status()];return t.join(" ")}),this.observable.matchStatusCSS=r.computed(function(){return e.observable.status(),"heromatch--"+e.observable.status()})},o.prototype._onMatchDataError=function(t,n,r){if(r)return;var i=e("#live-match-nav-wrapper, #subnavigation-nav-wrapper").length&&e("#live-match-nav-wrapper, #subnavigation-nav-wrapper").data("match-status-id");i?(this.observable.status(this.statuses[i]),this.observable.isLoaded(!0),console.log(t+" feed error, match status taken from subnav")):console.log(t+" feed error, match status is unknown")},o.prototype._parseResponse=function(){this.sportId=this._context._0;var e=this._resultsObject;this.observable.caption.status(n.adria.getStatusName(e.s)),e.s==3&&(e.pm=0);var t=this._resultsObject.r;this._actions=this._parseActions(),this.observable.status(this.statuses[e.s]||"live"),this.observable.minute(this._calculateStatusMinute()),this.observable.scoreHome(t&&t.s1),this.observable.scoreAway(t&&t.s2),this.observable.scorersHome(this._getScorers("home")),this.observable.scorersAway(this._getScorers("away")),this.sportId=="44"&&(this.observable.groupedActionsHomeRugby(this._getGroupedActionsBis("home",[16,18,22,19])),this.observable.groupedActionsAwayRugby(this._getGroupedActionsBis("away",[16,18,22,19]))),this.sportId=="8"&&(this.observable.groupedActionsHomeBasket(this._getGroupedActionsBis("home",this.sportSettings[8].goals)),this.observable.groupedActionsAwayBasket(this._getGroupedActionsBis("away",this.sportSettings[8].goals))),this.observable.cardsHome(this._getGroupedActionsBis("home",this.sportSettings[22].redCard)),this.observable.cardsAway(this._getGroupedActionsBis("away",this.sportSettings[22].redCard))},o.prototype._parseActions=function(){var t=this._resultsObject.r,r=[];for(var s in this.actionTypes)r.push(+s);var o=[];try{o=i.map(["n1","n2"],function(s){return i.chain(t[s].a).filter(function(e){return i.indexOf(r,e.at)>=0},this).map(function(t){var r=e.trim(n.adria.getNamesItem("match",1,t._).n),i=r,s=r&&r.split(" ");return s.length>=2&&(s[0]=s[0][0]+".",i=s.join(" ")),{minute:t.m,actionType:t.at,name:r,nameShort:i,_:t._,__:1}},this).sortBy(function(e){return e.minute},this).value()},this)}catch(u){o=[[],[]]}return i.object(["home","away"],o)},o.prototype._getScorers=function(e){var t=this.getSportSettings(),r=this._actions[e],s=e=="home"?"away":"home",o=i.filter(this._actions[s],function(e){return i.indexOf(t.ownGoals,e.actionType)>=0},this);return r=i.filter(r,function(e){return i.indexOf(t.goals,e.actionType)>=0},this),r=i.sortBy(r.concat(o),function(e){return e.minute},this),r=i.map(r,function(e){var r=i.extend({},this._context,{_1:e._}),s=i.indexOf(t.ownGoals,e.actionType)>=0?this._localization.actionTypes[e.actionType][0]:"",o=i.indexOf(t.penalty,e.actionType)>=0?this._localization.actionTypes.p:"";return i.extend({},e,{url:n.adria.getURL(e._,e.__,r,"match"),minute:e.minute+"'"+s+o,time:e.minute,ownGoal:s})},this),r=i.groupBy(r,function(e){return e._},this),r=i.sortBy(i.values(r),function(e){return e[0].time},this),i.map(r,function(e){var t=i.extend({totalGoals:0},e[0]),n=i.pluck(e,"minute");return t.minute=n.join(", "),t.totalGoals=n.length?"⨯"+n.length:"",t},this)},o.prototype._getGroupedActionsBis=function(e,t){var n=this._actions[e],r=t.slice(0),s={};return r.forEach(function(e,t){var r=this.actionTypes[e].name,o=i.filter(n,function(t){return t.actionType==e},this);o=i.map(o,function(e){return{name:e.nameShort,minute:e.minute}}),s[r]={actionType:e,actionName:r,data:o,total:o.length}},this),s},o.prototype._calculateStatusMinute=function(){var e=this._resultsObject,t=this.observable.status(),n=this.getSportSettings();if(e.s!==3||this.sportId!="44"&&this.sportId!="22"){if(n&&t=="live"&&typeof n.statuses!="undefined"&&typeof n.minPeriods!="undefined"){var r=e.pm||0,s=n.statuses[e.s]||n.minPeriods;return s-=1,i.reduce(n.periods.slice(0,s),function(e,t){return e+t.minutes},0,this)+r+"'"}return""}return this._localization.halfTime};var u={init:function(){if(typeof n.adria!="undefined"){var t=e(".es-football-match-data").data("es-football-match"),r;t&&(typeof t=="object"?r=t:console.info("Corrupt data in es-football-match-data"),r&&new o(r))}}},a={init:function(){u.init()},constructorFunc:o};return a}),define("modules/live/components/live.TeamComposition",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s={options:{target:null,teamsData:[]},selectedPlayer:null,isPlayerSelected:null,lastUpdateTime:null,setTeamCompoData:function(n){var i;this.options.target=n.target,this.options.teamsData=n.teamsData||[],this.selectedPlayer={id:0,name:r.observable(),country:r.observable(),position:r.observable(),birthday:r.observable(),weight:r.observable(),height:r.observable(),team:r.observable(),isHome:r.observable(),logo:r.observable(),link:r.observable(),avatar:r.observable()},this.isPlayerSelected=r.observable(!1),i=e("#team-composition-view"),i.length>0&&(r.cleanNode(i.get(0)),r.applyBindings(this,i.get(0)),this.$playerDataOverlay=e("<div class='player-data-overlay'></div>"),t.elements.getBody().append(this.$playerDataOverlay),this.$playerDataOverlay.click(function(){e(".player-data.show .close").trigger("click")}))},showPlayerInfo:function(e){var n=i.findWhere(this.options.teamsData,{id:e});if(n){this.$playerDataOverlay.show();if(t.responsive.getMainSize()==="mobile"){location.href=n.link;return}this.selectedPlayer.id=n.id,this.selectedPlayer.name(n.name),this.selectedPlayer.country(n.country),this.selectedPlayer.position(n.position),this.selectedPlayer.birthday(n.birthday),this.selectedPlayer.weight(n.weight),this.selectedPlayer.height(n.height),this.selectedPlayer.team(n.team),this.selectedPlayer.isHome(n.isHome),this.selectedPlayer.logo(n.logo),this.selectedPlayer.link(n.link),this.selectedPlayer.avatar(n.avatar),this.isPlayerSelected(!0)}},hidePlayerInfo:function(){this.isPlayerSelected(!1),this.$playerDataOverlay.hide()},init:function(){this.run(),this.initHoverPlayer(),this.initEvents(),setInterval(this.updateActiveTeamCompo.bind(this),18e4)},initEvents:function(){var t=this;e.subscribe("teamCompositionUpdate",function(){t.hidePlayerInfo(),t.init()}),e(".teams-football.nav-link").click(function(n){n.preventDefault();var r=new Date;(r-t.lastUpdateTime).toFixed()>6e5&&!e(this).is(".active")&&!e(this).is(".updating")&&(t.lastUpdateTime=r,t.updateTeamCompo())})},updateActiveTeamCompo:function(){var t=e(".teams-football.nav-link");t.is(".active")&&(this.updateTeamCompo(),this.lastUpdateTime=new Date)},initHoverPlayer:function(){var t=e(".module-team-compo"),n=function(){t.find("[data-player-id="+e(this).data("player-id")+"]").addClass("hover")},r=function(){t.find("[data-player-id="+e(this).data("player-id")+"]").removeClass("hover")};t.length>0&&(t.find("[data-player-id]").hover(n,r),t.find("[data-player-id]").off("touchstart").on("touchstart",function(n){t.find("[data-player-id="+e(this).data("player-id")+"]").addClass("hover")}),t.find("[data-player-id]").off("touchend").on("touchend",function(n){t.find("[data-player-id="+e(this).data("player-id")+"]").removeClass("hover")}))},run:function(){var t=e(".es-team-composition-data").data("es-team-composition"),n;t&&(typeof t=="object"?n=t:console.info("Corrupt data in es-team-composition-data"),n&&this.setTeamCompoData(n))},updateTeamCompo:function(){var t=e(".es-team-composition-data"),n="live_match_team_composition_v8",r=(window.location.host==="localhost"?"http://localhost:2446":"")+t.data("ajax-url"),i=e("."+n),s=e(".teams-football.nav-link");s.addClass("updating"),i.addClass("loading"),e.get(r).done(function(t){s.removeClass("updating"),e(t).find(".tab-content").addClass("active"),i.removeClass("loading").html(e(t).find("."+n).html()),e.publish("teamCompositionUpdate")}).fail(function(){console.info("Failed to fetch updated team composition info"),i.removeClass("loading"),s.removeClass("updating")})}},o={init:function(){s.init(),e.subscribe("subnavigation.tabInit:TeamComposition",function(){s.init()})}};return o}),define("modules/live/components/live.TeamStats_bis",["jquery-full","base/base","modules/live/components/live.Core","knockout","underscore"],function(e,t,n,r,i){"use strict";var s={$zone:e(".live_match_team_stats_v8_5_bis"),playersData:null,resultObj:null,stats:null,isHaveStats:null,shootPositions:null,actionId:0,_matchFeedId:null,$goalSelects:null,$field:null,$gate:null,screenSize:null,canvas:null,scaleFactor:{},init:function(){this.enableBetclicWebview();if(typeof n.adria=="undefined"&&this.$zone.length===0)return!1;var e=this.$zone.find(".es-team-stats-data").data("es-team-stats");if(!e)return!1;if(typeof e!="object")return console.warn("Corrupt data in es-team-stats-data"),!1;this.playersData=e.playersData||[],this.isHaveStats=r.observable();var t=function(){return{home:r.observable(),away:r.observable()}};this.stats={possession:t(),goals:t(),penaltiesScored:t(),penaltiesMissed:t(),corners:t(),freeKicks:t(),fouls:t(),offsides:t(),yellowCards:t(),redCards:t(),saves:t(),rugbyGoals:t(),rugbyTries:t(),rugbyConvertionScored:t(),rugbyConvertionTotal:t(),rugbyPenaltiesScored:t(),rugbyPenaltiesTotal:t(),rugbyDropGoalsScored:t(),rugbyYellowCards:t(),rugbyRedCards:t(),rugbySubstitutions:t(),rugbyConversionScoredPercents:t(),rugbyPenaltiesScoredPercents:t(),shots:t(),shotOnTarget:t(),shotAccuracy:t(),conversionRate:t(),hitPostBar:t(),shotsBlocked:t(),penalties:t()},this.shootPositions={home:{goalsOrigin:r.observableArray()},away:{goalsOrigin:r.observableArray()}},this._matchFeedId=n.adria.subscribe("match",this.onData.bind(this));var i=document.getElementById("team-stats-view");i&&!r.dataFor(i)&&r.applyBindings(this,i)},enableBetclicWebview:function(){e(".live-zone__betclic-redirect--hidden").length>0&&(t.storage.context.get("deviceType")=="iphone"||t.storage.context.get("deviceType")=="ipad")&&e(".live-zone__betclic-redirect").removeClass("live-zone__betclic-redirect--hidden")},calcScaleFactor:function(e){var t=e?266:276,n=e?151:158,r=e?180:186,i=21,s=n+r+i;this.scaleFactor={gate:{x:t/732,y:n/244},field:{x:t/640,y:r*2/1e3},canvasWidth:t,canvasHeight:s,gateHeight:n,fieldHeight:r,endZone:i}},initGoalListeners:function(){s.$goalSelects.on("click",s.playerSelect),n.adria.subscribe("match",function(){s.$goalSelects=s.$zone.find(".live-stats-scheme__select"),s.$goalSelects.on("click",s.playerSelect),s.$goalSelects.filter("[class$='--active']").length===0&&s.playerSelect()}),t.responsive.registerMainSizeFn(this.resizeHandler.bind(this))},initCanvas:function(){this.canvas&&(this.canvas.remove(),this.canvas=null),this.canvas=e("<canvas/>",{id:"field-canvas"}),this.canvas[0].width=this.scaleFactor.canvasWidth,this.canvas[0].height=this.scaleFactor.canvasHeight,this.canvas.appendTo(this.$field)},resizeHandler:function(e){if(this.screenSize===e.size)return;switch(e.size){case"desktop":case"tablet":this.calcScaleFactor(),this.initCanvas();break;case"mobile":this.calcScaleFactor(!0),this.initCanvas()}this.playerSelect(),this.screenSize=e.size},playerSelect:function(t){var n=t?e(this):s.$goalSelects.first(),r=n.data("coords");if(!r)return;s.$goalSelects.filter("[class$='--active']").removeClass("live-stats-scheme__select--active"),n.addClass(n[0].className+"--active"),s.drawGoal(r.x,r.y,r.x2,r.y2)},drawGoal:function(e,t,n,r){function c(){i.shadowColor="rgba(0, 0, 0, 0.15)",i.shadowBlur=8}function h(){i.shadowColor="rgba(0, 0, 0, 0)",i.shadowBlur=0}function p(){i.clearRect(0,0,i.canvas.width,i.canvas.height)}function d(e,t){i.save(),i.translate(e,t),i.beginPath(),i.fillStyle="#009cde",i.moveTo(10,-0.119),i.bezierCurveTo(11.38,-0.119,12.675,.142,13.886,.663),i.bezierCurveTo(15.097,1.184,16.158,1.9,17.07,2.811),i.bezierCurveTo(17.981,3.723,18.697,4.784,19.218,5.995),i.bezierCurveTo(19.739,7.206,20,8.502,20,9.882),i.bezierCurveTo(20,11.262,19.739,12.557,19.218,13.768),i.bezierCurveTo(18.697,14.979,17.981,16.04,17.07,16.952),i.bezierCurveTo(16.158,17.863,15.097,18.58,13.886,19.1),i.bezierCurveTo(12.675,19.621,11.38,19.881,10,19.881),i.bezierCurveTo(8.619,19.881,7.324,19.621,6.113,19.1),i.bezierCurveTo(4.902,18.58,3.84,17.863,2.929,16.952),i.bezierCurveTo(2.017,16.04,1.301,14.979,.781,13.768),i.bezierCurveTo(.26,12.557,0,11.262,0,9.882),i.bezierCurveTo(0,8.502,.26,7.206,.781,5.995),i.bezierCurveTo(1.301,4.784,2.017,3.723,2.929,2.811),i.bezierCurveTo(3.84,1.9,4.902,1.184,6.113,.663),i.bezierCurveTo(7.324,.142,8.619,-0.119,10,-0.119),i.lineTo(10,-0.119),i.moveTo(1.679,9.882),i.bezierCurveTo(1.679,9.986,1.685,10.09,1.699,10.194),i.bezierCurveTo(1.712,10.298,1.718,10.403,1.718,10.507),i.bezierCurveTo(1.875,10.767,2.115,11.08,2.441,11.444),i.bezierCurveTo(2.766,11.809,3.203,12.173,3.75,12.538),i.lineTo(6.562,11.21),i.lineTo(7.421,7.264),i.lineTo(5.156,4.882),i.bezierCurveTo(4.609,4.96,4.127,5.103,3.71,5.311),i.bezierCurveTo(3.294,5.52,2.955,5.715,2.695,5.897),i.bezierCurveTo(2.382,6.497,2.135,7.127,1.953,7.792),i.bezierCurveTo(1.77,8.456,1.679,9.153,1.679,9.882),i.lineTo(1.679,9.882),i.moveTo(18.242,8.905),i.bezierCurveTo(18.137,7.994,17.896,7.147,17.519,6.366),i.bezierCurveTo(17.141,5.584,16.666,4.882,16.093,4.257),i.bezierCurveTo(15.833,4.126,15.533,4.022,15.195,3.944),i.bezierCurveTo(14.856,3.866,14.465,3.827,14.023,3.827),i.bezierCurveTo(13.945,3.827,13.867,3.827,13.789,3.827),i.bezierCurveTo(13.71,3.827,13.645,3.827,13.593,3.827),i.lineTo(11.796,6.874),i.lineTo(13.437,10.624),i.lineTo(16.718,11.327),i.bezierCurveTo(17.187,10.858,17.539,10.403,17.773,9.96),i.bezierCurveTo(18.007,9.517,18.164,9.166,18.242,8.905),i.lineTo(18.242,8.905),i.moveTo(10,1.561),i.bezierCurveTo(9.375,1.561,8.775,1.626,8.203,1.756),i.bezierCurveTo(7.63,1.887,7.083,2.082,6.562,2.342),i.bezierCurveTo(6.38,2.577,6.165,2.889,5.917,3.28),i.bezierCurveTo(5.67,3.671,5.468,4.153,5.312,4.725),i.lineTo(7.617,7.147),i.lineTo(11.64,6.756),i.lineTo(13.398,3.749),i.bezierCurveTo(13.137,3.254,12.864,2.85,12.578,2.538),i.bezierCurveTo(12.291,2.225,12.031,1.965,11.796,1.756),i.bezierCurveTo(11.51,1.705,11.217,1.659,10.917,1.62),i.bezierCurveTo(10.618,1.581,10.312,1.561,10,1.561),i.lineTo(10,1.561),i.moveTo(4.257,15.858),i.bezierCurveTo(4.7,16.301,5.188,16.678,5.722,16.991),i.bezierCurveTo(6.256,17.303,6.822,17.564,7.421,17.772),i.bezierCurveTo(7.603,17.772,8.001,17.714,8.613,17.596),i.bezierCurveTo(9.224,17.479,9.869,17.147,10.546,16.6),i.lineTo(10.117,13.475),i.lineTo(6.601,11.444),i.lineTo(3.789,12.733),i.bezierCurveTo(3.658,13.514,3.677,14.178,3.847,14.725),i.bezierCurveTo(4.016,15.272,4.153,15.65,4.257,15.858),i.lineTo(4.257,15.858),i.moveTo(13.632,17.342),i.bezierCurveTo(14.309,17.004,14.927,16.587,15.488,16.092),i.bezierCurveTo(16.047,15.598,16.536,15.037,16.953,14.413),i.bezierCurveTo(17.005,14.126,17.037,13.723,17.05,13.202),i.bezierCurveTo(17.063,12.681,16.939,12.121,16.679,11.522),i.lineTo(13.398,10.819),i.lineTo(10.312,13.514),i.lineTo(10.742,16.6),i.bezierCurveTo(11.367,16.913,11.933,17.115,12.441,17.206),i.bezierCurveTo(12.949,17.297,13.333,17.342,13.593,17.342),i.lineTo(13.632,17.342),i.fill(),i.closePath(),i.restore()}var i=this.canvas[0].getContext("2d"),s="white",o="#e2e3e4",u=17,a=this.scaleFactor.canvasWidth-u,f=this.scaleFactor.fieldHeight+this.scaleFactor.endZone-u,l={gateX:e*this.scaleFactor.gate.x,gateY:t*this.scaleFactor.gate.y,fieldX:n*this.scaleFactor.field.x,fieldY:r*this.scaleFactor.field.y+(this.scaleFactor.gateHeight+this.scaleFactor.endZone)};l.gateX<u&&(l.gateX=u),l.fieldX<u&&(l.fieldX=u),l.gateX>a&&(l.gateX=a),l.fieldX>a&&(l.fieldX=a),l.fieldY-this.scaleFactor.gateHeight>f&&(l.fieldY=f+this.scaleFactor.gateHeight),p(),i.save(),i.beginPath(),i.strokeStyle=o,i.lineWidth=7,i.moveTo(l.gateX,l.gateY),i.lineTo(l.fieldX,l.fieldY),c(),i.stroke(),i.restore(),i.beginPath(),i.strokeStyle=o,i.fillStyle=s,i.lineWidth=4,i.arc(l.gateX,l.gateY,14,0,2*Math.PI),c(),i.stroke(),h(),i.fill(),i.beginPath(),i.arc(l.fieldX,l.fieldY,14,0,2*Math.PI),c(),i.stroke(),h(),i.fill(),i.restore(),i.beginPath(),i.strokeStyle=s,i.fillStyle=s,i.lineWidth=4,i.moveTo(l.gateX,l.gateY),i.lineTo(l.fieldX,l.fieldY),i.stroke(),i.closePath(),d(l.gateX-10,l.gateY-10),d(l.fieldX-10,l.fieldY-10)},onData:function(e){if(!e)return!1;e[0].v&&(this.resultObj=e[0].v[0].r,this.getMatchStats("home",this.resultObj.n1),this.getMatchStats("away",this.resultObj.n2),this.getShootPositions("home",this.resultObj.n1,this.resultObj.n2),this.getShootPositions("away",this.resultObj.n2,this.resultObj.n1),n.MatchHelper.isMatchFinished(e[0].v[0].s)&&this._matchFeedId&&n.adria.unsubscribe("match",this._matchFeedId),this.resultObj.n1.s?this.isHaveStats(!0):this.isHaveStats(!1))},_calculatePercentageStats:function(e,t){var n=e.home()||0,r=e.away()||0,i=n+r;i?(t.home(Math.floor(n/i*100)+"%"),t.away(Math.floor(r/i*100)+"%")):(t.home("0%"),t.away("0%"))},getMatchStats:function(e,t){this.stats.possession[e](this.getTeamStat(t,500)+"%"),this.stats.goals[e](this.getTeamStat(t,100)),this.stats.penalties[e](this.getTeamStat(t,113)),this.stats.penaltiesScored[e](this.getTeamStat(t,119)),this.stats.penaltiesMissed[e](this.stats.penalties[e]()-this.stats.penaltiesScored[e]()),this.stats.corners[e](this.getTeamStat(t,108)),this.stats.freeKicks[e](this.getTeamStat(t,110)),this.stats.fouls[e](this.getTeamStat(t,111)),this.stats.offsides[e](this.getTeamStat(t,109)),this.stats.yellowCards[e](this.getTeamStat(t,114)),this.stats.redCards[e](this.getTeamStat(t,115)),this.stats.saves[e](this.getTeamStat(t,106)),this.stats.shotOnTarget[e](this.getTeamStat(t,104)),this.stats.shotsBlocked[e](this.getTeamStat(t,120)),this.stats.hitPostBar[e](this.getTeamStat(t,101)),this.stats.shots[e](this.stats.shotOnTarget[e]()+this.getTeamStat(t,105)+this.stats.shotsBlocked[e]()),this.stats.shotAccuracy[e](this.calculateRate(this.stats.shotOnTarget[e](),this.stats.shots[e]())),this.stats.conversionRate[e](this.calculateRate(this.stats.goals[e](),this.stats.shotOnTarget[e]())),this.stats.rugbyGoals[e](this.getRugbyGoals(e)),this.stats.rugbyTries[e](this.getTeamStat(t,219003)),this.stats.rugbyConvertionScored[e](this.getTeamStat(t,219004)),this.stats.rugbyConvertionTotal[e](this.stats.rugbyConvertionScored[e]()+this.getTeamStat(t,219005)),this.stats.rugbyPenaltiesScored[e](this.getTeamStat(t,219006)),this.stats.rugbyPenaltiesTotal[e](this.stats.rugbyPenaltiesScored[e]()+this.getTeamStat(t,219007)),this.stats.rugbyDropGoalsScored[e](this.getTeamStat(t,219008)),this.stats.rugbyYellowCards[e](this.getTeamStat(t,219010)),this.stats.rugbyRedCards[e](this.getTeamStat(t,219011)),this.stats.rugbySubstitutions[e](this.getTeamStat(t,219012))},getShootPositions:function(e,t,n){var r=[],i=[],s=[],o;r=this.getActionsOrigin(t,10,"goal"),s=this.getActionsOrigin(n,9,"owngoal"),i=this.getActionsOrigin(t,7,"penaltygoal"),o=[].concat(r,i,s),o=o.sort(function(e,t){return e.field.minute-t.field.minute}),this.shootPositions[e].goalsOrigin(o)},_getPlayerStatById:function(e,t,n){if(!e||!t||!n.length)return null;var r=0,i=n.length;for(;r<i;r++)if(n[r].p===e&&n[r]._===t)return n[r].v;return null},getPlayerInfo:function(e){var t=i.find(this.playersData,function(t){return t.id===e})||{},r=n.adria.getNamesItem("match",2,t.team);return{name:t.name,photo:t.photo,link:t.link,teamLogo:n.MatchHelper.getLogo(r,"s")}},getTeamStat:function(e,t){var n=i.find(e.s,function(e){return e._===t}),r=t===500?50:0;return n?n.v:r},getRugbyGoals:function(e){return e==="home"?this.resultObj.s1:e==="away"?this.resultObj.s2:0},getActionsOrigin:function(e,t,n){var r=i.filter(e.a,function(e){return e.at===t&&e.hasOwnProperty("l")});return i.each(r,function(e){e._id=this.generateActionId()},this),r=i.map(r,function(e){return{gate:{id:e._id,type:n,coords:e.l?this.calculateGateCoords(e.l.g):null},field:{id:e._id,player:this.getPlayerInfo(e._).name,minute:e.m,type:n,coords:e.l?this.calculateFieldCoords(e.l.p):null}}},this),r=i.filter(r,function(e){return e.gate.coords!==null&&e.field.coords!==null}),r},calculateGateCoords:function(e){return e&&"x"in e&&"y"in e?{y:e.x,x:e.y}:null},calculateFieldCoords:function(e){return e&&"x"in e&&"y"in e?{y:e.x,x:640-e.y}:null},calculateRate:function(e,t){return t?(e/t*100).toFixed(0)+"%":0},generateActionId:function(){return++this.actionId}},o={init:function(){s.init(),e.subscribe("subnavigation.tabInit:TeamStats",function(){s.init()})}};return o}),define("modules/live/components/live.rugbytooltip",["jquery-full"],function(e){var t={leftColSelector:".herostats-col--left",rightColSelector:".herostats-col--right",cardsSelector:".score-cards",tooltip:{$zone:null,selector:".herostats__info, .score-card",dataStaticAttr:"tooltip",dataDynamicAttr:"tooltip-dynamic",template:function(t){var n=e('<div class="stats-tooltip"></div>'),r;return t===undefined||t.length===0?null:(r=t.map(function(e){return['<div class="stats-tooltip__item">','<span class="stats-tooltip__item-name">',e.name||"","</span>",'<span class="stats-tooltip__item-minute">',(e.minute||"")+"'","</span>","</div>"].join("")}).join(""),n.append(r))}},init:function(){function r(e,r){var i=e.data(n.tooltip.dataStaticAttr),s=e.data(n.tooltip.dataDynamicAttr);s!==undefined?t=n.tooltip.template(s):t=n.tooltip.template(i),e.tooltipster("content",t),r()}var t="";this.tooltip.$zone=e(".herostats, .score-cards");if(this.tooltip.$zone.length===0)return;var n=this;e(this.leftColSelector).find(this.tooltip.selector).each(function(n,i){e(i).tooltipster({theme:"tooltipster-rounded tooltipster-live-bis tooltipster-live-bis--left",trigger:"hover",content:t,interactive:!1,position:"bottom-left",minWidth:75,functionBefore:r})}),e(this.rightColSelector).find(this.tooltip.selector).each(function(n,i){e(i).tooltipster({theme:"tooltipster-rounded tooltipster-live-bis tooltipster-live-bis--right",trigger:"hover",content:t,interactive:!1,position:"bottom-right",minWidth:75,functionBefore:r})}),e(this.cardsSelector).on("touchstart mouseover",".score-card",function(){e(this).hasClass("tooltipstered")||(e(this).tooltipster({theme:"tooltipster-rounded tooltipster-live-bis",trigger:"hover",content:t,interactive:!1,position:"bottom",minWidth:75,functionBefore:r}),e(this).tooltipster("show"))})}};return{init:function(){t.init()}}}),define("modules/live/sport-football.bis",["modules/live/components/live.FootballMatch","modules/live/components/live.TeamComposition","modules/live/components/live.TeamStats_bis","modules/live/components/live.FocalPoint","modules/live/components/live.rugbytooltip"],function(e,t,n,r,i){"use strict";return{init:function(){r.init(),e.init(),t.init(),n.init(),i.init()}}}),define("modules/live/components/live.TennisMatch",["jquery-full","modules/live/components/live.Core","knockout","underscore","modules/live/components/live.Match"],function(e,t,n,r,i){"use strict";function s(n){i.call(this,n),this.options=e.extend({target:null},n),this.items=null,this._initObservable(),this._initViewModel(),this._liveUpdate=!0,this._matchFeedId=t.adria.subscribe("match",e.proxy(this._onMatchData,this),e.proxy(this._onMatchDataError,this))}s.prototype=Object.create(i.prototype),s.prototype.constructor=s,s.prototype._initObservable=function(){var e=this;r.extend(this.observable,{status:n.observable(),isLive:n.observable(),isFuture:n.observable(),totalFirst:n.observable(0),totalSecond:n.observable(0),scoreFirst:n.observableArray([]),scoreSecond:n.observableArray([]),activeGameFirst:n.observable(""),activeGameSecond:n.observable(""),serveFirst:n.observable(0),serveSecond:n.observable(0)}),this.observable.liveHeroCSS=n.computed(function(){var t=[e.observable.status()];return t.join(" ")})},s.prototype._onMatchDataError=function(t,n,r){if(r)return;var i=e("#live-subnavigation").length&&e("#live-subnavigation").data("status");i?(this.observable.status(this.statuses[i]),this.observable.isLoaded(!0),console.log(t+" feed error, match status taken from subnav")):console.log(t+" feed error, match status is uknown")},s.prototype._parseResponse=function(){var e=this._parseScores();this.observable.status(this._getMatchStatus()),this.observable.isLive(this._isLive()),this.observable.isFuture(this._isFuture()),this.observable.totalFirst(e[0].setsTotal),this.observable.totalSecond(e[1].setsTotal),this.observable.scoreFirst(e[0].setsCompleted),this.observable.scoreSecond(e[1].setsCompleted),this.observable.activeGameFirst("40"),this.observable.activeGameSecond("30"),this.observable.serveFirst(this._getServe()==1),this.observable.serveSecond(this._getServe()==2)},s.prototype._parseScores=function(){var e=this._resultsObject.r,t=r.map([1,2],function(t){var n={setsCompleted:[],setsTotal:0};n.setsTotal=0;try{var i="s"+t,s="tb"+t,o=r.zip(e[i]||[],e[s]||[]);o=r.filter(o,function(e){return!r.isUndefined(e[0])&&!r.isNull(e[0])&&e[0]!=="A"},this),o=r.map(o,function(e){var t=r.isUndefined(e[1])||r.isNull(e[1])?"":e[1];return{setScore:+e[0],tiebreakScore:t,lose:0,active:0}},this),n.setsCompleted=o}catch(u){}return n},this),n=t[0].setsCompleted,i=t[1].setsCompleted;r.each(n,function(e,r){var s=i[r];if(this._isPast()||this._isLive()&&r<n.length-1)e.lose=e.setScore<s.setScore?1:0,s.lose=e.setScore>s.setScore?1:0,r===n.length-1&&this._isSuspended()&&(e.lose=0,s.lose=0);t[0].setsTotal+=s.lose,t[1].setsTotal+=e.lose,(this._isLive()||this._isSuspended())&&r==n.length-1&&(e.active=1,s.active=1)},this);if(e){var s=r.last(e.s1),o=r.last(e.s2);if(s=="A"||o=="A")t[0].setsCompleted.push({active:0,lose:s=="A"?1:0,setScore:s=="A"?"A":"",tiebreakScore:""}),t[1].setsCompleted.push({active:0,lose:o=="A"?1:0,setScore:o=="A"?"A":"",tiebreakScore:""})}return t},s.prototype._getServe=function(){return!this._isSuspended()&&this._isLive()&&this._resultsObject.r.sv||0};var o={init:function(){if(typeof t.adria!="undefined"){var n=e(".es-tennis-match-data").data("es-tennis-match"),r;n&&(typeof n=="object"?r=n:console.info("Corrupt data in es-tennis-match-data",r),r&&new s(r))}}},u={init:function(){o.init()},constructorFunc:s};return u}),define("modules/live/sport-tennis",["modules/live/components/live.TennisMatch","modules/live/components/live.FocalPoint"],function(e,t){"use strict";return{init:function(){t.init(),e.init()}}}),define("modules/live/sport-motor.bis",["modules/live/components/live.FocalPoint","modules/live/components/live.StandingsHeader"],function(e,t){"use strict";return{init:function(){e.init(),t.init()}}}),define("modules/live/sport-other",["modules/live/components/live.FocalPoint"],function(e){"use strict";return{init:function(){e.init()}}}),define("modules/live/live.bis",["jquery-full","modules/live/components/utils/adria","modules/live/components/live.adria","modules/live/components/live.scroll.bis","modules/live/components/live.subnavigationmenu.bis","modules/live/sport-cycling.bis","modules/live/sport-football.bis","modules/live/sport-tennis","modules/live/sport-motor.bis","modules/live/sport-other"],function(e,t,n,r,i,s,o,u,a,f){"use strict";n.init(),r.init(),i.init();var l=e(".es-adria-observer-data"),c=l.data("sport-category"),h=l.attr("data-sport-id");c!==undefined&&(c=c.toLowerCase());switch(c){case"team":o.init();break;case"sets":u.init();break;case"motor":a.init();break;default:switch(h){case"18":s.init();break;default:f.init()}}}),define("modules/live/live-match-summary",["jquery-full","base/base","helpers/helpers","objects/objects"],function(e,t,n,r){var i={init:function(){i.initElements(),i.initAjaxSummary(),i.initRefresh()},initElements:function(){i.$summaryContent=e(".live_summary-content"),i.$timeline=e(".live-summary__timeline"),i.$multiplexReview=e(".multiplex_review"),i.$loader=new r.loader,i.$timelineUrl=i.$summaryContent.data("ajax-url"),i.navtab=n.navTabs,i.tabPreview=i.navtab.getElements("navtab_Summary")[0]},initAjaxSummary:function(){e.ajax({type:"GET",url:i.$timelineUrl,dataType:"html",beforeSend:function(){i.$timeline.is(":visible")?i.$loader.append(i.$timeline,!0):i.$loader.append(i.$timeline,!0)},success:function(e){i.$loader.detach(!1)}}).done(function(t){$summaryFreshContent=e(t).children(),i.$timeline.length>0?i.$timeline.empty().append($summaryFreshContent):i.$multiplexReview.length>0&&i.$multiplexReview.empty().append($summaryFreshContent)})},initRefresh:function(){i.$summaryContent.length>0&&i.$summaryContent.data("isajaxreloaded")==1&&i.tabPreview!=null&&i.tabPreview.onActivate(function(){setInterval(function(){i.initAjaxSummary()},6e4)})}};i.init()}),define("live.bis",function(){});