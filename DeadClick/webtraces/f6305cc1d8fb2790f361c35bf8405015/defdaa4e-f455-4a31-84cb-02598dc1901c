var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacyModal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-inner">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close"></div>\r\n    </div>\r\n</div>'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modal='<div id="gigya-screen-dialog-page-overlay" style="display:${overlayDisplay}"></div>\r\n<div class="gigya-screen-dialog-main">\r\n    <div class="gigya-screen-dialog-top">\r\n        <div class="gigya-screen-dialog-caption" id="gigya-screen-dialog-caption-${modalID}">$title</div>\r\n        <div class="gigya-screen-dialog-close">\r\n            <a href="#">${closeImage}</a>\r\n        </div>\r\n    </div>\r\n    <div class="gigya-screen-dialog-inner">\r\n    </div>\r\n</div>\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modalCloseButton='<img src="${imgUrl}" alt="X" height="${imgHeight}" width="${imgWidth}" />\r\n'}(t=e.base||(e.base={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.legacy_modal="div.gigya-screen-dialog,div.gigya-screen-dialog-mobile{position:absolute;display:inline-block;background-color:#FFF}div.gigya-screen-dialog{top:25px;left:25px;border:8px solid #CCC;border-radius:8px;outline:0}div.gigya-screen-dialog-inner{border:1px solid #AAA}div.gigya-screen-dialog-close{line-height:33px;height:33px;width:20px;float:right;cursor:pointer;background-image:url(${imgBase}/accounts/close_dialog.png);background-position:right;background-repeat:no-repeat}div.gigya-screen-dialog-caption{float:left;font-weight:700;font-size:16px;font-family:arial}div.gigya-screen-dialog-mobile{top:0;left:0;width:100%}div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#F3F3F3;line-height:33px;padding:0 10px 0 11px}#gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.modern_modal=".gigya-style-modern #gigya-screen-dialog-page-overlay{width:100vw;height:100vh;background:#000;position:fixed;top:0;left:0;z-index:-1;filter:alpha(opacity=20);opacity:.2}.gigya-style-modern div.gigya-screen-dialog-main{border:.5px;border-radius:3px;background-color:transparent;-webkit-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);-moz-box-shadow:0 3px 6px 0 rgba(0,0,0,.5);box-shadow:0 3px 6px 0 rgba(0,0,0,.5);max-height:99vh;max-width:99vw;overflow:auto}.gigya-style-modern div.gigya-screen-dialog-top{overflow:hidden;zoom:1;background-color:#1371B9;line-height:38px;padding:0 10px 0 11px;border-radius:3px 3px 0 0}.gigya-style-modern div.gigya-screen-dialog-close{background-image:initial;background-position:initial;background-repeat:initial;float:right;cursor:pointer}.gigya-style-modern div.gigya-screen-dialog-close>a>img{margin-top:11px;vertical-align:initial;border:0;width:auto}.gigya-style-modern div.gigya-screen-dialog-caption{float:left;font-size:19px;font-family:arial;color:#FFF;padding-right:20px}.gigya-style-modern div.gigya-screen-dialog-inner{padding:0;overflow:hidden;min-width:32px;min-height:64px;background-color:#fff}.gigya-style-modern div.gigya-screen-dimmer{position:absolute;opacity:.2;filter:alpha(opacity=20);background-color:#FFF}.gigya-style-modern div.gigya-screen-loader{position:absolute;background:url(${imgBase}/accounts/bigLoader.gif) center center no-repeat;min-height:32px;min-width:32px}.gigya-style-modern.gigya-screen-dialog{position:fixed;border:none}.gigya-style-modern.gigya-screen-dialog-mobile{position:absolute;display:inline-block;top:0;left:0;background-color:#fff;width:100%;height:100%}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-main{max-height:100vh;max-width:100vw;box-shadow:initial;overflow:visible}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-top{position:fixed;top:0;border-radius:0;line-height:27px;box-sizing:border-box;width:100%;z-index:1}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-caption{font-size:14px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-close>a>img{margin-top:5px}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner{border:0;margin-top:27px;box-sizing:border-box}.gigya-style-modern.gigya-screen-dialog-mobile div.gigya-screen-dialog-inner>div{margin:0 auto}.gigya-style-modern.gigya-ios.gigya-ios-v7.gigya-screen-dialog-mobile div.gigya-screen-dialog-top,.gigya-style-modern.gigya-ios.gigya-screen-dialog{position:absolute}.gigya-style-modern.gigya-android.gigya-screen-dialog-mobile{overflow:auto}.gigya-style-modern.gigya-ie8 #gigya-screen-dialog-page-overlay{width:100%;height:100%}html.gigya-mobile-modal-mode{overflow:hidden}html.gigya-mobile-modal-mode body{height:0;overflow:hidden}"}(t=e.base||(e.base={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){function t(e){return"gigya-style-"+i[e]}var i;!function(e){e[e._undefined=0]="_undefined",e[e.none=1]="none",e[e.legacy=2]="legacy",e[e.modern=3]="modern"}(i=e.PluginStyle||(e.PluginStyle={})),e.getPluginStyleClass=t}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i=function(){function t(e){void 0===e&&(e="object"==typeof console&&console.log?console.log:function(){}),this._logger=e,this._intervalID=void 0,this._actions=[]}return t.prototype.addActions=function(){for(var t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];e.utils.array.forEach(i,function(e){t._actions.push(e)})},t.prototype.hasActions=function(){return this._actions.length>0},t.prototype.start=function(t,i){var n=this;if(void 0===i&&(i=!1),this.isStarted())return 1;if(!this.hasActions&&!i)throw"Poller has no actions to perform on interval";this._intervalID=setInterval(function(){e.utils.array.forEach(n._actions,function(e){e instanceof Function?e():e.act()})},t)},t.prototype.stop=function(){this._intervalID&&(clearInterval(this._intervalID),delete this._intervalID)},t.prototype.isStarted=function(){return Boolean(this._intervalID)},t.prototype.dispose=function(){this.stop();for(var e in this._actions)this._actions[e]instanceof Function||!this._actions.hasOwnProperty(e)||this._actions[e].dispose();delete this._actions,delete this._logger},t}();t.Poller=i}(t=e._||(e._={}))}(gigya||(gigya={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i=function(){function e(e,t,i){this._object=e,this._propery=t,this.callback=i}return e.prototype.act=function(){this._object[this._propery]||this.callback()},e.prototype.dispose=function(){delete this._object,delete this.callback},e}();t.InvalidPropertyAction=i;var n=function(){function e(e){this.callback=e,this._last={width:void 0,height:void 0}}return e.prototype.act=function(){var e=this.getCurrSize();this.isChanged(this._last,e)&&this.callback(this._last,e),this._last=e},e.prototype.dispose=function(){delete this.callback},e.prototype.getCurrSize=function(){},e.prototype.isChanged=function(e,t){return t.width!=this._last.width||t.height!=this._last.height},e}();t.SizeChangeAction=n;var o=function(e){function t(t,i){var n=e.call(this,i)||this;return n._container=t,n}return __extends(t,e),t.prototype.getCurrSize=function(){return{width:this._container&&this._container.style?this._container.clientWidth:void 0,height:this._container&&this._container.style?this._container.clientHeight:void 0}},t.prototype.dispose=function(){delete this._container,e.prototype.dispose.call(this)},t}(n);t.ContainerSizeAction=o;var a=function(t){function i(e){return t.call(this,e)||this}return __extends(i,t),i.prototype.getCurrSize=function(){var t=e.utils.viewport.getInnerSize(),i=e.utils.viewport.getOrientation();return{width:t.w,height:t.h,orientation:i}},i.prototype.isChanged=function(e,i){return t.prototype.isChanged.call(this,e,i)||e.orientation!=i.orientation},i}(n);t.ViewportSizeAction=a}(i=t.pollerActions||(t.pollerActions={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e){this._container=e,this._isActive=!1,this._dimmer=document.createElement("div"),this._dimmer.className="gigya-screen-dimmer",this._loader=document.createElement("div"),this._loader.className="gigya-screen-loader"}return t.prototype.show=function(){this._isActive||(this.setElementOverContainer(this._dimmer),this.setElementOverContainer(this._loader),this._container.insertBefore(this._dimmer,this._container.firstChild),this._container.insertBefore(this._loader,this._container.firstChild),this._isActive=!0)},t.prototype.setElementOverContainer=function(t){e.global.getPos(this._container);t.style.width=this._container.offsetWidth+"px",t.style.height=this._container.offsetHeight+"px",t.style.zIndex=""+e.utils.DOM._nextZIndex++},t.prototype.isActive=function(){return this._isActive},t.prototype.hide=function(){this._isActive&&(this.unlinkElement(this._loader),this.unlinkElement(this._dimmer),this._isActive=!1)},t.prototype.unlinkElement=function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},t.prototype.dispose=function(){this.hide(),delete this._container},t}();t.LoadDimmer=i}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){t.dialogClasses={document_mobile:"gigya-mobile-modal-mode",all_web:"gigya-screen-dialog",all_mobile:"gigya-screen-dialog-mobile",main:"gigya-screen-dialog-main",caption:"gigya-screen-dialog-caption",closeButton:"gigya-screen-dialog-close",content:"gigya-screen-dialog-inner"},t.legacyDialogClasses=e.utils.object.clone(t.dialogClasses),t.legacyDialogClasses.main=t.legacyDialogClasses.content}(i=t.modal||(t.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){var n;!function(n){var o="gigya-modal-plugin-container",a=function(t){function a(e,i,o,a,l){void 0===a&&(a=!1);var r=t.call(this,o)||this;return r._triggerMethod=e,r.isMobileUI=i,r.isLegacy=a,r.onWindowResizeEvent=r.onWindowResize.bind(r),r._dialogClasses=r.isLegacy?n.legacyDialogClasses:n.dialogClasses,r.create(l),r}return __extends(a,t),a.prototype.onAfterCenterEvent=function(){return this.getEvent("onAfterModalCenter")},a.prototype.focusFirstFormElement=function(){var t=e.utils.tabbable.getSortedTabbableElements(this._contentContainer,"input,select,textarea");t[0]&&t[0].focus()},a.prototype.getConfig=function(){return{defaultParams:{},requiredParams:["modalTemplate"]}},a.prototype.showAll=function(){this._allContainer||this.create(),this.center(),this.isMobileUI&&e.utils.DOM.addClassToElement(document.documentElement,this._dialogClasses.document_mobile),this._allContainer.style.visibility="visible",e.localInfo.isIE||this.focusFirstFormElement(),e.utils.tabbable.bindTabLooping(this._contentContainer)},a.prototype.hideAll=function(){this._allContainer&&(this._allContainer.style.visibility="hidden",this.isMobileUI&&(this.removeWindowResizeListener(),document.documentElement.style.height="",e.utils.DOM.removeClassFromElement(document.documentElement,this._dialogClasses.document_mobile)),e.utils.tabbable.unbindTabLooping(this._contentContainer))},a.prototype.showMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visible")},a.prototype.hideMainDialog=function(){this._mainContainer&&(this._mainContainer.style.visibility="visibile")},a.prototype.showLoading=function(){this._loader&&this._loader.show()},a.prototype.hideLoading=function(){this._loader&&this._loader.hide()},a.prototype.changeToMobile=function(){this._allContainer.className=this._dialogClasses.all_mobile},a.prototype.changeToWeb=function(){this._allContainer.className=this._dialogClasses.all_web},a.prototype.isLoading=function(){return this._loader&&this._loader.isActive()},a.prototype.resize=function(e){e&&(this.applyStyle("height",e.height),this.applyStyle("minHeight",e.minHeight),this.applyStyle("width",e.width),this.applyStyle("minWidth",e.minWidth),this.center())},a.prototype.applyStyle=function(e,t){null===t?this._mainContainer.style[e]="":t&&(this._mainContainer.style[e]=t)},a.prototype.addWindowResizeListener=function(){e.utils.DOM.addEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.removeWindowResizeListener=function(){e.utils.DOM.removeEventListener(window,"resize",this.onWindowResizeEvent)},a.prototype.onWindowResize=function(){this.isMobileUI&&this.adjustWindowHeight()},a.prototype.adjustWindowHeight=function(){document.documentElement.style.height=window.getComputedStyle(this._allContainer).height},a.prototype.center=function(){if(this.isMobileUI)this.adjustWindowHeight(),this.addWindowResizeListener();else{var t=!1;if(this.isLoading()&&(this.hideLoading(),t=!0),"absolute"==e.global.getStyle(this._allContainer,"position")){var i=e.utils.viewport.getMiddleCenter(),n=this._allContainer.offsetWidth,o=this._allContainer.offsetHeight,a=i.top-Math.floor(o/2),l=i.left-Math.round(n/2);a<10&&(a=10),l<10&&(l=10),this._allContainer.style.top=a+"px",this._allContainer.style.left=l+"px"}else{var r=e.utils.viewport.getInnerSize(),s=Math.max(0,(r.h-this._allContainer.clientHeight)/2),d=Math.max(0,(r.w-this._allContainer.clientWidth)/2);this._allContainer.style.top=s.toString()+"px",this._allContainer.style.left=d.toString()+"px"}t&&this.showLoading()}this.dispatchEvent("onAfterModalCenter")},a.prototype.create=function(t){var n=this;void 0===t&&(t=!0);var a=e.utils.DOM.getCenteredDivID(this._triggerMethod);this.params.newModal&&(a+=(new Date).getTime()),this._allContainer=e.utils.DOM.createTopLevelDiv(a),t&&this.hideAll(),this._allContainer.innerHTML=e.utils.templates.fill(this.params.modalTemplate,{modalID:a,title:this.params.captionText,closeImage:this.params.closeImage,overlayDisplay:!this.isMobileUI&&this.params.dimDialogBackground?"block":"none"}),this._allContainer.setAttribute("role","dialog"),this._allContainer.setAttribute("aria-labelledby","gigya-screen-dialog-caption-"+a),this._allContainer.setAttribute("tabindex","-1"),i.utils.css.addCss(this.params.modalCss,void 0,!1),this._mainContainer=e.utils.DOM.getElementsByClass(this._allContainer,this._dialogClasses.main)[0],this._captionContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.caption)[0],this._closeButtonElement=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.closeButton)[0],this._closeButtonElement&&e.utils.DOM.addEventListener(this._closeButtonElement,"click",function(t){e.utils.DOM.disableDefaultEventHandling(t),n.hideAll(),n.params.onModalClose&&n.params.onModalClose(i.CloseReasons.canceled)}),this._contentContainer=e.utils.DOM.getElementsByClass(this._mainContainer,this._dialogClasses.content,!0)[0],this._contentContainer.id=o+"-"+this._triggerMethod,this._loader=new i.LoadDimmer(this._contentContainer),this.isMobileUI?e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_mobile):e.utils.DOM.addClassToElement(this._allContainer,this._dialogClasses.all_web),this.center()},a.prototype.getMainContainer=function(){return this._mainContainer},a.prototype.getContentContainer=function(){return this._contentContainer},a.prototype.getCaptionContainer=function(){return this._captionContainer},a.prototype.getModalDialogContainer=function(){return this._allContainer},a.prototype.getLoadingIndicator=function(){return this._loader},a.prototype.dispose=function(){this.hideAll(),this._allContainer&&this._allContainer.parentElement&&this._allContainer.parentElement.removeChild(this._allContainer),this._loader&&this._loader.dispose(),delete this.params,t.prototype.dispose.call(this)},a}(t.BaseObject);n.ModalDialog=a}(n=i.modal||(i.modal={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.pendingError=0]="pendingError",e[e.missing=1]="missing",e[e.finished=2]="finished",e[e.canceled=3]="canceled",e[e.backButton=4]="backButton",e[e.canceledByParent=5]="canceledByParent",e[e.skip=6]="skip",e[e.error=7]="error"}(t=e.CloseReasons||(e.CloseReasons={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(i){i.cssFlags={};var n=function(n){function o(a,l,r){var s=n.call(this,a,l,!1)||this;return s.params=a,s.explicitParams=l,s.injectionInfo=r,s._pixelRatio=o.globalPixelRatio,s._imgBase=o.globalImgBase,s._imgExt="png",s.MOBILE_MODAL_MIN_WIDTH=400,s.lang=s.params.lang,s._style=i.PluginStyle.modern,s._poller=new t.Poller,s.POLL_INTERVAL=150,s.config=e.utils.object.merge([s.injectionInfo,s.getConfig()]),s.localizedJsName=s.getTranslationJsName(),s}return __extends(o,n),o.prototype.onRefreshExternalComponentsEvent=function(){return this.getEvent("onRefreshExternalComponentsEvent")},o.prototype.refreshExternalComponents=function(){this.dispatchPluginEvent("onRefreshExternalComponentsEvent")},o.prototype.getTranslationJsName=function(){var e=this.config.jsName;return e=e.split("_v")[0],e.indexOf(".js")===-1&&(e+=".js"),e},o.prototype.start=function(){var t=this;if(this.params.containerID||this.config.allowModal)if(this.params.containerID){if(this.container=document.getElementById(this.params.containerID),!this.container)return void this.dispatchInvalidParamError("containerID");this.container.innerHTML="",this.containerID=this.params.containerID}else this.isModal=!0,this.params=e.utils.object.merge([this.config.defaultModalParams,this.params]);else this.dispatchInvalidParamError("containerID");this.validateParams()&&(this.initUI(),this.params._noInit?this.loadComplete():this.init(function(e){return t.loadComplete(e)}))},o.prototype.initUI=function(){var n=this;this._templates=i.resources.getTemplates(["base",this.config.name]),this._css=i.resources.getCss(["base",this.config.name]);var o=t.DeviceTypes._undefined;this.params.deviceType&&(o=t.DeviceTypes[this.params.deviceType.toLowerCase()]),o=o||this.getConfig().defaultDeviceType||t.DeviceTypes.desktop,this.params.deviceType=t.DeviceTypes[o],this.isMobileUI=o==t.DeviceTypes.mobile||o==t.DeviceTypes.auto&&e.localInfo.isMobile&&e.localInfo.isMobileApp,this.isRtl="he"==this.lang||"ar"==this.lang,this.initContainer(),this._style!=i.PluginStyle.none&&this.injectCss(),this._poller.addActions(new i.pollerActions.InvalidPropertyAction(this,"container",function(){return n.dispose()}))},o.prototype.loadComplete=function(e){var t=this;void 0===e&&(e=!0),e&&(this.dispatchPluginEvent("load"),this.container&&(this.isModal?(this._modalDialog&&!this.config.disableModalContainerInit&&this._modalDialog.showAll(),this.config.enableViewportPolling&&this._poller.addActions(new i.pollerActions.ViewportSizeAction(function(e,i){t.onViewportSizeChanged(e,i),t.centerModal(),t.refreshExternalComponents()}))):!this.config.enableSizePolling||this.params.width&&this.params.width.toString().indexOf("%",this.params.width.length-1)===-1||this._poller.addActions(new i.pollerActions.ContainerSizeAction(this.container,function(e,i){t.resizePlugin(e,i),t.refreshExternalComponents()})),this._poller.hasActions()&&this._poller.start(this.POLL_INTERVAL)))},o.prototype.initContainer=function(){this.isModal?this.initModalContainer():(e.utils.DOM.setSize(this.container,this.params.width,this.params.height,!1),this.addMetaDataClasses(this.container),this.params.responsive&&(this.container.style.width="auto"),this._loadingIndicator=new i.LoadDimmer(this.container))},o.prototype.initModalContainer=function(){this._style=this.getPluginStyle(),this.createModalDialog(),this._captionElement=this._modalDialog.getCaptionContainer(),this.container=this._modalDialog.getContentContainer(),this.containerID=this.container.id,this._loadingIndicator=this._modalDialog.getLoadingIndicator()},o.prototype.addMetaDataClasses=function(t){var n=this.getPluginStyle();switch(n){case i.PluginStyle.legacy:case i.PluginStyle.modern:e.utils.DOM.addClassToElement(t,i.getPluginStyleClass(n))}e.pluginUtils.DOM.addBrowserInfoClassesToElement(t)},o.prototype.getPluginStyle=function(){return i.PluginStyle[this.params.dialogStyle]||this.config.defaultDialogStyle||this._style},o.prototype.setContainerMinSize=function(){this.params.height&&"auto"!=this.params.height&&this.params.height.indexOf("%")==-1&&(this.container.style.minHeight=this.params.height+"px"),this.params.width&&"auto"!=this.params.width&&this.params.width.indexOf("%")==-1&&(this.container.style.minWidth=this.params.width+"px")},o.prototype.createModalDialog=function(){var t,n=this;t=this.params.captionText?this.params.captionText:this.params.captionTextKey?this.getText(this.params.captionTextKey):"&nbsp;";var o,a;a="undefined"!=typeof this.params.dimDialogBackground?this.params.dimDialogBackground:!(!this.config.defaultModalParams||"undefined"==typeof this.config.defaultModalParams.dimDialogBackground)&&this.config.defaultModalParams.dimDialogBackground;var l,r=this.params.modalCss,s=!1;if(!r)switch(this._style){case i.PluginStyle.modern:r=this.getCss().modern_modal,l=this.getPhotoFullName("gm/close");break;case i.PluginStyle.legacy:s=!0,r=this.getCss().legacy_modal,l=this._imgBase+"gm/CloseButton."+this._imgExt;break;case i.PluginStyle.none:r="",l=this.getPhotoFullName("gm/close");break;default:throw new Error("unrecognized dialog style")}r=e.utils.templates.fill(r,{imgBase:this._imgBase}),o=this.params.closeImage?this.params.closeImage:e.utils.templates.fill(this.getTemplates().modalCloseButton,{imgUrl:this.params.closeImageUrl||l,imgHeight:this.params.closeImageHeight||15,imgWidth:this.params.closeImageWidth||15}),this._modalDialog=new i.modal.ModalDialog(this.injectionInfo.methodName,this.isMobileUI,{modalTemplate:this.params.modalTemplate||(s?this.getTemplates().legacyModal:this.getTemplates().modal),modalCss:r,captionText:t,closeImage:o,dimDialogBackground:a,newModal:this.params.newModal,onModalClose:function(e){return n.close(i.CloseReasons[e])}},s),this.addMetaDataClasses(this._modalDialog.getModalDialogContainer());var d={key:27};e.utils.keyboard.onHotKeyClicked(d,function(){n.close()})},o.prototype.injectCss=function(){var t="",n=this.params.cssPrefix,o=this.getCss(),a=this.config.jsName;i.cssFlags[a]||(i.cssFlags[a]={});var l=i.cssFlags[a];!n&&this.addedCss||(t=this.addCssIfDidntLoad("reset",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("resetRtl",o,l,t)),t=this.addCssIfDidntLoad("global",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("globalRtl",o,l,t)),this.isMobileUI?(t=this.addCssIfDidntLoad("mobile",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("mobileRtl",o,l,t))):(t=this.addCssIfDidntLoad("nonMobile",o,l,t),this.isRtl&&(t=this.addCssIfDidntLoad("nonMobileRtl",o,l,t))),t&&e._.plugins.utils.css.addCss(t,n),this.addedCss=!0),this.config.hasMobileUI&&this.isMobileUI&&this.container&&(this.container.style.width="100%")},o.prototype.init=function(e){this.error(t.BaseObject.NOT_IMPLEMENTED_ERROR,400096),e(!1)},o.prototype.resizePlugin=function(e,t){},o.prototype.onViewportSizeChanged=function(e,t){},o.prototype.shouldClose=function(){return!0},o.prototype.centerModal=function(){this._modalDialog&&!this.isMobileUI&&this._modalDialog.center()},o.prototype.resizeModal=function(e){if(this.isModal&&this._modalDialog&&!this.isMobileUI){this.getPluginStyle()===i.PluginStyle.legacy&&(e.height&&(e.minHeight=parseInt(e.height)+"px",delete e.height),e.width&&(e.minWidth=parseInt(e.width)+"px",delete e.width));({height:this.container.clientHeight,width:this.container.clientWidth});this._modalDialog.resize(e);({height:this.container.clientHeight,width:this.container.clientWidth});this.config.disableModalContainerInit||this.centerModal()}},o.prototype.getPhotoFullName=function(e,t,i,n){return void 0===t&&(t=this._pixelRatio),void 0===i&&(i=this._imgExt),void 0===n&&(n=this._imgBase),n+e+"_x"+t+"."+i},o.prototype.dispatchPluginEvent=function(e,t){return void 0===t&&(t={}),this.dispatchEvent(e,t)},o.prototype.getTemplates=function(){return this._templates},o.prototype.getCss=function(){return this._css},o.prototype.addCssIfDidntLoad=function(e,t,i,n){return t[e]&&!i[e]?(i[e]=!0,n+=" "+t[e]):n},o.prototype.getText=function(t,i,n){var o=t;return o=this.params.customLang&&this.params.customLang[t]?this.params.customLang[t]:e.pluginUtils.lang.getLocalizedText(this.localizedJsName,t,this.lang),o.replace(i,n)},o.prototype.toString=function(){return this.params.containerID+"."+this.injectionInfo.name},o.prototype.error=function(e,t,i){void 0===t&&(t=300001);var n={errorMessage:e,errorCode:t,errorDetails:this.toString(),containerID:this.params.containerID,params:this.params,info:i};this.warn(e,i),this.dispatchErrorFromResponse(n)},o.prototype.close=function(e,t){t||(t={}),t.reason=e,this.dispatchPluginEvent("hide",t),this.shouldClose()&&this.dispose()},o.prototype.dispose=function(){this._isDisposed||(this._poller.dispose(),this.container&&(this.container.innerHTML=""),this._modalDialog&&this._modalDialog.dispose(),this._loadingIndicator&&this._loadingIndicator.dispose(),this.container=null,i.removePluginInstance(this.params,this.injectionInfo),n.prototype.dispose.call(this))},o}(t.BaseObject);n.globalPixelRatio=window.devicePixelRatio?Math.min(Math.ceil(window.devicePixelRatio),3):1,n.globalImgBase=e._.getImgCdnResource(),i.BasePlugin=n}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),gigya.socialize._AddJSRequest=function(servicedBy,methodName,needsContainer,params){if(!document.body){var args=arguments;return void window.setTimeout(function(){gigya.socialize._AddJSRequest.apply(this,args)},300)}params||(params={}),gigya.log.logCall(methodName.split(".").pop(),params);var containerID=params.containerID,blnCenter=!1,container;if(needsContainer?"undefined"==typeof containerID||""==containerID?(containerID=gigya.utils.DOM.getCenteredDivID(methodName),params.containerID=containerID,blnCenter=!0,params.isPopup=!0,container=document.getElementById(containerID),null==container&&(container=gigya.utils.DOM.createTopLevelDiv(containerID))):container=document.getElementById(containerID):(null==gigya.utils.DOM._pseudoContainers[containerID]&&(gigya.utils.DOM._pseudoContainers[containerID]={}),container=gigya.utils.DOM._pseudoContainers[containerID]),!container)return void gigya.events.dispatchInvalidParamError(params,"containerID");var localMethodName=methodName.split(".").pop();if(container.setAttribute&&container.setAttribute("gigid",(params.source&&params.source!=localMethodName?params.source+"_":"")+localMethodName),container.style){container.style.display="",container.style.visibility="",container.innerHTML="";var ifrel=document.getElementById("gigya_ifr_"+containerID);ifrel&&(ifrel.style.display="",ifrel.style.visibility="");var fncFixPosition=function(){null!=ifrel&&(gigya.utils.DOM.setSize(ifrel,params.width,params.height,blnCenter),ifrel.style.visibility="visible"),gigya.utils.DOM.setSize(container,params.width,params.height,blnCenter)};fncFixPosition()}var Reqs=container.Reqs?container.Reqs:container.Reqs=[],rid=Reqs.length+"@"+servicedBy+"@"+containerID;params.rid=rid;var operation=methodName;params._operation&&(operation=params._operation);for(var req=Reqs[Reqs.length]={rid:rid,servicedBy:servicedBy,container:container,method:methodName,context:params.context,c:params,p:params,i:params,operation:operation,isHTML:!0},methodNameParts=methodName.split("."),node=eval(methodNameParts[0]),pfxi=1;null!=(node=node[methodNameParts[pfxi]])&&++pfxi<methodNameParts.length;);var func=node;return gigya.utils.script.load(gigya._.getCdnResource("/js/"+servicedBy+".min.js"+(params.lang?"?lang="+params.lang:"")),null,function(){gigya.reports.reportLoad(methodName,params),gigya.utils.functions.callFunction(methodName,[params,params,params])},!0),containerID},gigya.socialize._parseRID=function(e){var t,i=e.split("@"),n=document.getElementById(i[2]+"_"+i[1]),o=i[2];null==(t=gigya.utils.DOM._pseudoContainers[o])&&(t=document.getElementById(i[2]));var a=null;null!=t&&(a=t.Reqs);var l=null;return null!=a&&(l=a[parseInt(i[0])]),{rid:e,container:t,Reqs:a,req:l,swf:n}};var gigya;!function(e){var t;!function(t){function i(t,i){if(void 0===i&&(i=0),i||(i=0),!t||0==t.length)return[];var n=t[i];if(i==t.length-1){for(var o=[],a=0;a<n.length;a++)o.push([n[a]]);return o}var o=[],l=e.global.getCombination(t,i+1);if(n)for(var a=0;a<n.length;a++)for(var r=0;r<l.length;r++)o.push([n[a]].concat(l[r]));return o}function n(t,i,n){for(var o=e.utils.array.getArrayFromString(t,",",!0),a=e.utils.array.getArrayFromString(i,",",!0),l=e.utils.array.getArrayFromString(n,",",!0),r=0;r<a.length;r++)e.utils.array.removeByValue(o,a[r]);for(var s=e._.providers.getProvidersByName(o.join(",")),r=0;r<a.length;r++)e.utils.array.removeByProperty(s,"name",a[r]);return e.socialize.getProvidersForRequiredCapabilities(s,l)}t.getCombination=i,t.resolveProviders=n}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){var i=e.utils.object.clone(t);return delete i.instanceID,delete i.getInstance,i}t.cloneParamsForPlugin=i}(i=t.object||(t.object={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(e.localInfo.isIE8)i=n(t);else{var o=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,a=o.exec(t)||[];if(a[1]){var l=Date.parse(t);i=new Date(l)}}return i}function n(e){var t,i,n=/^(\d{4}\-\d\d\-\d\d([tT ][\d:\.]*)?)([zZ]|([+\-])(\d\d):(\d\d))?$/,o=n.exec(e)||[];if(o[1]){t=o[1].split(/\D/);for(var a=0,l=t.length;a<l;a++)t[a]=parseInt(t[a],10)||0;return t[1]-=1,t=new Date(Date.UTC.apply(Date,t)),t.getDate()?(o[5]&&(i=60*parseInt(o[5],10),o[6]&&(i+=parseInt(o[6],10)),"+"==o[4]&&(i*=-1),i&&t.setUTCMinutes(t.getUTCMinutes()+i)),t):null}return null}t.getISODate=i}(i=t.date||(t.date={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t,i,n,o,a){if("te-st"==n)return"TEST_"+i.substring(0,10);n||(n="en");var l=e.i18n[t][n]?e.i18n[t][n][i]:e.i18n[t].en[i];return l&&o&&(l=l.replace(o,a)),l}t.getLocalizedText=i}(i=t.lang||(t.lang={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return e.pluginUtils.validation.isEmailListValid(t)}function n(e){for(var t="((?=([^.].{0,63}@.{1,255}))([!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9}]{1,64}(\\.[!#$%&'*+\\-\\/=?\\^_`{|}~a-zA-Z0-9]{1,}){0,})@((\\[(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}\\])|([a-zA-Z0-9-]{1,63}(\\.[a-zA-Z0-9-]{1,63}){1,})))",i='(("[^<]+<('+t+')>")|(("[^"]*" *)?<('+t+")>)|("+t+"))",n=new RegExp(i),o=e.split(","),a=0;a<o.length;a++)if(!n.test(o[a]))return!1;
return!0}t.isEmailValid=i,t.isEmailListValid=n}(i=t.validation||(t.validation={}));var n;!function(e){function t(e){if(void 0===e&&(e=void 0),e){var t="^"+e.replace(/\./g,"\\.").replace(/\*\\./g,"([a-zA-Z0-9]+\\.)*")+"$",i=new RegExp(t);return i.test(document.domain)}}e.isInDomain=t}(n=t.domain||(t.domain={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(e){function t(e){if(e.indexOf(" ")>=0)return!1;var t=e.split("@");if(2!=t.length)return!1;if(0==t[0].length)return!1;if(0==t[1].length)return!1;var i=t[1].split(".");if(i.length<2)return!1;for(var n=0;n<i.length;n++)if(0==i[n].length||i[n].indexOf(" ")>0)return!1;return!0}e.isEmail=t}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(e,t){void 0===t&&(t=1),void 0==e.style.opacity?e.style.filter="alpha(opacity=0)":e.style.opacity="0",window.setTimeout(function(){void 0==e.style.opacity?e.style.filter="alpha(opacity="+100*t+")":e.style.opacity=t+""},10)}function n(t){var i=e.global.getClassBordersAndPaddings(t.className),n=t.offsetHeight-i.h,o=t.style.transitionProperty;t.style.maxHeight="1px",t.style.transitionProperty=t.style.webkitTransitionProperty="max-height",window.setTimeout(function(){t.style.maxHeight=n+"px",t.style.transitionProperty=t.style.webkitTransitionProperty=o},100);var a=function(){t.style.maxHeight="999px",e.utils.DOM.removeEventListener(t,"transitionend",a),e.utils.DOM.removeEventListener(t,"webkitTransitionEnd",a)};e.utils.DOM.addEventListener(t,"transitionend",a),e.utils.DOM.addEventListener(t,"webkitTransitionEnd",a),window.setTimeout(a,500)}t.fadeIn=i,t.slideDown=n}(i=t.animation||(t.animation={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i,n){if(void 0===i&&(i=""),void 0===n&&(n=void 0),t){n||(n=parseInt(e.global.getStyle(t,"height")));t.innerHTML='<div class="'+i+'" style="height:'+n+"px;background-image:url('"+e._.getCdnResource("/gs/i/gm/loader.gif")+"'); background-repeat:no-repeat;background-position:center center\"></div>"}}function n(e){e.interval&&clearInterval(e.interval),e.style.opacity="0",e.interval=setInterval(function(){var t=parseFloat(e.style.opacity);t>=1&&clearInterval(e.interval),e.style.opacity=t+.1},10)}function o(t,i,n,o,a,l,r,s,d){var g=13,c=25;e.global.addedBalloonCSS||(e.global.addCSS([".gig-balloons *, div.gig-balloons, .gig-balloons span, .gig-balloons a:hover, .gig-balloons a:visited, .gig-balloons a:link, .gig-balloons a:active{","border:none; line-height:normal;padding:0px;margin:0px;color:inherit;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;","font-family:arial;font-size:10px;color:#797979;background:none;text-align:left}","div.gig-balloon-frame {","zoom:1;padding:15px 10px 10px 10px; border:1px solid #b4b4b4; min-height:80px; background-color:#FFFFFF; z-index:"+e.utils.DOM._nextZIndex++ +";","box-shadow:0 0 5px RGBA(0,0,0,0.6);-webkit-box-shadow:0 0 5px RGBA(0,0,0,0.6);-moz-box-shadow:0 0 5px RGBA(0,0,0,0.6);}",'div.gig-balloon-nub {left:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-right { left:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_right.png")+'");width:'+g+"px;height:"+c+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-up { top:+1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_up.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'div.gig-balloon-nub-down { top:-1px; position:relative;background-image:url("'+e._.getCdnResource("/gs/i/gm/nub_down.png")+'");width:'+c+"px;height:"+g+"px; z-index:"+e.utils.DOM._nextZIndex++ +" }",'span.gig-balloon-closeImage { cursor:pointer; float:right;background-image:url("'+e._.getCdnResource("/gs/i/gm/CloseButton.png")+'"); width:14px;height:14px; margin:-7px -2px 0 0  }',"div.gig-balloon-caption {font-family:arial; font-size: 12px; font-weight:bold; color: #0b81c1; border-bottom: 1px solid #e8e8e8;padding-bottom:2px;}","span.gig-balloon-caption-text {float:left}"]),!e.localInfo.isIE||!e.localInfo.quirksMode&&e.localInfo.isIE9||e.global.addCSS(["div.gig-balloon-frame {","-ms-filter: \"progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');\";","filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#B4B4B4');}","}","div.gig-balloon-nub-right { left:-5px;}"]),e.global.addedBalloonCSS=!0);var p="";if(e.localInfo.quirksMode){var u=e.global.getClassBordersAndPaddings("gig-balloon-frame");n&&(n+=u.w),o&&(o+=u.h)}n&&(p+="width: "+n+"px;"),o&&(p+="height: "+o+"px;");var h="";a&&(h+="left"===l||"right"===l?"top: "+a+"px;":"left: "+a+"px;");var f="";f+=i?'<div class="gig-balloon-caption"><span class="gig-balloon-caption-text" style="width:'+(n-20)+'px">'+i+"</span>":'<div class="gig-balloon-caption" style="border-bottom:none">',!r&&s&&(f+='<span class="gig-balloon-closeImage" onclick="'+s+'"></span>'),f+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div></div><div class="gig-balloon-body">'+t+"</div>";var m;return a?(m='<table cellpadding="0" cellspacing="0" class="gig-balloon"><tr>',"up"===l&&(m+='<td style=""><div class="gig-balloon-nub-up" style="'+h+'"></div></td></tr><tr>'),"left"===l&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub" style="'+h+'"></div></td>'),m+='<td style="vertical-align:top"><div id="'+d+'" class="gig-balloon-frame" style="'+p+'">'+f+"</div></td>","right"===l&&(m+='<td style="vertical-align:top"><div class="gig-balloon-nub-right" style="'+h+'"></div></td>'),"down"===l&&(m+='</tr><tr><td style="vertical-align:top"><div class="gig-balloon-nub-down" style="'+h+'"></div></td>'),m+="</tr></table>",m+='<div style="clear:both;height:0;width:0;font-size:1px;"><!-- empty divs=100% height IE --></div>'):m='<div class="gig-balloon gig-balloon-frame" style="'+p+'">'+f+"</div>",m}function a(t,i,n,o,a,l,r,s,d,g){g=g?"gig-balloon "+g:"gig-balloon",e.global.removeGMBalloon();var c=(new Date).getTime(),p="gig_gmBalloon_"+c;s&&(p=s);var u=p+"_frame",h=e.global.getBalloonHTML(t,i,n,o,a,l,r,"gigya.global.removeGMBalloon()",u),f=document.createElement("div");return f.className=g,f.style.position="absolute",f.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),f.innerHTML=h,f.id=p,e.global.fadeIn(f),e.utils.DOM.appendToBody(f),e.global.divGMBalloon=f,d||window.setTimeout(function(){e.pluginUtils.DOM.removeElementOnDocClick(f,null,null,"click")},50),f}function l(t){var i;if(t)for(i=t.target,i||(i=t.srcElement);null!=i&&i.offsetParent&&i.id.indexOf(e.global.divGMBalloon.id)==-1;)i=i.offsetParent;if(!i||i.id.indexOf(e.global.divGMBalloon.id)==-1)try{e.global.removeIframeShim(document.getElementById(e.global.divGMBalloon.id+"_frame")),e.global.divGMBalloon.parentNode.removeChild(e.global.divGMBalloon),document.detachEvent?document.detachEvent("onclick",e.global.removeGMBalloon):document.removeEventListener&&document.removeEventListener("click",e.global.removeGMBalloon,!1)}catch(e){}}function r(e,t,i,n,o,a,l,r,s,d){void 0===s&&(s=["left","right","up","down"]),void 0===d&&(d="");for(var g={body:t,caption:i,w:n,h:o,hideClose:a,id:l,dontHideOnClick:r,balloonClass:d},c=0;c<s.length&&!this.positionGMBalloonNextTo(e,s[c],g);c++);}function s(t,i,n){"left"===i||"right"===i?e.global.createGMBalloon(n.body,n.caption,n.w,n.h,47,"left",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass):e.global.createGMBalloon(n.body,n.caption,n.w,n.h,10,"down",n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);var o,a,l=e.global.divGMBalloon.offsetWidth,r=e.global.divGMBalloon.offsetHeight,s=e.global._GetElementPos(t),d=document.documentElement,g=document.body,c=d.clientHeight;0==c&&(c=g.clientHeight);var p=d.clientWidth;0==p&&(p=g.clientWidth),window.innerHeight&&(c=g.scrollHeight&&g.scrollHeight<window.innerHeight?g.scrollHeight:window.innerHeight,p=g.scrollWidth&&g.scrollWidth<window.innerWidth?g.scrollWidth:window.innerWidth);var u,h,f=e.utils.viewport.getScroll(),m=f.top,y=m+c;if("left"===i||"right"===i){h=47,a=s.top+t.offsetHeight/2-47-12.5,a+r>y&&(a=y-r-10);var v=s.left-l-5,b=s.left+t.offsetWidth+5;if("left"===i){if(!(v>10))return null;o=v,u="right",n.balloonClass+=" gig-balloon-left"}else{if(!(p-b-l>10))return null;o=b,u="left",n.balloonClass+=" gig-balloon-right"}}else{if("up"!==i&&"down"!==i)return null;h=10,o=s.left;var x=s.top-r-10,_=s.top+t.offsetHeight+5;if("up"===i){if(!(x>5))return null;a=x,u="down",n.balloonClass+=" gig-balloon-up"}else a=_,u="up",n.balloonClass+=" gig-balloon-down"}var C=e.global.createGMBalloon(n.body,n.caption,n.w,n.h,h,u,n.hideClose,n.id,n.dontHideOnClick,n.balloonClass);if(o<10&&(o=10),a<10&&(a=10),e.global.divGMBalloon.style.left=o+"px",e.global.divGMBalloon.style.top=a+"px",e.localInfo.isIE){var w=document.getElementById(e.global.divGMBalloon.id+"_frame");w&&e.global.addIframeShim(w)}return C}function d(t){if(t){var i=e.global._GetElementPos(t);window.scrollTo(i.left,i.top)}}t.showLoader=i,t.fadeIn=n,t.getBalloonHTML=o,t.createGMBalloon=a,t.removeGMBalloon=l,t.putGMBalloonNextTo=r,t.positionGMBalloonNextTo=s,t.scrollToElement=d}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t,i){var n=i||{},o=n.zindex||50,a=n.opacity||70,l=a/100,r=n.bgcolor||"#000000",s=document.getElementById("darkenScreenObject"),d=document.body;if(!s){var g=e.localInfo.isMobile||e.localInfo.isIE6||"BackCompat"==document.compatMode,c=document.documentElement.scrollTop;0==c&&(c=document.body.scrollTop);var p=document.createElement("div");g?(p.style.position="absolute",p.style.top=""+c+"px"):(p.style.position="fixed",p.style.top="0px"),p.style.overflow="hidden",p.style.left="0px",p.style.display="none",p.id="darkenScreenObject",p.innerHTML="&#160;",d.appendChild(p),s=document.getElementById("darkenScreenObject"),e.attachedFixGray||(e.attachedFixGray=!0,window.addEventListener&&window.addEventListener("resize",e.services.socialize._fixGraySize,!1),window.attachEvent&&window.attachEvent("onresize",e.services.socialize._fixGraySize),g&&(window.addEventListener&&window.addEventListener("scroll",e.services.socialize._fixGrayPosition,!1),window.attachEvent&&window.attachEvent("onscroll",e.services.socialize._fixGrayPosition)))}if(t){var u,h;if(window.innerHeight&&(u=window.innerHeight,h=window.innerWidth),"undefined"==typeof u){var f=document.documentElement;u=f.clientHeight,h=f.clientWidth}0==h&&(h=d.clientWidth),0==u&&(u=d.clientHeight),s.style.opacity=l.toString(),s.style.MozOpacity=l,s.style.width=""+h+"px",s.style.height=""+u+"px",s.style.filter="alpha(opacity="+a+")",s.style.zIndex=o,s.style.backgroundColor=r,s.style.display="block"}else d.removeChild(s)}function n(){var t=e.utils.object.merge([e.thisScript.globalConf,arguments]);e.services.socialize.GrayOut(!1);for(var i in e._.plugins.instances){var n=e._.plugins.instances[i];n.isModal&&n.dispose()}for(var o in e.utils.DOM._popupContainers){var a=e.utils.DOM._popupContainers[o];null!=a&&(a.innerHTML="",a.parentNode&&(a.style.display="none"));var l=document.getElementById("gigya_ifr_"+o);null!=l&&(l.style.display="none")}if(e.events.global.dispatch({eventName:"HideUIRequested"}),"function"==typeof t.callback){var r={status:"OK",statusMessage:"",operation:"hideUI",context:t.context,errorMessage:"",errorCode:0};t.callback(r)}}t.GrayOut=i,t.hideUI=n}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i="gigya-"+e.localInfo.currentBrowser;e.localInfo.isIOS&&(i+=" ios"),i=i.replace(/ /g," gigya-"),e.localInfo.isNativeMobileApp&&(i="gigya-native-mobile-app "+i),e.utils.DOM.addClassToElement(t,i)}function n(t,i){var n=function(e){var t;e&&e.which?(e=e,t=e.which):(e=event,t=e.keyCode),13==t&&i.click()};e.utils.DOM.addEventListener(t,"keyup",n),e.utils.DOM.addEventListener(i,"keyup",n)}function o(e,t,i,n,o){var a={top:0,left:0,bottom:0,right:0};return"bottom"===i?(a.top=e.bottom+n,a.left=o?e.right-t.w:e.left):"top"===i?(a.top=e.top-t.h-n,a.left=o?e.right-t.w:e.left):"left"===i?(a.top=o?e.bottom-t.h:e.top,a.left=e.left-t.w-n):(a.top=o?e.bottom-t.h:e.top,a.left=e.right+n),a.bottom=a.top+t.h,a.right=a.left+t.w,a}function a(t,i,n,o,a,l){var r=e.utils.DOM.getElementPosition(t),s={w:i.offsetWidth,h:i.offsetHeight},d=this.getRelativePosition(r,s,n,o,a);if(l&&!e.utils.viewport.isRectFullyVisible(d)){var g={bottom:"top",left:"right",right:"left",top:"bottom"},c=this.getRelativePosition(r,s,g[n],o);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}if(!e.utils.viewport.isRectHorizontallyVisible(d)){var c=this.getRelativePosition(r,s,n,o,!a);e.utils.viewport.isRectHorizontallyVisible(c)&&(d=c)}i.style.left=""+d.left+"px",i.style.top=""+d.top+"px"}function l(t,i,n,o,a,l,r,s,d,g){if(void 0===n&&(n="bottom"),void 0===o&&(o=0),void 0===a&&(a=!1),void 0===l&&(l=!0),void 0===r&&(r=null),void 0===s&&(s=null),void 0===d&&(d=null),void 0===g&&(g="click"),t&&i){var c=document.createElement("div");return c.appendChild(i),c.style.position="absolute",c.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),c.style.left="-1000px",document.body.appendChild(c),this.placePopoverNearElement(t,c,n,o,a,l),e.pluginUtils.DOM.removeElementOnDocClick(c,s,d,g),r&&"function"==typeof e.pluginUtils.animation[r]&&e.pluginUtils.animation[r](i),c}}function r(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n="mousedown"),e){var o=function(i){var n=e&&e.parentNode;n&&e.parentNode.removeChild(e),t&&t(i,n)},a=[e];i&&(a=a.concat(i)),this.performOnDocClick(o,a,n)}}function s(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),e){var n=function(){e.style.display="none",t&&t()},o=[e];i&&o.concat(i),this.performOnDocClick(n,o)}}function d(t,i,n){void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n="mousedown");var o=function(a){for(var l=a.target||a.srcElement,r=!1;l&&l.parentNode;){if(i&&i.indexOf(l)!=-1){r=!0;break}l=l.parentNode}r||(e.utils.DOM.removeClassFromElement(document.body,"gig-clickable"),e.utils.DOM.removeEventListener(document,n,o),t&&t(a))};(e.localInfo.isIOS&&e.localInfo.isSafari||e.localInfo.isIOSWebView)&&(p||(e._.plugins.utils.css.addCss("*.gig-clickable {cursor: pointer;}",null),p=!0),e.utils.DOM.addClassToElement(document.body,"gig-clickable")),e.utils.DOM.addEventListener(document,n,o)}function g(e){e.style.display="none"}function c(e){e.style.display="block"}t.addBrowserInfoClassesToElement=i,t.setTextboxSubmitButton=n,t.getRelativePosition=o,t.placePopoverNearElement=a,t.addPopoverNearElement=l,t.removeElementOnDocClick=r,t.hideElementOnDocClick=s;var p=!1;t.performOnDocClick=d,t.hideElement=g,t.showElement=c}(i=t.DOM||(t.DOM={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t,i){if(!t.shim){var n=document.createElement("IFRAME");n.frameborder="0",n.frameBorder="0",n.allowtransparency=!0,n.style.position="absolute",n.update=function(o){if(n&&t){if(i)n.style.left=t.offsetLeft+"px",n.style.top=t.offsetTop+"px";else{var a=e.global._GetElementPos(t);n.style.left=a.left+"px",n.style.top=a.top+"px"}o&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px")}},n.update(!0),i?(n.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),t.style.zIndex=(e.utils.DOM._nextZIndex++).toString(),i.appendChild(n)):e.utils.DOM.appendToBody(n),t.shim=n}}function n(e){e&&e.shim&&e.shim.parentNode&&(e.shim.parentNode.removeChild(e.shim),e.shim=null)}function o(e,t,i,n){var o=e;if(!e.width||!e.height){var o=new Image;o.src=e.src}var a=function(){0==o.width?window.setTimeout(a,100):(o.width>o.height?e.style.width=t+"px":e.style.height=t+"px",e.style.display="",n&&n(e),i||(e.style.marginTop=(t-e.offsetHeight)/2+"px",e.style.marginLeft=(t-e.offsetWidth)/2+"px"))};o.width>0?a():(e.style.display="none",o.onload=function(){window.setTimeout(a,50)})}function a(t,i){for(var n in t){var o=t[n];if("string"==typeof o&&(t[n]=e.utils.templates.fill(t[n],i)),"mediaItems"==n)for(var a=0;a<o.length;a++)o[a].src&&(o[a].src=e.utils.templates.fill(o[a].src,i))}return t}function l(t,i,n){if(t){var o=function(){""==this.value&&(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",this.value=i,this.placeholderCleared=!1)},a=function(){if(!this.placeholderCleared)if(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.value="",this.placeholderCleared=!0,t.setSelectionRange)t.focus(),t.setSelectionRange(0,0);else if(t.createTextRange){var i=t.createTextRange();i.collapse(!0),i.moveEnd("character",0),i.moveStart("character",0),i.select()}};t.refreshPlaceholder=function(){t.value?(n?e.utils.DOM.removeClassFromElement(t,n):t.style.color="",this.placeholderCleared=!0):(n?e.utils.DOM.addClassToElement(t,n):t.style.color="#585858",t.value=i,this.placeholderCleared=!1)},e.utils.DOM.addEventListener(t,"blur",o),e.utils.DOM.addEventListener(t,"focus",a),e.utils.DOM.addEventListener(t,"change",o),t.refreshPlaceholder()}}t.addIframeShim=i,t.removeIframeShim=n,t.scaleImage=o,t.fillUserActionTemplate=a,t.setPlaceholder=l}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(e,t){var i=/(?:(?:https?):\/\/|www\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.;]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.;])*(?:\([-A-Z0-9+&@#\/%=~_;|$?!:,.;]*\)|[A-Z0-9+&@#\/%=~_|;$])/gim,n=e.match(i),o="";if(n)for(var a=0;a<n.length;a++){var l="";n[a].indexOf("http:")===-1&&n[a].indexOf("https:")===-1&&(l="http://");var r="";t&&(r=' class="'+t+'"');var s=e.substr(0,e.indexOf(n[a])+n[a].length);e=e.substr(s.length,e.length-s.length);var d=n[a].replace(/&#173;/g,"");o+=s.replace(n[a],"<a"+r+' href="'+l+d+'" target="_blank" rel="nofollow">'+n[a]+"</a>")}return e.length>0&&(o+=e),o}function n(e,t,i){switch(t){case"class":e.className=i;break;default:e.setAttribute(t,i)}}function o(t,i){var n="";return n=e.localInfo.isIE8?t.getAttribute(i):t.getAttributeNS("",i)}t.replaceLinksWithHTMLElements=i,t.setAttribute=n,t.getAttribute=o}(i=t.DOM||(t.DOM={}))}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(t){t.addedSafeCopy||(e.utils.DOM.addEventListener(t,"copy",function(t){t=t||window.event;var i=t.target||t.srcElement,n=i&&i.nodeName?i.nodeName.toLowerCase():"";if("textarea"!=n&&"input"!=n){var o=document.createElement("div");o.style.color=window.getComputedStyle?window.getComputedStyle(document.body).backgroundColor:"#FFFFFF",o.style.fontSize="0px",e.utils.DOM.appendToBody(o);var a,l,r=new RegExp("(&shy;|"+String.fromCharCode(173)+")","g");if(window.getSelection){t.stopPropagation(),a=window.getSelection();var s=a.getRangeAt(0);o.appendChild(s.cloneContents()),o.innerHTML=o.innerHTML.replace(r,""),a.selectAllChildren(o);var d=function(){o.parentNode.removeChild(o),a.removeAllRanges(),a.addRange(s)}}else t.cancelBubble=!0,a=window.document.selection,s=a.createRange(),o.innerHTML=s.htmlText,o.innerHTML=o.innerHTML.replace(r,""),l=document.body.createTextRange(),l.moveToElementText(o),l.select(),d=function(){o.parentNode.removeChild(o),""!==s.text&&s.select()};window.setTimeout(d,0)}}),t.addedSafeCopy=!0)}t.enableSafeCopy=i}(i=t.DOM||(t.DOM={}))}(t=e.utils||(e.utils={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}t.fixCss=i}(i=t.css||(t.css={}));var n;!function(t){function i(t,i,n){void 0===n&&(n=0),(isNaN(n)||n<0)&&(n=0);var o=document.getElementById("gigya_ruler"),a=document.getElementById("gigya_ruler_text");null==o&&(o=document.createElement("div"),a=document.createElement("span"),o.id="gigya_ruler",a.id="gigya_ruler_text",o.style.visibility="hidden",o.style.position="absolute",o.style.margin="0px",o.style.padding="0px",o.appendChild(a),e.utils.DOM.appendToBody(o)),i&&(o.style.lineHeight=i.size+"px",o.style.fontFamily=i.font,o.style.fontSize=i.size+"px",o.style.fontWeight="true"==(""+i.bold).toLowerCase()?"bold":""),n?(o.style.whiteSpace="",o.style.width=""+n+"px"):(o.style.whiteSpace="nowrap",o.style.width="auto"),o.style.overflow="hidden",o.style.display="",a.innerHTML=t;var l=a.offsetWidth,r=a.offsetHeight;return 0!=l&&0!=r||(l=o.offsetWidth,r=o.offsetHeight),o.style.display="none",{w:l,h:r}}t.measureText=i}(n=t.layout||(t.layout={}));var o;!function(e){function t(e){return void 0===e&&(e=void 0),e&&e.replace?e.replace(/\r/,"").replace(/\n/g,"\r\n"):e}function i(e){var t=e.lastIndexOf(" ");return t===-1?e:e.substr(0,t)+"&nbsp;"+e.substr(t+1)}e.normalizeLinebreaks=t,e.fixTextWidows=i}(o=t.text||(t.text={}))}(t=e.pluginUtils||(e.pluginUtils={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){var i=document.createElement("div");i.className=t,e.utils.DOM.appendToBody(i);var n=e.global.getBordersAndPaddings(i);return i.parentNode.removeChild(i),n}function n(t){var i=function(i){var n=parseInt(e.global.getStyle(t,i));return isNaN(n)&&(n=0),n};return{w:i("border-left-width")+i("border-right-width")+i("padding-right")+i("padding-left"),h:i("border-top-width")+i("border-bottom-width")+i("padding-top")+i("padding-bottom")}}function o(e,t){return e.currentStyle?e.currentStyle[t]:window.getComputedStyle?document.defaultView.getComputedStyle(e,null).getPropertyValue(t):void 0}function a(t,i,n){i||(t.parentNode.style.textAlign="left",t.parentNode.style.verticalAlign="top");var o=function(i){for(var n=t.parentNode,o=e.global.getStyle(n,i);"auto"==o;)n=n.parentNode,o=e.global.getStyle(n,i);var a=parseInt(o);return isNaN(a)&&(a=0),a},a=Math.min(o("width"),o("height"));if(e.localInfo.quirksMode){var l=e.global.getBordersAndPaddings(t.parentNode),r=o("width")-l.w,s=o("height")-l.h;a=Math.min(r,s)}e.global.scaleImage(t,a,i,n)}function l(t,i,n){var o=document.createElement("div");o.className=t,e.utils.DOM.appendToBody(o);var a=e.global.getBordersAndPaddings(o);return i-=a.w,n-=a.h,o.parentNode.removeChild(o),{w:i,h:n}}function r(e,t,i,n,o,a,l){this.src=e,this.srcTemplate=t,this.spriteData=i,this.spriteW=n,this.spriteH=o,this.pixelRatio=a,this.spriteLength=l}function s(t){var i=[],n=0,o={};for(var a in t){var l=t[a];l.pixelRatio||(l.pixelRatio=1),i.push(l.path+"|"+l.w*l.pixelRatio+","+l.h*l.pixelRatio)}var r=e._.getCdnResource("/gs/GetSprite.ashx?path="+encodeURIComponent(i.join("^").replace(/\[\]/,"")));for(var a in t){var l=t[a],s={};s.spriteData={};var d=/\[(.*?)\]/g,g=[],c=0;s.srcTemplate=e._.getCdnResource("/gs/i"+l.path.replace(d,function(e,t){return g.push(t.split(",")),"{"+c++ +"}"}));var p=e.global.getCombination(g);0==p.length&&p.push([""]);for(var u=0;u<p.length;u++){var h=p[u].join("-");""==h&&(h="default"),s.spriteData[h]={groupId:a,id:h,x:n,w:l.w,h:l.h},n+=l.w}o[a]=new e.global.SpriteRenderer(r,s.srcTemplate,s.spriteData,l.w,l.h,l.pixelRatio,p.length)}return o}t.getClassBordersAndPaddings=i,t.getBordersAndPaddings=n,t.getStyle=o,t.scaleImageToContainer=a,t.getClassInnerSize=l,t.SpriteRenderer=r,r.prototype={getSpriteData:function(e,t){var i=this.spriteData[e];if(i&&!t)return this.spriteData[e];var n=0,o=e.split("-"),a=/\{(.*?)\}/g,l=this.srcTemplate.replace(a,function(e,t){var i=o[n++];return i?i:""});return{isSingleImage:!0,src:l}},getStyleString:function(e,t){var i=this.getSpriteData(e),n=[];return i&&(n.push("background-image:url('"+this.src+"');"),n.push("background-position:-"+i.x+"px 0px;"),this.pixelRatio>1&&n.push("background-size:"+this.spriteLength*this.spriteW+"px "+this.spriteH+"px;"),t&&n.push("margin: 0 auto;"),n.push("width: "+this.spriteW+"px;"),n.push("height: "+this.spriteH+"px;line-height: "+this.spriteH+"px;"),n.push("background-repeat:no-repeat;"),n.push("position:static;")),n.join("")},getHTML:function(e,t,i,n,o){void 0===n&&(n=""),void 0===o&&(o="");var a=this.getSpriteData(e,i),l=[];return l.push('<button aria-label="'+o+'" type="button" class="tabbing-button" style="height:'+this.spriteH+'px;">'),a&&(a.isSingleImage?l.push('<img src="'+a.src+'" style="width:'+this.spriteW+"px;height:"+this.spriteH+'px;position:static;margin:0" alt="'+o+'" />'):(l.push('<div style="'),l.push(this.getStyleString(e,t)),l.push('"'),n&&l.push(' id="'+n+'"'),l.push("></div>"))),l.push("</button>"),l.join("")}},t.getSpriteRenderers=s}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i;!function(t){function i(t){return(e.localInfo.isIE7||e.localInfo.isIE&&e.localInfo.quirksMode)&&(t=t.replace(/display:inline-block/g,"display:inline-block;zoom:1;*display:inline")),t.replace(/gradient\((.*?),(.*?)\)/g,'filter: progid:DXImageTransform.Microsoft.gradient(startColorstr="$1", endColorstr="$2");background: linear-gradient(top,  $1,  $2);background: -ms-linear-gradient(top left, $1, $2);background: -webkit-gradient(linear, left top, left bottom, from($1), to($2));background: -moz-linear-gradient(top,  $1,  $2)')}function n(t,i,n,a){if(void 0===n&&(n=!0),t&&""!=t&&(t instanceof Array&&(t=t.join(" ")),i&&(t=t.replace(/([^\s}]*\.gig)/g,i+" $1")),a||(a=e.utils.object.getMurmurHash(t).toString()),!o[a]||n)){o[a]=!0;var l=document.createElement("style");l.type="text/css";var r=document.createTextNode(t);l.styleSheet?null!=r.value?l.styleSheet.cssText=r.value:l.styleSheet.cssText=r.nodeValue:l.appendChild(r);var s=document.getElementsByTagName("head"),d=document.body;(s.length>0?s[0]:d).appendChild(l)}}t.fixCss=i;var o={};t.addCss=n}(i=t.css||(t.css={})),e.utils.functions.createAlias("gigya.global.addCSS",i.addCss),e.utils.functions.createAlias("gigya.pluginUtils.css.fixCss",i.fixCss)}(i=t.utils||(t.utils={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){function t(e,t){var i="";return i+="line-height: normal;",t&&(i+="cursor:pointer;"),e.underline&&(i+="text-decoration:underline;"),e.font&&(i+="font-family:"+e.font+";"),e.size&&(i+="font-size:"+e.size+"px;"),e.color&&(i+="color:"+e.color+";"),e.bold&&(i+="font-weight:bold;"),e["frame-thickness"]&&(i+="border-style:solid; border-width:"+e["frame-thickness"]+"px;"),e["frame-color"]&&(i+="border-color:"+e["frame-color"]+";"),e["background-color"]&&(i+="background-color:"+e["background-color"]+";"),i}e.getStyleString=t}(t=e.socialize||(e.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){function i(e,t){for(var i=[],n=0,o=function(){n++,n==e.length&&t()},a=0;a<e.length;a++)if(null==e[a])o();else{var l=new Image;l.onload=o,l.onerror=o,l.src=e[a],i.push(l)}}function n(e,t){for(var i="",n=[],o=/\<(\/)?([^ \/>]+)[ ]?[^>]*(\/)?\>/i,a=0,l=0;l<e.length&&(a<t||0==t);){var r=e.substr(l,1);if("<"==r){var s=e.indexOf(">",l),d=e.substring(l,s+1);o.lastIndex=0;var g=o.exec(d),c=g[2].toLowerCase();if("/"==g[1])n.length>0&&n[n.length-1].tagname==c&&n.pop();else if("/"==g[3]);else{var p="</"+g[2]+">";n.length>0&&(p+=n[n.length-1].cl),n.push({tagname:g[2],cl:p})}i+=g[0],l+=g[0].length-1}else if("&"==r){var u=e.indexOf(";",l);u-l>8?i+="&":(i+=e.substring(l,u+1),l=u),a++}else i+=r,a++;l++}return a<t?e:i+"&#133;"+(n.length>0?n[n.length-1].cl:"")}function o(t,i){if(i&&!t&&(t=i),!t)return t;var n=document.createElement("a");return n.href=t,"http:"===n.protocol&&"https"===e.localInfo.protocol?e.utils.array.indexOf(e._.CDN_HOSTS.http,n.host)!==-1?e._.getCdnResource(n.pathname+n.search+n.hash):e._.getCdnResource("/proxy/photos.ashx?u="+e.utils.URL.URLEncode(t)):t}function a(e,t){e=e.replace(/\n/g,"\n ");for(var i=e.split(" "),n="&#173;",o=0;o<i.length;o++)if(i[o].length>t){for(var a,l=n,r=i[o].split(""),s=!1,d=-1,g=0;g<r.length;g+=1)s||d++,d==t&&(r.splice(g,0,l),d=-1),"&"==r[g]?(s=!0,a=";"):"<"==r[g]&&(s=!0,a=">"),s&&r[g]==a&&(s=!1);i[o]=r.join("")}return i.join(" ").replace(/\n /g,"\n")}function l(e){var t=navigator.userAgent.toLowerCase(),i=t.indexOf("opera")!=-1;t.indexOf("msie")!=-1&&!i;if(null===e.parentNode||"none"==e.style.display)return!1;var n,o=null,a=[];if(e.getBoundingClientRect){n=e.getBoundingClientRect();var l=Math.max(document.documentElement.scrollTop,document.body.scrollTop),r=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:n.left+r,y:n.top+l}}if(document.getBoxObjectFor){n=document.getBoxObjectFor(e);var s=e.style.borderLeftWidth?parseInt(e.style.borderLeftWidth):0,d=e.style.borderTopWidth?parseInt(e.style.borderTopWidth):0;a=[n.x-s,n.y-d]}else{if(a=[e.offsetLeft,e.offsetTop],o=e.offsetParent,o!=e)for(;o;)a[0]+=o.offsetLeft,a[1]+=o.offsetTop,o=o.offsetParent;(t.indexOf("opera")!=-1||t.indexOf("safari")!=-1&&"absolute"==e.style.position)&&(a[0]-=document.body.offsetLeft,a[1]-=document.body.offsetTop)}for(o=e.parentNode?e.parentNode:null;o&&"BODY"!=o.tagName&&"HTML"!=o.tagName;)a[0]-=o.scrollLeft,a[1]-=o.scrollTop,o=o.parentNode?o.parentNode:null;return{x:a[0],y:a[1]}}function r(t){var i=e.global.getPos(t);return{left:i.x,top:i.y}}t.preloadImages=i,t.applyEllipsis=n,t.getPhotoURL=o,t.wbr=a,t.getPos=l,t._GetElementPos=r}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,o){return e=n(e,t),e=i(e,t,o)}function i(e,t,i){var n="#";if(e.indexOf("#")!=-1){if(e.indexOf(t)!=-1){var o=t+"="+this.getHashParamValue(e,t);return e.replace(o,t+"="+i),e}n="&"}return e+n+t+"="+i}function n(e,t){if(e.indexOf("#")==-1)return e;var i=e.split("#")[1],n=o(e,t);n&&(i=i.replace(t+"="+n,"")),i=i.replace("&"+t,""),i=i.replace("#"+t,"#"),i.length>0&&(i=i.substring(1,i.length));var a=e.split("#")[0];return 0==i.length?a:a+"#"+i}function o(e,t){if(t+="=",e.indexOf("#")==-1||e.indexOf(t,e.indexOf("#"))==-1)return null;var i=e.indexOf(t,e.indexOf("#")),n=e.indexOf("&",i);return n==-1&&(n=e.length),e.substring(i+t.length,n)}e.addOrReplaceHashFragment=t,e.addHashFragment=i,e.removeHashFragment=n,e.getHashParamValue=o}(t=e.URL||(e.URL={}))}(t=e.utils||(e.utils={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(t){var i;!function(t){function i(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.scrollTop;0==o&&(o=n.scrollTop);var a=i.scrollLeft;0==a&&(a=n.scrollLeft);var l=i.clientHeight;0==l&&(l=n.clientHeight);var r=i.clientWidth;0==r&&(r=n.clientWidth),e.localInfo.isIE6&&(r-=1),t.style.top=o.toString(),t.style.left=a.toString()}}function n(){var t=document.getElementById("darkenScreenObject");if(t){var i=document.documentElement,n=document.body,o=i.clientHeight;0==o&&(o=n.clientHeight);var a=i.clientWidth;0==a&&(a=n.clientWidth),e.localInfo.isIE6&&(a-=1),t.style.width=""+a+"px",t.style.height=""+o+"px"}}function o(t,i,n,o){var a=e.services.socialize._parseRID(t),l=a.req,r=l.p,s=l.c;e.utils.validation.isExplicitFalse(r.showCaption)&&(o=!0);var d=e.services.socialize,g=document.getElementById(r.containerID);l.container=g;var c=i.Resolve("+/config/body/background"),p=i.Resolve("+/config/body/captions"),u='<table style="'+d.getStyleString(c)+';empty-cells:show;" cellpadding="0" cellspacing="0" >';o?u+="<tr><td>":(u+='<tr style="'+d.getStyleString(p)+'"><td><table style="width:100%" width="100%" cellpadding="0" cellspacing="0"><tr id="'+r.containerID+'_caption"><td style="vertical-align:middle"><div style="'+d.getStyleString(p)+';padding:7px">'+n+'</div></td><td style="vertical-align:middle">',
u+='<div align="right" style="padding-right: 7px; cursor: pointer;'+d.getStyleString(p)+'"><img onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);"  src="'+e._.getCdnResource("/gs/i/HTMLLogin/closeIcon.gif")+'" alt="" /></div></td></tr></table></td></tr><tr><td colspan="2">'),u+='<div id="'+r.containerID+'_container"></div></td></tr></table>',g.innerHTML=u;var h={},f={};for(var m in r)h[m]=r[m];for(m in s)f[m]=s[m];var y=document.getElementById(h.containerID+"_caption");return h.height=h.height-2*c["frame-thickness"],o||(h.height-=y.offsetHeight),h.width=h.width-2*c["frame-thickness"],e.utils.DOM._popupContainers[h.containerID]=g,h.containerID=h.containerID+"_container",{c:f,p:h}}function a(t,i,n,o,a,l){var r=e.services.socialize._parseRID(t),s=r.req,d=s.p,g=s.c,c=e.services.socialize,p=document.getElementById(d.containerID);s.container=p;var u=i.Resolve("+/config/body/captions");n||(n=10),o||(o=e._.getCdnResource("/gs/i/Dialog/DialogBg_"));var h,f="width:"+n+"px;height:"+n+"px";l&&(h="1px solid #555555");var m='<table style="font-size:1px;padding:0px;margin:0px;vertical-align:middle;font-size:1px;line-height:1px;empty-cells:show;" cellpadding="0" cellspacing="0" >';m+='<tr><td height="'+n+'" style="font-size:1px"><div style="height:'+n+'px"><img src="'+o+'TopLeft.png" style="'+f+'" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'TopRight.png" alt="" /></div></td></tr>',a&&(m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><table width="100%" cellspacing="0" cellpadding="0" style="border-top:'+h+";border-left:"+h+";border-right:"+h+';width:100%;background-color:#FFFFFF"><tr><td style="padding-top:10px;padding-left:10px;'+c.getStyleString(u)+'">'+a+'</td><td align="right" valign="top" style="'+c.getStyleString(u)+'"><div style="padding-right:5px;padding-top:5px;text-align:right;"><img style="cursor:pointer" onclick="gigya.services.socialize._closeComponent(\''+t+'\', true);" src="'+o+'close.png" alt="" /></div></td></tr></table></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>"),m+="<tr><td style=\"background-image:url('"+o+'filler.png\');background-repeat:repeat"></td><td><div style="border-bottom:'+h+";border-left:"+h+";border-right:"+h+';background-color:#FFFFFF" id="'+d.containerID+'_container"></div></td><td style="background-image:url(\''+o+"filler.png');background-repeat:repeat\"></td></tr>",m+='<tr><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomLeft.png" alt="" /></div></td><td height="'+n+'" style="background-image:url(\''+o+'filler.png\');bakground-repeat:repeat"></td><td height="'+n+'" style="font-size:1px;"><div style="height:'+n+'px"><img style="'+f+'" src="'+o+'BottomRight.png" alt="" /></div></td></tr></table>',p.innerHTML=m;var y={},v={};for(var b in d)y[b]=d[b];for(b in g)v[b]=g[b];return e.utils.DOM._popupContainers[y.containerID]=p,y.containerID=y.containerID+"_container",y.height=y.height-2*n,a&&(""==a.replace(/ /g,"")?y.height-=10:y.height-=e.pluginUtils.layout.measureText(a,u).h+10),y.width=y.width-2*n,{c:v,p:y}}function l(t){var i,n=t.split("@"),o=document.getElementById(n[2]+"_"+n[1]),a=n[2];null==(i=e.utils.DOM._pseudoContainers[a])&&(i=document.getElementById(n[2]));var l=null;null!=i&&(l=i.Reqs);var r=null;return null!=l&&(r=l[parseInt(n[0])]),{rid:t,container:i,Reqs:l,req:r,swf:o}}t._fixGrayPosition=i,t._fixGraySize=n,t._createJSPopup=o,t._createJSPopup2=a,t._parseRID=l}(i=t.socialize||(t.socialize={}))}(t=e.services||(e.services={}))}(gigya||(gigya={})),gigya.socialize._closeComponent=function(e,t){var i=gigya.socialize._parseRID(e),n=i.req;gigya.socialize.GrayOut&&gigya.socialize.GrayOut(!1);var o=document.getElementById("gigya_ifr_"+n.container.id);null!=o&&(o.style.display="none"),t&&gigya.events.dispatchForWidget({eventName:"close"},n.p),n.container.style.display="none"},gigya.utils.object.add(gigya.pluginUtils.lang,{getDateString:function(e,t){if(e&&e.dateFormat){var i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=e.dateFormat,o=t.getDate(),a=t.getMonth()+1,l=i[t.getMonth()],r=t.getFullYear();return n.replace(/%dd/g,("0"+o).slice(-2)).replace(/%d/g,o).replace(/%MMMM/g,l).replace(/%MMM/g,l.substr(0,3)).replace(/%MM/g,("0"+a).slice(-2)).replace(/%M/g,a).replace(/%yyyy/g,r).replace(/%yy/g,r.toString().slice(-2))}}});var gigya;!function(e){var t;!function(t){var i;!function(t){function i(t){var i=null;if(window.ActiveXObject&&(e.localInfo.isIE8||e.localInfo.isIE9))try{i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t)}catch(t){e.log.addLog("Failed to create Microsoft.XMLDOM ActiveX parser",t)}else{var n=new DOMParser;i=n.parseFromString(t,"text/xml")}return i}function n(e,t,i,n){if("undefined"==typeof i&&(i=""),"undefined"==typeof t&&(t={}),null!=n)for(var o in e)t[i+o]=n(o,e[o]);else for(var a in e)t[i+a]=e[a];return t}function o(e,t,i,n,o){for(var a=0;a<t.length&&"undefined"!=typeof e;a++)e=e.childNodes[t[a]],null!=e&&n&&this.CopyProperties(e.attributes,i,"",o);"undefined"!=typeof e&&this.CopyProperties(e.attributes,i,"",o)}function a(e,t){"undefined"==typeof t.attributes&&(t.attributes={}),"undefined"==typeof t.childNodes&&(t.childNodes={});var i=t.attributes,n=e.attributes;if(n)for(var o=0;o<n.length;o++)null!=n[o].value?i[n[o].nodeName]=n[o].value:i[n[o].nodeName]=n[o].nodeValue;for(var a,l=0;l<e.childNodes.length;l++){var r=e.childNodes[l];a=t.childNodes[r.nodeName],"undefined"==typeof a&&(a=t.childNodes[r.nodeName]={attributes:{},childNodes:{}}),this.mergeNodes(r,a)}return t}t.CreateXMLFromString=i,t.CopyProperties=n,t.CollectAttributesFromXMLPathToObject=o,t.mergeNodes=a}(i=t.XMLUtils||(t.XMLUtils={}))}(t=e.global||(e.global={}))}(gigya||(gigya={})),function(e){var t;!function(t){function i(t){this.configurations=[],this.mergedConfig={},this.isMerged=!0,this._processor=t,this.merge=function(){if(!this.isMerged){this.mergedConfig={attributes:{},childNodes:{}};for(var t=0;t<this.configurations.length;t++){var i=this.configurations[t];e.global.XMLUtils.mergeNodes(i,this.mergedConfig)}this.isMerged=!0}},this.Resolve=function(t,i){this.merge&&this.merge();var n={};"object"==typeof arguments[arguments.length-1]&&(n=arguments[arguments.length-1]);for(var o=0;o<arguments.length;o++){var a=arguments[o],l=a.constructor;if(l==String)for(var r=a.split("|"),s=r.length-1;s>=0;s--){var d=this.trimCharsAtSuffix(this.trimCharsAtPrefix(r[s]," \n\r\t")," \n\r\t"),g="+"==d.charAt(0),c=d.split("/").slice(1);g&&(d=d.substring(1)),e.global.XMLUtils.CollectAttributesFromXMLPathToObject(this.mergedConfig,c,n,g,this._processor)}else if(l==Array)for(var p=0;p<a.length;p++)this.Resolve(a[p],n)}return n},this.trimCharsAtPrefix=function(e,t){var i=0;if("undefined"==typeof e||0==e.length)return"";for(var n=e.length;i<=n&&t.indexOf(e.charAt(i))>-1;)i++;return e.substring(i,n)},this.trimCharsAtSuffix=function(e,t){if("undefined"==typeof e||0==e.length)return"";for(var i=e.length-1;i>=0&&t.indexOf(e.charAt(i))>-1;)i--;return e.substring(0,i+1)},this.addConfig=function(t){"string"==typeof t&&(this.configurations.push(e.global.XMLUtils.CreateXMLFromString(t)),this.isMerged=!1)},this.getTextFromKey=function(e){return this.Resolve("/config/lang/"+e).text}}t.resolver=i,function(e){function t(e,t){var i=e.toLowerCase(),n=i.indexOf("-");switch(n!=-1&&(i=i.substring(n+1,i.length)),i){case"bold":case"italic":case"underline":return"true"==t.toString().toLowerCase();case"width":case"height":return t.replace("%","");case"size":return parseInt(t);default:return t}}e.defaultProccessor=t}(i=t.resolver||(t.resolver={}))}(t=e.global||(e.global={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){function i(t){var i=[];for(var n in t)i.push(e._.plugins.resources.html[t[n]]);return e.utils.object.merge(i)}function n(t){var i=[];for(var n in t)i.push(e._.plugins.resources.css[t[n]]);return e.utils.object.merge(i)}t.getTemplates=i,t.getCss=n}(i=t.resources||(t.resources={}))}(i=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));// Injected language object
if (!gigya.i18n) gigya.i18n = { };
if (!gigya.i18n['gigya.services.accounts.plugins.screenSet.js']) gigya.i18n['gigya.services.accounts.plugins.screenSet.js'] = { };
gigya.i18n['gigya.services.accounts.plugins.screenSet.js']['en'] = {"login_identifier_exists": "Login identifier exists", "unique_identifier_exists": "Unique identifier exists", "account_temporarily_locked_out": "Account temporarily locked out", "wrong_password": "Wrong password", "old_password_cannot_be_the_same_as_new_password": "Old password cannot be the same as New Password", "choose_file": "Choose File", "no_file_chosen": "No file chosen", "maximum_size_of_3mb.": "Maximum size of 3MB.", "there_are_errors_in_your_form_please_try_again": "There are errors in your form, please try again", "sorry_we_are_not_able_to_process_your_registration": "Sorry, we are not able to process your registration", "invalid_login_or_password": "Invalid login or password", "account_is_disabled": "Account is disabled", "email_already_exists": "Email already exists", "your_age_does_not_meet_the_minimal_age_requirement": "Your age does not meet the minimal age requirement (13+) for this site", "there_is_no_user_with_that_username_or_email": "There is no user with that username or email", "password_must_contain_at_least": "Password must contain at least", "and": "and", "num_of_the_following_groups": "%num of the following: An uppercase letter, a lowercase letter, a number, a special symbol", "num_characters_total": "%num characters", "too_weak": "Too weak", "checking": "Checking", "email_address_is_invalid": "E-mail address is invalid.", "password_does_not_meet_complexity_requirements": "Password does not meet complexity requirements", "the_characters_you_entered_didn't_match_the_word_verification._please_try_again": "The characters you entered didn't match the word verification. Please try again", "invalid_username_or_password": "Invalid username or password", "username_already_exists": "Username already exists", "passwords_do_not_match": "Passwords do not match", "please_enter_fieldname": "Please enter %fieldname", "these_passwords_do_not_match": "These passwords do not match", "this_field_is_required": "This field is required", "invalid_fieldname": "Invalid %fieldname", "very_strong": "Very strong", "strong": "Strong", "fair": "Fair", "weak": "Weak", "password_strength_colon": "Password strength:", "not_available": "Not available", "available": "Available", "network_error": "Network error, please try again later.", "please_enter_a_valid_fieldname": "Please enter a valid %fieldname", "profilePhoto_fileSizeError": "Photo format: JPG/GIF/PNG. Size: up to 3MB.", "subscription_pending_confirmation": "Pending Confirmation"};
// End injected language object

gigya._.UI.registerPlugin(function() {
gigya = window.gigya;
var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.captcha='<div id="${recaptchaContainerID}"></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.consent='<div class="consent"><div class="gigya-consent-title">${label}</div><div class="gigya-consent-subtitle">${docId}</div><span class="gigya-consent-text">Approved on</span> <span class="gigya-consent-text">${approved}</span></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.inlinedPasswordStrength='<div class="gigya-password-strength" data-on-focus-bubble="true" data-bubble-orientation="${orientation}"></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.passwordStrength='<div class="${scoreClass}" aria-live="polite">${content}</div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.passwordStrength_minimumRequirements='<div class="gigya-passwordStrength-text-requirements">$requirements</div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.passwordStrength_strengthMeter='<div class="gigya-passwordStrength-text"><span class="gigya-passwordStrength-text">$TEXT(\'password_strength_colon\')</span> <span class="gigya-passwordStrength-text gigya-passwordStrength-scoreText">${scoreText}</span></div><div class="gigya-passwordStrength-bar"><div class="${barIndicatorClass}"></div></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.photoUpload_form='<form enctype="multipart/form-data" method="post" class="gigya-photo-upload-form" target="${formTarget}" action=""><input type="file" accept="image/*" name="_profilePhoto"></form>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.photoUpload_ui='<div class="gigya-photo-upload-image" id="${photoElementID}"></div><div><div class="gigya-photo-upload-button">$choose_file</div><div class="gigya-photo-upload-path" id="${pathContainerID}">$no_file_chosen</div><div class="gigya-photo-upload-text">$tip</div></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.screenSet='<h1 class="gigya-screen-caption" id="${innerContainerID}_caption"></h1><div id="${childContainerID}" class="gigya-hidden"></div><div id="${innerContainerID}" class="gigya-screen-content"></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.screenSet_dialog='<div id="${innerContainerID}" class="gigya-screen-content"></div>'}(t=e.screenSet||(e.screenSet={}))}(t=e.html||(e.html={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={})),function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.defaultCSS='.gigya-consent-subtitle,.gigya-consent-title{display:block;font-family:arial;font-weight:700}.gigya-consent-title{font-size:15px}.gigya-consent-subtitle{font-size:13px}.gigya-consent-text{display:inline-block}.gigya-composite-control-captcha-widget iframe{width:100%}.gigya-reset *,.gigya-reset a:active,.gigya-reset a:hover,.gigya-reset a:link,.gigya-reset a:visited,.gigya-reset span,div.gigya-reset{border:none;padding:0;margin:0;text-decoration:none;width:auto;float:none;-moz-border-radius:0;border-radius:0;font-family:arial;font-size:12px;color:#333;text-align:left}.gigya-screen .gigya-error-msg{color:#DD4B39;font-size:11px;display:block;visibility:hidden}.gigya-screen .gigya-error-msg.gigya-error-msg-active{color:#DD4B39;font-size:11px;display:block;visibility:visible}.gigya-screen .gigya-terms-error,.gigya-screen input.gigya-error,.gigya-screen input[type=email].gigya-error,.gigya-screen input[type=password].gigya-error,.gigya-screen input[type=text].gigya-error,.gigya-screen select.gigya-error{padding:5px;border-radius:5px;border:1px solid #DD4B39;-webkit-box-shadow:none!important;-moz-box-shadow:none!important;box-shadow:none!important}.gigya-screen input.gigya-error[type=checkbox],.gigya-screen input.gigya-error[type=radio]{padding:0}.gigya-screen input:disabled,.gigya-screen input[disabled]{background-color:#e1e1e1;color:#4a4a4a;border-color:#ccc}div.gigya-attach-file-upload-form{position:absolute;overflow:hidden;font-size:50px;cursor:pointer;filter:alpha(opacity=0);opacity:0}div.gigya-photo-upload-form>input{font-size:500px;direction:rtl;height:100%;cursor:pointer}.gigya-password-strength-bubble .gig-balloon-nub{background-image:url(${imgBase}/screenSet/triangle_left.png);height:16px;width:10px;left:+2px}.gigya-password-strength-bubble .gig-balloon-nub-up{background-image:url(${imgBase}/screenSet/triangle_up.png);height:10px;width:16px;top:+2px}.gigya-password-strength-bubble .gig-balloon-nub-right{background-image:url(${imgBase}/screenSet/triangle_right.png);height:16px;width:10px;left:-2px}.gigya-password-strength-bubble .gig-balloon-nub-down{background-image:url(${imgBase}/screenSet/triangle_down.png);height:10px;width:16px;top:-2px}.gigya-password-strength-bubble .gig-balloon-frame{background-color:#F3F5F6;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;border:1px solid #BFCFDA;-webkit-box-shadow:inset 0 0 1px 1px RGBA(0,0,0,.05);-moz-box-shadow:inset 0 0 1px 1px RGBA(0,0,0,.05);box-shadow:inset 0 0 1px 1px RGBA(0,0,0,.05)}.gigya-password-strength-bubble .gig-balloon{position:relative}.gigya-password-strength-bubble.gig-balloon-left .gig-balloon{left:+10px;top:+3px}.gigya-password-strength-bubble.gig-balloon-right .gig-balloon{left:-10px;top:+3px}.gigya-password-strength-bubble.gig-balloon-up .gig-balloon{left:-5px;top:+17px}.gigya-password-strength-bubble.gig-balloon-down .gig-balloon{left:-5px;top:-12px}.gigya-passwordStrength-text{text-align:center}span.gigya-passwordStrength-text{font-weight:700;display:inline-block}div.gigya-passwordStrength-text-requirements{text-align:center;width:100%;margin-top:8px}span.gigya-passwordStrength-scoreText{margin-left:3px}.gigya-passwordStrength-too_weak .gigya-passwordStrength-scoreText,.gigya-passwordStrength-weak .gigya-passwordStrength-scoreText{color:#e76468}.gigya-passwordStrength-fair .gigya-passwordStrength-scoreText{color:#d99b4b}.gigya-passwordStrength-strong .gigya-passwordStrength-scoreText,.gigya-passwordStrength-very_strong .gigya-passwordStrength-scoreText{color:#4ababc}div.gigya-passwordStrength-bar{width:100%;height:1px;background-color:#b6b6b6;margin-top:8px}div.gigya-passwordStrength-bar-too_weak{width:20%;height:100%;background-color:#e76468}div.gigya-passwordStrength-bar-weak{width:40%;height:100%;background-color:#e76468}div.gigya-passwordStrength-bar-fair{width:60%;height:100%;background-color:#d99b4b}div.gigya-passwordStrength-bar-strong{width:80%;height:100%;background-color:#4ababc}div.gigya-passwordStrength-bar-very_strong{width:100%;height:100%;background-color:#4ababc}.gigya-calculate-size{position:absolute!important;-ms-zoom:1!important;zoom:1!important;left:10px!important;top:-1000px!important}.gigya-calculate-size div.gigya-captcha{min-width:318px;min-height:80px;_width:318px;_height:80px}.gigya-calculate-size div.gigya-captcha.v2{min-height:80px;_height:80px}.gigya-calculate-size div.gigya-social-login{min-width:110px;min-height:120px;_width:110px;_height:120px}.gigya-calculate-size div.gigya-tfa{min-width:325px;min-height:200px;_width:325px;_height:200px}div.gigya-container{display:none}div.gigya-container.gigya-container-enabled{display:block}div.gigya-loginID-availability{line-height:18px;background-repeat:no-repeat;background-position:left center}div.gigya-loginID-availability-available{padding-left:17px;background-image:url(${imgBase}/accounts/ok.png);color:#4FA373}div.gigya-loginID-availability-not-available{padding-left:16px;background-image:url(${imgBase}/accounts/error.png);color:#DD4B39}div.gigya-loginID-availability-progress{padding-left:20px;background-image:url(${imgBase}/accounts/smallLoader.gif);color:#666}div.gigya-profile-photo{border-radius:3px}.gigya-calculate-size div.gigya-profile-photo{min-width:64px;min-height:64px}div.gigya-screen-dimmer{position:absolute;opacity:.5;filter:\'alpha(opacity=50)\';background-color:#FFF}div.gigya-screen-loader{position:absolute;background:url(${imgBase}/accounts/bigLoader.gif) center center no-repeat;min-height:32px;min-width:32px}div.gigya-screen-dialog-content{overflow:auto;padding:25px}div.gigya-screen-dialog-mobile div.gigya-composite-control-captcha-widget{padding:0}div.gigya-screen-dialog-mobile .gigya-screen{width:100%}div.gigya-secret-question{display:none}div.gigya-photo-upload{height:63px;width:300px;zoom:1}div.gigya-photo-upload-button{display:inline-block;zoom:1;margin:0 8px 8px 0;border:1px solid #CECECE;cursor:pointer;padding:0 12px;color:#333;font-weight:700;border-radius:4px;line-height:28px;background:#F2F2F2;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#FFFFFF", endColorstr="#F2F2F2");background:-webkit-gradient(linear,left top,left bottom,from(#FFF),to(#F2F2F2));background:-moz-linear-gradient(top,#FFF,#F2F2F2)}div.gigya-photo-upload-button:hover{background:#FFF;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr="#F2F2F2", endColorstr="#FFFFFF");background:-webkit-gradient(linear,left top,left bottom,from(#F2F2F2),to(#FFF));background:-moz-linear-gradient(top,#F2F2F2,#FFF)}div.gigya-photo-upload-text{font-size:11px;color:#666}div.gigya-photo-upload-image{border-radius:6px;background-position:center center;background-repeat:no-repeat;width:64px;height:64px;background-color:#F2F2F2;float:left;margin-right:8px}div.gigya-photo-upload-path{white-space:nowrap;width:107px;vertical-align:middle;text-overflow:ellipsis;overflow:hidden;background-position:right;background-repeat:no-repeat;display:inline-block;*display:inline;zoom:1;padding-right:20px}.gigya-show-checkmark.gigya-pending,.gigya-show-checkmark.gigya-valid{background-position-x:100%;background-position-y:50%;background-position:right 5px center;background-repeat:no-repeat}h1.gigya-screen-caption{border-bottom:1px solid #dbdbdb;font-size:16px;font-weight:700;color:#333;padding-bottom:5px;padding-top:5px;margin:0 auto}.gigya-error-display{display:none}.gigya-error-display.gigya-error-display-active{display:block}.gigya-hidden{display:none!important}.gigya-screen .gigya-tfa input[type=text]{margin:5px 0;padding:5px;border-radius:5px;border:1px solid #CCC}.gigya-screen .gigya-tfa input[type=text]:focus{border-color:#87B9EA}.gigya-show-checkmark.gigya-valid{background-image:url(${imgBase}/screenSet/checkmarkValid.png);padding-right:25px}.gigya-show-checkmark.gigya-valid.gigya-empty{background-image:none;padding-right:5px}.gigya-show-checkmark.gigya-pending{background-image:url(${imgBase}/screenSet/checkmarkPending.gif);padding-right:25px}.gigya-screen .gigya-composite-control-image{overflow:hidden}.gigya-image{background-repeat:no-repeat;box-sizing:content-box;background-position:center;min-height:10px}.gigya-image[data-background-size=fit]{background-size:contain}.gigya-image[data-background-size=fit-horizontally]{background-size:100% auto}.gigya-image[data-background-size=fit-vertically]{background-size:auto 100%}.gigya-image[data-background-size=stretch]{background-size:100% 100%}.gigya-ie8 .gigya-layout-cell{overflow:hidden;margin-left:-1px!important}.gigya-ie8 .gigya-attach-file-upload-form .gigya-attach-file-upload-file-input{width:1000px}.gigya-ie8 .gigya-calculate-size div.gigya-profile-photo{_width:64px;_height:64px}.gigya-ie8 div.gigya-photo-upload,.gigya-ie8 div.gigya-photo-upload-button{*display:inline}.gigya-screen .gigya-array-manager.disable-delete>.gigya-array-template>.buttons-wrapper button.gigya-array-remove-btn,.gigya-screen .gigya-composite-control-array-widget div.gigya-array-template button.hidden{display:none}.gigya-ie8 .gigya-screen .gigya-placeholder{color:#A9A9BB;padding-left:5px;text-indent:0}.gigya-ie8 .gigya-placeholder:focus{padding-left:5px}.gigya-ie8 .gigya-screen .gigya-input-text:focus{padding-left:5px;text-indent:0}.gigya-ie8 .gigya-screen .gigya-input-text.gigya-error,.gigya-ie8 .gigya-screen.gigya-input-text{padding-top:12px}.gigya-ie9 .gigya-screen input.gigya-input-password,.gigya-ie9 .gigya-screen input.gigya-input-text{padding-top:1px;text-indent:0;padding-bottom:5px}.gigya-ie9 .gigya-screen .gigya-input-password:focus,.gigya-ie9 .gigya-screen .gigya-input-text:focus{box-shadow:0 0 5px 0 #1d87ff;border:1px solid #87B9EA;text-indent:0}.gigya-ie9 .gigya-screen input.gigya-input-password.gigya-placeholder,.gigya-ie9 .gigya-screen input.gigya-input-text.gigya-placeholder{color:#A9A9BB;padding-top:5px;text-indent:0}.gigya-ie10 .gigya-screen input.gigya-input-password,.gigya-ie10 .gigya-screen input.gigya-input-text{padding-top:1px}.gigya-screen .forgot-password-cell a,.gigya-screen .gigya-composite-control.gigya-change-password-link,.gigya-screen .gigya-composite-control.gigya-composite-control-link,.gigya-screen .gigya-composite-control.gigya-forgotPassword{padding-bottom:0}.gigya-screen .gigya-composite-control-array-widget{margin:10px 0}.gigya-screen .gigya-composite-control-array-widget .gigya-composite-control-array-widget{margin:10px}.gigya-screen .gigya-composite-control-array-widget div.gigya-array-template{padding:10px 0}.gigya-screen .gigya-composite-control-array-widget div.gigya-array-template:not(:last-of-type){border-bottom:1px #C1C1C1 solid}.gigya-screen .gigya-composite-control-array-widget div.gigya-array-template .buttons-wrapper{text-align:right}.gigya-screen .gigya-composite-control-array-widget div.gigya-array-template button{background:0 0;outline:0!important;color:#1371b9;padding:10px;cursor:pointer}'}(t=e.screenSet||(e.screenSet={}))}(t=e.css||(e.css={}))}(t=e.resources||(e.resources={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(t){for(;t&&t.parentElement;){if("hidden"===t.style.visibility||"none"===t.style.display||e.utils.DOM.isElementClass(t,"gigya-error-display")&&!e.utils.DOM.isElementClass(t,"gigya-error-display-active")||e.utils.DOM.isElementClass(t,"ng-hide"))return!0;t=t.parentElement}return!1}function i(){try{return window.self!==window.top}catch(e){return!0}}function r(t){for(var n=t;n;){if(e.utils.DOM.isElementClass(n,"gigya-container")&&!e.utils.DOM.isElementClass(n,"gigya-container-enabled"))return!0;n=n.parentElement}return!1}function a(e,t){var n=e.indexOf(t);return n>-1?e.substring(0,n):e}function s(e,t,n){void 0===n&&(n=0);for(var i=e.length;--i>=n;)if(e[i]===t)return i;return-1}function o(e,t){for(var n=0;n<e.length;++n)t(e[n],n,e)}function l(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}function c(e,t){for(var n=0;n<e.length;++n)if(t(e[n],n,e))return!0;return!1}function u(e,t){for(var n=0;n<e.length;++n)if(!t(e[n],n,e))return!1;return!0}function d(e,t){for(var n in e)if(e.hasOwnProperty(n)&&!t(e[n],n,e))return!1;return!0}function p(e,t){var n=new Array;return o(e,function(e,i,r){return n.push(t(e,i,r))}),n}function h(e){}function g(e,t,n){var i=new Array,r=e.getElementsByTagName(t);return o(r,function(e){e.getAttribute(n)&&i.push(e)}),i}function m(n,i,r){void 0===r&&(r=[]),"string"==typeof i&&(i=[i]);for(var a=n.getElementsByTagName("*"),s=new Array,o=0;o<=a.length-1;o++){var l=a.item(o);if(e.utils.array.indexOf(r,l.tagName.toLowerCase())===-1)for(var c=0,u=i;c<u.length;c++){var d=u[c];t.isElementContainAttributePrefix(a[o],d)&&s.push(a[o])}}return s}function f(e,t){var n=e.attributes,i=!1;if(n)for(var r=0;r<n.length;r++)if(n[r].nodeName.indexOf(t)!==-1){i=!0;break}return i}function S(n,i){void 0===i&&(i=!1);var r,a=new Array,s=!1,l=T(n);return o(l,function(o){try{var l=o.nodeName.indexOf(t.Screen_CONSTS.conditionalAttributePrefix)!==-1,c=o.nodeName.indexOf(t.Screen_CONSTS.expressionAttributePrefix)!==-1;if(l||c){var u=o.nodeName.indexOf(":");if(u!==-1){var d=void 0;i?(r=e._.plugins.utils.DOM.getAttribute(n,"value"),d=e._.plugins.utils.DOM.getAttribute(n,"name"),s="param"===n.tagName.toLowerCase()):(d=o.nodeName.substring(u+1,o.nodeName.length),r=e._.plugins.utils.DOM.getAttribute(n,d));var p=c?o.nodeValue:y(o.nodeValue,r),h={attributeName:d,condition:p,defaultValue:r,lastAttributeValue:r,isWidgetParamTag:s};a.push(h)}}}catch(e){throw new Error("Conditional format error: "+e)}}),a}function y(e,t){var n=_(e,t),i=v(n),r=b(i);if(!t){var a=r.lastIndexOf(":'"+t+"'");a>-1&&(r=r.substring(0,a)+":null")}return r}function _(e,t){var n=e.lastIndexOf("?"),i=e.substr(n+1,e.length),r=i.indexOf(":");if(r===-1)e+=":",t&&(e+=t);else{var a=i.substr(r+1,i.length);""===a&&(e=e.substr(0,e.length)+t)}return e}function v(e){return e=e.replace(/\'/g,"'"),e=e.replace(/\?/g,"?'"),e=e.replace(/:/g,"':")}function b(t){var n=t.lastIndexOf("?"),i=t.substr(n+1,t.length),r=i.indexOf(":")+1,a=i.substr(r,i.length);a=e.utils.stringUtils.trim(a),"'"!=a[0]&&(a="'"+a),"'"!=a[a.length]&&(a+="'");var s=i.substr(0,r-1);return t=t.substr(0,n+1)+s+":"+a}function E(e){return e>47&&e<58||32==e||13==e||e>64&&e<91||e>95&&e<112||e>185&&e<193||e>218&&e<223}function C(e){void 0===e&&(e="");var n;return n=null===e||"auto"==e?t.UnitMeasurementType.auto:e.indexOf("%")!=-1?t.UnitMeasurementType.percentage:t.UnitMeasurementType.pixel}function T(e){for(var t=[],n=e.attributes,i=0;i<n.length;i++)t.push(n[i]);return t}function w(e){void 0===e&&(e=document);var t="content"in document.createElement("template");if(!t)for(var n,i,r,a=Array.prototype.slice.call(document.getElementsByTagName("template")),s=0;n=a[s++];){for(i=n.children,r=document.createDocumentFragment();i[0];)r.appendChild(i[0]);n.content=r}}var I;!function(e){e[e.gigyaPhone=0]="gigyaPhone"}(I=t.EditableProvidersTypes||(t.EditableProvidersTypes={})),t.isHidden=n,t.inIFrame=i,t.isFieldInHiddenContainer=r,t.firstPart=a,t.LastIndexOf=s,t.ForEach=o,t.ForEachProp=l,t.Some=c,t.Every=u,t.EveryProp=d,t.Map=p,t.DeepFreeze=h,t.getElementsByHavingAttribute=g,t.getElementsByHavingAttributePrefix=m,t.isElementContainAttributePrefix=f,t.getConditionalAttributeExpressions=S,t.setupConditionalExpressionValue=y,t.isKeyCodeDisplayable=E,t.UnitMeasurementType={pixel:"px",percentage:"%",auto:""},t.getUnitMeasurementType=C,t.getAttributesAsArray=T,t.IETemplateElementPolyfill=w}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.ScreenOptions_CONSTS={accountsLinkedScreen:"data-on-accounts-linked-screen",pendingTfaRegistrationScreen:"data-on-pending-tfa-registration-screen",pendingTfaVerificationScreen:"data-on-pending-tfa-verification-screen",pendingRegistrationScreen:"data-on-pending-registration-screen",existingLoginIdentifierScreen:"data-on-existing-login-identifier-screen",pendingVerificationScreen:"data-on-pending-verification-screen",missingLoginIdScreen:"data-on-missing-loginid-screen",pendingPasswordChangeScreen:"data-on-pending-password-change-screen",pendingReAuthenticationScreen:"data-on-pending-recent-login-screen",width:"data-width",height:"data-height",caption:"data-caption"},e.DeepFreeze(e.ScreenOptions_CONSTS);var t=function(){function t(t,n){n=n||{},this.accountsLinkedScreen=t.getAttribute(e.ScreenOptions_CONSTS.accountsLinkedScreen)||n.accountsLinkedScreen,this.pendingTfaRegistrationScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingTfaRegistrationScreen)||n.pendingTfaRegistrationScreen,this.pendingTfaVerificationScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingTfaVerificationScreen)||n.pendingTfaVerificationScreen,this.pendingRegistrationScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingRegistrationScreen)||n.pendingRegistrationScreen,this.existingLoginIdentifierScreen=t.getAttribute(e.ScreenOptions_CONSTS.existingLoginIdentifierScreen)||n.existingLoginIdentifierScreen,this.pendingVerificationScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingVerificationScreen)||n.pendingVerificationScreen,this.missingLoginIdScreen=t.getAttribute(e.ScreenOptions_CONSTS.missingLoginIdScreen)||n.missingLoginIdScreen,this.pendingPasswordChangeScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingPasswordChangeScreen)||n.pendingPasswordChangeScreen,this.pendingReAuthenticationScreen=t.getAttribute(e.ScreenOptions_CONSTS.pendingReAuthenticationScreen)||n.pendingReAuthenticationScreen,this.width=t.getAttribute(e.ScreenOptions_CONSTS.width)||n.width,this.height=t.getAttribute(e.ScreenOptions_CONSTS.height)||n.height,this.caption=t.getAttribute(e.ScreenOptions_CONSTS.caption)||n.caption}return t}();e.ScreenOptions=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){"object"==typeof console&&console.warn&&console.warn("Gigya Screenset ("+e+") - "+t)}e.warn=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n;!function(e){e[e._undefined=0]="_undefined",e[e.template=1]="template",e[e.instance=2]="instance"}(n=t.ElementRoles||(t.ElementRoles={}));var i=0;t.TemplateElement_CONSTS={elementId:"data-screenset-element-id",publishElementId:"data-screenset-element-id-publish",templateForArray:"screenSetTemplateFor",instanceOfArray:"screenSetInstanceOf",screenSetRoles:"data-screenset-roles"},t.DeepFreeze(t.TemplateElement_CONSTS);var r=new Function("screenset","viewport","profile","data","subscriptions","preferences","accountInfo","tfaProviders","conflictingAccount","_account","value","return eval(value);"),a=function(){function a(e,r){if(this.templateElement=e,this._parent=r,this.eventHandlers={},this.conditionalExpressions=new Array,this._screenSet=r._screenSet,a.isTemplateInstance(this.templateElement))this.ID=this.templateElement.getAttribute(t.TemplateElement_CONSTS.elementId),this.publishID="true"===this.templateElement.getAttribute(t.TemplateElement_CONSTS.publishElementId);else{if(this.ID=this.templateElement.id||"",""!==this.ID)this.publishID=!0,this.templateElement.id="";else{var s=++i+"_"+(new Date).getTime();this.ID="__gig_template_element_"+s,this.publishID=!1}this.templateElement.setAttribute(t.TemplateElement_CONSTS.elementId,this.ID),this.templateElement.setAttribute(t.TemplateElement_CONSTS.publishElementId,String(this.publishID))}var o=a.getRoles(this.templateElement);o.push(n.template),a.setRoles(this.templateElement,o);var l=e[t.TemplateElement_CONSTS.templateForArray];l||(l=new Array,e[t.TemplateElement_CONSTS.templateForArray]=l);var c;try{c=t.getConditionalAttributeExpressions(this.templateElement)}catch(e){this.warn("Error parsing conditional expressions."),c=[]}c.length>0&&(this.conditionalExpressions=this.conditionalExpressions.concat(c)),l.push(this)}return a.prototype.unlinkTemplate=function(){var e=this.templateElement[t.TemplateElement_CONSTS.templateForArray];if(e){var i=t.LastIndexOf(e,this);e.splice(i,1)}var r=a.getRoles(this.templateElement),s=r.pop();s===n.template?a.setRoles(this.templateElement,r):this.warn("unlinkTemplate without matching role")},a.getRoles=function(e){var i=(e.getAttribute(t.TemplateElement_CONSTS.screenSetRoles)||"").split(",");return""===i[0]&&i.pop(),t.Map(i,function(e){return n[e]||n._undefined})},a.setRoles=function(e,i){var r=t.Map(i,function(e){return n[e]});e.setAttribute(t.TemplateElement_CONSTS.screenSetRoles,r.join(","))},a.prototype.warn=function(e,t){this._parent.warn(e,t?this.ID+"."+t:this.ID)},a.prototype.linkInstanceElement=function(i){var r=this,s=e.utils.DOM.getElementsByAttribute(i,"*",t.TemplateElement_CONSTS.elementId,this.ID);if(!s||!s.length||!s[0])return void this.warn("Failed to find the instance element to link to");this.instanceElement=s[0];var o=a.getRoles(this.instanceElement);o.push(n.instance),a.setRoles(this.instanceElement,o);var l=this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray];l||(l=new Array,this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray]=l),t.ForEachProp(this.eventHandlers,function(n,i){return t.ForEach(n,function(t){return e.utils.DOM.addEventListener(r.instanceElement,i,t)})}),l.push(this),this.initFromInstanceElement()},a.prototype.unlinkInstanceElement=function(){var i=this;if(this.instanceElement){t.ForEachProp(this.eventHandlers,function(n,r){return t.ForEach(n,function(t){return e.utils.DOM.removeEventListener(i.instanceElement,r,t)})});var r=a.getRoles(this.instanceElement),s=r.pop();s===n.instance?a.setRoles(this.instanceElement,r):this.warn("unlinkInstanceElement without matching role");var o=this.instanceElement[t.TemplateElement_CONSTS.instanceOfArray];o&&o.splice(e.utils.array.indexOf(o,this),1),this.instanceElement=null}},a.isTemplateInstance=function(e){return e.getAttribute(t.TemplateElement_CONSTS.elementId)},a.prepareTemplateInstanceElement=function(e,i){var r=e.getAttribute(t.TemplateElement_CONSTS.elementId),s="true"===e.getAttribute(t.TemplateElement_CONSTS.publishElementId);if(!r)return void t.warn("","Failed to find elementId");if(s&&e.setAttribute("id",r),i){var o=a.getRoles(e);o.pop()===n.template&&a.setRoles(e,o)}},a.prepareTemplateInstances=function(e){var n=e.querySelectorAll("*["+t.TemplateElement_CONSTS.elementId+"]");t.ForEach(n,function(e){return a.prepareTemplateInstanceElement(e,!0)})},a.prototype.addEventListener=function(t,n){var i=this.eventHandlers[t];i||(i=new Array,this.eventHandlers[t]=i),i.push(n),this.instanceElement&&e.utils.DOM.addEventListener(this.instanceElement,t,n)},a.prototype.removeEventListener=function(n,i){this.instanceElement&&e.utils.DOM.removeEventListener(this.instanceElement,n,i);var r=this.eventHandlers[n];if(r){var a=t.LastIndexOf(r,i);a>-1&&r.splice(a,1)}},a.prototype.evaluateConditionalAttributes=function(){var e=this;this.hasConditionalAttributes()&&(t.ForEach(this.conditionalExpressions,function(t){var n=e.evaluateExpression(t);e.executeConditionalResult(n,t,e.instanceElement)}),this.initFromInstanceElement())},a.prototype.initFromInstanceElement=function(){},a.prototype.hasConditionalAttributes=function(){return this.conditionalExpressions&&this.conditionalExpressions.length>0},a.prototype.evaluateExpression=function(n){var i,a={width:this._screenSet.container.offsetWidth,height:this._screenSet.container.offsetHeight,translations:this._screenSet.params.customLang||{}},s=e.utils.viewport.getInnerSize(),o={width:s.w,height:s.h,orientation:e.utils.viewport.getOrientation()},l=this._screenSet.getApiData();if(i=l.getAccountInfo?e.utils.object.clone(e.utils.object.extractProperties(l.getAccountInfo,i,"profile|data|preferences|subscriptions"),!0):{profile:{},data:{},preferences:{},subscriptions:{}},this._parent instanceof t.BaseForm&&this._parent.isPopulated){var c=this._parent.getFormData(!1,!1);i=e.utils.object.merge([i,c],!0)}try{return r(a,o,i.profile,i.data,i.subscriptions,i.preferences,l.getAccountInfo,l.getProviders,l.getConflictingAccount,e.utils.object.expressionHelper(l.getAccountInfo),n.condition)}catch(e){return"object"==typeof console&&console.warn&&console.warn("Screenset exception in conditional expression:",n.condition,e),n.defaultValue}},a.prototype.executeConditionalResult=function(t,n,i){t=t||n.defaultValue,t!==n.lastAttributeValue&&(n.lastAttributeValue=t,"class"===n.attributeName&&this.cssClass&&(t=((t||"")+" "+this.cssClass).trim()),t?e._.plugins.utils.DOM.setAttribute(i,n.attributeName,t):i.removeAttribute(n.attributeName))},a.prototype.resetLastConditionalValues=function(){t.ForEach(this.conditionalExpressions,function(e){e.lastAttributeValue=""})},a}();t.TemplateElement=a}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(e){return e&&isNaN(parseInt(e))?400009:0}function i(e){return e&&isNaN(parseFloat(e))?400009:0}function r(e){return null==e?400009:0}function a(t){if(t){var n=e.global.date.getISODate(t);if(!n)return 400009}return 0}function s(e){var t=e.match(g);if(t){var n=t[1],i=t[2];if(n&&i&&"regex"===n){var r=new RegExp(i);try{r.test("")}catch(e){throw new Error("Unsupported regEx pattern: "+e)}return function(e){return e&&!r.test(e)?400009:0}}}throw new Error("Unsupported format: "+e)}var o;!function(e){e[e._undefined=0]="_undefined",e[e.valid=1]="valid",e[e.error=2]="error",e[e.pending=3]="pending"}(o=t.ValidityStates||(t.ValidityStates={})),t.DeepFreeze(o),t.fieldsNameData={loginID:{autoFillName:"username",paramName:"loginID"},passwordRetype:{autoFillName:"",paramName:""}},t.DeepFreeze(t.fieldsNameData);var l={loginID:"username",secretQuestion:"secret question",secretAnswer:"secret answer"};t.DeepFreeze(l);var c;!function(e){e[e.clientModify=0]="clientModify",e[e.clientCreate=1]="clientCreate"}(c=t.WriteAccessModes||(t.WriteAccessModes={})),t.FormInput_CONSTS={fieldName:"data-gigya-name",displayName:"data-display-name",captcha:"gigya-captcha",allowEmpty:"data-allow-empty",required:"data-required",originalValue:"data-original-value",serverValidation:"data-invalid-error-code",showValidCheckmark:"show-valid-checkmark",showCheckmarkClass:"gigya-show-checkmark",errorClass:"gigya-error",validClass:"gigya-valid",pendingClass:"gigya-pending",emptyClass:"gigya-empty",placeholderAttribute:"data-gigya-placeholder",arrayRootAttribute:"data-array-root",arrayKeyFieldAttribute:"data-array-key-field",arrayKeyValueAttribute:"data-array-key-value"},t.DeepFreeze(t.FormInput_CONSTS);var u,d={};!function(e){e[e._start=0]="_start",e[e.Important=1]="Important",e[e.Normal=2]="Normal",e[e.Fallback=3]="Fallback",e[e._end=4]="_end"}(u=t.FormInputPriorities||(t.FormInputPriorities={}));var p=function(n){function i(t,i,r){void 0===i&&(i=!0),void 0===r&&(r=1e3);var a=n.call(this,t.element,t.form)||this;return a.isDataField=i,a.dynamicField=!1,a.isCaptcha=!1,a._validityState=o._undefined,a._showValidityMarker={},a.isCurrnetValuePlaceholderText=!0,a.isCtrlKeyUp=!1,a.KEY_CODE_DELETE=46,a.KEY_CODE_BACKSPACE=8,a.KEYCODE_LETTER_X=88,a.previousValue=null,a.intervalID=0,
a.validityStateListeners=new Array,a._form=t.form,a.type=t.type,a._screen=a._form._screen,a.updateFieldName(t.element,t.fieldName,i),a.showValidCheckmark(a.templateElement)&&(a._showValidityMarker[o.valid]=a._showValidityMarker[o.pending]=!0),a.onFieldChangeDebounced=e.utils.functions.debounce(function(){return a.onFieldChange()},r),a}return __extends(i,n),i.addInputToLibrary=function(e,t){void 0===t&&(t=u.Normal);var n=d[t]||[];n.push(e),d[t]=n},i.inputLibraryByPriority=function(){for(var e=new Array,t=u._start;t<=u._end;++t){var n=d[t];n&&(e=e.concat(n))}return e},i.registerFormInputs=function(e,n){var r=new Array,a=i.inputLibraryByPriority(),s=n.ignoredFields();return t.ForEach(e,function(e){var i,o=e.getAttribute(t.FormInput_CONSTS.fieldName)||e.getAttribute("name");if(!s[o]){var l={form:n,fieldName:o,element:e,type:e.getAttribute("type"),params:n._screenSet.params};t.Some(a,function(e){var t=e.FORM_TYPE_CRITERIA(l);return t&&(i=e),t}),i&&r.push(new i(l))}}),r},i.FORM_TYPE_CRITERIA=function(e){return!0},i.prototype.onKeyUp=function(e){9!==e.keyCode&&13!==e.keyCode&&16!==e.keyCode&&17!==e.keyCode&&91!==e.keyCode&&92!==e.keyCode&&20!==e.keyCode&&27!==e.keyCode&&this.onFieldChangeDebounced()},i.prototype.onFieldChange=function(e){if(void 0===e&&(e=!1),this.instanceElement&&this._screenSet.container){var t=this.getValue();this.previousValue===t&&"radio"!==this.type||(this.previousValue=t,this.updateCssClasses(),this._form.onInputChange(this,e))}},i.prototype.updateCssClasses=function(){this.isEmpty()?e.utils.DOM.addClassToElement(this.instanceElement,t.FormInput_CONSTS.emptyClass):e.utils.DOM.removeClassFromElement(this.instanceElement,t.FormInput_CONSTS.emptyClass)},i.prototype.updateFieldName=function(e,n,i){var r=this;if(this.fieldName=n,this.normalizedFieldName=this._form.getNormalizedFieldName(this.fieldName),this.normalizedFieldName){var a=this.normalizedFieldName.split(".");a.length>1&&(this.fieldNamespace=a.shift()),this.fieldBaseName=a.join(".").replace(t.ArrayManager_CONST.indexMatch,"");var s=this.instanceElement||this.templateElement;this.fieldName!==s.getAttribute(t.FormInput_CONSTS.fieldName)&&s.setAttribute(t.FormInput_CONSTS.fieldName,this.fieldName)}var o=t.fieldsNameData[this.fieldBaseName];this.paramName=o?o.paramName:this.normalizedFieldName,o&&o.autoFillName&&e.setAttribute("name",o.autoFillName),i&&this.normalizedFieldName&&(this._form.addDataField(this),e.setAttribute(t.FormInput_CONSTS.originalValue,String(this.getValue(e))),this.keyUpHandler=function(e){return r.onKeyUp(e)},this.addEventListener("keyup",this.keyUpHandler),this.changeHandler=function(){return r.onFieldChange()},this.addEventListener("change",this.changeHandler)),this.updateDisplayName(e)},i.prototype.updateDisplayName=function(e){void 0===e&&(e=this.templateElement),this.displayName=e.getAttribute(t.FormInput_CONSTS.displayName)||this.fieldBaseName},i.prototype.getName=function(e){return e?this.normalizedFieldName:this.fieldName},i.prototype.isEmpty=function(e){return void 0===e&&(e=this.getValue()),this._isValueEmpty(e)},i.prototype._isValueEmpty=function(e){return!e||e===!1},i.prototype.allowEmpty=function(){return Boolean(this.instanceElement&&this.instanceElement.getAttribute(t.FormInput_CONSTS.allowEmpty))},i.prototype.validate=function(e,t){return void 0===t&&(t=this._form.getFlatFormData(!1,!0)),this.isInHiddenContainer()?e({errorCode:0,field:this}):void this._validateValue(t,this._getValidateValue(t),e)},i.prototype._getValidateValue=function(e){return this.getValue()},i.prototype.clearServerError=function(){this.instanceElement.removeAttribute(t.FormInput_CONSTS.serverValidation)},i.prototype.getServerError=function(){var e=this.instanceElement.getAttribute(t.FormInput_CONSTS.serverValidation);return e?parseInt(e):0},i.prototype.setServerError=function(e){var n=0==e?o.valid:o.error;this.instanceElement.setAttribute(t.FormInput_CONSTS.serverValidation,e+""),this.setValidityState(n,!0)},i.prototype._validateValue=function(n,i,r){var a=null==i||"password"!==this.type&&""===e.utils.stringUtils.trim(String(i));if(this.required()&&a)return r({errorCode:400027,field:this});if(this._schema){var s=0;if(t.Some(this.schemaChecks,function(e){return s=e(i),0!=s}),0!==s)return r({errorCode:s,field:this})}if(this.instanceElement){var o=this.instanceElement.getAttribute(t.FormInput_CONSTS.serverValidation);if(o){var l=this.getServerError();if(0!=l)return r({errorCode:l,field:this})}else if(this.serverValidated())return this.startServerValidation(i,r)}return r({errorCode:0,field:this})},i.prototype.serverValidated=function(){return!1},i.prototype.startServerValidation=function(e,n){t.notImplementerAbstract()},i.prototype.required=function(){return!!this._schemaRequired||(!(this.allowEmpty()||!this._form.requiredFields()[this.fieldName])||!!this.instanceElement.getAttribute(t.FormInput_CONSTS.required))},i.prototype.showValidCheckmark=function(n){return void 0===n&&(n=this.instanceElement),Boolean(n.getAttribute(t.FormInput_CONSTS.showValidCheckmark))&&!e.utils.validation.isExplicitFalse(n.getAttribute(t.FormInput_CONSTS.showValidCheckmark))},i.prototype.addValidityStateListener=function(e){e&&this.validityStateListeners.push(e)},i.prototype.removeValidityStateListener=function(t){t&&this.validityStateListeners.splice(e.utils.array.indexOf(this.validityStateListeners,t),1)},i.prototype.triggerValidityStateChange=function(e,n){var i=this;t.ForEach(this.validityStateListeners,function(t){return t(e,n,i)})},i.prototype.getValidityState=function(){return this._validityState},i.prototype.setValidityState=function(e,t){void 0===t&&(t=!1),e!==this._validityState&&(this._validityState=e,this._showValidityOnInput(),this.triggerValidityStateChange(this._validityState,t))},i.prototype._showValidityOnInput=function(){this.setValitidyClass(this.instanceElement,this._validityState),this._showValidityMarker[this._validityState]?e.utils.DOM.addClassToElement(this.instanceElement,t.FormInput_CONSTS.showCheckmarkClass):e.utils.DOM.removeClassFromElement(this.instanceElement,t.FormInput_CONSTS.showCheckmarkClass)},i.prototype.setValitidyClass=function(e,n,i,r,a){if(void 0===i&&(i=t.FormInput_CONSTS.validClass),void 0===r&&(r=t.FormInput_CONSTS.errorClass),void 0===a&&(a=t.FormInput_CONSTS.pendingClass),e){var s;switch(n){case o.valid:s=i;break;case o.error:s=r;break;case o.pending:s=a}this.setElementValidationClass(e,s,i,r,a),this.placeHolderElement&&this.setElementValidationClass(this.placeHolderElement,s,i,r,a)}},i.prototype.setElementValidationClass=function(n,i,r,a,s){void 0===r&&(r=t.FormInput_CONSTS.validClass),void 0===a&&(a=t.FormInput_CONSTS.errorClass),void 0===s&&(s=t.FormInput_CONSTS.pendingClass),e.utils.DOM.removeClassFromElement(n,r),e.utils.DOM.removeClassFromElement(n,a),e.utils.DOM.removeClassFromElement(n,s),i&&e.utils.DOM.addClassToElement(n,i),i===a?n.setAttribute("aria-invalid","true"):n.setAttribute("aria-invalid","false")},i.prototype.unlinkTemplate=function(){this.changeHandler&&this.removeEventListener("change",this.changeHandler),this.keyUpHandler&&this.removeEventListener("keydown",this.keyUpHandler),n.prototype.unlinkTemplate.call(this)},i.prototype.linkInstanceElement=function(e){if(n.prototype.linkInstanceElement.call(this,e),this._schemaWriteAccessMode=c.clientModify,this._schemaRequired=!1,this.instanceElement){if(this._form.schemaValidated()&&(this._schema=this._form.getFieldSchema(this),this._schema)){if(this.schemaChecks=new Array,this._schema.type){var i=h[this._schema.type];i&&this.schemaChecks.push(i)}this._schema.format&&this._schema.format.match(g)&&this.schemaChecks.push(s(this._schema.format)),this._schemaRequired=this._schema.required||t.Some(this.schemaChecks,function(e){return 0!=e("")}),this._schemaWriteAccessMode=c[this._schema.writeAccess]||c.clientModify}this.setPlaceholderValue(),this.setAriaRequired(),this.previousValue=this.getValue()}},i.prototype.createPlaceholderElement=function(t,n){"input"===t&&"checkbox"!==n&&"radio"!==n?this.placeHolderElement=e.utils.DOM.createElement("input",""):"textarea"===t&&(this.placeHolderElement=e.utils.DOM.createElement("textarea","")),e.localInfo.isIE8?this.placeHolderElement.style.width=this.instanceElement.currentStyle.width:this.placeHolderElement.style.width=window.getComputedStyle(this.instanceElement).width,"input"!==t&&"textarea"!==t||(this.placeHolderElement.screenSetInstanceOf=[this],this.placeHolderElement.setAttribute("value",this.placeholderAttributeValue),this.placeHolderElement.setAttribute("style",e._.plugins.utils.DOM.getAttribute(this.instanceElement,"style")),this.placeHolderElement.setAttribute("class",e._.plugins.utils.DOM.getAttribute(this.instanceElement,"class")+" gigya-placeholder"),this.instanceElement.parentNode.insertBefore(this.placeHolderElement,this.instanceElement),e.pluginUtils.DOM.hideElement(this.instanceElement)),("textarea"===t||"input"===t&&"checkbox"!==n&&"radio"!==n)&&(this.placeHolderElement.attachEvent("onkeydown",this.onPlaceholderKeyDown),this.addEventListener("keydown",this.onKeyDownForPlaceholder),this.addEventListener("blur",this.onBlurForPlaceholder),this.placeHolderElement.attachEvent("oncontextmenu",this.onContextMenuOpened),this.placeHolderElement.attachEvent("onfocus",this.onPlaceholderFocused),this.addEventListener("keyup",this.onKeyUpForPlaceholder),this.togglePlaceholderStateView(!0)),this.placeHolderElement.setAttribute("aria-hidden","true")},i.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this._schemaRequired=!1,this.schemaChecks=this._schema=null,this.setValue(""),this.setValidityState(o._undefined)),n.prototype.unlinkInstanceElement.call(this)},i.prototype.getValue=function(t){void 0===t&&(t=this.instanceElement);var n=void 0===t.value?"":t.value;return"password"!==this.type&&(n=e.utils.stringUtils.trim(n)),"checkbox"===this.type?n=t.checked:"radio"===this.type&&(n=t.checked?n:null),n},i.prototype.prePopulate=function(e){this.previousValue=e,"hidden"!==this.type&&this.setValue(e),this._schemaWriteAccessMode!==c.clientCreate||this.isEmpty(e)||this.instanceElement.setAttribute("disabled","disabled")},i.prototype.disabled=function(){return Boolean(this.instanceElement.getAttribute("disabled"))},i.prototype.fieldNameFlatten=function(){return this.fieldName&&this.fieldName.replace(/\[([0-9]+)]/g,".$1")},i.prototype.setValue=function(e,t){void 0===t&&(t=!0);var n=this.instanceElement;"checkbox"===this.type?n.checked=e&&"false"!==e:"radio"===this.type?n.checked=e===n.value:n.value!==e&&(n.value=String(e)),this.onFieldChange(t)},i.prototype.isHidden=function(){return t.isHidden(this.instanceElement)},i.prototype.isInHiddenContainer=function(){return t.isFieldInHiddenContainer(this.instanceElement)},i.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this),this.updateDisplayName(this.instanceElement||this.templateElement),this.showValidCheckmark(this.templateElement)&&(this._showValidityMarker[o.valid]=this._showValidityMarker[o.pending]=!0,this._showValidityOnInput())},i.prototype.executeConditionalResult=function(e,i,r){var a=i.lastAttributeValue;n.prototype.executeConditionalResult.call(this,e,i,r),e=e||i.defaultValue,e!==a&&(i.attributeName===t.FormInput_CONSTS.required?(this.getValidityState()===o.error&&this.onFieldChange(),this.setPlaceholderValue(),this.setAriaRequired()):i.attributeName===t.FormInput_CONSTS.placeholderAttribute&&this.setPlaceholderValue())},i.prototype.setAriaRequired=function(){this.instanceElement.setAttribute("aria-required",this.required()?"true":"false")},i.prototype.setPlaceholderValue=function(){var n=this.instanceElement.getAttribute(t.FormInput_CONSTS.placeholderAttribute);if(n&&(this.placeholderAttributeValue=n?""+n+(this.required()?" *":""):""),this.placeholderAttributeValue){var i=this.instanceElement.tagName.toLocaleLowerCase(),r=this.instanceElement.getAttribute("type");e.localInfo.isIE8||e.localInfo.isIE9?this.placeHolderElement?e._.plugins.utils.DOM.setAttribute(this.placeHolderElement,"value",this.placeholderAttributeValue):this.createPlaceholderElement(i,r):("input"===i&&"checkbox"!==r&&"radio"!==r||"textarea"===i)&&this.instanceElement.setAttribute("placeholder",this.placeholderAttributeValue)}},i.prototype.onKeyUpForPlaceholder=function(e){var t=e.srcElement.screenSetInstanceOf[0];if(t.isCtrlKeyUp){var n=e.keyCode;n===this.KEYCODE_LETTER_X&&t.togglePlaceholderStateView(!0)}},i.prototype.onBlurForPlaceholder=function(e){var t=e.srcElement,n=t.value,i=e.srcElement.screenSetInstanceOf[0];n||i.togglePlaceholderStateView(!0)},i.prototype.onContextMenuOpened=function(e){event.returnValue=!1},i.prototype.onPlaceholderFocused=function(e){var t=e.srcElement,n=t.screenSetInstanceOf[0];n.togglePlaceholderStateView(!1,e),event.cancelBubble=!0,n._screenSet._placeholderIntervalID===-1&&(n.togglePlaceholderStateView(!1,e),n._screenSet._placeholderIntervalID=setInterval(function(){n._screenSet._placeholderIntervalID===-1?n.togglePlaceholderStateView(!1,e):clearInterval(n._screenSet._placeholderIntervalID)},100))},i.prototype.onPlaceholderKeyDown=function(e){var n=e.keyCode,i=t.isKeyCodeDisplayable(n),r=e.srcElement,a=r.screenSetInstanceOf[0];i?a.togglePlaceholderStateView(!1):n!==a.KEY_CODE_BACKSPACE&&n!==a.KEY_CODE_DELETE||(event.returnValue=!1)},i.prototype.onKeyDownForPlaceholder=function(e){var n=e.keyCode,i=t.isKeyCodeDisplayable(n),r=e.srcElement.screenSetInstanceOf[0],a=r.instanceElement.getAttribute("value");!i&&r.isCurrnetValuePlaceholderText&&n==r.KEY_CODE_BACKSPACE?event.returnValue=!1:a&&1==a.length&&n==r.KEY_CODE_BACKSPACE?(e.srcElement.setAttribute("value",""),event.returnValue=!1):!r.isTextSelected||n!=r.KEY_CODE_DELETE&&n!=r.KEY_CODE_BACKSPACE?e.ctrlKey?r.isCtrlKeyUp=!0:i&&r.isCurrnetValuePlaceholderText?r.togglePlaceholderStateView(!1):r.isCurrnetValuePlaceholderText&&n==r.KEY_CODE_DELETE&&(event.returnValue=!1):(r.isTextSelected=!1,r.togglePlaceholderStateView(!0,event))},i.prototype.togglePlaceholderStateView=function(t,n){var i=this;void 0===n&&(n=null),t?(n&&(n.returnValue=!1),e.pluginUtils.DOM.showElement(this.placeHolderElement),e.pluginUtils.DOM.hideElement(this.instanceElement),e._.plugins.utils.DOM.setAttribute(this.instanceElement,"value",""),this.placeHolderElement||setTimeout(function(){i.placeHolderElement.focus()},1e3)):(e.pluginUtils.DOM.hideElement(this.placeHolderElement),e.pluginUtils.DOM.showElement(this.instanceElement),e._.plugins.utils.DOM.setAttribute(this.placeHolderElement,"value",this.placeholderAttributeValue),this.instanceElement.focus()),this.isCurrnetValuePlaceholderText=t,this.isCtrlKeyUp=!1,this.isTextSelected=!1},i}(t.TemplateElement);t.FormInput=p;var h={integer:n,long:n,float:i,boolean:r,date:a};t.DeepFreeze(h);var g=/(.*?)\([\'\"](.*?)[\'\"]\)$/;p.addInputToLibrary(p,u.Fallback)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t){return e.call(this,t,!1)||this}return __extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"submit"===e.type||"reset"===e.type||"button"===e.type||"button"===e.element.nodeName.toLowerCase()},t.prototype.setValue=function(){},t}(e.FormInput);e.ButtonInput=t,e.FormInput.addInputToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.CheckboxInput_CONSTS={errorClass:"gigya-terms-error",validClass:"gigya-terms-valid"};var t=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.FORM_TYPE_CRITERIA=function(e){return"checkbox"===e.type},n.prototype.required=function(){return!(!/^(.+\.)?terms$/.test(this.fieldName)&&!this.isClientRequired())&&t.prototype.required.call(this)},n.prototype.isClientRequired=function(){return this._schema&&this._schema.format&&"true"==this._schema.format.toLowerCase()},n.prototype._isValueEmpty=function(e){return!e},n.prototype._validateValue=function(e,n,i){return this.required()&&!n?i({errorCode:400027,field:this}):void t.prototype._validateValue.call(this,e,n,i)},n.prototype._showValidityOnInput=function(){this.setValitidyClass(this.instanceElement.parentElement,this._validityState,e.CheckboxInput_CONSTS.validClass,e.CheckboxInput_CONSTS.errorClass)},n.prototype.evaluateConditionalAttributes=function(){t.prototype.evaluateConditionalAttributes.call(this),this.setValitidyClass(this.instanceElement.parentElement,this._validityState,e.CheckboxInput_CONSTS.validClass,e.CheckboxInput_CONSTS.errorClass)},n}(e.FormInput);e.CheckboxInput=t,e.FormInput.addInputToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function n(e){return t.call(this,e)||this}return __extends(n,t),n.FORM_TYPE_CRITERIA=function(e){return"radio"===e.type},n.prototype._getValidateValue=function(e){return e[this.fieldNameFlatten()]},n.prototype.linkInstanceElement=function(e){t.prototype.linkInstanceElement.call(this,e),this._schema=void 0,this.groupRadioButtonArrayFields()},n.prototype.groupRadioButtonArrayFields=function(){if(this.instanceElement){var t=this.instanceElement.getAttribute("name"),n=this.instanceElement.getAttribute(e.FormInput_CONSTS.arrayKeyValueAttribute);t&&n&&this.instanceElement.setAttribute("name",t+"["+n+"]")}},n}(e.FormInput);e.RadioInput=t,e.FormInput.addInputToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n._form._passwordRetypes.push(n),n}return __extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"passwordRetype"===e.fieldName},t.prototype._validateValue=function(t,n,i){if(this._form._validatedPassword){var r=this._form._validatedPassword.getValue();if(""!==r&&r!==n)return i({field:this,errorCode:400009})}e.prototype._validateValue.call(this,t,n,i)},t}(e.FormInput);e.RetypePasswordInput=t,e.FormInput.addInputToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=function(n){function i(e){var t=n.call(this,e)||this;return t.isServerValidationEnabled=!0,t._serverValidateAvaliability=t.showValidCheckmark(e.element),t.loginIdMustBeEmail="email"===e.fieldName,t}return __extends(i,n),i.FORM_TYPE_CRITERIA=function(e){return e.form instanceof t.RegisterForm&&("email"===e.fieldName||"username"===e.fieldName)},i.prototype.showDataPending=function(){this.instanceElement&&this._form.showFieldError(this,100001,!0)},i.prototype.onKeyUp=function(e){this.getValue()!==this.previousValue&&(this.previousValue=void 0,this.lastCheck=void 0,this.showDataPending()),n.prototype.onKeyUp.call(this,e)},i.prototype.serverValidated=function(){return this._serverValidateAvaliability},i.prototype.startServerValidation=function(n,i){var r=this;this.instanceElement&&n!==this.lastCheck&&(this.showDataPending(),this.lastCheck=n,this.clearServerError(),this.instanceElement.removeAttribute(t.FormInput_CONSTS.serverValidation),this.setValidityState(t.ValidityStates.pending),this.isServerValidationEnabled===!1?i({errorCode:0,field:this}):e.accounts.isAvailableLoginID({loginID:n,callback:function(e){return r.serverQueryDone(e,n,i)}}))},i.prototype.serverQueryDone=function(t,n,i){if(this.instanceElement&&this.getValue()===n){var r=t.errorCode;switch(r){case 0:e.utils.validation.isExplicitTrue(t.isAvailable)||(r=400003);break;case 403026:this.isServerValidationEnabled=!1,r=0}this.setServerError(r),this._form.onInputChange(this,!1),i({errorCode:r,field:this})}},i.prototype._validateValue=function(t,i,r){return i!==this.lastCheck&&this.clearServerError(),!i||!this.loginIdMustBeEmail||this._schema&&this._schema.format||e.pluginUtils.validation.isEmailValid(i)?n.prototype._validateValue.call(this,t,i,r):r({errorCode:400006,field:this})},i}(t.FormInput);t.LoginIdInput=n,t.FormInput.addInputToLibrary(n,t.FormInputPriorities.Important)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=function(n){function i(e){return n.call(this,e)||this}return __extends(i,n),i.FORM_TYPE_CRITERIA=function(e){return!(e.form instanceof t.LoginForm||"email"!==e.fieldName&&"email"!==e.type)},i.prototype._validateValue=function(t,i,r){return i&&!e.pluginUtils.validation.isEmailValid(i)?r({errorCode:400006,field:this}):n.prototype._validateValue.call(this,t,i,r)},i}(t.FormInput);t.EmailInput=n,t.FormInput.addInputToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n._form._rememberMe=n,n}return __extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"remember"===e.fieldName},t}(e.FormInput);e.RememeberInput=t,e.FormInput.addInputToLibrary(t,e.FormInputPriorities.Important)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=function(n){function i(t,i,r,a){void 0===a&&(a=!0);var s=n.call(this,t,i)||this;return s._screen=r,s.params={},s.renderWidgetUI=!1,s.params=s.getElementParams(t),a&&e.utils.DOM.addClassToElement(t,"gigya-reset"),s}return __extends(i,n),i.registerTypedWidgets=function(e,n,i){var r=new Array;return t.ForEachProp(n,function(n,a){var s=e.querySelectorAll(n.CONSTS.selector);t.ForEach(s,function(e){r.push(i(n,e))})}),r},i.prototype.getElementParams=function(e){var n=this,i={},r=this;return t.ForEach(e.querySelectorAll("param"),function(e){i[e.name]=e.value;var a;try{a=t.getConditionalAttributeExpressions(e,!0)}catch(e){n.warn("Error in param conditionals, conditionals ignored"),a=[]}a.length>0&&(r.conditionalExpressions=r.conditionalExpressions.concat(a))}),i},i.prototype.evaluateConditionalAttributes=function(){this.widgetParams||(this.widgetParams=this.params,this.renderWidgetUI=!0),n.prototype.evaluateConditionalAttributes.call(this),this.renderWidgetUI&&this.renderWidget()},i.prototype.executeConditionalResult=function(e,t,i){t.isWidgetParamTag?(""===e&&t.defaultValue&&(e=t.defaultValue),""!=e||t.defaultValue?e!==t.lastAttributeValue&&(t.lastAttributeValue=e,this.widgetParams[t.attributeName]=e,this.renderWidgetUI=!0):(t.lastAttributeValue=e,this.widgetParams[t.attributeName]&&(delete this.widgetParams[t.attributeName],this.renderWidgetUI=!0))):n.prototype.executeConditionalResult.call(this,e,t,i)},i.prototype.renderWidget=function(){},i}(t.TemplateElement);t.BaseWidget=n}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function n(e,n,i){var r=t.call(this,n,e,e._screen,i)||this;return r._form=e,r}return __extends(n,t),n.addWidgetToLibrary=function(e){n.FormWidgetsLibrary[e.CONSTS.selector]=e},n.registerWidgets=function(t){return e.BaseWidget.registerTypedWidgets(t.templateElement,n.FormWidgetsLibrary,function(e,n){return new e(t,n)})},n.registerDynamicWidgets=function(t,i){return e.BaseWidget.registerTypedWidgets(i,n.FormWidgetsLibrary,function(e,n){return new e(t,n)})},n}(e.BaseWidget);t.FormWidgetsLibrary={},e.BaseFormWidget=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(e){return e&&e.length?e.length:0}function i(e){e||(e="");var t={lower:n(e.match(/[a-z]/g)),upper:n(e.match(/[A-Z]/g)),digits:n(e.match(/\d/g)),specialChars:n(e.match(/[^\dA-Za-z]/g)),length:e.length,charGroups:0};return t.lower&&t.charGroups++,t.upper&&t.charGroups++,t.digits&&t.charGroups++,t.specialChars&&t.charGroups++,t}function r(e,t,n){if(e&&t&&n){if(n.regExp){var i=new RegExp(n.regExp);return i.test(e)}return!(t.lower<n.minLowercase||t.upper<n.minUppercase||t.digits<n.minDigit||t.specialChars<n.minSpecialChars||t.charGroups<n.minCharGroups||t.length<n.minLength)}}t.DisplayModes={policy:{hasMinimumRequirements:!0,hasStrengthMeter:!1,getTemplate:function(e){return e.passwordStrength_minimumRequirements}},meter:{hasMinimumRequirements:!1,hasStrengthMeter:!0,getTemplate:function(e){return e.passwordStrength_strengthMeter}},combined:{hasMinimumRequirements:!0,hasStrengthMeter:!0,getTemplate:function(e){return e.passwordStrength_strengthMeter+e.passwordStrength_minimumRequirements}}};var a;!function(e){e[e.right=0]="right",e[e.left=1]="left",e[e.up=2]="up",e[e.down=3]="down",e[e.none=4]="none"}(a=t.BubbleOrientations||(t.BubbleOrientations={})),t.DeepFreeze(a),t.PasswordStrengthWidget_CONSTS={selector:"div.gigya-password-strength",bubbleClass:"gigya-password-strength-bubble",mobileClass:"mobile-bubble",desktopClass:"desktop-bubble",displayMode:"data-display-mode",bubble:"data-on-focus-bubble",bubbleOrientation:"data-bubble-orientation"},t.DeepFreeze(t.PasswordStrengthWidget_CONSTS);var s=function(n){function s(i,r){var s=n.call(this,i,r)||this;return s.bubbleLastTop="",s.originalClass=r.className,s.originalStyle=r.getAttribute("style"),s.originalDisplay=r.style.display,r.style.display="none",s._passwordField=i.getField("newPassword")||i.getField("password"),s._passwordField?(s.getText=function(e){return s._screenSet.getText(e)},s.displayMode=t.DisplayModes[r.getAttribute(t.PasswordStrengthWidget_CONSTS.displayMode)]||t.DisplayModes.combined,s.template=e.utils.templates.fill(s._screenSet.getTemplates().passwordStrength,{content:s.displayMode.getTemplate(s._screenSet.getTemplates())}),s.isBubble=Boolean(r.getAttribute(t.PasswordStrengthWidget_CONSTS.bubble)),s.isBubble&&(s.bubbleOrientation=a[r.getAttribute(t.PasswordStrengthWidget_CONSTS.bubbleOrientation)],"undefined"==typeof s.bubbleOrientation&&(s.bubbleOrientation=s._screenSet.isModal?a.left:a.up),s.bubbleID=s._screenSet.params.containerID+"_bubble",s.onBlur=function(){return s.hideBubble()},s.onFocus=function(){return s.showBubble()},s.onScroll=function(){var t=e.global.divGMBalloon;t&&t.style.top==s.bubbleLastTop&&s.refreshBubble()}),s.fnKeyUp=function(){return s.onPasswordChange()},e.utils.DOM.addEventListener(s._passwordField,"keyup",s.fnKeyUp),s.isBubble&&(s._passwordField.addEventListener("focus",s.onFocus),s._passwordField.addEventListener("blur",s.onBlur),e.utils.DOM.addEventListener(document,"scroll",s.onScroll)),s._screenSet.onRefreshExternalComponentsEvent().add(function(){s.refreshBubble()}),s):(s.warn(t.PasswordStrengthWidget_CONSTS.selector+"'s form is missing password field to bound to"),s)}return __extends(s,n),s.prototype.unlinkTemplate=function(){e.utils.DOM.removeEventListener(document,"scroll",this.onScroll),this._passwordField&&(this.isBubble&&(this._passwordField.removeEventListener("blur",this.onBlur),this._passwordField.removeEventListener("focus",this.onFocus)),this.hideBubble(),e.utils.DOM.removeEventListener(this._passwordField,"keyup",this.fnKeyUp)),n.prototype.unlinkTemplate.call(this)},s.prototype.showBubble=function(){this.instanceElement.style.display="";var n=this.instanceElement.offsetWidth||250;this.instanceElement.style.display="none";var i=t.PasswordStrengthWidget_CONSTS.bubbleClass+" "+(this._screenSet.isMobileUI?t.PasswordStrengthWidget_CONSTS.mobileClass:t.PasswordStrengthWidget_CONSTS.desktopClass),r=document.createElement("div");r.setAttribute("style",this.instanceElement.getAttribute("style")),"none"===r.style.display&&(r.style.display="");var a='<div id="'+this.bubbleID+'_content" class="'+this.instanceElement.className+'" style="'+r.getAttribute("style")+'">'+this.getPasswordBubbleContent()+"</div>";e.global.putGMBalloonNextTo(this._passwordField.instanceElement,a,null,n,null,!0,this.bubbleID,!0,this.getBubbleOrientations(),i),this.isBubbleVisible=!0,this.bubbleLastTop=e.global.divGMBalloon.style.top},s.prototype.getBubbleOrientations=function(){var e=[a[this.bubbleOrientation]],t=e[0],n=a[a.up],i=a[a.down];return"undefined"==typeof t?t=n:t!==n&&e.push(n),t!==i&&e.push(i),e},s.prototype.hideBubble=function(){e.global.removeGMBalloon(),this.isBubbleVisible=!1},s.prototype.getPasswordBubbleContent=function(){var t={TEXT:this.getText},n=i(String(this._passwordField.getValue())),a=this._screenSet.getApiData(),s=a.getPolicies?a.getPolicies.passwordComplexity:null;if(s||(s={}),s.minLength=s.minLength||0,s.minCharGroups=s.minCharGroups||0,this.displayMode.hasStrengthMeter){var o=0,l="too_weak";r(String(this._passwordField.getValue()),n,s)&&(l="weak",n.length>4&&(o+=40),n.length>5&&(o+=21),n.length>7&&(o+=18),n.charGroups>1&&(o+=21),n.charGroups>2&&(o+=17),n.charGroups>3&&(o+=23),o>60&&(l="fair"),o>80&&(l="strong"),o>100&&(l="very_strong")),t.score=o,t.scoreClass="gigya-passwordStrength-"+l,t.scoreText=this._screenSet.getText(l),t.barIndicatorClass="gigya-passwordStrength-bar-"+l}if(this.displayMode.hasMinimumRequirements){var c=[];if(s.minLength>0){var u=this._screenSet.getText("num_characters_total","%num",s.minLength);u&&c.push(u)}if(s.minCharGroups>0){var d=this._screenSet.getText("num_of_the_following_groups","%num",s.minCharGroups);d&&c.push(d)}if(t.requirements="",c.length>0){var p=c.pop();t.requirements=this._screenSet.getText("password_must_contain_at_least")+" ",c.length>0&&(t.requirements+=c.join(", ")+" "+this._screenSet.getText("and")+" "),t.requirements+=p}t.requirements=e.pluginUtils.text.fixTextWidows(t.requirements)}return e.utils.templates.fill(this.template,t)},s.prototype.onPasswordChange=function(){var e=this.getPasswordBubbleContent();this.isBubble?document.getElementById(this.bubbleID+"_content").innerHTML=e:(this.instanceElement.innerHTML=e,this.instanceElement.style.display=this.originalDisplay)},s.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this),this.isBubble&&(this.bubbleOrientation=a[this.instanceElement.getAttribute(t.PasswordStrengthWidget_CONSTS.bubbleOrientation)],"undefined"==typeof this.bubbleOrientation&&(this.bubbleOrientation=this._screenSet.isModal?a.left:a.up))},s.prototype.refreshBubble=function(){this.isBubbleVisible&&this.showBubble()},s}(t.BaseFormWidget);s.CONSTS=t.PasswordStrengthWidget_CONSTS,t.PasswordStrengthWidget=s,t.BaseFormWidget.addWidgetToLibrary(s),t.getPasswordStrengthData=i,t.isPasswordStrengthValid=r}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.BasePasswordInput_CONSTS={showPasswordStrength:"show-password-strength"},t.DeepFreeze(t.BasePasswordInput_CONSTS);var n=function(n){function i(i){var r=n.call(this,i)||this;return r.showPasswordStrengthConditionalExists=!1,r.showPasswordStrengthAttribute="",t.ForEach(r.conditionalExpressions,function(e){e.attributeName==t.BasePasswordInput_CONSTS.showPasswordStrength&&(r.showPasswordStrengthConditionalExists=!0,r.showPasswordStrengthConditional=e)}),r.showPasswordStrengthAttribute=e._.plugins.utils.DOM.getAttribute(r.templateElement,t.BasePasswordInput_CONSTS.showPasswordStrength),null!=r.showPasswordStrengthAttribute&&r.showPasswordStrengthAttribute.length?(r.passwordStrengthOrientation=t.BubbleOrientations[r.showPasswordStrengthAttribute],"undefined"==typeof r.passwordStrengthOrientation&&(r.passwordStrengthOrientation=r._screenSet.isModal?t.BubbleOrientations.left:t.BubbleOrientations.up),r.showPasswordStrength="undefined"!=typeof r.passwordStrengthOrientation&&r.passwordStrengthOrientation!=t.BubbleOrientations.none||r.showPasswordStrengthConditionalExists):r.showPasswordStrength=!1,
r}return __extends(i,n),i.prototype.linkInstanceElement=function(i){if(n.prototype.linkInstanceElement.call(this,i),this.showPasswordStrength){var r="";r=this.showPasswordStrengthAttribute&&"undefined"!=typeof this.passwordStrengthOrientation&&this.passwordStrengthOrientation!==t.BubbleOrientations.none?e.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength,{orientation:t.BubbleOrientations[this.passwordStrengthOrientation]}):e.utils.templates.fill(this._screenSet.getTemplates().inlinedPasswordStrength,{orientation:t.BubbleOrientations[t.BubbleOrientations.none]}),this.instanceElement.insertAdjacentHTML("afterend",r);var a=this.instanceElement.nextElementSibling?this.instanceElement.nextElementSibling:this.instanceElement.nextSibling;if(this.passwordStrengthWidget=new t.PasswordStrengthWidget(this._form,a),this.showPasswordStrengthConditionalExists){this.passwordStrengthWidget.templateElement.setAttribute(t.Screen_CONSTS.conditionalAttributePrefix+"data-bubble-orientation",this.showPasswordStrengthConditional.condition);var s={attributeName:"data-bubble-orientation",condition:this.showPasswordStrengthConditional.condition,defaultValue:this.showPasswordStrengthConditional.defaultValue,lastAttributeValue:this.showPasswordStrengthConditional.defaultValue,isWidgetParamTag:!1};this.passwordStrengthWidget.conditionalExpressions.push(s)}this.passwordStrengthWidget._passwordField=this,t.TemplateElement.prepareTemplateInstanceElement(a,!1),this.passwordStrengthWidget.linkInstanceElement(a.parentElement)}},i.prototype.unlinkInstanceElement=function(){this.showPasswordStrength&&(this.passwordStrengthWidget.unlinkInstanceElement(),this.passwordStrengthWidget.unlinkTemplate(),this.passwordStrengthWidget=null),n.prototype.unlinkInstanceElement.call(this)},i.prototype._validateValue=function(e,i,r){var a=this;n.prototype._validateValue.call(this,e,i,function(e){if(0!==e.errorCode)return r(e);if(a.isPasswordSchemaValidated()){var n=a._screenSet.getApiData();if(n.getPolicies&&n.getPolicies.passwordComplexity){var s=n.getPolicies.passwordComplexity||{},o=t.getPasswordStrengthData(i);if(!t.isPasswordStrengthValid(i,o,s))return r({errorCode:400009,field:a})}}r(e)})},i.prototype.isPasswordSchemaValidated=function(){return this._form.schemaValidated()},i.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this),this.passwordStrengthWidget&&this.passwordStrengthWidget.evaluateConditionalAttributes()},i.prototype.isPasswordStrengthWidgetBound=function(){return this.showPasswordStrength},i}(t.FormInput);t.BasePasswordInput=n;var i=function(e){function n(t){var n=e.call(this,t)||this;return n._form._passwordInputs.push(n),n}return __extends(n,e),n.FORM_TYPE_CRITERIA=function(e){return"password"===e.fieldName},n.prototype.isPasswordSchemaValidated=function(){return!(this._form instanceof t.ProfileForm)&&e.prototype.isPasswordSchemaValidated.call(this)},n}(n);t.PasswordInput=i,t.FormInput.addInputToLibrary(i);var r=function(e){function t(t){var n=e.call(this,t)||this;return n._form._passwordInputs.unshift(n),n}return __extends(t,e),t.FORM_TYPE_CRITERIA=function(e){return"newPassword"===e.fieldName},t}(n);t.NewPasswordInput=r,t.FormInput.addInputToLibrary(r)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.SecretQuestionWidget_CONSTS={selector:"div.gigya-secret-question",allowEmpty:"data-allow-empty"},e.DeepFreeze(e.SecretQuestionWidget_CONSTS);var t=function(t){function i(i,r){var a=t.call(this,i,r,!1)||this;a.questions=new Array,i._secretQuestions.push(a);var s=r.querySelectorAll('*[name="secretQuestion"]');return e.ForEach(s,function(e){return a.questions.push(new n(e,a))}),a.answerField=i.getField("secretAnswer"),a.answerField?a:(a.warn(e.SecretQuestionWidget_CONSTS.selector+"'s form is missing secretAnswer field to link to"),a)}return __extends(i,t),i.prototype.unlinkTemplate=function(){e.ForEach(this.questions,function(e){return e.unlinkTemplate()}),t.prototype.unlinkTemplate.call(this)},i.prototype.linkInstanceElement=function(n){var i=this;t.prototype.linkInstanceElement.call(this,n),this.instanceElement&&(this.answerField&&this.answerField.instanceElement.setAttribute(e.SecretQuestionWidget_CONSTS.allowEmpty,"1"),e.ForEach(this.questions,function(e){return e.linkInstanceElement(i.instanceElement)}))},i.prototype.unlinkInstanceElement=function(){this.instanceElement&&e.ForEach(this.questions,function(e){return e.unlinkInstanceElement()}),t.prototype.unlinkInstanceElement.call(this)},i.prototype.setQuestion=function(t){e.ForEach(this.questions,function(e){return e.instanceElement.innerHTML=t}),this.answerField&&this.answerField.instanceElement.removeAttribute(e.SecretQuestionWidget_CONSTS.allowEmpty),this.instanceElement.style.display="inline"},i}(e.BaseFormWidget);t.CONSTS=e.SecretQuestionWidget_CONSTS,e.SecretQuestionWidget=t;var n=function(e){function t(t,n){return e.call(this,t,n)||this}return __extends(t,e),t}(e.TemplateElement);e.BaseFormWidget.addWidgetToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(e,n){function i(e,t,n){return void 0===n&&(n=!1),function(i,r){return t(e,i,n)}}function r(e,t){return function(n,i){var r=t(e,n);return r||(i.hasRequiredFields=!1),r}}var a=new Array;return t.ForEachProp(n,function(t,n){if(e.getAttribute(n)){var s=e.getAttribute(n),o=!1;s&&"true"==e.getAttribute(h.CONSTS.onRenderAttr)&&(o=!0),t.overwriteFields?a.push(r(s,t)):a.push(i(s,t,o))}}),a}function i(n){var i=n.split(",");return t.Some(i,function(t){return e.pluginUtils.domain.isInDomain(t)})}function r(t){var n=t.split(",");return e.utils.array.indexOf(n,e.thisScript.APIKey)!=-1}function a(e,t){return t._screenSet._random<=parseFloat(e)}function s(t){var n=e.global.date.getISODate(t);return(new Date).getTime()>n.getTime()}function o(t){var n=e.global.date.getISODate(t);return(new Date).getTime()<=n.getTime()}function l(e,t){var n=t.getHistoryFromSettings();return!!n&&(!(e<=n.displayCount)&&(n.wasUpdated||(n.displayCount++,n.wasUpdated=!0,t.saveHistoryInSettings(n)),!0))}function c(e,t){var n=t.getHistoryFromSettings();if(!n)return!1;var i=(new Date).getTime(),r=(i-n.lastDisplay)/1e3;return!(n.lastDisplay!==-1&&e>=r)&&(n.wasUpdated||(n.lastDisplay=i,n.wasUpdated=!0,t.saveHistoryInSettings(n)),!0)}function u(n,i){var r=new Array;if("*"===n){var a=t.getElementsByHavingAttribute(i.instanceElement,"*",t.FormInput_CONSTS.fieldName);t.ForEach(a,function(e){var n=e.getAttribute(t.FormInput_CONSTS.fieldName);n&&r.push(e)})}else t.ForEach(n.split(","),function(n){var a=e.utils.DOM.getElementsByAttribute(i.instanceElement,"*",t.FormInput_CONSTS.fieldName,n)[0];r.push(a)});return t.Some(r,function(e){return!e.value})}function d(e,n){var i,r,a,s=e.split(","),o=n._form.getLoginProviders(),l=t.Some(s,function(e){return e===g[g.site]}),c=t.Some(s,function(e){return e===g[g.social]}),u=t.Some(s,function(e){return e===g[g.siteOnly]}),d=t.Some(s,function(e){return e===g[g.socialOnly]}),p=t.Some(s,function(e){return e===g[g.siteAndSocial]});if("string"!=typeof o?(a=[],i=r=!0):(a=o.split(","),i=t.Some(a,function(e){return e!==g[g.site]}),r=t.Some(a,function(e){return e===g[g.site]})),u)return r&&!i;if(d)return i&&!r;if(p)return r&&i;if(c)return i;if(l)return r;var h=t.Some(s,function(e){return t.Some(a,function(t){return t===e})});return h}function p(e,t,n){return void 0===n&&(n=!1),!(!n||!t.validationPassed)||Boolean(t.evaluateExpression({condition:e}))}t.ContainerWidget_CONSTS={selector:"div.gigya-container",activeClass:"gigya-container-enabled",emptyFields:"data-empty-fields",displayCap:"data-display-cap",displayFreq:"data-display-freq",loginIdentities:"data-login-idenities",conditionAttr:"data-condition",onRenderAttr:"data-on-render"},t.DeepFreeze(t.ContainerWidget_CONSTS);var h=function(i){function r(e,n){var r=i.call(this,e,n,!1)||this;return r.onElementChange=function(){return r.refresh()},r.name=n.getAttribute("name"),r.emptyFields=n.getAttribute(t.ContainerWidget_CONSTS.emptyFields),r.emptyFields&&e._autoSkipContainers.push(r),r.name&&(n.getAttribute(t.ContainerWidget_CONSTS.displayCap)||n.getAttribute(t.ContainerWidget_CONSTS.displayFreq))&&(e._needContainerHistory=!0),r.updateConditions(n),r}return __extends(r,i),r.prototype.updateConditions=function(e){void 0===e&&(e=this.instanceElement),this.renderingConditions=n(e,m.rendering),this.validationConditions=n(e,m.validation)},r.prototype.checkAutoSkip=function(){return!u(this.emptyFields,this)},r.prototype.linkInstanceElement=function(e){i.prototype.linkInstanceElement.call(this,e);var t=this.testRendering();this.originalRenderingStatus=this.conditionStatus=t,this.originalRenderingStatus&&this.onElementChange()},r.prototype.refresh=function(){var n=this.validationPassed=this.testValidations();this.conditionStatus=this.originalRenderingStatus&&n,this.conditionStatus?e.utils.DOM.addClassToElement(this.instanceElement,t.ContainerWidget_CONSTS.activeClass):e.utils.DOM.removeClassFromElement(this.instanceElement,t.ContainerWidget_CONSTS.activeClass)},r.prototype.testRendering=function(){return this.testContainer(this.renderingConditions)},r.prototype.testValidations=function(){return this.testContainer(this.validationConditions)},r.prototype.testContainer=function(e){var n=this,i={hasRequiredFields:this.containsEmptyRequiredFields()},r=t.Every(e,function(e){return e(n,i)});return i.hasRequiredFields||r},r.prototype.containsEmptyRequiredFields=function(){var e=this,n=t.getElementsByHavingAttribute(this.instanceElement,"*",t.FormInput_CONSTS.fieldName),i=t.Some(n,function(n){var i=n.getAttribute(t.FormInput_CONSTS.fieldName);if(i){var r=e._form.isRequiredField(i);if(r&&!n.value)return!0}return!1});return i},r.prototype.getHistoryFromSettings=function(){var e=this._screenSet.getApiData();if(!this.name)return null;if(!e.getUserSettings||e.getUserSettings.errorCode>0)return null;var t=e.getUserSettings.settings;if(!t)return null;var n=t[this.name]||{};return n.displayCount||(n.displayCount=0),n.lastDisplay||(n.lastDisplay=-1),n},r.prototype.saveHistoryInSettings=function(t){var n=this._screenSet.getApiData();if(!n.getUserSettings||n.getUserSettings.errorCode>0)return null;var i=n.getUserSettings.settings;if(!i)return null;i[this.name]=t;var r={};r[this.name]={displayCount:t.displayCount,lastDisplay:t.lastDisplay},e.socialize.setUserSettings({group:"gigya_container_history-"+this._form.ID,regToken:this._screenSet.data.regToken,settings:r,disableLocalSettings:!0})},r.prototype.evaluateConditionalAttributes=function(){i.prototype.evaluateConditionalAttributes.call(this),this.emptyFields=this.instanceElement.getAttribute(t.ContainerWidget_CONSTS.emptyFields),this.originalRenderingStatus&&this.onElementChange()},r.prototype.hasConditionalAttributes=function(){return!0},r}(t.BaseFormWidget);h.CONSTS=t.ContainerWidget_CONSTS,t.ContainerWidget=h,t.BaseFormWidget.addWidgetToLibrary(h);var g;!function(e){e[e.social=0]="social",e[e.site=1]="site",e[e.siteOnly=2]="siteOnly",e[e.socialOnly=3]="socialOnly",e[e.siteAndSocial=4]="siteAndSocial",e[e["site-only"]=2]="site-only",e[e["social-only"]=3]="social-only",e[e["site-and-social"]=4]="site-and-social"}(g=t.SpecialProviders||(t.SpecialProviders={})),t.DeepFreeze(g),d.overwriteFields=!0;var m={rendering:{"data-domains":i,"data-apikeys":r,"data-prob":a,"data-after-date":s,"data-before-date":o,"data-display-cap":l,"data-display-freq":c,"data-empty-fields":u,"data-login-identities":d},validation:{"data-condition":p}}}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.fail=0]="fail",e[e.saveProfileAndFail=1]="saveProfileAndFail"}(t=e.ConflictHandling||(e.ConflictHandling={})),e.LoginModes={standard:{name:"standard",getLoginProviders:function(e,t,n){var i=t.enabledProviders;return"string"!=typeof i?null:i.toLowerCase()},filterParams:function(e){return delete e.regToken,delete e.instanceID,delete e.getInstance,e}},reAuth:{name:"reAuth",getLoginProviders:function(t,n,i){var r=t.getAccountInfo&&t.getAccountInfo.socialProviders,a=t.getAccountInfo&&t.getAccountInfo.identities;if(!r)return null;r=r.toLowerCase();var s=r.split(",");return a&&e.ForEach(a,function(e){if(!e.allowsLogin){var t=s.indexOf(e.provider.toLowerCase());t>-1&&s.splice(t,1)}}),s.join(",")},filterParams:function(e){return delete e.instanceID,delete e.getInstance,e}},link:{name:"link",getLoginProviders:function(e,t,n){return n?e.getConflictingAccount&&e.getConflictingAccount.conflictingAccount&&e.getConflictingAccount.conflictingAccount.loginProviders&&e.getConflictingAccount.conflictingAccount.loginProviders.join(",").toLowerCase():null},filterParams:function(e){return delete e.instanceID,delete e.getInstance,e}}},e.DeepFreeze(e.LoginModes)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e[e.NotStarted=0]="NotStarted",e[e.InProgress=1]="InProgress",e[e.Done=2]="Done",e[e.Error=3]="Error"}(t=e.ServerStates||(e.ServerStates={})),e.DeepFreeze(t);var n=function(n){function i(e,i,r){var a=n.call(this,e,i,r)||this;return a.nextServerQueryId=0,a.serverState=t.NotStarted,a.callbacks=new Array,e._serverWidgets.push(a),a}return __extends(i,n),i.prototype.startServerQuery=function(){return this.serverState=t.InProgress,++this.nextServerQueryId},i.prototype.onServerQueryEnd=function(e,t,n){e===this.nextServerQueryId?this.serverQueryDone(t,n):this.warn("Ignoring server response #"+e)},i.prototype.serverQueryDone=function(t,n){var i=this;this.serverState=t,e.ForEach(this.callbacks,function(e){return e(t,i)}),this.callbacks=new Array},i.prototype.runOnServerDone=function(e){this.serverState!==t.InProgress?e(this.serverState,this):this.callbacks.push(e)},i}(e.BaseFormWidget);e.BaseServerWidget=n}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n="Not Implemented";t.BaseUploadWidget_CONSTS={setDimentionsDelay:500,uploadCheckInterval:500,uploading:"data-upload-status",uploadForm:"screenSetUploadForm"},t.DeepFreeze(t.BaseUploadWidget_CONSTS);var i=0,r=function(r){function a(e,n,a){var s=r.call(this,e,n,a)||this,o=i++;return s._uploadIframeID=s._screenSet.params.containerID+"_upload"+o+"_target",s.formDivID=s._screenSet.params.containerID+"_upload"+o+"_form",s.listenOnIframe=function(){var e=s.uploadIframe.getAttribute(t.BaseUploadWidget_CONSTS.uploading),n=t.ServerStates[e];n!==s.serverState&&s.onServerQueryEnd(s._lastQueryId,n)},s.fileInputChanged=function(){return s.onFileInputChange()},s}return __extends(a,r),a.prototype.onFileInputChange=function(){this.startServerQuery()},a.prototype.linkInstanceElement=function(n){var i=this;r.prototype.linkInstanceElement.call(this,n),this.instanceElement&&(this.uploadIframe=document.createElement("iframe"),this.uploadIframe.style.display="none",this.uploadIframe.id=this._uploadIframeID,this.uploadIframe.setAttribute("name",this._uploadIframeID),this.uploadIframe.setAttribute(t.BaseUploadWidget_CONSTS.uploading,t.ServerStates[t.ServerStates.NotStarted]),this.uploadIframe.setAttribute("onload","this.setAttribute('"+t.BaseUploadWidget_CONSTS.uploading+"','"+t.ServerStates[t.ServerStates.Done]+"')"),this.instanceElement.appendChild(this.uploadIframe),this._formDiv=document.createElement("div"),this._formDiv.id=this.formDivID,this._formDiv.className="gigya-attach-file-upload-form",this._formDiv.innerHTML=this.getFormHtml(),this._formDiv.style.zIndex=""+e.utils.DOM._nextZIndex++,this.instanceElement.appendChild(this._formDiv),window.setTimeout(function(){return i.setFormDimentions()},t.BaseUploadWidget_CONSTS.setDimentionsDelay),this._uploadForm=this.getFormElement(),this.fileInput=this._uploadForm.elements._profilePhoto,e.utils.DOM.addClassToElement(this.fileInput,"gigya-attach-file-upload-file-input"),e.utils.DOM.addEventListener(this.fileInput,"change",this.fileInputChanged))},a.prototype.getFormHtml=function(){throw new Error(n)},a.prototype.getFormElement=function(){throw new Error(n)},a.prototype.getFileElement=function(){throw new Error(n)},a.prototype.setFormDimentions=function(){this.instanceElement&&0!=this.instanceElement.offsetHeight&&(this._formDiv.style.height=this.instanceElement.offsetHeight+"px",this._formDiv.style.width=this.instanceElement.offsetWidth+"px")},a.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.uploadCheckInterval&&this.onServerQueryEnd(this._lastQueryId,t.ServerStates.Error),e.utils.DOM.removeEventListener(this.fileInput,"change",this.onFileInputChange),this.fileInput=null,this._uploadForm=null,this._formDiv.parentElement.removeChild(this._formDiv),this._formDiv=null,this.instanceElement.removeChild(this.uploadIframe),this.uploadIframe=null),r.prototype.unlinkInstanceElement.call(this)},a.prototype.stopUploadCheck=function(){this.uploadCheckInterval&&(window.clearInterval(this.uploadCheckInterval),this.uploadCheckInterval=0)},a.prototype.serverQueryDone=function(e){this.stopUploadCheck(),r.prototype.serverQueryDone.call(this,e)},a.prototype.submitUploadForm=function(){this._uploadForm.submit()},a.prototype.startServerQuery=function(){return this._lastQueryId=r.prototype.startServerQuery.call(this),this.uploadIframe.setAttribute(t.BaseUploadWidget_CONSTS.uploading,t.ServerStates[this.serverState]),this.uploadCheckInterval||(this.uploadCheckInterval=window.setInterval(this.listenOnIframe,t.BaseUploadWidget_CONSTS.uploadCheckInterval)),this.submitUploadForm(),this._lastQueryId},a.prototype.getServerParameters=function(){var t=e.utils.object.extractProperties(this._screenSet.params,{},"APIKey|cid|oauth_token|login_token|source|sourceData|regToken");t.authMode=t.oauth_token?"token":"cookie";var n=e._.apiAdapters.web;return n&&(t.login_token=n.tokenStore.get(t.APIKey),t.gmidTicket=e._.apiAdapter.getGmidTicket()),t.APIKey||(t.APIKey=e.thisScript.APIKey),this._screenSet.data.regToken&&(t.regToken=this._screenSet.data.regToken),t},a}(t.BaseServerWidget);t.BaseUploadWidget=r}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var __gig_awaiter=this&&this.__gig_awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,a){function s(e){try{l(i.next(e))}catch(e){a(e)}}function o(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,o)}l((i=i.apply(e,t)).next())})},__gig_generator=this&&this.__gig_generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,a&&(s=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(s=o.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=t.call(e,o)}catch(e){n=[6,e],a=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,a,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return{next:n(0),throw:n(1),return:n(2)}},gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(e){var t=e.match(/\[[0-9]+](?!.*\[[0-9]])/);return t&&t[0]&&Number(t[0].replace(/[[\]]/g,""))}function i(e,t){var n=t.split(/\[[0-9]]\./),i=t.match(/\[[0-9]]/g);if(!(n&&i&&n.length&&i.length&&n.length-1===i.length))return e;n.length>1&&(n.pop(),i.pop()),i=i.map(function(e){return e.replace(/[[\]]/g,"")}).map(function(e){return Number(e)});for(var r=0,a=e;r<i.length;)a[n[r]]&&a[n[r]].length>i[r]&&(a=a[n[r]][i[r]]),r++;return a}t.Form_CONSTS={originalSuccessScreen:"data-original-success-screen",successScreen:"data-on-success-screen",autoSkipScreen:"data-on-auto-skip-screen",autoSkipFlag:"data-auto-skip",screenSetSkippedScreen:"data-on-screenset-skipped-screen",formErrorClass:"gigya-form-error",defaultCheckedAttribute:"data-checked"},t.CUSTOM_VALIDATION_TIMEOUT_WARNING=1e4,t.DeepFreeze(t.Form_CONSTS);var r="Not implemented",a=function(a){function s(n,i,r){var s=a.call(this,i,n)||this;return s._screen=n,s.gigyaClass=r,s.dataToServer=new Array,s._dynamicInputs=new Array,s._inputs=new Array,s._errorDisplayElements={},s._widgets=new Array,s._passwordInputs=new Array,s._passwordRetypes=new Array,s._secretQuestions=new Array,s._autoSkipContainers=new Array,s._serverWidgets=new Array,s._needContainerHistory=!1,s.filters=new Array,s.isPopulated=!1,s.bindID=s.publishID?s.ID:r,s.originalSuccessScreen=i.getAttribute(t.Form_CONSTS.successScreen),s.successScreen=s._screenSet.chooseNextScreen(s.originalSuccessScreen),s.autoSkip="true"==i.getAttribute(t.Form_CONSTS.autoSkipFlag),s.autoSkipScreen=i.getAttribute(t.Form_CONSTS.autoSkipScreen)||s.successScreen,s.screenSetSkippedScreen=i.getAttribute(t.Form_CONSTS.screenSetSkippedScreen)||s.successScreen,s.registerFormInputs(),s.registerBoundedErrorElements(),s._widgets=t.BaseFormWidget.registerWidgets(s),s.submitHandler=function(t){e.utils.DOM.disableDefaultEventHandling(t),s.submit()},s.addEventListener("submit",s.submitHandler),s.fieldChangedHandler=function(e){s.evaluateConditionalAttributes()},s}return __extends(s,a),s.addFormToLibrary=function(e){s.FormsLibrary[e.CONSTS.gigyaClass]=e},s.registerForms=function(e){var n=new Array;return t.ForEachProp(s.FormsLibrary,function(i,r){var a=e.templateElement.querySelectorAll("form."+r);t.ForEach(a,function(t){t.setAttribute("onsubmit","return false;"),n.push(new i(e,t,r))})}),n},s.prototype.registerFormInputs=function(){this._inputs=t.FormInput.registerFormInputs(this.templateElement.elements,this),this._passwordInputs.length>0&&(this._validatedPassword=this._passwordInputs[0])},s.prototype.addDataField=function(e){this.dataToServer.push(e)},s.prototype.addDynamicWidgets=function(e){var n=this,i=t.BaseFormWidget.registerDynamicWidgets(this,e);return t.ForEach(i,function(e){return e.linkInstanceElement(n.instanceElement)}),this._widgets=this._widgets.concat(i),i},s.prototype.removeDynamicWidgets=function(e){this._widgets&&this._widgets.length&&(this._widgets=this._widgets.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){e.unlinkInstanceElement(),e.unlinkTemplate()}))},s.prototype.isFormBoundedElement=function(e){if(e.boundedTo===this.bindID)return!0;for(var t=e.instanceElement||e.templateElement,n=this.instanceElement||this.templateElement;t&&t!==n&&t!==document.documentElement;)t=t.parentElement;return t===n},s.prototype.ignoredFields=function(){return{recaptcha_challenge_field:!0,recaptcha_response_field:!0,"g-recaptcha-response":!0}},s.prototype.registerBoundedErrorElements=function(){var e=this,n=new Array;this._errorDisplayElements={},t.ForEachProp(this._screen._errorDisplayElements,function(i){t.ForEach(i,function(t){e.isFormBoundedElement(t)&&n.push(t)})}),t.ForEach(n,function(t){t._form=e;var n=t.boundedTo===e.bindID?e.bindID:e.getNormalizedFieldName(t.boundedTo),i=e._errorDisplayElements[n];i||(i=e._errorDisplayElements[n]=[]),i.push(t)})},s.prototype.unlinkTemplate=function(){this.removeEventListener("submit",this.submitHandler);var e=function(e){return e.unlinkTemplate()};t.ForEach(this._widgets,e),t.ForEach(this._inputs,e),a.prototype.unlinkTemplate.call(this)},s.prototype.linkInstanceElement=function(e){var n=this;if(a.prototype.linkInstanceElement.call(this,e),this.instanceElement){var i=function(e){return e.linkInstanceElement(n.instanceElement)};t.ForEach(this._inputs,i),t.ForEach(this._widgets,i),this.prePopulate(),this.addEventListener("fieldChanged",this.fieldChangedHandler)}},s.prototype.getLoginProviders=function(){return t.LoginModes.standard.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},s.prototype.unlinkInstanceElement=function(){if(this.removeEventListener("fieldChanged",this.fieldChangedHandler),this.clearDynamicFields(this._dynamicInputs),this._dynamicInputs=[],this.instanceElement){var e=function(e){return e.unlinkInstanceElement()};t.ForEach(this._widgets,e),t.ForEach(this._inputs,e)}a.prototype.unlinkInstanceElement.call(this)},s.prototype.prePopulateDataFrom=function(){return[]},s.prototype.prePopulateData=function(){var n=this._screenSet.getApiData(),i=[{}];return t.ForEach(this.prePopulateDataFrom(),function(t){i.push(e.utils.object.getPropertyBySerializedName(n,t,!1))}),e.utils.object.merge(i)},s.prototype.prePopulate=function(){var i=this,r=this.prePopulateData();this.updateDynamicFields();var a=function(a){var s=a.getName(!0);if(s){var o=null,l=a.instanceElement.getAttribute(t.FormInput_CONSTS.arrayRootAttribute);if(l){var c=a.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyFieldAttribute),u=a.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute);if(c&&u){var d=e.utils.object.getPropertyBySerializedName(r,l,!1);if(d&&d instanceof Array&&d.length)for(var p=0,h=d;p<h.length;p++){var g=h[p],m=e.utils.object.getPropertyBySerializedName(g,c,!1);if(u===String(m)){o=e.utils.object.getPropertyBySerializedName(g,s.substr(l.length+1),!1);break}}}else{var f=n(s);if(f>=0){var d=e.utils.object.getPropertyBySerializedName(r,l,!1);if(d&&d instanceof Array&&d.length){var S=s.substr(s.lastIndexOf(".")+1);f>=0&&d.length>f&&S&&d[f][S]&&(o=d[f][S])}}else i.warn("Field not populated because data-array-root provided without data-array-key-field and data-array-key-value",s)}}else o=e.utils.object.getPropertyBySerializedName(r,s,!1);if(null!==o)a.prePopulate(o);else if("checkbox"===a.type){var y=a.instanceElement,_=a.instanceElement.getAttribute(t.Form_CONSTS.defaultCheckedAttribute);_&&(y.checked=Boolean(a.evaluateExpression({condition:_}))),a.setValue(y.checked)}}};t.ForEach(this._inputs,a),t.ForEach(this._dynamicInputs,a),this.isPopulated=!0},s.prototype.getExtraProfileFields=function(e){var n=this,i=new Array,r={};return t.ForEach(this.dataToServer,function(a){if(a.fieldNamespace===n.profileObjectName()){var s=t.firstPart(a.normalizedFieldName.replace(n.profileObjectName()+".",""),".");if(!r[s]){r[s]=!0;var o=n._screenSet.getProfile();e&&o&&o[s]||i.push(s)}}}),i},s.prototype.getNeededData=function(){var e={};this._needContainerHistory&&(e.getUserSettings={params:{group:"gigya_container_history-"+this._screenSet.params.containerID,regToken:this._screenSet.data.regToken,disableLocalSettings:!0},cache:!1});var n=t.Some(this.dataToServer,this.isPasswordPolicyNeededForField);return n&&(e.getPolicies={params:{sections:"passwordComplexity"},cache:!0}),e},s.prototype.isPasswordPolicyNeededForField=function(e){return e instanceof t.BasePasswordInput&&(e.isPasswordSchemaValidated()||e.isPasswordStrengthWidgetBound())},s.prototype.clearDynamicFields=function(n){var i=this;t.ForEach(n,function(t){t.unlinkInstanceElement(),t.unlinkTemplate();var n=e.utils.array.indexOf(i.dataToServer,t);n!==-1&&i.dataToServer.splice(n,1)})},s.prototype.isDynamicFieldObsolete=function(e){for(var t=e.templateElement.parentElement;t&&t!==this.instanceElement&&t!==document.documentElement;)t=t.parentElement;return t!==this.instanceElement},s.prototype.isDynamicFieldToAdd=function(e){var n=this,i=this.ignoredFields(),r=e[t.TemplateElement_CONSTS.instanceOfArray];if(r&&t.Some(r,function(e){return e instanceof t.FormInput&&e._form===n}))return!1;var a=e.getAttribute("name");return!i[a]},s.prototype.addDynamicInputs=function(e){var n=this,i=t.FormInput.registerFormInputs(e,this);return i.forEach(function(e){t.TemplateElement.prepareTemplateInstanceElement(e.templateElement,!1),e.linkInstanceElement(n.instanceElement)}),this._inputs=this._inputs.concat(i),i},s.prototype.removeDynamicInputs=function(t){var n=this;this._inputs=this._inputs.filter(function(e){return t.indexOf(e)<0}),t.forEach(function(t){var i=e.utils.array.indexOf(n.dataToServer,t);i!==-1&&n.dataToServer.splice(i,1),t.unlinkInstanceElement(),t.unlinkTemplate()})},s.prototype.updateDynamicFields=function(){var e=this,n=new Array,i=new Array;t.ForEach(this._dynamicInputs,function(t){e.isDynamicFieldObsolete(t)?n.push(t):i.push(t)}),this.clearDynamicFields(n);var r=new Array;t.ForEach(this.instanceElement.elements,function(t){e.isDynamicFieldToAdd(t)&&r.push(t)});var a=t.FormInput.registerFormInputs(r,this);t.ForEach(a,function(n){t.TemplateElement.prepareTemplateInstanceElement(n.templateElement,!1),n.linkInstanceElement(e.instanceElement),n.dynamicField=!0,i.push(n)}),this._dynamicInputs=i},s.prototype.requiredFields=function(){return this.specialFields()},s.prototype.onInputChange=function(t,n){var i=this;if(n)return e.utils.DOM.dispatch(this.instanceElement,"fieldChanged"),this.afterInputChange({field:t,errorCode:0,setByScript:n});var r=t.getValue();t.validate(function(n){var a={eventName:"fieldChanged",screen:i._screen.ID,form:i.bindID,field:t.fieldName,isValid:!n.errorCode,errMsg:n.errorCode,value:r};i._screen.dispatchEvent("fieldChanged",a),e.utils.DOM.dispatch(i.instanceElement,"fieldChanged"),i.afterInputChange(n)})},s.prototype.afterInputChange=function(e){"newPassword"!==e.field.fieldName&&"password"!==e.field.fieldName||t.ForEach(this._passwordRetypes,function(t){t.setValue("",e.setByScript)}),this.showFieldError(e.field,e.errorCode,!0)},s.prototype.schemaValidated=function(){return!1},s.prototype.getFieldSchema=function(e){var t=this._screenSet.getApiData(),n="data"===e.fieldNamespace?"dataSchema":"profileSchema";return t.getSchema&&t.getSchema[n]&&t.getSchema[n].fields&&t.getSchema[n].fields[e.fieldBaseName]},s.prototype.showFieldError=function(e,n,i,r){var a={errorCode:n,errorMessage:r||this._screen.getErrorMessage(n,i,e)},s=!0;if(i){var o=void 0;switch(n){case 0:o=t.ValidityStates.valid;break;case 100001:o=t.ValidityStates.pending,s=!1;break;default:o=t.ValidityStates.error}e.setValidityState(o);var l=this._errorDisplayElements[e.normalizedFieldName]||[];t.ForEach(l,function(i){var r=e.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute);r&&r!==i.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute)||(a.errorMessage&&i.isErrorCodeAllowed(n)?i.showError(a):i.hideError())})}return s},s.prototype.showCustomFormError=function(n){var i={errorMessage:n,errorCode:400009};this.showErrors([i],!0),e.utils.DOM.addClassToElement(this.instanceElement,t.Form_CONSTS.formErrorClass)},s.prototype.createOnBeforeValidationEvent=function(){return{data:this._screenSet.getSchemaData(),preferences:this._screenSet.getPreferences(),eventName:"beforeValidation",form:this.bindID,formData:this.getFlatFormData(!0,!1),profile:this._screenSet.getProfile(),screen:this._screen.ID,subscriptions:this._screenSet.getSubScriptions()}},s.prototype.applyCustomValidation=function(){return __gig_awaiter(this,void 0,e.Promise,function(){var n,i,r,a,s,o,l=this;return __gig_generator(this,function(c){switch(c.label){case 0:n=!0,i=void 0,this._screenSet.dimScreenSet(),r=this.createOnBeforeValidationEvent(),a=this._screen.dispatchEvent(r.eventName,r),s=setTimeout(function(){console.warn("[Gigya]: custom validation did not resolve after more than "+t.CUSTOM_VALIDATION_TIMEOUT_WARNING+" seconds")},t.CUSTOM_VALIDATION_TIMEOUT_WARNING),c.label=1;case 1:return c.trys.push([1,3,4,5]),[4,e.Promise.resolve(a)];case 2:return i=c.sent(),[3,5];case 3:return o=c.sent(),console.warn("[Gigya]: custom validation threw an error",o),
i=void 0,[3,5];case 4:return this._screenSet.undimScreenSet(),clearTimeout(s),[7];case 5:return i&&"object"==typeof i&&t.ForEach(Object.keys(i),function(e){if(i.hasOwnProperty(e)){var t=i[e];if("form"===e)n=!1,l.showCustomFormError(t);else{var r=l.getField(e);r&&(n=!1,l.showFieldError(r,400009,!0,t))}}}),[2,n]}})})},s.prototype.validate=function(n){return __gig_awaiter(this,void 0,e.Promise,function(){var e,i,r,a,s,o=this;return __gig_generator(this,function(l){switch(l.label){case 0:return[4,this.applyCustomValidation()];case 1:return(e=l.sent())?(i=new Array,r=this.getFlatFormData(!0,!0),a=this.dataToServer.length,s=function(t){if(0!==t.errorCode){e=!1;var r={fieldName:t.field.fieldName,errorCode:t.errorCode};i.push(r),r.handled=o.showFieldError(t.field,t.errorCode,!0)}if(--a<0)return o.showErrors(i,!1),n(e)},t.ForEach(this.dataToServer,function(e){return e.validate(s,r)}),s({errorCode:0,field:null}),[2]):[2]}})})},s.prototype.showErrors=function(e,t){this._screen.showErrors(this,e,t)},s.prototype.isRequiredField=function(e){var n=t.firstPart(e,"."),i="data"==n?"dataSchema":"profileSchema";"data"!=n&&"profile"!=n||(e=e.substring(n.length+1));var r=this.requiredFields();if(r[e])return!0;var a=this._screenSet.getApiData();if(a.getSchema&&a.getSchema[i]&&a.getSchema[i].fields){var s=a.getSchema[i].fields[e];if(s&&s.required)return!0}return!1},s.prototype.checkAutoSkip=function(e){return!this.autoSkip||t.Some(this._autoSkipContainers,function(e){return!e.checkAutoSkip()})?e(!1):void this.validate(e)},s.prototype.getNormalizedFieldName=function(e){if(!e)return e;var t=this.specialFields();if(t[e])return e;var n=this.profileObjectName(),i=this.dataObjectName(),r=this.subscriptionObjectName(),a=this.preferencesObjectName(),s=e.split("."),o=s.length>1?s.shift():n;o===n&&s.length>1&&s[0]===i&&(o=s.shift()),[i,n,r,a].indexOf(o)==-1&&(o=n),o&&s.unshift(o);var l=s.join(".");return l},s.prototype.getField=function(e,n){var i;return e=this.getNormalizedFieldName(e),t.Some(this.dataToServer,function(r){return!(r.normalizedFieldName!==e||n&&n!==r.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute))&&(i=r,!0)}),i},s.prototype.isSpecialField=function(e){return!!this.specialFields()[e.fieldName]},s.prototype.getFormData=function(r,a,s){var o=this;void 0===s&&(s=!1);var l={},c=this._screenSet.getApiData().getAccountInfo||{},u={};return t.ForEach(this.dataToServer,function(d){if((!d.disabled()||o.isSpecialField(d))&&(!r||!d.isInHiddenContainer())){var p=d.getValue(),h=d.getName(a),g=d.instanceElement?d.instanceElement.getAttribute(t.FormInput_CONSTS.arrayRootAttribute):"";if(g){var m=d.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyFieldAttribute),f=d.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute);if(!m||!f){var S=n(h);if("number"==typeof S&&S>=0){var y=i(l,h),_=h.split(/\[[0-9]]\./);_.length>1&&_.pop(),_=_[_.length-1];var v=h.substr(h.lastIndexOf(".")+1);if(!v||v.indexOf(".")>=0)return void console.warn("gigya: array mapping is invalid");y[_]&&y[_].constructor===Array||(y[_]=[]);var b=y[_];null!=p&&(s&&""===String(p)&&(p=null),b.length>S&&b[S]?b[S][v]=p:b.length===S&&b.push((A={},A[v]=p,A)))}else o.warn("Field ignored because data-array-root provided without data-array-key-field and data-array-key-value",h);return}if(!l[g]||l[g].constructor!==Array){var E=void 0;c&&(E=e.utils.object.clone(e.utils.object.getPropertyBySerializedName(c,g,!1),!1)),E&&E.constructor===Array||(E=[]),l[g]=E}for(var C=l[g],T=void 0,w=0;w<C.length;w++){var I=C[w];if(I[m]&&String(I[m])===f){u[g]&&e.utils.array.indexOf(u[g],f)!==-1?T=I:C.splice(w,1);break}}if(p){T||(D={},D[m]=f,T=D,C.push(T),u[g]||(u[g]=[]),u[g].push(f));var F=h.substr(g.length+1);T[F]=p}}else null!=p&&(s&&""===String(p)&&(p=null),l[h]=p)}var A,D}),l=e.utils.object.unflatten(l),t.ForEach(this.filters,function(e){l=e.filterOutWidgetsToSend(l)}),l},s.prototype.getFlatFormData=function(t,n,i){return void 0===i&&(i=!1),e.utils.object.flatten(this.getFormData(t,n,i))},s.prototype.specialFields=function(){return{}},s.prototype.subscriptionObjectName=function(){return"subscriptions"},s.prototype.dataObjectName=function(){return"data"},s.prototype.profileObjectName=function(){return"profile"},s.prototype.preferencesObjectName=function(){return"preferences"},s.prototype.defaultSubmitParams=function(){return{}},s.prototype.submitApi=function(){throw new Error(r)},s.prototype._getSubmitApiParams=function(t){return e.utils.object.removeUndefined(t)},s.prototype.performSubmit=function(t){var n=this,i=this.submitApi(),r=this._screenSet.data.extraEventData;this._rememberMe&&(r.rememberMe=Boolean(this._rememberMe.getValue()));var a=r.rememberMe;this._screenSet.data.regToken&&(this._screenSet.params.regToken=this._screenSet.data.regToken);var s=this._getSubmitApiParams(e.utils.object.clone(this._screenSet.params,!0));this._screen.dimScreen(),i(s,t,{dontHandleScreenSet:!0,callback:function(e){return n.onAfterSubmit(e)},remember:a,sessionExpiration:a&&this._screenSet.params.rememberSessionExpiration?this._screenSet.params.rememberSessionExpiration:this._screen._screenSet.params.sessionExpiration},this.defaultSubmitParams())},s.prototype.submit=function(){var n=this,i=t.Some(this._serverWidgets,function(e){return e.serverState===t.ServerStates.InProgress&&(e.runOnServerDone(n.submitHandler),!0)});i||(this.updateDynamicFields(),this.validate(function(t){t&&n.getCaptchaToken().then(function(t){var i=n.getFormData(!0,!0,!0),r=n.getFlatFormData(!0,!1);"undefined"!=typeof r.password&&delete r.password;var a={eventName:"beforeSubmit",screen:n._screen.ID,form:n.bindID,profile:n._screenSet.getProfile(),data:n._screenSet.getSchemaData(),preferences:n._screenSet.getPreferences(),subscriptions:n._screenSet.getSubScriptions(),formData:r},s=n._screen.dispatchEvent("beforeSubmit",a);if(s!==!1){var o={eventName:"submit",screen:n._screen.ID,form:n.bindID,accountInfo:{profile:n._screenSet.getProfile(),data:n._screenSet.getSchemaData(),preferences:n._screenSet.getPreferences(),subscriptions:n._screenSet.getSubScriptions()},formModel:i},l=n._screen.dispatchEvent("submit",o);"string"==typeof t&&(i.captchaToken=t),l&&"function"==typeof l.then?l.then(function(t){return n.performSubmit(e.utils.object.merge([i,t]))}):n.performSubmit(e.utils.object.merge([i,l]))}})}))},s.prototype.getCaptchaToken=function(){if(!this._screen._captchas.length)return e.Promise.resolve(void 0);var t=this._screen._captchas.map(function(t){return t&&"undefined"!=typeof grecaptcha?t.isInvisible?(grecaptcha.execute(t.challengeId),t.waitForChallenge):e.Promise.resolve(t.captchaToken):e.Promise.resolve(void 0)});return t[0]},s.prototype.onAfterSubmit=function(n){this._screen.undimScreen(),0==n.errorCode?e.utils.DOM.removeClassFromElement(this.instanceElement,t.Form_CONSTS.formErrorClass):(e.utils.DOM.addClassToElement(this.instanceElement,t.Form_CONSTS.formErrorClass),this._screen._captchas.forEach(function(e){e.isV2&&e.reset()})),this._screenSet.onScreenResponse(n,this)},s.prototype.evaluateConditionalAttributes=function(){this.hasConditionalAttributes()&&(a.prototype.evaluateConditionalAttributes.call(this),t.ForEach(this._dynamicInputs,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._widgets,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._inputs,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._passwordInputs,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._passwordRetypes,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._secretQuestions,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._autoSkipContainers,function(e){e.evaluateConditionalAttributes()}),t.ForEach(this._serverWidgets,function(e){e.evaluateConditionalAttributes()}),this._rememberMe&&this._rememberMe.evaluateConditionalAttributes(),this.originalSuccessScreen=this.instanceElement.getAttribute(t.Form_CONSTS.successScreen),this.successScreen=this._screenSet.chooseNextScreen(this.originalSuccessScreen),this.autoSkip="true"==this.instanceElement.getAttribute(t.Form_CONSTS.autoSkipFlag),this.autoSkipScreen=this.instanceElement.getAttribute(t.Form_CONSTS.autoSkipScreen)||this.successScreen,this.screenSetSkippedScreen=this.instanceElement.getAttribute(t.Form_CONSTS.screenSetSkippedScreen)||this.successScreen)},s.prototype.hasConditionalAttributes=function(){if(a.prototype.hasConditionalAttributes.call(this))return!0;var t=[].concat(this._widgets,this._inputs,this._dynamicInputs,this._passwordInputs,this._passwordRetypes,this._secretQuestions,this._autoSkipContainers,this._serverWidgets);return e.utils.array.some(t,function(e){return e.hasConditionalAttributes()})},s.prototype.resetLastConditionalValues=function(){a.prototype.resetLastConditionalValues.call(this),t.ForEach(this._dynamicInputs,function(e){e.resetLastConditionalValues()}),t.ForEach(this._widgets,function(e){e.resetLastConditionalValues()}),t.ForEach(this._inputs,function(e){e.resetLastConditionalValues()}),t.ForEach(this._passwordInputs,function(e){e.resetLastConditionalValues()}),t.ForEach(this._passwordRetypes,function(e){e.resetLastConditionalValues()}),t.ForEach(this._secretQuestions,function(e){e.resetLastConditionalValues()}),t.ForEach(this._autoSkipContainers,function(e){e.resetLastConditionalValues()}),t.ForEach(this._serverWidgets,function(e){e.resetLastConditionalValues()})},s}(t.TemplateElement);a.FormsLibrary={},t.BaseForm=a,t.getContainingObject=i}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(){throw new Error("NOT IMPLEMENTED")}e.PendingErrorAttributes={},e.PendingErrorAttributes[200009]={name:e.ScreenOptions_CONSTS.accountsLinkedScreen,nextScreen:function(e){return e._screen.accountsLinkedScreen||"_finish"},requiresFinalize:!0},e.PendingErrorAttributes[206001]={name:e.ScreenOptions_CONSTS.pendingRegistrationScreen,nextScreen:function(e){return e._screen.pendingRegistrationScreen},requiresFinalize:!0},e.PendingErrorAttributes[403043]=e.PendingErrorAttributes[200010]={name:e.ScreenOptions_CONSTS.existingLoginIdentifierScreen,nextScreen:function(e){return e._screenSet.data.regToken&&e._screen.existingLoginIdentifierScreen},requiresFinalize:!0},e.PendingErrorAttributes[206002]={name:e.ScreenOptions_CONSTS.pendingVerificationScreen,nextScreen:function(e){return e._screen.pendingVerificationScreen},resetFinalizeNeededState:!0},e.PendingErrorAttributes[206003]={name:e.ScreenOptions_CONSTS.missingLoginIdScreen,nextScreen:function(e){return e._screen.missingLoginIdScreen}},e.PendingErrorAttributes[403100]={name:e.ScreenOptions_CONSTS.pendingPasswordChangeScreen,nextScreen:function(e){return e._screen.pendingPasswordChangeScreen},requiresFinalize:!0},e.PendingErrorAttributes[403101]={name:e.ScreenOptions_CONSTS.pendingTfaVerificationScreen,nextScreen:function(e){return e._screen.pendingTfaVerificationScreen},requiresFinalize:!0},e.PendingErrorAttributes[403102]={name:e.ScreenOptions_CONSTS.pendingTfaRegistrationScreen,nextScreen:function(e){return e._screen.pendingTfaRegistrationScreen},requiresFinalize:!0},e.PendingErrorAttributes[403110]={name:e.ScreenOptions_CONSTS.pendingReAuthenticationScreen,nextScreen:function(e){return e._screen.pendingReAuthenticationScreen}},e.DeepFreeze(e.PendingErrorAttributes),e.notImplementerAbstract=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n={"gigya-error-display":{showError:function(t,n){return e.utils.DOM.addClassToElement(t,"gigya-error-display-active")},hideError:function(t){return e.utils.DOM.removeClassFromElement(t,"gigya-error-display-active")}},"gigya-error-msg":{showError:function(t,n){e.utils.DOM.addClassToElement(t,"gigya-error-msg-active"),t.innerHTML=n},hideError:function(t){e.utils.DOM.removeClassFromElement(t,"gigya-error-msg-active"),t.innerHTML=""}}};t.DeepFreeze(n);var i;!function(e){e[e.boundObjectError=0]="boundObjectError",e[e.firstError=1]="firstError",e[e.anyError=2]="anyError",e[e.allErrors=3]="allErrors",e[e["bound-object-error"]=0]="bound-object-error",e[e["first-error"]=1]="first-error",e[e["any-error"]=2]="any-error",e[e["all-errors"]=3]="all-errors"}(i=t.ErrorScopes||(t.ErrorScopes={})),t.DeepFreeze(i),t.ErrorDisplayElement_CONSTS={gigyaClasses:["gigya-error-display","gigya-error-msg"],boundedTo:"data-bound-to",errorCodes:"data-error-codes",scope:"data-scope",flags:"data-error-flags",errorClassPrefix:"gigya-error-code-"},t.DeepFreeze(t.ErrorDisplayElement_CONSTS);var r=function(r){function a(a,s){var o=r.call(this,a,s)||this;o._screen=s,o.boundedTo=a.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo),o.scope=i[a.getAttribute(t.ErrorDisplayElement_CONSTS.scope)]||i.boundObjectError;var l=a.getAttribute(t.ErrorDisplayElement_CONSTS.errorCodes);l?o.allowedErrorCodes=t.Map(l.split(","),function(e){return parseInt(e)}):o.allowedErrorCodes=[];var c=a.getAttribute(t.ErrorDisplayElement_CONSTS.flags);c?o.allowedFlags=c.split(","):o.allowedFlags=[];for(var u in n)if(e.utils.DOM.isElementClass(a,u)){o.policy=n[u];break}return o.policy.hideError(a),a.setAttribute("role","alert"),o}return __extends(a,r),a.prototype.isErrorCodeAllowed=function(n,i){var r=this;void 0===i&&(i=null);var a=0===this.allowedErrorCodes.length&&100001!==n||e.utils.array.indexOf(this.allowedErrorCodes,n)!==-1,s=0===this.allowedFlags.length;if(this.allowedFlags.length&&i){var o=i.split(",");s=t.Some(o,function(t){return e.utils.array.indexOf(r.allowedFlags,t)!==-1&&(s=!0,!0)})}return a&&s},a.prototype.showError=function(e){this.setLastError(e),this.policy.showError(this.instanceElement,e.errorMessage),this._screenSet.centerModal()},a.prototype.hideError=function(){this.policy.hideError(this.instanceElement),this.removeLastError()},a.prototype.setLastError=function(n){this.removeLastError(),this.lastError=n,this.instanceElement&&(e.utils.DOM.addClassToElement(this.instanceElement,t.ErrorDisplayElement_CONSTS.errorClassPrefix+n.errorCode),this._screenSet.centerModal())},a.prototype.removeLastError=function(){this.lastError&&(this.instanceElement&&(e.utils.DOM.removeClassFromElement(this.instanceElement,t.ErrorDisplayElement_CONSTS.errorClassPrefix+this.lastError.errorCode),this._screenSet.centerModal()),this.lastError=null)},a.prototype.evaluateConditionalAttributes=function(){r.prototype.evaluateConditionalAttributes.call(this),this.boundedTo=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo);var e=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.errorCodes);e?this.allowedErrorCodes=t.Map(e.split(","),function(e){return parseInt(e)}):this.allowedErrorCodes=[],this.scope=i[this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.scope)]||i.boundObjectError;var n=this.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.flags);n?this.allowedFlags=n.split(","):this.allowedFlags=[]},a}(t.TemplateElement);t.ErrorDisplayElement=r}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.Anchor_CONSTS={selector:"a[data-switch-screen]",switchScreen:"data-switch-screen",successScreen:"data-on-success-screen",screenSetSkippedScreen:"data-on-screenset-skipped-screen"},e.DeepFreeze(e.Anchor_CONSTS);var t=function(t){function n(e,n){var i=t.call(this,n,e)||this;return i._screen=e,i.bindID=i.ID,i}return __extends(n,t),n.prototype.linkInstanceElement=function(e){var n=this;t.prototype.linkInstanceElement.call(this,e),this.updateAttributes(),this.clickHandler=function(e){n._screenSet.switchScreen(n.switchScreen,null,n)},this.addEventListener("click",this.clickHandler)},n.prototype.unlinkInstanceElement=function(){t.prototype.unlinkInstanceElement.call(this),this.removeEventListener("click",this.clickHandler)},n.prototype.evaluateConditionalAttributes=function(){t.prototype.evaluateConditionalAttributes.call(this),this.updateAttributes()},n.prototype.updateAttributes=function(){this.switchScreen=this.instanceElement.getAttribute(e.Anchor_CONSTS.switchScreen),this.instanceElement.setAttribute("href","javascript:void(0)"),this.instanceElement.removeAttribute("target")},n}(e.TemplateElement);e.Anchor=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function n(e,n,i){return t.call(this,n,e,e,i)||this}return __extends(n,t),n.addWidgetToLibrary=function(e){n.ScreenWidgetsLibrary[e.CONSTS.selector]=e},n.registerWidgets=function(t){return e.BaseWidget.registerTypedWidgets(t.templateElement,n.ScreenWidgetsLibrary,function(e,n){return new e(t,n)})},n.registerDynamicWidgets=function(t,i){return e.BaseWidget.registerTypedWidgets(i,n.ScreenWidgetsLibrary,function(e,n){return new e(t,n)})},n}(e.BaseWidget);t.ScreenWidgetsLibrary={},e.BaseScreenWidget=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.ProfilePhotoWidget_CONSTS={selector:"div.gigya-profile-photo"},t.DeepFreeze(t.ProfilePhotoWidget_CONSTS);var n=function(t){function n(e,n){var i=t.call(this,e,n)||this;return e._profilePhotos.push(i),i}return __extends(n,t),n.prototype.linkInstanceElement=function(n){t.prototype.linkInstanceElement.call(this,n);var i=this._screenSet.getProfile(),r=i.thumbnailURL?e.global.getPhotoURL(i.thumbnailURL):"";this.setThumbnailUrl(r)},n.prototype.setThumbnailUrl=function(e){this.instanceElement.innerHTML=e?'<img src="'+e+'" />':""},n}(t.BaseScreenWidget);n.CONSTS=t.ProfilePhotoWidget_CONSTS,t.ProfilePhotoWidget=n,t.BaseScreenWidget.addWidgetToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(n){n.Screen_CONSTS={gigyaClass:"gigya-screen",conditionalAttributePrefix:"gigya-conditional",expressionAttributePrefix:"gigya-expression",cssClass:"data-css-class"},n.DeepFreeze(n.Screen_CONSTS);var i=function(i){function r(e,t){var r=i.call(this,t,e)||this;return r._screenSet=e,r.templateElement=t,r._anchors=new Array,r._errorDisplayElements={},r._profilePhotos=new Array,r._captchas=new Array,r._others=new Array,r.ID||r.warn("screen is missing an id"),/[^-_0-9a-zA-Z]/.test(r.ID)&&r.warn("screen id contains special characters that may contain special meaning"),n.ScreenOptions.call(r,t,e.screenOptions),r.prepareBoundedToFormElements(),r._forms=n.BaseForm.registerForms(r),r._widgets=n.BaseScreenWidget.registerWidgets(r),r.prepareAnchorElements(),r.prepareOtherElements(),r.setCssClass(),r}return __extends(r,i),r.prototype.prepareBoundedToFormElements=function(){var e=this,t=new Array;n.ForEach(n.ErrorDisplayElement_CONSTS.gigyaClasses,function(n){t=t.concat(Array.prototype.slice.call(e.templateElement.querySelectorAll("."+n)))}),n.ForEach(t,function(t){var i=new n.ErrorDisplayElement(t,e),r=e._errorDisplayElements[i.boundedTo];r||(r=e._errorDisplayElements[i.boundedTo]=[]),r.push(i)})},r.prototype.addSpecificErrorBinds=function(e){var t=this;void 0===e&&(e=[]);var i=[];return n.ForEach(e,function(e){var r=new n.ErrorDisplayElement(e,t);t._errorDisplayElements[r.boundedTo]=(t._errorDisplayElements[r.boundedTo]||[]).concat([r]),i.push(r)}),i.forEach(function(e){return e.linkInstanceElement(t.instanceElement)}),i},r.prototype.removeSpecificErrorBinds=function(e){var t=this;void 0===e&&(e=[]),n.ForEach(e,function(e){delete t._errorDisplayElements[e.boundedTo],e.unlinkInstanceElement()})},r.prototype.addDynamicWidgets=function(e){var t=this,i=n.BaseScreenWidget.registerDynamicWidgets(this,e);return n.ForEach(i,function(e){return e.linkInstanceElement(t.instanceElement)}),this._widgets=this._widgets.concat(i),i},r.prototype.removeDynamicWidgets=function(e){this._widgets&&this._widgets.length&&(this._widgets=this._widgets.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){e.unlinkInstanceElement(),e.unlinkTemplate()}))},r.prototype.prepareOtherElements=function(){for(var t=n.getElementsByHavingAttribute(this.templateElement,"*","id"),i=[n.Screen_CONSTS.conditionalAttributePrefix,n.Screen_CONSTS.expressionAttributePrefix],r=n.getElementsByHavingAttributePrefix(this.templateElement,i,["param"]),a=0,s=r;a<s.length;a++){var o=s[a];e.utils.array.indexOf(t,o)===-1&&t.push(o)}for(var l=0,c=t;l<c.length;l++){var u=c[l];n.TemplateElement.isTemplateInstance(u)||this._others.push(new n.TemplateElement(u,this))}},r.prototype.prepareAnchorElements=function(){var e=this,t=this.templateElement.querySelectorAll(n.Anchor_CONSTS.selector);n.ForEach(t,function(t){e._anchors.push(new n.Anchor(e,t))})},r.prototype.addDynamicAnchors=function(e){var t=this,i=[];return n.ForEach(e,function(e){var r=new n.Anchor(t,e);r.linkInstanceElement(t.instanceElement),i.push(r)}),this._anchors=this._anchors.concat(i),i},r.prototype.removeDynamicAnchors=function(e){this._anchors=this._anchors.filter(function(t){return e.indexOf(t)<0}),e.forEach(function(e){e.unlinkInstanceElement(),e.unlinkTemplate()})},r.prototype.haveForms=function(){return this._forms.length||this._hasTfa},r.prototype.setCssClass=function(){this.cssClass=this.templateElement.getAttribute(n.Screen_CONSTS.cssClass)},r.prototype.unlinkTemplate=function(){var e=function(e){return e.unlinkTemplate()};n.ForEach(this._anchors,e),n.ForEach(this._forms,e),n.ForEachProp(this._errorDisplayElements,function(t){n.ForEach(t,e)}),n.ForEach(this._others,e),n.ForEach(this._widgets,e),i.prototype.unlinkTemplate.call(this)},r.prototype.linkInstanceElement=function(t){var r=this;if(i.prototype.linkInstanceElement.call(this,t),this.instanceElement){var a=function(e){return e.linkInstanceElement(r.instanceElement)};n.ForEach(this._widgets,a),n.ForEach(this._others,a),n.ForEachProp(this._errorDisplayElements,function(e){n.ForEach(e,a)}),n.ForEach(this._forms,a),n.ForEach(this._anchors,a)}(e.localInfo.isIE9||e.localInfo.isIE8)&&n.ForEach(this._forms,function(e){e.filters.push({filterOutWidgetsToSend:function(e){return e.profile&&delete e.profile._profilePhoto,e}})})},r.prototype.placeContentInElement=function(e){n.ForEach(this.templateElement.attributes,function(t){return e.setAttribute(t.name,t.value)}),e.innerHTML=this.templateElement.innerHTML},r.prototype.unlinkInstanceElement=function(){if(this.instanceElement){var e=function(e){return e.unlinkInstanceElement()};n.ForEach(this._anchors,e),n.ForEach(this._forms,e),n.ForEachProp(this._errorDisplayElements,function(t){n.ForEach(t,e)}),n.ForEach(this._others,e),n.ForEach(this._widgets,e)}i.prototype.unlinkInstanceElement.call(this)},r.prototype.getErrorMessage=function(e,t,n){return this._screenSet.getErrorMessage(e,t,n.fieldName,n.displayName,n.isCaptcha)},r.prototype.dispatchEvent=function(e,t){return this._screenSet.dispatchScreenSetEvent(e,t)},r.prototype.performAutoSkip=function(){var t=this;return new e.Promise(function(e){t._forms.length||e(null);var i=t._forms.length,r=!0;n.ForEach(t._forms,function(n){return n.checkAutoSkip(function(n){n||(r=!1),--i<=0&&e(r?t._forms[0]:null)})})})},r.prototype.showErrors=function(e,t,i){var r=this,a=this._errorDisplayElements[e.bindID]||[];n.ForEach(a,function(a){if(i||a.scope===n.ErrorScopes.firstError||a.scope===n.ErrorScopes.anyError||a.scope===n.ErrorScopes.allErrors){var s,o=new Array,l=!1;if(n.ForEach(t,function(t){if(a.isErrorCodeAllowed(t.errorCode,t.errorFlags)){t.handled=!0;var n=t.errorMessage;if(s||(s=t.errorCode),!n){var i=e.getField(t.fieldName);i&&(n=r._screenSet.getErrorMessage(t.errorCode,!1,i.fieldName,i.displayName,i.isCaptcha))}n&&(l=!0,o.push(n))}}),l){var c;c=a.scope===n.ErrorScopes.firstError||i?o[0]:"<ul><li>"+o.join("</li><li>")+"</li></ul>",a.showError({errorCode:s,errorMessage:c})}else a.hideError()}}),n.Some(t,function(e){return!e.handled})&&e.warn("Missing error-msg or error-display for form")},r.prototype.dimScreen=function(){return this._screenSet.dimScreenSet()},r.prototype.undimScreen=function(){return this._screenSet.undimScreenSet()},r.prototype.setProfilePhoto=function(e){n.ForEach(this._profilePhotos,function(t){return t.setThumbnailUrl(e)})},r.prototype.getExtraProfileFields=function(e){var t=new Array;return n.ForEach(this._forms,function(n){return t=t.concat(n.getExtraProfileFields(e))}),t},r.prototype.getNeededData=function(){var e={};return n.ForEach(this._forms,function(t){var i=t.getNeededData();n.ForEachProp(i,function(t,n){return e[n]=t})}),e},r.prototype.hasConditionalAttributes=function(){if(i.prototype.hasConditionalAttributes.call(this))return!0;var t=[].concat(this._forms,this._widgets,this._anchors,this._captchas,this._profilePhotos,this._others);return e.utils.array.forEachProp(this._errorDisplayElements,function(e){return t.concat(e)}),e.utils.array.some(t,function(e){return e.hasConditionalAttributes()})},r.prototype.evaluateConditionalAttributes=function(){if(this.hasConditionalAttributes()){var e=this.width,t=this.height;i.prototype.evaluateConditionalAttributes.call(this),n.ScreenOptions.call(this,this.instanceElement,this._screenSet.screenOptions);var r=this.width,a=this.height,s=this.getScreenDimensionsWithUnitType();e==r&&t==a||this._screenSet.resizeModal({width:s.width,height:s.height});var o=this.instanceElement?this.instanceElement.offsetWidth+"px":"";this._screenSet.setCaption(this.caption,o),n.ForEach(this._anchors,function(e){e.evaluateConditionalAttributes()}),n.ForEach(this._forms,function(e){e.evaluateConditionalAttributes()}),n.ForEachProp(this._errorDisplayElements,function(e){n.ForEach(e,function(e){e.evaluateConditionalAttributes()})}),n.ForEach(this._others,function(e){e.evaluateConditionalAttributes()}),n.ForEach(this._widgets,function(e){e.evaluateConditionalAttributes()})}},r.prototype.resetLastConditionalValues=function(){i.prototype.resetLastConditionalValues.call(this),n.ForEach(this._anchors,function(e){e.resetLastConditionalValues()}),n.ForEach(this._forms,function(e){e.resetLastConditionalValues()}),n.ForEachProp(this._errorDisplayElements,function(e){n.ForEach(e,function(e){e.resetLastConditionalValues()})}),n.ForEach(this._others,function(e){e.resetLastConditionalValues()}),n.ForEach(this._widgets,function(e){e.resetLastConditionalValues()})},r.prototype.getScreenDimensionsWithUnitType=function(){var e,i=this._screenSet.getPluginStyle()==t.PluginStyle.legacy;if(this.width){var r;r=n.getUnitMeasurementType(this.width),r===n.UnitMeasurementType.auto||i&&r==n.UnitMeasurementType.percentage||(e=parseFloat(this.width)+r)}var a;if(this.height){var s;s=n.getUnitMeasurementType(this.height),s===n.UnitMeasurementType.auto||i&&s==n.UnitMeasurementType.percentage||(a=parseFloat(this.height)+s)}return{width:e,height:a}},r}(n.TemplateElement);n.Screen=i}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(){var t=new i;return t.set("passwordStrength",e._.plugins.resources.html.screenSet.passwordStrength),t.set("passwordStrength-strengthMeter",e._.plugins.resources.html.screenSet.passwordStrength_strengthMeter),t.set("passwordStrength-minimumRequirements",e._.plugins.resources.html.screenSet.passwordStrength_minimumRequirements),t.set("captcha",e._.plugins.resources.html.screenSet.captcha),t.set("screenSet-dialog",e._.plugins.resources.html.screenSet.screenSet_dialog),t.set("screenSet",e._.plugins.resources.html.screenSet.screenSet),t.set("photoUpload_ui",e._.plugins.resources.html.screenSet.photoUpload_ui),t.set("photoUpload_form",e._.plugins.resources.html.screenSet.photoUpload_form),t.set("inlinedPasswordStrength",e._.plugins.resources.html.screenSet.inlinedPasswordStrength),t.set("consent",e._.plugins.resources.html.screenSet.consent),t}var i=function(){function e(){this._map={}}return e.prototype.get=function(e){return this._map[e]},e.prototype.set=function(e,t){this._map[e]=t instanceof Array?t.join(""):t},e}();t.TemplatesCache=i,t.createDefaultTemplates=n}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){function n(e){var n=[],i=Array.prototype.slice.call(e.querySelectorAll("["+t.ErrorDisplayElement_CONSTS.boundedTo+"]")).map(function(e){return e.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo)});return t.ForEach(t.ErrorDisplayElement_CONSTS.gigyaClasses,function(r){var a=[];i.forEach(function(e){a.push("."+r+"["+t.ErrorDisplayElement_CONSTS.boundedTo+'="'+e+'"]')}),n=n.concat(Array.prototype.slice.call(e.querySelectorAll(a.join(","))))}),n}function i(t,n,i){if(!t||!n)return"";var r=new RegExp(e.utils.stringUtils.escapeRegExp(n)+"\\[[0-9]+]"),a=t.match(r),s=a?a[0]:n;return t.replace(s,n+"["+i+"]")}t.ArrayManager_CONST={selector:".gigya-composite-control-array-widget",containerSelector:".gigya-array-manager",formElSelector:"input,select,textarea",addButtonSelector:"button.gigya-array-add-btn",removeButtonSelector:"button.gigya-array-remove-btn",itemWrapperClass:"gigya-array-template",inputsWrapperClass:"inputs-wrapper",buttonsWrapperClass:"buttons-wrapper",templateItemAttr:"data-array-template-id",arrayRootAttr:"data-array-root",deleteDisabledClass:"disable-delete",indexMatch:/\[[0-9]+]/g},t.DeepFreeze(t.ArrayManager_CONST);var r=function(){function r(n,i){this.arrayManager=n,this._index=i,this._container=document.createElement("div"),this._inputsWrapper=document.createElement("div"),this._buttonsWrapper=document.createElement("div"),this._inputElements=[],this._conditionalContainers=[],this._boundedElements=[],this._childArrayManagersElements=[],this.onDispose=[],this.screenWidgets=[],this.formWidgets=[],this.inputs=[],this.boundedErrors=[],this.anchors=[],this._form=n._form,this._screen=n._screen,this._buttonsWrapper=document.createElement("div"),this._uniqueItemID="array-template-"+Date.now()+"-"+i,this._buttonsWrapper.id=this._uniqueItemID+"_"+t.ArrayManager_CONST.buttonsWrapperClass,e.utils.DOM.addClassToElement(this._buttonsWrapper,t.ArrayManager_CONST.buttonsWrapperClass),this._inputsWrapper.appendChild(n.createInputsWrapper());var r=n.attachRemoveButton(this);this._buttonsWrapper.appendChild(r),this._container.appendChild(this._inputsWrapper),this._container.appendChild(this._buttonsWrapper),e.utils.DOM.addClassToElement(this._container,t.ArrayManager_CONST.itemWrapperClass),this._container.setAttribute(t.ArrayManager_CONST.templateItemAttr,this._uniqueItemID),this._inputElements=Array.prototype.slice.call(this._inputsWrapper.querySelectorAll(t.ArrayManager_CONST.formElSelector)),this._conditionalContainers=Array.prototype.slice.call(this._inputsWrapper.querySelectorAll("["+t.ContainerWidget_CONSTS.conditionAttr+"]")),this._boundedElements=Array.prototype.slice.call(this._inputsWrapper.querySelectorAll("["+t.ErrorDisplayElement_CONSTS.boundedTo+"]")),this._childArrayManagersElements=Array.prototype.slice.call(this._inputsWrapper.querySelectorAll(t.ArrayManager_CONST.containerSelector)),this._initElements()}return r.prototype.attachAddButton=function(e){this._buttonsWrapper.insertBefore(e,this._buttonsWrapper.firstChild)},r.prototype.linkInstance=function(){this._linkToScreen(),this._linkToForm(),this._updateWidgets()},r.prototype.hasVisibleFields=function(){return t.Some(this._inputElements,function(e){return!t.isHidden(e)&&!t.isFieldInHiddenContainer(e)})},r.prototype._linkToScreen=function(){var e=this._container.querySelectorAll(t.Anchor_CONSTS.selector);this.anchors=this._screen.addDynamicAnchors(e),this.screenWidgets=this._screen.addDynamicWidgets(this._container),this.boundedErrors=this._screen.addSpecificErrorBinds(n(this._inputsWrapper))},r.prototype._unlinkScreen=function(){
this._screen.removeDynamicAnchors(this.anchors),this._screen.removeDynamicWidgets(this.screenWidgets)},r.prototype._linkToForm=function(){this.inputs=this._form.addDynamicInputs(this._inputElements),this.formWidgets=this._form.addDynamicWidgets(this._inputsWrapper),this._form.registerBoundedErrorElements()},r.prototype._unlinkForm=function(){this._form.removeDynamicWidgets(this.formWidgets),this._form.removeDynamicInputs(this.inputs),this._form.registerBoundedErrorElements()},r.prototype._initElements=function(){var e=this;this._inputElements.concat(this._childArrayManagersElements).forEach(function(n){var r=n.getAttribute(t.TemplateElement_CONSTS.elementId)||n.getAttribute("id"),a=Array.prototype.slice.call(e._inputsWrapper.querySelectorAll("label[for="+r+"]")),s=e._uniqueItemID+"-"+(r||Date.now()),o=e._getCurrentMapping(n.getAttribute("name"));n.getAttribute("id")&&n.setAttribute("id",s),n.setAttribute(t.TemplateElement_CONSTS.elementId,s),a.forEach(function(e){return e.setAttribute("for",s)}),n.setAttribute(t.ArrayManager_CONST.arrayRootAttr,e.arrayManager.getRootName()),o&&n.setAttribute("name",i(o,e.arrayManager.getRootName(),e._index))}),this._updateConditions(),this._updateBoundedElements()},r.prototype._updateBoundedElements=function(){var e=this;this._boundedElements.forEach(function(n){var r=e._getCurrentMapping(n.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo));r&&n.setAttribute(t.ErrorDisplayElement_CONSTS.boundedTo,i(r,e.arrayManager.getRootName(),e._index))})},r.prototype._getCurrentMapping=function(e){return e&&e.replace(e.substr(0,e.lastIndexOf(".")),this.arrayManager.getRootName())||""},r.prototype.updateFields=function(){var e=this;this.inputs.forEach(function(n){var r=n.instanceElement;r.setAttribute(t.ArrayManager_CONST.arrayRootAttr,e.arrayManager.getRootName());var a=e._getCurrentMapping(r.getAttribute("name"));a&&(r.setAttribute("name",i(a,e.arrayManager.getRootName(),e._index)),n.updateFieldName(r,r.getAttribute("name")))}),this._screen.removeSpecificErrorBinds(this.boundedErrors),this._updateBoundedElements(),this.boundedErrors=this._screen.addSpecificErrorBinds(n(this._inputsWrapper)),this._form.registerBoundedErrorElements(),this._updateConditions(),this._updateWidgets()},r.prototype._updateWidgets=function(){var e=this;this.formWidgets.forEach(function(n){if(n instanceof a){var r=e._getCurrentMapping(n.getRootName());r&&n.update(i(r,e.arrayManager.getRootName(),e._index))}else n instanceof t.RequiredDisplayWidget?t.ForEach(e.inputs,function(e){e.getName(!0)===n.instanceElement.getAttribute(t.ErrorDisplayElement_CONSTS.boundedTo)&&n.updateBoundedField(e)}):n instanceof t.ContainerWidget&&n.updateConditions()})},r.prototype._updateConditions=function(){var e=this;this._inputElements.forEach(function(n){t.ForEach(e._conditionalContainers,function(e){var i=e.getAttribute(t.ContainerWidget_CONSTS.conditionAttr),r=n.getAttribute("name"),a=r.replace(t.ArrayManager_CONST.indexMatch,"");if(i&&i.replace(t.ArrayManager_CONST.indexMatch,"").indexOf(a)>=0){var s=e.getAttribute("data-original-condition");s||(e.setAttribute("data-original-condition",i),s=i);var o=s.replace(a,r);e.setAttribute(t.ContainerWidget_CONSTS.conditionAttr,"try {"+o+"} catch(e) {}")}})})},r.prototype.getID=function(){return this._uniqueItemID},r.prototype.getIndex=function(){return this._index},r.prototype.setIndex=function(e){this._index=e,this.updateFields()},r.prototype.getContainer=function(){return this._container},r.prototype.dispose=function(){this.onDispose.forEach(function(e){return e()}),this._unlinkScreen(),this._unlinkForm(),this._container.parentNode&&this._container.parentNode.removeChild(this._container)},r}();t.ArrayManagerItem=r;var a=function(n){function i(e,t){var i=n.call(this,e,t,!1)||this;i.onDispose=new Array,i._items=[];var r=i.templateElement.querySelectorAll("template");return i._inputsTemplate=r[0],i._buttonsTemplate=r[1],!i._inputsTemplate&&console&&console.warn&&console.warn("gigya: Array Manager is provided with invalid template"),i._minimumItems=Number(i.params.minimum)||1,i}return __extends(i,n),i.prototype.createInputsWrapper=function(){return document.importNode(this._inputsTemplate.content,!0)},i.prototype.attachRemoveButton=function(e){var t=this,n=function(){return t.removeItem(e.getID())},i=this._getButton("remove",n);return e.onDispose.push(function(){return i.removeEventListener("click",n)}),i},i.prototype.linkInstanceElement=function(i){var r=this;n.prototype.linkInstanceElement.call(this,i),this._arrayContainer=this.instanceElement.querySelector(t.ArrayManager_CONST.containerSelector);var a=function(){return r.addItem()};this._addButton=this._getButton("add",a),this.onDispose.push(function(){return r._addButton.removeEventListener("click",a)}),this._arrayRootName=this._arrayContainer.getAttribute("name");var s=this._form.prePopulateData(),o=e.utils.object.getPropertyBySerializedName(s,this._arrayRootName,!1),l=this._minimumItems;o&&o instanceof Array&&(l=Math.max(this._minimumItems,o.length));for(var c=0;c<l;c++)this.addItem()},i.prototype.unlinkInstanceElement=function(){var e=this;this._items.forEach(function(t){e._screen.removeSpecificErrorBinds(t.boundedErrors),e._form.registerBoundedErrorElements(),t.dispose()}),this._items=[],this.onDispose.forEach(function(e){return e()}),n.prototype.unlinkInstanceElement.call(this)},i.prototype.addItem=function(){var e=new r(this,this._items.length);this._arrayContainer.appendChild(e.getContainer()),e.attachAddButton(this._addButton),e.linkInstance(),this._items.push(e),this._applyCurrentState()},i.prototype.removeItem=function(e){var n=-1,i=null;t.Some(this._items,function(t,r){return t.getID()===e&&(n=r,i=t,!0)}),i&&(this._screen.removeSpecificErrorBinds(i.boundedErrors),this._form.registerBoundedErrorElements(),this._items.splice(n,1),this._reindexItems(n),i.dispose(),this._items.length>0&&this._items[this._items.length-1].attachAddButton(this._addButton),this._applyCurrentState())},i.prototype._reindexItems=function(e){for(var t=e;t<this._items.length;++t)this._items[t].setIndex(t)},i.prototype._applyCurrentState=function(){this._items.length<=this._minimumItems?e.utils.DOM.addClassToElement(this._arrayContainer,t.ArrayManager_CONST.deleteDisabledClass):e.utils.DOM.removeClassFromElement(this._arrayContainer,t.ArrayManager_CONST.deleteDisabledClass),this._screenSet.centerModal()},i.prototype.getRootName=function(){return this._arrayRootName},i.prototype.update=function(e){this._arrayContainer.setAttribute("name",e),this._arrayRootName=e,this._items.forEach(function(e){e.updateFields()})},i.prototype._getButton=function(e,n){var i=document.importNode(this._buttonsTemplate.content.querySelectorAll(t.ArrayManager_CONST[e+"ButtonSelector"])[0],!0);return n&&i.addEventListener("click",n),i},i}(t.BaseFormWidget);a.CONSTS=t.ArrayManager_CONST,t.ArrayManagerWidget=a,t.BaseFormWidget.addWidgetToLibrary(a),t.getErrorBindings=n,t.addIndex=i}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.SkipLinkAccountWidget_CONSTS={selector:"a.gigya-skip-link-account"},e.DeepFreeze(e.SkipLinkAccountWidget_CONSTS);var t=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.onClick=function(){return i._screenSet.data.extraEventData.allowAccountsLinking=!0},i.addEventListener("click",i.onClick),i}return __extends(t,e),t.prototype.unlinkTemplate=function(){this.removeEventListener("click",this.onClick),e.prototype.unlinkTemplate.call(this)},t}(e.BaseScreenWidget);t.CONSTS=e.SkipLinkAccountWidget_CONSTS,e.SkipLinkAccountWidget=t,e.BaseScreenWidget.addWidgetToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n,i=0,r="gig_grecaptchaOnload",a=function(){function e(e){this.captcha=e,this.isCaptcha=!0,this.fieldNamespace="",this.instanceElement=e.instanceElement,this.normalizedFieldName=this.displayName=this.fieldBaseName=this.fieldName="captchaText"}return e.prototype.getName=function(e){return e?this.normalizedFieldName:this.fieldName},e.prototype.addEventListener=function(e,t){this.captcha.addEventListener(e,t)},e.prototype.removeEventListener=function(e,t){this.captcha.removeEventListener(e,t)},e.prototype.isInHiddenContainer=function(){return t.isFieldInHiddenContainer(this.captcha.instanceElement)||this.isHidden()},e.prototype.isHidden=function(){return this.captcha.isHidden()},e.prototype.required=function(){return this.captcha._captchResponseElement&&!this.isHidden()&&!this.isInHiddenContainer()},e.prototype.disabled=function(){return!1},e.prototype.allowEmpty=function(){return!this.captcha._captchResponseElement||this.isHidden()||this.isInHiddenContainer()},e.prototype.getValue=function(){return"undefined"!=typeof Recaptcha?Recaptcha.get_response():void 0},e.prototype.validate=function(e,t){return this.required()&&!this.getValue()?e({errorCode:400027,field:this}):void e({errorCode:0,field:this})},e.prototype.getValidityState=function(){return t.notImplementerAbstract(),null},e.prototype.setValidityState=function(e){},e.prototype.addValidityStateListener=function(e){t.notImplementerAbstract()},e.prototype.removeValidityStateListener=function(e){t.notImplementerAbstract()},e}();t.CaptchaWidget_CONSTS={selector:"div.gigya-captcha"},t.DeepFreeze(t.CaptchaWidget_CONSTS);var s=function(s){function o(t,n){var i=s.call(this,t,n)||this;if(i.form=t,t.filters.push({filterOutWidgetsToSend:function(e){return i.isHidden()||(e.captchaToken="undefined"!=typeof Recaptcha?Recaptcha.get_challenge():void 0),e}}),i.isV1){if(e.bypassCaptchaV1)return i.renderWidgetUI=!1,i;i.captchaResponse=new a(i),t.addDataField(i.captchaResponse)}t._screen._captchas.push(i),i.params=e.utils.object.merge([{theme:"white"},i.params]);var r=i._getWidgetSize("params");return i.isV1&&"custom"!==i.params.theme&&(i.templateElement.style.width=r.width+"px",i.templateElement.style.height=r.height+"px"),n.setAttribute("name","captchaText"),i.onChange=function(){i.captchaResponse&&t.onInputChange(i.captchaResponse,!1)},i}return __extends(o,s),o.prototype.linkInstanceElement=function(n){var r=this;return s.prototype.linkInstanceElement.call(this,n),this.siteKey?this.loadGrecaptcha(this.convertLocaleCode(this._screenSet.params.lang)).then(function(n){var a=(r._screenSet.params.containerID||"")+"_grecaptcha_"+ ++i;r.instanceElement.innerHTML=e.utils.templates.fill(r._screenSet.getTemplates().captcha,{recaptchaContainerID:a});var s=function(){};r.isInvisible?r.waitForChallenge=new e.Promise(function(e){s=function(t){r.captchaToken=t,e(t)}}):s=function(e){r.captchaToken=e},r.isV2&&t.inIFrame()?console&&console.warn&&console.warn("reCAPTCHA v2 cannot be loaded inside iFrame"):r.challengeId=n.render(a,{sitekey:r.siteKey,type:r.params.type,theme:r.params.theme,badge:r.badge,size:r.size,callback:s})}):new e.Promise(function(t,n){return console&&console.error&&console.error("gigya: This site is using a deprecated type of captcha. Site admin must upgrade to reCAPTCHA v2"),e.bypassCaptchaV1?t():void e.utils.script.load("//www.google.com/recaptcha/api/js/recaptcha_ajax.js",n,function(){if("undefined"!=typeof Recaptcha){var n=r._screenSet.getTemplates().captcha,a=r.params.custom_theme_widget;a||(a=(r._screenSet.params.containerID||"")+"_recaptcha_"+ ++i,r.instanceElement.innerHTML=e.utils.templates.fill(n,{recaptchaContainerID:a})),delete Recaptcha.theme,Recaptcha.create("6LdXT9MSAAAAALFVL3NUYbCEiJfiSTgflJUdrflP",a,r.params),r.captchaResponse.instanceElement=r._captchResponseElement=document.getElementById(a),t()}},!1)})},o.prototype.unlinkInstanceElement=function(){this._captchResponseElement&&e.utils.DOM.removeEventListener(this._captchResponseElement,"change",this.onChange),this.captchaResponse&&(this.captchaResponse.instanceElement=null),this._captchResponseElement=null,this.reset(),s.prototype.unlinkInstanceElement.call(this)},o.prototype.reset=function(){this.isV1&&"undefined"!=typeof Recaptcha?Recaptcha.destroy():"undefined"!=typeof grecaptcha&&"undefined"!=typeof this.challengeId&&grecaptcha.reset(this.challengeId)},Object.defineProperty(o.prototype,"type",{get:function(){return e.partnerSettings.invisibleRecaptcha&&e.partnerSettings.invisibleRecaptcha.siteKey&&this._form instanceof t.RegisterForm?2:!e.partnerSettings.recaptchaV2||!e.partnerSettings.recaptchaV2.siteKey||this._form instanceof t.RegisterForm?0:1},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"size",{get:function(){return this.isInvisible?"invisible":this.params.size},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"badge",{get:function(){return this.isInvisible?this.params.badge:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isInvisible",{get:function(){return 2===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isV2",{get:function(){return 1===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"isV1",{get:function(){return 0===this.type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"siteKey",{get:function(){return this.isInvisible?e.partnerSettings.invisibleRecaptcha.siteKey:this.isV2?e.partnerSettings.recaptchaV2.siteKey:void 0},enumerable:!0,configurable:!0}),o.prototype.isHidden=function(){return t.isHidden(this._captchResponseElement)},o.prototype.reload=function(){"undefined"!=typeof Recaptcha&&Recaptcha.reload()},o.prototype.evaluateConditionalAttributes=function(){s.prototype.evaluateConditionalAttributes.call(this),this.renderWidgetUI&&this.renderWidget()},o.prototype._getWidgetSize=function(e){var t,n;if(this.isV1)switch(this[e].theme){case"clean":t=600,n=108;break;case"blackglass":case"red":case"white":default:t=318,n=129}else if(this.isV2)switch(this[e].size){case"compact":t=164,n=144;break;case"normal":default:t=304,n=80}return{width:t,height:n}},o.prototype.renderWidget=function(){var t=this;this.unlinkInstanceElement();var n=this._parent;this.isV1&&(this.captchaResponse=new a(this)),n.dataToServer.forEach(function(e,i){e instanceof a&&(n.dataToServer[i]=t.captchaResponse)});var r=this._getWidgetSize("widgetParams");if(this.isV1&&"custom"!==this.widgetParams.theme&&(this.templateElement.style.width=r.width+"px",this.templateElement.style.height=r.height+"px"),s.prototype.linkInstanceElement.call(this,n.instanceElement),this.isV1&&"undefined"!=typeof Recaptcha){var o=this._screenSet.getTemplates().captcha,l=this.widgetParams.custom_theme_widget;l||(l=this._screenSet.params.containerID+"_recaptcha_"+ ++i,this.instanceElement.innerHTML=e.utils.templates.fill(o,{recaptchaContainerID:l})),delete Recaptcha.theme,Recaptcha.create("6LdXT9MSAAAAALFVL3NUYbCEiJfiSTgflJUdrflP",l,this.widgetParams),this.captchaResponse&&(this.captchaResponse.instanceElement=this._captchResponseElement=document.getElementById(l))}this.renderWidgetUI=!1},o.prototype.convertLocaleCode=function(e){switch(e){case"br":return"bg";case"he":return"iw";case"es-mx":return"es-419";case"tl":return"fil";default:return e}},o.prototype.loadGrecaptcha=function(t){return n||(n=new e.Promise(function(n,i){window[r]=function(){delete window[r],grecaptcha?n(window.grecaptcha):i()},e.utils.script.load("//www.google.com/recaptcha/api.js?render=explicit&onload="+r+"&hl="+t,i,function(){},!1)})),n},o}(t.BaseFormWidget);s.CONSTS=t.CaptchaWidget_CONSTS,t.CaptchaWidget=s,t.BaseFormWidget.addWidgetToLibrary(s)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.LoginAvailabilityWidget_CONSTS={selector:"div.gigya-loginID-availability",boundTo:"data-bound-to"},t.DeepFreeze(t.LoginAvailabilityWidget_CONSTS);var n=function(n){function i(e,t){var i=n.call(this,e,t)||this;return i.init(e,t),i}return __extends(i,n),i.prototype.init=function(e,t){var n=this;this.loginIdStateListener=function(e){return n.onLoginIdStateChange(e,!0)},this.originalDisplay=t.style.display,this.reset(t)},i.prototype.reset=function(e){this.boundedField=this._form.getField(e.getAttribute(i.CONSTS.boundTo))||this._form.getField("loginID")||this._form.getField("username")||this._form.getField("email"),this.boundedField?(this.boundedField._serverValidateAvaliability=!0,this.boundedField.addValidityStateListener(this.loginIdStateListener)):this.warn(t.LoginAvailabilityWidget_CONSTS.selector+" is missing a field to bound to")},i.prototype.linkInstanceElement=function(e){n.prototype.linkInstanceElement.call(this,e),this.boundedField&&this.onLoginIdStateChange(this.boundedField.getValidityState(),!1)},i.prototype.unlinkTemplate=function(){this.boundedField&&this.boundedField.removeValidityStateListener(this.loginIdStateListener),n.prototype.unlinkTemplate.call(this)},i.prototype.onLoginIdStateChange=function(n,i){if(i||(n=t.ValidityStates._undefined),this.instanceElement)switch(e.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-progress"),e.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-not-available"),e.utils.DOM.removeClassFromElement(this.instanceElement,"gigya-loginID-availability-available"),n){case t.ValidityStates.valid:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("available"),e.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-available");break;case t.ValidityStates.error:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("not_available"),e.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-not-available");break;case t.ValidityStates.pending:this.instanceElement.style.display=this.originalDisplay,this.instanceElement.innerHTML=this._screenSet.getText("checking"),e.utils.DOM.addClassToElement(this.instanceElement,"gigya-loginID-availability-progress");break;default:this.instanceElement.innerHTML="",this.instanceElement.style.display="none"}},i.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this)},i}(t.BaseFormWidget);n.CONSTS=t.LoginAvailabilityWidget_CONSTS,t.LoginAvailabilityWidget=n,t.BaseFormWidget.addWidgetToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=0;t.PhotoUploadWidget_CONSTS={selector:"div.gigya-photo-upload"},t.DeepFreeze(t.PhotoUploadWidget_CONSTS);var i=function(i){function r(t,n){var r=i.call(this,t,n)||this;r.photoElementID=r._uploadIframeID+"_photo",r.pathContainerID=r._uploadIframeID+"_path",r.defaultBGImage=e._.getCdnResource()+"/gs/i/accounts/avatar_64.png";var a=r._screenSet.getTemplates().photoUpload_ui;return r.uiHtml=e.utils.templates.fill(a,{pathContainerID:r.pathContainerID,photoElementID:r.photoElementID,choose_file:r._screenSet.getText("choose_file"),no_file_chosen:r._screenSet.getText("no_file_chosen"),tip:r._screenSet.getText("maximum_size_of_3mb.")+" JPG, GIF, PNG."}),n.innerHTML="",(e.localInfo.isIE9||e.localInfo.isIE8)&&r._form.filters.push({filterOutWidgetsToSend:function(e){return e.profile&&delete e.profile._profilePhoto,e}}),r}return __extends(r,i),r.prototype.linkInstanceElement=function(e){i.prototype.linkInstanceElement.call(this,e),this.uiDiv=document.createElement("div"),this.uiDiv.innerHTML=this.uiHtml,this.instanceElement.appendChild(this.uiDiv),this.restoreDefaultBg()},r.prototype.unlinkInstanceElement=function(){this.instanceElement.removeChild(this.uiDiv),this.uiDiv=null,i.prototype.unlinkInstanceElement.call(this)},r.prototype.restoreDefaultBg=function(){var e=document.getElementById(this.photoElementID);e&&(e.style.backgroundImage="url('"+this.defaultBGImage+"')")},r.prototype.getFormHtml=function(){return e.utils.templates.fill(this._screenSet.getTemplates().photoUpload_form,{formTarget:this._uploadIframeID})},r.prototype.getFormElement=function(){return this._formDiv.getElementsByTagName("form")[0]},r.prototype.getFileElement=function(){return this._uploadForm.elements._profilePhoto},r.prototype.submitUploadForm=function(){this.lastResponseId=this._uploadIframeID+"_"+this._lastQueryId;var t=e.utils.stringUtils.format("https://"+e._.getApiDomain("accounts")+"/accounts.uploadProfilePhoto?publish=true&context={0}&saveResponseID={0}&{1}",this.lastResponseId,e.utils.keyValue.serialize(this.getServerParameters()));this._uploadForm.action=t;var n=document.getElementById(this.pathContainerID);n.style.backgroundImage="url('"+e._.getCdnResource()+"/gs/i/accounts/smallLoader.gif')",i.prototype.submitUploadForm.call(this)},r.prototype.serverQueryDone=function(t){var n=this;this.stopUploadCheck();var i=e.utils.object.removeUndefined(this.getServerParameters());i.saveResponseID=this.lastResponseId,i.noAuth=!0,delete i.login_token,delete i.regToken,e._.apiAdapter.sendRequest("socialize.getSavedResponse",i,function(e){return n.onUploadSavedResponse(e)},{jsSdkRequestId:this.lastResponseId})},r.prototype.onUploadSavedResponse=function(e){var t=document.getElementById(this.pathContainerID);switch(t.style.backgroundImage="",e.errorCode){case 0:this.onUploadSuccess();break;case 400006:this.onServerError({errorCode:413004,errorMessage:this._screenSet.getText("profilePhoto_fileSizeError")});break;default:this.onServerError(e)}},r.prototype.onUploadSuccess=function(){var r=this,a=document.getElementById(this.pathContainerID);a&&(a.style.backgroundImage="");var s=this.getServerParameters();s.type="thumbnail",s.context=this._uploadIframeID+ ++n;var o=new Image,l=e._.getApiDomain("accounts"),c=(s.login_token||s.regToken?"https":e.localInfo.protocol)+"://"+l+"/accounts.getProfilePhoto?"+e.utils.keyValue.serialize(s);o.onload=function(){var e=document.getElementById(r.photoElementID),t=o.src;e&&(e.style.backgroundImage="url('"+t+"')"),r._form._screen.setProfilePhoto(t),o=o.onload=o.onerror=null},o.onerror=function(){r.onServerError({errorCode:404004,errorMessage:"Profile photo inaccesible."}),r._form._screen.setProfilePhoto(""),o=o.onload=o.onerror=null},o.src=c,i.prototype.serverQueryDone.call(this,t.ServerStates.Done)},r.prototype.onServerError=function(e){this.restoreDefaultBg(),this._form._screen._screenSet.onScreenResponse(e,this._form),i.prototype.serverQueryDone.call(this,t.ServerStates.Error)},r}(t.BaseUploadWidget);i.CONSTS=t.PhotoUploadWidget_CONSTS,t.PhotoUploadWidget=i,t.BaseFormWidget.addWidgetToLibrary(i)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.RequiredDisplayWidget_CONSTS={selector:".gigya-required-display",boundTo:"data-bound-to"},t.DeepFreeze(t.RequiredDisplayWidget_CONSTS);var n=function(n){function i(e,t){var i=n.call(this,e,t)||this;return"none"===t.style.display&&(t.style.display=""),t.setAttribute("aria-hidden","true"),i}return __extends(i,n),i.prototype.linkInstanceElement=function(e){n.prototype.linkInstanceElement.call(this,e),this.updateVisibility()},i.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this),this.updateVisibility()},i.prototype.updateBoundedField=function(e){this.boundTo=this.instanceElement.getAttribute(t.RequiredDisplayWidget_CONSTS.boundTo),this.boundToField=e},i.prototype.updateVisibility=function(){var e=this.instanceElement;if(e){if(this.boundTo=e.getAttribute(t.RequiredDisplayWidget_CONSTS.boundTo),!this.boundTo)return this.warn(t.RequiredDisplayWidget_CONSTS.selector+" is missing "+t.RequiredDisplayWidget_CONSTS.boundTo+" attribute"),void this.hide();if(this.boundToField=this._form.getField(this.boundTo,this.instanceElement.getAttribute(t.FormInput_CONSTS.arrayKeyValueAttribute)),!this.boundToField)return this.warn(t.RequiredDisplayWidget_CONSTS.selector+"'s form is missing field "+this.boundTo+" to bound to"),void this.hide()}this.boundToField&&this.boundToField.required()?this.show():this.hide()},i.prototype.show=function(){e.utils.DOM.removeClassFromElement(this.instanceElement,e._.plugins.ScreenSet.ScreenSet_CONSTS.gigyaHidden)},i.prototype.hide=function(){e.utils.DOM.addClassToElement(this.instanceElement,e._.plugins.ScreenSet.ScreenSet_CONSTS.gigyaHidden)},i}(t.BaseFormWidget);n.CONSTS=t.RequiredDisplayWidget_CONSTS,t.RequiredDisplayWidget=n,t.BaseFormWidget.addWidgetToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=0;t.SocialLoginWidget_CONSTS={selector:"div.gigya-social-login"},t.DeepFreeze(t.SocialLoginWidget_CONSTS);var i=function(i){function r(e,r){var a=i.call(this,e,r)||this;return a.bindID=a.publishID?a.ID:t.SocialLoginWidget_CONSTS.selector,a.loginMode=t.LoginModes[a.params.loginMode||"standard"],a.containerId=a._screenSet.containerID+"_social_"+n++,a.onErrorResponse=function(e){if(400100!==e.errorCode&&400006!==e.errorCode)return a._screenSet.onScreenResponse(e,a)},a.onLoginResponse=function(e){return a._screenSet.onScreenResponse({errorCode:0,event:e},a)},a}return __extends(r,i),r.prototype.linkInstanceElement=function(t){if(i.prototype.linkInstanceElement.call(this,t),this.instanceElement){for(;this.instanceElement.firstChild;)this.instanceElement.removeChild(this.instanceElement.firstChild);this._container=document.createElement("div"),this._container.className="gigya-social-login-container",this._container.id=this.containerId,this.instanceElement.appendChild(this._container),this.calculateEnabledProviders(),this.apiParams=this.loginMode.filterParams(e.utils.object.clone(this._screenSet.params)),this.params.containerID||(this.widgetParams=this.params,this.renderWidget())}},r.prototype.initFromInstanceElement=function(){this.successScreen=this._screenSet.chooseNextScreen(this.instanceElement.getAttribute(t.Form_CONSTS.successScreen))},r.prototype.calculateEnabledProviders=function(){var e=this.loginMode.getLoginProviders(this._screenSet.data.apiData,this.params,this._screenSet.data.regToken);null!==e&&"undefined"!=typeof e&&(this.params.enabledProviders=e)},r.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),i.prototype.unlinkInstanceElement.call(this)},r.prototype.renderWidget=function(){var n=this;this.setContainerSize(this.widgetParams.width,this.widgetParams.height),e.socialize.showLoginUI(this.apiParams,this.widgetParams,{containerID:this.containerId,accountsSocialLogin:!0,onLogin:this.onLoginResponse,onError:this.onErrorResponse,finalizeRegistration:!0,dontHandleScreenSet:!0,include:"profile,data,emails,subscriptions,preferences",regSource:this._screenSet.params.regSource||t.firstPart(t.firstPart(location.href,"?"),"#"),getInstance:function(e){n._instance=e}}),this.renderWidgetUI=!1},r.prototype.setContainerSize=function(e,n){if(e){var i=t.getUnitMeasurementType(e);i!=t.UnitMeasurementType.auto&&(this._container.style.width=parseFloat(e)+i)}if(n){var r=t.getUnitMeasurementType(n);r!=t.UnitMeasurementType.auto&&(this._container.style.height=parseFloat(n)+r)}},r}(t.BaseScreenWidget);i.CONSTS=t.SocialLoginWidget_CONSTS,t.SocialLoginWidget=i,t.BaseScreenWidget.addWidgetToLibrary(i)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=0;t.TfaWidget_CONSTS={selector:"div.gigya-tfa"},t.DeepFreeze(t.TfaWidget_CONSTS);var i=function(i){function r(e,r){var a=i.call(this,e,r)||this;return a.bindID=a.publishID?a.ID:t.TfaWidget_CONSTS.selector,e._hasTfa=!0,a.tfaContainerId=(a._screenSet.params.containerID||"showScreenSet")+"_showTfaUI_"+n++,a}return __extends(r,i),r.prototype.linkInstanceElement=function(t){var n=this;i.prototype.linkInstanceElement.call(this,t),this.instanceElement&&(this.instanceElement.innerHTML='<div id="'+this.tfaContainerId+'"></div>',this._screen.dimScreen(),this.widgetParams||(this.widgetParams=this.params),e.accounts.showTfaUI(this.params,this.widgetParams,{dontHandleScreenSet:!1,regToken:this._screenSet.data.regToken,lang:this._screenSet.params.lang,containerID:this.tfaContainerId,cssPrefix:"div.gigya-tfa",width:"auto",source:this._screenSet.injectionInfo.methodName,onDone:function(e){n._screen.dimScreen(),n._screenSet.onScreenResponse(e.response,n)},onLoad:function(){n._screen.undimScreen()},onAfterScreenLoad:function(e){n._screenSet.centerModal()},ignoreApiQueue:this._screenSet.params.ignoreApiQueue}))},r.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),i.prototype.unlinkInstanceElement.call(this)},r.prototype.renderWidget=function(){var t=this;e.accounts.showTfaUI(this.widgetParams,{dontHandleScreenSet:!1,regToken:this._screenSet.data.regToken,containerID:this.tfaContainerId,cssPrefix:"div.gigya-tfa",width:"auto",deviceType:this._screenSet.params.deviceType,source:this._screenSet.injectionInfo.methodName,onDone:function(e){t._screen.dimScreen(),t._screenSet.onScreenResponse(e.response,t)},onLoad:function(){t._screen.undimScreen()},onAfterScreenLoad:function(e){t._screenSet.centerModal()},getInstance:function(e){t._instance=e},ignoreApiQueue:this._screenSet.params.ignoreApiQueue}),this.renderWidgetUI=!1},r}(t.BaseScreenWidget);i.CONSTS=t.TfaWidget_CONSTS,t.TfaWidget=i,t.BaseScreenWidget.addWidgetToLibrary(i)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){var n=0;t.MyPhotoWidget_CONSTS={selector:"div.gigya-myPhoto"},t.DeepFreeze(t.MyPhotoWidget_CONSTS);var i=function(t){function i(e,i){var r=t.call(this,e,i)||this;return r.containerId=r._screenSet.containerID+"_myPhoto_"+n++,r}return __extends(i,t),i.prototype.linkInstanceElement=function(e){t.prototype.linkInstanceElement.call(this,e),this.instanceElement&&(this.instanceElement&&(this.instanceElement.innerHTML='<div id="'+this.containerId+'"></div>'),this.params.containerID||(this.widgetParams=this.params,this.renderWidget()))},i.prototype.unlinkInstanceElement=function(){this.instanceElement&&(this.instanceElement.innerHTML=""),this._instance&&this._instance.dispose(),t.prototype.unlinkInstanceElement.call(this)},i.prototype.renderWidget=function(){var t=this;e.accounts.showMyPhotoUI(this.widgetParams,{containerID:this.containerId,regToken:this._screenSet.params.regToken,getInstance:function(e){t._instance=e},onLoad:function(){t._screenSet.centerModal()}}),this.renderWidgetUI=!1},i}(t.BaseScreenWidget);i.CONSTS=t.MyPhotoWidget_CONSTS,t.MyPhotoWidget=i,t.BaseScreenWidget.addWidgetToLibrary(i)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.Image_CONSTS={selector:"div.gigya-image",srcAttribute:"data-src",widthAttribute:"data-width",heightAttribute:"data-height",backgroundSizeAttribute:"data-background-size"},t.DeepFreeze(t.Image_CONSTS);var n=function(n){function i(e,t){return n.call(this,e,t,!1)||this}return __extends(i,n),i.prototype.linkInstanceElement=function(e){n.prototype.linkInstanceElement.call(this,e),this.setBackgroundImage()},i.prototype.evaluateConditionalAttributes=function(){n.prototype.evaluateConditionalAttributes.call(this),this.setBackgroundImage()},i.prototype.setBackgroundImage=function(){var n=this.instanceElement,r=n.getAttribute(i.CONSTS.srcAttribute),a=n.getAttribute(i.CONSTS.widthAttribute),s=n.getAttribute(i.CONSTS.heightAttribute),o=n.getAttribute(i.CONSTS.backgroundSizeAttribute);return r?(e.utils.DOM.removeClassFromElement(this.instanceElement,t.ScreenSet_CONSTS.gigyaHidden),
a&&(n.style.width=this.getSize(a)),s&&(n.style.height=this.getSize(s)),o||n.setAttribute(i.CONSTS.backgroundSizeAttribute,"fit"),void(this.prevSrc!==r&&(this.prevSrc=r,"https"===e.localInfo.protocol&&0===r.indexOf("http://")&&(r=e.global.getPhotoURL(r)),n.style.backgroundImage='url("'+r+'")'))):void e.utils.DOM.addClassToElement(this.instanceElement,t.ScreenSet_CONSTS.gigyaHidden)},i.prototype.getSize=function(e){var t=Number(e);return isNaN(t)?e:e+"px"},i}(t.BaseFormWidget);n.CONSTS=t.Image_CONSTS,t.ImageWidget=n,t.BaseFormWidget.addWidgetToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.Translated_CONSTS={selector:"*[data-translation-key]",translationKeyAttribute:"data-translation-key"},e.DeepFreeze(e.Translated_CONSTS);var t=function(t){function n(e,n){var i=t.call(this,e,n,!1)||this;return i._anchors=[],i}return __extends(n,t),n.prototype.linkInstanceElement=function(e){t.prototype.linkInstanceElement.call(this,e),this.updateTranslation()},n.prototype.unlinkInstanceElement=function(){t.prototype.unlinkInstanceElement.call(this),this.unlinkWidgets()},n.prototype.evaluateConditionalAttributes=function(){t.prototype.evaluateConditionalAttributes.call(this),this.renderedTranslationKey!==this.instanceElement.getAttribute(n.CONSTS.translationKeyAttribute).toLowerCase()&&this.updateTranslation()},n.prototype.unlinkWidgets=function(){e.ForEach(this._anchors,function(e){e.unlinkInstanceElement()}),this._anchors=[]},n.prototype.getTranslationKey=function(){return this.instanceElement.getAttribute(n.CONSTS.translationKeyAttribute).toLowerCase()},n.prototype.updateTranslation=function(){var t=this;if(this.renderedTranslationKey=this.getTranslationKey(),this._screenSet.params.customLang&&this._screenSet.params.customLang[this.renderedTranslationKey]){this.unlinkWidgets(),this.instanceElement.innerHTML=this._screenSet.params.customLang[this.renderedTranslationKey];var n=this.instanceElement.querySelectorAll(e.Anchor_CONSTS.selector);if(!this._screen||!this._screen.instanceElement)return;e.ForEach(n,function(n){var i=new e.Anchor(t._screen,n);t._anchors.push(i),i.linkInstanceElement(t._screen.instanceElement)})}},n}(e.BaseScreenWidget);t.CONSTS=e.Translated_CONSTS,e.TranslatedWidget=t,e.BaseScreenWidget.addWidgetToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.SubscriptionWidget_CONSTS={selector:"div.gigya-subscription",subscriptionName:"name"},e.DeepFreeze(e.SubscriptionWidget_CONSTS);var t=function(t){function n(n,i){var r=t.call(this,n,i)||this;return r._shouldPopulate=n instanceof e.ProfileForm,r}return __extends(n,t),n.prototype.linkInstanceElement=function(e){if(t.prototype.linkInstanceElement.call(this,e),this.instanceElement){var i=this.instanceElement.getAttribute(n.CONSTS.subscriptionName).split(".");i.shift(),this.subscriptionObj={channel:i.pop(),name:i.join("."),label:""},this.subscriptionObj.label=this.getSubscriptionLabel(this.templateElement,this.subscriptionObj.name,this.subscriptionObj.channel);var r=this.templateElement.hasAttribute("data-checked");if(this._shouldPopulate){var a=this._screenSet.getApiData().getAccountInfo;if(a&&a.subscriptions&&a.subscriptions.hasOwnProperty(this.subscriptionObj.name)){var s=a.subscriptions[this.subscriptionObj.name],o=s[this.subscriptionObj.channel];o&&(o.hasOwnProperty("isSubscribed")&&(r=o.isSubscribed),o.hasOwnProperty("doubleOptIn")&&"pending"===o.doubleOptIn.status.toLowerCase()&&(this._statusElement=document.createElement("div"),this._statusElement.className="subscription-status-label",this._statusElement.style.paddingLeft="18px",this._statusElement.style.color="grey",this._statusElement.style.fontStyle="italic",this._statusElement.innerText=this._screenSet.getText("subscription_pending_confirmation")))}}this._inuptElement=document.createElement("input"),this._inuptElement.id="subs-checkbox-"+this.subscriptionObj.name,this._inuptElement.name="subscriptions."+this.subscriptionObj.name+"."+this.subscriptionObj.channel+".isSubscribed",this._inuptElement.className="gigya-input-checkbox subscription-checkbox",this._inuptElement.type="checkbox",this._inuptElement.checked=r,this._labelElement=document.createElement("label"),this._labelElement.className="subscription-name-label",this._labelElement.style.display="inline-block",this._labelElement.style.verticalAlign="middle",this._labelElement.style.paddingLeft="5px",this._labelElement.innerHTML=this.subscriptionObj.label,this._labelElement.setAttribute("for",this._inuptElement.id),this._container=document.createElement("div"),this._container.className="subs-widget-container",this._container.appendChild(this._inuptElement),this._container.appendChild(this._labelElement),this._statusElement&&this._container.appendChild(this._statusElement),this.instanceElement.appendChild(this._container)}},n.prototype.getSubscriptionLabel=function(e,t,n){return e.getAttribute("data-label")},n}(e.BaseFormWidget);t.CONSTS=e.SubscriptionWidget_CONSTS,e.SubscriptionWidget=t,e.BaseFormWidget.addWidgetToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){e.Binding_CONSTS={selector:"*[data-binding]",dataBindingAttribute:"data-binding"},e.DeepFreeze(e.Binding_CONSTS);var t=function(e){function t(t,n){return e.call(this,t,n,!1)||this}return __extends(t,e),t.prototype.linkInstanceElement=function(n){e.prototype.linkInstanceElement.call(this,n),this.supportInterpolation="true"==this.templateElement.getAttribute(t.CONSTS.dataBindingAttribute),this.originalString=this.instanceElement.innerHTML,this.lastValue=null,this.updateValue()},t.prototype.evaluateConditionalAttributes=function(){e.prototype.evaluateConditionalAttributes.call(this),this.updateValue()},t.prototype.getBindingKey=function(){return this.originalString},t.prototype.getValue=function(){return this.evaluate(this.getBindingKey())},t.prototype.updateValue=function(){var e=this.getValue();e&&this.lastValue!==e&&(this.lastValue=e.replace("undefined",""),this.instanceElement.innerHTML=this.lastValue)},t.prototype.evaluate=function(e){void 0===e&&(e="");var t=/{{(.*?)}}/g,n=/({{.*?}})/g,i=/'{{(.*?)}}'/g;return e.match(t)&&this.supportInterpolation?this.evaluateExpression({condition:e.split(n).map(function(e){return"'"+e+"'"}).join(" + ").replace(/(\r\n|\n|\r)/gm,"").replace(i,'_account.getField("$1")')}):e},t}(e.BaseFormWidget);t.CONSTS=e.Binding_CONSTS,e.BindingWidget=t,e.BaseFormWidget.addWidgetToLibrary(t)}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.Consent_CONSTS={selector:"div.gigya-consent"},t.DeepFreeze(t.Consent_CONSTS);var n=function(t){function n(e,n){return t.call(this,e,n,!1)||this}return __extends(n,t),n.prototype.linkInstanceElement=function(e){t.prototype.linkInstanceElement.call(this,e),this.loadWidget()},n.prototype.evaluateConditionalAttributes=function(){t.prototype.evaluateConditionalAttributes.call(this),this.loadWidget()},n.prototype.loadWidget=function(){var t=this._screenSet.getApiData().getAccountInfo,n=this.instanceElement.getAttribute("name"),i=e.utils.object.expressionHelper(t).getField(n);if(i){var r=this.instanceElement.getAttribute("data-label"),a=void 0;a=i.docDate?this.formatTime(i.docDate):i.docVersion;var s=this.formatTime(i.lastConsentModified);this.instanceElement.innerHTML=e.utils.templates.fill(this._screenSet.getTemplates().consent,{label:r,docId:a,approved:s})}},n.prototype.formatTime=function(e){var t=Date.parse(e);return isNaN(t)?"":new Date(t).toLocaleDateString()},n}(t.BaseFormWidget);n.CONSTS=t.Consent_CONSTS,t.ConsentWidget=n,t.BaseFormWidget.addWidgetToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.ResetPasswordForm_CONSTS={gigyaClass:"gigya-reset-password-form"},t.DeepFreeze(t.ResetPasswordForm_CONSTS);var n=function(t){function n(e,n,i){var r=t.call(this,e,n,i)||this;return r.filters.push({filterOutWidgetsToSend:function(e){return e.securityFields&&e.securityFields.passwordRetype&&delete e.securityFields.passwordRetype,e}}),r}return __extends(n,t),n.prototype.specialFields=function(){return e.utils.object.merge([t.prototype.specialFields.call(this),{loginID:!0,newPassword:!0,email:!0,secretAnswer:!0}])},n.prototype.schemaValidated=function(){return!!this.getField("newPassword")},n.prototype.profileObjectName=function(){return"securityFields"},n.prototype.submitApi=function(){return e.accounts.resetPassword},n.prototype.linkInstanceElement=function(e){t.prototype.linkInstanceElement.call(this,e),this._screenSet.data.finalizeRegistrationNeeded=!1},n.prototype.prePopulateData=function(){var e=t.prototype.prePopulateData.call(this),n=this._screenSet.getApiData(),i=n&&n.getAccountInfo&&n.getAccountInfo.loginIDs;i&&(e.loginID=i.username||i.emails&&i.emails[0]);var r=n&&n.getConflictingAccount&&n.getConflictingAccount.conflictingAccount;return r&&(e.loginID=r.loginID||r.emails&&r.emails[0]),e},n.prototype.defaultSubmitParams=function(){var n=t.prototype.defaultSubmitParams.call(this);if(!this.getField("newPassword"))return n;var i=this._screenSet.params&&this._screenSet.params.passwordResetToken?this._screenSet.params.passwordResetToken:e.utils.URL.getParamValueFromURL("pwrt",window.location.toString(),void 0);return i&&(n.passwordResetToken=i),n},n}(t.BaseForm);n.CONSTS=t.ResetPasswordForm_CONSTS,t.ResetPasswordForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.ResendVerificationCodeForm_CONSTS={gigyaClass:"gigya-resend-verification-code-form"},t.DeepFreeze(t.ResendVerificationCodeForm_CONSTS);var n=function(t){function n(e,n,i){return t.call(this,e,n,i)||this}return __extends(n,t),n.prototype.getNeededData=function(){return e.utils.object.merge([t.prototype.getNeededData.call(this),{getAccountInfo:{params:{include:"emails"}}}])},n.prototype.specialFields=function(){return e.utils.object.merge([t.prototype.specialFields.call(this),{email:!0}])},n.prototype.submitApi=function(){return e.accounts.resendVerificationCode},n}(t.BaseForm);n.CONSTS=t.ResendVerificationCodeForm_CONSTS,t.ResendVerificationCodeForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.RegisterForm_CONSTS={gigyaClass:"gigya-register-form"},t.DeepFreeze(t.RegisterForm_CONSTS);var n=function(t){function n(e,n,i){return t.call(this,e,n,i)||this}return __extends(n,t),n.prototype.requiredFields=function(){var n=t.prototype.requiredFields.call(this);return n=e.utils.object.merge([n,this.specialFields()]),n.username=n.email=!0,n},n.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile","getAccountInfo.loginIDs"]},n.prototype.getNeededData=function(){var n=this;return e.utils.object.merge([t.prototype.getNeededData.call(this),{initRegistration:{cache:!1,params:{},responseHandler:function(e){var t=n._screenSet.getApiData();return delete t.getAccountInfo,e}},getSchema:{params:{}}}])},n.prototype.schemaValidated=function(){return!0},n.prototype.specialFields=function(){return e.utils.object.merge([t.prototype.specialFields.call(this),{username:!0,email:!0,password:!0,passwordRetype:!0,secretQuestion:!0,secretAnswer:!0,captchaText:!0,captchaToken:!0,regSource:!0,siteUID:!0}])},n.prototype.performSubmit=function(e){return this._screenSet.doesScreenHaveForms(this.successScreen)?this._screenSet.data.finalizeRegistrationNeeded=!0:e.finalizeRegistration=!0,t.prototype.performSubmit.call(this,e)},n.prototype.submitApi=function(){return e.accounts.register},n.prototype.defaultSubmitParams=function(){return e.utils.object.merge([t.prototype.defaultSubmitParams.call(this),{include:"profile,data,emails,loginIDs,subscriptions,preferences"}])},n}(t.BaseForm);n.CONSTS=t.RegisterForm_CONSTS,t.RegisterForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.NewsletterSignup_CONSTS={gigyaClass:"gigya-subscribe-with-email-form"},t.DeepFreeze(t.NewsletterSignup_CONSTS);var n=function(t){function n(e,n,i){return t.call(this,e,n,i)||this}return __extends(n,t),n.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile"]},n.prototype.getNeededData=function(){return e.utils.object.merge([t.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"emails,profile,subscriptions,preferences"}}}])},n.prototype.performSubmit=function(n){var i=this,r=this._screenSet.params.regToken||this._screenSet.data.regToken;"OK"===this._screenSet.getApiData().getAccountInfo.status||r?(n=this.setSubscriptions(n,r),t.prototype.performSubmit.call(this,n)):e.accounts.initRegistration({isLite:!0,callback:function(e){e.regToken&&(n=i.setSubscriptions(n,e.regToken)),t.prototype.performSubmit.call(i,n)}})},n.prototype.setSubscriptions=function(e,t){return t&&(e.regToken=t,this._screenSet.params.regToken=t,this._screenSet.data.regToken=t),e},n.prototype.submitApi=function(){return e.accounts.setAccountInfo},n.prototype.onAfterSubmit=function(e){if(0==e.errorCode){var n=this.getFormData(!0,!1);n.email&&(n.profile||(n.profile={}),n.profile.email=n.email,delete n.email),this._screenSet.onAccountInfo(n)}t.prototype.onAfterSubmit.call(this,e)},n.prototype.requiredFields=function(){var e=t.prototype.requiredFields.call(this);return e.email=!0,e},n.prototype.schemaValidated=function(){return!0},n}(t.BaseForm);n.CONSTS=t.NewsletterSignup_CONSTS,t.NewsletterSignupForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.ReauthenticationForm_CONSTS={gigyaClass:"gigya-reauthentication-form"},t.DeepFreeze(t.ReauthenticationForm_CONSTS);var n=function(n){function i(e,t,i){return n.call(this,e,t,i)||this}return __extends(i,n),i.prototype.prePopulateData=function(){var e=n.prototype.prePopulateData.call(this),t=this._screenSet.getApiData(),i=t&&t.getAccountInfo&&t.getAccountInfo.loginIDs;return i&&(e.loginID=i.username||i.emails&&i.emails[0]),e},i.prototype.submitApi=function(){return e.accounts.login},i.prototype.getNeededData=function(){return e.utils.object.merge([n.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"identities-active,loginIDs"}}}])},i.prototype.getLoginProviders=function(){return t.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},i.prototype.defaultSubmitParams=function(){return e.utils.object.merge([n.prototype.defaultSubmitParams.call(this),{loginMode:t.LoginModes.reAuth.name,loginID:"no-one"}])},i.prototype.specialFields=function(){return e.utils.object.merge([n.prototype.specialFields.call(this),{password:!0,captchaText:!0,captchaToken:!0,loginID:!0}])},i}(t.BaseForm);n.CONSTS=t.ReauthenticationForm_CONSTS,t.ReauthenticationForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.ProfileForm_CONSTS={gigyaClass:"gigya-profile-form",specialFields:{username:!0,oldPassword:!0,password:!0,newPassword:!0,passwordRetype:!0,secretQuestion:!0,secretAnswer:!0,addLoginEmails:!0,removeLoginEmails:!0}},t.DeepFreeze(t.ProfileForm_CONSTS);var n=function(n){function i(e,t,i){return n.call(this,e,t,i)||this}return __extends(i,n),i.prototype.prePopulateDataFrom=function(){return["getAccountInfo","getAccountInfo.profile","getAccountInfo.subscriptions","getAccountInfo.loginIDs","getAccountInfo.preferences"]},i.prototype.getNeededData=function(){return e.utils.object.merge([n.prototype.getNeededData.call(this),{getSchema:{params:{}},getAccountInfo:{params:{include:"loginIDs,emails,profile,data,subscriptions,preferences"}},getProviders:{params:{sections:"activeProviders"}}}])},i.prototype.schemaValidated=function(){return!0},i.prototype.specialFields=function(){return e.utils.object.merge([n.prototype.specialFields.call(this),t.ProfileForm_CONSTS.specialFields])},i.prototype.getLoginProviders=function(){return t.LoginModes.reAuth.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},i.prototype.submitApi=function(){return e.accounts.setAccountInfo},i.prototype.defaultSubmitParams=function(){return e.utils.object.merge([n.prototype.defaultSubmitParams.call(this),{conflictHandling:t.ConflictHandling[this._screenSet.data.regToken?t.ConflictHandling.saveProfileAndFail:t.ConflictHandling.fail]}])},i.prototype.getExtraProfileFields=function(t){var i=n.prototype.getExtraProfileFields.call(this,t);return e.utils.array.indexOf(i,"samlData")===-1&&i.push("samlData"),i},i}(t.BaseForm);n.CONSTS=t.ProfileForm_CONSTS,t.ProfileForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.LoginForm_CONSTS={gigyaClass:"gigya-login-form"},t.DeepFreeze(t.LoginForm_CONSTS);var n=function(n){function i(e,t,i){return n.call(this,e,t,i)||this}return __extends(i,n),i.prototype.specialFields=function(){return e.utils.object.merge([n.prototype.specialFields.call(this),{loginID:!0,password:!0,captchaText:!0,captchaToken:!0}])},i.prototype.submitApi=function(){return e.accounts.login},i.prototype._getSubmitApiParams=function(e){return e=t.LoginModes.standard.filterParams(e),n.prototype._getSubmitApiParams.call(this,e)},i.prototype.defaultSubmitParams=function(){return e.utils.object.merge([n.prototype.defaultSubmitParams.call(this),{loginMode:t.LoginModes.standard.name,include:"profile,data,emails,subscriptions,preferences"}])},i}(t.BaseForm);n.CONSTS=t.LoginForm_CONSTS,t.LoginForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){t.LinkAccountsForm_CONSTS={gigyaClass:"gigya-link-accounts-form"},t.DeepFreeze(t.LinkAccountsForm_CONSTS);var n=function(n){function i(e,t,i){return n.call(this,e,t,i)||this}return __extends(i,n),i.prototype.prePopulateData=function(){var e=n.prototype.prePopulateData.call(this),t=this._screenSet.getApiData(),i=t&&t.getConflictingAccount&&t.getConflictingAccount.conflictingAccount;return i&&(e.loginID=i.loginID||i.emails&&i.emails[0]),e},i.prototype.specialFields=function(){return e.utils.object.merge([n.prototype.specialFields.call(this),{loginID:!0,password:!0}])},i.prototype.submitApi=function(){return e.accounts.login},i.prototype.getNeededData=function(){var t=n.prototype.getNeededData.call(this);return this._screenSet.data.regToken&&(t=e.utils.object.merge([t,{getConflictingAccount:{params:{regToken:this._screenSet.data.regToken}}}])),t},i.prototype.defaultSubmitParams=function(){var i=this._screenSet.getApiData(),r=i&&i.getConflictingAccount&&i.getConflictingAccount.conflictingAccount;return e.utils.object.merge([n.prototype.defaultSubmitParams.call(this),{loginMode:t.LoginModes.link.name,loginID:r&&(r.loginID||r.emails&&r.emails[0]),include:"profile,data,subscriptions,preferences"}])},i.prototype.getLoginProviders=function(){return t.LoginModes.link.getLoginProviders(this._screenSet.data.apiData,this._screenSet.params,this._screenSet.data.regToken)},i}(t.BaseForm);n.CONSTS=t.LinkAccountsForm_CONSTS,t.LinkAccountsForm=n,t.BaseForm.addFormToLibrary(n)}(n=t.ScreenSet||(t.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this.apiData={},this.lastSubmittedFormResponse={},this.finalizeRegistrationNeeded=!1,this.neededData={},this.extraEventData={},this.regToken=e.regToken}return e}();e.ScreenSetData=t}(t=e.ScreenSet||(e.ScreenSet={}))}(t=e.plugins||(e.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));var gigya;!function(e){var t;!function(t){var n;!function(n){var i;!function(i){var r={namespace:"accounts",pluginName:"screenSet",showScreenSetName:"showScreenSet",switchScreenName:"switchScreen",hideScreenSetName:"hideScreenSet",stayOnScreen:"_stay"};i.DeepFreeze(r),i.DeepFreeze(n.CloseReasons),i.EndFlowScreens={_skip:n.CloseReasons.skip,_finish:n.CloseReasons.finished},i.DeepFreeze(i.EndFlowScreens),i.ScreenSet_CONSTS={gigyaClass:"gigya-screen-set",mobileDialogClass:"gigya-screen-dialog-mobile",webDialogClass:"gigya-screen-dialog",contentClass:"gigya-screen-dialog-content",topElementClass:"gigya-screen-dialog-top",calculateSizeClass:"gigya-calculate-size",gigyaHidden:"gigya-hidden",startScreen:"data-start-screen",isResponsive:"data-responsive",dialogStyle:"data-dialog-style"},i.DeepFreeze(i.ScreenSet_CONSTS);var a=function(a){function s(){var e=a.apply(this,arguments)||this;return e._addedCSS=!1,e._screens={},e._random=Math.random(),e._placeholderIntervalID=-1,e.onUserStateChange=function(t){return e.onAccountInfo(t)},e._screenSet=e,e}return __extends(s,a),s.prototype.getConfig=function(){return{requiredParams:["screenSet"],defaultParams:{screenSet:""},defaultModalParams:{screenSet:""},defaultDeviceType:t.DeviceTypes.auto,hasMobileUI:!0,allowModal:!0,disableModalContainerInit:!0,defaultDialogStyle:n.PluginStyle.legacy,supportsResponsive:!0,enableSizePolling:!0,enableViewportPolling:!0}},s.injectionInfo=function(){return{name:"screenSet",namespace:"accounts",methodName:"showScreenSet",jsName:"gigya.services.accounts.plugins.screenSet",publicMethods:{hideScreenSet:{instanceMethod:"cancel",argNames:[]},switchScreen:{instanceMethod:"switchScreen",argNames:["screen"]}}}},s.prototype.warn=function(e,t){a.prototype.warn.call(this,e,t)},s.prototype.dispatchScreenSetEvent=function(e,t){return this.dispatchPluginEvent(e,t)},s._calculateInstanceId=function(e){var t=e.containerID||"";return e.screenSet+"_"+t},s.prototype.init=function(t){var n=this;this.loadTemplate(function(r,a,o){if(r){i.IETemplateElementPolyfill(),o&&(n.explicitParams=e.utils.object.merge([o,n.explicitParams],!1),n.params=e.utils.object.merge([n.params,e.thisScript.globalConf,n.explicitParams],!1)),n.params.customLang=e.utils.object.merge([a||{},n.params.customLang||{}]);for(var l in n.params.customLang)n.params.customLang[l.toLowerCase()]=n.params.customLang[l]}n.params.parentData?(n._isChild=!0,n.data=n.params.parentData,delete n.params.parentData):(n._isChild=!1,n.data=new i.ScreenSetData(n.params),n.params.regToken=n.data.regToken),n.params.isChild=n._isChild,n._isChild||n.registerGlobalEvents(),n.params.regSource||(n.params.regSource=i.firstPart(i.firstPart(document.location.href,"?"),"#")),n._instanceId=s._calculateInstanceId(n.params),r?(n.initContainer(),n.initScreens()):(n.dispatchErrorFromResponse(a),n.container&&(n.container.innerText="An error has occurred. Please try again later.")),t(r)})},s.prototype.loadTemplate=function(t){var n=this;if(this.templateElement)return void t(!0);var r=this._ID=this.isMobileUI&&this.params.mobileScreenSet?this.params.mobileScreenSet:this.params.screenSet,a="__gigyaScreenSet_"+r,o=document.getElementById(a);if(!o){if(this.templateElement=document.getElementById(r),this.templateElement&&this.templateElement.parentElement&&this.templateElement.parentElement.id&&0===this.templateElement.parentElement.id.indexOf("__gigyaScreenSet_")&&(this.templateElement=void 0),this.templateElement)return void t(!0);o=document.createElement("div"),o.id=a,o.style.display="none",e.utils.DOM.appendToBody(o)}var l=o.querySelector("div."+i.ScreenSet_CONSTS.gigyaClass);if(l){this.templateElement=l,s.CACHE[r]||(s.CACHE[r]={javascript:void 0,translations:{}});var c=s.CACHE[r].javascript?e.utils.JSON.deserialize(s.CACHE[r].javascript):void 0;s.CACHE[r].translations[this.params.lang]?t(!0,s.CACHE[r].translations[this.params.lang],c):e.accounts.getScreenSets(this.params,{include:"translations",screenSetIDs:r,callback:this.prepareCallback(function(e){if(0!=e.errorCode||!e.screenSets||!e.screenSets.length)return void t(!1,e);var i=e.screenSets[0],a=i.translations&&i.translations[n.params.lang]?i.translations[n.params.lang]:{};s.CACHE[r].translations[n.params.lang]=a,t(!0,a,c)})})}else e.accounts.getScreenSets(this.params,{include:"html,css,javascript,translations",screenSetIDs:r,callback:this.prepareCallback(function(i){if(0!=i.errorCode||!i.screenSets||!i.screenSets.length||!i.screenSets[0].html)return void t(!1,i);var a=void 0,l=i.screenSets[0],c=l.translations&&l.translations[n.params.lang]?l.translations[n.params.lang]:{};s.CACHE[r]={javascript:l.javascript,translations:(u={},u[n.params.lang]=c,u)},o.innerHTML||(o.innerHTML=l.html),n._loadedScreensetCss=l.css,n.templateElement=o.querySelector("div"),l.javascript&&(a=e.utils.JSON.deserialize(l.javascript)),t(!0,c,a);var u})})},s.prototype.injectScreenSetCSS=function(){if(!this._addedCSS){if(this._style!=n.PluginStyle.none){var t=e.utils.templates.fill(this.getCss().defaultCSS,{imgBase:this._imgBase});e._.plugins.utils.css.addCss(t,this.params.cssPrefix,!1)}this._loadedScreensetCss&&(e._.plugins.utils.css.addCss(this._loadedScreensetCss),delete this._loadedScreensetCss),this._addedCSS=!0}},s.prototype.initContainer=function(){if(this.templateElement){var t=this.isModal&&this.getPluginStyle()==n.PluginStyle.legacy;this.config.defaultModalParams.dimDialogBackground=!t,a.prototype.initContainer.call(this),t&&(this.config.enableViewportPolling=!1,this._modalDialog.getModalDialogContainer().setAttribute("gigid",this.config.methodName))}else this.isModal||(e.utils.DOM.setSize(this.container,this.params.width,this.params.height,!1),this.params.responsive&&(this.container.style.width="auto"),this._loadingIndicator=new n.LoadDimmer(this.container))},s.prototype.initScreens=function(){var e=this;this.isResponsive="true"==this.templateElement.getAttribute(i.ScreenSet_CONSTS.isResponsive),this.screenOptions=new i.ScreenOptions(this.templateElement),this.injectScreenSetCSS(),this._isChild||this.addGlobalEventHandler("onLogin",function(){e.data.finalizeRegistrationNeeded=!1}),this.prepareScreenSetContainer(),this.prepareScreens(),this._startScreen=this.params.startScreen||this.templateElement.getAttribute(s.CONSTS.startScreen)||this._startScreen,this.isMobileUI&&window.scrollTo(0,0),this.params.initialResponse?this.onScreenResponse(this.params.initialResponse,{ID:this._ID,bindID:this._ID,_screen:this._screens[this._startScreen],_screenSet:this}):this.switchScreen(this._startScreen)},s.prototype.getPluginStyle=function(){return n.PluginStyle[this.params.dialogStyle]||this.templateElement&&(n.PluginStyle[this.templateElement.getAttribute(i.ScreenSet_CONSTS.dialogStyle)]||this.getConfig().defaultDialogStyle)||n.PluginStyle._undefined},s.prototype.prepareScreenSetContainer=function(){var t,r=this.containerID;t=this.isModal?this.getTemplates().screenSet_dialog:this.getTemplates().screenSet;var a=r+"_content",s=r+"_child";if(this.container.insertAdjacentHTML("beforeend",e.utils.templates.fill(t,{innerContainerID:a,childContainerID:s})),!this._captionElement){var o;this._isChild?(document.getElementById(a+"_caption").style.display="none",o=this.container.parentElement.id+"_content_caption"):o=a+"_caption",this._captionElement=document.getElementById(o)}this._elContainer=document.getElementById(a),this.isModal&&this._style==n.PluginStyle.legacy&&e.utils.DOM.addClassToElement(this._elContainer,i.ScreenSet_CONSTS.contentClass),e.utils.DOM.addClassToElement(this._elContainer,"gigya-locale-"+e.thisScript.lang.langCode),this._elChildContainer=document.getElementById(s)},s.prototype.getApiData=function(){return this.data.apiData},s.prototype.getProfile=function(){var e=this.getApiData(),t=e&&e.getAccountInfo&&e.getAccountInfo.profile;return t||{}},s.prototype.getSchemaData=function(){var e=this.getApiData(),t=e&&e.getAccountInfo&&e.getAccountInfo.data;return t||{}},s.prototype.getSubScriptions=function(){var e=this.getApiData(),t=e&&e.getAccountInfo&&e.getAccountInfo.subscriptions;return t||{}},s.prototype.getPreferences=function(){var e=this.getApiData(),t=e&&e.getAccountInfo&&e.getAccountInfo.preferences;return t||{}},s.prototype.onScreenResponse=function(t,r,a){var s=this;r||(r={}),this.data.lastSubmittedFormID=r.ID,this.data.lastSubmittedFormResponse=t;var o=r.successScreen;if(t.response&&(t=t.response),t.autoSkip&&(o=r.autoSkipScreen),n.CloseReasons[t.childScreenSetCloseReason]===n.CloseReasons.skip&&(o=r.screenSetSkippedScreen),t.regToken&&(this._screenSet.params.regToken=this.data.regToken=t.regToken),this.onAccountInfo(t),a||this.data.lastSubmittedFormID&&(o||!this.endFlowIsPending())){var l=this.params.onAfterSubmit,c=function(t){var n={eventName:"afterSubmit",screen:r._screen.ID,form:r.bindID,profile:s.getProfile(),data:s.getSchemaData(),preferences:s._screenSet.getPreferences(),subscriptions:s.getSubScriptions(),response:e.utils.object.clone(t)};s.params.onAfterSubmit||(s.params.onAfterSubmit=l),s.dispatchPluginEvent(n.eventName,n)};r instanceof i.NewsletterSignupForm?c(t):("/accounts.setAccountInfo"!==t.operation||t.profile&&t.data||0!=t.errorCode)&&("/accounts.resetPassword"===t.operation||"/accounts.resendVerificationCode"===t.operation||this.getApiData().getAccountInfo&&this.getApiData().getAccountInfo.profile&&this.getApiData().getAccountInfo.data)?c(t):this.updateAccountInfo(c)}if(0==t.errorCode){var u=this.getApiData();"/accounts.register"==t.operation&&u.initRegistration&&delete u.initRegistration,!o||this._currentScreen&&o==this._currentScreen.ID?o||(this.params.remember=this.data.extraEventData.rememberMe,this.endFlow(t,r,n.CloseReasons.finished)):this.switchScreen(o,t,r)}else{if(this.handlePendingErrors(t,r))return;r instanceof i.BaseForm&&this.displayServerErrors(t,r)}},s.prototype.displayServerErrors=function(t,r){var a=this;if(t.secretQuestion)i.ForEach(r._secretQuestions,function(e){return e.setQuestion(t.secretQuestion)});else{switch(t.errorCode){case 403120:t.errorMessage=this.getText("account_temporarily_locked_out");break;case 403041:t.errorMessage=this.getText("account_is_disabled");break;case 403043:t.errorMessage=this.getText("login_identifier_exists");break;case 400003:t.errorMessage=this.getText("unique_identifier_exists");break;case 403044:t.errorMessage=this.getText("sorry_we_are_not_able_to_process_your_registration");break;case 403042:t.errorMessage=this.getText("invalid_login_or_password");break;case 403047:t.errorMessage=this.getText("there_is_no_user_with_that_username_or_email");break;case 400009:case 400006:t.errorMessage=this.getText("there_are_errors_in_your_form_please_try_again");break;case 500026:t.errorMessage=this.getText("network_error");break;case 0:}var s;switch(t.errorDetailsCode){case 100001:s=this.getText("old_password_cannot_be_the_same_as_new_password");break;case 100002:s=this.getText("wrong_password")}if(this.error(t.errorMessage,t.errorCode,{screen:r._screen.ID,form:r.ID,response:e.utils.object.clone(this.data.lastSubmittedFormResponse)}),!this._currentScreen)return void this.hide(n.CloseReasons[n.CloseReasons.error]);i.ForEach(this._currentScreen._captchas,function(e){
return e.reload()});var o={errorCode:t.errorCode,errorMessage:s||t.errorMessage,errorFlags:t.errorFlags},l=new Array;t.validationErrors&&i.ForEach(t.validationErrors,function(t,n){var s=r.getField(t.fieldName);if(!s){var o=i.firstPart(t.fieldName,".");"profile"===o&&(s=r.getField(t.fieldName.replace("profile.","")))}if(s){0===n&&s.instanceElement&&s.instanceElement.focus();var c=e.utils.object.clone(t);l.push(c),r.showFieldError(s,t.errorCode,!0)&&(t.handled=!0)}else"captchaText"===t.fieldName?a.warn("Captcha is required but captcha widget is missing from the submitted form"):a.warn(t.fieldName+" is mandatory/invalid but its field is missing from the submitted form")}),l.push(o),r.showErrors([o],!0),r.showErrors(l,!1)}},s.prototype.prepareScreens=function(){var e=this,t=this.templateElement.querySelectorAll("."+i.Screen_CONSTS.gigyaClass),n=!0;i.ForEach(t,function(t,r){var a=new i.Screen(e,t);e._screens[a.ID]=a,n&&(n=!1,e._startScreen=a.ID)})},s.prototype.cancel=function(){this.hide(n.CloseReasons[n.CloseReasons.canceled],null,!0)},s.prototype.hide=function(t,n,i){this.undimScreenSet(),this.isModal&&this._currentScreen&&(this._currentScreen.unlinkInstanceElement(),this._currentScreen=null),i&&(this.container.innerHTML=""),this.close(t,e.utils.object.removeUndefined({user:n&&n.user}))},s.prototype.dispose=function(){this._isDisposed||(this._child&&(this._child.hide(n.CloseReasons[n.CloseReasons.canceledByParent]),this._child.dispose(),this._child=null),i.ForEachProp(this._screens,function(e){return e.unlinkTemplate()}),this._child||this.unregisterGlobalEvents(),a.prototype.dispose.call(this))},s.prototype.registerGlobalEvents=function(){this.addGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange})},s.prototype.unregisterGlobalEvents=function(){this.removeGlobalEventHandlers({onLogin:this.onUserStateChange,onLogout:this.onUserStateChange})},s.prototype.getErrorMessage=function(e,t,n,i,r){if(0==e)return"";if(r)return 400027!=e&&"undefined"!=typeof Recaptcha&&Recaptcha.reload(),this.getText("the_characters_you_entered_didn't_match_the_word_verification._please_try_again");switch(e){case 400027:return this.getRequiredValueValidationErrorMessage(t,i);case 400003:return this.getUniqueIdentifierValidationErrorMessage(n);case 500026:return this.getText("network_error");case 400009:default:return this.getValidationErrorMessage(n,i)}},s.prototype.getRequiredValueValidationErrorMessage=function(e,t){return e?this.getText("this_field_is_required","%fieldname",t):this.getText("please_enter_fieldname","%fieldname",t)},s.prototype.getUniqueIdentifierValidationErrorMessage=function(e){switch(e){case"username":return this.getText("username_already_exists");case"email":return this.getText("email_already_exists")}return""},s.prototype.getValidationErrorMessage=function(e,t){switch(e){case"email":return this.getText("email_address_is_invalid");case"password":case"newPassword":return this.getText("password_does_not_meet_complexity_requirements");case"passwordRetype":return this.getText("passwords_do_not_match");case"loginID":return this.getText("invalid_login_or_password");default:return this.getText("invalid_fieldname","%fieldname",t)}},s.prototype.updateAccountInfo=function(t){var n=this;e.accounts.getAccountInfo(this.params,{callback:function(e){n.onAccountInfo(e),t(e)}})},s.prototype.onAccountInfo=function(e){var t=e.accountInfo||e,n=this.getApiData();n.getAccountInfo||(n.getAccountInfo={}),i.ForEach(["profile","data","emails","loginIDs"],function(e){t[e]&&(n.getAccountInfo[e]=t[e])}),this._currentScreen&&this._currentScreen.evaluateConditionalAttributes()},s.prototype.onApiData=function(e){var t=this.getApiData(),n=this.getApiMethodFromFullNamespace(e.operation);e.operation.indexOf("getProviders")>-1?t[n]={activeProviders:this.getEditableTfaProvider(e.activeProviders)}:t[n]=e,e.regToken&&(this._screenSet.params.regToken=this.data.regToken=e.regToken);var i=!0;for(var r in this.data.neededData)if(!t[r]){i=!1;break}i&&this.loadNextScreen()},s.prototype.chooseNextScreen=function(e){if(e){var t=e.split(","),n=0,r=[];i.ForEach(t,function(e){var t=e.split(":"),i=t.length>1?parseInt(t[1]):1;n+=i,r.push({screen:t[0],weight:i})});var a,s=this._random*n;return i.Some(r,function(e){return s-=e.weight,!(s>0)&&(a=e.screen,!0)}),a}},s.prototype.getEditableTfaProvider=function(e){void 0===e&&(e=[]);for(var t=[],n=0;n<e.length-0;n++){var i=this.isTfaProviderEditable(e[n].name);i&&t.push(e[n].name)}return t},s.prototype.isTfaProviderEditable=function(e){return void 0!=i.EditableProvidersTypes[e]},s.prototype.getApiMethodFromFullNamespace=function(e){var t=e.split(".");return t[t.length-1]},s.prototype.switchToChildScreenSet=function(t,a,s){var o=this,l=function(t){switch(o.isModal?e.utils.DOM.removeClassFromElement(u,i.ScreenSet_CONSTS.gigyaHidden):(e.utils.DOM.removeClassFromElement(o._elContainer,i.ScreenSet_CONSTS.gigyaHidden),e.utils.DOM.addClassToElement(o._elChildContainer,i.ScreenSet_CONSTS.gigyaHidden),c.containerID=o._elChildContainer.id),o.params.regToken=o.data.regToken,n.CloseReasons[t.reason]){case n.CloseReasons.canceledByParent:break;case n.CloseReasons.error:case n.CloseReasons.canceled:o.hide(t.reason);break;case n.CloseReasons.pendingError:o.onScreenResponse(o.data.lastSubmittedFormResponse,s,!1);break;case n.CloseReasons.finished:case n.CloseReasons.skip:case n.CloseReasons.missing:default:o.onScreenResponse({errorCode:0,childScreenSetCloseReason:t.reason,user:t.user},s,!1)}},c={screenSet:t,lang:this.lang,width:this.params.width,height:this.params.height,context:this.params.context,cid:this.params.cid,regSource:this.params.regSource,regToken:this.params.regToken,onError:this.params.onError,onBeforeSubmit:this.params.onBeforeSubmit,onAfterSubmit:this.params.onAfterSubmit,onBeforeScreenLoad:this.params.onBeforeScreenLoad,onAfterScreenLoad:this.params.onAfterScreenLoad,onFieldChanged:this.params.onFieldChanged,onHide:l,parentData:this.data,getInstance:function(e){o._child=e},_allowMultipleInstances:!0};if(a&&(c.startScreen=a),this.isModal){c.newModal=!0;var u=this._modalDialog.getModalDialogContainer();e.utils.DOM.addClassToElement(u,i.ScreenSet_CONSTS.gigyaHidden)}else e.utils.DOM.addClassToElement(this._elContainer,i.ScreenSet_CONSTS.gigyaHidden),e.utils.DOM.removeClassFromElement(this._elChildContainer,i.ScreenSet_CONSTS.gigyaHidden),c.containerID=this._elChildContainer.id;return e[r.namespace][r.showScreenSetName](c),!0},s.prototype.switchScreen=function(e,t,n){var i,r=e.split("/");return r.length>1&&(i=r.shift()),e=r.join("/"),i!==this.params.screenSet||(i=null,e)?i?this.switchToChildScreenSet(i,e,n):this.switchToLocalScreen(e,t,n):(this.warn('Attempt to open screen-set "'+i+'" from within the same screen-set, without specifing screen to move to.'),!1)},s.prototype.switchToLocalScreen=function(t,a,s){var o=this;if(i.EndFlowScreens[t])return this.endFlow(a,s,i.EndFlowScreens[t]),!0;if(t===r.stayOnScreen)return!0;if(this._currentScreen&&this._currentScreen.ID===t)return!1;if(this._nextScreen=this._screens[t],!this._nextScreen)return this.warn('Missing screen "'+t+'"'),this.hide(n.CloseReasons[n.CloseReasons.missing]),!1;this.data.finalizeRegistrationNeeded&&!this._nextScreen.haveForms()&&this.endFlow(a,s,n.CloseReasons.finished),this._currentScreen||this.setNextScreenSize();var l=!1,c=this._nextScreen.getExtraProfileFields(!0).join(",");this.data.neededData=this._nextScreen.getNeededData();var u=this.getApiData(),d=this.prepareCallback(function(e){return o.onApiData(e)});return i.ForEachProp(this.data.neededData,function(t,n){var i=e.utils.validation.isExplicitFalse(t.cache);if(i&&u&&delete u[n],!u[n]||"getAccountInfo"===n&&""!==c){u[n]&&delete u[n],o.dimScreenSet(),l=!0;var r={callback:d};t.responseHandler&&(r.callback=function(e){return o.onApiData(t.responseHandler(e))}),"getAccountInfo"===n&&c&&(r.extraProfileFields=c);var a=e.accounts[n]||e.socialize[n]||e.accounts.tfa[n],s=e.utils.object.removeUndefined(t.params);if(s&&s.include&&o.params&&o.params.include){var p=s.include.concat(",",o.params.include),h=p.split(",");h=e.utils.array.getUniqueValues(h),s=h.join(",")}a(o.params,s,r)}}),l||this.loadNextScreen(),!0},s.prototype.shouldClose=function(){return this.isModal},s.prototype.loadNextScreen=function(){var t=this,n=this._nextScreen.ID,i=e.utils.object.removeUndefined({eventName:"beforeScreenLoad",currentScreen:this._currentScreen&&this._currentScreen.ID,form:this.data.lastSubmittedFormID,response:e.utils.object.clone(this.data.lastSubmittedFormResponse),profile:this.getProfile(),data:this.getSchemaData(),preferences:this._screenSet.getPreferences(),nextScreen:n}),r=this.dispatchPluginEvent(i.eventName,i);if(this.undimScreenSet(),r){this.setNextScreenSize(this._nextScreen),this._elContainer.innerHTML="",this._currentScreen&&(this._currentScreen.unlinkInstanceElement(),this._currentScreen=null);var a=this.prepareNextScreen();this._nextScreen.performAutoSkip().then(function(i){if(i)return t._nextScreen.undimScreen(),t._nextScreen.unlinkInstanceElement(),void t._screenSet.onScreenResponse({errorCode:0,autoSkip:!0},i);a.style.display="",t._elContainer&&t._elContainer.parentNode&&t._elContainer.parentNode.removeChild(t._elContainer),t.container.appendChild(a),t._elContainer=a,t._currentScreen=t._nextScreen,t._nextScreen=null,t._currentScreen.resetLastConditionalValues(),t._currentScreen.evaluateConditionalAttributes();var r=t._currentScreen.instanceElement?t._currentScreen.instanceElement.offsetWidth+"px":"";t.setCaption(t._currentScreen.caption,r),t._modalDialog&&t._modalDialog.showAll();var s=e.utils.object.removeUndefined({eventName:"afterScreenLoad",currentScreen:n,form:t.data.lastSubmittedFormID,response:e.utils.object.clone(t.data.lastSubmittedFormResponse),profile:t.getProfile(),preferences:t._screenSet.getPreferences(),data:t.getSchemaData()});t.dispatchPluginEvent(s.eventName,s)})}},s.prototype.prepareNextScreen=function(){var e=document.createElement("div"),t=document.createElement("div");return i.ForEach(this._elContainer.attributes,function(e){return t.setAttribute(e.name,e.value)}),t.appendChild(e),document.body.appendChild(t),this._nextScreen.placeContentInElement(e),i.TemplateElement.prepareTemplateInstances(t),this._nextScreen.linkInstanceElement(t),t.style.display="none",t},s.prototype.setCaption=function(e,t){this._captionElement&&(e?this._captionElement.style.display="":this.isModal||(this._captionElement.style.display="none"),this._captionElement.innerHTML=e||"&nbsp;",this.isModal||this.isMobileUI||void 0===t||(this._captionElement.style.width=t))},s.prototype.setNextScreenSize=function(t){this._elContainer.style.display="";var r,a;if(t&&(r=t.width,a=t.height,!r||!a)){var s=document.createElement("div");t.placeContentInElement(s),e.utils.DOM.addClassToElement(s,i.ScreenSet_CONSTS.calculateSizeClass),e.utils.DOM.setSize(s,r,a),this.container.appendChild(s);var o=e.global.getBordersAndPaddings(s);r||(r=String(s.offsetWidth+Math.ceil(o.w)+30)),a||(a=String(s.offsetHeight+1)),s.parentNode.removeChild(s)}if(r)if(this.isMobileUI||!this.isModal&&this.isResponsive){var l="auto"==r?"none":""+((""+r).indexOf("%")>0?r:r+"px");this._elContainer.style.maxWidth=l,(e.localInfo.isIE7||e.localInfo.isIE8||e.localInfo.isIE&&e.localInfo.quirksMode)&&(this._elContainer.style._width=l)}else this.getPluginStyle()==n.PluginStyle.legacy&&i.getUnitMeasurementType(r)==i.UnitMeasurementType.percentage||e.utils.DOM.setSize(this._elContainer,r,void 0);this.isModal&&!this.isMobileUI},s.prototype.doesScreenHaveForms=function(e){return e&&this._screens[e]&&this._screens[e].haveForms()},s.prototype.dimScreenSet=function(){this._loadingIndicator.show()},s.prototype.undimScreenSet=function(){this._loadingIndicator.hide()},s.prototype.handlePendingErrors=function(e,t){var r,a=i.PendingErrorAttributes[e.errorCode]||{};return a.nextScreen&&(r=a.nextScreen(t)),r?(a.requiresFinalize?this.data.finalizeRegistrationNeeded=!0:a.resetFinalizeNeededState&&(this.data.finalizeRegistrationNeeded=!1),this.switchScreen(r,e,t)):a.nextScreen?(this._isChild?this.hide(n.CloseReasons[n.CloseReasons.pendingError],e):this.warn("Missing attribute "+a.name+" for pending error: "+e.errorCode),!1):void 0},s.prototype.endFlowIsPending=function(){return this.data.finalizeRegistrationNeeded&&this.data.regToken},s.prototype.endFlow=function(t,i,r){var a=this;if(!this._isChild&&this.endFlowIsPending()){"undefined"!=typeof this.data.extraEventData.allowAccountsLinking&&(this.params.allowAccountsLinking=this.data.extraEventData.allowAccountsLinking);var s=this.data.regToken||this.params.regToken;this.data.regToken=this.params.regToken=null,e.accounts.finalizeRegistration(this.params,{include:"profile,data,emails,subscriptions,preferences",dontHandleScreenSet:!0,regToken:s,callback:function(e){0==e.errorCode?(a.data.finalizeRegistrationNeeded=!1,a.data.apiData={}):a.data.regToken=a.params.regToken=s,a.onScreenResponse(e,i,!0)}})}else this.hide(n.CloseReasons[r],t)},s.prototype.resizeModal=function(e){this.getPluginStyle()!==n.PluginStyle.legacy?(e.height&&(this._elContainer.style.height=e.height),e.width&&(this._elContainer.style.width=e.width)):(i.getUnitMeasurementType(e.width)==i.UnitMeasurementType.percentage&&(delete e.width,this._elContainer.style.width=""),i.getUnitMeasurementType(e.height)==i.UnitMeasurementType.percentage&&(delete e.height,this._elContainer.style.height="")),a.prototype.resizeModal.call(this,e)},s.prototype.resizePlugin=function(e,t){this.onViewportSizeChanged()},s.prototype.onViewportSizeChanged=function(e,t){this._currentScreen&&this._currentScreen.evaluateConditionalAttributes()},s}(e._.plugins.BasePlugin);a.CACHE=e.__screenSetPluginCache=e.__screenSetPluginCache||{},a.CONSTS=i.ScreenSet_CONSTS,i.ScreenSetPlugin=a}(i=n.ScreenSet||(n.ScreenSet={}))}(n=t.plugins||(t.plugins={}))}(t=e._||(e._={}))}(gigya||(gigya={}));
});

// Combined services: gigya.services.plugins.base, gigya.services.accounts.plugins.screenSet
// Failed services: 