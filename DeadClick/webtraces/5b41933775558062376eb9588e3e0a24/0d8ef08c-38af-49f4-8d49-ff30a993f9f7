(function(){function j(){return e++}function k(a){var b=document.documentElement.clientWidth,c=a.max||Infinity,d=a.min||0;return b<=c&&b>=d}function l(a){var b="",c;for(c in a)a.hasOwnProperty(c)&&(b+=c+":"+a[c]+";");return b}function m(a,b){var c="",d="",e,f;for(e in b)if(b.hasOwnProperty(e)){f=b[e];if(e==="html"){d=f;continue}e==="style"&&(f=l(f)),c+=" "+e+'="'+f+'"'}return a==="img"||a==="hr"?["<",a,c,">"].join(""):["<",a,c,">",d,"</",a,">"].join("")}var a=typeof ad_mode!="undefined"?ad_mode:"desktop",b="http://img.timeinc.net/time/assets/js/responsive-ads-shim.js",c={},d=function(){var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");while(c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0]);return b>4?b:a}(),e=0,f=[],g="<!-- AD -->",h="<!-- /AD -->",i=/<!-{2} \/?AD -{2}>/g,n=function(b){this.id=b.id||"responsive-ad-unit-"+j(),this.className=b.className||"",this.highImpact=b.highImpact||"",this.reloadable=b.reloadable||!1;var c=b.ads.length,d=0,e;this.ads=[];for(;d<c;d++){e=b.ads[d];if(e.type==="fallback"){this.ads.push(new FallbackAd(e,this));continue}if(e.type!==a)continue;if(e.type==="desktop"||e.type==="tablet")tgxDo.renderingMode="sync",this.ads.push(new DfpAd(e,this));e.type==="mobile"&&this.ads.push(new MobileAd(e,this))}this.usableAds=[],this.possibleAds=[],this.reloadable&&f.push(this)};n.prototype={pageRendering:!0,rendered:!1,hide:function(){this.el.style.display="none"},show:function(){this.el.style.display="block",this.el.style.textAlign="center"},init:function(){var a=this,b=this.refreshAdPick;this.refreshAdPick=function(){b.apply(a,arguments)},this.processAds(this.ads,!0),this.refreshAdPick(),window.addEventListener?window.addEventListener("resize",this.refreshAdPick,!1):window.attachEvent&&window.attachEvent("onresize",this.refreshAdPick),this.pageRendering=!1},reload:function(a){this.randomNumber=a,this.refreshAdPick()},renderAd:function(a){var b;if(!this.rendered){if(!this.pageRendering)return;a=m("div",{id:this.id,"class":this.className,"data-cb-ad-id":this.id,html:a});var c=[],e,f,g;a=a.split(i);if(d&&d<10){a.length===3&&(a[0]="<script>document.write('"+a[0].replace(/'/g,"\\'")+"');</scr"+"ipt>",a[2]="",window.responsiveAd.shimNeeded=!0);for(var h=0;h<a.length;h++)document.write(a[h])}else document.write(a.join("\n"));this.el=document.getElementById(this.id),this.rendered=!0}else b=document.createElement("div"),b.innerHTML=a,this.el.appendChild(b.childNodes[0])},processAds:function(a,b){var c=a.slice(),d=c.length,e=d,f=!1,g,h;b=b===!0;while(e--)g=c.shift(),h=null,!f&&k(g)&&(this.usableAds.push(g),f=!0),g.type==="fallback"&&this.usableAds.push(g),b&&this.reloadable&&(g.type==="desktop"||g.type==="tablet"||g.type==="fallback")&&this.possibleAds.push(g)},refreshAdPick:function(){r&&this.reloadable&&(this.usableAds=[],this.processAds(this.possibleAds));var a=document.documentElement.clientWidth,b=this.usableAds,c=b.length,d=0,e;for(;d<c;d++)if(k(b[d])){e=b[d];break}if(e&&e===this.currentAd){this.reloadable&&this.currentAd.reload&&r&&this.currentAd.reload();return}this.currentAd&&this.currentAd.hide(),e&&(e.rendered?e.show():e.render()),!e&&this.pageRendering&&this.renderAd(""),e?this.show():this.hide(),this.currentAd=e}};var o=function(a,b){a&&(this.options=a,this.unit=b,this.max=a.max,this.min=a.min,this.type=a.type)};o.prototype={rendered:!1,ad:null,show:function(){this.el.style.display="block",this.el.style.textAlign="center"},hide:function(){this.el.style.display="none"},pass:function(a){var b=this.options.max||Infinity,c=this.options.min||0;return a<=b&&a>=c},splitSize:function(a){var b={},c=a.split("x");return b.width=parseInt(c[0],10),b.height=parseInt(c[1],10),b}};var p=["Fallback","Dfp","Mobile"],q=3;while(q--)this[p[q]+"Ad"]=function(a,b){o.apply(this,arguments)},this[p[q]+"Ad"].prototype=new o,this[p[q]+"Ad"].constructor=this[p[q]+"Ad"];FallbackAd.prototype.render=function(){this.id="responsive-ad-"+j();var a=m("img",{src:this.options.config.src}),b=this.splitSize(this.options.size);this.options.config.href&&(a=m("a",{href:this.options.config.href,html:a})),a=m("div",{id:this.id,style:{margin:"0 auto",width:b.width+"px"},html:a}),this.unit.renderAd(a),this.rendered=!0,this.el=document.getElementById(this.id)},MobileAd.prototype.render=function(){this.id="responsive-ad-"+j(),window.location.search.indexOf("testads")>=0&&(this.options.config.test=1),window.location.search.indexOf("testcorp")>=0&&(this.options.config.testcorp=2);var a=m("script",{html:"AdRequest_("+JSON.stringify(this.options.config)+")"}),b=this.splitSize(this.options.size);a=m("div",{id:this.id,style:{margin:"0 auto"},html:g+a+h}),this.unit.renderAd(a),this.rendered=!0,this.el=document.getElementById(this.id)},DfpAd.prototype.render=function(){if(!this.unit.pageRendering&&!r)return!1;var a,b="",c,d,e,f,i,k,l;this.options.cm&&(i=this.options.cm.position||"",k=this.options.cm.type||""),typeof this.options.size=="string"?(a=this.splitSize(this.options.size),this.options.cm?this.ad=adFactory.getCmAd(a.width,a.height,i,k):this.ad=adFactory.getAd(a.width,a.height)):(a=this.splitSize(this.options.size[0]),this.options.cm?this.ad=adFactory.getMultiCmAd.call(adFactory,this.options.size,i,k):this.ad=adFactory.getMultiAd.call(adFactory,this.options.size)),this.options.position&&this.ad.setPosition(this.options.position),this.options.zone&&this.ad.setZone(this.options.zone);if(this.options.params)for(var n in this.options.params)this.options.params.hasOwnProperty(n)&&this.ad.setParam(n,this.options.params[n]);this.randomNumber&&(this.ad.randomNumber=this.randomNumber),this.tileNumber&&(this.ad.tileNumber=this.tileNumber),TiiAdsIsDebugMode()&&(l=new TgxAdBridge(this.ad),b+='<div id="'+l._getSlotTarget()+'_debug">'+'<textarea rows="1" style="font:12px courier;border:1px solid #000;background:#ffffbd">'+l.getSlotScript(tgxDo.renderingMode,1,0,l._getSlotUnitName(),l._getSlotSizes(),l._getSlotTarget(),1,1)+"</textarea>"+"</div>"),b+=this.ad._getAdTag(),this.id="responsive-ad-"+j(),this.unit.highImpact&&(f=window.responsiveAd.highImpact(this.unit.highImpact),f&&(d=f.width,e=f.height)),!this.unit.pageRendering&&this.rendered?this.renderInIframe(b,{width:(d||a.width)+"px",height:a.height+"px"}):!this.unit.pageRendering&&!this.rendered?(c=m("div",{id:this.id,"class":"responsiveads",style:{margin:"0 auto"},html:""}),this.unit.renderAd(c),this.el=document.getElementById(this.id),this.renderInIframe(b,{width:(d||a.width)+"px",height:a.height+"px"})):(this.options.cm?c=m("div",{id:this.id,style:{margin:"0 auto"},html:g+b+h}):c=m("div",{id:this.id,"class":"responsiveads",style:{margin:"0 auto"},html:g+b+h}),this.unit.renderAd(c),this.el=document.getElementById(this.id)),this.rendered=!0},DfpAd.prototype.reload=function(){this.randomNumber=this.unit.randomNumber,this.ad&&(this.tileNumber=this.ad.tileNumber),this.render()},DfpAd.prototype.renderInIframe=function(a,b){var c=document.createElement("iframe"),d,e;c.className="reloadable-ad",c.setAttribute("scrolling","no"),c.setAttribute("frameBorder","0"),c.setAttribute("style","border: none; outline: 0;"),c.style.width=b.width,c.style.height=b.height,this.el.innerHTML="",this.el.appendChild(c),this.el.style.height=b.height,d=c.contentWindow,e=c.contentWindow&&c.contentWindow.document?c.contentWindow.document:c.contentDocument,a=a.replace(/;pgurl=1/,""),e.open(),e.write("<!DOCTYPE html><html><head></head><style>body,html { margin: 0; padding: 0 }</style><body>"+a+"<scr"+"ipt>window.parent.responsiveAd.reload.next()</scr"+"ipt></body></html>")},window.responsiveAd=function(a){var b=new n(a);return b.init(),b};var r=!1,s=[],t;window.responsiveAd.reload=function(){f.sort(function(a,b){var c=a.currentAd&&a.currentAd.ad?a.currentAd.ad.tileNumber:Infinity,d=b.currentAd&&b.currentAd.ad?b.currentAd.ad.tileNumber:Infinity;return c===d?0:c<d?-1:1}),s=f.slice(),t=Math.ceil(1+1e12*Math.random()),r=!0,window.responsiveAd.reload.next()},window.responsiveAd.reload.next=function(){if(r&&s.length){var a=s.shift();a.reload(t)}else r=!1},window.responsiveAd.shim=function(){window.responsiveAd.shimNeeded&&(document.write("</div></div>"),window.responsiveAd.shimNeeded=!1)},window.responsiveAd.highImpact=function(a,b,d){if(b||d)c[a]={width:b,height:d,size:b+"x"+d},document.body&&(document.body.className+=" highimpact highimpact-"+a+" ad"+b+"x"+d);else return c[a]}})()