define(["jquery"],function(c){function a(f,h,e,g){if(e==null||e===""){e="json"}var i=g||null;return c.ajax({url:f,type:"POST",data:h,dataType:e,traditional:true,timeout:i}).pipe(function(j){if(j&&j.errorMessage){return c.Deferred().reject(j)}return j},function(j,k){return j})}function d(f){var g=c(f).serializeArray(),e={};c.each(g,function(i,h){if(e[h.name]){if(!c.isArray()){e[h.name]=[e[h.name]]}e[h.name].push(h.value)}else{e[h.name]=h.value}});return e}function b(g,k,f,j){var e=c(g).first(),i=e.attr("action"),h=c.extend(d(e),k);return a(i,h,f,j)}return{invokeService:a,serializeObject:d,submitForm:b}});