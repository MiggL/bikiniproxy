{"sessionId":"125ed4abaa694c3b8d9022a09e2727ff","tntId":"125ed4abaa694c3b8d9022a09e2727ff.26_26","offers":[{"html":"<script>\n// this function makes a request to Target carrying all the above data with it. You will receive a response if you have correctly configured the activity. It's wrapped in an if statement so that it only runs on hotel pages.\nif (dataLayer.pageType === \"hotelRenderer\") {\n// the variables woudl be represented by Data Elements if this was coming from DTM.\n  var categoryMeta = tmgAds.page.zone;\nvar categoryId = categoryMeta.replace(/\\./g, ',');\nvar thumbnailURL = document.querySelector('meta[property=\"og:image\"]').getAttribute('content');\nvar name = document.querySelector('meta[property=\"og:title\"]').getAttribute('content');\nvar message = document.querySelector('.p_hub__section_1 .product-card__overview p').textContent;\nvar price = document.querySelector('div.travel-price.travel-price--price-focus.travel-price--book-now > span.travel-price__wrap > span.travel-price__price').textContent\nvar externalURL = document.querySelector('section > div > aside > div > div > div > div.travel-cta.travel-cta--book-now > a').getAttribute('href');\nvar provider = document.querySelector('div.product-book-now__container > div.product-book-now__provider > div.travel-provider > div.travel-provider__name').textContent;\nvar rating = document.querySelector('section > div > article > div > div > div.product-card__approved > div.product-card__rating > span.product-card__rating__rate').textContent;\n\n    adobe.target.getOffer({\n        \"mbox\": \"recommendations-mbox\",\n        \"params\": {\n            \"entity.id\": dataLayer.flakeId,\n            \"entity.categoryId\": categoryId,\n            \"entity.thumbnailURL\": thumbnailURL,\n            \"entity.name\": name,\n            \"entity.pageURL\": document.location.pathname,\n            \"entity.message\": message,\n            \"entity.value\": price,\n            \"entity.externalURL\": externalURL,\n            \"entity.provider\": provider,\n            \"entity.rating\": rating\n        },\n        \"success\": function(offers) {\n            adobe.target.applyOffer({\n                \"mbox\": \"recommendations-mbox\",\n                \"offer\": offers\n            });\n        },\n        \"error\": function(status, error) {}\n    });\n}\nelse if (dataLayer.pageType === \"destinationRenderer\") {\n    var categoryMeta = tmgAds.page.zone;\nvar categoryId = categoryMeta.replace(/\\./g, ',');\n  adobe.target.getOffer({\n    \"mbox\": \"recommendations-mbox\",\n    \"params\": {\n      \"entity.categoryId\": categoryId\n    },\n    \"success\": function(offers) {\n            adobe.target.applyOffer({\n                \"mbox\": \"recommendations-mbox\",\n                \"offer\": offers\n            });\n        },\n        \"error\": function(status, error) {}\n  });\n}\n  </script>"}]}