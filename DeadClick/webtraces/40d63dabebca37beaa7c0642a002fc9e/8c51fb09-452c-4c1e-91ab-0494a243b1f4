define("modules/occurrence_grid",["jquery","pubsub"],function(t,e){"use strict";function n(e){e.$o.each(function(){var e=t(this),n=e.data("params");n.$occurrence_grid__wrapper=e,e.data("instance",new i(n))})}function i(t){this.AJAX_ENDPOINT=t.ajax_endpoint,this.$occurrence_grid__wrapper=t.$occurrence_grid__wrapper,this.$occurrence_grid=this.$occurrence_grid__wrapper.find(".occurrence_grid"),this.$month_picker=this.$occurrence_grid__wrapper.find(".occurrences_month_picker select"),this.go()}var o={OCCURRENCES:{REQUESTED:"occurrences.requested"}};return i.prototype.go=function(){var n=this;this.$month_picker.on("change",function(){n.$selected_month=t(this).find(":selected"),e.publish(o.OCCURRENCES.REQUESTED)}),e.subscribe(o.OCCURRENCES.REQUESTED,function(){n.draw(t('<div class="js-loading"></div>')),n.get()})},i.prototype.buildURL=function(){return this.AJAX_ENDPOINT+"&endpoint="+encodeURIComponent(this.$selected_month.data("ajax-url"))},i.prototype.get=function(){var e=this;t.ajax(this.buildURL()).done(function(t){e.draw(t)}).fail(function(){throw new Error("Error loading event occurrences for the chosen month.")})},i.prototype.draw=function(t){this.$occurrence_grid.html(t)},{init:n}}),define("modules/lightbox",["config/config","pubsub"],function(t,e){"use strict";function n(t){t.$o.each(function(){new s($(this))}),$(document).on("keydown",function(t){27===t.keyCode&&i.children(".lightbox").length&&o()}),$(document).on("click",".lightbox__close, .overlay, .js-close",function(){o()})}var i=$("body"),o=function(){var t=i.children(".lightbox, .overlay");t.fadeOut(400,function(){var e=$(this),n=e.data("instance");i.removeClass(a),n&&n.$targetContainer.append(n.$target),t.remove()})},a="lock-position",s=function(t){var e=t.data("params");this.$elem=t,this.params=e,this.$target=!!e.target&&$(e.target),this.$targetContainer=this.$target.closest(".hidden"),t.data("instance",this),this.$target.length&&this.bindEvents()};return s.prototype.bindEvents=function(){var t=this;this.$elem.on("click",function(e){e.preventDefault(),t.launchBox()}),setTimeout(function(){$(".image_grid").removeClass("image_grid--invisible")},300)},s.prototype.launchBox=function(){var n=$('<div class="lightbox"></div>').data("instance",this).append('<div class="overlay"></div>').append(this.$target.addClass("lightbox__content"));i.addClass(a).append(n),e.publish(t.broadcasts.lightbox.opened,this.params.index||0)},{init:n}}),define("modules/panel",["jquery"],function(t){function e(e){this.$panel_button=e.$panel_button,this.$panel_body=t("."+e.panel_body),this.is_open=e.is_open}return e.prototype.closePanel=function(t){this.is_open=!1,this.$panel_button.removeClass("panel__button--active").addClass("panel__button--inactive"),this.$panel_body.slideUp(function(){t()})},e.prototype.togglePanelVisibility=function(){this.is_open=!this.is_open,this.$panel_button.toggleClass("panel__button--active panel__button--inactive"),this.$panel_body.slideToggle()},e}),define("modules/panels",["jquery","modules/panel","pubsub","config/config"],function(t,e,n,i){function o(e){var n=e.$o;t.each(n,function(e,n){s.push(new a(t(n)))})}function a(o){this.panels=[];var a=this;t.each(o.children(".panel__button"),function(){var o,s=t(this),r={$panel_button:s,panel_body:s.data("params").panel_body,is_open:s.data("params").is_open};o=new e(r),o.$panel_button.on("click",function(){n.publish(i.broadcasts.panels.changed,r),a.panels.length>1?a.closeOtherPanels(o,function(){o.togglePanelVisibility()}):o.togglePanelVisibility()}),a.panels.push(o)})}var s=[];return a.prototype.closeOtherPanels=function(e,n){t.each(this.panels,function(t,i){i!==e&&i.closePanel(n)})},{init:o}}),define("modules/cinema_locator",["jquery","pubsub","config/config"],function(t,e,n){function i(e){this.$element=e,this.$search_form=e.find(".cinema_locator__search_box"),this.$search_box=this.$search_form.find("input"),this.$list_wrapper=t(e.data("params").list_wrapper),this.$load_more_widget=t(".load_more_widget__button"),this.ajax_endpoint=e.data("params").ajax_endpoint,this.map_id=e.data("params").map_id,this.autocomplete_id=e.data("params").autocomplete_id,this.in_list_view=!0,this.attachEventListeners()}return i.prototype.attachEventListeners=function(){var i=this;this.$search_form.on("submit",function(e){var n=i.$search_box.val(),o=i.getAjaxUrlWithSearchTerm(n),a=i.getEndpointUrlWithSearchTerm(n);i.updateView(o,a),t(this).find(".autocomplete_box__results").hide(),e.preventDefault()}),e.subscribe(n.broadcasts.user_location.location_found,function(t,e){var n=i.getAjaxUrlWithLatLng(e.coords.latitude,e.coords.longitude),o=i.getEndpointUrlWithLatLng(e.coords.latitude,e.coords.longitude);i.updateView(n,o)}),e.subscribe(n.broadcasts.autocomplete_box.result_clicked+this.autocomplete_id,function(t,e){var n=i.getAjaxUrlWithSearchTerm(e),o=i.getEndpointUrlWithSearchTerm(e);i.$search_box.val(e),i.updateView(n,o)}),e.subscribe(n.broadcasts.map.marker_clicked+this.map_id,function(e,n){t.each(i.$list_wrapper.find("li.showtimes__cinema, .load_more_widget__button"),function(){var e=t(this);e.find(".tab_title").text()!==n?e.hide():(e.show(),e.find("input").prop("checked",!0))}),i.$load_more_widget.hide()}),t(".cinema_locator__toggle--list_view, .cinema_locator__toggle--map_view").on("click",function(){t(".cinema_locator__toggle").toggle(),i.in_list_view=!i.in_list_view,i.in_list_view?i.restoreListView():(e.publish(n.broadcasts.map.resize_map+i.map_id),window.scrollTo(0,i.$search_box.offset().top-t("#primary-nav").height()))}),e.subscribe(n.broadcasts.tabs.changed,function(t,o){"enhanced_showtimes"!==o.data("tab-type")||i.in_list_view||e.publish(n.broadcasts.map.resize_map+i.map_id)})},i.prototype.getAjaxUrlWithLatLng=function(t,e){return this.appendUrl(this.ajax_endpoint,"endpoint="+encodeURIComponent(this.getEndpointUrlWithLatLng(t,e)))},i.prototype.getAjaxUrlWithSearchTerm=function(t){return this.appendUrl(this.ajax_endpoint,"endpoint="+encodeURIComponent(this.getEndpointUrlWithSearchTerm(t)))},i.prototype.getAjaxUrlWithSearchTag=function(t){return this.appendUrl(this.ajax_endpoint,"endpoint="+encodeURIComponent(this.getEndpointUrlWithSearchTag(t)))},i.prototype.getEndpointUrlWithLatLng=function(t,e){return this.appendUrl(this.$element.data("params").ajax_url,"showtimes=default&view=complete&expand=2&latitude="+t+"&longitude="+e)},i.prototype.getEndpointUrlWithSearchTerm=function(t){var e="showtimes=default&view=complete&expand=2";return t&&(e+="&area="+t),this.appendUrl(this.$element.data("params").ajax_url,e)},i.prototype.getEndpointUrlWithSearchTag=function(t){return this.appendUrl(this.$element.data("params").ajax_url,"showtimes=default&view=complete&expand=2"+("default"===t?"":"&area="+t))},i.prototype.getEndpointForCountryWideSearch=function(){return this.appendUrl(this.$element.data("params").ajax_url,"showtimes=default&view=complete&region=uk")},i.prototype.appendUrl=function(t,e){return t+(t.split("?").length>1?"&":"?")+e},i.prototype.beforeViewUpdate=function(){this.$list_wrapper.addClass("js-loading-overlay")},i.prototype.afterViewUpdate=function(){this.$list_wrapper.removeClass("js-loading-overlay"),this.updateNumberOfResults()},i.prototype.updateView=function(t,e){this.beforeViewUpdate(),this.updateListView(t),this.updateMapView(e)},i.prototype.updateListView=function(i){var o=this;t.ajax(i).done(function(t){""!==t?(o.$list_wrapper.html(t),e.publish(n.broadcasts.DOM.updated)):o.$list_wrapper.html(""),o.afterViewUpdate()})},i.prototype.updateMapView=function(i){var o=this;t.getJSON(i,function(t){void 0!==t.body&&(e.publish(n.broadcasts.cinema_locator.new_results+o.map_id,t.body),o.afterViewUpdate(),o.in_list_view&&o.$element.find(".cinema_locator__toggle--map_view").show()),t.meta.areas&&1===t.meta.areas.length&&o.$search_box.val(t.meta.areas[0].display_name)})},i.prototype.updateNumberOfResults=function(){var i=t(".js-total-results:last").text(),o=this.$element.find(".cinema_locator__count"),a=o.html().replace(/(\d+)/,i||0);o.html(a),e.publish(n.broadcasts.cinema_locator.postcode_search,{term:this.$search_box.val(),total:i})},i.prototype.restoreListView=function(){t.each(this.$list_wrapper.find("li.showtimes__cinema, .load_more_widget__button"),function(){t(this).show()}),this.$load_more_widget.show()},{init:function(e){e.$o.each(function(){new i(t(this))})}}}),define("modules/autocomplete_box",["jquery","pubsub","config/config"],function(t,e,n){function i(e){this.$element=t(e),this.$input_box=this.$element.find("input"),this.$suggestions_box=this.$element.find(".autocomplete_box__results"),this.$clear_button=this.$element.find(".autocomplete_box__clear_text"),this.autocomplete_endpoint=this.$element.data("params").autocomplete_endpoint+"&prefix=",this.id=this.$element.data("params").autocomplete_id,this.active_suggestion_class_name="autocomplete_box__active_suggestion",this.bindEventHandlers(),this.updateClearButtonState()}return i.prototype.bindEventHandlers=function(){this.bindBoxContentsChangedHandler(),this.bindLostFocusEventHandler(),this.bindTypingInTheBoxHandler(),this.bindClearTextHandler()},i.prototype.bindBoxContentsChangedHandler=function(){var t=this;this.$input_box.on("input propertychange paste",function(){t.updateClearButtonState(),clearTimeout(t.request_delayer),t.request_delayer=setTimeout(function(){t.boxContentsChanged()},250)})},i.prototype.bindLostFocusEventHandler=function(){var t=this;this.$input_box.on("focusout",function(){setTimeout(function(){t.$suggestions_box.hide()},350)})},i.prototype.boxContentsChanged=function(){var i=this,o=this.$input_box.val(),a=[];o.length>2?t.ajax(this.autocomplete_endpoint+o).done(function(o){var s=o.body;i.$suggestions_box.html("").hide(),s&&s.length&&(t.each(s,function(){var o=document.createElement("li");o.appendChild(document.createTextNode(this.name)),t(o).on("click",function(){e.publish(n.broadcasts.autocomplete_box.result_clicked+i.id,this.textContent),i.$suggestions_box.hide()}),a.push(o)}),i.$suggestions_box.append(a),i.$suggestions_box.show())}):i.$suggestions_box.html("").hide()},i.prototype.bindTypingInTheBoxHandler=function(){var i=this;this.$input_box.on("keydown",function(o){if(40===o.which)i.updateHighlightedItem(!0),o.preventDefault();else if(38===o.which)i.updateHighlightedItem(!1),o.preventDefault();else if(27===o.which)i.$suggestions_box.hide(),i.$suggestions_box.find().removeClass(i.active_suggestion_class_name);else if(13===o.which){var a=t("."+i.active_suggestion_class_name);i.$suggestions_box.find(a).length>0&&(i.$input_box.val(i.$suggestions_box.find(a).text()),e.publish(n.broadcasts.autocomplete_box.result_clicked+i.id,i.$input_box.val()),i.$suggestions_box.hide(),i.$suggestions_box.find(a).removeClass(a))}})},i.prototype.bindClearTextHandler=function(){var t=this;this.$clear_button.on("click",function(){t.$input_box.val(""),t.$clear_button.hide(),t.$input_box.focus(),t.$suggestions_box.hide(),t.$element.parent("form").trigger("submit")})},i.prototype.updateHighlightedItem=function(e){var n=this;e&&0===this.$suggestions_box.find("li:active, li.autocomplete_box__active_suggestion").length?this.$suggestions_box.find("li:first").addClass(this.active_suggestion_class_name):t.each(this.$suggestions_box.find("li"),function(i,o){var a=t(o);if(a.hasClass(n.active_suggestion_class_name))return e&&a.next().length>0?(a.removeClass(n.active_suggestion_class_name),a.next().addClass(n.active_suggestion_class_name)):e||(a.removeClass(n.active_suggestion_class_name),a.prev().addClass(n.active_suggestion_class_name)),!1})},i.prototype.updateClearButtonState=function(){this.$input_box.val().length>0?this.$clear_button.show():this.$clear_button.hide()},{init:function(t){t.$o.each(function(){new i(this)})}}}),define("modules/menu",["jquery","client"],function(t,e){function n(t){this.$element=t,this.$menu_toggle=this.$element.find(".menu__toggle"),this.booking_details=t.data("params").booking_details,this.translations=t.data("params").translations,this.$menu_modal=this.getModal(),this.$menu_close_button=this.$menu_modal.find(".menu__close"),this.$menu_book_table=this.$menu_modal.find(".menu__book-table"),this.telephone_number=t.data("params").telephone_number,this.publisher_id=t.data("params").publisher_id,this.menu_url=t.data("params").menu_url.replace(/%telephone_number%/,encodeURIComponent(this.telephone_number)).replace(/%publisher_id%/,encodeURIComponent(this.publisher_id)),this.$menu_modal.appendTo(i),this.fetchMenu()}var i=t("body"),o={modal:"menu__modal",modal_open:"menu__modal--open",body_modal_open:"menu--open"};return n.prototype.getModal=function(){var e=t("."+o.modal),n="",a="",s={events:["event47"],pev2:"View menu book button",eVar95:"book now"};if(this.booking_details&&("TimeOut"===this.booking_details.name&&(n='href="'+this.booking_details.booking_map.parameters+'" target="_blank"'),a='<div class="btn-wrap xs-l0 xs-r0 xs-absolute xs-z4 xs-py3 xs-text-center"><a '+n+'class="btn menu__book-table xs-text-8 xs-px4 xs-py2 cond caps">'+this.translations.book_now+"</a></div>"),e.length)return e;var r=t('<div class="'+o.modal+'"><button class="menu__close"></button><iframe class="menu__details"></iframe>'+a+"</div>");return r.find(".menu__book-table").attr("data-track-click",JSON.stringify(s)),i.append(r),t("."+o.modal)},n.prototype.fetchMenu=function(){var n=this;e.is_touch?n.$menu_toggle.on("click",function(){window.open(n.menu_url,"_blank")}):n.$menu_toggle.on("click",function(){var t=n.$menu_modal.find("iframe");t.attr("src")!==n.menu_url&&t.attr("src",n.menu_url),n.openMenu()}),t("html").on("keyup",function(t){27===t.keyCode&&n.closeMenu()}),this.$menu_close_button.on("click",function(){n.closeMenu()}),this.booking_details&&"TimeOut"!==this.booking_details.name&&this.$menu_book_table.on("click",function(){n.closeMenu(),t(window).scrollTop(t("#booking").offset().top-t(".listing__ctas").height())}),this.$element.removeClass("hidden")},n.prototype.openMenu=function(){this.$menu_modal.addClass(o.modal_open),i.addClass(o.body_modal_open)},n.prototype.closeMenu=function(){this.$menu_modal.removeClass(o.modal_open),i.removeClass(o.body_modal_open)},{init:function(e){e.$o.each(function(){new n(t(this))})}}}),require(["modules/occurrence_grid","modules/lightbox","modules/panel","modules/panels","modules/cinema_locator","modules/autocomplete_box","modules/menu"]),define("evf",function(){}),define("modules/video_trailer",["jquery"],function(t){"use strict";function e(e){e.$o.each(function(){var e=t(this),i=e.data("params");i.$video_wrapper=e,e.data("instance",new n(i))})}function n(e){this.$video_wrapper=e.$video_wrapper,this.$video=t(e.html),this.go()}return n.prototype.go=function(){this.addListeners()},n.prototype.addListeners=function(){var e=this;this.$video_wrapper.on("click",function(n){e.loadVideo(),t(this).off(n)})},n.prototype.loadVideo=function(){this.$video.prop("src",function(t,e){var n="autoplay=1&rel=0";return e.match(".timeout.com")&&(n="init_autoplay=1"),e+(e.indexOf("?")>0?"&"+n:"?"+n)}),this.$video_wrapper.html(this.$video)},{init:e}}),define("built/modules/offers",["exports","jquery","config/config"],function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;var o=i(e),a=i(n);t.init=function(){if(a.default.pageUid.split("-").pop()){var t=(0,o.default)("#js-exclusive_offer .exclusive_offer__expander");if(t[0]){var e=(0,o.default)("#js-exclusive_offer .exclusive_offer__details");t.html(t.data("open")),t.click(function(){e.slideToggle("slow",function(){t.html()===t.data("open")?(t.html(t.data("close")),t.addClass("xs-block"),t.addClass("xs-mt3")):(t.html(t.data("open")),t.removeClass("xs-block"),t.removeClass("xs-mt3"))})})}}}});