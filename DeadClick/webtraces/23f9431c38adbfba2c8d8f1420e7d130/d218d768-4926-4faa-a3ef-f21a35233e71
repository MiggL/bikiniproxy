/**
 * Package www/ext_parsers
 * jquery.noconflict
 * lmd/export/parser
 * lmd/export/parsers/header
 * lmd/export/parsers/footer
 * lmd/export/parsers/flottant
 * lmd/export/parsers/column
 */

/* -- start module jquery.noconflict -- */
/**
 * Custom jQuery loader to handle the lib without exposing $ to global scope
 *
 * Install:
 * Add this config in require config:
 *
 * map: {
 *   "*": {
 *     "jquery": "noconflict"
 *   },
 *   "noconflict": {
 *     "jquery": "jquery"
 *   }
 * }
 *
 * For ie <= 8, jquery 1.11.0 is loaded
 * For other, overly bloated & highfaluting Web browsers, we use 2.x.x
 *
 */

var jqyreu = jqyreu || {
   v: (window.getElementsByClassName) ? 'jquery': 'jquery.fallback',
   j: window.$ || window.jQuery
};

define("jquery.noconflict",[jqyreu.v], function ($) {
   // Our own
   var localjQuery = $.noConflict(true);

   // Restore backups
   window.$ = window.jQuery = jqyreu.j;

   // Use the right stuff
   return localjQuery;
});

/* -- end module jquery.noconflict -- */
/* -- start module lmd/export/parser -- */
!function(e){"use strict";var n,t,o,a,d,r,i,s,c,l,u,m="lmd-",p=function(e){return e.console&&e.location.hash.match(/lmd-debug/)}(window);"undefined"==typeof getCookie&&(window.getCookie=function(e){var n,t,o,a=document.cookie.split(";");for(n=0;n<a.length;n++)if(t=a[n].substr(0,a[n].indexOf("=")),o=a[n].substr(a[n].indexOf("=")+1),t=t.replace(/^\s+|\s+$/g,""),t===e)return unescape(o);return null}),n=function(){if(p)try{console.log.apply(console,arguments)}catch(e){console.dir(e)}},u=function(){function e(){var n=t.pop();n&&(n(),e())}function n(){document.body?(o=!0,e()):window.setTimeout(n,100)}var t=[],o=!1;return n(),function(e){return o?e():void t.push(e)}}(),l=c="#e9edf0",u(function(){require(["jquery"],function($){l=$("body").css("background")})}),t=function(){function e(){t=t.concat(Array.prototype.slice.call(arguments))}function n(){if(t.length){var e=document.createElement("style");e.type="text/css",e.innerHTML=t.join("\n"),t=[],document.head.appendChild(e)}}var t=[];return{add:e,load:n}}(),a=function(){a=function(){};var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="//"+lmd.conf.medias.location.hostname+"/bootstrap/list-abo.css",document.head.insertBefore(e,document.head.getElementsByTagName("link")[0])},d=function(n){d=function(){},u(function(){var o="blog"===e.conf.exp&&document.body.className.indexOf("theme-lemonde")<0,a=document.body.className.indexOf("custom-background")>=0,d=!1,i=".site-abonne .lmd-header { background: #16212c url(//"+lmd.conf.medias.location.hostname+"/medias/web/img/abonnes/bg_body.png); box-shadow: 0 3px 3px #16212c; } .lmd-header .ombrelle { margin: 0 auto; } ",s="body { background-repeat: repeat; } #footer .trunk { background:none; } .footer_gratuit, .position_pub, .LemondePublicite_widget { display: none; } .site-gratuit #nav { margin: 16px auto 0; } .conteneur_haut .maj { visibility: hidden; }";document.body.classList.remove("site-gratuit"),document.body.classList.add("site-abonne"),"blog"!==e.conf.exp?("sport"===e.conf.exp?(t.add(".lmd-header #header-page { width:auto; }"),t.add(".ombrelle.sport, #ariane_az { margin:0 auto; }"),t.add("#nav { border-top-style:solid; border-top-width:3px; }"),t.add("@media only screen and (min-width: 1580px){ .conteneur_haut { width: 1000px; }}"),t.add(".global.services.promo { width:1000px; }")):(t.add(i),e.conf.col||t.add("@media only screen and (min-width: 1250px)","{ .conteneur_haut { width: 1000px; } }")),t.add(s),e.conf.bg||(document.body.style.background=c)):"blog"===e.conf.exp&&(t.add(".ombrelle.partenariats { display:none; }"),o?document.body.style.backgroundColor=c:a?(t.add(i,s),d=document.getElementById("custom-background-css").innerHTML.match(/url\(.([^\)']+).\)/),document.body.style.backgroundImage=d?d[1]:"none"):(t.add(i,s),t.add("#header_lemonde { width:100%; margin-bottom:20px; }")),r("blog")),t.load(),n()})},r=function(e){s=document.createElement("div"),s.id="colonnette",s.className="colonnette","blog"===e&&(t.add("#header-page { width:100%; }","@media only screen and (min-width: 1250px) {",".lmd-header #nav, .lmd-header .ombrelle, #header-page .contenu, .lmd-header #nav-section {","width:1220px; max-width:1220px;","}","#lemonde-journal-elec { display:none; }","#colonnette { z-index: 1; }","}"),t.add(".position_pub, .adpos, .LemondePublicite_widget { display: none !important; }"),t.add(".lmd-header { z-index: 2; } .lmd-header #header-page { z-index: 15; }"),t.add("@media only screen and (max-width: 1249px) { #colonnette { display: none; } }")),t.load()},i=function(){var n,t,o;t=window.setInterval(function(){document.getElementById("footer")&&document.getElementById("navigation-generale")&&(t=window.clearInterval(t),n=document.getElementsByClassName("super_global")[0],n=n||document.getElementById("layout"),n=n||document.querySelector("body > .container"),n&&s&&(s.innerHTML=e.templates.colonnette.html,n.appendChild(s)),o=document.querySelector("#navigation-generale .abonnes"),o&&o.remove())},100)},o=function(t,o){n("Step: user_loggedin");var r,s,c,l=o.indexOf("; alm=")>=0;return l?(n("Step: user_loggedin: user logged"),e.user={},!(window.localStorage&&window.localStorage.user||"undefined"==typeof getCookie)&&(n("Step: user_loggedin: in first if"),r=JSON.parse(getCookie("info_user_web")),r&&r.jelec&&r.jelec.droit)?(n("Step: user_loggedin: in first if inner if"),s=!0,e.templates.header=e.templates.header_abo,e.templates.footer_abo&&(e.templates.footer=e.templates.footer_abo),a(),d(i),l):window.localStorage&&window.localStorage.user&&(n("Step: user_loggedin: in second if"),c=JSON.parse(window.localStorage.user).data,e.user=c.user||c,e.user&&e.user.type&&e.user.abonne&&!s)?(n("Step: user_loggedin: in second if inner if"),e.templates.header=e.templates.header_abo,e.templates.footer_abo&&(e.templates.footer=e.templates.footer_abo),a(),d(i),l):(require(["lmd/core/auth"],function(n){n.loadUser().done(function(){e.user=n.user,a(),d(i)})}),l)):(n("Step: user_loggedin: not logged"),u(function(){document.body.classList.add("site-gratuit")}),!1)}(window,document.cookie),n("user_loggedin?",o);var g=function(t){this.data=t,this.log=n,this.prerender=function(){},this.render=function(n){var t,o,a=n||"";return""===a||void 0===this.data.conteneur?void this.log("Render: Pas de contenu a afficher.","this: ",this,"param `tpl`: ",n):(this.append(a),this.gererPub&&this.gererPub(),void(e.templates.elements&&((t=e.templates.elements[this.data.nom+"_prepended"])&&this.prepend(t),(o=e.templates.elements[this.data.nom+"_appended"])&&this.append(o))))},this.postrender=function(){},this.parse=function(){var n=this;require(["jquery"],function($){if(e.templates[n.data.nom]||n.data.nom&&"column"===n.data.nom){if(n.data.conteneur=$("."+m+n.data.nom).get(0),"undefined"==typeof n.data.conteneur||n.data.conteneur.length)return void n.log("Pas de conteneur pour "+n.data.nom);n.prerender(),n.render(e.templates[n.data.nom].html),n.postrender()}})},this.append=function(e){var n=this;n.needs_script_execution?require(["jquery"],function($){n.data.conteneur.innerHTML=n.data.conteneur.innerHTML.replace(/OAS_AD\(\)/g,""),$(n.data.conteneur).html(n.data.conteneur.innerHTML+e)}):n.data.conteneur.innerHTML+=e},this.prepend=function(e){var n=this.data.conteneur.innerHTML;n=e+n},this.doWith=function(e,n){var t,o=0,a=function(e){var t=document.querySelector(e);return!!t&&(n(t),!0)};t=window.setInterval(function(){(a(e)||o>30)&&window.clearInterval(t),++o},250)},this.checkScriptTag=function(){var e,n,t;if(void 0!==this.data.conteneur)for(e=this.data.conteneur.getElementsByTagName("script"),e=Array.prototype.slice.call(e);n=e.shift();)t=document.createElement("script"),t.setAttribute("type","text/javascript"),n.src?t.src=n.src:t.innerHTML=n.innerHTML,n.parentNode.appendChild(t),n.parentNode.removeChild(n)}};e.parser={getInstance:function(e){return e&&"object"==typeof e?new g(e):(n("Des parametres essentiels manquent a l’instanciation du parser, parametres passes:\n"+e),!1)},customStyles:t}}(LMD_EXPORT);
/* -- end module lmd/export/parser -- */
/* -- start module lmd/export/parsers/header -- */
!function(e){"use strict";var t,n=e.header=e.parser.getInstance({nom:"header"});n.data.conteneur=document.querySelectorAll(".lmd-header")[0],n.user={},t=function(t){function n(t,a){var m;if(a=a||!1,i.ariane.push({id:t.id,titre:t.titre,link:t.link,actif:!1,z:null}),l=e.navtree.link===t.link?"/":t.link,r=a?"/":window.location.pathname,r===l)return d=!0,i.ariane[i.ariane.length-1].actif=!0,i.currentId=t.id,"undefined"!=typeof t.childs&&(i.sub=t.childs),!0;if(!("undefined"==typeof t.childs||t.childs.length<=0))for(m=0;m<t.childs.length;m++){if(n(t.childs[m])===!0)return!0;i.ariane.pop()}}var a,r,l,d=!1,i={ariane:[],sub:[],currentId:null};n(t),d||(i={ariane:[],sub:[],currentId:null},n(t,!0));var m=i.ariane.length;for(a=0;a<i.ariane.length;a++)i.ariane[a].z=m,m--;return i},n.prerender=function(){e.templates.elements=e.templates.elements||{},e.templates.elements.header_appended="",e.conf.wrapHeaderContent&&(e.templates.elements.header_appended+='<div style="text-align:center;">',e.templates.elements.header_appended+=n.data.conteneur.innerHTML,e.templates.elements.header_appended+="</div>",n.data.conteneur.innerHTML=""),e.templates.elements.header_appended+=e.templates.barre_menu?e.templates.barre_menu.html||"":"",e.templates.elements.header_appended+=e.templates.barre_titre?e.templates.barre_titre.html||"":"","undefined"==typeof e.navtree&&(e.templates.elements.header_appended+=e.templates.sous_nav?e.templates.sous_nav.html||"":"")},n.postrender=function(){if(!require)return n.log("Require n’a pas ete charge. Pas de post-traitement pour le header."),!1;var a,r;"undefined"!=typeof e.navtree?require(["lmd/core/auth","lmd/module/header","hoganpower!/partials/general/header/nav.html.mu@www","jquery","lmd/ui/liste-az"],function(n,a,r,$,l){var d=d||{};$(".lmd-header").append(r.render(t(e.navtree))),e.conf.header&&e.conf.header.theme&&document.getElementById("nav")&&(document.getElementById("nav").className+=" "+e.conf.header.theme),e.conf.general.theme_css&&(document.body.className=document.body.className+" "+e.conf.general.theme_css),l.init({context:"#ariane-context-"+d.currentId})}):require(["lmd/core/auth","lmd/module/header"],function(t,n){e.conf.header&&e.conf.header.theme&&document.getElementById("nav")&&(document.getElementById("nav").className+=" "+e.conf.header.theme),e&&e.templates&&e.templates.sous_nav&&require(["lmd/ui/liste-az"],function(e){e.init()}),e.conf.general.theme_css&&(document.body.className=document.body.className+" "+e.conf.general.theme_css)}),"chef-simon"===e.conf.exp&&(n.data.conteneur.className+=" style",(a=document.getElementById("layout"))&&(r=document.createElement("div"),r.style.clear="both",a.appendChild(r))),"blog"===e.conf.exp&&(lmd.conf.fsw.ownpage&&require(["lmd/core/metrics/ownpage"],function(e){e.init()}),require(["lmd/core/dfp"]),require(["jquery"],function($){n.data.conteneur.getElementsByTagName("h1").length&&(n.data.conteneur.getElementsByTagName("h1")[0].style.display="none"),$("#header_lemonde").prependTo("body"),$(window).on("resize",function(){window.resizeJelec&&resizeJelec()})})),"formation"===e.conf.exp&&(e.parser.customStyles.add("@media (max-width: 1023px) and (min-width: 768px){ div.ombrelle.partenariats .tt_rubrique_ombrelle a { font-size:42px; line-height: 8rem; }  div.ombrelle.partenariats img { height:28px; }}"),e.parser.customStyles.add("@media (max-width: 767px){ div.ombrelle.partenariats .tt_rubrique_ombrelle a { font-size:20px; line-height: 3.9rem; }  div.ombrelle.partenariats img { height:18px; }}")),function(){var t=document.querySelector(".ombrelle.partenariats");"french"===e.conf.exp&&(t.getElementsByTagName("span")[1].innerHTML="with"),"french"!==e.conf.exp&&"francais"!==e.conf.exp||(t.getElementsByTagName("img")[0].style.marginBottom="-11px")}(),e.parser.customStyles.load()}}(LMD_EXPORT);
/* -- end module lmd/export/parsers/header -- */
/* -- start module lmd/export/parsers/footer -- */
!function(e){"use strict";var t=e.footer=e.parser.getInstance({nom:"footer"});t.needs_script_execution=!0,t.prerender=function(){e.user&&e.user.abonne&&e.templates.footer_abo&&(e.templates.footer=e.templates.footer_abo)},t.postrender=function(){this.data.conteneur.id="footer"}}(LMD_EXPORT);
/* -- end module lmd/export/parsers/footer -- */
/* -- start module lmd/export/parsers/flottant -- */
!function(t){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var e=t.flottant=t.parser.getInstance({nom:"flottant"});e.parse=function(){var t=document.getElementsByTagName("div");return t=t[t.length-1],t.className&&t.className.match(/flottant/)&&(e.data.conteneur=t),e.data.conteneur&&""===e.data.conteneur.innerHTML.trim()?(e.render(),void e.postrender()):(e.log("Conteneur flottant absent ou non vide."),!1)},e.render=function(){var n=!1;return e.data.conteneur&&""===e.data.conteneur.innerHTML.trim()?(e.data.conteneur.getAttribute("data-name")&&""!==e.data.conteneur.getAttribute("data-name")&&(n=e.data.conteneur.getAttribute("data-name")),e.data.conteneur.className+=" col_droite",void(n&&t.templates[n]&&t.templates[n].html?e.data.conteneur.innerHTML=t.templates[n].html:t.conf.blocs.flottant&&(n=t.conf.blocs.flottant.shift(),n&&t.templates[n]&&t.templates[n].html&&(e.data.conteneur.innerHTML=t.templates[n].html)))):(e.log("Conteneur flottant absent ou non vide."),!1)},e.postrender=function(){e.checkScriptTag()}}(LMD_EXPORT);
/* -- end module lmd/export/parsers/flottant -- */
/* -- start module lmd/export/parsers/column -- */
!function(e){"use strict";var n=e.column=e.parser.getInstance({nom:"column"});n.needs_script_execution=!0,n.prerender=function(){var t,o,c,s,l,a,r=["<scr",'ipt type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js"></scr',"ipt>"];if(e.templates.column={html:""},!e.conf.column||!e.conf.column.length)return n.log("Pas d'element de colonne"),void(e.conf.column=[]);for(t=0,o=e.conf.column.length;t<o;t++)if(e.templates[e.conf.column[t]])if(l=e.conf.column[t],a=e.templates[l].html,"ggadsense"!==l)e.templates.column.html+=a;else if("ggadsense"===l)for(document.write(a),c=0,s=r.length;c<s;c++)document.write(r[c])},n.postrender=function(){n.data.conteneur&&(n.data.conteneur.className+=" conteneur_18")}}(LMD_EXPORT);
/* -- end module lmd/export/parsers/column -- */