/*
 * Opentag, a tag deployment platform
 * Copyright 2011-2016, Qubit Group
 * http://opentag.qubitproducts.com
 */
(function(){var E=function(){return this}();E.qubit=E.qubit||{};E.qubit.SYSTEM_DEFAULTS={pingServerUrl:"opentag-stats.qubit.com/ping",tellLoadTimesProbability:1}})();(function(){var E={"id":"35657"};try{var f=function(){return this}();if(!f.qubit)f.qubit={};var F=f.qubit;if(!F.cs)F.cs={};F.CLIENT_CONFIG=E;var O=E.id||"efault";O="d"+O;if(!F.cs[O])F.cs[O]={};F.cs[O].ClientConfig=E;if(F.SYSTEM_DEFAULTS)F.cs[O].SystemDefaults=F.SYSTEM_DEFAULTS}catch(I){}})();
(function(){(function(){function E(){return ia.uv}function f(){var k=E();if(!k||!k.emit)return false;if(!fa){fa=true;for(var a=0;a<ba.length;a++){var y=ba[a];if(y.on)k.on.apply(k,y.on);else if(y.emit)k.emit.apply(k,y.emit)}k.on(/.*/,function(q){var x=q.meta.type;var e=Z[x];if(!e)Z[x]={current:q,history:[q]};else{e.current=q;e.history.push(q)}}).replay();ca=true}return true}(function(){if(!Function.prototype.bind)Function.prototype.bind=function(k){if(typeof this!=="function")throw new TypeError("Function.prototype.bind - what is trying "+
"to be bound is not callable");var a=Array.prototype.slice.call(arguments,1);var y=this;var q=function(){};var x=function(){return y.apply(this instanceof q?this:k,a.concat(Array.prototype.slice.call(arguments)))};q.prototype=this.prototype;x.prototype=new q;return x}})();var F={__anonymous__:true};var O=null;try{O=(false||eval)("this")}catch(k){}if(!O)try{var I=function(){return this};O=I()}catch(k){}F=O;var r=F.qubit||{};if(!F.qubit)F.qubit=r;var H="3.3.0";if(r.VERSION&&r.VERSION!==H)try{console.warn("There is already 'qubit.VERSION' set to: "+
r.VERSION)}catch(k){}r.VERSION=H;try{if(typeof module==="object")module.exports=F}catch(k){}var K=function(){};var R;(function(){function k(){}function a(x,e,p,c,u){var v=x.split(".");var w=k.NAMESPACE_BASE||F;var D=null;var g=null;var z;if(u)w=O;var B=w;w=p||w;for(z=0;z<v.length-1;z+=1){D=w;g=v[z];w[g]=w[g]||{};w=w[g]}D=w;g=v[v.length-1];if(O.TAGSDK_NS_OVERRIDE)c=false;if(O.TAGSDK_NS_FORCED_OVERRIDE_OPTION!==undefined)c=!O.TAGSDK_NS_FORCED_OVERRIDE_OPTION;if(e!==undefined){if(D[g]===undefined||!c)D[g]=
e}else D[g]=D[g]||{};if(e){e.CLASSPATH=v.join(".");v.splice(v.length-1,1);e.PACKAGE_NAME=v.join(".")}return{root:B,object:D,instance:D[g]}}k.global=function(){return O};k.STANDARD_CS_NS="qubit.cs";k.clientSpaceClasspath=function(){if(window.qubit.CLIENT_CONFIG)return"qubit.cs.d"+window.qubit.CLIENT_CONFIG.id;return k.STANDARD_CS_NS};k.globalNamespace=function(x,e,p,c){return a(x,e,p,c,true)};k.namespace=function(x,e,p,c){return a(x,e,p,c,false)};k.clientNamespace=function(x,e,p,c){return k.namespace(k.clientSpaceClasspath()+
"."+x,e,p,c)};k.clazz=function(x,e,p,c,u){k.namespace(x,e,c,true);if(typeof p==="function"){e.SUPER=p;e.superclass=p;e.prototype=new p(u);e.prototype.SUPER=p;e.prototype.CLASS=e}var v=x.split(".");if(e.prototype){e.prototype.CLASSPATH=v.join(".");e.prototype.CLASS_NAME=v[v.length-1];v.splice(v.length-1,1);e.prototype.PACKAGE_NAME=v.join(".")}else{e.CLASSPATH=v.join(".");e.STATIC_NAME=v[v.length-1];v.splice(v.length-1,1);e.PACKAGE_NAME=v.join(".")}return e};k.clazz("qubit.Define",k);k.clientClazz=
function(x,e,p,c,u){return k.clazz(k.clientSpaceClasspath()+"."+x,e,p,c,u)};k.STANDARD_VS_NS="qubit.vs";k.vendorsSpaceClasspath=function(x){var e=r.VENDOR_SPACE_CP;var p=e===undefined||e===null?k.STANDARD_VS_NS:e;if(x)if(p)return p+"."+x;else return x;return p};var y=k.vendorsSpaceClasspath();var q;if(y)q=k.namespace(y,{},null,true).instance;else q=k.global();k.getVendorSpace=function(){return q};k.vendorNamespace=function(x,e,p,c){x=k.vendorsSpaceClasspath(x);return k.namespace(x,e,p,c)};k.vendorClazz=
function(x,e,p,c,u){x=k.vendorsSpaceClasspath(x);return k.clazz(x,e,p,c,u)}})();(function(){function k(x){}var a="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"ABCDEFGHIJKLMNOPQRSTUVWXYZ"+"*!-#$\x26+()@"+"'%./:\x3c\x3e?["+'"]^_`{|}~'+"\\"+";\x3d";var y={};for(var q=0;q<a.length;q++)y[a.charAt(q)]=q;r.Define.clazz("qubit.Cookie",k);k.cookieAlphabet=a;k.cookieAlphabetMap=y;k.decode=function(x){return unescape(x)};k.encode=function(x){return escape(x)};k.set=function(x,e,p,c,u){var v;if(p){var w=new Date;
w.setTime(w.getTime()+p*24*60*60*1E3);v="; expires\x3d"+w.toGMTString()}else v="";if(!u){x=k.encode(x);e=k.encode(e)}var D=x+"\x3d"+e+v+"; path\x3d/;";if(c)D+=" domain\x3d"+c;document.cookie=D};k.get=function(x,e){var p=x+"\x3d";var c=document.cookie.split(";");for(var u=0;u<c.length;u++){for(var v=c[u];v.charAt(0)===" ";)v=v.substring(1,v.length);if(v.indexOf(p)===0){var w=v.substring(p.length,v.length);if(!e)w=k.decode(w);return w}}return null};k.getAllForName=function(x,e){if(!x)return[];var p=
x+"\x3d";var c=document.cookie.split(";");var u=[];for(var v=0;v<c.length;v++){for(var w=c[v];w.charAt(0)===" ";)w=w.substring(1,w.length);if(w.indexOf(p)===0){var D=w.substring(p.length,w.length);if(e)D=k.decode(D);u.push(D)}}return u};k.getAll=function(x){var e=document.cookie.split(";");var p=[];for(var c=0;c<e.length;c++){for(var u=e[c];u.charAt(0)===" ";)u=u.substring(1,u.length);var v=u.substring(0,u.indexOf("\x3d"));var w=u.substring(v.length+1,u.length);if(x)w=k.decode(w);p.push([v,w])}return p};
k.rm=function(x,e){k.set(x,"",-1,e)}})();(function(){function k(g,z,B){this.collectLogs=!!k.isCollecting();this.collectLocally=B;this.collection=[];this.getPrefix=function(){var C="";if(z){if(typeof z==="function")C=z(this.ref);else if(z.CLASS_NAME)C=z.CLASS_NAME;else if(z.constructor&&z.constructor.name)C=z.constructor.name;if(C)C+=" -\x3e "}return(g||"")+C}}function a(g,z,B,C,m,l,t,d){var b;var h=x>=d;if(k.getCollectLevel()>=0||h){if(m)b=[C,t,B];else b=[z+g.getPrefix()+C,l,B];b[3]=d;g.collect(b,
d);if(h)g.printMessage.apply(g,b)}}var y=r.Define;var q=null;y.clazz("qubit.opentag.Log",k);k.LEVEL_FINEST=4;k.LEVEL_FINE=3;k.LEVEL_INFO=2;k.LEVEL_WARN=1;k.LEVEL_ERROR=0;k.LEVEL_NONE=-1;k.MAX_LOG_LEN=1E4;k.prototype.MAX_LOG_LEN=-1;var x=k.LEVEL_NONE;var e=k.LEVEL_NONE;var p=true;k.setLevelFromCookie=function(){var g=r.Cookie.get("qubit.opentag.Log.LEVEL");if(g){g=+g;if(!isNaN(g))if(g>0){var z=k.LEVEL_FINE;k.setCollectLevel(g>z?g:z);k.setLevel(+g)}}};k.setCollecting=function(g){p=!!g};k.isCollecting=
function(){return p||k.COLLECT};k.setLevel=function(g){x=+g};k.setCollectAndLevel=function(g){k.setLevel(g);k.setCollectLevel(g)};k.getLevel=function(){return x};k.setCollectLevel=function(g){e=+g};k.getCollectLevel=function(){return e};var c=[];k.logsCollection=c;k.rePrintAll=function(g,z,B,C){var m=x;if(g!==undefined)x=g;try{if(k.isCollecting()){try{if(!B)q.clear()}catch(b){}var l=C||k.logsCollection;var t=0;for(var d=0;d<l.length;d++)(function(b){var h=l[b];var n=h[3];if(n!==undefined&&x>=n){t++;
if(!z)k.print.apply(k,h);else r.opentag.Timed.setTimeout(function(){if(g!==undefined)x=g;try{k.print.apply(k,h)}finally{x=m}},t*z)}})(d)}}catch(b){}finally{x=m}};var u=y.global();var v=!!(u.webkitMediaStream||u.webkitURL||u.mozContact);k.isStyleSupported=function(){return v};var w={};k.setConsole=function(g){q=g||w;return q};k.delayPrint=-1;var D=(new Date).valueOf();k.prototype.printMessage=function(g,z,B,C){if(k.delayPrint>0){var m=k.delayPrint;var l=D-(new Date).valueOf();if(l>0)m+=l;try{r.opentag.Timed.setTimeout(function(){this.print(g,
z,B,C)}.bind(this),m)}catch(t){setTimeout(function(){this.print(g,z,B,C)}.bind(this),m)}D=(new Date).valueOf()+m}else this.print(g,z,B,C)};k.prototype.print=function(g,z,B,C){k.print(g,z,B,C)};k.print=function(g,z,B,C){if(C!==undefined&&x<C)return;try{if(q&&q.log)if(z&&k.isStyleSupported())if(B&&q[B])q[B]("%c"+g,z);else q.log("%c"+g,z);else if(B&&q[B])q[B](g);else q.log(g)}catch(m){}};k.prototype.collect=function(g,z){if(z===undefined)z=k.getCollectLevel();var B=false;var C=this.collectLogs&&k.isCollecting()&&
k.getCollectLevel()>=+z;if(C){c.push(g);B=true}if(this.collectLocally&&C){this.collection.push(g);B=true}if(k.MAX_LOG_LEN>0)if(c.length>k.MAX_LOG_LEN)c.splice(0,c.length-k.MAX_LOG_LEN);if(k.MAX_LOG_LEN>0||this.MAX_LOG_LEN>0){var m=k.MAX_LOG_LEN;if(this.MAX_LOG_LEN>0)m=this.MAX_LOG_LEN;if(this.collection.length>m)this.collection.splice(0,this.collection.length-m)}return B?g:null};k.clearAllLogs=function(){try{q.clear()}catch(g){}finally{c.splice(0,c.length)}};k.getCollectedByLevel=function(g,z){z=
z||c;var B=[];for(var C=0;C<z.length;C++){var m=z[C];var l=m[0];var t=l[4];if(t===g)B.push(m)}return B};k.prototype.rePrint=function(g,z,B){k.rePrintAll(g,z,!B,this.collection)};k.prototype.FINEST=function(g,z){a(this,"FINEST: ",false,g,z,"color:#CCCCCC;",false,k.LEVEL_FINEST)};k.prototype.FINE=function(g,z){a(this,"FINE: ",false,g,z,"color:#999999;",false,k.LEVEL_FINE)};k.prototype.INFO=function(g,z,B){a(this,"INFO: ","info",g,z,B,B,k.LEVEL_INFO)};k.prototype.WARN=function(g,z){a(this,"WARN: ","warn",
g,z,"color:#26A110;",false,k.LEVEL_WARN)};k.prototype.ERROR=function(g,z){a(this,"ERROR: ","error",g,z,"color:red;",false,k.LEVEL_ERROR)};k.setConsole(y.global().console);k.setLevelFromCookie()})();(function(){function k(b){return u.addToArrayIfNotExist(u.ANON_VARS,b)}function a(b){return b.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function y(b,h){var n=w.length;for(var A=0;A<n;A++)if(b===w[A][0])return w[A][1];w[w.length]=[b,h];return false}function q(b,h,n,A,G){var J=false;var L=false;var M=
false;var Q=false;var S=false;var X=false;var U=false;if(h){S=!!h.all;J=S||h.nodes;Q=S||h.win;L=S;U=!!h.emptyForMaxDeep;M=h.noFunctions&&!S;if(h.noOwn!==undefined)L=!!h.noOwn;if(h.noFunctions!==undefined)M=!!h.noFunctions;if(h.win!==undefined)Q=!!h.win;if(h.nodes!==undefined)J=!!h.nodes;X=!!h.copyReference}if(n!==undefined&&!n){if(U)return;return b}else if(n!==undefined)n--;if(!b||!(b instanceof Object))return b;if(!J){try{if(b instanceof Node)return b}catch(ga){if(b instanceof ActiveXObject&&b.nodeType!==
undefined)return b}if(b===document)return b}if(!Q)if(b===v)return b;var T=b instanceof Array?[]:{};if(b instanceof Date)T=new Date(b);if(!M&&b instanceof Function){var Y=String(b).replace(/\s+/g,"");if(Y.indexOf("{[nativecode]}")+14===Y.length)T=function(){return b.apply(G||this,arguments)};else T=function(){return b.apply(this,arguments)}}if(A===undefined){w=[];A=0}var aa=y(b,T);if(aa)return aa;var V;if(T instanceof Array)for(V=0;V<b.length;V++)if(b[V]===b[V])T[T.length]=q(b[V],h,n,A+1,b);else T[T.length]=
b[V];else{V=0;for(var W in b){if(L||b.hasOwnProperty(W))if(b[W]===b[W])T[W]=q(b[W],h,n,A+1,b);else T[W]=b[W];V++}}if(h.proto)T.prototype=q(b.prototype,h,n,A+1,b);if(X)T.___copy_ref=b;return T}function x(b,h){for(var n=0;n<h&&n<D.length;n++)if(b===D[n])return true;return false}function e(b,h,n,A,G,J,L,M){n=n||{};if(n.hasOwn===undefined)n.hasOwn=true;if(n.objectsOnly&&!(b instanceof Object))return;if(M!==undefined&&!M)return;else if(M!==undefined)M--;if(!n||!n.nodes)try{if(b instanceof Node)return}catch(Y){if(b instanceof
ActiveXObject&&b.nodeType!==undefined)return}if(b===v)return;if(A===undefined){D=[];A=0}if(x(b,A))return;D[A]=b;G=G||b;if(G&&J&&G[J]!==G[J])return;var Q=h(b,G,J,L);if(Q)return;var S=0;var X="";for(var U in b){if(!n.hasOwn||b.hasOwnProperty(U))try{var T=b[U];if(n.track)X=L?L+"."+U:U;e(T,h,n,A+1,G,U,X,M)}catch(Y){}S++}}var p=r.Define;var c=r.Cookie;var u=function(){};var v=p.global();p.clazz("qubit.opentag.Utils",u);u.global=p.global;u.namespace=p.namespace;u.clazz=p.clazz;u.getObjectUsingPath=function(b,
h){h=h||v;var n=b.split(".");for(var A=0;A<n.length;A++)if(h&&n[A])h=h[n[A]];return h};u.getParentObject=function(b){var h=b.lastIndexOf(".");var n=b.substring(0,h);return u.getObjectUsingPath(n)};u.variableExists=function(b){return b!==undefined&&b!==null};u.ANON_VARS=[];u.getAnonymousAcessor=function(b){var h=u.indexInArray(b,u.ANON_VARS);if(h===-1)h=k(b);return"qubit.opentag.Utils.ANON_VARS["+h+"]"};u.replaceAll=function(b,h,n){return b.replace(new RegExp(a(h),"g"),n)};u.secureText=function(b){if(typeof b!==
"string")b+="";b=b.replace(/</g,"\x26lt;");b=b.replace(/>/g,"\x26gt;");return b};u.getUrl=function(){return document.location.href};u.getQueryParam=function(b){var h;var n;var A;var G;var J;var L;var M;G=u.getUrl();if(G.indexOf("?")>0){L=G.substring(G.indexOf("?")+1).split("\x26");for(h=0,n=L.length;h<n;h+=1){J=L[h];if(J.indexOf("\x3d")>0){M=J.split("\x3d");if(M.length===2&&M[0]===b)return M[1]}}}return null};u.getElementValue=function(b){var h=document.getElementById(b);if(h)return h.textContent||
h.innerText;return null};var w=[];u.objectCopy=function(b,h){h=h||{};var n=q(b,h,h.maxDeep);w=[];return n};var D=[];u.traverse=function(b,h,n){var A;e(b,h,n,A,A,A,A,n.maxDeep)};u.prepareQuotedString=function(b){if(typeof b==="string")return'"'+b.replace(/\"/g,'\\"')+'"';else return b};u.expressionToFunction=function(b,h){h=h||"";var n="function ("+h+") {"+b+"}";return u.gevalAndReturn(n).result};u.defineWrappedClass=function(b,h,n,A,G){var J=function(){if(G)return G.apply(this,arguments);else return h.apply(this,
arguments)};p.clazz(b,J,h,A);for(var L in n)if(n.hasOwnProperty(L)&&L!=="CONSTRUCTOR")J.prototype[L]=n[L];return J};u.copyAandAddFromB=function(b,h,n){n=n||8;var A=this.objectCopy(b,{maxDeep:n});for(var G in h)if(h.hasOwnProperty(G))A[G]=h[G];return A};u.keys=function(b){if(b instanceof Object){if(Object.keys)return Object.keys(b);var h=[];for(var n in b)if(b.hasOwnProperty(n))h[h.length]=n;return h}else throw"keys() called on non-object!";};u.getSrcElement=function(b){var h;b=b||window.event;if(b.srcElement)h=
b.srcElement;else if(b.target)h=b.target;return h};u.addToArrayIfNotExist=function(b,h,n){var A=0;for(var G=false;A<b.length;A+=1){var J=n&&n(b[A],h);if(J||b[A]===h){G=true;break}}if(!G){b[b.length]=h;A=-1}return A};u.indexInArray=function(b,h){for(var n=0;n<b.length;n++)if(b[n]===h)return n;return-1};u.existsInArray=function(b,h){for(var n=0;n<b.length;n++)if(b[n]===h)return true;return false};u.removeFromArray=function(b,h){var n=0;for(var A=0;n<b.length;)if(b[n]===h){b.splice(n,1);A++}else n++;
return A};u.addClass=function(b,h){var n;try{b.classList.add(h)}catch(A){if(b.className===null){b.className=h;return}n=b.className.split(" ");u.addToArrayIfNotExist(n,h);b.className=n.join(" ")}};u.removeClass=function(b,h){var n;try{b.classList.remove(h)}catch(A){if(b.className===null){b.className="";return}n=b.className.split(" ");u.removeFromArray(n,h);b.className=n.join(" ")}};var g="try{this.qubitopentagutilsgevalandreturn__var_test__\x3d(";var z=");}catch(ex){"+"this.qubitopentagutilsgevalandreturn__var_test__error \x3d ex;}";
u.gevalAndReturn=function(b){var h=O;h.qubitopentagutilsgevalandreturn__var_test__=undefined;h.qubitopentagutilsgevalandreturn__var_test__error=undefined;b=g+b+z;u.geval(b);var n=h.qubitopentagutilsgevalandreturn__var_test__;var A=h.qubitopentagutilsgevalandreturn__var_test__error;try{h.qubitopentagutilsgevalandreturn__var_test__=R;h.qubitopentagutilsgevalandreturn__var_test__error=R;delete h.qubitopentagutilsgevalandreturn__var_test__;delete h.qubitopentagutilsgevalandreturn__var_test__error}catch(G){}return{result:n,
error:A}};u.trim=function(b){try{return String(b).trim()}catch(h){return String(b).replace(/^\s+|\s+$/g,"")}};u.setIfUnset=function(b,h){if(b&&h)for(var n in h)if(h.hasOwnProperty(n)&&!b.hasOwnProperty(n))b[n]=h[n]};var B=Math.floor(Math.random()*1E12);u.UUID=function(){if(!v.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__)v.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__=(new Date).valueOf();return B+"."+ ++v.__qubit_uuid_cnt_43567bdfhgtb4vt5yeh978__};u.overrideFromLeftToRight=function(b,h){if(b&&h)for(var n in h)if(h.hasOwnProperty(n))b[n]=
h[n];return b};u.geval=function(b){if(window&&window.execScript)return window.execScript(b===""?" ":b);else return function(){return v["eval"].call(v,b)}()};var C=[];u.bodyAvailable=function(b){var h=!!document.body;if(h){if(C){for(var n=0;n<C.length;n++)try{C[n]()}catch(A){}C=false}b()}else C.push(b)};u.rmCookiesMatching=function(b){var h=c.getAll();for(var n=0;n<h.length;n++){var A=h[n][0];if(A.match(b)===0)c.rm(A)}};var m=[];var l=false;var t=false;u.bodyReady=function(b){if(t){if(b)b();return true}l=
l||!!(document.body&&document.readyState==="complete");if(l){t=true;for(var h=0;h<m.length;h++)try{m[h]()}catch(n){}if(b)b()}else if(b)m.push(b);return l};var d=v.onload;v.onload=function(b){try{u.bodyReady()}catch(n){try{window.qubit.opentag.Utils.bodyReady()}catch(A){}}var h=false;try{h=d}catch(n){}if(h)h(b)};(function(){var b;var h=false;var n=1;var A;var G;var J;var L;G=function(Q){var S;if(Q===true)n-=1;if(!n||Q!==true&&!h){if(!document.body)return setTimeout(G,1);h=true;if(Q!==true){n-=1;if(n>
0)return}for(;A.length>0;){S=A.shift();S()}}};L=function(){if(h)return;try{document.documentElement.doScroll("left")}catch(Q){setTimeout(L,1);return}G()};J=function(){if(A)return;A=[];if(document.readyState==="complete")return setTimeout(G,1);if(document.addEventListener){document.addEventListener("DOMContentLoaded",b,false);window.addEventListener("load",G,false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",b);window.attachEvent("onload",G);var Q=false;try{Q=window.frameElement===
null||window.frameElement===undefined}catch(S){}if(document.documentElement.doScroll&&Q)L()}};var M=function(Q){J();if(h)setTimeout(Q,1);else A.push(Q)};if(document.addEventListener)b=function(){document.removeEventListener("DOMContentLoaded",b,false);G()};else if(document.attachEvent)b=function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",b);G()}};M(function(){l=true;u.bodyReady()})})()})();var P={};(function(){function k(w){return w<10?"0"+w:w}function a(w){e.lastIndex=
0;return e.test(w)?'"'+w.replace(e,function(D){var g=u[D];return typeof g==="string"?g:"\\u"+("0000"+D.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+w+'"'}function y(w){return isFinite(w.valueOf())?w.getUTCFullYear()+"-"+k(w.getUTCMonth()+1)+"-"+k(w.getUTCDate())+"T"+k(w.getUTCHours())+":"+k(w.getUTCMinutes())+":"+k(w.getUTCSeconds())+"Z":null}function q(w,D){var g;var z;var B;var C;var m=p;var l;var t=D[w];if(t instanceof Date)t=y(t);else if(t instanceof String||t instanceof Number||t instanceof
Boolean)t=t.valueOf();if(typeof v==="function")t=v.call(D,w,t);switch(typeof t){case "string":return a(t);case "number":return isFinite(t)?String(t):"null";case "boolean":case "null":return String(t);case "object":if(!t)return"null";p+=c;l=[];if(Object.prototype.toString.apply(t)==="[object Array]"){C=t.length;for(g=0;g<C;g+=1)try{l[g]=q(g,t)||"null"}catch(d){l[g]='{"stack_exceeded": null}'}B=l.length===0?"[]":p?"[\n"+p+l.join(",\n"+p)+"\n"+m+"]":"["+l.join(",")+"]";p=m;return B}if(v&&typeof v===
"object"){C=v.length;for(g=0;g<C;g+=1)if(typeof v[g]==="string"){z=v[g];try{B=q(z,t)}catch(d){B='{"stack_exceeded": null}'}if(B)l.push(a(z)+(p?": ":":")+B)}}else for(z in t)if(Object.prototype.hasOwnProperty.call(t,z)){try{B=q(z,t)}catch(d){B='{"stack_exceeded": null}'}if(B)l.push(a(z)+(p?": ":":")+B)}B=l.length===0?"{}":p?"{\n"+p+l.join(",\n"+p)+"\n"+m+"}":"{"+l.join(",")+"}";p=m;return B}}var x=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
var e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var p;var c;var u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};var v;if(typeof P.stringify!=="function")P.stringify=function(w,D,g){var z;p="";c="";if(typeof g==="number")for(z=0;z<g;z+=1)c+=" ";else if(typeof g==="string")c=g;v=D;if(D&&typeof D!=="function"&&(typeof D!=="object"||typeof D.length!=="number"))throw new Error("JSON.stringify");
return q("",{"":w})};if(typeof P.parse!=="function")P.parse=function(w,D){function g(B,C){var m;var l;var t=B[C];if(t&&typeof t==="object")for(m in t)if(Object.prototype.hasOwnProperty.call(t,m)){l=g(t,m);if(l!==undefined)t[m]=l;else delete t[m]}return D.call(B,C,t)}var z;w=String(w);x.lastIndex=0;if(x.test(w))w=w.replace(x,function(B){return"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(w.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){z=eval("("+w+")");return typeof D==="function"?g({"":z},""):z}throw new SyntaxError("JSON.parse");}})();var N={};N.html=N.html||{};(function(){function k(c){return c.replace(/^\s+/,"").replace(/\s+$/,"")}var a={callbacks:{},unfired_events:[],early_callbacks:null,currentUV:null};var y;var q="universal_variable";var x=0;var e=500;var p;a._isArray=function(c){return Object.prototype.toString.call(c)==="[object Array]"};a._targetChanged=function(c,u,v){var w;
var D;var g;if(v===null)if(u==="null")return false;else return true;else if(v===undefined)if(u===v)return false;else return true;else{w=P.parse(u);D=a._getNested(w,c);g=a._getNested(v,c);return!a._jsonIsEqual(D,g)}};a._processCallbacks=function(){var c;if(a.early_callbacks&&a.early_callbacks.length>0){for(c=0;c<a.early_callbacks.length;c+=1)a.push(a.early_callbacks[c]);a.early_callbacks=null}};a._keyStringToArr=function(c){c=k(c);if(c==="")return[];else{c=c.replace(/\[(\w+)\]/g,".$1");c=c.replace(/^\./,
"");return c.split(".")}};a._getNested=function(c,u){var v=a._keyStringToArr(u);for(var w;v.length>0;){w=v.shift();if(c.hasOwnProperty(w))c=c[w];else return}return c};a._jsonIsEqual=function(c,u){if(typeof c!=="string")c=P.stringify(c,a._stripEvents);if(typeof u!=="string")u=P.stringify(u,a._stripEvents);return c===u};a._stripEvents=function(c,u){if(c!=="events")return u;else return undefined};a._on=function(c,u){var v;var w;v=c.split(":");c=v[0];w=v[1];a.callbacks[c]=a.callbacks[c]||[];if(w)a.callbacks[c].push({keyString:w,
func:u});else a.callbacks[c].push({func:u})};a._trigger=function(c,u){var v;var w;if(a.callbacks[c])for(v=0;v<a.callbacks[c].length;v+=1)if(typeof a.callbacks[c][v].func==="function"){w=a.callbacks[c][v].keyString;if(w){if(c==="change"&&a._targetChanged(w,a.currentUV,y))a.callbacks[c][v].func(u)}else a.callbacks[c][v].func(u)}};a._eventsPush=function(c){var u;var v;y.events[y.events.length]=c;c.time=c.time||(new Date).getTime();if(a.callbacks.event){u=0;v=a.callbacks.event.length;for(u;u<v;u+=1)a.callbacks.event[u].func(c)}c.has_fired=
true};a._getUnfiredEvents=function(){var c=0;for(c=0;c<y.events.length;c+=1)if(!y.events[c].has_fired){a.unfired_events.push(y.events.splice(c,1)[0]);c-=1}};a._fireEvents=function(){for(;a.unfired_events.length>0;)y.events.push(a.unfired_events.shift())};a._resetEventsPush=function(){y.events=y.events||[];if(y.events.push.toString().indexOf("[native code]")!==-1){y.events.push=a._eventsPush;a._getUnfiredEvents();a._fireEvents()}};a._checkForChanges=function(){if(a.callbacks.change&&a.callbacks.change.length>
0)if(!a._jsonIsEqual(a.currentUV,y)){a._trigger("change",y);a.currentUV=P.stringify(y,a._stripEvents)}};a._setUVLocation=function(c){q=c;a._initUV()};a._initUV=function(){window[q]=window[q]||{events:[]};y=window[q];if(!y.events)y.events=[]};a.push=function(c){if(!a._isArray(c))return;if(c[0]==="on")a._on(c[1],c[2]);else if(c[0]==="trigger"&&c[1])a._trigger(c[1])};a.init=function(c,u){if(u)q=u;a._initUV();if(!window.uv_listener||a._isArray(window.uv_listener)){a.early_callbacks=window.uv_listener||
null;window.uv_listener=a;if(!c)a.start()}else if(u)window.uv_listener._setUVLocation(q)};a.start=function(){a.currentUV=P.stringify(y,a._stripEvents);p=setInterval(function(){a._initUV();a._resetEventsPush();a._checkForChanges()},e);a._processCallbacks()};N.html.UVListener=a})();(function(){function k(y){if(y){this._rate=y.rate||10;this._smallestRate=-1;if(y.start)this.startPooling();this.config=y}this.inervals=[];this._lck_obj={};this._binded_pool=this._pool.bind(this)}r.Define.clazz("qubit.opentag.Timer",
k);k.prototype.timers=[];k.prototype.startPooling=function(y){if(y&&this.config.dynamic)if(this._smallestRate<0||this._smallestRate>y)this._smallestRate=Math.min(Math.floor(y/2),1500);if(!this.started){this.started=true;setTimeout(this._binded_pool,0)}};k.prototype._pool=function(){this.maxFrequent(function(){var q="";if(this.config&&this.config.name)q="["+this.config.name+"]"},5E3,this._lck_obj);this.callTimers();if(this.timers.length!==0){var y=this._smallestRate>this._rate?this._smallestRate:this._rate;
setTimeout(this._binded_pool,y)}else{this.started=false;this._smallestRate=-1}};k.prototype.callTimers=function(){this.lastCalled=(new Date).valueOf();for(var y=0;y<this.timers.length;y++){var q=this.timers[y];var x=(new Date).valueOf();if(x>=q.time){try{q.execute()}catch(e){}this.timers.splice(y,1);--y}}};k.prototype.cancellAll=function(){this.timers=[]};k.prototype.setRate=function(y){this._rate=y};k.prototype.maxFrequent=function(y,q,x){if(!x){y.__maxFrequent__timer_opentag_qubit_=y.__maxFrequent__timer_opentag_qubit_||
{};x=y.__maxFrequent__timer_opentag_qubit_}var e=x.____last__timed__max__frequent____;if(!e||(new Date).valueOf()-e>q){e=(new Date).valueOf();x.____last__timed__max__frequent____=e;y()}};k.prototype.runIfNotScheduled=function(y,q,x){x=x||y;if(x.__lastRun__&&(new Date).valueOf()<q+x.__lastRun__)return this.schedule(y,q,x);else{x.__lastRun__=(new Date).valueOf();y();return true}};k.prototype.schedule=function(y,q,x){if(x.___scheduled___)return false;else{x.___scheduled___=(new Date).valueOf();this.setTimeout(function(){x.___scheduled___=
false;x.__lastRun__=(new Date).valueOf();y()},q);return true}};var a=1;k.prototype.setTimeout=function(y,q){var x={id:a++,time:(new Date).valueOf()+ +q,execute:y};this.timers.push(x);this.startPooling(q);return x};k.prototype.setInterval=function(y,q){var x=setInterval(y,q);this.inervals.push(x);return x}})();(function(){r.Define.namespace("qubit.opentag.Timed",new r.opentag.Timer({rate:37,dynamic:true}));var k=r.opentag.Timed;k.tillTrue=function(a,y,q){var x=function(){if(!a())k.setTimeout(x,q||
33);else y()};x()}})();N.html.fileLoader={};N.html.fileLoader.load=function(k,a,y,q,x,e){var p;var c;var u;var v;var w;w=false;v=function(D){return function(){if(!w){w=true;if(D&&!u)u={url:document.location.href};y(k,u,D)}}};try{if(a)c=a(k)}catch(D){c=false;y(k,"Exception loading pre",true)}finally{if(c!==false){p=N.html.fileLoader.createScriptEl(k,x,false,e);if(y){p.onload=v(false);p.onerror=v(true);p.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded")setTimeout(function(){v(false)()},
1)}}if(!q)q=window.document.getElementsByTagName("head")[0];q.appendChild(p)}}};N.html.fileLoader.createScriptEl=function(k,a,y,q){var x;var e=document.createElement("script");e.type="text/javascript";e.src=N.html.fileLoader.tidyUrl(k)+(y?"?"+(new Date).getTime():"");if(a!==false){e.async="true";e.defer="true"}else{e.async="false";if(e.async!==false)e.async=false;e.defer="false";if(e.defer!==false)e.defer=false}for(x in q)if(q.hasOwnProperty(x))e.setAttribute(x,q[x]);return e};N.html.fileLoader.tidyUrl=
function(k){if(k.substring(0,5)==="http:")return k;if(k.substring(0,6)==="https:")return k;return"//"+k};(function(){function k(q){this.calls={}}var a=r.Define;var y=r.opentag.Utils;k.prototype.on=function(q,x){if(!this.calls[q])this.calls[q]=[];return y.addToArrayIfNotExist(this.calls[q],x)};k.prototype.call=function(q,x){var e=this.calls[q];if(e)for(var p=0;p<e.length;p++)try{e[p](x)}catch(c){}};k.prototype.remove=function(q,x){if(this.calls[q])return y.removeFromArray(this.calls[q],x);return null};
k.prototype.removeAll=function(q){var x=0;for(var e in this.calls)if(this.calls.hasOwnProperty(e))x+=y.removeFromArray(this.calls[e],q);return x};k.prototype.clear=function(){this.calls={}};a.clazz("qubit.Events",k)})();(function(){function k(e){this.log=new r.opentag.Log("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.config={order:0,include:true,name:"Filter-"+y++,script:undefined,session:undefined,restartable:true};this.runtimeId=a.UUID();this.session=
null;if(e){for(var p in e)if(e.hasOwnProperty(p))this.config[p]=e[p];if(e.session)this.setSession(e.session);this.register(this)}this.events=new r.Events({})}var a=r.opentag.Utils;var y=0;var q=[];r.Define.clazz("qubit.opentag.filter.BaseFilter",k);k.state={DISABLED:-3,SESSION:-2,PASS:-1,FAIL:0};var x="restart";k.prototype.EVENT_TYPES={RESTART_EVENT:x};k.prototype.prepareForRestart=function(){if(this.config.restartable){this.events.call(x,this);this.reset()}};k.prototype.onRestart=function(e){this.events.on(x,
e)};k.prototype.reset=function(){this.runtimeId=a.UUID();this.enable()};k.prototype.disable=function(){this.config.disabled=true};k.prototype.enable=function(){this.config.disabled=false};k.prototype.match=function(){return true};k.prototype.setSession=function(e){this.session=e};k.prototype.getSession=function(){return this.session};k.prototype.getState=function(){var e=k.state.PASS;if(this.config.disabled)return k.state.DISABLED;if(this.config.script)e=this.config.script.call(this,e);if(isNaN(+e))e=
k.state.FAIL;this.lastState=+e;return e};k.getFilters=function(){return q};k.prototype.register=function(){k.register(this)};k.register=function(e){a.addToArrayIfNotExist(q,e)}})();(function(){var k=r.Define;var a={CONTAINS:"CONTAINS",MATCHES_EXACTLY:"MATCHES_EXACTLY",STARTS_WITH:"STARTS_WITH",ENDS_WITH:"ENDS_WITH",REGULAR_EXPRESSION:"REGULAR_EXPRESSION",ALL_URLS:"ALL_URLS"};k.namespace("qubit.opentag.filter.pattern.PatternType",a)})();(function(){function k(e){this._lockObject={};var p={patternType:x.CONTAINS,
pattern:""};if(e)for(var c in e)if(e.hasOwnProperty(c))p[c]=e[c];k.SUPER.call(this,p)}var a=r.opentag.Utils;var y=r.opentag.filter.BaseFilter;var q=r.opentag.Timed;var x=r.opentag.filter.pattern.PatternType;r.Define.clazz("qubit.opentag.filter.URLFilter",k,y);k.prototype.PATTERNS=x;k.prototype.getURL=function(e){return e||a.getUrl()};k.prototype.match=function(e){e=this.getURL(e);var p=true;var c=this.config.pattern;switch(this.config.patternType){case x.CONTAINS:p=e.toLowerCase().indexOf(c.toLowerCase())>=
0;break;case x.MATCHES_EXACTLY:p=e.toLowerCase()===this.config.pattern.toLowerCase();break;case x.STARTS_WITH:p=e.toLowerCase().indexOf(c.toLowerCase())===0;break;case x.ENDS_WITH:p=e.lastIndexOf(c.toLowerCase())+c.length===e.length;break;case x.REGULAR_EXPRESSION:p=(new RegExp(c)).test(e);break;case x.ALL_URLS:p=true;break}return p}})();(function(){function k(e){var p={};if(e){for(var c in e)if(e.hasOwnProperty(c)){if(c==="customStarter"&&e[c])this.customStarter=e[c];else if(c==="customScript"&&
e[c])this.customScript=e[c];p[c]=e[c]}this.uid="f"+x++}this.tagsToRun=[];k.SUPER.call(this,p)}var a=r.opentag.filter.BaseFilter;var y=r.opentag.filter.URLFilter;var q=r.opentag.Utils;var x=0;r.Define.clazz("qubit.opentag.filter.Filter",k,y);k.prototype.customStarter=function(e,p,c){p(false)};k.prototype.isSession=function(){if(this.config.sessionDisabled)return false;if(this.customStarter===null&&this.customScript===null)return false;return true};k.prototype.customScript=function(e){return true};
k.prototype.match=function(e){var p=true;try{if(this.customScript){if(this._matchState===undefined)this._matchState=!!this.customScript(this.getSession());p=this._matchState}}catch(c){p=false}return p&&k.SUPER.prototype.match.call(this,e)};k.prototype.runTag=function(e){q.addToArrayIfNotExist(this.tagsToRun,e);if(!this.starterExecuted){if(!this._starterWasRun){this._starterWasRun=true;var p=this.runtimeId;var c=function(u){if(p!==this.runtimeId)return;this.reRun=u;this.starterExecuted=(new Date).valueOf();
this._processQueuedTagsToRun()}.bind(this);if(this.customStarter)this.customStarter(this.getSession(),c,e);else k.prototype.customStarter.call(this,this.getSession(),c,e)}}else this._triggerTag(e)};k.prototype._processQueuedTagsToRun=function(){for(var e=0;e<this.tagsToRun.length;e++){var p=this.tagsToRun[e];this._triggerTag(p)}};k.prototype._triggerTag=function(e){if(this.reRun===true)e.run();else e.runOnce()};k.prototype.getState=function(e){if(e)this.setSession(e);var p=k.SUPER.prototype.getState.call(this);
if(p===a.state.DISABLED)return a.state.DISABLED;if(p===a.state.PASS)if(this.isSession())p=a.state.SESSION;if(this.config.script)p=this.config.script.call(this,p,this.getSession());this.lastState=p;return p};k.prototype.reset=function(){k.SUPER.prototype.reset.call(this);this._matchState=undefined;this._starterWasRun=undefined;this.starterExecuted=undefined;this.tagsToRun=[];this.reRun=undefined}})();N.html.GlobalEval={};N.html.GlobalEval.globalEval=function(k){if(window.execScript)window.execScript(k===
""?" ":k);else{var a=function(){window["eval"].call(window,k)};a()}};N.html.HtmlInjector={};N.html.HtmlInjector.inject=function(k,a,y,q,x){var e;var p;var c;var u;var v;var w;var D;if(y.toLowerCase().indexOf("\x3cscript")>=0){c=document.createElement("div");c.innerHTML="a"+y;u=c.getElementsByTagName("script");v=[];for(e=0,p=u.length;e<p;e+=1)v.push(u[e]);D=[];for(e=0,p=v.length;e<p;e+=1){w=v[e];var g={attributes:N.html.HtmlInjector.getAttributes(w)};if(w.src)g.src=w.src;else g.script=w.innerHTML;
D.push(g);w.parentNode.removeChild(w)}if(c.innerHTML)if(c.innerHTML.length>0)c.innerHTML=c.innerHTML.substring(1);N.html.HtmlInjector.doInject(k,a,c);N.html.HtmlInjector.loadScripts(D,0,q,k)}else{c=document.createElement("div");c.innerHTML=y;N.html.HtmlInjector.doInject(k,a,c);if(q)q()}};N.html.HtmlInjector.doInject=function(k,a,y){if(y.childNodes.length>0){for(var q=document.createDocumentFragment();y.childNodes.length>0;)q.appendChild(y.removeChild(y.childNodes[0]));if(a)N.html.HtmlInjector.injectAtStart(k,
q);else N.html.HtmlInjector.injectAtEnd(k,q)}};N.html.HtmlInjector.injectAtStart=function(k,a){if(k.childNodes.length===0)k.appendChild(a);else k.insertBefore(a,k.childNodes[0])};N.html.HtmlInjector.injectAtEnd=function(k,a,y){if(!y)y=1;if(k===document.body&&document.readyState!=="complete"&&y<50)setTimeout(function(){N.html.HtmlInjector.injectAtEnd(k,a,y+1)},100);else k.appendChild(a)};N.html.HtmlInjector.loadScripts=function(k,a,y,q){var x;var e;var p=false;for(x=k.length;a<x;a+=1){e=k[a];if(e.src){p=
true;break}else N.html.GlobalEval.globalEval(e.script)}if(p)N.html.fileLoader.load(e.src,null,function(){N.html.HtmlInjector.loadScripts(k,a+1,y,q)},q,false,e.attributes);if(y&&a===x)y()};N.html.HtmlInjector.getAttributes=function(k){var a;var y;var q;var x;var e;var p={};if(k){q=k.attributes;y=q.length;for(a=0;a<y;a++){x=q[a].value;e=q[a].name.toLowerCase();if(x!==""&&(e==="id"||e==="class"||e==="charset"||e.substr(0,5)==="data-"))p[e]=x}return p}};(function(){function k(){D=D||{write:document.write,
writeln:document.writeln}}function a(){document.write=D.write;document.writeln=D.writeln;D=null}var y=r.opentag.filter.BaseFilter;var q=r.opentag.Utils;var x=N.html.HtmlInjector;var e=N.html.fileLoader;var p=r.opentag.filter.Filter;var c=function(){};r.Define.clazz("qubit.opentag.TagsUtils",c);var u=false;c.bodyLoaded=function(){if(u)return true;u=!!(document.body&&document.readyState!=="loading");return u};c.bodyAvailable=function(d){return!!document.body};var v={};var w={SUCCESS:"success",FAIL:"failure",
INIT:"not started"};c.loadScript=function(d){var b=d.url;var h=function(G,J,L){v[b].error=J;if(L){v[b].state=w.FAIL;d.onerror()}else{v[b].state=w.SUCCESS;d.onsuccess()}};if(v[b]){if(d.noMultipleLoad)return h(b,v[b].error,v[b].state===w.FAIL);v[b].count+=1}else v[b]={count:1,state:null};var n=!d.async;var A=c.bodyLoaded();if(n&&A);n=n&&!A;if(n)c.writeScriptURL(b,function(G,J){h(b,J,!G)});else e.load(b,false,h,d.node,d.async)};var D=null;c.redirectDocumentWritesToArray=function(d,b){var h=d;k();document.write=
function(n){h.push(n)};document.writeln=function(n){h.push(n)}};c.flushDocWritesArray=function(d,b,h,n,A){var G=b;if(G&&d){var J=d.splice(0,d.length);try{c.injectHTML(G,h,J.join("\n"),A||K);return true}catch(M){}}else{var L="Flushing location not found!";return false}if(A)A();return true};c.unlockDocumentWrites=function(){if(D)a()};var g=c.prototype.PACKAGE_NAME+".TagsUtils._writeScriptURL_callbacks";var z={};r.Define.namespace(g,z,O,true);var B=0;var C=(new Date).valueOf();c.writeScriptURL=function(d,
b){var h="_"+C+"_"+B++;var n=g+"."+h;var A=false;z[h]=function(S){if(A)return;A=true;if(S)b(false,"error while loading script "+d);else b(true);z[h]=undefined;delete c.writeScriptURL.callbacks[h]};var G='if(this.readyState \x3d\x3d\x3d "loaded" || '+'this.readyState \x3d\x3d\x3d "complete"){ try {'+n+"(true)"+"} catch (ex) {}}";var J="try{"+n+"(false)}catch(ex){}";var L="try{"+n+"(true)}catch(ex){}";var M="scr";var Q;d=e.tidyUrl(d);Q="\x3c"+M+"ipt onload\x3d'"+J+"'  onerror\x3d'"+L+"' onreadystatechange\x3d'"+
G+"' type\x3d'text/javascript' "+" src\x3d'"+d+"'\x3e"+"\x3c/"+M+"ipt\x3e";if(D){a();document.write(Q);k()}else document.write(Q);q.bodyReady(function(){if(!A){A=true;b(true)}})};c.writeScriptURL.callbacks={};var m=y.state.SESSION;var l=y.state.PASS;var t=y.state.FAIL;c.filtersState=function(d,b,h,n){d=d.sort(function(W,ga){try{var da=ga.config.order;var ea=W.config.order;if(isNaN(-ea))ea=0;if(isNaN(-da))da=0;return da-ea}catch(ja){return 0}});var A=l;if(!d||d.length===0)return A;var G=null;var J=
false;var L=false;var M=0;var Q;var S;var X=[];var U;var T;for(var Y=0;Y<d.length;Y++){U=d[Y];U.setSession(b);if(U.match()){Q=U.getState();if(Q>0){if(M===0||M>Q)M=Q}else if(Q===y.state.DISABLED)J=true;else if(Q===m){L=true;G=U;S=U;X.push(U)}else G=U}else T=U}var aa=false;if(G===null){aa=true;if(!J)A=t;else A=l}else if(G.config.include)A=Q;else A=Q===l?t:l;if(M>0&&(A===l||aa))A=M;if(A===m||A===l&&L){if(!S.config.include)return t;A=m;if(S instanceof p&&S.isSession())if(n)for(var V=0;V<X.length;V++)try{X[V].runTag(h)}catch(W){}}if(h.config.dedupe&&
A===l)if(T&&T instanceof p&&T.isSession()){h.sendDedupePing=true;A=t}return A};c.injectHTML=function(d,b,h,n){return x.inject(d,!b?1:0,h,n||K)};c.getHTMLLocationForTag=function(d){var b;var h=d.prepareLocationObject(d.config.locationObject);switch(h){case "HEAD":b=document.getElementsByTagName("head")[0];break;case "BODY":b=document.body;break;default:if(h)b=document.getElementById(h);else b=document.body}return b}})();(function(){function k(c){this.config={};this.handlers=[];this.parameters=null;
this.callHandlersOnRead=false;if(c){this.uniqueId="BV"+x++;k.ALL_VARIABLES[this.uniqueId]=this;for(var u in c)if(c.hasOwnProperty(u)){this.config[u]=c[u];if(u==="value")this.value=c.value}var v=k.register(this);if(v&&v!==this);return v}}function a(){if(p)return false;for(var c=0;c<e.length;c++)try{var u=e[c];u.getValue()}catch(v){}q.setTimeout(a,k.CHECK_POLL_RATE);return true}var y=r.opentag.Utils;var q=r.opentag.Timed;var x=0;r.Define.clazz("qubit.opentag.pagevariable.BaseVariable",k);k.ALL_VARIABLES=
{};var e=[];k.OBSERVED_VARIABLES=e;k.pageVariables=[];k.register=function(c){if(c instanceof k){for(var u=0;u<k.pageVariables.length;u++){var v=k.pageVariables[u];if(c===v)return v}k.pageVariables.push(c);return c}return null};k.prototype.getValue=function(){this._updateCurrentValue(this.value);return this.currentValue};k.prototype._updateCurrentValue=function(c){if(!this.valuesAreEqual(c,this.currentValue)){this.oldValue=this.currentValue;this.currentValue=c;if(!p||this.callHandlersOnRead)this._handleValueChanged();
return true}return false};k.prototype.getDefaultValue=function(){return this.defaultValue};k.prototype.setDefaultValue=function(c){this.defaultValue=c};k.prototype.exists=function(c){var u=y.variableExists(this.getValue());if(c)u=u||y.variableExists(this.getDefaultValue());return u};k.prototype.getRelativeValue=function(c,u){var v=this.getValue();if(!y.variableExists(v))v=u;var w;if(c&&!y.variableExists(v)){w=this.getDefaultValue();if(y.variableExists(w))v=w}return v};k.prototype.replaceToken=function(c,
u,v,w){var D=this.exists();var g=D?this.getValue():v;c="\\$\\{"+c+"\\}";if(w||g instanceof Array){var z;if(D)z=this.getValueAccessorString();else z=y.getAnonymousAcessor(g);return u.replace(new RegExp(c,"g"),z)}else return u.replace(new RegExp(c,"g"),g)};k.prototype.getAccessorString=function(){return"qubit.opentag.pagevariable.BaseVariable.ALL_VARIABLES."+this.uniqueId};k.prototype.getValueAccessorString=function(){return this.getAccessorString()+".getValue()"};k.prototype.onValueChanged=function(c,
u){if(y.addToArrayIfNotExist(this.handlers,c)===-1);if(u!==false)this.startObservingForChanges()};k.prototype.deatchOnValueChanged=function(c){if(y.removeFromArray(this.handlers,c)>0);};k.prototype._handleValueChanged=function(){var c={oldValue:this.oldValue,newValue:this.currentValue,variable:this};for(var u=0;u<this.handlers.length;u++)try{this.handlers[u](c)}catch(v){}};var p=true;k.CHECK_POLL_RATE=333;k.prototype.startObservingForChanges=function(){this.addToObservedVariables();if(p){p=false;
a()}};k.prototype.stopObservingForChanges=function(){this.removeFromObservedVariables();if(e.length===0)p=true};k.prototype.addToObservedVariables=function(){y.addToArrayIfNotExist(e,this)};k.prototype.removeFromObservedVariables=function(){y.removeFromArray(e,this)};k.prototype.getObservedVariables=function(){return e};k.prototype.valuesAreEqual=function(c,u){return c===u}})();(function(){function k(q){this._lockExprObject={};k.SUPER.apply(this,arguments)}var a=r.opentag.Utils;var y=r.opentag.Timed;
r.Define.clazz("qubit.opentag.pagevariable.Expression",k,r.opentag.pagevariable.BaseVariable);k.prototype.getValue=function(){var q;var x;var e=this.value;try{if(e&&e.indexOf("[#]")===-1){var p=a.gevalAndReturn(e);q=p.result;this.failMessage=null;x=p.error}else q=k.parseUVArray(e)}catch(v){x=v}if(x){var c="could not read value of expression: \n"+e+"\nexact cause: "+x;if(this.failMessage!==c)this.failMessage=c;q=null}var u=this._updateCurrentValue(q);return q};k.parseUVArray=function(q){var x=q.split("[#]");
var e=a.gevalAndReturn(x[0]).result;var p=[];var c=x[1];if(c.indexOf(".")===0)c=c.replace(".","");for(var u=0;u<e.length;u++){var v=a.getObjectUsingPath(c,e[u]);p.push(v)}return p};k.prototype.replaceToken=function(q,x,e,p){if(this.getValue()instanceof Array)p=true;return k.SUPER.prototype.replaceToken.call(this,q,x,e,p)}})();(function(){function k(y){k.SUPER.apply(this,arguments)}var a=r.opentag.Utils;r.Define.clazz("qubit.opentag.pagevariable.DOMText",k,r.opentag.pagevariable.BaseVariable);k.prototype.getValue=
function(){var y=a.getElementValue(this.value);this._updateCurrentValue(y);return y}})();(function(){function k(a){k.SUPER.apply(this,arguments);this._lockObject={}}r.Define.clazz("qubit.opentag.pagevariable.Cookie",k,r.opentag.pagevariable.BaseVariable);k.prototype.getValue=function(){var a=r.Cookie.get(this.value);this._updateCurrentValue(a);return a}})();(function(){function k(y){k.SUPER.apply(this,arguments)}var a=r.opentag.Utils;r.Define.clazz("qubit.opentag.pagevariable.URLQuery",k,r.opentag.pagevariable.BaseVariable);
k.prototype.getValue=function(){var y=a.getQueryParam(this.value);this._updateCurrentValue(y);return y}})();(function(){function k(a){k.SUPER.apply(this,arguments)}r.Define.clazz("qubit.opentag.pagevariable.UniversalVariable",k,r.opentag.pagevariable.Expression)})();(function a(){function y(){function q(l){C.level=l}function x(l,t){C.info(l,"event emitted");t=w(t||{});t.meta=t.meta||{};t.meta.type=l;z.push(t);c();m.listeners=g(m.listeners,function(d){return!d.disposed})}function e(l,t,d){function b(){C.info("Replaying events");
p(function(){v(m.events,function(G){if(n.disposed)return;if(!D(l,G.meta.type))return;t.call(d,G)})});return A}function h(){C.info("Disposing event handler");n.disposed=true;return A}C.info("Attaching event handler for",l);var n={type:l,callback:t,disposed:false,context:d||window};m.listeners.push(n);var A={replay:b,dispose:h};return A}function p(l){C.info("Calling event handlers");B++;try{l()}catch(t){C.error("UV API Error",t.stack)}B--;c()}function c(){if(z.length===0)C.info("No more events to process");
if(z.length>0&&B>0)C.info("Event will be processed later");if(z.length>0&&B===0){C.info("Processing event");var l=z.shift();m.events.push(l);p(function(){v(m.listeners,function(t){if(t.disposed)return;if(!D(t.type,l.meta.type))return;try{t.callback.call(t.context,l)}catch(d){C.error("Error emitting UV event",d.stack)}})})}}function u(l,t,d){var b=m.on(l,function(){t.apply(d||window,arguments);b.dispose()});return b}function v(l,t){var d=l.length;for(var b=0;b<d;b++)t(l[b],b)}function w(l){var t={};
for(var d in l)if(l.hasOwnProperty(d))t[d]=l[d];return t}function D(l,t){return typeof l==="string"?l===t:l.test(t)}function g(l,t){var d=l.length;var b=[];for(var h=0;h<d;h++)if(t(l[h]))b.push(l[h]);return b}var z=[];var B=0;var C={info:function t(){if(C.level>q.INFO)return;if(console&&console.info)console.info.apply(console,arguments)},error:function d(){if(C.level>q.ERROR)return;if(console&&console.error)console.error.apply(console,arguments)}};q.ALL=0;q.INFO=1;q.ERROR=2;q.OFF=3;q(q.ERROR);var m=
{on:e,emit:x,once:u,events:[],listeners:[],logLevel:q};return m}if(typeof module==="object"&&module.exports)module.exports=y;else if(window&&window.uv===undefined)window.uv=y()})();var Z={};var ba=[];var fa=false;var ca=false;var ia=r.Define.global();var ha={allEventsByType:Z,subscribe:function(a,y){if(ca){var q=E();q.on(a,y)}else ba.push({on:[a,y]})},getEventHistory:function(a){return this.allEventsByType[a]},publish:function(a,y){if(ca){var q=E();q.emit(a,y)}else ba.push({emit:[a,y]})},connect:function(){f()}};
ha.connect();r.Define.namespace("qubit.qprotocol.PubSub",ha);(function(){function a(e){a.SUPER.apply(this,arguments)}var y=r.qprotocol.PubSub;var q=r.opentag.Utils;var x=":";r.Define.clazz("qubit.opentag.pagevariable.QProtocolVariable",a,r.opentag.pagevariable.BaseVariable);a.prototype.init=function(){if(this.initialized)return false;else this.initialized=(new Date).valueOf();this.callHandlersOnRead=true;if(!this.handlerAttached){var e=this;var p=this.getValueAndPath(this.value);this.eventName=p[0];
this.objectPath=p[1];this.updateValue();y.subscribe(this.eventName,function(c){e.updateValue(c)});this.handlerAttached=(new Date).valueOf()}};a.prototype.getValueAndPath=function(e){var p=e;var c;if(p){var u=e.indexOf(x);if(u!==-1){p=e.substring(0,u);c=e.substring(u+1)}}return[p,c]};a.prototype.getValue=function(){this.init();return this.currentValue};a.prototype.getEventsHistory=function(){return y.getEventHistory(this.eventName)};a.prototype.updateValue=function(e){if(!e){var p=this.getEventsHistory();
if(p)e=p.current}var c;var u=this.objectPath;if(e&&u)c=q.getObjectUsingPath(u,e);else c=e;this._updateCurrentValue(c);return c};a.prototype.startObservingForChanges=function(){};a.prototype.stopObservingForChanges=function(){}})();(function(){function a(){}function y(l,t){var d=[];try{var b=l.parameters;if(b)for(var h=0;h<b.length;h++)if(l.getVariableForParameter(b[h])===t)d.push(b[h])}catch(n){}return d}var q=r.opentag.Utils;var x=r.opentag.TagsUtils;var e=r.opentag.Timed;var p=r.opentag.pagevariable.BaseVariable;
var c=r.opentag.pagevariable.Expression;var u=r.opentag.pagevariable.UniversalVariable;var v=r.opentag.pagevariable.DOMText;var w=r.opentag.pagevariable.Cookie;var D=r.opentag.pagevariable.URLQuery;r.Define.clazz("qubit.opentag.TagHelper",a);a.injectHTMLForLoader=function(l,t,d,b){var h=b!==undefined?b:l.getHtml();if(h){var n=l.config.locationPlaceHolder==="END";var A=x.getHTMLLocationForTag(l);l.injectHTMLNotFinished=true;try{if(A)x.injectHTML(A,n,h,function(){l.injectHTMLNotFinished=false;if(t)try{t()}catch(G){}}.bind(l));
else if(d&&document.readyState==="loading"){document.write(h);l.injectHTMLNotFinished=false}else l.injectHTMLFailed=(new Date).valueOf()}catch(G){l.injectHTMLNotFinished=false;l.injectHTMLFailed=(new Date).valueOf()}}};a.getAllVariablesWithParameters=function(l){var t=l.getPageVariables();var d=[];for(var b=0;b<t.length;b++){var h=t[b];var n=y(l,h);for(var A=0;A<n.length;A++)d.push({parameter:n[A],variable:h})}return d};var g={};a.allParameterVariablesReadyForTag=function(l,t){var d=t;var b=true;
var h=l.getPageVariables();for(var n=0;n<h.length;n++){var A=h[n];try{var G=y(l,A);var J=A.exists();if(!J&&d){if(G.length>0)J=!!G[0].defaultValue;J=J||A.exists(true)}if(!J){b=false;break}}catch(L){b=false;break}}return b};var z="2";var B="3";var C="4";var m="5";a.validateAndGetVariableForParameter=function(l){if(l.hasOwnProperty("variable")&&l.variable)l.variable=a.initPageVariable(l.variable);return l.variable};a.initPageVariable=function(l){if(!l||l instanceof p)return l;if(typeof l==="string"){var t=
q.getObjectUsingPath(l);if(t&&t instanceof p)return t}switch(l.type){case z:return new c(l);case B:return new D(l);case C:return new w(l);case m:return new v(l);case "EPRESSION":return new c(l);case "URL_PARAMETER":return new D(l);case "COOKIE_VALUE":return new w(l);case "DOM_VALUE":return new v(l);default:return new p(l)}}})();(function(){function a(g){this.log=new u("",function(){return this.CLASS_NAME+"["+this.config.name+"]"}.bind(this),"collectLogs");this.urlsLoaded=0;this.urlsFailed=0;this.runCounter=
0;this.events=new r.Events({});this._depLoadedHandler=function(){if(this.dependenciesLoaded()&&this.awaitingDependencies)this._triggerLoadingAndExecution()}.bind(this);this.config={name:"Tag-"+c++,async:true,usesDocumentWrite:false,timeout:this.LOADING_TIMEOUT,dependencies:[],url:null,urlLocation:null,locationPlaceHolder:"END",locationObject:null,dontWaitForInjectionLocation:false,noMultipleLoad:false,loadDependenciesOnLoad:false,restartable:true};this.restartCounter=0;this.cancelled=false;this.runtimeId=
q.UUID();this.delayDocWrite=false;this.dependencies=[];this._lockObject={count:0};this._lockObjectDepsLoaded={};this.genericDependencies=[];if(g){if(!g.name){var z="Tag-"+c++;this.config.name=z}this.addState("INITIAL");for(var B in g)this.config[B]=g[B];if(g.genericDependencies)this.genericDependencies=this.genericDependencies.concat(g.genericDependencies);if(g.dependencies)this.dependencies=g.dependencies.concat(this.dependencies);if(g.PACKAGE)this._package=g.PACKAGE;this.onInit()}}function y(){if(this.cancelled){this._handleCancel();
return}this.waitForDependenciesFinished=(new Date).valueOf();var g=this._fullBodyNeededAndUnLoaded();var z=this._bodyNeededButNotAvailable();if(g||z)this.waitForDependenciesFinished=false;else{if(!this.timeoutCountdownStart)this.timeoutCountdownStart=(new Date).valueOf();if(this.allDependenciesLoaded())this._markLoadedSuccesfuly();else if(this._loadingOutOfTimeFrames()){this.loadingTimedOut=(new Date).valueOf();if(this.allDependenciesLoaded(true))this._markLoadedSuccesfuly();else{this.addState("TIMED_OUT");
this._markLoadingDependenciesFailed();this._triggerOnLoadTimeout()}}else this.waitForDependenciesFinished=false}if(!this.waitForDependenciesFinished)this._setTimeout(y.bind(this),65);else this.addState("LOADED_DEPENDENCIES")}var q=r.opentag.Utils;var x=r.opentag.TagsUtils;var e=r.opentag.Timed;var p=r.opentag.TagHelper;var c=0;var u=r.opentag.Log;r.Define.clazz("qubit.opentag.GenericLoader",a);var v="after";var w="before";var D="restart";a.prototype.EVENT_TYPES={AFTER_EVENT:v,BEFORE_EVENT:w,RESTART_EVENT:D};
a.prototype.onInit=K;a.prototype.LOADING_TIMEOUT=5*1E3;a.prototype.getHtml=function(){if(this.config.html)return this.config.html;if(this.htmlContent)return q.trim(this.htmlContent);return null};a.prototype._executeScript=function(){var g=false;try{this.script();g=true}catch(z){this.addState("EXECUTED_WITH_ERRORS");this.executedWithErrors=(new Date).valueOf();this._onError(z)}finally{this._onExecute(g)}};a.prototype.getTimeout=function(){return this._getTimeout()};a.prototype._getTimeout=function(g){var z=
+this.config.timeout;var B=this.dependencies;if(z!==-1&&B.length>0){var C=0;g=g||[];var m=q.indexInArray(g,this)!==-1;if(!m){g[g.length]=this;for(var l=0;l<B.length;l++){var t=B[l]._getTimeout(g);if(t>C)C=t}if(C>0)z+=C}else return 0}return z};a.prototype._onExecute=function(g){this.onExecute(g)};a.prototype.onExecute=K;a.prototype._flushDocWrites=function(g){var z=true;this._docWriteNotFlushed=false;try{var B=x.getHTMLLocationForTag(this);if(B&&this._securedWrites&&this._securedWrites.length>0){var C=
this.config.locationPlaceHolder==="END";z=x.flushDocWritesArray(this._securedWrites,B,C,this.log,g);if(z)this._docWriteFlushed=(new Date).valueOf();else this._docWriteNotFlushed=(new Date).valueOf()}}catch(m){this._onError(m)}if(g)g();if(this._securedWrites&&this._securedWrites.length>0){z=false;this._docWriteNotFlushed=(new Date).valueOf()}return z};a.prototype.log=K;a.prototype.finished=function(){return!!this.runIsFinished};a.prototype.script=function(){};a.prototype.before=function(){this.beforeRun=
(new Date).valueOf();try{this.events.call(w,this)}catch(g){this._onError(g)}};a.prototype.onBefore=function(g){this.events.on(w,g)};a.prototype.after=function(g){this.afterRun=(new Date).valueOf();try{this.events.call(v,{success:g,tag:this})}catch(z){this._onError(z)}};a.prototype.onAfter=function(g){this.events.on(v,g)};a.prototype.runOnce=function(){if(!this._runOnceTriggered&&!this.scriptExecuted){this._runOnceTriggered=(new Date).valueOf();this.run()}};a.CANCEL_ALL=false;a.prototype.run=function(){if(!isNaN(this.config.runningLimit))if(this.config.runningLimit<=
this.runCounter)return false;if(this.cancelled||a.CANCEL_ALL){this._handleCancel();return false}if(this.isRunning)return false;if(this.lastRun)this.reset();this.lastRun=this.isRunning=(new Date).valueOf();this.runCounter++;this._ignoreDeps=!!this.ignoreDependencies;if(!this._ignoreDeps&&!this.dependenciesLoaded()){this._attachDepsEventsToContinue();return false}return this._triggerLoadingAndExecution()};a.prototype._triggerLoadingAndExecution=function(){this.awaitingDependencies=-(new Date).valueOf();
this.load();if(this._ignoreDeps)this.execute();else this.waitForDependenciesAndExecute();return true};a.prototype._attachDepsEventsToContinue=function(){this.awaitingDependencies=(new Date).valueOf();var g=this.dependencies;for(var z=0;z<g.length;z++)try{g[z].events.on("success",this._depLoadedHandler)}catch(B){}};a.prototype.dependenciesLoaded=function(){var g=this.dependencies;for(var z=0;z<g.length;z++)if(g[z]!==this){var B=+g[z].scriptExecuted>0;if(!B)return false}return true};a.prototype._setTimeout=
function(g,z){this._wasTimed=(new Date).valueOf();var B=this.runtimeId;var C=function(){if(this.runtimeId===B)return g()}.bind(this);return e.setTimeout(C,z)};a.prototype._handleCancel=function(){this.addState("CANCELLED");try{this.onCancel()}catch(g){this._onError(g)}};a.prototype.waitForDependenciesAndExecute=function(){if(this.loadedDependencies)this.execute();else if(this.loadingDependenciesFailed){this._markFailure();this._markFinished()}else this._setTimeout(this.waitForDependenciesAndExecute.bind(this),
30)};a.prototype.execute=function(){this._triggerExecution()};a.prototype._triggerExecution=function(){if(this.cancelled){this._handleCancel();return}if(this.scriptExecuted)return;var g=true;if(this.shouldWaitForDocWriteProtection())g=false;else{if(!this._beforeEntered){this._beforeEntered=(new Date).valueOf();var z=false;try{z=this.before()}catch(C){this._onError(C)}if(z){this._markFailure();this._markFinished();return}}g=this.loadExecutionURLsAndHTML(this._triggerExecution.bind(this))}if(this.scriptExecuted)return;
if(this.unexpectedFail)g=true;if(!g)this._setTimeout(this._triggerExecution.bind(this),30);else{this._flushDocWrites();if(this.scriptLoadingFailed||this.injectHTMLFailed||this.unexpectedFail)this._markFailure();else{this.scriptExecuted=(new Date).valueOf();this.addState("EXECUTED");this._executeScript()}if(this.cancelled){this._handleCancel();return false}else{var B=this.scriptExecuted>0;try{if(!this.afterRun){this.afterRun=(new Date).valueOf();this.after(B)}}catch(C){this.executedWithErrors=(new Date).valueOf()}if(!this.executedWithErrors)if(B)this.events.call("success")}this._flushDocWrites();
this._markFinished()}};a.prototype._markFailure=function(){this.scriptExecuted=-(new Date).valueOf();this.addState("FAILED_TO_EXECUTE")};a.prototype._markFinished=function(){this.runIsFinished=(new Date).valueOf();this.isRunning=false;if(a.LOCK_DOC_WRITE===this){this._flushDocWrites();x.unlockDocumentWrites();a.LOCK_DOC_WRITE=false}this.onFinished(true)};a.prototype.onFinished=K;a.prototype.onCancel=K;a.prototype.onFinished=K;a.prototype.shouldWaitForDocWriteProtection=function(){if(this.willSecureDocumentWrite())if(!a.LOCK_DOC_WRITE){a.LOCK_DOC_WRITE=
this;this._secureWriteAndCollectForExecution()}else if(a.LOCK_DOC_WRITE!==this){if(!this._lockedDocWriteInformed)this._lockedDocWriteInformed=(new Date).valueOf();return true}return false};a.prototype.runWithoutDependencies=function(){this.ignoreDependencies=true;this.run()};a.prototype.loadExecutionURLsAndHTML=function(g){if(this.cancelled){this._handleCancel();return true}if(!this._loadExecutionURLsAndHTMLInformed)this._loadExecutionURLsAndHTMLInformed=true;this._triggerURLsLoading(g);if(!this.loadURLsNotFinished){this._flushDocWrites();
this._triggerHTMLInjection();this._flushDocWrites();if(!this.injectHTMLNotFinished){this._flushDocWrites();if(!this._docWriteNotFlushed){if(this._docWriteFlushed);return true}}}return false};a.prototype._triggerURLsLoading=function(g){if(!this._urlLoadTriggered&&this.config.url){this._urlLoadTriggered=true;this.loadURLs(false,g)}};a.prototype._triggerHTMLInjection=function(){if(!this._injectHTMLTriggered&&this.getHtml()){this._injectHTMLTriggered=true;this.injectHTML()}};a.prototype.STATE={INITIAL:0,
STARTED:1,LOADING_DEPENDENCIES:2,LOADED_DEPENDENCIES:4,LOADING_URL:8,LOADED_URL:16,EXECUTED:32,EXECUTED_WITH_ERRORS:64,FAILED_TO_LOAD_DEPENDENCIES:128,FAILED_TO_LOAD_URL:256,FAILED_TO_EXECUTE:512,TIMED_OUT:1024,UNEXPECTED_FAIL:2048,CANCELLED:2048*2};a.prototype.addState=function(g){if(this.STATE.hasOwnProperty(g)){this.state=this.state|this.STATE[g];try{this.onStateChange(g)}catch(z){this._onError(z)}}};a.prototype.onStateChange=K;a.prototype.cancel=function(){this.cancelled=(new Date).valueOf()};
a.prototype.unCancel=function(){this.cancelled=false};a.prototype.state=a.prototype.STATE.INITIAL;a.prototype._markLoadedSuccesfuly=function(){this.loadedDependencies=(new Date).valueOf();this.onAllDependenciesLoaded()};a.prototype._secureWriteAndCollectForExecution=function(){if(!this._securedWrites){this._securedWrites=[];x.redirectDocumentWritesToArray(this._securedWrites,this.log)}};a.prototype._markLoadingDependenciesFailed=function(){this.addState("FAILED_TO_LOAD_DEPENDENCIES");this.loadingDependenciesFailed=
(new Date).valueOf()};a.prototype.allDependenciesLoaded=function(g,z){return this.getDependenciesToBeLoaded(g,z).length===0};a.prototype.getDependenciesToBeLoaded=function(g,z){var B=z||[];if(!this.injectionLocationReady())B.push("injection location");var C;var m=this.dependencies;for(C=0;C<m.length;C++)if(m[C]!==this){var l=+m[C].scriptExecuted>0;if(!l){var t=m[C].config?m[C].config.name:"anonymous";B.push("dependant Tag with name -\x3e "+t)}}for(C=0;C<this.genericDependencies.length;C++){var d=
this.genericDependencies[C](this);if(!d)B.push("this.genericDependencies["+C+"] (index: "+C+")")}if(B!=="");return B};a.prototype.docWriteAsksToWaitForBody=function(){return!!(this.delayDocWrite&&this.config.usesDocumentWrite)};a.prototype._bodyNeededButNotAvailable=function(){if(this._dontWaitForInjections())return false;return this._isBodyLocationNeeded()&&!x.bodyAvailable()};a.prototype._isBodyLocationNeeded=function(){if(!this.isLoadingAsynchronously())return false;if(this._isBodyLocationSet())return true;
else{var g=this.config.locationObject==="HEAD";return g&&this.config.locationPlaceHolder==="END"}};a.prototype._isBodyLocationSet=function(){var g=this.config.locationObject;return!g||g==="BODY"};a.prototype._fullBodyNeededAndUnLoaded=function(){if(this._dontWaitForInjections())return false;var g=false;if(this._isBodyLocationNeeded())g=this.config.locationPlaceHolder==="END";g=g||(this.fullbodyNeeded||this.docWriteAsksToWaitForBody());return g&&!q.bodyReady()};a.prototype._dontWaitForInjections=function(){return this.config.dontWaitForInjectionLocation||
this.dontWaitForInjectionLocation||a.dontWaitForInjectionLocation};a.prototype.injectionLocationReady=function(){if(this._dontWaitForInjections())return true;if(this._fullBodyNeededAndUnLoaded())return false;if(!this.isLoadingAsynchronously())return true;return!!x.getHTMLLocationForTag(this)};a.prototype._loadingOutOfTimeFrames=function(){if(this.getTimeout()<0)return false;return(new Date).valueOf()-this.timeoutCountdownStart>this.getTimeout()};a.prototype.loadDependencies=function(){this._loadDependencies()};
a.prototype.addClientDependenciesList=function(g,z){return this.addDependenciesList(g,r.Define.clientSpaceClasspath())};a.prototype.addDependenciesList=function(g,z){if(!g||g.length===0)return;if(!this.failedDependenciesToParse)this.failedDependenciesToParse=[];var B=this.dependencies;for(var C=0;C<g.length;C++){var m=g[C];var l=false;if(m instanceof a)B.push(m);else if(typeof m==="string"){var t=m;if(z)m=z+"."+m;var d=q.getObjectUsingPath(m);if(d)if(d instanceof a)B.push(d);else l=true;else this.failedDependenciesToParse.push(t)}else l=
true;if(l){this.badDepsObjects=this.badDepsObjects||[];q.addToArrayIfNotExist(this.badDepsObjects,m)}}};a.prototype._loadDependencies=function(g){g=g||[];var z=this.dependencies;var B=q.indexInArray(g,this)!==-1;if(!B){g[g.length]=this;for(var C=0;C<z.length;C++)z[C].load(g)}};a.prototype.onError=K;a.prototype._onError=function(g){try{this.onError(g)}catch(z){}};a.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};a.prototype.onLoadTimeout=K;a.prototype.onScriptsLoadSuccess=K;a.prototype.onScriptLoadError=
K;a.prototype.onAllDependenciesLoaded=K;a.prototype.onBeforeLoad=null;a.prototype.load=function(){if(this.loadStarted)return;else{this.loadStarted=(new Date).valueOf();try{if(this.onBeforeLoad)this.onBeforeLoad()}catch(g){this._onError(g)}}this.addState("LOADING_DEPENDENCIES");try{if(!this._ignoreDeps&&this.config.loadDependenciesOnLoad)this.loadDependencies()}catch(g){throw g;}y.call(this)};a.prototype._singleUrlLoadHandler=function(g,z,B){++this.urlsLoaded;if(!g)++this.urlsFailed;if(this.urlsLoaded===
z.length){this.loadURLsNotFinished=false;if(g&&this.urlsFailed===0){this.addState("LOADED_URL");this.urlsLoaded=(new Date).valueOf();try{if(B)B(true)}catch(m){this._onError(m)}finally{this.onScriptsLoadSuccess()}}else{var C="error loading urls. Failed "+this.urlsFailed;this._onError(C);this.addState("FAILED_TO_LOAD_URL");this.urlsLoaded=-(new Date).valueOf();try{this.scriptLoadingFailed=true;if(B)B(false)}catch(m){this._onError(m)}finally{this.onScriptLoadError(C)}}}};a.prototype.loadURLs=function(g,
z){var B=g||this.config.url;this.addState("LOADING_URL");try{if(B&&!(B instanceof Array))B=[B];for(var C=0;C<B.length;C++){this.loadURLsNotFinished=true;var m=B[C];m=this.prepareURL(m);this.loadURL(m,function(l){this._singleUrlLoadHandler(l,B,z)}.bind(this))}}catch(l){this.loadURLsNotFinished=false;this.addState("UNEXPECTED_FAIL");this.unexpectedFail=(new Date).valueOf();this._onError(l)}};a.prototype.prepareLocationObject=function(g){return g};a.prototype.prepareURL=function(g){return g};a.prototype.prepareHTML=
function(g){return g};a.prototype.loadURL=function(g,z,B){var C=g;this.addState("LOADING_URL");x.loadScript({onsuccess:function(){try{if(z)z(true)}catch(m){}}.bind(this),onerror:function(){try{if(z)z(false)}catch(m){}}.bind(this),url:C,node:B||this.config.urlLocation,async:this.isLoadingAsynchronously(),noMultipleLoad:this.config.noMultipleLoad})};a.prototype.onRestart=function(g){this.events.on(D,g)};a.prototype.prepareForRestart=function(){if(this.config.restartable){var g=this.restartCounter+1;
this.events.call(D,this);this.reset();this.restartCounter=g}};a.prototype.restart=function(){if(this.config.restartable){this.prepareForRestart();this.run()}};a.prototype.reset=function(){var g;this._injectHTMLTriggered=g;this._loadExecutionURLsAndHTMLInformed=g;this._lockedDocWriteInformed=g;this._runOnceTriggered=g;this._urlLoadTriggered=g;this.afterRun=g;this.beforeRun=g;this.filtersRunTriggered=g;this.injectHTMLFailed=g;this.loadStarted=g;this.loadURLsNotFinished=g;this.loadedDependencies=g;this.loadingDependenciesFailed=
g;this.loadingTimedOut=g;this.runIsFinished=g;this.scriptExecuted=g;this.scriptLoadingFailed=g;this.delayDocWrite=g;this._securedWrites=g;this.state=0;this.unexpectedFail=g;this.urlsFailed=0;this.urlsLoaded=0;this.waitForDependenciesFinished=g;this.isRunning=g;this.lastRun=g;this.cancelled=g;this._beforeEntered=g;this.awaitingDependencies=g;this.timeoutCountdownStart=g;this.restartCounter=0;this.runtimeId=q.UUID();this.addState("INITIAL")};a.prototype.isLoadingAsynchronously=function(){if(this._wasTimed)return true;
return!!(this.config.async||this.forceAsynchronous)};a.prototype.willSecureDocumentWrite=function(){return this.config.usesDocumentWrite&&this.isLoadingAsynchronously()};a.prototype.injectHTML=function(g){var z=!this.docWriteAsksToWaitForBody();var B=this.prepareHTML(this.getHtml());if(B)p.injectHTMLForLoader(this,g,z,B)};a.prototype.clone=function(){var g=new a(this.config);return g}})();(function(){function a(d){var b={filterTimeout:d&&d.filterTimeout||this.FILTER_WAIT_TIMEOUT,PACKAGE:d&&d.PACKAGE,
dedupe:false,needsConsent:false,inactive:false,variables:null,runner:null,disabled:false,locked:false,reRunOnVariableChange:false};q.setIfUnset(d,b);a.SUPER.apply(this,arguments);this.namedVariables={};this._runtimeMarkers={};this.parameters=[];this.filters=[];this.session=null;this.owningContainer=null;this.pingSent=false;this.oldPingSent=false;this.dedupePingSent=false;this.oldDedupePingSent=false;this.reRunCounter=0;if(d){this.addState("INITIAL");try{a.register(this)}catch(h){}this.setupConfig(d);
this.uniqueRefString=null;if(d.init)try{d.init.call(this,d)}catch(h){}this.onTagInit();this.handleVariableChange=this._handleVariableChange.bind(this)}}function y(d,b){var h=d.namedVariables;var n=u.initPageVariable(h[b]);h[b]=n;return n}var q=r.opentag.Utils;var x=r.opentag.TagsUtils;var e=r.opentag.Timed;var p=r.opentag.filter.BaseFilter;var c=r.opentag.GenericLoader;var u=r.opentag.TagHelper;var v=r.opentag.pagevariable.BaseVariable;var w=r.Cookie;var D=r.Define;D.clazz("qubit.opentag.BaseTag",
a,c);a.prototype.setupConfig=function(d){if(!d)return;if(d.filters)this.addFilters(d.filters);if(d.parameters)this.addParameters(d.parameters);if(d.variables)for(var b in d.variables)if(d.variables.hasOwnProperty(b)){var h=this.getParameterByTokenName(b);if(h){var n=d.variables[b];h.variable=n;if(n.defaultValue!==undefined)h.defaultValue=n.defaultValue;if(n.uv!==undefined)h.uv=n.uv}}if(d.locked)this.lock()};a.prototype.valueForToken=function(d,b){var h=this.getParameterByTokenName(d);if(h){if(b===
undefined)if(this.loadingTimedOut)b=true;return this.getParameterValue(h,b)}var n=this.namedVariables;if(n&&n[d]){var A=y(this,d);if(A)return A.getRelativeValue(b)}return undefined};a.prototype.addParameters=function(d){this.parameters=this.parameters.concat(d)};a.prototype.LOADING_TIMEOUT=5*1E3;a.prototype.FILTER_WAIT_TIMEOUT=-1;a.prototype._isVariable=function(d){return d!==null&&d!==undefined};a.prototype.run=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();
var d=this.parameters;if(d)for(var b=0;b<d.length;b++){var h=this.getVariableForParameter(d[b]);if(!this._isVariable(h)){this._markLoadingDependenciesFailed();this._markFinished();return}}if(this.config.runner){var n=false;try{this.addState("AWAITING_CALLBACK");n=this._runner=(new Date).valueOf();this.config.runner.call(this)}catch(A){}return n}else{this._runner=false;return this.start()}};a.prototype.lock=function(){this.locked=true;this._unlock=null};a.prototype.unlock=function(){this.locked=false;
if(this._unlock){this._unlock();this._unlock=false}};a.prototype.start=function(){if(!this.locked)return a.SUPER.prototype.run.call(this);else{this._unlock=function(){return a.SUPER.prototype.run.call(this)}.bind(this);return false}};a.prototype.startOnce=function(){if(!this.locked)return a.SUPER.prototype.runOnce.call(this);else{this._unlock=function(){return a.SUPER.prototype.runOnce.call(this)}.bind(this);return false}};a.prototype.getFilters=function(){return this.filters};a.prototype.runOnceIfFiltersPass=
function(){if(!this._runOnceIfFiltersPassTriggered&&!this.scriptExecuted){this._runOnceIfFiltersPassTriggered=(new Date).valueOf();this.runIfFiltersPass()}};a.prototype.runIfFiltersPass=function(){if(this.destroyed)throw"Tag is destroyed.";this.resolveAllDynamicData();this.runPostInitialisationSection();var d=this.filtersState(true);this.addState("FILTER_ACTIVE");if(!this.filtersRunTriggered)this.filtersRunTriggered=(new Date).valueOf();if(d===p.state.SESSION){this.addState("AWAITING_CALLBACK");this.awaitingCallback=
(new Date).valueOf()}else if(d===p.state.PASS){this.filtersPassed=(new Date).valueOf();try{this.onFiltersPassed()}catch(h){}this.run()}else if(d===p.state.FAIL){this._markFiltersFailed();this._markFinished()}else if(d>0){var b=this.config.filterTimeout;if(b<0||(new Date).valueOf()-this.filtersRunTriggered>b){if(!this._awaitingForFilterInformed){this._awaitingForFilterInformed=(new Date).valueOf();try{this.onFiltersDelayed()}catch(h){}}this._setTimeout(this.runIfFiltersPass.bind(this),d)}else{this._markFiltersFailed();
this._markFinished();this.filtersRunTimedOut=(new Date).valueOf()}}try{this.onFiltersCheck(d)}catch(h){}return d};a.prototype._markFiltersFailed=function(){this.addState("FILTERS_FAILED");this.filtersPassed=-(new Date).valueOf()};a.prototype.STATE={INITIAL:0,FILTER_ACTIVE:1,AWAITING_CALLBACK:2,FILTERS_FAILED:4,STARTED:8,LOADING_DEPENDENCIES:16,LOADED_DEPENDENCIES:32,LOADING_URL:64,LOADED_URL:128,EXECUTED:256,EXECUTED_WITH_ERRORS:512,FAILED_TO_LOAD_DEPENDENCIES:1024,FAILED_TO_LOAD_URL:2048,FAILED_TO_EXECUTE:4096,
TIMED_OUT:4096*2,UNEXPECTED_FAIL:4096*2*2,CANCELLED:4096*2*2*2};a.prototype.addState=function(d){a.SUPER.prototype.addState.call(this,d);try{a.onStateChange(this)}catch(A){}this.stateStack=[];var b=this.STATE;var h=this.state;var n=this.stateStack;if(h&b.INITIAL)n.push("Initial state.");if(h&b.FILTER_ACTIVE)n.push("Tag running with filters pass triggered.");if(h&b.FILTERS_FAILED)n.push("Filters failed to pass.");if(h&b.AWAITING_CALLBACK)n.push("Awaiting callback to run this tag. Not pooling.");if(h&
b.STARTED)n.push("Tag is initialised and loading has been started.");if(h&b.LOADING_DEPENDENCIES)n.push("Dependencies are being loaded.");if(h&b.LOADED_DEPENDENCIES)n.push("Dependencies loading process has been finished.");if(h&b.LOADING_URL)n.push("External URL is being loaded.");if(h&b.LOADED_URL)n.push("External URL has been loaded.");if(h&b.EXECUTED)n.push("Main script has been executed.");if(h&b.EXECUTED_WITH_ERRORS)n.push("Main script has been executed but errors occured.");if(h&b.FAILED_TO_LOAD_DEPENDENCIES)n.push("Dependencies has failed to load.");
if(h&b.FAILED_TO_LOAD_URL)n.push("URL location failed to load.");if(h&b.FAILED_TO_EXECUTE)n.push("Script failed to execute.");if(h&b.TIMED_OUT)n.push("Script timed out awaiting for dependencies.");if(h&b.UNEXPECTED_FAIL)n.push("Script occured UNEXPECTED exception and is failed.");if(h&b.CANCELLED)n.push("Tag has been cancelled.")};a.prototype.onTagInit=K;a.prototype.postInitialisationSection=K;a.onStateChange=K;a.prototype.onFiltersDelayed=K;a.prototype.onFiltersPassed=K;a.prototype.onFiltersCheck=
K;a.prototype.state=a.prototype.STATE.INITIAL;a.prototype.arePageVariablesLoaded=function(d){return u.allParameterVariablesReadyForTag(this,d)};a.prototype.getDependenciesToBeLoaded=function(d,b){var h=b||[];if(!this.arePageVariablesLoaded(d))h.push("page variables");return a.SUPER.prototype.getDependenciesToBeLoaded.call(this,d,h)};a.prototype.resolveAllDynamicData=function(){this.resolvePageVariables();this.resolveDependencies();this.resolveFilters()};a.prototype.resolveDependencies=function(){var d=
this.failedDependenciesToParse;if(d){this.failedDependenciesToParse=null;this.addDependenciesList(d,D.clientSpaceClasspath())}return this.dependencies};a.prototype.addClientVariablesMap=function(d){this.unresolvedClientVariablesMap=this._addVariablesMap(d,D.clientSpaceClasspath());return this.unresolvedClientVariablesMap};a.prototype.resolvePageVariables=function(){var d=this.unresolvedClientVariablesMap;if(d){this.unresolvedClientVariablesMap=null;this.addClientVariablesMap(d)}d=this.unresolvedVariablesMap;
if(d){this.unresolvedVariablesMap=null;this.addVariablesMap(d)}return this.getPageVariables()};a.prototype.addVariablesMap=function(d){this.unresolvedVariablesMap=this._addVariablesMap(d);return this.unresolvedVariablesMap};a.prototype._addVariablesMap=function(d,b){if(!d)return;var h={};var n=this.namedVariables;for(var A in d)if(d.hasOwnProperty(A)){var G=d[A];if(G instanceof v)n[A]=G;else if(typeof G==="string"){var J=G;if(b)G=b+"."+G;var L=q.getObjectUsingPath(G);if(L)if(L instanceof v)n[A]=L;
else n[A]=G;else h[A]=J}else;}return h};a.prototype.prepareURL=function(d){return this.replaceTokensWithValues(d)};a.prototype.prepareLocationObject=function(d){return this.replaceTokensWithValues(d)};a.prototype.prepareHTML=function(d){if(d)d=this.replaceTokensWithValues(d);return d};a.prototype._executeScript=function(){if(this.config&&this.config.script)if(typeof this.config.script==="function")this.script=this.config.script;else{var d=this.replaceTokensWithValues(String(this.config.script));this.script=
q.expressionToFunction(d).bind(this)}a.SUPER.prototype._executeScript.call(this)};a.prototype.replaceTokensWithValues=function(d){if(!d||d.indexOf("${")===-1)return d;var b=this.parameters;if(b)for(var h=0;h<b.length;h++){var n=b[h];var A=this.getVariableForParameter(n);if(A){var G=b[h].token;var J=this.valueForToken(G);d=A.replaceToken(G,d,J)}}return d};a.prototype.getParameter=function(d){var b=this.parameters;var h=null;if(b)for(var n=0;n<b.length;n++)if(b[n].name===d)h=b[n];return h};a.prototype.setParameterValueByTokenName=
function(d,b){var h=this.getParameterByTokenName(d);if(h!==null){h.variable={value:b};return true}return false};a.prototype.getParameterValue=function(d,b){var h=typeof d==="string"?this.getParameter(d):d;if(h){var n=this.getVariableForParameter(h);if(n)try{var A;if(b&&h.defaultValue!=="")A=q.gevalAndReturn(h.defaultValue).result;A=n.getRelativeValue(b,A);return A}catch(G){return undefined}}return undefined};a.prototype.filtersState=function(d){var b=d;return x.filtersState(this.filters,this.session,
this,b)};a.prototype.addFilter=function(d){q.addToArrayIfNotExist(this.filters,d)};a.prototype.addFilters=function(d){for(var b=0;b<d.length;b++)this.addFilter(d[b])};a.prototype.addClientFiltersList=function(d){this.unresolvedClientFilterClasspaths=this.addFiltersList(d,D.clientSpaceClasspath());return this.unresolvedClientFilterClasspaths};a.prototype.resolveFilters=function(){var d=this.unresolvedClientFilterClasspaths;if(d){this.unresolvedClientFilterClasspaths=null;this.addClientFiltersList(d)}return this.filters};
a.prototype.addFiltersList=function(d,b){var h=[];for(var n=0;n<d.length;n++)try{var A=d[n];var G=A;var J=null;if(typeof A==="string"){J=A;if(b)A=b+"."+A;A=q.getObjectUsingPath(A)}if(typeof A==="function"){var L=A;A=new L}if(!A);if(!A instanceof p)A=null;if(A)this.addFilter(A);else if(J)q.addToArrayIfNotExist(h,J)}catch(M){this.failedFilters=this.failedFilters||[];this.failedFilters.push(d[n])}return h};a.prototype.reset=function(){a.SUPER.prototype.reset.call(this);var d;this.filtersPassed=d;this.dedupePingSent=
false;this.oldDedupePingSent=false;this.pingSent=false;this.oldPingSent=false;this._runOnceIfFiltersPassTriggered=d;this.filtersRunTriggered=d;this._runner=d;this.reRunCounter=0;this.detachVariablesChangedListeners()};a.prototype.resetFilters=function(){for(var d=0;d<this.filters.length;d++)this.filters[d].reset()};a.prototype.getParameterByTokenName=function(d){var b=null;if(this.parameters){var h=this.parameters;for(var n=0;n<h.length;n++)if(h[n].token===d)b=h[n]}return b};a.prototype.removeFilter=
function(d){q.removeFromArray(this.filters,d)};var g=0;var z=[];var B={};var C={};a.register=function(d){var b=q.addToArrayIfNotExist(z,d);if(b===-1)d._tagIndex=z.length-1;else d._tagIndex=b;if(d.config.id){var h="Q"+d.config.id;C[h]=d;d.uniqueId=h}else C[d.CLASSPATH]=d};a.getById=function(d){return C[String(d)]};a.prototype.getById=a.getById;a.prototype.unregister=function(d){a.unregister(d||this)};a.prototype.destroy=function(){this.destroyed=true;this.cancel();a.unregister(this)};a.unregister=
function(d){var b=q.removeFromArray(z,d);d._tagIndex=-1};a.getTags=function(){return z};a.getAccessorsMap=function(){return B};a.prototype.getTags=function(){return z};a.prototype.getPageVariables=function(){var d=this.parameters;var b=[];if(d)for(var h=0;h<d.length;h++){var n=this.getVariableForParameter(d[h]);if(this._isVariable(n))q.addToArrayIfNotExist(b,n)}if(this.namedVariables)for(var A in this.namedVariables)q.addToArrayIfNotExist(b,y(this,A));return b};a.prototype.getAccessorString=function(){if(!this._accessorsMapKey){this._accessorsMapKey=
"_"+g++;B[this._accessorsMapKey]=this}return"qubit.opentag.BaseTag.getAccessorsMap()."+this._accessorsMapKey};a.prototype.getVariableForParameter=function(d){var b;var h=this.namedVariables;if(h&&h[d.token])b=y(this,d.token);if(!b)b=u.validateAndGetVariableForParameter(d);return b};a.prototype.printVariablesState=function(){var d=[];var b=u.getAllVariablesWithParameters(this);for(var h=0;h<b.length;h++){var n=b[h].parameter;var A=b[h].variable;var G;if(n&&n.token)G=this.valueForToken(n.token);else G=
A.getRelativeValue(true);var J={name:A.config.name,exists:A.exists(),token:n?n.token:null,value:G,variable:A};d.push(J)}return d};a.prototype._triggerOnLoadTimeout=function(){this.onLoadTimeout()};a.prototype.getId=function(){return this._getUniqueId()};a.prototype._getUniqueId=function(){if(this.config.id)return this.config.id;if(String(this.CLASSPATH).indexOf(D.STANDARD_CS_NS)===0)return this.CLASSPATH.substring(D.STANDARD_CS_NS.length+1);else return this.CLASSPATH+"#"+this.config.name};var m="qubit.tag.forceRunning_";
var l="qubit.tag.disableRunning_";var t="qubit.tag.forceAllToRun";a.prototype.cookieSaysToRunEvenIfDisabled=function(){var d=this._getUniqueId();var b=!!w.get(t);if(!b)b=!!w.get(m+d);return b};a.prototype.setCookieForcingTagToRun=function(){var d=this._getUniqueId();w.set(m+d,"true")};a.setCookieForcingTagsToRun=function(){w.set(t,"true")};a.prototype.setCookieToDisable=function(){var d=this._getUniqueId();w.set(l+d,"true")};a.prototype.rmCookieToDisable=function(){var d=this._getUniqueId();w.rm(l+
d)};a.prototype.disabledByCookie=function(){var d=this._getUniqueId();return!!w.get(l+d)};a.rmCookieForcingTagsToRun=function(){w.rm(t)};a.prototype.rmCookieForcingTagToRun=function(){var d=this._getUniqueId();w.rm(m+d)};a.rmAllDisablingCookies=function(){q.rmCookiesMatching(l)};a.rmAllCookiesForcingTagToRun=function(){q.rmCookiesMatching(m);a.rmCookieForcingTagsToRun()};a.prototype.onVariableChanged=function(d){this.attachVariablesChangedListeners(true);this.events.on("variableChanged",d)};a.prototype._handleVariableChange=
function(d){this.events.call("variableChanged",d);if(!this.isRunning&&this.config.reRunOnVariableChange){if(!isNaN(this.config.reRunLimit))if(this.config.reRunLimit<=this.reRunCounter)return;var b=this.reRunCounter+1;this.reset();this.reRunCounter=b;this.resetFilters();this.runIfFiltersPass()}};a.prototype.attachVariablesChangedListeners=function(d){var b=this.getPageVariables();var h=!!(this.config.reRunOnVariableChange||this.config.observeVariables||d);if(h)for(var n=0;n<b.length;n++){var A=b[n];
A.onValueChanged(this.handleVariableChange,h)}};a.prototype.detachVariablesChangedListeners=function(){var d=this.getPageVariables();for(var b=0;b<d.length;b++){var h=d[b];h.deatchOnValueChanged(this.handleVariableChange)}};a.prototype._markFinished=function(){a.SUPER.prototype._markFinished.call(this);this.attachVariablesChangedListeners()};a.prototype.prepareForRestart=function(d){if(this.config.restartable){a.SUPER.prototype.prepareForRestart.call(this,false);if(!d){var b=this.getFilters();for(var h=
0;h<b.length;h++)b[h].prepareForRestart()}}};a.prototype.restart=function(d){if(this.config.restartable){this.prepareForRestart(d);this.runIfFiltersPass()}};a.prototype.runPostInitialisationSection=function(){if(!this._postInitialisationRun){this._postInitialisationRun=true;if(this.postInitialisationSection)try{this.postInitialisationSection()}catch(d){}}}})();(function(){function a(e){q.setIfUnset(e,a.defaultConfig);if(this.singleton){var p=this.PACKAGE_NAME+"."+this.CLASS_NAME;var c=r.opentag.Utils.getObjectUsingPath(p,
F);if(c.__instance)return c.__instance;c.__instance=this}a.SUPER.call(this,e)}function y(e,p){var c=e.toString();c=c.replace(/\s*function\s*\([\w\s,_\d\$]*\)\s*\{/,"");c=c.substring(0,c.lastIndexOf("}"));c=c.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)/g,'$1"${$2}"');c=c.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'\s*\)(\s*\+\s*["'])/g,'"${$1}"$2');c=c.replace(/(["']\s*\+\s*)\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)/g,'$1"${$2}"');c=c.replace(/\s*_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"\s*\)(\s*\+\s*["'])/g,
'"${$1}"$2');c=c.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*'([^']*)'(\s*)\)/g,"$1${$2}$3");c=c.replace(/(\s*)_*\w+\s*\.\s*valueForToken\s*\(\s*"([^"]*)"(\s*)\)/g,"$1${$2}$3");c=p.replaceTokensWithValues(c);q.geval(c)}var q=r.opentag.Utils;var x=r.Define;r.Define.clazz("qubit.opentag.LibraryTag",a,r.opentag.BaseTag);a.defaultConfig={vendor:null,imageUrl:null,description:"",async:false,isPrivate:false,upgradeable:true,html:"",parameters:[],prePostWindowScope:false};a.prototype.pre=function(){};
a.prototype.post=function(){};a.prototype.before=function(){a.SUPER.prototype.before.call(this);try{var e=this.config;if(e&&e.pre)if(typeof e.pre==="function")this.pre=e.pre;else{var p=this.replaceTokensWithValues(String(e.pre));this.pre=q.expressionToFunction(p).bind(this)}if(this.config.prePostWindowScope&&this.pre!==a.prototype.pre&&this.pre.toString)y(this.pre,this);else this.pre()}catch(c){return true}return false};a.prototype.after=function(e){a.SUPER.prototype.after.call(this,e);try{var p=
this.config;if(p&&p.post)if(typeof p.post==="function")this.post=p.post;else{var c=this.replaceTokensWithValues(String(p.post));this.post=q.expressionToFunction(c).bind(this)}if(this.config.prePostWindowScope&&this.post!==a.prototype.post&&this.post.toString)y(this.post,this);else this.post(e)}catch(u){}};a.define=function(e,p){e=e.replace(/^[\.]+/g,"").replace(/[\.]+$/g,"").replace(/\.+/g,".");e=r.Define.vendorsSpaceClasspath(e);var c={};if(p.getDefaultConfig)c=p.getDefaultConfig();var u=p.CONSTRUCTOR;
var v={};for(var w in p)if(w!=="config")v[w]=p[w];var D=function(B){B=B||{};B=q.overrideFromLeftToRight(c,B);var C=r.opentag.LibraryTag.call(this,B);if(u)u.call(this,B);if(C)return C};var g=r.opentag.Utils.defineWrappedClass(e,a,v,O,D);var z=x.STANDARD_VS_NS+".";if(e.indexOf(z)!==0)q.namespace(z+e,g);return g};a.getLibraryByClasspath=function(e){return q.getObjectUsingPath(e,r.Define.getVendorSpace())}})();(function(){function a(q){var x={url:null,html:"",locationPlaceHolder:"NOT_END",locationObject:"BODY",
async:true};y.setIfUnset(q,x);a.SUPER.call(this,q)}var y=r.opentag.Utils;r.Define.clazz("qubit.opentag.CustomTag",a,r.opentag.LibraryTag)})();(function(){var a=r.opentag.Utils;var y=r.opentag.filter.BaseFilter;var q=function(){};r.Define.clazz("qubit.opentag.Tags",q);q.getById=function(e){return r.opentag.BaseTag.getById(String(e))};q.getAllTagsByState=function(){return r.opentag.Container.getAllTagsByState(q.getTags())};q.findTagByName=function(e){var p=this.getTags();var c=[];for(var u=0;u<p.length;u++)if(p[u].config.name===
e)c.push(p[u]);return c};q.findTagByMatch=function(e){var p=this.getTags();var c=[];for(var u=0;u<p.length;u++)if(p[u].config.name.match(e))c.push(p[u]);return c};q.findTagContainers=function(e){var p=q.getContainers();var c=[];for(var u=0;u<p.length;u++){var v=p[u].tags;for(var w in v)if(v[w]===e){c.push(p[u]);break}}return c};q.getTags=function(){return r.opentag.BaseTag.getTags()};q.resetAllTags=function(e){var p=q.getTags();for(var c=0;c<p.length;c++){p[c].reset();if(!e)p[c].resetFilters()}};
q.getContainersPageVariables=function(){var e=q.getContainers();var p=[];for(var c=0;c<e.length;c++)p=p.concat(e.getPageVariables());return p};q.getAllPageVariables=function(){var e=q.getTags();var p=[];for(var c=0;c<e.length;c++)p=p.concat(e[c].getPageVariables());return p};q.cancelAll=function(){var e=q.getTags();for(var p=0;p<e.length;p++)e[p].cancel()};q.resetAll=function(e){var p=q.getTags();for(var c=0;c<p.length;c++){p[c].reset();if(!e)p[c].resetFilters()}};q.getPageVariableByName=function(e){var p=
q.getAllPageVariables();var c=[];for(var u=0;u<p.length;u++)if(p[u].config.name===e)c.push(p[u]);return c};q.getLoadTime=function(e){var p=e.beforeRun;var c=e.runIsFinished;if(isNaN(c))return{tag:e,loadTime:null};else return{tag:e,loadTime:c-p}};q.getLoadTimes=function(e){var p=[];if(e instanceof r.opentag.BaseTag){p.push([q.getLoadTime(e[v])]);return p}e=e||q.getTags();var c=e instanceof Array;if(c)for(var u=0;u<e.length;u++){if(e[u]instanceof r.opentag.BaseTag)p.push(q.getLoadTime(e[u]))}else for(var v in e)if(e[v]instanceof
r.opentag.BaseTag)p.push(q.getLoadTime(e[v]));return p};q.forceAllContainersAndTagsToRunIfDisabled=function(){r.opentag.Container.setCookieForDisabledContainersToRun();r.opentag.BaseTag.setCookieForcingTagsToRun()};q.rmAllContainersAndTagsForcingFlags=function(){r.opentag.Container.rmCookieForDisabledContainersToRun();r.opentag.BaseTag.rmAllCookiesForcingTagToRun()};q.getContainers=function(){return r.opentag.Container.getContainers()};q.findAllTagsByClassPath=function(e){var p=(new Date).valueOf();
var c=[];var u=[];try{u.push(r.opentag.CustomTag);u.push(r.opentag.LibraryTag)}catch(g){}var v=q.getTags();for(var w=0;w<v.length;w++){var D=v[w];if(a.indexInArray(u,D)<0&&D.PACKAGE_NAME.indexOf(e)===0)c.push(D)}return c};q.findAllTags=function(e,p){var c=r.opentag.BaseTag;var u;var v=[];var w=(new Date).valueOf();try{v.push(r.opentag.CustomTag);v.push(r.opentag.LibraryTag)}catch(D){}u=q.findAllInstances(e,c,v,p);return u};var x=function(e,p,c,u){var v=[];if(typeof e==="string")e=a.getObjectUsingPath(e);
if(e){var w={objectsOnly:true};if(u)w.maxDeep=true;var D=function(g,z,B,C){if(p(g)){for(var m=0;m<c.length;m++)if(c[m]===g)return true;a.addToArrayIfNotExist(v,g);return true}return false}.bind(this);a.traverse(e,D,w)}return v};q.findAllInstances=function(e,p,c,u){var v=function(w){return w instanceof p};return x(e,v,c,u)};q.findAllInheriting=function(e,p,c,u){var v=function(w){return w.prototype instanceof p};return x(e,v,c,u)};q.findAllFilters=function(e,p){var c=[];try{c.push(r.opentag.filter.Filter);
c.push(r.opentag.filter.URLFilter)}catch(u){}return q.findAllInheriting(e,y,c,p)}})();N.cookie={};N.cookie.PageView={};N.cookie.PageView.update=function(){var a;var y;y=function x(){return Math.floor(1+Math.random()*65536).toString(36).substring(1)};if(!window.__pageViewId__){a=(new Date).getTime().toString(36);window.__pageViewId__=a+y()+y()+y()}return window.__pageViewId__};N.html.PostData=function(a,y,q,x){var e;var p;var c;var u;var v;var w;var D;var g;var z;var B;B=2;z=5E3;D=false;g=function(){if(B>
0)setTimeout(function(){if(!D){B-=1;e()}},z)};p=navigator.userAgent.toLowerCase();c=p.indexOf("msie")!==-1;u=p.indexOf("msie 9")!==-1;v=p.indexOf("msie 7")!==-1||p.indexOf("msie 6")!==-1;w=("https:"===document.location.protocol?"https:":"http:")+a;q=q||"POST";e=function(){var C;try{C=null;try{C=new XMLHttpRequest}catch(m){}if(C&&!c)C.open(q,w,true);else if(typeof XDomainRequest!=="undefined"){C=new XDomainRequest;C.open(q,w)}else C=null;try{C.withCredentials=false}catch(m){}if(C.setRequestHeader)if(x)C.setRequestHeader("Content-Type",
x);else C.setRequestHeader("Content-Type","text/plain;charset\x3dUTF-8");C.onload=function(){D=true};C.onreadystatechange=function(){};C.ontimeout=function(){};C.onerror=function(){};C.onprogress=function(){};C.send(y)}catch(m){try{try{N.html.fileLoader.load(w)}catch(l){if(window.console&&window.console.log)window.console.log(m)}}catch(l){}}};if(v){N.html.fileLoader.load(w);return}else e()};(function(){function a(){}function y(x,e){var p={};p.clientId=""+e.clientId;p.containerId=""+x.getContainerId();
p.classpath=""+x.PACKAGE_NAME;p.opentagStats=true;if(x.sentPing)p.containerLoad=false;else{x.sentPing=(new Date).valueOf();p.containerLoad=true}p.isS3=false;p.pageViewId=N.cookie.PageView.update();p.tags=[];return p}var q="text/plain;charset\x3dUTF-8";r.Define.clazz("qubit.opentag.Ping",a);a.prototype.sendErrors=function(x,e){};a.getPingID=function(x){if(x.config.id)return x.config.id;var e=x.PACKAGE_NAME.lastIndexOf(".");if(e!==-1)return x.PACKAGE_NAME.substring(e+1);else return x.PACKAGE_NAME};
a.prototype.send=function(x,e){var p=x.config;var c=y(x,p);var u=c.tags;var v=p.pingServerUrl;for(var w=0;w<e.length;w++){var D=e[w].tag;var g=e[w].loadTime;if(g===null||isNaN(g))continue;var z={};var B=a.getPingID(D);if(!D.pingSent&&B&&g!==null)if(B!==undefined){z.tagId=B;z.loadTime=g;z.fired=true;u.push(z);D.pingSent=true}else;else if(D.pingSent);else if(g===null);}if(v&&(u.length>0||c.containerLoad)){var C=P.stringify(c);var m="//"+v;N.html.PostData(m,C,"POST",q)}else{if(!u.length);if(!v);}};a.prototype.sendDedupe=
function(x,e){var p=x.config;var c=y(x,p);var u=p.pingServerUrl;var v=c.tags;for(var w=0;w<e.length;w++){var D=e[w];var g=a.getPingID(D);var z={};if(g===undefined);else if(!D.dedupePingSent){z.tagId=""+g;z.fired=false;z.loadTime=0;v.push(z);D.dedupePingSent=true}}if(u&&(v.length>0||c.containerLoad)){var B=P.stringify(c);var C="//"+u;N.html.PostData(C,B,"POST",q)}else{if(!v.length);if(!u);}}})();N.cookie.SimpleSessionCounter={};N.cookie.SimpleSessionCounter._cookieName="_qst_s";N.cookie.SimpleSessionCounter._sessionCookie=
"_qsst_s";N.cookie.SimpleSessionCounter.update=function(a){var y;var q;var x;var e=30;y=r.Cookie.get(N.cookie.SimpleSessionCounter._cookieName);q=r.Cookie.get(N.cookie.SimpleSessionCounter._sessionCookie);if(!y)y=1;else{y=parseInt(y,10);if(!q||parseInt(q,10)<(new Date).getTime()-e*60*1E3)y+=1}r.Cookie.set(N.cookie.SimpleSessionCounter._cookieName,y,365,a);r.Cookie.set(N.cookie.SimpleSessionCounter._sessionCookie,(new Date).getTime().toString(),null,a);return y};(function(){function a(v){if(v)if(v.alphabet){this.alphabet=
v.alphabet;this.dict={};for(var w=0;w<this.alphabet.length;w++)this.dict[this.alphabet[w]]=w}else{this.alphabet=q;this.dict=p}}function y(v,w){for(var D in w)if(v===w[D])return D;return null}var q=[];var x=Math.pow(2,8);for(var e=0;e<x;e++)q.push(String.fromCharCode(e));var p={};for(var c=0;c<q.length;c++)p[q[c]]=c;var u=r.Define;u.clazz("qubit.compression.LZW",a);a.prototype.encode=function(v){var w=this.alphabet.length;var D={};var g=[];var z=0;var B=v.charAt(z++);var C;for(var m=this.dict;!!(C=
v.charAt(z++));){var l=B+C;if(m.hasOwnProperty(l)||D.hasOwnProperty(l))B=l;else{var t=m.hasOwnProperty(B)?m[B]:D[B];if(t===undefined)throw"Dictionary base is to small for those contents: "+B;g.push(t);D[l]=w++;B=C}}if(B!=="")g.push(D.hasOwnProperty(B)?D[B]:m[B]);return g};a.prototype.decode=function(v){var w=this.dict;var D=this.alphabet.length;var g;var z={};var B=y(v[0],w);var C=B;var m=[B];for(var l=1;l<v.length;l++){var t=v[l];g=y(t,w);if(g===null){if(z.hasOwnProperty(t))g=z[t];if(g===null)g=
C+B}m.push(g);B=g.charAt(0);z[D++]=C+B;C=g}return m.join("")}})();(function(){function a(m){var l=0;var t=m<0;if(t)m=-m;var d="";var b=true;do{l=m%z;if(b){d=w[g[l]];b=false}else d=g[l]+d;m=(m-l)/z}while(m>0);if(t)return"-"+d;return d}function y(m){var l=0;var t=0;var d=true;for(var b=0;b<m.length;b++){var h=m.charAt(m.length-1-b);if(d){d=false;h=x.charAt(u[h])}l+=p[h]*Math.pow(z,t++)}return l}function q(m){}var x="abcdefghijklmnopqrstuvwxyz"+"0123456789"+"'%./:\x3c\x3e?[";var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ"+
"*!-+()@{|}"+'"]^_`~$\x26#';var p={};for(var c=0;c<x.length;c++)p[x.charAt(c)]=c;var u={};for(var v=0;v<x.length;v++)u[e.charAt(v)]=v;var w={};for(var D=0;D<x.length;D++)w[x.charAt(D)]=e.charAt(D);var g=x.split("");var z=g.length;var B=new r.compression.LZW({});var C=r.Define;C.clazz("qubit.compression.Compressor",q);q.prototype.compress=function(m,l){var t=(l||B).encode(m);var d=[];for(var b=0;b<t.length;b++)d.push(String.fromCharCode(t[b]));return d.join("")};q.prototype.compressAnsi=function(m,
l){var t=(l||B).encode(m);var d=[];for(var b=0;b<t.length;b++){var h=a(t[b]);d.push(h)}return d.join("")};q.prototype.decompressAnsi=function(m,l){var t=[];var d="";for(var b=0;b<m.length;b++){var h=m.charAt(b);if(u.hasOwnProperty(h)){var n=d+h;d="";n=y(n);t.push(n)}else d+=h}return(l||B).decode(t)};q.prototype.decompress=function(m,l){var t=[];for(var d=0;d<m.length;d++)t.push(m.charCodeAt(d));return(l||B).decode(t)}})();(function(){function a(t){var d=[];for(var b=0;b<t.length;b++){var h=p(t[b][0]);
d.push([new RegExp(h,"g"),"*"+t[b][1]])}return d}function y(t,d){for(var b=0;b<d.length;b++)if(d[b][1]===t)return d[b][0];return null}function q(t){this._regexDefs=g;this._defs=D;if(t)if(t.definitions){this._regexDefs=a(t.definitions);this._defs=t.definitions}}function x(t,d){var b=[];for(var h=0;h<t.length;h++){var n=true;if(d)n=t.charCodeAt(h)<=d;var A=w.cookieAlphabetMap.hasOwnProperty(t.charAt(h));if(n&&!A)b.push("*"+t.charCodeAt(h)+".");else b.push(t.charAt(h))}return b.join("")}function e(t,
d){d=d.replace(/@/g,"@@");var b=[];var h=0;for(var n=0;h<t.length;h++){var A=t[h][0];var G=new RegExp(p(A),"g");var J=d.replace(G,"@"+n+"-");if(J!==d){b.push(t[h][0]);n++;d=J}}return[d,b]}function p(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function c(t){var d={};var b="";for(var h=0;h<t.length;h++){var n=t.charAt(h);if(!B[n]){if(isNaN(d[b]))d[b]=t.split(b).length-1;b=""}else b+=n}var A=[];for(var G in d)if(d.hasOwnProperty(G)){var J=d[G];if(J>=l&&G.length>=m)A.push([G,J])}A=A.sort(function(L,
M){if(L[0].length===M[0].length)return 0;if(M[0].length>L[0].length)return 1;else return-1});return A}function u(t,d){if(!d||d.length===0||!t)return t;var b="";var h=false;var n=false;var A="";for(var G=0;G<t.length;G++){var J=t.charAt(G);if(J==="@"||h||n)if(h||n){h=false;if(J==="@")b+="@";else if(!isNaN(+("-"+J))){n=true;A=A+J}else if(n){if(d&&J==="-"&&d[+A])b+=d[+A];else b+="@"+A+J;A="";n=false}else b+="@"+J}else h=true;else b+=J}if(A)b+="@"+A;if(h)b+="@";return b}var v=r.Define;var w=r.Cookie;
var D=[['","referrer":[{"url":"http://',"1-"],['","referrer":[{"url":"https://',"2-"],[',"referrer":[{"url":"http://',"3-"],[',"referrer":[{"url":"https://',"4-"],[',"sessionStartTime":',"5-"],["www.google.co.uk","6-"],["www.google.","7-"],['"sessionStartTime":',"8-"],['"landing":"',"9-"],["http%3A%2F%2Fwww","10-"],['"landing":',"L"],['"time":',"A"],['"pageViews":',"P"],['"sessionCount":',"B"],['"referrer":',"R"],['"url":"http://www.',"J"],['"url":"https://www.',"M"],['"url":"',"I"],['"url":',"U"],
["http://www.","W"],["https://www.","V"],["%2Fen%2Ftsuk%2F","K"],['"sessionLandingPage":',"F"],["http%3A%2F%2F","D"],["http://","H"],["https://","X"],['""',"O"],['",',"Y"],['":{}}',"z"],["\x3c","S"],["\x3e","G"],["[","Z"],["]","E"],["{","a"],["}","b"],["(","c"],[")","d"],["!","e"],["#","f"],["$","g"],["!","q"],["'","i"],[":","j"],["?","k"],["^","x"],["`","m"],["|","n"],["~","o"],["%","v"],[",","C"]];var g=a(D);v.clazz("qubit.opentag.compression.Encoder",q);q.prototype.encode=function d(b,h){var n=
b.replace(/\*/g,"**");var A=c(n);for(var G=0;G<this._regexDefs.length;G++){var J=this._regexDefs[G];n=n.replace(J[0],J[1])}n=n.replace(/;/g,"*-");n=n.replace(/&/g,"*.");n=n.replace(/\\/g,"*/");n=n.replace(/=/g,"*+");n=n.replace(/\n/g,"*N");n=n.replace(/ /g,"*_");n=n.replace(/\t/g,"*T");n=n.replace(/"/g,"*Q");var L=c(n);L.concat(A);var M=e(L,n);var Q=M[1];var S=Q.length>0;if(S)n=M[0];if(!h)n=x(n);else n=x(n,h);if(S)return"Y"+Q.join("*")+"@"+n;else return"N"+n};var z="abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ+_.";
var B={};for(var C=0;C<z.length;C++)B[z.charAt(C)]=true;var m=4;var l=2;q.prototype.decode=function(d){var b=null;if(d.charAt(0)==="N")d=d.substring(1);else if(d.charAt(0)==="Y"){var h=d.indexOf("@");if(h>=0){b=d.substring(1,h);b=b.split("*");d=d.substring(h+1);d=u(d,b)}}var n="";var A=false;var G=false;var J="";for(var L=0;L<d.length;L++){var M=d.charAt(L);if(M==="*"||A||G)if(A||G){A=false;if(!isNaN(+("-"+M))){J=J+M;G=true}else if(G){if(M===".")n+=String.fromCharCode(+J);else if(M==="-"&&y(J+"-",
this._defs))n+=y(J+"-",this._defs);else n+="*"+J+M;J="";G=false}else if(M==="*")n+="*";else if(M==="-")n+=";";else if(M==="/")n+="\\";else if(M===".")n+="\x26";else if(M==="+")n+="\x3d";else if(M==="N")n+="\n";else if(M==="_")n+=" ";else if(M==="T")n+="\t";else if(M==="Q")n+='"';else if(y(M,this._defs)!==null){var Q=y(M,this._defs);n+=Q}else n+="*"+M}else A=true;else n+=M}if(J)n+="*"+J;if(A)n+="*";return n}})();(function(){function a(e){this.testBinary=false;this.binSupported=x;if(e){this.compressor=
new r.compression.Compressor;this.encoder=new r.opentag.compression.Encoder({})}}var y=r.Define;var q=r.Cookie;var x=false;y.clazz("qubit.opentag.compression.CookieCompressor",a);a.prototype.compress=function(e,p){if(typeof e!=="string"||e==="")return e;var c=this.encoder.encode(e);var u;if(this.binSupported||this.testBinary){var v=this.compressor.compress(c);u='"B'+this.encoder.encode(v,128)+'"';q.set("__qtag_test_bin__",u,undefined,undefined,true);var w=q.get("__qtag_test_bin__",true);q.rm("__qtag_test_bin__");
if(w&&w!==u)u=null}var D;var g=this.encoder.encode(this.compressor.compressAnsi(c));if(!p&&c.length<=g.length)D="E"+c;else D="C"+g;if(u&&u.length<D.length)return u;else return D};a.prototype.decompress=function(e){if(typeof e!=="string"||e==="")return e;if(e.charAt(0)==='"')e=e.substring(1,e.length-1);var p=e.charAt(0);e=e.substring(1);switch(p){case "E":return this.encoder.decode(e);case "C":var c=this.compressor.decompressAnsi(this.encoder.decode(e));return this.encoder.decode(c);case "B":var u=
this.compressor.decompress(this.encoder.decode(e));return this.encoder.decode(u);default:throw"This code is not supported! Code: "+p;}}})();(function(){var a=r.Cookie;var y=r.opentag.Utils;var q=function(){};r.Define.clazz("qubit.opentag.Session",q);var x=new r.opentag.compression.CookieCompressor({});q.readCompressedCookie=function(e){var p=a.get(e,true);return x.decompress(p)};q.setupSession=function(e){var p=e.config;var c;var u;var v;var w;var D;var g;c={};c.sessionCount=N.cookie.SimpleSessionCounter.update(p.cookieDomain);
D="qtag_"+e.getContainerId();var z="x_qtag_"+e.getContainerId();v=a.get(D);var B=!!v;if(v===null){v=a.get(z,true);v=x.decompress(v)}if(v)try{v=P.parse(v)}catch(m){v={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}}}else v={sc:0,sessionCount:0,pageViews:0,sessionStartTime:0,referrer:[],sessionLandingPage:"",__v:{}};g=(new Date).getTime();if(c.sessionCount!==parseInt(v.sc,10)){v.sessionStartTime=g;v.sc=c.sessionCount;v.sessionCount+=1;v.referrer.push({url:q.getReferrer(),
landing:y.getUrl().substring(0,300),time:g});v.sessionLandingPage=y.getUrl().substring(0,300)}else if(q.isReferrerDifferent())if(!q.referrerIsSameAsPrevious(v.referrer,g,30*60*1E3)){v.referrer.push({url:q.getReferrer(),landing:y.getUrl().substring(0,300),time:g});v.sessionLandingPage=y.getUrl().substring(0,300);v.sessionStartTime=g;v.sessionCount+=1}c.sessionCount=v.sessionCount;c.sessionStartTime=v.sessionStartTime;c.pageStartTime=g;v.pageViews+=1;c.pageViews=v.pageViews;c.sessionLandingPage=v.sessionLandingPage;
c.referrer=v.referrer;if(c.referrer.length>5)c.referrer.splice(2,c.referrer.length-5);w=P.stringify(v);for(u=0;x.compress(w).length>p.maxCookieLength&&u<5;){if(v.referrer.length>=3)v.referrer.splice(2,1);else if(v.referrer.length===2)v.referrer=[v.referrer[0]];else if(v.referrer.length===1)v.referrer=[];w=P.stringify(v);u+=1}c.referrer=v.referrer;if(B)a.rm(D);var C=x.compress(w);a.rm(z);if(p.maxCookieLength>0)a.set(z,C,365,p.cookieDomain,true);c.setVariable=function(m,l,t){var d=!!t?t:0;v.__v[m]=
[l,d];var b=x.compress(P.stringify(v));if(p.maxCookieLength>0)a.set(z,b,365,p.cookieDomain,true);else a.rm(z)};c.getCookie=function(m,l){var t=a.get(m,true);if(t&&(l||m.indexOf("x_")===0))try{t=x.decompress(t)}catch(d){}else if(t!==null)t=a.decode(t);return t};c.getVariable=function(m){var l;var t;var d;l=v.__v[m];if(l){t=l[1];if(t===0||t>(new Date).getTime())return l[0]}return null};c.on=function(m,l,t){if(l.attachEvent)l.attachEvent("on"+m,t);else if(l.addEventListener)l.addEventListener(m,t,false)};
c.getTagCookie=function(){return q.readCompressedCookie(z)};q.lastSession=c;return c};q.referrerIsSameAsPrevious=function(e,p,c){var u;var v;var w;if(e.length>0){u=q.getReferrer();v=y.getUrl().substring(0,300);w=e[e.length-1];return w.url===u&&w.landing===v&&w.time+c>p}return false};q.isReferrerDifferent=function(){var e;var p;var c;c=q.getReferrer();e=c.indexOf("://");if(e===-1)return true;e+=3;try{if(c.substring(e).indexOf(q.getDomain())!==0)return true;return false}catch(u){return true}};q.getReferrer=
function(){if(document.referrer)return document.referrer.substring(0,300);return"direct"};q.getDomain=function(){return document.location.host}})();(function(){function a(){}var y=r.opentag.LibraryTag;var q=r.Define;a.library=function(){return y.define.apply(y,arguments)};a.libraryRef=function(){return y.getLibraryByClasspath.apply(y.getLibraryByClasspath,arguments)};q.namespace("qubit.Quick",a)})();(function(){function a(m){this.runQueue=[];this.tags=[];this.config={cookieDomain:"",maxCookieLength:1E3,
gzip:true,delayDocWrite:false,clientId:"",name:"",tellLoadTimesProbability:null,pingServerUrl:null,trackSession:null,disabled:false,containerId:"",scanTags:false,noPings:false,restartable:true};this.ignoreTagsState=false;if(m){this.setConfig(m);if(!m.name)this.config.name="Cont-"+D++;a.register(this);if(a.NO_PINGS)this.config.noPings=true;this.ping=new r.opentag.Ping(this.config);this._sendPingsTrigger=this.sendPings.bind(this);if(m.init)try{m.init.call(this,m)}catch(t){}var l=this;this._tagLoadedHandler=
function(t){if(l._containerAlreadySentPings){l.sendPingsNotTooOften();if(t.success);}}}this.events=new r.Events({});return this}function y(m,l,t,d){if(m[t]){d[t]=d[t]+1||1;t+="("+d[t]+")"}m[t]=l}var q=r.opentag.Utils;var x=r.opentag.filter.BaseFilter;var e=r.opentag.filter.Filter;var p=r.opentag.BaseTag;var c=r.opentag.Timed;var u=r.opentag.Tags;var v=r.opentag.Session;var w=r.Cookie;var D=1;try{window.opentag_consentGiven=function(){a.consentIsGiven=true;var m=a.getContainers();for(var l=0;l<m.length;l++)try{m[l].run()}catch(t){}}.bind(this)}catch(m){}r.Define.clazz("qubit.opentag.Container",
a);var g=[];var z="restart";a.prototype.EVENT_TYPES={RESTART_EVENT:z};a.register=function(m){q.addToArrayIfNotExist(g,m)};a.prototype.isTellingLoadTimes=function(){var m=this.config.tellLoadTimesProbability;if(m===null)m=0;return m>Math.random()};a.prototype.destroy=function(m){this.destroyed=true;this.unregister();for(var l=0;l<this.tags.length;l++){var t=this.tags[l];if(t.owningContainer===this){t.owningContainer=null;if(m&&t instanceof p)t.destroy()}}this.tags=[]};a.destroyAll=function(m){var l=
a.getContainers();for(var t=0;t<l.length;t++)l[t].destroy(m)};a.findContainersByName=function(m){var l=a.getContainers();var t=[];for(var d=0;d<l.length;d++)if(l[d].config.name===m)t.push(l[d]);return t};a.getById=function(m){var l=a.getContainers();for(var t=0;t<l.length;t++)if(l[t].getContainerId()===m)return l[t];return null};a.prototype.unregister=function(m){a.unregister(this,m)};a.unregister=function(m,l){q.addToArrayIfNotExist(g,m);var t=q.removeFromArray(g,m);if(l){for(var d=0;d<m.tags.length;d++){var b=
m.tags[d];if(b.owningContainer===m){b.owningContainer=null;if(b instanceof p)b.unregister()}}m.tags=[]}if(!t||t.length===0);};a.prototype.hasConsent=function(){return w.get("qubitconsent")==="Accepted"};a.prototype.register=function(m){a.register(m||this)};a.getContainers=function(){return g};a.prototype.getContainers=function(){return a.getContainers()};a.prototype.onTagRegistered=function(m){};a.prototype.registerTag=function(m){if(m.owningContainer!==null)return false;else{this.tags.push(m);m.owningContainer=
this;m.onAfter(this._tagLoadedHandler);try{this.onTagRegistered(m)}catch(l){}}return true};a.prototype.unregisterTag=function(m){if(m.owningContainer===this)m.owningContainer=null;for(var l=0;l<this.tags.length;)if(this.tags[l]===m)this.tags.splice(l,1);else l++};a.prototype.registerTags=function(m){for(var l=0;l<m.length;l++)this.registerTag(m[l])};a.prototype.setConfig=function(m){for(var l in m)this.config[l]=m[l]};a.prototype.run=function(){this.runTags({command:"runOnceIfFiltersPass"})};a.prototype.runWithoutFilters=
function(){this.runTags({command:"run"})};a.prototype.containerScriptLoadedSynchronously=function(){var m;var l;var t;var d;var b;d=document.getElementsByTagName("script");for(m=0,l=d.length;m<l;m+=1){t=d[m];b=t.getAttribute("src");if(!!b&&b.indexOf(""+this.config.clientId+"-"+this.getContainerId()+".js")>0)return t.getAttribute("async")===null&&(t.getAttribute("defer")===false||t.getAttribute("defer")===""||t.getAttribute("defer")===null)}return true};a.prototype.prepareSessionIfNeeded=function(){var m=
this.config.trackSession;if(m!==true&&m!==false)for(var l=0;l<this.tags.length;l++){var t=this.tags[l];t.resolveAllDynamicData();var d=t.getFilters();for(var b=0;b<d.length;b++){var h=d[b];if(h instanceof e&&h.isSession()){this.trackSession=true;break}}if(this.trackSession)break}else this.trackSession=m;if(a.TRACK_SESSION)this.trackSession=true;if(this.trackSession)this.session=v.setupSession(this);if(this.session);};a.runtimeCounter=a.runtimeCounter||1;a.prototype.runTags=function(m,l){if(this.destroyed)throw"Container has been destroyed.";
if(!l)if(a.LOCKED||q.global().QUBIT_CONTAINERS_LOCKED)return;if(this.onBeforeRun)try{this.onBeforeRun()}catch(J){}var t=!this.containerScriptLoadedSynchronously();var d="runIfFiltersPass";if(m&&m.command)d=m.command;this.runningStarted=(new Date).valueOf();if(this.config.scanTags)if(!this._scanned){this.scanForTags();this._scanned=(new Date).valueOf()}this.prepareSessionIfNeeded();var b=this.getTagsInOrder();var h="___otctnmk"+a.runtimeCounter++;for(var n=0;n<b.length;n++)try{var A=b[n];if(this.includedToRun(A))this._checkAndRun(A,
d,t,h)}catch(J){}c.setTimeout(function(){this.sendPingsNotTooOften()}.bind(this),3100);this.waitForAllTagsToFinish();for(var G=0;G<b.length;G++){b[G]._runtimeMarkers[h]=undefined;delete b[G]._runtimeMarkers[h]}};a.prototype.getTagsInOrder=function(){var m=[];for(var l=0;l<this.tags.length;l++){var t=this.tags[l];var d=t.config.priority;if(+d>0){var b=0;for(var h=0;h<m.length;h++){var n=m[h];if(n){var A=+n.config.priority;if(A>0&&A>d)b++;else break}}m.splice(b,0,t)}else m.push(t)}return m};a.prototype._checkAndRun=
function(m,l,t,d){if(!m._runtimeMarkers[d])m._runtimeMarkers[d]=true;else return;var b=m.resolveDependencies();if(b.length>0)for(var h=0;h<b.length;h++)this._checkAndRun(b[h],l,t,d);this._tagRunner(m,l,t)};a.prototype._tagRunner=function(m,l,t){try{if(this.includedToRun(m)){if(t)m.forceAsynchronous=true;if(this.config.delayDocWrite)m.delayDocWrite=true;m.session=m.session||this.session;m[l]()}}catch(d){}};a.prototype.getContainerId=function(){if(this.config.containerId)return this.config.containerId;
else{if(this._pkgName)return this._pkgName;var m=this.PACKAGE_NAME.split(".");m=m[m.length-1];this._pkgName=m;return m}};a.prototype.includedToRun=function(m){if(!m)return false;var l=m.config;if(l.inactive)return false;if(l.disabled)if(!m.cookieSaysToRunEvenIfDisabled())return false;if(m.disabledByCookie())return false;var t=a.consentIsGiven||!l.needsConsent||this.hasConsent();var d=m.state===p.prototype.STATE.INITIAL;return this.ignoreTagsState||t&&d};a.prototype.scanForTags=function(m,l){if(m)this.tags=
[];var t;if(l&&typeof l==="object")t=this.findAllTags(l);else t=this.findAllTagsByClassPath();this.registerTags(t);return t};a.prototype.findAllTags=function(m,l){m=m||this.tagsPackageName||this.PACKAGE_NAME;return u.findAllTags(m,l)};a.prototype.findAllTagsByClassPath=function(m){m=m||this.PACKAGE_NAME;return u.findAllTagsByClassPath(m)};a.prototype.findAllFilters=function(m,l){m=m||this.tagsPackageName||this.PACKAGE_NAME;return u.findAllFilters(m,l)};a.prototype.waitForAllTagsToFinish=function(){if(this._waitForAllTagsToFinishWaiting)return;
if(!this._lastWaited)this._lastWaited=(new Date).valueOf();var m=(new Date).valueOf()-this._lastWaited>15*1E3;var l=this.allTagsFinished()||m;if(!this._showFinishedOnce&&l){this._lastWaited=null;if(m);this._showFinishedOnce=true;this.runningFinished=(new Date).valueOf();this._containerAlreadySentPings=(new Date).valueOf();this.sendPingsNotTooOften();if(this.onTagsInitiallyRun)this.onTagsInitiallyRun()}else if(!l){this._waitForAllTagsToFinishWaiting=true;this._showFinishedOnce=false;c.setTimeout(function(){this._waitForAllTagsToFinishWaiting=
false;this.waitForAllTagsToFinish()}.bind(this),100)}else;};a.prototype.onTagsInitiallyRun=K;a.prototype.resetAllTags=function(m){for(var l=0;l<this.tags.length;l++){this.tags[l].reset();if(!m)this.tags[l].resetFilters()}};a.prototype._prepareTagsToRestart=function(m){for(var l=0;l<this.tags.length;l++)this.tags[l].prepareForRestart(m)};a.prototype.reset=function(m,l){this.runningFinished=undefined;this._waitForAllTagsToFinishWaiting=undefined;this.runningStarted=undefined;this._showFinishedOnce=
undefined;if(!m)this.resetAllTags(l)};a.prototype.onRestart=function(m){this.events.on(z,m)};a.prototype.restart=function(m,l){if(this.config.restartable){this.events.call(z,this);this.reset(true,true);if(!m)this._prepareTagsToRestart(l);this.run()}};a.restartAll=function(m,l){var t=a.getContainers();for(var d=0;d<t.length;d++)try{t[d].restart(m,l)}catch(b){log.ERROR("Restart failed for container "+t[d].config.name,b)}};a.resetAll=function(m,l){var t=a.getContainers();for(var d=0;d<t.length;d++)try{t[d].reset(m,
l)}catch(b){log.ERROR("Reset failed for container "+t[d].config.name,b)}};a.prototype.sendPingsNotTooOften=function(){this._sndLck=this._sndLck||{};c.runIfNotScheduled(this._sendPingsTrigger,2E3,this._sndLck)};a.prototype.sendPings=function(){if(this.config.noPings)return;var m;if(this.isTellingLoadTimes()){var l=this.getAllTagsByState();var t=[];if(l.run)t=u.getLoadTimes(l.run);this.lastPingsSentTime=(new Date).valueOf();this.ping.send(this,t);t=u.getLoadTimes();var d=[];for(m=0;m<t.length;m++){var b=
t[m].tag;if(b.config.dedupe&&b.sendDedupePing)d.push(b)}if(d.length>0){this.lastDedupePingsSentTime=(new Date).valueOf();this.ping.sendDedupe(this,d)}if(l.other){t=u.getLoadTimes(l.other);var h=[];for(m=0;m<t.length;m++)h.push(t[m]);if(h.length>0)this.ping.send(this,h)}if(l.awaiting){t=u.getLoadTimes(l.awaiting);var n=[];for(m=0;m<t.length;m++)n.push(t[m]);if(n.length>0)this.ping.send(this,n)}}else this.ping.send(this,[])};a.prototype.getAllTagsByState=function(){return a.getAllTagsByState(this.tags)};
a.getAllTagsByState=function(m){var l=null;var t=null;var d=null;var b=null;var h=null;var n=null;var A={};var G=p.prototype.STATE.EXECUTED_WITH_ERRORS;for(var J=0;J<m.length;J++){var L=m[J];if(L instanceof p){var M=L.config.name;if(L.scriptExecuted>0){l=l||{};y(l,L,M,A)}else if(L.locked){n=n||{};y(n,L,M,A)}else if(L.scriptExecuted<0||L.state>=G){b=b||{};y(b,L,M)}else if(L.filtersState()===x.state.SESSION||L.filtersState()>0){d=d||{};y(d,L,M,A)}else if(L.config.needsConsent){h=h||{};y(h,L,M,A)}else{t=
t||{};y(t,L,M,A)}}}return{run:l,failed:b,awaiting:d,consent:h,locked:n,other:t}};a.prototype.allTagsFinished=function(){for(var m=0;m<this.tags.length;m++){var l=this.tags[m];if(l instanceof r.opentag.BaseTag){var t=l.filtersState();if(!l.config.disabled){var d=l.filtersState()<0&&!l.locked;var b=!(l.finished()||l.config.runner&&!l.isRunning);if(d&&b){var h=t!==x.state.SESSION;var n=+l.awaitingDependencies>0;if(h&&!n)return false}}}}return true};a.prototype.getPageVariables=function(){var m=[];for(var l=
0;l<this.tags.length;l++){var t=this.tags[l].getPageVariables();for(var d=0;d<t.length;d++)q.addToArrayIfNotExist(m,t[d])}return m};a.getPageVariableByName=function(m){var l=this.getAllPageVariables();var t=[];for(var d=0;d<l.length;d++)if(l[d].config.name===m)t.push(l[d]);return t};var B="qubit.opentag.disableContainerRunning_";var C="qubit.opentag.forceContainerRunning";a.prototype._getCookieNameForDisabling=function(){return B+this.getContainerId()+this.config.name};a.prototype.disabledByCookie=
function(){return!!w.get(this._getCookieNameForDisabling())};a.prototype.setCookieToDisable=function(){w.set(this._getCookieNameForDisabling(),"true")};a.prototype.rmCookieToDisable=function(){w.rm(this._getCookieNameForDisabling())};a.rmAllDisablingCookies=function(){q.rmCookiesMatching(B)};a.setCookieForDisabledContainersToRun=function(){w.set(C,"true")};a.rmCookieForDisabledContainersToRun=function(){w.rm(C)}})();(function(){function a(){}function y(){var w=false;if(u.get("opentag_debug")||document.location.href.indexOf("opentag_debug")>=
0)w=true;return w}function q(){var w=false;if(u.get("opentag_debug_tool")||document.location.href.indexOf("opentag_debug_tool")>=0)w=true;return w}function x(){try{var w=O.TAGSDK_MAIN_DISABLED_FUNCTION;if(w&&w())return true}catch(D){}if(document.location.href.indexOf("opentag_disabled\x3dtrue")>=0)return true;return false}function e(w,D,g){if(g&&(w[D]===undefined||w[D]===""||w[D]===null))w[D]=g}function p(w){var D=w.PACKAGE_NAME.split(".");D=D[D.length-1];var g=v.getParentObject(w.PACKAGE_NAME);g[D]=
null;delete g[D]}function c(w){var D=v.getParentObject(w.PACKAGE_NAME);var g=D.ClientConfig;if(g&&g.clientId)return g.clientId;else{var z=w.PACKAGE_NAME.split(".");return z[z.length-2].substring(1)}}var u=r.Cookie;var v=r.opentag.Utils;r.opentag.Log.setLevelFromCookie();a.run=function(){var w=false;if(x())return;var D=false;var g=q();var z=g||y();if(!D&&z){if(!r.DEBUG_MODE)O.TAGSDK_NS_OVERRIDE=true;else O.TAGSDK_NS_OVERRIDE=false;w=true}if(r.DEBUG_MODE)O.TAGSDK_NS_OVERRIDE=false;try{N.html.UVListener.init()}catch(B){}a.runAllContainers(w)};
a.runAllContainers=function(w){try{var D=r.opentag.Container.getContainers();for(var g=0;g<D.length;g++){var z=D[g];var B=z.config;if(!z.runningStarted&&!z.configuredInMain){B.scanTags=true;var C=v.getParentObject(z.PACKAGE_NAME).ClientConfig;if(C)e(z.config,"clientId",C.id);var m=v.getParentObject(z.PACKAGE_NAME).SystemDefaults;if(m){e(B,"pingServerUrl",m.pingServerUrl);e(B,"tellLoadTimesProbability",m.tellLoadTimesProbability)}z.configuredInMain=true;if(w){z.destroy(true);p(z);a.loadDebugVersion(z)}else if(!O.QUBIT_OPENTAG_STOP_MAIN_EXECUTION)z.run();
else(function(){var l=r.opentag.RUN_STOPPED_EXECUTON;r.opentag.RUN_STOPPED_EXECUTON=function(){try{if(l)l()}finally{z.run()}}})(z)}}}catch(l){}};a.loadDebugVersion=function(w){var D=document.createElement("script");var g;var z=w.config.scriptURL;var B=c(w);var C=w.getContainerId();if(z){g=z;var m="-debug.js".length;if(g.lastIndexOf("-debug.js")!==g.length-m){g=g.substring(0,g.length-".js".length);g+="-debug.js"}}var l="//d3c3cq33003psk.cloudfront.net/opentag-"+B+"-"+C+"-debug.js";if(g&&l!==g)D.src=
g;else D.src="//s3-eu-west-1.amazonaws.com/opentag/opentag-"+B+"-"+C+"-debug.js";document.getElementsByTagName("head")[0].appendChild(D)};r.Define.namespace("qubit.opentag.Main",a)})()})()})();(function(){})();
(function(){var E=qubit.opentag.Container;var f=new E({"maxCookieLength":3E3,"cookieDomain":"","pingServerUrl":"","delayDocWrite":true,"name":"Telegraph - Production - top","gzip":true,"disabled":false,"tellLoadTimesProbability":1,"containerId":106653});var F="telegraphproductiontop.Container";qubit.Define.clientNamespace(F,f)})();
(function(){var E=qubit.opentag.pagevariable.BaseVariable;var f=new E({"name":"hotjar hjid"});var F="telegraphproductiontop.variables.HotjarHjid";qubit.Define.clientNamespace(F,f);f.value="88438"})();(function(){var E=qubit.opentag.pagevariable.BaseVariable;var f=new E({"name":"hotjar hjsv"});var F="telegraphproductiontop.variables.HotjarHjsv";qubit.Define.clientNamespace(F,f);f.value="5"})();
(function(){var E=qubit.opentag.pagevariable.BaseVariable;var f=new E({"name":"GA Profile Id"});var F="telegraphproductiontop.variables.GAProfileId";qubit.Define.clientNamespace(F,f);f.value="UA-31533527-1"})();(function(){var E=qubit.opentag.pagevariable.BaseVariable;var f=new E({"name":"Profile Id"});var F="telegraphproductiontop.variables.ProfileId";qubit.Define.clientNamespace(F,f);f.value="UA-31533527-1"})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var F="telegraphproductiontop.filters.DefaultFilterMatchAll4";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"For books","pattern":"/culture/books","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.ForBooks";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Travel","pattern":".telegraph.co.uk/travel","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.Travel";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Default filter: Match all","pattern":"","patternType":"ALL_URLS","priority":1});var F="telegraphproductiontop.filters.DefaultFilterMatchAll";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"For Music","pattern":"/culture/music","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.ForMusic";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":false,"name":"All urls under http://www.telegraph.co.uk/news/general-election-2015/","pattern":".telegraph.co.uk/news/general-election-2015/","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.AllUrlsUnderHttpWwwTelegraphCoUkNewsGeneralElection2015";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Men Active","pattern":".telegraph.co.uk/men/active/","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.MenActive";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"All urls under http://www.telegraph.co.uk/news/general-election-2015/(1)","pattern":".telegraph.co.uk/news/general-election-2015/","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.AllUrlsUnderHttpWwwTelegraphCoUkNewsGeneralElection20151";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Include /travel/hotel","pattern":"telegraph.co.uk/travel/hotel","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.IncludeTravelHotel";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Include /travel","pattern":"telegraph.co.uk/travel","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.IncludeTravel";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":false,"name":"Exclude /secure/","pattern":"/secure/"});var F="telegraphproductiontop.filters.ExcludeSecure1";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Technology Pages","pattern":".co.uk/technology","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.TechnologyPages";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"Test Article Filter","pattern":"10321759/iOS\\-7\\-Boys\\-tears\\-over\\-Apples\\-new\\-software\\.html$","patternType":"REGULAR_EXPRESSION","priority":1});var F="telegraphproductiontop.filters.TestArticleFilter";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":true,"name":"For Video Games","pattern":"/technology/video-games","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.ForVideoGames";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"name":"Include URL Param ?openxsync","pattern":"openxsync"});var F="telegraphproductiontop.filters.IncludeURLParamOpenxsync1";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":false,"name":"Not on /travel/ INC1709450","pattern":"/travel/","patternType":"CONTAINS","priority":1});var F="telegraphproductiontop.filters.NotOnTravelINC1709450";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.filter.Filter;var f=new E({"include":false,"name":"Exclude all urls","pattern":"","patternType":"ALL_URLS","priority":2});var F="telegraphproductiontop.filters.ExcludeAllUrls";qubit.Define.clientNamespace(F,f);f.customStarter=null;f.customScript=null;f.lexicalPattern=""})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"async":false,"usesDocumentWrite":false,"name":"ADTECH: GPT [4.4.0-IX-01-FIXED]","disabled":false});var F="telegraphproductiontop.tags.adtechgpt440ix01fixed.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\nconsole.log(\'4.4.0-IX-01-FIXED-NO-KRUX\');\n// set the tmg object and mediaqueries here:\n(function(a){a.tmg\x3da.tmg||{};a.tmg.viewport\x3d{width:document.documentElement.clientWidth,dpr:1,mediaQueriesBreakpoints:{xxs:0,xs:480,sm:730,md:988,lg:1008,xl:1328},containerSizes:{sm:740,md:960,lg:1280}};a.tmg.addEvent\x3dfunction(d,c,b){if(d\x3d\x3d\x3dnull||d\x3d\x3d\x3dundefined){return}if(d.addEventListener){d.addEventListener(c,b,false)}else{if(d.attachEvent){d.attachEvent("on"+c,b)}else{d["on"+c]\x3db}}};a.tmg.getViewportWidth\x3dfunction(b){if(typeof b\x3d\x3d\x3d"undefined"){b\x3dtrue}if(b\x26\x26document.documentElement.clientWidth\x3e\x3d0){return document.documentElement.clientWidth}else{if(b\x26\x26document.body\x26\x26document.body.clientWidth\x3e\x3d0){return document.body.clientWidth}else{if(a.innerWidth\x3e\x3d0){return a.innerWidth}else{return 0}}}};a.tmg.getMediaQuery\x3dfunction(){var c\x3d"xxs",b\x3ddocument.body,d\x3ddocument.getElementById("tmgMediaQuery");if(!d\x26\x26b){d\x3ddocument.createElement("div");d.id\x3d"tmgMediaQuery";b.appendChild(d)}if(!a.getComputedStyle||!b){return c}return a.getComputedStyle(d,":after").content.replace(/[^a-z]/g,"")||c};a.tmg.timer\x3dfunction(g,c){var f\x3dthis,b,e,d\x3dc;this.pause\x3dfunction(){a.clearTimeout(b);d-\x3dnew Date()-e};this.resume\x3dfunction(){e\x3dnew Date();a.clearTimeout(b);b\x3da.setTimeout(function(){g.call(f)},d)};this.stop\x3dfunction(){a.clearTimeout(b);d\x3d0};this.status\x3dfunction(){return b};this.resume()};a.tmg.setLoginStatusAttributes\x3dfunction(b){if(b\x26\x26b.className){b.className+\x3d" logged-in--"+!!document.cookie.match("tmg_pid\x3d");b.className+\x3d" is-subscriber--"+!!document.cookie.match(/tmg_p13n\x3d{(.*)subscriber:\'true\'(.*)}/)}return true};a.tmg.setLoginStatusAttributes(document.querySelector("html"))})(window);\n// tmg-gpt.js\n//window.tmgAds\x3dwindow.tmgAds||{};window.tmgAds.cmd\x3dwindow.tmgAds.cmd||[];window.tmgAds.log\x3dwindow.tmgAds.log||[];window.tmgAds.metrics\x3dwindow.tmgAds.metrics||{ads:{},page:{},headerBidders:{}};window.tmgAds.about\x3d{version:"4.4.0-IX-01",date:"2016-11-04",company:"Telegraph Media Group",author:"Sean Dillon - sean@telegraph.co.uk"};function tmgAdsInit(e){try{tmgAdsLog("Called:");e.log\x3de.log||[];e.ads\x3d{};e.adslots\x3d{};e.data\x3d{metatags:{}};e.performance\x3d{};e.refreshTimers\x3d{};e.plugins\x3d{gpt:{async:true,enableSingleRequest:false,enableAsyncRendering:true,collapseEmptyDivs:true,setLocation:false,vastOutputVersion:"xml_vast3",geoapi:{precision:20000,watching:false,test:"string"}},refurl:{active:true},sizemapping:tmgAdsGetSizeMapping(),adtest:tmgAdsGetURLParam("adtest",window.location.search),adconsole:tmgAdsGetURLParam("adconsole",window.location.search),adsafe:tmgAdsGetURLParam("adsafe",window.location.search),adkill:tmgAdsGetURLParam("adkill",window.location.search),adconnect:tmgAdsGetURLParam("adconnect",window.location.search),adheaderbid:tmgAdsGetURLParam("adheaderbid",window.location.search),adindexexchange:tmgAdsGetURLParam("adindexexchange",window.location.search),adprebid:tmgAdsGetURLParam("adprebid",window.location.search),adpubfood:tmgAdsGetURLParam("adpubfood",window.location.search),adfastlane:tmgAdsGetURLParam("adfastlane",window.location.search),donottrack:{active:true,status:tmgAdsGetDoNotTrack()},counters:20,tmgcookies:{active:true},performance:{active:true,supported:"unknown"},chartbeat:{active:false},quantcast:{active:true,maxSegs:10},grapeshot:{active:true,maxSegs:20,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:false,url:"//telegraph.grapeshot.co.uk/main/channels.cgi?url\x3d"+location.protocol+"//"+location.host+location.pathname},krux:{active:true,includeinurl:true,maxSegs:50},adobe:{active:true,cookiename:"AMCV_2C7336C753C676BA0A490D4B@AdobeOrg",retryPeriod:250,retryLimit:20,retryCount:0},adSlotRefresh:{active:true,retryPeriod:200,retryLimit:60,retryCount:0,exemptAdSlots:["tmg","inr","ftr"],pagetypes:["story","live","video","gallery"]},blockdomain:["chase.telegraph.co.uk","cms1.aem-dev1.awspreprod.telegraph.co.uk","cms1.aem-dev2.awspreprod.telegraph.co.uk","cms1.aem-dev3.awspreprod.telegraph.co.uk","cms1.aem-dev4.awspreprod.telegraph.co.uk","cms1.aem-dev5.awspreprod.telegraph.co.uk","cms1.aem-dev6.awspreprod.telegraph.co.uk","cms1.aem-dev7.awspreprod.telegraph.co.uk","cms1.aem-dev8.awspreprod.telegraph.co.uk","cms1.aem-dev9.awspreprod.telegraph.co.uk","cms1.aem-dev10.awspreprod.telegraph.co.uk","cms1.aem-dev11.awspreprod.telegraph.co.uk","cms1.aem-dev12.awspreprod.telegraph.co.uk","cms1.aem-test1.awspreprod.telegraph.co.uk","cms1.aem-test2.awspreprod.telegraph.co.uk","cms1.aem-test3.awspreprod.telegraph.co.uk","cms1.aem-test4.awspreprod.telegraph.co.uk","cms1.aem-test5.awspreprod.telegraph.co.uk","cms1.aem-test6.awspreprod.telegraph.co.uk","cms1.aem-editorial1.awspreprod.telegraph.co.uk","cms1.aem-editorial2.awspreprod.telegraph.co.uk","cms1.aem-nitro1.awspreprod.telegraph.co.uk","cms1.aem-demo.awspreprod.telegraph.co.uk","cms1.aem-perf1.awspreprod.telegraph.co.uk","cms1.aem-perf2.awspreprod.telegraph.co.uk"],modelDefault:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0}],audsci:{active:true,maxSegs:10,retryPeriod:200,retryLimit:20,retryCount:0,loadStatus:false},audscihawkeye:{name:"audscihakweye",active:true,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:false,ord:function(){return Number(new Date())},url:"",src:null,type:null,data:{f:{site:["culture","fashion","gardening","health","lifestyle","travel","women","foodanddrink","food_and_drink"],sect:["news.newstopics.celebritynews","news.newstopics.theroyalfamily","travel.cruises","travel.destination","travel.destinations","travel.hotel","culture.art","culture.books","culture.music.opera","culture.theatre"],url:"http://pq-direct.revsci.net/pql?placementIdList\x3dokcFAM,lKZUwX,wf72wK,glEQ1O,8nFYC0,K4cUeI\x26cb\x3d"},m:{site:["earth","education","finance","history","motoring","news","property","science","sport","technology","men"],sect:["travel.activityandadventure","travel.snowandski","culture.film","culture.music","culture.photography","culture.tvandradio"],url:"http://pq-direct.revsci.net/pql?placementIdList\x3d8tTXkZ,dpRwf8,QRM4c5,YdP6bx,08VYBY\x26cb\x3d"}}}};e.layout\x3d{viewport:"u",viewportWidth:"",getBreakpoint:function d(h){var j\x3d"xs";(h\x3e\x3de.plugins.sizemapping.s.size[0])?j\x3d"s":null;(h\x3e\x3de.plugins.sizemapping.m.size[0])?j\x3d"m":null;(h\x3e\x3de.plugins.sizemapping.l.size[0])?j\x3d"l":null;(h\x3e\x3de.plugins.sizemapping.x.size[0])?j\x3d"x":null;tmgAdsLog("tmgAds.layout.getBreakpoint -\x3e width:"+e.layout.viewportWidth+" height:"+e.layout.viewportHeight+" size:"+e.layout.viewport);return j},getViewportWidth:function c(){if(document.documentElement.clientWidth\x3e\x3d0){return document.documentElement.clientWidth}else{if(document.body\x26\x26document.body.clientWidth\x3e\x3d0){return document.body.clientWidth}else{if(window.innerWidth\x3e\x3d0){return window.innerWidth}else{return 0}}}},getViewportHeight:function g(){if(document.documentElement.clientHeight\x3e\x3d0){return document.documentElement.clientHeight}else{if(document.body\x26\x26document.body.clientHeight\x3e\x3d0){return document.body.clientHeight}else{if(window.innerHeight\x3e\x3d0){return window.innerHeight}else{return 0}}}},onresize:function f(){e.layout.viewportHeight\x3de.layout.getViewportHeight();e.layout.viewportWidth\x3de.layout.getViewportWidth();e.layout.viewport\x3de.layout.getBreakpoint(e.layout.viewportWidth);(e.layout.viewport\x3d\x3d"xs"||e.layout.viewport\x3d\x3d"s"||e.layout.viewport\x3d\x3d"m")?e.layout.platform\x3d"mobile":e.layout.platform\x3d"desktop"},addEvent:function b(k,j,h){if(k\x3d\x3d\x3dnull||k\x3d\x3d"undefined"){return}if(k.addEventListener){k.addEventListener(j,h,false)}else{if(k.attachEvent){k.attachEvent("on"+j,h)}else{k["on"+j]\x3dh}}}};e.page\x3dtmgAdsGetPageData();e.layout.onresize();tmgAdsLog("Current viewport now: "+e.layout.viewport);tmgAdsLog("Creating an event handler for dealing with page layout changes ie; viewport change");e.layout.addEvent(window,"resize",e.layout.onresize);e.plugins.headerBidders\x3d{active:true,zones:[],indexExchange:{name:"index",active:true,jslib:"//js-sec.indexww.com/ht/p/184224-249976729910975.js",async:false,loc:"head",siteId:888888,timeout:800,partners:{INDX:{targetingType:"slot",timeout:150}}},amazon:{name:"amazon",active:false,jslib:"//c.amazon-adsystem.com/aax2/amzn_ads.js",async:false,loc:"head",siteId:3461,timeout:1000,},prebid:{name:"prebid",active:false,timeout:2000,jslib:"http://s.telegraph.co.uk/tmgads/headerbidders/prebid_20160811141613.js",async:false,loc:"head",bidders:{rubicon:{accountId:8560,viewports:{x:{siteId:103872,zoneId:486846},l:{siteId:103872,zoneId:486846},m:{siteId:103876,zoneId:486860},s:{siteId:103876,zoneId:486860},xs:{siteId:103876,zoneId:486860}},sizes:{"320x50":43,"300x50":44,"970x250":57,"728x90":2,"300x250":15,"120x600":8,"160x600":9,"300x600":10}}}}};if(e.plugins.adheaderbid!\x3d"null"){e.plugins.headerBidders.active\x3de.plugins.adheaderbid;tmgAdsLog("OVER-RIDE: tmgAds.plugins.headerBidders.active: "+e.plugins.headerBidders.active)}if(e.plugins.adindexexchange!\x3d"null"){e.plugins.headerBidders.indexExchange.active\x3de.plugins.adindexexchange;console.log("OVER-RIDE: obj.plugins.headerBidders.indexExchange.active: "+e.plugins.headerBidders.indexExchange.active)}tmgAdsLog("TMG-GPT-"+e.about.version+" - "+e.about.date);tmgAdsEvent("tmgAdsInitLoaded");tmgAdsLog("SUCCESS: tmgAdsInit() initialisation");tmgAdsLog("##################################################################################################################");return e}catch(a){tmgAdsLog("ERROR: tmgAdsInit() failed -\x3e error\x3d"+a.message,e)}}function tmgAdsInitGPT(){tmgAdsLog("Called:");window.googletag\x3dwindow.googletag||{};window.googletag.cmd\x3dwindow.googletag.cmd||[];tmgAdsLog("googletag enableAsyncRendering -\x3e "+tmgAds.plugins.gpt.enableAsyncRendering);(tmgAds.plugins.gpt.enableAsyncRendering)?window.googletag.cmd[(function(){googletag.pubads().enableAsyncRendering()})]:null;var a\x3ddocument.createElement("script");a.async\x3dtmgAds.plugins.gpt.async;a.type\x3d"text/javascript";a.src\x3d"//www.googletagservices.com/tag/js/gpt.js";var b\x3ddocument.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function tmgAdsInitConfig(b){try{tmgAdsLog("Called:");b.config\x3d{viewportstatus:true,refurl:true,adsizematrix:tmgAdsGetSizeMatrix(),modelDefault:b.plugins.modelDefault};if(typeof b.model\x3d\x3d"undefined"){console.log("WARNING: tmgAds.model does not exist for some reason (possibly old CMS like eScenic).");b.model\x3db.config.modelDefault}if(typeof b.model.length\x3d\x3d"undefined"){tmgAdsLog("WARNING: this page still has the old tmgAds.model code on it, it needs updating, in the meantime we convert this to the new default model (no ads - tmgAds.config.modelDefault) and archive the old model off as tmgAds.config.modelOld");b.config.modelOld\x3db.model;b.model\x3db.config.modelDefault}b.config.deliveryModels\x3db.model;tmgAdsEvent("tmgAdsInitConfigLoaded");tmgAdsLog("SUCCESS: tmgAdsInitConfig() initialisation");tmgAdsLog("##################################################################################################################");return b}catch(a){tmgAdsLog("ERROR: tmgAdsInitConfig() failed -\x3e error\x3d"+a.message)}}function tmgAdsInitData(c){try{tmgAdsLog("Called:");c.counters\x3d{};c.metatags\x3d{};c.page\x3dtmgAdsGetPageData();c.tmg\x3dtmgAdsGetTMGUserData();c.google\x3dtmgAdsGetGoogleData();c.adobe\x3dtmgAdsGetAdobe();c.krux\x3dtmgAdsGetKruxData();c.browser\x3dtmgAdsGetBrowserData();c.flash\x3dtmgAdsFlashDetect();c.cookies\x3d{all:document.cookie};c.cookies.adops\x3dtmgAdsGetTMGCookies("adops");c.adsafe\x3dtmgAdsGetAdsafeBlocks();c.audsci\x3dtmgAdsGetAudSciData();c.page.cms\x3dtmgAdsGetCMS();for(var a in c.plugins.blockdomain){if(c.plugins.blockdomain.hasOwnProperty(a)){if(c.page.domain\x3d\x3dc.plugins.blockdomain[a]){c.plugins.adkill\x3dtrue;tmgAdsLog("tmgAdsInitConfig: This page is being viewed through one of our AEM preview instances, turning ads off in: "+c.plugins.blockdomain[a])}}}if(typeof window.optimize\x3d\x3d"undefined"){tmgAdsLog("OPTIMIZELY: WARNING -\x3e window.optimize is not defined, creating empty obj");window.optimize\x3dwindow.optimize||{activeExperiments:[]}}else{tmgAdsLog("OPTIMIZELY: window.optimize is defined")}c.optimizely\x3dwindow.optimize.activeExperiments;tmgAdsEvent("tmgAdsInitDataLoaded");tmgAdsLog("SUCCESS: tmgAdsInitData() initialisation");tmgAdsLog("##################################################################################################################");return c}catch(b){tmgAdsLog("ERROR: tmgAdsInitData() - failed -\x3e error\x3d"+b.message)}}var tmgAdsInitDFP\x3dfunction tmgAdsInitDFP(a){tmgAdsLog("Called:");a.dfp\x3dtmgAdsGetDFPData();a.dfp.customvars\x3dtmgAdsGetGPTCustomVars();a.dfp.gpt\x3dtmgAdsGetGPTSetup(a.dfp.gpt);a.dfp.adunit\x3d"/"+a.dfp.networkid+"/"+a.dfp.sitezone;tmgAdsLog("AdUnit set to: "+a.dfp.adunit);a.geo\x3dtmgAdsGetGeoAPI();tmgAdsAdjustSizeMapping()};function tmgAdsInitPerformance(d){try{tmgAdsLog("Called:");tmgAdsLog("Performance monitoring status is: "+tmgAds.plugins.performance.active);if(typeof window.performance!\x3d"undefined"){tmgAdsLog("window.performance exists :-)");if(tmgAds.plugins.performance.active){for(var c in window.performance.timing){var a\x3dwindow.performance.timing[c];if(typeof window.performance.timing[c]!\x3d"object"){tmgAds.performance[c]\x3da}}if(typeof window.performance.getEntriesByType!\x3d"undefined"){tmgAds.performance.resources\x3dwindow.performance.getEntriesByType("resource");tmgAds.performance.mark\x3dwindow.performance.getEntriesByType("mark");tmgAds.performance.measure\x3dwindow.performance.getEntriesByType("measure");tmgAds.performance.navigation\x3dwindow.performance.getEntriesByType("navigation")}else{tmgAds.performance.resources\x3d"window.performance.getEntriesByType not Supported"}tmgAdsLog("SUCCESS: windows,.performance has been acitvated...")}else{tmgAdsLog("WARNING: tmgAds.plugins.performance.active is set to flase, performance monitoing has been turned off.")}}else{tmgAdsLog("WARNING: window.performance NOT supported by this browser. :-(")}tmgAdsLog("SUCCESS: tmgAdsInitPerformance() initialisation");tmgAdsLog("##################################################################################################################")}catch(b){tmgAdsLog("ERROR: tmgAdsInitPerformance() - failed -\x3e error\x3d"+b.message)}}function tmgAdsInitEventHandlers(){tmgAdsLog("Called:");try{var b\x3ddocument.addEventListener||document.attachEvent,c\x3ddocument.removeEventListener||document.detachEvent,a\x3ddocument.addEventListener?"DOMContentLoaded":"onreadystatechange";b.call(document,a,function(){if(a\x3d\x3d\x3d"DOMContentLoaded"||(a\x3d\x3d\x3d"onreadystatechange"\x26\x26document.readyState\x3d\x3d\x3d"complete")){tmgAdsEvent("tmg-initialise:pageload");tmgAdsLog("SUCCESS: DOMContentLoaded/onreadystatechange \x3d complete: Page has loaded, DOM ready.");tmgAds.metrics.tmggptPageLoad\x3dtmgAdsTimer();tmgAdsOnPageLoad()}});googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){tmgAdsActionEventHandler("slotRenderEnded",e)});googletag.pubads().addEventListener("impressionViewable",function(e){tmgAdsActionEventHandler("impressionViewable",e)});googletag.pubads().addEventListener("slotVisibilityChanged",function(e){tmgAdsActionEventHandler("slotVisibilityChanged",e)})});document.addEventListener("tmg:init-ads",function(){tmgAdsLog("EVENT: tmg:init-ads fired");tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);for(var e in tmgAds.ads){if(tmgAds.ads.hasOwnProperty(e)){googletag.destroySlots([tmgAds.ads[e].adslot]);tmgAdsBuildAd(tmgAds.ads[e].div,"","").display()}}});document.addEventListener("tmgAds:transitionAdFadeOut",function(){tmgAdsActionEventHandler("tmgAds:transitionAdFadeOut")});document.addEventListener("tmgAds:transitionAdFadeIn",function(){tmgAdsActionEventHandler("tmgAds:transitionAdFadeIn")});document.addEventListener("tmgAds:tmggpt-collapseStickyAdslot",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-collapseStickyAdslot")});document.addEventListener("tmgAds:tmggpt-initialise:start",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-initialise:start")});document.addEventListener("tmgAds:tmggpt-initialise:end",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-initialise:end")});document.addEventListener("tmgAds:grapeshot:loaded",function(){tmgAdsActionEventHandler("tmgAds:grapeshot:loaded")});document.addEventListener("tmgAds:audsci:loaded",function(){tmgAdsActionEventHandler("tmgAds:audsci:loaded")});document.addEventListener("tmgAds:audsci:reload",function(){tmgAdsActionEventHandler("tmgAds:audsci:reload")});document.addEventListener("tmgAds:index:loaded",function(){tmgAdsActionEventHandler("tmgAds:index:loaded")});document.addEventListener("tmgAds:index:reload",function(){tmgAdsActionEventHandler("tmgAds:index:reload")});document.addEventListener("tmgAds:amazona9:loaded",function(){tmgAdsActionEventHandler("tmgAds:amazona9:loaded")});document.addEventListener("tmgAds:amazona9:reload",function(){tmgAdsActionEventHandler("tmgAds:amazona9:reload")});document.addEventListener("tmgAds:prebid:loaded",function(){tmgAdsActionEventHandler("tmgAds:prebid:loaded")});document.addEventListener("tmgAds:prebid:reload",function(){tmgAdsActionEventHandler("tmgAds:prebid:reload")})}catch(d){tmgAdsLog("ERROR: tmgAdsInitEventHandlers() - failed -\x3e error\x3d"+d.message)}}function tmgAdsActionEventHandler(f,b){try{switch(f){case"tmgAds:tmggpt-initialise:start":tmgAdsLog("EVENT: "+f);break;case"tmgAds:tmggpt-initialise:end":tmgAdsog("EVENT: "+f);break;case"tmgAds:tmggpt-initialise:pageload":console.log("EVENT: "+f);break;case"tmgAds:transitionAdFadeIn":tmgAdsLog("EVENT: "+f);break;case"tmgAds:transitionAdFadeOut":tmgAdsLog("EVENT: "+f);break;case"tmgAds:index:loaded":tmgAdsLog("EVENT: "+f);break;case"tmgAds:index:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("index",tmgAds.plugins.index.url,tmgAds.plugins.index,function(){tmgAdsEvent("index:loaded")});break;case"tmgAds:amazona9:loaded":tmgAdsLog("EVENT: "+f);if(location.href.indexOf("blocka9")\x3e-1){console.warn("AMAZONA9 - blocked")}else{tmgAds.plugins.headerBidders.amazon.tokens\x3damnzads.getTokens()}break;case"tmgAds:amazona9:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("amazona9",tmgAds.plugins.headerBidders.amazon.jslib,function(){tmgAdsEvent("amazona9:loaded")});break;case"tmgAds:prebid:loaded":tmgAdsLog("EVENT: "+f);break;case"tmgAds:prebid:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("prebid",tmgAds.plugins.prebid.url,tmgAds.plugins.prebid,function(){tmgAdsEvent("prebid:loaded")});break;case"tmgAds:grapeshot:loaded":var j\x3d"EVENT: "+f;tmgAdsLog(j);tmgAds.grapeshot\x3d{raw:null,dfp:[]};if(typeof window.gs_channels!\x3d"undefined"){tmgAds.grapeshot\x3d{raw:window.gs_channels,dfp:window.gs_channels.split(",")};tmgAdsog(j+" -\x3e window.gs_channels exists : ");tmgAdsog(j+" -\x3e window.gs_channels number : "+tmgAds.grapeshot.dfp.length);tmgAdsog(j+" -\x3e window.gs_channels content: "+tmgAds.grapeshot.dfp.toString())}else{tmgAdsog(j+" -\x3e window.gs_channels does not exist:")}tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);break;case"tmgAds:audsci:loaded":tmgAdsLog("EVENT: "+f);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);break;case"tmgAds:audsci:reload":break;case"tmgAds:actionHeaderBids":tmgAdsLog("EVENT: "+f);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);break;case"tmgAds:tmggpt-collapseStickyAdslot":tmgAdsLog("EVENT: "+f);tmgAdsLog("We will now close down the sticky ad for the this adunit: "+tmgAds.config.deliveryModel.model);var h\x3d"unset";if(tmgAds.config.deliveryModel.model\x3d\x3d"ban"){h\x3d"banner-container";if(document.getElementById("tmgads_body_ban")){document.getElementById("tmgads_body_ban").style.height\x3d"0px"}if(document.getElementById("tmgAds_ban")){document.getElementById("tmgAds_ban").style.height\x3d"0px"}}if(tmgAds.config.deliveryModel.model\x3d\x3d"mpu"){h\x3d"advert.component";if(document.getElementById("tmgads_body_mpu")){document.getElementById("tmgads_body_mpu").style.height\x3d"0px"}if(document.getElementById("tmgAds_mpu")){document.getElementById("tmgAds_mpu").style.height\x3d"0px"}}if(tmgAds.config.deliveryModel.model!\x3d"unset"){var a\x3ddocument.getElementsByClassName(h);for(var e\x3d0;e\x3ca.length;e++){tmgAdsLog("Closing adslot: "+a[e]);a[e].style.display\x3d"none"}}break;case"slotRenderEnded":var g\x3dtmgAdsTimer();tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);if(typeof tmgAds.metrics.tmggptAdFirstAdRendered\x3d\x3d"undefined"){tmgAdsLog("tmgAds.metrics.tmggptAdFirstAdRendered is not defined, setting this now");tmgAds.metrics.tmggptAdFirstAdRendered\x3dg;tmgAds.metrics.metricTimeToRenderFirstAd\x3dtmgAds.metrics.tmggptAdFirstAdRendered-tmgAds.metrics.tmggptPageLoad}tmgAds.metrics.tmggptAdLastAdRendered\x3dg;tmgAds.metrics.metricTimeToRenderAllAds\x3dtmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptAdFirstAdQueued;tmgAds.metrics.metricTimeFromPageLoadToLoadAllAds\x3dtmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptInitBegin;var c\x3db.slot.getTargeting("div");setTimeout(function(){if(!b.isEmpty){tmgAdsLog("Ad is rendered, transition height/opacity");document.getElementById(c).style.opacity\x3d"1";document.getElementById(c).style.height\x3db.size[1]+"px"}else{tmgAdsLog("Ad is EMPTY we have nothing to transition")}},500);break;case"impressionViewable":tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);break;case"slotVisibilityChanged":tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);break}}catch(d){tmgAdsLog("ERROR: tmgAdsActionEventHandler() - failed -\x3e error\x3d"+d.message,b)}}function tmgAdsInitGeoAPIStatus(b){try{if(typeof window.googletag!\x3d"undefined"){if(b.plugins.gpt.setLocation){tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is ACTIVATED for this site - now lets check if the browsers currently supports the Geo-API feature");if(b.geo.supported\x3d\x3d1){tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS supported - now lets check if the browser supports this feature");if(b.geo.available\x3d\x3d1){tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS available - setting the following: googletag.setLocation("+b.geo.api.longitude+", "+b.geo.api.latitude+", "+b.geo.api.accuracy+") [longitude,latitude,accuracy]");googletag.cmd.push(function(){googletag.setLocation(b.geo.api.longitude,b.geo.api.latitude,b.geo.api.accuracy)})}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS NOT available")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS NOT supported.")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is NOT ACTIVATED for this site.")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: WARNING: googletag obj does not exist")}}catch(a){tmgAdsLog("ERROR: tmgAdsInitGeoAPIStatus() - failed -\x3e error\x3d"+a.message,event)}}function tmgAdsGetSizeMatrix(){tmgAdsLog("Called");var a\x3d{ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"};return a}function tmgAdsGetSizeMapping(){tmgAdsLog("Called");var a\x3d{x:{size:[1368,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},l:{size:[1008,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},m:{size:[730,480],ban:[[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},s:{size:[480,320],ban:[[300,50],[320,50],[320,100],[300,250],[468,60]],mpu:[[300,250],[320,100],[320,50],[300,50]],sky:[[300,250],[320,100],[320,50],[300,50]],hpg:[[300,250],[320,100],[320,50],[300,50]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},xs:{size:[0,0],ban:[[300,250],[320,100],[320,50],[300,50]],mpu:[[300,250],[320,100],[320,50],[300,50]],sky:[[300,250],[320,100],[320,50],[300,50]],hpg:[[300,250],[320,100],[320,50],[300,50]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"}};return a}function tmgAdsGetDFPData(){var a\x3d{pos:0,tile:0,adserver:"ad.doubleclick.net",networkid:"6582",site:tmgAds.page.site,sitename:"tmg.telegraph."+tmgAds.page.site,zonename:tmgAds.page.zone.substr(0,100),sitezone:"tmg.telegraph."+tmgAds.page.site+"/"+tmgAds.page.zone.substr(0,100),ord:Number(new Date())};tmgAdsLog("tmgads.dfp.site     \x3d "+a.site);tmgAdsLog("tmgads.dfp.sitename \x3d "+a.sitename);tmgAdsLog("tmgads.dfp.zonename \x3d "+a.zonename);tmgAdsLog("tmgads.dfp.sitezone \x3d "+a.sitezone);return a}function tmgAdsAdjustSizeMapping(){tmgAdsLog("Called");if(tmgAds.dfp.site\x3d\x3d"puzzles"){tmgAdsLog("ALERT: site is not covered by default sizeing values, we are resetting these now -\x3e at\x3dban -\x3e site\x3d"+tmgAds.dfp.site);tmgAds.config.adsizematrix.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.x.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.l.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.m.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.s.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.xs.ban\x3d[[468,60],[728,90],[900,250],[940,250]]}if(tmgAds.dfp.site\x3d\x3d"fantasyfootball"){tmgAdsLog("ALERT: site is not covered by default sizing values, we are resetting these now -\x3e site\x3d"+tmgAds.dfp.site);tmgAds.config.adsizematrix.ban\x3d[728,90];tmgAds.plugins.sizemapping.x.ban\x3d[728,90];tmgAds.plugins.sizemapping.l.ban\x3d[728,90];tmgAds.plugins.sizemapping.m.ban\x3d[728,90];tmgAds.plugins.sizemapping.s.ban\x3d[320,50];tmgAds.plugins.sizemapping.xs.ban\x3d[320,50];tmgAds.config.adsizematrix.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.x.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.l.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.m.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.s.mpu\x3d[300,250];tmgAds.plugins.sizemapping.xs.mpu\x3d[300,250]}if(tmgAds.dfp.site\x3d\x3d"courses"||tmgAds.dfp.site\x3d\x3d"clearing"){tmgAds.config.adsizematrix.mpu\x3d[300,250];tmgAds.plugins.sizemapping.x.mpu\x3d[300,250];tmgAds.plugins.sizemapping.l.mpu\x3d[300,250];tmgAds.plugins.sizemapping.m.mpu\x3d[300,250];tmgAds.plugins.sizemapping.s.mpu\x3d[300,250];tmgAds.plugins.sizemapping.xs.mpu\x3d[300,250]}}function tmgAdsGetCMS(){tmgAdsLog("Called:");var a\x3d"unknown";tmgAdsLog("ascertaining which CMS is being used");tmgAdsLog("tmgAds.page.businessseg\x3d"+tmgAds.page.businessseg);if(tmgAds.page.businessseg\x3d\x3d\x3dnull||typeof tmgAds.page.businessseg\x3d\x3d"undefined"){tmgAdsLog("would appear we are using eScenic");a\x3d"escenic"}else{tmgAdsLog("would appear we are using AEM");a\x3d"aem"}tmgAdsLog("returning the following values cms\x3d"+a);return a}function tmgAdsGetAdobe(){try{tmgAdsLog("Called:");var a\x3d{userID:"unready",cookiename:tmgAds.plugins.adobe.cookiename,rawcookie:tmgAdsGetCookie(tmgAds.plugins.adobe.cookiename)};if(typeof _satellite!\x3d"undefined"){a.userID\x3d_satellite.getVisitorId().getMarketingCloudVisitorID();tmgAdsLog("userID \x3d "+a.userID);return a}else{tmgAdsLog("userID not set, reecall this script in "+tmgAds.plugins.adobe.retryPeriod+"ms - retryPeriod:"+tmgAds.plugins.adobe.retryPeriod+" retryLimit:"+tmgAds.plugins.adobe.retryLimit+" retryCount:"+tmgAds.plugins.adobe.retryCount);if(tmgAds.plugins.adobe.retryCount\x3ctmgAds.plugins.adobe.retryLimit){setTimeout(function(){tmgAds.adobe\x3dtmgAdsGetAdobe()},tmgAds.plugins.adobe.retryPeriod)}else{tmgAdsLog("retryCount has hit retryLimit... stop re-requesting this func.")}++tmgAds.plugins.adobe.retryCount;return a}}catch(b){tmgAdsLog("ERROR: tmgAdsGetAdobe() failed -\x3e error\x3d"+b.message)}}function tmgAdsGetGoogleData(){tmgAdsLog("Called:");var a\x3d{};return a}function tmgAdsGetTMGUserData(){tmgAdsLog("Called:");var a\x3d{session:tmgAdsGetCookie("tmg_session"),rem:tmgAdsGetCookie("tmg_rem"),pid:tmgAdsGetCookie("tmg_pid"),p13n:tmgAdsGetCookie("tmg_p13n"),tmg_subs_referer:tmgAdsGetCookie("tmg_subs_referer"),tmg_authz_session:tmgAdsGetCookie("tmg_authz_session"),tmg_meter_count:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_meter_count"),",",":"),tmg_web_trends:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_web_trends"),",",":")};if(window.JSON\x26\x26typeof a.tmg_subs_referer!\x3d"undefined"){tmgAdsLog("window.JSON supported AND tmg_subs_referer cookie exists");if(a.tmg_subs_referer!\x3d"undefined"){a.tmg_subs_referer\x3dJSON.parse(a.tmg_subs_referer);tmgAdsLog("JSON.parse(tmp.tmg_subs_referer)\x3d"+a.tmg_subs_referer)}}else{tmgAdsLog("either window.JSON not supported or no tmg_subs_referer cookie")}return a}function tmgAdsGetGPTSetup(c){tmgAdsLog("Called:");var b\x3dc||{};b.setTargeting\x3d[];b.setTargetingStr\x3d[];b.customParams\x3d"";if(typeof tmgAds.dfp.customvars!\x3d"undefined"){tmgAdsLog("tmgAds.dfp.customvars exists - iterating through tmgAds.dfp.customvars");for(var a in tmgAds.dfp.customvars){if(tmgAds.dfp.customvars.hasOwnProperty(a)\x26\x26tmgAds.dfp.customvars[a]!\x3d\x3d""){if(tmgAds.dfp.customvars[a] instanceof Array){tmgAdsLog("adding tmgAds.dfp.customvars["+a+"] as Array()");b.setTargeting.push(".setTargeting(\'"+a+"\',tmgAds.dfp.customvars[\'"+a+"\'])");b.setTargetingStr+\x3d".setTargeting(\'"+a+"\',tmgAds.dfp.customvars[\'"+a+"\'])"}else{if(tmgAds.dfp.customvars[a]!\x3d\x3dnull){tmgAdsLog("adding tmgAds.dfp.customvars["+a+"]\x3d"+tmgAds.dfp.customvars[a]);b.setTargeting.push(".setTargeting(\'"+a+"\',\'"+tmgAds.dfp.customvars[a]+"\')");b.setTargetingStr+\x3d".setTargeting(\'"+a+"\',\'"+tmgAds.dfp.customvars[a]+"\')"}else{tmgAdsLog("tmgAds.dfp.customvars["+a+"] is null, omitting from tag")}}b.customParams+\x3d"\x26"+a+"\x3d"+tmgAds.dfp.customvars[a]}}}else{tmgAdsLog("tmgAds.dfp.customvars does not exist")}b.customParams\x3db.customParams.substring(1);return b}function tmgAdsGetGPTCustomVars(){tmgAdsLog("Called:");var a\x3d{};(typeof tmgAds.about.version!\x3d"undefined")?a.ver\x3dtmgAds.about.version:null;(typeof tmgAds.page.section!\x3d"undefined")?a.sc\x3dtmgAds.page.section:null;(typeof tmgAds.page.pagetype!\x3d"undefined")?a.pt\x3dtmgAds.page.pagetype:null;(typeof tmgAds.page.level!\x3d"undefined")?a.lvl\x3dtmgAds.page.level:null;(typeof tmgAds.browser.biw!\x3d"undefined")?a.biw\x3dtmgAds.browser.biw:null;(typeof tmgAds.browser.bih!\x3d"undefined")?a.bih\x3dtmgAds.browser.bih:null;(typeof tmgAds.browser.language!\x3d"undefined")?a.lang\x3dtmgAds.browser.language.toLowerCase():null;(typeof tmgAds.flash.versionMaj!\x3d"undefined")?a.fv\x3dtmgAds.flash.versionMaj:null;(typeof tmgAds.page.protocol!\x3d"undefined")?a.protocol\x3dtmgAds.page.protocol.substring(0,tmgAds.page.protocol.length-1):null;(typeof tmgAds.page.domain!\x3d"undefined")?a.rd\x3dtmgAds.page.domain:null;(typeof tmgAds.page.cms!\x3d"undefined")?a.cms\x3dtmgAds.page.cms:null;(typeof tmgAds.page.keywords!\x3d"undefined")?a.kw\x3dtmgAds.page.keywords:null;(typeof tmgAds.page.make!\x3d"undefined")?a.make\x3dtmgAds.page.make:null;(typeof tmgAds.page.model!\x3d"undefined")?a.model\x3dtmgAds.page.model:null;(typeof tmgAds.page.geo!\x3d"undefined")?a.geo\x3dtmgAds.page.geo:null;(typeof tmgAds.page.editorschoice!\x3d"undefined")?a.ec\x3dtmgAds.page.editorschoice:null;(typeof tmgAds.page.mostviewed!\x3d"undefined")?a.mv\x3dtmgAds.page.mostviewed:null;(typeof tmgAds.page.mostshared!\x3d"undefined")?a.ms\x3dtmgAds.page.mostshared:null;(typeof tmgAds.page.videosrc!\x3d"undefined")?a.vidsrc\x3dtmgAds.page.videosrc:null;(typeof tmgAds.page.articleid!\x3d"undefined")?a.pg\x3dtmgAds.page.articleid:null;(typeof tmgAds.page.gamp!\x3d"undefined")?a.gamp\x3dtmgAds.page.gamp:null;(typeof tmgAds.page.refresh!\x3d"undefined")?a.refresh\x3dtmgAds.page.refresh:a.refresh\x3d0;(tmgAds.page.dataLayer.premiumContent)?a.premc\x3dtmgAds.page.dataLayer.premiumContent:a.premc\x3dfalse;(tmgAds.page.dataLayer.premiumOverride)?a.premo\x3dtmgAds.page.dataLayer.premiumContent:a.premo\x3dfalse;(typeof tmgAds.grapeshot!\x3d"undefined")?a.gs\x3dtmgAds.grapeshot.dfp:null;(typeof tmgAds.layout.platform!\x3d"undefined")?a.platform\x3dtmgAds.layout.platform:null;(typeof tmgAds.layout.viewport!\x3d"undefined")?a.vp\x3dtmgAds.layout.viewport:null;(typeof tmgAds.page.keywords!\x3d"undefined")?a.kw\x3dtmgAds.page.keywords:null;(typeof tmgAds.adsafe.blocked!\x3d"undefined")?a.adsafe\x3dtmgAds.adsafe.blocked:null;(typeof tmgAds.tmg.tmg_meter_count!\x3d"undefined")?a.tmgmvc\x3dtmgAds.tmg.tmg_meter_count.vars.meter_viewed_count:a.tmgmvc\x3d"none";(typeof tmgAds.tmg.tmg_meter_count!\x3d"undefined")?a.tmgmu\x3dtmgAds.tmg.tmg_meter_count.vars.meter_user_viewed:a.tmgmu\x3d"none";(typeof tmgAds.tmg.tmg_subs_referer!\x3d"undefined")?a.tmgsub\x3d"1":a.tmgsub\x3d"none";(typeof tmgAds.tmg.pid!\x3d"undefined")?a.tmgpid\x3dtmgAds.tmg.pid:a.tmgpid\x3d"none";(typeof tmgAds.adobe.userID!\x3d"undefined")?a.amcv\x3dtmgAds.adobe.userID:a.amcv\x3d"none";(typeof tmgAds.audsci.dfp!\x3d"undefined")?a.audsci\x3dtmgAds.audsci.dfp:a.audsci\x3d"none";(typeof tmgAds.krux.kxuser.dfp!\x3d"undefined")?a.kxuid\x3dtmgAds.krux.kxuser.dfp:a.kxuid\x3d"none";(typeof tmgAds.krux.kxuser.dfp!\x3d"undefined"\x26\x26tmgAds.plugins.krux.includeinurl)?a.kxsid\x3dtmgAds.krux.kxsegs.dfp:a.kxseg\x3d"none";(typeof tmgAds.plugins.adtest!\x3d\x3dfalse)?a.test\x3dtmgAds.plugins.adtest:null;(tmgAds.plugins.adtest)?a.test\x3dtmgAds.plugins.adtest:null;(tmgAds.config.refurl)?a.refurl\x3dtmgAds.page.url:a.refurl\x3d"inactive";(tmgAds.plugins.donottrack)?a.dnt\x3dtmgAds.plugins.donottrack:a.dnt\x3d"inactive";a.admodel\x3dtmgAds.config.deliveryModel.activityStatus+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle;a.sticky\x3d0;if(tmgAds.config.deliveryModel.activityStatus!\x3d\x3d"default"\x26\x26tmgAds.config.deliveryModel.activityStatus!\x3d\x3d"none"){a.sticky\x3d1}if(typeof tmgAds.optimizely!\x3d"undefined"){if(tmgAds.optimizely.length\x3e0){tmgAdsLog("OPTIMIZELY: activeExperiments found, adding to the CustVars: "+tmgAds.optimizely);a.optimizely\x3dtmgAds.optimizely}else{tmgAdsLog("OPTIMIZELY: No activeExperiments found.")}}else{tmgAdsLog("OPTIMIZELY: tmgAds.optimizely not defined.")}return a}function tmgAdsGetAdsafeBlocks(){var a\x3d{};if(tmgAds.config.adsafe\x3d\x3d1){tmgAdsLog("tmgAds.config.adsafe \x3d ON");if(typeof window.tmgAdsafe!\x3d"undefined"){tmgAdsLog("window.tmgAdsafe exists");if(typeof window.tmgAdsafe.blocked!\x3d"undefined"){tmgAdsLog("window.tmgAdsafe.blocked exists");tmgAdsLog("adding tmgAdsafe data");a.blocked\x3dwindow.tmgAdsafe.blocked}else{tmgAdsLog("window.tmgAdsafe.blocked does not exists")}}else{tmgAdsLog("window.tmgAdsafe does NOT exist")}}else{tmgAdsLog("tmgAds.config.adsafe \x3d OFF")}return a}function tmgAdsGetAudSciData(){var a\x3d{dfp:[],aspq:{}};tmgAdsLog("Creating AudienceScience HawkEye segments");tmgAdsLog("tmgAds.plugins.audsci.active: "+tmgAds.plugins.audsci.active);if(tmgAds.plugins.audsci.active){if(typeof window.asiPlacements!\x3d"undefined"){tmgAdsLog("window.asiPlacements exists");for(var b in window.asiPlacements){tmgAdsLog("itterating through window.asiPlacements: ASPQ_"+b);if(window.asiPlacements[b].hasOwnProperty("data")){window["ASPQ_"+b]\x3d(window.asiPlacements[b].data)?"T":"";a.aspq[b]\x3d"T";a.dfp.push(b);tmgAdsLog("AudSci segment exists, adding: ASPQ_"+b)}else{a.aspq[b]\x3d"F";tmgAdsLog("AudSci segment does NOT exist: ASPQ_"+b)}}}else{tmgAdsLog("window.asiPlacements does NOT exist")}}return a}function tmgAdsLog(d,a){if(typeof tmgAds!\x3d"undefined"){if(typeof tmgAds.plugins!\x3d"undefined"){if(typeof tmgAds.plugins.adconsole!\x3d"undefined"){if(tmgAds.plugins.adconsole\x3d\x3d\x3dtrue){var c\x3d("00"+(tmgAdsTimer()/1000).toFixed(5)).slice(-9);var b\x3d{time:c,callee:null,extra:a,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:d};if(arguments.callee.caller){b.callee\x3darguments.callee.caller.name}b.msg\x3d"%c[TMG-GPT]["+b.time+"]["+(b.callee+"                         ").substr(0,25)+"]: "+b.msg;b.styling\x3db.css.none;if(d.substr(0,5)\x3d\x3d"ALERT"){b.styling\x3db.css.alert}if(d.substr(0,10)\x3d\x3d"OPTIMIZELY"){b.styling\x3db.css.optimizely}if(d.substr(0,7)\x3d\x3d"SUCCESS"){b.styling\x3db.css.success}if(d.substr(0,5)\x3d\x3d"ERROR"){b.styling\x3db.css.error}if(d.substr(0,7)\x3d\x3d"WARNING"){b.styling\x3db.css.warning}if(d.substr(0,5)\x3d\x3d"EVENT"){b.styling\x3db.css.event}if(d.substr(0,4)\x3d\x3d"INFO"){b.styling\x3db.css.info}console.log(b.msg,b.styling)}}}}}function tmgAdsGetObjSize(d){var c\x3d[];var a\x3d[d];var b\x3d0;while(a.length){var f\x3da.pop();if(typeof f\x3d\x3d\x3d"boolean"){b+\x3d4}else{if(typeof f\x3d\x3d\x3d"string"){b+\x3df.length*2}else{if(typeof f\x3d\x3d\x3d"number"){b+\x3d8}else{if(typeof f\x3d\x3d\x3d"object"\x26\x26c.indexOf(f)\x3d\x3d\x3d-1){c.push(f);for(var e in f){a.push(f[e])}}}}}}return(b/1024)}function tmgAdsGetGeoAPI(){tmgAdsLog("Called:");var b\x3d{available:0,supported:0,api:{},position:{}};if(tmgAds.plugins.gpt.setLocation){navigator.geolocation.getCurrentPosition(c,a);tmgAdsLog("navigator.geolocation supported in this browser")}else{tmgAdsLog("navigator.geolocation not supported in this browser")}function c(d){b.api\x3dd.coords;b.position\x3dd.coords;b.available\x3d1;b.supported\x3d1;tmgAdsLog("GeoAPI success -\x3e position.coords\x3d"+d.coords)}function a(d){b.available\x3d0;b.supported\x3d-1;tmgAdsLog("GeoAPI failed: "+d)}return b}function tmgAdsGetKruxData(){(tmgAds.plugins.krux.active)?tmgAdsLog("tmgAds.plugins.krux.active \x3d true - Krux is active for this installation",0):null;var b\x3d{};if(typeof window.localStorage!\x3d"undefined"){tmgAdsLog("localStorage found, using that");b.kxtype\x3d"localStorage";if(typeof window.localStorage.kxtech!\x3d"undefined"\x26\x26typeof window.localStorage.kxuser!\x3d"undefined"\x26\x26typeof window.localStorage.kxsegs!\x3d"undefined"){b.kxtype\x3d"localStorage";b.kxtech\x3dwindow.localStorage.kxtech;b.kxuser\x3d{dfp:window.localStorage.kxuser};b.kxsegs\x3d{dfp:[],raw:window.localStorage.kxsegs}}else{b.kxtech\x3dnull;b.kxuser\x3d{dfp:null};b.kxsegs\x3d{dfp:[],raw:null}}}else{tmgAdsLog("localStorage not found, reverting to using cookies");b.kxtype\x3d"cookie";if(typeof tmgAdsGetCookie("kxtech")!\x3d"undefined"\x26\x26typeof tmgAdsGetCookie("kxuser")!\x3d"undefined"\x26\x26typeof tmgAdsGetCookie("kxsegs")!\x3d"undefined"){b.kxtech\x3dtmgAdsGetCookie("kxtech");b.kxuser\x3d{dfp:tmgAdsGetCookie("kxuser")};b.kxsegs\x3d{dfp:[],raw:tmgAdsGetCookie("kxsegs")}}else{b.kxtech\x3dnull;b.kxuser\x3d{dfp:null};b.kxsegs\x3d{dfp:[],raw:null}}}if(b.kxsegs.raw!\x3d\x3dnull\x26\x26b.kxsegs.raw!\x3d"undefined"){b.kxsegs.segids\x3db.kxsegs.raw.split(",")}if(tmgAds.plugins.krux.includeinurl){tmgAdsLog("tmgAds.plugins.krux.includeinurl \x3d true - realtime segments are turned on - insert the top "+tmgAds.plugins.krux.maxSegs+" segments into the adurls to capture realtime segs in krux",0);if(typeof b.kxsegs.segids!\x3d"undefined"){tmgAdsLog("tmp.segids[0] exists",0);b.kxsegs.dfp\x3d[];if(tmgAds.plugins.krux.maxSegs\x3d\x3d\x3d-1){b.maxSegs\x3db.kxsegs.segids.length;tmgAdsLog("Include ALL Krux Segs into DFP call")}else{b.maxSegs\x3dtmgAds.plugins.krux.maxSegs;tmgAdsLog("Limit Krux segs to "+b.maxSegs)}for(var a\x3d0;a\x3cb.maxSegs;++a){if(typeof b.kxsegs.segids[a]!\x3d"undefined"){tmgAdsLog("adding KruxSeg #"+(a+1)+" into URL: "+b.kxsegs.segids[a],0);b.kxsegs.dfp.push(b.kxsegs.segids[a])}}}else{tmgAdsLog("WARNING: tmp.kxsegs.segids is undefined")}}return b}function tmgAdsGetMetaTag(d){try{var b\x3dnull;if(document.getElementsByName(d)[0]!\x3d\x3dnull\x26\x26typeof document.getElementsByName(d)[0]!\x3d"undefined"){tmgAdsLog("tmgAdsGetMetaTag("+d+"): document.getElementsByName(\'"+d+"\')[0] exists");if(document.getElementsByName(d)[0].content.length\x3e0){b\x3ddocument.getElementsByName(d)[0].content.toLowerCase();if(d\x3d\x3d"tmgads.articleid"){b\x3ddecodeURIComponent(document.getElementsByName(d)[0].content)}else{b\x3ddecodeURIComponent(document.getElementsByName(d)[0].content.toLowerCase())}tmgAdsLog("tmgAdsGetMetaTag("+d+\'): "\'+b+\'"\')}if(d\x3d\x3d"tmgads.keywords"){if(b!\x3d\x3dnull){b\x3db.split(",");for(var a\x3d0;a\x3cb.length;a++){if(String.prototype.trim){b[a]\x3db[a].trim()}else{if(typeof b[a]!\x3d\x3dnull){b[a]\x3db[a].replace(/^\\s\\s*/,"").replace(/\\s\\s*$/,"")}else{tmgAdsLog("tmgAdsGetMetaTag("+d+\'): tmp[i] is null -\x3e "\'+b[a]+\'"\')}}tmgAdsLog("tmgAdsGetMetaTag("+d+\'): tmgads.keywords -\x3e "\'+b[a]+\'"\')}}else{tmgAdsLog("tmgAdsGetMetaTag("+d+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}}}else{tmgAdsLog("tmgAdsGetMetaTag("+d+"): document.getElementsByName(\'"+d+"\')[0] does not exist -\x3e "+b)}tmgAds.data.metatags[d]\x3db;return b}catch(c){tmgAdsLog("ERROR: tmgAdsGetMetTag("+d+") failed -\x3e error\x3d"+c.message)}}function tmgAdsGetPageData(){try{tmgAdsLog("Called:");var a\x3d{zone:"unknown",url:location.protocol+"//"+location.host+location.pathname,url_full:location.href,referrer:document.referrer,domain:location.hostname,protocol:location.protocol,search:location.search,gamp:"0",environment:"-"};tmgAdsGetURLParam("source",window.location.href)\x3d\x3d\x3d"refresh"?(a.refresh\x3d1,tmgAdsLog("tmgAdsGetPageData: page is a refreshed page")):tmgAdsLog("tmgAdsGetPageData: page is not refreshed");(tmgAdsGetMetaTag("DCSext.Platform")\x3d\x3d"mobile")?a.platform\x3d"mobile":a.platform\x3d"desktop";tmgAdsLog("tmgAdsGetPageData: platform is: "+a.platform);(a.platform\x3d\x3d"mobile")?a.pagetype\x3dtmgAdsGetMetaTag("DCSext.Content_Type"):a.pagetype\x3dtmgAdsGetMetaTag("tmgads.pagetype");tmgAdsLog("tmgAdsGetPageData: pagetype is: "+a.pagetype);(a.platform\x3d\x3d"mobile")?a.articleid\x3dtmgAdsGetMetaTag("DCSext.articleId"):a.articleid\x3dtmgAdsGetMetaTag("tmgads.articleid");tmgAdsLog("tmgAdsGetPageData: articleid is: "+a.articleid);(a.platform\x3d\x3d"mobile")?a.geo\x3dtmgAdsGetMetaTag("DCSext.akamaigeo"):a.geo\x3dtmgAdsGetMetaTag("tmgads.geo");tmgAdsLog("tmgAdsGetPageData; geo is: "+a.geo);if(a.platform\x3d\x3d"mobile"){a.zone\x3dtmgAdsGetMetaTag("DCSext.MLC").substring(1,tmgAdsGetMetaTag("DCSext.MLC").length)}else{a.zone\x3dtmgAdsGetMetaTag("tmgads.zone")}if(typeof a.zone!\x3d\x3dnull){a.zone\x3da.zone.replace(/\\//g,".").replace(/-/g,"").replace(/_/g,"")}else{a.zone\x3d"unknown";tmgAdsLog("WARNING:::: tmgAdsGetPageData: zone is null, setting to unknown")}tmgAdsLog("tmgAdsGetPageData: zone is: "+a.zone);a.businessseg\x3dtmgAdsGetMetaTag("tmgads.businessSegment");tmgAdsLog("tmgAdsGetPageData: bsuinessSeg is: "+a.businesssegm);tmgAdsLog("tmgAdsGetMetaTag: Fixing broken classifications");if(a.zone\x3d\x3d"lifestyle/puzzles"){a.zone\x3d"puzzles";tmgAdsLog("tmgAdsGetPageData: changed lifestlye/puzzles to puzzles")}if(a.businessseg\x3d\x3d\x3dnull){tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg is null, use the zone data in it\'s entirety, NB: we set businesssseg to the site value after this script.")}else{tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg not null, work out if we need to prepend the businessSeg value to the start of the zone value (only do this if the businessSeg is different from th first zone array value: ");tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg \x3d "+a.businessseg);tmgAdsLog("tmgAdsGetMetaTag; tmp.zone \x3d "+a.zone);if(a.businessseg\x3d\x3da.zone.split(".")[0]){tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is same as the businessseg so don\'t do anything to the zone:")}else{tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is different from businessseg so prepend this to the zone:");a.zone\x3da.businessseg+"."+a.zone}tmgAdsLog("tmgAdsGetMetaTag: tmp.zone value: "+a.zone)}a.zonedata\x3da.zone.split(".");a.level\x3da.zonedata.length;a.section\x3da.zone.replace(/\\./g,"-").replace(/_/g,"");a.site\x3da.zonedata[0];a.businessseg-a.site;a.otherdata\x3d"";a.editorschoice\x3dtmgAdsGetMetaTag("tmgads.editorschoice");a.keywords\x3dtmgAdsGetMetaTag("tmgads.keywords");a.make\x3dtmgAdsGetMetaTag("tmgads.make");a.model\x3dtmgAdsGetMetaTag("tmgads.model");a.mostshared\x3dtmgAdsGetMetaTag("tmgads.mostshared");a.mostviewed\x3dtmgAdsGetMetaTag("tmgads.mostviewed");a.parentid\x3dtmgAdsGetMetaTag("tmgads.parentid");a.product\x3dtmgAdsGetMetaTag("tmgads.product");a.sensitive\x3dtmgAdsGetMetaTag("tmgads.sensitive");a.videosrc\x3dtmgAdsGetMetaTag("tmgads.videosrc");a.sponsor\x3dtmgAdsGetMetaTag("tmgads.sponsor");tmgAdsLog("tmgAdsGetMetaTag: Fixing bad page classifications/taxonomies");(a.section\x3d\x3d"ece_frontpage"||a.section\x3d\x3d"ecefrontpage")?a.section\x3d"portal":null;(a.section\x3d\x3d"food_and_drink"||a.section\x3d\x3d"food-and-drink")?a.section\x3d"foodanddrink":null;(a.site\x3d\x3d"food_and_drink"||a.site\x3d\x3d"food-and-drink")?a.site\x3d"foodanddrink":null;a.dataLayer\x3dwindow.dataLayer||["UNSET"];a.pageData\x3dwindow.pageData||["UNSET"];return a}catch(b){tmgAdsLog("ERROR: tmgAdsGetPageData() failed -\x3e error\x3d"+b.message)}}function tmgAdsGetURLParam(c,a){tmgAdsLog(\'Called: tmgAdsGetUrlParam("\'+c+\'","\'+a+\'")\');var b\x3ddecodeURI((RegExp(c+"\x3d(.+?)(\x26|$)").exec(a)||[,null])[1]);if(c\x3d\x3d"adconsole"||c\x3d\x3d"adsafe"||c\x3d\x3d"adkill"){if(b\x3d\x3d"1"||b\x3d\x3d"true"||b\x3d\x3d"on"||b\x3d\x3d"yes"){b\x3dtrue}else{b\x3dfalse}}if(c\x3d\x3d"adheaderbid"||c\x3d\x3d"adindexexchange"||c\x3d\x3d"adprebid"||c\x3d\x3d"adpubfood"||c\x3d\x3d"adfastlane"){if(b\x3d\x3d"on"){b\x3dtrue}if(b\x3d\x3d"off"){b\x3dfalse}}tmgAdsLog("Setting url-param ["+c+"]: "+b);return b}function tmgAdsGetTMGCookies(e){tmgAdsLog("Called:");tmgAdsLog("tmgAds.plugins.tmgcookies.active \x3d "+tmgAds.plugins.tmgcookies.active);var b\x3d"",d;if(tmgAds.plugins.tmgcookies.active){tmgAdsLog("Adding any tmgcookies");var c\x3ddocument.cookie.split("; ");for(var a\x3d0;a\x3cc.length;a++){if(c[a].hasOwnProperty(a)){d\x3dc[a].split("\x3d");if(d[0].substr(0,7)\x3d\x3d\x3d"tmgads_"\x26\x26d[0].length\x3e0){b+\x3d";ck_"+d[0].substr(7,d[0].length-7)+"\x3d"+d[1]}}}}return b}function tmgAdsLoadJS(e,d,c,f){tmgAdsEvent(e+":init");var a\x3d{name:e.toUpperCase(),status:"init",type:"text/javascript",url:d,performance:{tsTagStart:tmgAdsTimer(),tsTagRequested:0,tsTagEnd:0,tmTag:0,}};var b\x3ddocument.createElement("script");b.type\x3d"text/javascript";if(b.readyState){b.onreadystatechange\x3dfunction(){if(b.readyState\x3d\x3d"loaded"||b.readyState\x3d\x3d"complete"){b.onreadystatechange\x3dnull;tmgAdsEvent(e+":loaded");a.status\x3d"loaded";a.performance.tsTagEnd\x3dtmgAdsTimer();a.performance.tmTag\x3da.performance.tsTagEnd-a.performance.tsTagStart;if(typeof f\x3d\x3d"function"){f()}}}}else{b.onload\x3dfunction(){tmgAdsEvent(e+":loaded");a.status\x3d"loaded";a.performance.tsTagEnd\x3dtmgAdsTimer();a.performance.tmTag\x3da.performance.tsTagEnd-a.performance.tsTagStart;if(typeof f\x3d\x3d"function"){f()}}}a.status\x3d"requested";b.src\x3da.url;document.head.appendChild(b)}function tmgAdsGetBrowserData(){tmgAdsLog("Called:");var a\x3d{};for(var b in navigator){if(navigator.hasOwnProperty(b)){var c\x3dnavigator[b];if(typeof c!\x3d"object"){a[b]\x3dc}}}if(document.all){tmgAdsLog("document.all exists");a.biw\x3ddocument.documentElement.offsetWidth;a.bih\x3ddocument.documentElement.offsetHeight}else{tmgAdsLog("document.all does not exists");a.biw\x3dwindow.innerWidth;a.bih\x3dwindow.innerHeight}return a}function tmgAdsFlashDetect(){tmgAdsLog("Called:");var a\x3d{};FlashDetect\x3dnew function(){var b\x3dthis;b.installed\x3dfalse;b.raw\x3d"";b.major\x3d-1;b.minor\x3d-1;b.revision\x3d-1;b.revisionStr\x3d"";var c\x3d[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(j){return e(j)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(l){var j\x3d"6,0,21";try{l.AllowScriptAccess\x3d"always";j\x3de(l)}catch(k){}return j}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(j){return e(j)}}];var e\x3dfunction(l){var j\x3d-1;try{j\x3dl.GetVariable("$version")}catch(k){}return j};var h\x3dfunction(j){var l\x3d-1;try{l\x3dnew ActiveXObject(j)}catch(k){l\x3d{activeXError:true}}return l};var d\x3dfunction(k){var j\x3dk.split(",");return{raw:k,major:parseInt(j[0].split(" ")[1],10),minor:parseInt(j[1],10),revision:parseInt(j[2],10),revisionStr:j[2]}};var g\x3dfunction(m){var k\x3dm.split(/ +/);var l\x3dk[2].split(/\\./);var j\x3dk[3];return{raw:m,major:parseInt(l[0],10),minor:parseInt(l[1],10),revisionStr:j,revision:f(j)}};var f\x3dfunction(j){return parseInt(j.replace(/[a-zA-Z]/g,""),10)||b.revision};b.majorAtLeast\x3dfunction(j){return b.major\x3e\x3dj};b.minorAtLeast\x3dfunction(j){return b.minor\x3e\x3dj};b.revisionAtLeast\x3dfunction(j){return b.revision\x3e\x3dj};b.versionAtLeast\x3dfunction(k){var l\x3d[b.major,b.minor,b.revision];var j\x3dMath.min(l.length,arguments.length);for(i\x3d0;i\x3cj;i++){if(l[i]\x3e\x3darguments[i]){if(i+1\x3cj\x26\x26l[i]\x3d\x3darguments[i]){continue}else{return true}}else{return false}}};b.FlashDetect\x3dfunction(){if(navigator.plugins\x26\x26navigator.plugins.length\x3e0){var m\x3d"application/x-shockwave-flash";var l\x3dnavigator.mimeTypes;if(l\x26\x26l[m]\x26\x26l[m].enabledPlugin\x26\x26l[m].enabledPlugin.description){var j\x3dl[m].enabledPlugin.description;var n\x3dg(j);b.raw\x3dn.raw;b.major\x3dn.major;b.minor\x3dn.minor;b.revisionStr\x3dn.revisionStr;b.revision\x3dn.revision;b.installed\x3dtrue}}else{if(navigator.appVersion.indexOf("Mac")\x3d\x3d-1\x26\x26window.execScript){var j\x3d-1;for(var k\x3d0;k\x3cc.length\x26\x26j\x3d\x3d-1;k++){var o\x3dh(c[k].name);if(!o.activeXError){b.installed\x3dtrue;j\x3dc[k].version(o);if(j!\x3d-1){var n\x3dd(j);b.raw\x3dn.raw;b.major\x3dn.major;b.minor\x3dn.minor;b.revision\x3dn.revision;b.revisionStr\x3dn.revisionStr}}}}}}()};if(FlashDetect.installed){a\x3d{versionMaj:FlashDetect.major,versionMin:FlashDetect.minor,versionRev:FlashDetect.revision,versionRaw:FlashDetect.raw}}else{a\x3d{versionMaj:0,versionMin:0,versionRev:0,versionRaw:"none"}}return a}function tmgAdsGetCookie(b){tmgAdsLog("Called: tmgAdsGetCookie("+b+"): Called");var d,c,a,f,e\x3ddocument.cookie.split(";");for(c\x3d0;c\x3ce.length;c++){a\x3de[c].substr(0,e[c].indexOf("\x3d"));f\x3de[c].substr(e[c].indexOf("\x3d")+1);a\x3da.replace(/^\\s+|\\s+$/g,"");if(a\x3d\x3db){d\x3ddecodeURIComponent(f)}}return d}function tmgAdsSetCookie(a,d,f,j){tmgAdsLog(\'Called: tmgAdsSetCookie("\'+a+\'","\'+d+\'","\'+f+\'","\'+j+\'"): Called\');var l\x3d";path\x3d/",k\x3da+"\x3d"+encodeURIComponent(d),b,g,c,h,e;if(f){b\x3dnew Date();g\x3db.getTime();g+\x3df*3600*1000;b.setTime(g);c\x3d";expires\x3d"+b.toGMTString()}else{c\x3d""}if(typeof j\x3d\x3d"undefined"){h\x3d""}else{h\x3d";domain\x3d"+j}e\x3dk+c+l+h;document.cookie\x3de}function tmgAdsTimer(){var a\x3dDate.now();if(typeof window.performance!\x3d"undefined"){if(typeof window.performance.now!\x3d"undefined"){var a\x3dwindow.performance.now()}}return Number(a)}function tmgAdsGetDoNotTrack(){tmgAdsLog("Called:");var a;if(navigator.doNotTrack\x3d\x3d"unspecified"||navigator.doNotTrack\x3d\x3d1||navigator.doNotTrack\x3d\x3d"yes"){tmgAdsLog("using the navigator.doNotTrack method");a\x3dnavigator.doNotTrack}if(navigator.msDoNotTrack){tmgAdsLog("using the navigator.msDoNotTrack method");a\x3dnavigator.msDoNotTrack}if(typeof a\x3d\x3d"undefined"){a\x3d0}if(a\x3d\x3d"unspecified"){a\x3d0}if(a\x3d\x3d"no"){a\x3d0}if(a\x3d\x3d"yes"){a\x3d1}return a}function tmgAdsCsvToObj(d,a,f){var c;tmgAdsLog(\'Called: data\x3d"\'+d+\'" delimiter\x3d"\'+a+\'" assignment\x3d\'+f);f\x3df||"\x3d";if(typeof d!\x3d"undefined"){c\x3d{dfplegacy:"",raw:d,vars:{}};c.data\x3dd.split(a);for(var b in c.data){if(c.data[b].length\x3e0\x26\x26typeof c.data[b]\x3d\x3d"string"){var e\x3dc.data[b].split(f);c.vars[e[0]]\x3de[1];c.dfplegacy+\x3d"\x26"+e[0]+"\x3d"+e[1];tmgAdsLog("extra custVars set in function call, creating them now -\x3e "+e[0]+f+e[1])}else{}}}return c}function tmgAdsBuildAd(e,a,d){tmgAdsLog(\'########## Called: tmgAdsBuildAd("\'+e+\'","\'+a+\'","\'+d+\'")\');++tmgAds.dfp.tile;var c\x3d{adunit:tmgAds.dfp.adunit,altsizes:d,outofpage:false,arguments:arguments,slot:e.split("_"),size:[],slotid:e,customvars:tmgAds.dfp.customvars,customParams:"",refreshable:false,div:e,pos:tmgAds.dfp.tile,tile:tmgAds.dfp.tile,ord:Number(new Date()),extra:tmgAdsCsvToObj(a,";")};(tmgAds.config.deliveryModel.activityStatus!\x3d"none")?c.adcount\x3d1:c.adcount\x3d0;tmgAds.ads[c.pos]\x3d{};c.adloc\x3dc.slot[1];c.adtype\x3dc.slot[2];c.adpos\x3dc.slot[3];(c.adtype\x3d\x3d"ftr"||c.adpos\x3d\x3d"oop"||c.adtype\x3d\x3d"tmg"||c.adtype\x3d\x3d"inr"||c.adtype\x3d\x3d"int")?c.outofpage\x3dtrue:null;if(typeof tmgAds.metrics.tmggptAdFirstAdQueued\x3d\x3d"undefined"){tmgAds.metrics.tmggptAdFirstAdQueued\x3dtmgAdsTimer();if(typeof tmgAds.metrics.tmggptPageLoad!\x3d"undefined"){tmgAds.metrics.metricTimeToQueueFirstAd\x3dtmgAds.metrics.tmggptAdFirstAdQueued-tmgAds.metrics.tmggptPageLoad}else{tmgAds.metrics.metricTimeToQueueFirstAd\x3d-1}}tmgAds.metrics.tmggptAdLastAdQueued\x3dtmgAdsTimer();tmgAds.metrics.ads[c.adtype]\x3d{queued:tmgAds.metrics.tmggptAdLastAdQueued};var b;if(a.length\x3e0){for(b in c.extra.vars){if(c.extra.vars.hasOwnProperty(b)){c.customvars[b]\x3dc.extra.vars[b]}}for(b in c.customvars){if(c.customvars.hasOwnProperty(b)){c.customParams+\x3d"\x26"+b+"\x3d"+c.customvars[b];tmgAdsLog("KVPs: "+b+"\x3d"+c.customvars[b])}}}if(c.altsizes.length\x3e0){tmgAdsLog("Altsizes have been chosen - over-riding the defaults and setting them to: "+c.altsizes);c.oldsizes\x3dc.altsizes.split(",");tmgAdsLog("Altsizes set: ");c.newsizes\x3d[];for(b\x3d0;b\x3cc.oldsizes.length;b++){if(c.oldsizes[b]!\x3d\x3d""\x26\x26c.oldsizes[b].length\x3e\x3d3){tmgAdsLog("Altsizes: using this value "+c.oldsizes[b]);c.newsizes.push(c.oldsizes[b])}else{tmgAdsLog(\'Altsizes: not using this value "\'+c.oldsizes[b]+\'"\')}}c.sizes\x3dc.newsizes;tmgAdsLog("Altsizes set: ");for(b in c.sizes){if(c.sizes.hasOwnProperty(b)){c.size.push([Number(c.sizes[b].split("x")[0]),Number(c.sizes[b].split("x")[1])])}}}else{c.size\x3dtmgAds.plugins.sizemapping[tmgAds.layout.viewport][c.adtype];tmgAdsLog("default sizes have been chosen - sizes are:"+c.size);c.sizemapping\x3dgoogletag.cmd.push(function(){googletag.sizeMapping().addSize(tmgAds.plugins.sizemapping.x.size,tmgAds.plugins.sizemapping.x[c.adtype]).addSize(tmgAds.plugins.sizemapping.l.size,tmgAds.plugins.sizemapping.l[c.adtype]).addSize(tmgAds.plugins.sizemapping.m.size,tmgAds.plugins.sizemapping.m[c.adtype]).addSize(tmgAds.plugins.sizemapping.s.size,tmgAds.plugins.sizemapping.s[c.adtype]).addSize(tmgAds.plugins.sizemapping.xs.size,tmgAds.plugins.sizemapping.xs[c.adtype]).build()})}if(c.adtype\x3d\x3d"vid"||c.adtype\x3d\x3d"ins"||c.adtype\x3d\x3d"int"){if(c.adtype\x3d\x3d"vid"){c.tmpsize\x3dtmgAds.plugins.sizemapping[tmgAds.layout.viewport].vid;c.vidslot\x3dc.slotid+"_"+c.pos;c.url\x3d"https://securepubads.g.doubleclick.net/gampad/ads?env\x3dvp\x26sz\x3d"+c.tmpsize+"\x26gdfp_req\x3d1\x26impl\x3ds\x26unviewed_position_start\x3d1\x26output\x3d"+tmgAds.plugins.gpt.vastOutputVersion+"\x26iu\x3d"+c.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26description_url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26hl\x3den\x26cust_params\x3d"+encodeURIComponent(c.customParams+"\x26vidslot\x3d"+c.vidslot+"\x26at\x3d"+c.adtype+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26ciu_szs\x3d\x26scp\x3d\x26scor\x3d"+c.pos+"\x26correlator\x3d"+tmgAds.dfp.ord;tmgAdsLog("Video Ad Request - URL\x3d"+c.url)}if(c.adtype\x3d\x3d"ins"){c.tmpsize\x3dc.size[0][0]+"x"+c.size[0][1];c.url\x3d"https://securepubads.g.doubleclick.net/gampad/adx?sz\x3d"+c.tmpsize+"\x26iu\x3d"+tmgAds.dfp.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26t\x3d"+encodeURIComponent(c.customParams+"\x26at\x3d"+c.thisad+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26m\x3dapplication/javascript\x26tile\x3d"+c.pos+"\x26c\x3d"+tmgAds.dfp.ord;tmgAdsLog("InSkin Ad Request - URL\x3d"+c.url)}if(c.adtype\x3d\x3d"int"){c.tmpsize\x3dc.size[0][0]+"x"+c.size[0][1];c.url\x3d"https://securepubads.g.doubleclick.net/gampad/adx?sz\x3d"+c.tmpsize+"\x26iu\x3d"+tmgAds.dfp.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26t\x3d"+encodeURIComponent(c.customParams+"\x26at\x3d"+c.thisad+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26m\x3dapplication/javascript\x26tile\x3d"+c.pos+"\x26c\x3d"+tmgAds.dfp.ord;tmgAdsLog("Luxury Interstitial Ad Request - URL\x3d"+c.url)}c.fetchUrl\x3dfunction(){tmgAdsLog(".fetchUrl() called for: "+c.slotid+" -\x3e "+c.url);return c.url};return c}else{tmgAdsLog("adtype\x3d"+c.adtype+" -\x3e Current tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus);if(tmgAds.plugins.adSlotRefresh.exemptAdSlots.indexOf(c.adtype)\x3e-1||tmgAds.config.deliveryModel.activityStatus\x3d\x3d"none"||tmgAds.config.deliveryModel.activityStatus\x3d\x3dc.adtype||tmgAds.config.deliveryModel.activityStatus\x3d\x3d"ban"\x26\x26c.adtype\x3d\x3d"mpu"\x26\x26(tmgAds.layout.viewport\x3d\x3d"m"||tmgAds.layout.viewport\x3d\x3d"s"||tmgAds.layout.viewport\x3d\x3d"xs")){tmgAdsLog("SUCCESS: matched - tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype\x3d"+c.adtype);if(tmgAds.config.deliveryModel.activityStatus\x3d\x3d"ban"\x26\x26c.adtype\x3d\x3d"ban"){(tmgAds.layout.viewport\x3d\x3d"m")?c.size\x3d[728,90]:null;(tmgAds.layout.viewport\x3d\x3d"s")?c.size\x3d[[300,50],[320,50]]:null;(tmgAds.layout.viewport\x3d\x3d"xs")?c.size\x3d[[300,50],[320,50]]:null}if(tmgAds.config.deliveryModel.activityStatus\x3d\x3d"mpu"\x26\x26c.adtype\x3d\x3d"mpu"){(tmgAds.layout.viewport\x3d\x3d"x")?c.size\x3d[[300,250],[300,600]]:null;(tmgAds.layout.viewport\x3d\x3d"l")?c.size\x3d[[300,250],[300,600]]:null;if(tmgAds.layout.viewportHeight\x3ctmgAds.config.deliveryModel.minHeight){tmgAdsLog("tmgAds.layout.viewportHeight is less thean the minHeight for certain sticky ads/mpus on this page, restricting to only 300x250");c.size\x3d[300,250]}}googletag.cmd.push(function(){if(c.outofpage\x3d\x3d\x3dtrue){tmgAdsLog("OutOfPage unit chosen for: "+c.slotid);c.adslot\x3dgoogletag.defineOutOfPageSlot(c.adunit,c.div).addService(googletag.pubads())}else{tmgAdsLog("Standard Display unit chosen for: "+c.slotid+" sizes: "+c.size);c.adslot\x3dgoogletag.defineSlot(c.adunit,c.size,c.div).addService(googletag.pubads())}c.adslot.setTargeting("div",c.div);c.adslot.setTargeting("at",c.adtype);c.adslot.setTargeting("pos",c.pos);c.adslot.setTargeting("adcount",String(c.adcount));for(var f in tmgAds.dfp.customvars){if(typeof tmgAds.dfp.customvars[f]!\x3d\x3dnull){c.adslot.setTargeting(f,tmgAds.dfp.customvars[f])}}for(f in c.extra.vars){tmgAdsLog(\'extra vars have been set, itterating through them now. Adding extra vars: ["\'+f+\'","\'+c.extra.vars[f]+\'"]\');c.adslot.setTargeting(f,c.extra.vars[f])}c.adslot.defineSizeMapping(c.sizemapping);if(tmgAds.plugins.gpt.collapseEmptyDivs\x3d\x3d1){tmgAdsLog("setCollapseEmptyDiv is active for: "+c.slotid);c.adslot.setCollapseEmptyDiv(true)}googletag.enableServices()});tmgAds.ads[c.pos]\x3dc;c.display\x3dfunction(){tmgAdsLog(".display() called for: "+c.slotid);googletag.cmd.push(function(){if(tmgAds.plugins.headerBidders.active){(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.display(c.slotid):googletag.display(c.slotid)}else{googletag.display(c.slotid)}});return c};c.refresh\x3dfunction(){tmgAdsLog(".refresh() called for slotid :"+c.slotid);googletag.cmd.push(function(){if(tmgAds.plugins.headerBidders.active){(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.pubads().refresh([c.adslot]):googletag.pubads().refresh([c.adslot])}else{googletag.display(c.slotid)}})};tmgAds.adslots[c.slotid]\x3dc;if(tmgAds.plugins.adkill\x3d\x3d\x3dtrue){tmgAdsLog(\'ALERT: "adkill" has been selected, so bailing here and not sending you an ad...\');c.refresh\x3dfunction(){return c};c.display\x3dfunction(){return c};c.fetchUrl\x3dfunction(){return c};return c}return c}else{if(tmgAds.config.deliveryModel.activityStatus!\x3dc.adtype){tmgAdsLog("ALERT: not matched - tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype\x3d"+c.adtype+" so we did not call this ad.");c.refresh\x3dfunction(){return c};c.display\x3dfunction(){return c};c.fetchUrl\x3dfunction(){return c};return c}}}tmgAdsLog("WARNING: seemed to have hit the end of the tmgAdsBuildAd() without returning anything.... investigate")}function tmgAdsBuildAdTag(j,k,h,b,a,f,e){tmgAdsLog("-\x3d-\x3d-\x3d--\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d");tmgAdsLog(\'WARNING: DEPRECATED tmgAdsBuildAdTag("\'+j+\'","\'+k+\'","\'+h+\'","\'+b+\'","\'+a+\'")\');var d\x3d{tile:(function(){++tmgAds.dfp.tile;return tmgAds.dfp.tile})(),adslot:j.split(","),sizes:k.split(","),thisad:j.split(",")[0].substr(0,3),sz:[],type:h,extra:{data:b,vars:{},dfp:""},style:a,refresh:f,refreshtime:e};if(d.thisad\x3d\x3d"mob"){d.thisad\x3d"ban"}d.id_div\x3d"advert_tmg_"+d.thisad;if(d.extra.data.length\x3e0){d.extra.tmp\x3dd.extra.data.split(";");for(var c in d.extra.tmp){if(d.extra.tmp[c].length\x3e0){var g\x3dd.extra.tmp[c].split("\x3d");d.extra.vars[g[0]]\x3dg[1];d.extra.dfp+\x3d"\x26"+g[0]+"\x3d"+g[1];tmgAdsLog("extra custVars set in function call, creating them now -\x3e "+g[0]+"\x3d"+g[1])}}}if(d.thisad!\x3d"ins"\x26\x26d.thisad!\x3d"vid"\x26\x26d.thisad!\x3d"int"){d.output\x3d\'\x3cdiv id\x3d"\'+d.id_div+\'"\x3e\x3cscript type\x3d"text/javascript"\x3etmgAds.cmd.push(function(){var \'+d.id_div+\' \x3d tmgAdsBuildAd("\'+d.id_div+\'","\'+d.extra.data+\'","\'+k+\'","0").display();});\x3c\\/script\x3e\x3c/div\x3e\\n\'}else{d.output\x3dtmgAdsBuildAd(d.id_div,d.extra.data,k,0).fetchUrl()}--tmgAds.dfp.tile;return d.output}function tmgAdsRefreshAd(c,b,a){tmgAdsLog("Called: Refreshing ad["+a+"]: "+b);if(tmgAds.ads[a].hasOwnProperty("adslot")){tmgAdsLog("Refreshing ad: googletag.pubads().refresh(["+c+"]);");googletag.cmd.push(function(){tmgAdsLog("Updating setTargeting values:");c.setTargeting("adcount",[tmgAds.refreshTimers[b].adcount]);tmgAdsLog("Updating setTargeting values-\x3e adcount\x3d"+tmgAds.refreshTimers[b].adcount);for(var d in tmgAds.dfp.customvars){if(typeof tmgAds.dfp.customvars[d]!\x3d\x3dnull){c.setTargeting(d,tmgAds.dfp.customvars[d]);tmgAdsLog("Updating setTargeting values -\x3e "+d+"\x3d"+tmgAds.dfp.customvars[d])}}if(tmgAds.plugins.headerBidders.active){tmgAdsLog("tmgAds.plugins.headerBidders.active is ON");(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.pubads().refresh([c]):googletag.pubads().refresh([c])}else{tmgAdsLog("tmgAds.plugins.headerBidders.active is OFF");googletag.pubads().refresh([c])}})}else{tmgAdsLog("adslot does not exist: googletag.pubads().refresh(["+c+"]);")}}function tmgAdsCountdown(a,b){if(tmgAds.refreshTimers[b].currentCount\x3e0){if(tmgAds.config.viewportstatus\x3d\x3d\x3dtrue){tmgAdsLog("Countdown not finished, reducing countdown by 1s :: adtype:"+b+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[b].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[b].currentCount+"  adcount:"+tmgAds.refreshTimers[b].adcount);if(tmgAds.refreshTimers[b].currentCount\x3d\x3d2){tmgAdsEvent("actionHeaderBids")}--tmgAds.refreshTimers[b].currentCount}else{tmgAdsLog("tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus+" - window is not active, so countdown remains at "+tmgAds.refreshTimers[b].currentCount+"s")}}else{tmgAdsLog("Countdown finished, - ad is ready to refresh - waiting for the user to interact with the page before we refresh ads.")}}function tmgAdsScheduleRefreshableAds(c,b,a){function d(e){if(tmgAds.refreshTimers[c].currentCount\x3d\x3d\x3d0\x26\x26tmgAds.refreshTimers[c].refreshStatus\x3d\x3d\x3dfalse){tmgAds.refreshTimers[c].refreshStatus\x3dtrue;document.getElementById(a).style.opacity\x3d"0";setTimeout(function(){tmgAdsLog("User has interacted with page and therefore is now active - event.type\x3d"+e.type+"  -  count is 0... lets refrsh some ads.");tmgAdsLog("Firstly, lets remove the existing countdownID: "+tmgAds.refreshTimers[c].countdownID);window.clearInterval(tmgAds.refreshTimers[c].countdownID);if(tmgAds.config.deliveryModel.refreshCycle\x3d\x3d\x3d0||tmgAds.config.deliveryModel.refreshCycle\x3etmgAds.refreshTimers[c].adcount){tmgAdsLog("SUCCESS: We can refresh this ad as there is either no limit on number of refreshed ads or we have delivered less than the current limit");tmgAdsLog("tmgAds.config.deliveryModel.refreshCycle \x3d "+tmgAds.config.deliveryModel.refreshCycle);++tmgAds.refreshTimers[c].adcount;tmgAdsLog("Incrementing tmgAds.refreshTimers["+c+"].adcount to: "+tmgAds.refreshTimers[c].adcount);tmgAdsLog("Creating a new countdownID");tmgAds.refreshTimers[c].countdownID\x3dsetInterval(function(){tmgAdsCountdown(tmgAds.ads[b].adslot,c)},1000);tmgAdsLog("CSS transitions fadeout - Countdown has reached 1s to go... we need to start transitioning the look/feel of this unit by fading out the adslot...");tmgAdsLog("Resetting the countdown");tmgAds.refreshTimers[c].currentCount\x3dtmgAds.config.deliveryModel.refreshRate/1000;tmgAdsLog("Requesting Ad refresh - adtype:"+c+" countdownID:"+tmgAds.refreshTimers[c].countdownID+" adID\x3d"+b);tmgAds.refreshTimers[c].refreshStatus\x3dfalse;if(e.type!\x3d"click"){tmgAdsLog("Event is NOT a click event, so we can happily refresh this ad now.");tmgAdsRefreshAd(tmgAds.refreshTimers[c].slotID,c,b)}else{tmgAdsLog("Event is a CLICK event, we do not refresh based on these as they can overinflate delivery attempts.")}}else{tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle has been met.");tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle \x3d "+tmgAds.config.deliveryModel.refreshCycle);tmgAdsLog("ALERT: tmgAds.refreshTimers["+c+"].adcount \x3d "+tmgAds.refreshTimers[c].adcount);tmgAdsEvent("tmggpt-collapseStickyAdslot")}},1000)}else{}}tmgAds.refreshTimers[c]\x3d{slotID:tmgAds.ads[b].adslot,duration:tmgAds.config.deliveryModel.refreshRate/1000,currentCount:tmgAds.config.deliveryModel.refreshRate/1000,refreshStatus:false,adcount:1,countdownID:setInterval(function(){tmgAdsCountdown(tmgAds.ads[b].adslot,c)},1000)};document.addEventListener("mousemove",function(e){d(e)});document.addEventListener("keypress",function(e){d(e)});document.addEventListener("scroll",function(e){d(e)});document.addEventListener("orientationchange",function(e){d(e)});document.addEventListener("resize",function(e){d(e)});document.addEventListener("focus",function(e){d(e)});document.addEventListener("mousewheel",function(e){d(e)});document.addEventListener("DOMMouseScroll",function(e){d(e)})}function tmgAdsSetAdSlotToRefresh(c){tmgAdsLog("Called: tmgAdsSetAdSlotToRefresh("+c+")");tmgAds.counters\x3dtmgAds.counters||{};if(!tmgAds.counters.hasOwnProperty(c)){tmgAds.counters[c]\x3d0}if(Object.keys(tmgAds.ads).length\x3e0\x26\x26tmgAds.plugins.adSlotRefresh.active\x26\x26tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){tmgAdsLog("SUCCESS: Ads seem to have been defined AND retryCount \x3c\x3d retryLimit: tmgAds.plugins.stadSlotRefresh.retryCount\x3d"+tmgAds.plugins.adSlotRefresh.retryCount+"   tmgAds.plugins.adSlotRefresh.retryLimit\x3d"+tmgAds.plugins.adSlotRefresh.retryLimit);var a\x3d"none";for(var b in tmgAds.ads){if(tmgAds.ads.hasOwnProperty(b)){if(tmgAds.ads[b].adtype\x3d\x3dc){tmgAdsLog("SUCCESS: tmgads.ads["+b+"].adtype \x3d "+c);a\x3db;break}else{tmgAdsLog("FAILURE: tmgads.ads["+b+"].adtype !\x3d "+c)}}else{tmgAdsLog("FAILURE: tmgads.hasOwnProperty("+b+") - no hasOwnProperty exixts")}}if(a\x3d\x3d"none"){tmgAdsLog("Ad not found ["+c+"] perhaps its not beeing created yet. Number of times this script has been run for this ad -\x3e "+tmgAds.counters[c]);if(tmgAds.counters[c]\x3ctmgAds.plugins.counters){++tmgAds.counters[c];tmgAdsLog("Refresh count limit not hit lets call this script again");window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}else{tmgAdsLog("Refresh count limit hit, stop trying to fill this slot and stop running this script.")}}else{if(tmgAds.ads[a].adtype\x3d\x3dc){if(typeof tmgAds.ads[a].adslot\x3d\x3d"object"){tmgAdsLog("SUCCESS: calling tmgAdsScheduleRefreshableAds("+c+")");tmgAdsScheduleRefreshableAds(c,a,tmgAds.ads[a].div)}else{tmgAdsLog("ALERT: delaying implementing refreshables until the adslots are available - recalling tmgAdsSetAdSlotToRefresh("+c+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - retryCount:"+tmgAds.plugins.adSlotRefresh.retryCount+" of "+tmgAds.plugins.adSlotRefresh.retryLimit);if(tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){++tmgAds.plugins.adSlotRefresh.retryCount;window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}else{tmgAdsLog("ALERT: tmgAdsSetAdSlotToRefresh request limit hit")}}}}}else{++tmgAds.plugins.adSlotRefresh.retryCount;tmgAdsLog("ALERT: the tmgAds.ads object does not exist or is empty, ads have not been created yet - recalling tmgAdsSetAdSlotToRefresh("+c+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - incrementing count to: "+tmgAds.plugins.adSlotRefresh.retryCount);if(tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}}}function tmgAdsOnPageLoad(){tmgAdsLog("##################################################################################################################");tmgAdsLog("P A G E   L  O A D E D ");tmgAdsLog("##################################################################################################################");window.addEventListener("focus",function(){tmgAds.config.viewportstatus\x3dtrue;tmgAdsLog("AutoRefresh Event: window.onfocus - tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus)});window.addEventListener("blur",function(){tmgAds.config.viewportstatus\x3dfalse;tmgAdsLog("AutoRefresh Event: window.onblur - tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus)});tmgAdsLog("Executing tmgAds.cmd queue:");tmgAdsEvent("tmggpt-cmd-queue-start");while(tmgAds.cmd.length\x3e0){tmgAdsLog("Executing tmgAds.cmd queue: "+tmgAds.cmd.slice(0,1));(tmgAds.cmd.shift())()}tmgAdsInitPerformance()}function tmgAdsEvent(b){var c\x3d"tmgAds:"+b;var a\x3dnew CustomEvent(c);tmgAdsLog("EVENT: "+c);document.dispatchEvent(a)}function tmgAdsInitDeliveryModel(b){try{tmgAdsLog("Called tmgAdsInitDeliveryModel");b.config.deliveryModel\x3d{model:"none",activityStatus:"none"};for(i\x3d0;i\x3cb.config.deliveryModels.length;i++){if(typeof tmgAds.config.modelOld!\x3d"undefined"\x26\x26(b.config.deliveryModels[i].viewport\x3d\x3d"x"||b.config.deliveryModels[i].viewport\x3d\x3d"l")){tmgAdsLog("ALERT: Old tmgAds.model is still on this page - converting OLD model to NEW model - we break this loop here");b.config.deliveryModels[i].minHeight\x3db.config.modelOld.minHeight;b.config.deliveryModels[i].model\x3db.config.modelOld.model;b.config.deliveryModels[i].refreshCycle\x3db.config.modelOld.refreshCycle;b.config.deliveryModels[i].refreshRate\x3db.config.modelOld.refreshRate;b.config.deliveryModels[i].ruleName\x3d"OLD-"+b.config.modelOld.model+"-"+b.config.deliveryModels[i].viewport}else{tmgAdsLog("tmgAds.config.modelOld does not exist, this is a good thing")}if(b.config.deliveryModels[i].viewport\x3d\x3db.layout.viewport){tmgAdsLog("MATCHED (model/vp): vp\x3d"+b.config.deliveryModels[i].viewport+" vp\x3d"+b.layout.viewport);tmgAds.config.deliveryModel\x3db.config.deliveryModels[i];tmgAds.config.deliveryModel.activityStatus\x3d"none";if(b.config.deliveryModel.model\x3d\x3d"banner"){b.config.deliveryModel.model\x3d"ban"}}}if(b.config.deliveryModel.model!\x3d"none"){tmgAdsLog(\'SUCCESS: tmgAds.config.deliveryModel.model is NOT "none" -\x3e \'+b.config.deliveryModel.model);if(b.plugins.adSlotRefresh.pagetypes.indexOf(b.page.pagetype)\x3e-1){tmgAdsLog("SUCCESS: pagetype is suitable for sticky ads: "+b.page.pagetype);if((b.layout.viewport\x3d\x3d"x"||b.layout.viewport\x3d\x3d"l")\x26\x26(b.config.deliveryModel.model\x3d\x3d"mpu")){tmgAdsLog("Viewport \x26 Adtype match - X/L \x26 MPU");b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model;tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)}if((b.layout.viewport\x3d\x3d"xs"||b.layout.viewport\x3d\x3d"s"||b.layout.viewport\x3d\x3d"m")\x26\x26(b.config.deliveryModel.model\x3d\x3d"ban")){tmgAdsLog("Viewport \x26 Adtype match - X/L \x26 MPU");b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model;tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)}}else{tmgAdsLog("ALERT: tmgAds.page.pagetype is not suitable for sticky ads -\x3e setting tmgAds.config.deliveryModel.activityStatus \x3d none");b.config.deliveryModel.activityStatus\x3d"none"}}else{tmgAdsLog(\'WARNING: tmgAds.config.deliveryModel.model is set to "none" -\x3e setting tmgAds.config.deliveryModel.activityStatus\x3d\'+b.config.deliveryModel.model);b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model}tmgAdsLog("INFO: Delivery Model is set as: ruleName:"+b.config.deliveryModel.ruleName+"  viewport:"+b.config.deliveryModel.viewport+"  model:"+b.config.deliveryModel.model+"  refreshRate:"+(b.config.deliveryModel.refreshRate/1000)+"s  refreshCycle:"+b.config.deliveryModel.refreshCycle+"  minHeight:"+b.config.deliveryModel.minHeight)}catch(a){tmgAdsLog("ERROR: tmgAdsInitDeliveryModel failed -\x3e error\x3d"+a.message,b)}}function tmgAdsInitHeaderBidders(e){tmgAdsLog("Called:");if(e.plugins.headerBidders.active){tmgAdsLog("headerBidding is ACTIVE");if(e.plugins.headerBidders.indexExchange.active){tmgAdsLog("indexExchange is ACTIVE");e.metrics.headerBidders.indexExchange\x3d{activated:tmgAdsTimer()};window.headertag\x3dwindow.headertag||{};window.headertagconfig\x3d{siteId:e.plugins.headerBidders.indexExchange.siteId,timeout:e.plugins.headerBidders.indexExchange.timeout,partners:{INDX:{targetingType:e.plugins.headerBidders.indexExchange.partners.INDX.targetingType,timeout:e.plugins.headerBidders.indexExchange.partners.INDX.timeout}}};var d\x3ddocument.createElement("script");d.src\x3dtmgAds.plugins.headerBidders.indexExchange.jslib;d.type\x3d"text/javascript";var b\x3ddocument.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);tmgAdsLog("IndexEchange library is being loaded:"+d.src);googletag.cmd.push(function(){if(typeof window.headertag\x3d\x3d\x3d"undefined"||window.headertag.apiReady!\x3d\x3dtrue){tmgAdsLog("window.headertag is not defined");window.headertag\x3dgoogletag}else{tmgAdsLog("widnow.headertag is already defined")}})}else{tmgAdsLog("indexExchange is INACTIVE")}if(e.plugins.headerBidders.amazon.active){console.log("Amazon A9 is ACTIVE");e.metrics.headerBidders.amazon\x3d{activated:tmgAdsTimer()};tmgAdsLoadJS("amazona9",tmgAds.plugins.headerBidders.amazon.jslib,function(){tmgAdsEvent("amazona9:loaded")})}else{console.log("Amazon A9 is INACTIVE")}if(e.plugins.headerBidders.prebid.active){tmgAdsLog("Prebid.js is ACTIVE");e.metrics.headerBidders.prebid\x3d{activated:tmgAdsTimer()};window.pbjs\x3dwindow.pbjs||{};window.pbjs.que\x3dwindow.pbjs.que||[];window.PREBID_TIMEOUT\x3de.plugins.headerBidders.prebid.timeout;tmgAdsLog("Prebid.js: we need to set this -\x3e googletag.pubads().disableInitialLoad();");googletag.cmd.push(function(){googletag.pubads().disableInitialLoad()});pbjs.que.push(function(){var g\x3d[{code:"tmgads_head_mpu",sizes:[[300,250],[300,600]],bids:[{bidder:"rubicon",params:{accountId:e.plugins.headerBidders.prebid.bidders.rubicon.accountId,siteId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].siteId,zoneId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].zoneId,sizes:[15,10]}}]},{code:"tmgads_head_ban",sizes:[[728,90],[970,250]],bids:[{bidder:"rubicon",params:{accountId:e.plugins.headerBidders.prebid.bidders.rubicon.accountId,siteId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].siteId,zoneId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].zoneId,sizes:[2,57]}}]}];pbjs.que.push(function(){pbjs.addAdUnits(g);pbjs.requestBids({bidsBackHandler:f("pbjs.sendAdserverRequest")})});function f(h){if(pbjs.adserverRequestSent){console.log("tmgAdsInitHeaderBidders: pbjs.adserverRequestSent is set - "+h);return}else{console.log("tmgAdsInitHeaderBidders: pbjs.adserverRequestSent is not set - "+h);pbjs.adserverRequestSent\x3dtrue;googletag.cmd.push(function(){pbjs.que.push(function(){console.log("tmgAdsInitHeaderBidders: Prebid.js -\x3e bidsBackhandler");pbjs.setTargetingForGPTAsync();googletag.pubads().refresh()})})}}setTimeout(function(){if(pbjs.adserverRequestSent){f("PREBID_TIMEOUT")}},e.plugins.headerBidders.prebid.timeout)});var c\x3ddocument.createElement("script");c.type\x3d"text/javascript";c.async\x3de.plugins.headerBidders.prebid.async;c.src\x3de.plugins.headerBidders.prebid.jslib;var a\x3ddocument.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);tmgAdsLog("Prebid.js libraray is being loaded:"+c.src)}else{tmgAdsLog("Prebid.js is INACTIVE")}}else{tmgAdsLog("headerBidding is INACTIVE")}}function tmgAdsRefreshHeaderBidders(a){}(function(){if(typeof window.CustomEvent\x3d\x3d\x3d"function"){return false}function a(c,d){d\x3dd||{bubbles:false,cancelable:false,detail:undefined};var b\x3ddocument.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype\x3dwindow.Event.prototype;window.CustomEvent\x3da})();(function(a){a.metrics.tmggptInitBegin\x3dtmgAdsTimer();tmgAdsInit(a);tmgAdsInitGPT();tmgAdsInitHeaderBidders(a);tmgAdsInitEventHandlers(a);tmgAdsEvent("tmggpt-initialise:start");tmgAdsInitConfig(a);tmgAdsInitGeoAPIStatus(a);tmgAdsInitData(a);tmgAdsInitDeliveryModel(a);tmgAdsInitDFP(a);tmgAdsLoadJS("grapeshot",a.plugins.grapeshot.url,a.plugins.grapeshot,function(){tmgAdsEvent("grapeshot:loaded")});a.metrics.tmggptInitEnd\x3dtmgAdsTimer();a.metrics.metricTimeToExecuteTMGGPT\x3da.metrics.tmggptInitEnd-a.metrics.tmggptInitBegin;tmgAdsEvent("tmggpt-initialise:end")})(tmgAds);\nwindow.tmgAds\x3dwindow.tmgAds||{};window.tmgAds.cmd\x3dwindow.tmgAds.cmd||[];window.tmgAds.log\x3dwindow.tmgAds.log||[];window.tmgAds.metrics\x3dwindow.tmgAds.metrics||{ads:{},page:{},headerBidders:{}};window.tmgAds.about\x3d{version:"4.4.0-IX-01",date:"2016-11-04",company:"Telegraph Media Group",author:"Sean Dillon - sean@telegraph.co.uk"};function tmgAdsInit(e){try{tmgAdsLog("Called:");e.log\x3de.log||[];e.ads\x3d{};e.adslots\x3d{};e.data\x3d{metatags:{}};e.performance\x3d{};e.refreshTimers\x3d{};e.plugins\x3d{gpt:{async:true,enableSingleRequest:false,enableAsyncRendering:true,collapseEmptyDivs:true,setLocation:false,vastOutputVersion:"xml_vast3",geoapi:{precision:20000,watching:false,test:"string"}},refurl:{active:true},sizemapping:tmgAdsGetSizeMapping(),adtest:tmgAdsGetURLParam("adtest",window.location.search),adconsole:tmgAdsGetURLParam("adconsole",window.location.search),adsafe:tmgAdsGetURLParam("adsafe",window.location.search),adkill:tmgAdsGetURLParam("adkill",window.location.search),adconnect:tmgAdsGetURLParam("adconnect",window.location.search),adheaderbid:tmgAdsGetURLParam("adheaderbid",window.location.search),adindexexchange:tmgAdsGetURLParam("adindexexchange",window.location.search),adprebid:tmgAdsGetURLParam("adprebid",window.location.search),adpubfood:tmgAdsGetURLParam("adpubfood",window.location.search),adfastlane:tmgAdsGetURLParam("adfastlane",window.location.search),donottrack:{active:true,status:tmgAdsGetDoNotTrack()},counters:20,tmgcookies:{active:true},performance:{active:true,supported:"unknown"},chartbeat:{active:false},quantcast:{active:true,maxSegs:10},grapeshot:{active:true,maxSegs:20,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:false,url:"//telegraph.grapeshot.co.uk/main/channels.cgi?url\x3d"+location.protocol+"//"+location.host+location.pathname},krux:{active:false,includeinurl:true,maxSegs:50},adobe:{active:true,cookiename:"AMCV_2C7336C753C676BA0A490D4B@AdobeOrg",retryPeriod:250,retryLimit:20,retryCount:0},adSlotRefresh:{active:true,retryPeriod:200,retryLimit:60,retryCount:0,exemptAdSlots:["tmg","inr","ftr"],pagetypes:["story","live","video","gallery"]},blockdomain:["chase.telegraph.co.uk","cms1.aem-dev1.awspreprod.telegraph.co.uk","cms1.aem-dev2.awspreprod.telegraph.co.uk","cms1.aem-dev3.awspreprod.telegraph.co.uk","cms1.aem-dev4.awspreprod.telegraph.co.uk","cms1.aem-dev5.awspreprod.telegraph.co.uk","cms1.aem-dev6.awspreprod.telegraph.co.uk","cms1.aem-dev7.awspreprod.telegraph.co.uk","cms1.aem-dev8.awspreprod.telegraph.co.uk","cms1.aem-dev9.awspreprod.telegraph.co.uk","cms1.aem-dev10.awspreprod.telegraph.co.uk","cms1.aem-dev11.awspreprod.telegraph.co.uk","cms1.aem-dev12.awspreprod.telegraph.co.uk","cms1.aem-test1.awspreprod.telegraph.co.uk","cms1.aem-test2.awspreprod.telegraph.co.uk","cms1.aem-test3.awspreprod.telegraph.co.uk","cms1.aem-test4.awspreprod.telegraph.co.uk","cms1.aem-test5.awspreprod.telegraph.co.uk","cms1.aem-test6.awspreprod.telegraph.co.uk","cms1.aem-editorial1.awspreprod.telegraph.co.uk","cms1.aem-editorial2.awspreprod.telegraph.co.uk","cms1.aem-nitro1.awspreprod.telegraph.co.uk","cms1.aem-demo.awspreprod.telegraph.co.uk","cms1.aem-perf1.awspreprod.telegraph.co.uk","cms1.aem-perf2.awspreprod.telegraph.co.uk"],modelDefault:[{viewport:"x",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"l",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"m",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"s",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0},{viewport:"xs",ruleName:"Default",model:"none",minHeight:0,refreshRate:0,refreshCycle:0}],audsci:{active:true,maxSegs:10,retryPeriod:200,retryLimit:20,retryCount:0,loadStatus:false},audscihawkeye:{name:"audscihakweye",active:true,retryPeriod:200,retryLimit:10,retryCount:0,loadStatus:false,ord:function(){return Number(new Date())},url:"",src:null,type:null,data:{f:{site:["culture","fashion","gardening","health","lifestyle","travel","women","foodanddrink","food_and_drink"],sect:["news.newstopics.celebritynews","news.newstopics.theroyalfamily","travel.cruises","travel.destination","travel.destinations","travel.hotel","culture.art","culture.books","culture.music.opera","culture.theatre"],url:"http://pq-direct.revsci.net/pql?placementIdList\x3dokcFAM,lKZUwX,wf72wK,glEQ1O,8nFYC0,K4cUeI\x26cb\x3d"},m:{site:["earth","education","finance","history","motoring","news","property","science","sport","technology","men"],sect:["travel.activityandadventure","travel.snowandski","culture.film","culture.music","culture.photography","culture.tvandradio"],url:"http://pq-direct.revsci.net/pql?placementIdList\x3d8tTXkZ,dpRwf8,QRM4c5,YdP6bx,08VYBY\x26cb\x3d"}}}};e.layout\x3d{viewport:"u",viewportWidth:"",getBreakpoint:function d(h){var j\x3d"xs";(h\x3e\x3de.plugins.sizemapping.s.size[0])?j\x3d"s":null;(h\x3e\x3de.plugins.sizemapping.m.size[0])?j\x3d"m":null;(h\x3e\x3de.plugins.sizemapping.l.size[0])?j\x3d"l":null;(h\x3e\x3de.plugins.sizemapping.x.size[0])?j\x3d"x":null;tmgAdsLog("tmgAds.layout.getBreakpoint -\x3e width:"+e.layout.viewportWidth+" height:"+e.layout.viewportHeight+" size:"+e.layout.viewport);return j},getViewportWidth:function c(){if(document.documentElement.clientWidth\x3e\x3d0){return document.documentElement.clientWidth}else{if(document.body\x26\x26document.body.clientWidth\x3e\x3d0){return document.body.clientWidth}else{if(window.innerWidth\x3e\x3d0){return window.innerWidth}else{return 0}}}},getViewportHeight:function g(){if(document.documentElement.clientHeight\x3e\x3d0){return document.documentElement.clientHeight}else{if(document.body\x26\x26document.body.clientHeight\x3e\x3d0){return document.body.clientHeight}else{if(window.innerHeight\x3e\x3d0){return window.innerHeight}else{return 0}}}},onresize:function f(){e.layout.viewportHeight\x3de.layout.getViewportHeight();e.layout.viewportWidth\x3de.layout.getViewportWidth();e.layout.viewport\x3de.layout.getBreakpoint(e.layout.viewportWidth);(e.layout.viewport\x3d\x3d"xs"||e.layout.viewport\x3d\x3d"s"||e.layout.viewport\x3d\x3d"m")?e.layout.platform\x3d"mobile":e.layout.platform\x3d"desktop"},addEvent:function b(k,j,h){if(k\x3d\x3d\x3dnull||k\x3d\x3d"undefined"){return}if(k.addEventListener){k.addEventListener(j,h,false)}else{if(k.attachEvent){k.attachEvent("on"+j,h)}else{k["on"+j]\x3dh}}}};e.page\x3dtmgAdsGetPageData();e.layout.onresize();tmgAdsLog("Current viewport now: "+e.layout.viewport);tmgAdsLog("Creating an event handler for dealing with page layout changes ie; viewport change");e.layout.addEvent(window,"resize",e.layout.onresize);e.plugins.headerBidders\x3d{active:true,zones:[],indexExchange:{name:"index",active:true,jslib:"//js-sec.indexww.com/ht/p/184224-249976729910975.js",async:false,loc:"head",siteId:888888,timeout:800,partners:{INDX:{targetingType:"slot",timeout:150}}},amazon:{name:"amazon",active:false,jslib:"//c.amazon-adsystem.com/aax2/amzn_ads.js",async:false,loc:"head",siteId:3461,timeout:1000,},prebid:{name:"prebid",active:false,timeout:2000,jslib:"http://s.telegraph.co.uk/tmgads/headerbidders/prebid_20160811141613.js",async:false,loc:"head",bidders:{rubicon:{accountId:8560,viewports:{x:{siteId:103872,zoneId:486846},l:{siteId:103872,zoneId:486846},m:{siteId:103876,zoneId:486860},s:{siteId:103876,zoneId:486860},xs:{siteId:103876,zoneId:486860}},sizes:{"320x50":43,"300x50":44,"970x250":57,"728x90":2,"300x250":15,"120x600":8,"160x600":9,"300x600":10}}}}};if(e.plugins.adheaderbid!\x3d"null"){e.plugins.headerBidders.active\x3de.plugins.adheaderbid;tmgAdsLog("OVER-RIDE: tmgAds.plugins.headerBidders.active: "+e.plugins.headerBidders.active)}if(e.plugins.adindexexchange!\x3d"null"){e.plugins.headerBidders.indexExchange.active\x3de.plugins.adindexexchange;console.log("OVER-RIDE: obj.plugins.headerBidders.indexExchange.active: "+e.plugins.headerBidders.indexExchange.active)}tmgAdsLog("TMG-GPT-"+e.about.version+" - "+e.about.date);tmgAdsEvent("tmgAdsInitLoaded");tmgAdsLog("SUCCESS: tmgAdsInit() initialisation");tmgAdsLog("##################################################################################################################");return e}catch(a){tmgAdsLog("ERROR: tmgAdsInit() failed -\x3e error\x3d"+a.message,e)}}function tmgAdsInitGPT(){tmgAdsLog("Called:");window.googletag\x3dwindow.googletag||{};window.googletag.cmd\x3dwindow.googletag.cmd||[];tmgAdsLog("googletag enableAsyncRendering -\x3e "+tmgAds.plugins.gpt.enableAsyncRendering);(tmgAds.plugins.gpt.enableAsyncRendering)?window.googletag.cmd[(function(){googletag.pubads().enableAsyncRendering()})]:null;var a\x3ddocument.createElement("script");a.async\x3dtmgAds.plugins.gpt.async;a.type\x3d"text/javascript";a.src\x3d"//www.googletagservices.com/tag/js/gpt.js";var b\x3ddocument.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function tmgAdsInitConfig(b){try{tmgAdsLog("Called:");b.config\x3d{viewportstatus:true,refurl:true,adsizematrix:tmgAdsGetSizeMatrix(),modelDefault:b.plugins.modelDefault};if(typeof b.model\x3d\x3d"undefined"){console.log("WARNING: tmgAds.model does not exist for some reason (possibly old CMS like eScenic).");b.model\x3db.config.modelDefault}if(typeof b.model.length\x3d\x3d"undefined"){tmgAdsLog("WARNING: this page still has the old tmgAds.model code on it, it needs updating, in the meantime we convert this to the new default model (no ads - tmgAds.config.modelDefault) and archive the old model off as tmgAds.config.modelOld");b.config.modelOld\x3db.model;b.model\x3db.config.modelDefault}b.config.deliveryModels\x3db.model;tmgAdsEvent("tmgAdsInitConfigLoaded");tmgAdsLog("SUCCESS: tmgAdsInitConfig() initialisation");tmgAdsLog("##################################################################################################################");return b}catch(a){tmgAdsLog("ERROR: tmgAdsInitConfig() failed -\x3e error\x3d"+a.message)}}function tmgAdsInitData(c){try{tmgAdsLog("Called:");c.counters\x3d{};c.metatags\x3d{};c.page\x3dtmgAdsGetPageData();c.tmg\x3dtmgAdsGetTMGUserData();c.google\x3dtmgAdsGetGoogleData();c.adobe\x3dtmgAdsGetAdobe();c.krux\x3dtmgAdsGetKruxData();c.browser\x3dtmgAdsGetBrowserData();c.flash\x3dtmgAdsFlashDetect();c.cookies\x3d{all:document.cookie};c.cookies.adops\x3dtmgAdsGetTMGCookies("adops");c.adsafe\x3dtmgAdsGetAdsafeBlocks();c.audsci\x3dtmgAdsGetAudSciData();c.page.cms\x3dtmgAdsGetCMS();for(var a in c.plugins.blockdomain){if(c.plugins.blockdomain.hasOwnProperty(a)){if(c.page.domain\x3d\x3dc.plugins.blockdomain[a]){c.plugins.adkill\x3dtrue;tmgAdsLog("tmgAdsInitConfig: This page is being viewed through one of our AEM preview instances, turning ads off in: "+c.plugins.blockdomain[a])}}}if(typeof window.optimize\x3d\x3d"undefined"){tmgAdsLog("OPTIMIZELY: WARNING -\x3e window.optimize is not defined, creating empty obj");window.optimize\x3dwindow.optimize||{activeExperiments:[]}}else{tmgAdsLog("OPTIMIZELY: window.optimize is defined")}c.optimizely\x3dwindow.optimize.activeExperiments;tmgAdsEvent("tmgAdsInitDataLoaded");tmgAdsLog("SUCCESS: tmgAdsInitData() initialisation");tmgAdsLog("##################################################################################################################");return c}catch(b){tmgAdsLog("ERROR: tmgAdsInitData() - failed -\x3e error\x3d"+b.message)}}var tmgAdsInitDFP\x3dfunction tmgAdsInitDFP(a){tmgAdsLog("Called:");a.dfp\x3dtmgAdsGetDFPData();a.dfp.customvars\x3dtmgAdsGetGPTCustomVars();a.dfp.gpt\x3dtmgAdsGetGPTSetup(a.dfp.gpt);a.dfp.adunit\x3d"/"+a.dfp.networkid+"/"+a.dfp.sitezone;tmgAdsLog("AdUnit set to: "+a.dfp.adunit);a.geo\x3dtmgAdsGetGeoAPI();tmgAdsAdjustSizeMapping()};function tmgAdsInitPerformance(d){try{tmgAdsLog("Called:");tmgAdsLog("Performance monitoring status is: "+tmgAds.plugins.performance.active);if(typeof window.performance!\x3d"undefined"){tmgAdsLog("window.performance exists :-)");if(tmgAds.plugins.performance.active){for(var c in window.performance.timing){var a\x3dwindow.performance.timing[c];if(typeof window.performance.timing[c]!\x3d"object"){tmgAds.performance[c]\x3da}}if(typeof window.performance.getEntriesByType!\x3d"undefined"){tmgAds.performance.resources\x3dwindow.performance.getEntriesByType("resource");tmgAds.performance.mark\x3dwindow.performance.getEntriesByType("mark");tmgAds.performance.measure\x3dwindow.performance.getEntriesByType("measure");tmgAds.performance.navigation\x3dwindow.performance.getEntriesByType("navigation")}else{tmgAds.performance.resources\x3d"window.performance.getEntriesByType not Supported"}tmgAdsLog("SUCCESS: windows,.performance has been acitvated...")}else{tmgAdsLog("WARNING: tmgAds.plugins.performance.active is set to flase, performance monitoing has been turned off.")}}else{tmgAdsLog("WARNING: window.performance NOT supported by this browser. :-(")}tmgAdsLog("SUCCESS: tmgAdsInitPerformance() initialisation");tmgAdsLog("##################################################################################################################")}catch(b){tmgAdsLog("ERROR: tmgAdsInitPerformance() - failed -\x3e error\x3d"+b.message)}}function tmgAdsInitEventHandlers(){tmgAdsLog("Called:");try{var b\x3ddocument.addEventListener||document.attachEvent,c\x3ddocument.removeEventListener||document.detachEvent,a\x3ddocument.addEventListener?"DOMContentLoaded":"onreadystatechange";b.call(document,a,function(){if(a\x3d\x3d\x3d"DOMContentLoaded"||(a\x3d\x3d\x3d"onreadystatechange"\x26\x26document.readyState\x3d\x3d\x3d"complete")){tmgAdsEvent("tmg-initialise:pageload");tmgAdsLog("SUCCESS: DOMContentLoaded/onreadystatechange \x3d complete: Page has loaded, DOM ready.");tmgAds.metrics.tmggptPageLoad\x3dtmgAdsTimer();tmgAdsOnPageLoad()}});googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(e){tmgAdsActionEventHandler("slotRenderEnded",e)});googletag.pubads().addEventListener("impressionViewable",function(e){tmgAdsActionEventHandler("impressionViewable",e)});googletag.pubads().addEventListener("slotVisibilityChanged",function(e){tmgAdsActionEventHandler("slotVisibilityChanged",e)})});document.addEventListener("tmg:init-ads",function(){tmgAdsLog("EVENT: tmg:init-ads fired");tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);for(var e in tmgAds.ads){if(tmgAds.ads.hasOwnProperty(e)){googletag.destroySlots([tmgAds.ads[e].adslot]);tmgAdsBuildAd(tmgAds.ads[e].div,"","").display()}}});document.addEventListener("tmgAds:transitionAdFadeOut",function(){tmgAdsActionEventHandler("tmgAds:transitionAdFadeOut")});document.addEventListener("tmgAds:transitionAdFadeIn",function(){tmgAdsActionEventHandler("tmgAds:transitionAdFadeIn")});document.addEventListener("tmgAds:tmggpt-collapseStickyAdslot",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-collapseStickyAdslot")});document.addEventListener("tmgAds:tmggpt-initialise:start",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-initialise:start")});document.addEventListener("tmgAds:tmggpt-initialise:end",function(){tmgAdsActionEventHandler("tmgAds:tmggpt-initialise:end")});document.addEventListener("tmgAds:grapeshot:loaded",function(){tmgAdsActionEventHandler("tmgAds:grapeshot:loaded")});document.addEventListener("tmgAds:audsci:loaded",function(){tmgAdsActionEventHandler("tmgAds:audsci:loaded")});document.addEventListener("tmgAds:audsci:reload",function(){tmgAdsActionEventHandler("tmgAds:audsci:reload")});document.addEventListener("tmgAds:index:loaded",function(){tmgAdsActionEventHandler("tmgAds:index:loaded")});document.addEventListener("tmgAds:index:reload",function(){tmgAdsActionEventHandler("tmgAds:index:reload")});document.addEventListener("tmgAds:amazona9:loaded",function(){tmgAdsActionEventHandler("tmgAds:amazona9:loaded")});document.addEventListener("tmgAds:amazona9:reload",function(){tmgAdsActionEventHandler("tmgAds:amazona9:reload")});document.addEventListener("tmgAds:prebid:loaded",function(){tmgAdsActionEventHandler("tmgAds:prebid:loaded")});document.addEventListener("tmgAds:prebid:reload",function(){tmgAdsActionEventHandler("tmgAds:prebid:reload")})}catch(d){tmgAdsLog("ERROR: tmgAdsInitEventHandlers() - failed -\x3e error\x3d"+d.message)}}function tmgAdsActionEventHandler(f,b){try{switch(f){case"tmgAds:tmggpt-initialise:start":tmgAdsLog("EVENT: "+f);break;case"tmgAds:tmggpt-initialise:end":tmgAdsog("EVENT: "+f);break;case"tmgAds:tmggpt-initialise:pageload":console.log("EVENT: "+f);break;case"tmgAds:transitionAdFadeIn":tmgAdsLog("EVENT: "+f);break;case"tmgAds:transitionAdFadeOut":tmgAdsLog("EVENT: "+f);break;case"tmgAds:index:loaded":tmgAdsLog("EVENT: "+f);break;case"tmgAds:index:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("index",tmgAds.plugins.index.url,tmgAds.plugins.index,function(){tmgAdsEvent("index:loaded")});break;case"tmgAds:amazona9:loaded":tmgAdsLog("EVENT: "+f);if(location.href.indexOf("blocka9")\x3e-1){console.warn("AMAZONA9 - blocked")}else{tmgAds.plugins.headerBidders.amazon.tokens\x3damnzads.getTokens()}break;case"tmgAds:amazona9:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("amazona9",tmgAds.plugins.headerBidders.amazon.jslib,function(){tmgAdsEvent("amazona9:loaded")});break;case"tmgAds:prebid:loaded":tmgAdsLog("EVENT: "+f);break;case"tmgAds:prebid:reload":tmgAdsLog("EVENT: "+f);tmgAdsLoadJS("prebid",tmgAds.plugins.prebid.url,tmgAds.plugins.prebid,function(){tmgAdsEvent("prebid:loaded")});break;case"tmgAds:grapeshot:loaded":var j\x3d"EVENT: "+f;tmgAdsLog(j);tmgAds.grapeshot\x3d{raw:null,dfp:[]};if(typeof window.gs_channels!\x3d"undefined"){tmgAds.grapeshot\x3d{raw:window.gs_channels,dfp:window.gs_channels.split(",")};tmgAdsog(j+" -\x3e window.gs_channels exists : ");tmgAdsog(j+" -\x3e window.gs_channels number : "+tmgAds.grapeshot.dfp.length);tmgAdsog(j+" -\x3e window.gs_channels content: "+tmgAds.grapeshot.dfp.toString())}else{tmgAdsog(j+" -\x3e window.gs_channels does not exist:")}tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);break;case"tmgAds:audsci:loaded":tmgAdsLog("EVENT: "+f);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);break;case"tmgAds:audsci:reload":break;case"tmgAds:actionHeaderBids":tmgAdsLog("EVENT: "+f);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);tmgAdsInitData(tmgAds);tmgAdsInitDFP(tmgAds);tmgAdsLog("tmgAds.dfp.customvars.audsci: "+tmgAds.dfp.customvars.audsci);break;case"tmgAds:tmggpt-collapseStickyAdslot":tmgAdsLog("EVENT: "+f);tmgAdsLog("We will now close down the sticky ad for the this adunit: "+tmgAds.config.deliveryModel.model);var h\x3d"unset";if(tmgAds.config.deliveryModel.model\x3d\x3d"ban"){h\x3d"banner-container";if(document.getElementById("tmgads_body_ban")){document.getElementById("tmgads_body_ban").style.height\x3d"0px"}if(document.getElementById("tmgAds_ban")){document.getElementById("tmgAds_ban").style.height\x3d"0px"}}if(tmgAds.config.deliveryModel.model\x3d\x3d"mpu"){h\x3d"advert.component";if(document.getElementById("tmgads_body_mpu")){document.getElementById("tmgads_body_mpu").style.height\x3d"0px"}if(document.getElementById("tmgAds_mpu")){document.getElementById("tmgAds_mpu").style.height\x3d"0px"}}if(tmgAds.config.deliveryModel.model!\x3d"unset"){var a\x3ddocument.getElementsByClassName(h);for(var e\x3d0;e\x3ca.length;e++){tmgAdsLog("Closing adslot: "+a[e]);a[e].style.display\x3d"none"}}break;case"slotRenderEnded":var g\x3dtmgAdsTimer();tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);if(typeof tmgAds.metrics.tmggptAdFirstAdRendered\x3d\x3d"undefined"){tmgAdsLog("tmgAds.metrics.tmggptAdFirstAdRendered is not defined, setting this now");tmgAds.metrics.tmggptAdFirstAdRendered\x3dg;tmgAds.metrics.metricTimeToRenderFirstAd\x3dtmgAds.metrics.tmggptAdFirstAdRendered-tmgAds.metrics.tmggptPageLoad}tmgAds.metrics.tmggptAdLastAdRendered\x3dg;tmgAds.metrics.metricTimeToRenderAllAds\x3dtmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptAdFirstAdQueued;tmgAds.metrics.metricTimeFromPageLoadToLoadAllAds\x3dtmgAds.metrics.tmggptAdLastAdRendered-tmgAds.metrics.tmggptInitBegin;var c\x3db.slot.getTargeting("div");setTimeout(function(){if(!b.isEmpty){tmgAdsLog("Ad is rendered, transition height/opacity");document.getElementById(c).style.opacity\x3d"1";document.getElementById(c).style.height\x3db.size[1]+"px"}else{tmgAdsLog("Ad is EMPTY we have nothing to transition")}},500);break;case"impressionViewable":tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);break;case"slotVisibilityChanged":tmgAdsLog("EVENT: "+f+" lineItemId:"+b.lineItemId+"  -  creativeId:"+b.creativeId+" - size:"+b.size+" - isEmpty:"+b.isEmpty+" - slotContentChanged:"+b.slotContentChanged,b);break}}catch(d){tmgAdsLog("ERROR: tmgAdsActionEventHandler() - failed -\x3e error\x3d"+d.message,b)}}function tmgAdsInitGeoAPIStatus(b){try{if(typeof window.googletag!\x3d"undefined"){if(b.plugins.gpt.setLocation){tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is ACTIVATED for this site - now lets check if the browsers currently supports the Geo-API feature");if(b.geo.supported\x3d\x3d1){tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS supported - now lets check if the browser supports this feature");if(b.geo.available\x3d\x3d1){tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS available - setting the following: googletag.setLocation("+b.geo.api.longitude+", "+b.geo.api.latitude+", "+b.geo.api.accuracy+") [longitude,latitude,accuracy]");googletag.cmd.push(function(){googletag.setLocation(b.geo.api.longitude,b.geo.api.latitude,b.geo.api.accuracy)})}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.available IS NOT available")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.geo.supported IS NOT supported.")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: obj.plugins.gpt.setLocation is NOT ACTIVATED for this site.")}}else{tmgAdsLog("tmgAdsGeoAPIStatus: WARNING: googletag obj does not exist")}}catch(a){tmgAdsLog("ERROR: tmgAdsInitGeoAPIStatus() - failed -\x3e error\x3d"+a.message,event)}}function tmgAdsGetSizeMatrix(){tmgAdsLog("Called");var a\x3d{ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"};return a}function tmgAdsGetSizeMapping(){tmgAdsLog("Called");var a\x3d{x:{size:[1368,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},l:{size:[1008,768],ban:[[970,250],[970,90],[970,66],[940,250],[900,250],[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},m:{size:[730,480],ban:[[728,90],[468,60]],mpu:[[300,1050],[300,600],[300,250],[160,600],[120,600]],hpg:[[300,1050],[300,600],[300,250],[160,600],[120,600]],sky:[[300,1050],[300,600],[300,250],[160,600],[120,600]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"620x415"},s:{size:[480,320],ban:[[300,50],[320,50],[320,100],[300,250],[468,60]],mpu:[[300,250],[320,100],[320,50],[300,50]],sky:[[300,250],[320,100],[320,50],[300,50]],hpg:[[300,250],[320,100],[320,50],[300,50]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"},xs:{size:[0,0],ban:[[300,250],[320,100],[320,50],[300,50]],mpu:[[300,250],[320,100],[320,50],[300,50]],sky:[[300,250],[320,100],[320,50],[300,50]],hpg:[[300,250],[320,100],[320,50],[300,50]],mob:[[300,250],[320,100],[320,50],[300,50]],com:[300,260],car:[300,250],pp:[7,7],ins:"5x5",yel:[3,3],inr:[1,1],tmg:[1,1],ftr:[1,1],vid:"300x235"}};return a}function tmgAdsGetDFPData(){var a\x3d{pos:0,tile:0,adserver:"ad.doubleclick.net",networkid:"6582",site:tmgAds.page.site,sitename:"tmg.telegraph."+tmgAds.page.site,zonename:tmgAds.page.zone.substr(0,100),sitezone:"tmg.telegraph."+tmgAds.page.site+"/"+tmgAds.page.zone.substr(0,100),ord:Number(new Date())};tmgAdsLog("tmgads.dfp.site     \x3d "+a.site);tmgAdsLog("tmgads.dfp.sitename \x3d "+a.sitename);tmgAdsLog("tmgads.dfp.zonename \x3d "+a.zonename);tmgAdsLog("tmgads.dfp.sitezone \x3d "+a.sitezone);return a}function tmgAdsAdjustSizeMapping(){tmgAdsLog("Called");if(tmgAds.dfp.site\x3d\x3d"puzzles"){tmgAdsLog("ALERT: site is not covered by default sizeing values, we are resetting these now -\x3e at\x3dban -\x3e site\x3d"+tmgAds.dfp.site);tmgAds.config.adsizematrix.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.x.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.l.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.m.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.s.ban\x3d[[468,60],[728,90],[900,250],[940,250]];tmgAds.plugins.sizemapping.xs.ban\x3d[[468,60],[728,90],[900,250],[940,250]]}if(tmgAds.dfp.site\x3d\x3d"fantasyfootball"){tmgAdsLog("ALERT: site is not covered by default sizing values, we are resetting these now -\x3e site\x3d"+tmgAds.dfp.site);tmgAds.config.adsizematrix.ban\x3d[728,90];tmgAds.plugins.sizemapping.x.ban\x3d[728,90];tmgAds.plugins.sizemapping.l.ban\x3d[728,90];tmgAds.plugins.sizemapping.m.ban\x3d[728,90];tmgAds.plugins.sizemapping.s.ban\x3d[320,50];tmgAds.plugins.sizemapping.xs.ban\x3d[320,50];tmgAds.config.adsizematrix.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.x.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.l.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.m.mpu\x3d[[300,250],[300,600]];tmgAds.plugins.sizemapping.s.mpu\x3d[300,250];tmgAds.plugins.sizemapping.xs.mpu\x3d[300,250]}if(tmgAds.dfp.site\x3d\x3d"courses"||tmgAds.dfp.site\x3d\x3d"clearing"){tmgAds.config.adsizematrix.mpu\x3d[300,250];tmgAds.plugins.sizemapping.x.mpu\x3d[300,250];tmgAds.plugins.sizemapping.l.mpu\x3d[300,250];tmgAds.plugins.sizemapping.m.mpu\x3d[300,250];tmgAds.plugins.sizemapping.s.mpu\x3d[300,250];tmgAds.plugins.sizemapping.xs.mpu\x3d[300,250]}}function tmgAdsGetCMS(){tmgAdsLog("Called:");var a\x3d"unknown";tmgAdsLog("ascertaining which CMS is being used");tmgAdsLog("tmgAds.page.businessseg\x3d"+tmgAds.page.businessseg);if(tmgAds.page.businessseg\x3d\x3d\x3dnull||typeof tmgAds.page.businessseg\x3d\x3d"undefined"){tmgAdsLog("would appear we are using eScenic");a\x3d"escenic"}else{tmgAdsLog("would appear we are using AEM");a\x3d"aem"}tmgAdsLog("returning the following values cms\x3d"+a);return a}function tmgAdsGetAdobe(){try{tmgAdsLog("Called:");var a\x3d{userID:"unready",cookiename:tmgAds.plugins.adobe.cookiename,rawcookie:tmgAdsGetCookie(tmgAds.plugins.adobe.cookiename)};if(typeof _satellite!\x3d"undefined"){a.userID\x3d_satellite.getVisitorId().getMarketingCloudVisitorID();tmgAdsLog("userID \x3d "+a.userID);return a}else{tmgAdsLog("userID not set, reecall this script in "+tmgAds.plugins.adobe.retryPeriod+"ms - retryPeriod:"+tmgAds.plugins.adobe.retryPeriod+" retryLimit:"+tmgAds.plugins.adobe.retryLimit+" retryCount:"+tmgAds.plugins.adobe.retryCount);if(tmgAds.plugins.adobe.retryCount\x3ctmgAds.plugins.adobe.retryLimit){setTimeout(function(){tmgAds.adobe\x3dtmgAdsGetAdobe()},tmgAds.plugins.adobe.retryPeriod)}else{tmgAdsLog("retryCount has hit retryLimit... stop re-requesting this func.")}++tmgAds.plugins.adobe.retryCount;return a}}catch(b){tmgAdsLog("ERROR: tmgAdsGetAdobe() failed -\x3e error\x3d"+b.message)}}function tmgAdsGetGoogleData(){tmgAdsLog("Called:");var a\x3d{};return a}function tmgAdsGetTMGUserData(){tmgAdsLog("Called:");var a\x3d{session:tmgAdsGetCookie("tmg_session"),rem:tmgAdsGetCookie("tmg_rem"),pid:tmgAdsGetCookie("tmg_pid"),p13n:tmgAdsGetCookie("tmg_p13n"),tmg_subs_referer:tmgAdsGetCookie("tmg_subs_referer"),tmg_authz_session:tmgAdsGetCookie("tmg_authz_session"),tmg_meter_count:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_meter_count"),",",":"),tmg_web_trends:tmgAdsCsvToObj(tmgAdsGetCookie("tmg_web_trends"),",",":")};if(window.JSON\x26\x26typeof a.tmg_subs_referer!\x3d"undefined"){tmgAdsLog("window.JSON supported AND tmg_subs_referer cookie exists");if(a.tmg_subs_referer!\x3d"undefined"){a.tmg_subs_referer\x3dJSON.parse(a.tmg_subs_referer);tmgAdsLog("JSON.parse(tmp.tmg_subs_referer)\x3d"+a.tmg_subs_referer)}}else{tmgAdsLog("either window.JSON not supported or no tmg_subs_referer cookie")}return a}function tmgAdsGetGPTSetup(c){tmgAdsLog("Called:");var b\x3dc||{};b.setTargeting\x3d[];b.setTargetingStr\x3d[];b.customParams\x3d"";if(typeof tmgAds.dfp.customvars!\x3d"undefined"){tmgAdsLog("tmgAds.dfp.customvars exists - iterating through tmgAds.dfp.customvars");for(var a in tmgAds.dfp.customvars){if(tmgAds.dfp.customvars.hasOwnProperty(a)\x26\x26tmgAds.dfp.customvars[a]!\x3d\x3d""){if(tmgAds.dfp.customvars[a] instanceof Array){tmgAdsLog("adding tmgAds.dfp.customvars["+a+"] as Array()");b.setTargeting.push(".setTargeting(\'"+a+"\',tmgAds.dfp.customvars[\'"+a+"\'])");b.setTargetingStr+\x3d".setTargeting(\'"+a+"\',tmgAds.dfp.customvars[\'"+a+"\'])"}else{if(tmgAds.dfp.customvars[a]!\x3d\x3dnull){tmgAdsLog("adding tmgAds.dfp.customvars["+a+"]\x3d"+tmgAds.dfp.customvars[a]);b.setTargeting.push(".setTargeting(\'"+a+"\',\'"+tmgAds.dfp.customvars[a]+"\')");b.setTargetingStr+\x3d".setTargeting(\'"+a+"\',\'"+tmgAds.dfp.customvars[a]+"\')"}else{tmgAdsLog("tmgAds.dfp.customvars["+a+"] is null, omitting from tag")}}b.customParams+\x3d"\x26"+a+"\x3d"+tmgAds.dfp.customvars[a]}}}else{tmgAdsLog("tmgAds.dfp.customvars does not exist")}b.customParams\x3db.customParams.substring(1);return b}function tmgAdsGetGPTCustomVars(){tmgAdsLog("Called:");var a\x3d{};(typeof tmgAds.about.version!\x3d"undefined")?a.ver\x3dtmgAds.about.version:null;(typeof tmgAds.page.section!\x3d"undefined")?a.sc\x3dtmgAds.page.section:null;(typeof tmgAds.page.pagetype!\x3d"undefined")?a.pt\x3dtmgAds.page.pagetype:null;(typeof tmgAds.page.level!\x3d"undefined")?a.lvl\x3dtmgAds.page.level:null;(typeof tmgAds.browser.biw!\x3d"undefined")?a.biw\x3dtmgAds.browser.biw:null;(typeof tmgAds.browser.bih!\x3d"undefined")?a.bih\x3dtmgAds.browser.bih:null;(typeof tmgAds.browser.language!\x3d"undefined")?a.lang\x3dtmgAds.browser.language.toLowerCase():null;(typeof tmgAds.flash.versionMaj!\x3d"undefined")?a.fv\x3dtmgAds.flash.versionMaj:null;(typeof tmgAds.page.protocol!\x3d"undefined")?a.protocol\x3dtmgAds.page.protocol.substring(0,tmgAds.page.protocol.length-1):null;(typeof tmgAds.page.domain!\x3d"undefined")?a.rd\x3dtmgAds.page.domain:null;(typeof tmgAds.page.cms!\x3d"undefined")?a.cms\x3dtmgAds.page.cms:null;(typeof tmgAds.page.keywords!\x3d"undefined")?a.kw\x3dtmgAds.page.keywords:null;(typeof tmgAds.page.make!\x3d"undefined")?a.make\x3dtmgAds.page.make:null;(typeof tmgAds.page.model!\x3d"undefined")?a.model\x3dtmgAds.page.model:null;(typeof tmgAds.page.geo!\x3d"undefined")?a.geo\x3dtmgAds.page.geo:null;(typeof tmgAds.page.editorschoice!\x3d"undefined")?a.ec\x3dtmgAds.page.editorschoice:null;(typeof tmgAds.page.mostviewed!\x3d"undefined")?a.mv\x3dtmgAds.page.mostviewed:null;(typeof tmgAds.page.mostshared!\x3d"undefined")?a.ms\x3dtmgAds.page.mostshared:null;(typeof tmgAds.page.videosrc!\x3d"undefined")?a.vidsrc\x3dtmgAds.page.videosrc:null;(typeof tmgAds.page.articleid!\x3d"undefined")?a.pg\x3dtmgAds.page.articleid:null;(typeof tmgAds.page.gamp!\x3d"undefined")?a.gamp\x3dtmgAds.page.gamp:null;(typeof tmgAds.page.refresh!\x3d"undefined")?a.refresh\x3dtmgAds.page.refresh:a.refresh\x3d0;(tmgAds.page.dataLayer.premiumContent)?a.premc\x3dtmgAds.page.dataLayer.premiumContent:a.premc\x3dfalse;(tmgAds.page.dataLayer.premiumOverride)?a.premo\x3dtmgAds.page.dataLayer.premiumContent:a.premo\x3dfalse;(typeof tmgAds.grapeshot!\x3d"undefined")?a.gs\x3dtmgAds.grapeshot.dfp:null;(typeof tmgAds.layout.platform!\x3d"undefined")?a.platform\x3dtmgAds.layout.platform:null;(typeof tmgAds.layout.viewport!\x3d"undefined")?a.vp\x3dtmgAds.layout.viewport:null;(typeof tmgAds.page.keywords!\x3d"undefined")?a.kw\x3dtmgAds.page.keywords:null;(typeof tmgAds.adsafe.blocked!\x3d"undefined")?a.adsafe\x3dtmgAds.adsafe.blocked:null;(typeof tmgAds.tmg.tmg_meter_count!\x3d"undefined")?a.tmgmvc\x3dtmgAds.tmg.tmg_meter_count.vars.meter_viewed_count:a.tmgmvc\x3d"none";(typeof tmgAds.tmg.tmg_meter_count!\x3d"undefined")?a.tmgmu\x3dtmgAds.tmg.tmg_meter_count.vars.meter_user_viewed:a.tmgmu\x3d"none";(typeof tmgAds.tmg.tmg_subs_referer!\x3d"undefined")?a.tmgsub\x3d"1":a.tmgsub\x3d"none";(typeof tmgAds.tmg.pid!\x3d"undefined")?a.tmgpid\x3dtmgAds.tmg.pid:a.tmgpid\x3d"none";(typeof tmgAds.adobe.userID!\x3d"undefined")?a.amcv\x3dtmgAds.adobe.userID:a.amcv\x3d"none";(typeof tmgAds.audsci.dfp!\x3d"undefined")?a.audsci\x3dtmgAds.audsci.dfp:a.audsci\x3d"none";(typeof tmgAds.krux.kxuser.dfp!\x3d"undefined")?a.kxuid\x3dtmgAds.krux.kxuser.dfp:a.kxuid\x3d"none";(typeof tmgAds.krux.kxuser.dfp!\x3d"undefined"\x26\x26tmgAds.plugins.krux.includeinurl)?a.kxsid\x3dtmgAds.krux.kxsegs.dfp:a.kxseg\x3d"none";(typeof tmgAds.plugins.adtest!\x3d\x3dfalse)?a.test\x3dtmgAds.plugins.adtest:null;(tmgAds.plugins.adtest)?a.test\x3dtmgAds.plugins.adtest:null;(tmgAds.config.refurl)?a.refurl\x3dtmgAds.page.url:a.refurl\x3d"inactive";(tmgAds.plugins.donottrack)?a.dnt\x3dtmgAds.plugins.donottrack:a.dnt\x3d"inactive";a.admodel\x3dtmgAds.config.deliveryModel.activityStatus+"-"+tmgAds.config.deliveryModel.minHeight+"-"+tmgAds.config.deliveryModel.refreshRate+"-"+tmgAds.config.deliveryModel.refreshCycle;a.sticky\x3d0;if(tmgAds.config.deliveryModel.activityStatus!\x3d\x3d"default"\x26\x26tmgAds.config.deliveryModel.activityStatus!\x3d\x3d"none"){a.sticky\x3d1}if(typeof tmgAds.optimizely!\x3d"undefined"){if(tmgAds.optimizely.length\x3e0){tmgAdsLog("OPTIMIZELY: activeExperiments found, adding to the CustVars: "+tmgAds.optimizely);a.optimizely\x3dtmgAds.optimizely}else{tmgAdsLog("OPTIMIZELY: No activeExperiments found.")}}else{tmgAdsLog("OPTIMIZELY: tmgAds.optimizely not defined.")}return a}function tmgAdsGetAdsafeBlocks(){var a\x3d{};if(tmgAds.config.adsafe\x3d\x3d1){tmgAdsLog("tmgAds.config.adsafe \x3d ON");if(typeof window.tmgAdsafe!\x3d"undefined"){tmgAdsLog("window.tmgAdsafe exists");if(typeof window.tmgAdsafe.blocked!\x3d"undefined"){tmgAdsLog("window.tmgAdsafe.blocked exists");tmgAdsLog("adding tmgAdsafe data");a.blocked\x3dwindow.tmgAdsafe.blocked}else{tmgAdsLog("window.tmgAdsafe.blocked does not exists")}}else{tmgAdsLog("window.tmgAdsafe does NOT exist")}}else{tmgAdsLog("tmgAds.config.adsafe \x3d OFF")}return a}function tmgAdsGetAudSciData(){var a\x3d{dfp:[],aspq:{}};tmgAdsLog("Creating AudienceScience HawkEye segments");tmgAdsLog("tmgAds.plugins.audsci.active: "+tmgAds.plugins.audsci.active);if(tmgAds.plugins.audsci.active){if(typeof window.asiPlacements!\x3d"undefined"){tmgAdsLog("window.asiPlacements exists");for(var b in window.asiPlacements){tmgAdsLog("itterating through window.asiPlacements: ASPQ_"+b);if(window.asiPlacements[b].hasOwnProperty("data")){window["ASPQ_"+b]\x3d(window.asiPlacements[b].data)?"T":"";a.aspq[b]\x3d"T";a.dfp.push(b);tmgAdsLog("AudSci segment exists, adding: ASPQ_"+b)}else{a.aspq[b]\x3d"F";tmgAdsLog("AudSci segment does NOT exist: ASPQ_"+b)}}}else{tmgAdsLog("window.asiPlacements does NOT exist")}}return a}function tmgAdsLog(d,a){if(typeof tmgAds!\x3d"undefined"){if(typeof tmgAds.plugins!\x3d"undefined"){if(typeof tmgAds.plugins.adconsole!\x3d"undefined"){if(tmgAds.plugins.adconsole\x3d\x3d\x3dtrue){var c\x3d("00"+(tmgAdsTimer()/1000).toFixed(5)).slice(-9);var b\x3d{time:c,callee:null,extra:a,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:d};if(arguments.callee.caller){b.callee\x3darguments.callee.caller.name}b.msg\x3d"%c[TMG-GPT]["+b.time+"]["+(b.callee+"                         ").substr(0,25)+"]: "+b.msg;b.styling\x3db.css.none;if(d.substr(0,5)\x3d\x3d"ALERT"){b.styling\x3db.css.alert}if(d.substr(0,10)\x3d\x3d"OPTIMIZELY"){b.styling\x3db.css.optimizely}if(d.substr(0,7)\x3d\x3d"SUCCESS"){b.styling\x3db.css.success}if(d.substr(0,5)\x3d\x3d"ERROR"){b.styling\x3db.css.error}if(d.substr(0,7)\x3d\x3d"WARNING"){b.styling\x3db.css.warning}if(d.substr(0,5)\x3d\x3d"EVENT"){b.styling\x3db.css.event}if(d.substr(0,4)\x3d\x3d"INFO"){b.styling\x3db.css.info}console.log(b.msg,b.styling)}}}}}function tmgAdsGetObjSize(d){var c\x3d[];var a\x3d[d];var b\x3d0;while(a.length){var f\x3da.pop();if(typeof f\x3d\x3d\x3d"boolean"){b+\x3d4}else{if(typeof f\x3d\x3d\x3d"string"){b+\x3df.length*2}else{if(typeof f\x3d\x3d\x3d"number"){b+\x3d8}else{if(typeof f\x3d\x3d\x3d"object"\x26\x26c.indexOf(f)\x3d\x3d\x3d-1){c.push(f);for(var e in f){a.push(f[e])}}}}}}return(b/1024)}function tmgAdsGetGeoAPI(){tmgAdsLog("Called:");var b\x3d{available:0,supported:0,api:{},position:{}};if(tmgAds.plugins.gpt.setLocation){navigator.geolocation.getCurrentPosition(c,a);tmgAdsLog("navigator.geolocation supported in this browser")}else{tmgAdsLog("navigator.geolocation not supported in this browser")}function c(d){b.api\x3dd.coords;b.position\x3dd.coords;b.available\x3d1;b.supported\x3d1;tmgAdsLog("GeoAPI success -\x3e position.coords\x3d"+d.coords)}function a(d){b.available\x3d0;b.supported\x3d-1;tmgAdsLog("GeoAPI failed: "+d)}return b}function tmgAdsGetKruxData(){(tmgAds.plugins.krux.active)?tmgAdsLog("tmgAds.plugins.krux.active \x3d true - Krux is active for this installation",0):null;var b\x3d{};if(typeof window.localStorage!\x3d"undefined"){tmgAdsLog("localStorage found, using that");b.kxtype\x3d"localStorage";if(typeof window.localStorage.kxtech!\x3d"undefined"\x26\x26typeof window.localStorage.kxuser!\x3d"undefined"\x26\x26typeof window.localStorage.kxsegs!\x3d"undefined"){b.kxtype\x3d"localStorage";b.kxtech\x3dwindow.localStorage.kxtech;b.kxuser\x3d{dfp:window.localStorage.kxuser};b.kxsegs\x3d{dfp:[],raw:window.localStorage.kxsegs}}else{b.kxtech\x3dnull;b.kxuser\x3d{dfp:null};b.kxsegs\x3d{dfp:[],raw:null}}}else{tmgAdsLog("localStorage not found, reverting to using cookies");b.kxtype\x3d"cookie";if(typeof tmgAdsGetCookie("kxtech")!\x3d"undefined"\x26\x26typeof tmgAdsGetCookie("kxuser")!\x3d"undefined"\x26\x26typeof tmgAdsGetCookie("kxsegs")!\x3d"undefined"){b.kxtech\x3dtmgAdsGetCookie("kxtech");b.kxuser\x3d{dfp:tmgAdsGetCookie("kxuser")};b.kxsegs\x3d{dfp:[],raw:tmgAdsGetCookie("kxsegs")}}else{b.kxtech\x3dnull;b.kxuser\x3d{dfp:null};b.kxsegs\x3d{dfp:[],raw:null}}}if(b.kxsegs.raw!\x3d\x3dnull\x26\x26b.kxsegs.raw!\x3d"undefined"){b.kxsegs.segids\x3db.kxsegs.raw.split(",")}if(tmgAds.plugins.krux.includeinurl){tmgAdsLog("tmgAds.plugins.krux.includeinurl \x3d true - realtime segments are turned on - insert the top "+tmgAds.plugins.krux.maxSegs+" segments into the adurls to capture realtime segs in krux",0);if(typeof b.kxsegs.segids!\x3d"undefined"){tmgAdsLog("tmp.segids[0] exists",0);b.kxsegs.dfp\x3d[];if(tmgAds.plugins.krux.maxSegs\x3d\x3d\x3d-1){b.maxSegs\x3db.kxsegs.segids.length;tmgAdsLog("Include ALL Krux Segs into DFP call")}else{b.maxSegs\x3dtmgAds.plugins.krux.maxSegs;tmgAdsLog("Limit Krux segs to "+b.maxSegs)}for(var a\x3d0;a\x3cb.maxSegs;++a){if(typeof b.kxsegs.segids[a]!\x3d"undefined"){tmgAdsLog("adding KruxSeg #"+(a+1)+" into URL: "+b.kxsegs.segids[a],0);b.kxsegs.dfp.push(b.kxsegs.segids[a])}}}else{tmgAdsLog("WARNING: tmp.kxsegs.segids is undefined")}}return b}function tmgAdsGetMetaTag(d){try{var b\x3dnull;if(document.getElementsByName(d)[0]!\x3d\x3dnull\x26\x26typeof document.getElementsByName(d)[0]!\x3d"undefined"){tmgAdsLog("tmgAdsGetMetaTag("+d+"): document.getElementsByName(\'"+d+"\')[0] exists");if(document.getElementsByName(d)[0].content.length\x3e0){b\x3ddocument.getElementsByName(d)[0].content.toLowerCase();if(d\x3d\x3d"tmgads.articleid"){b\x3ddecodeURIComponent(document.getElementsByName(d)[0].content)}else{b\x3ddecodeURIComponent(document.getElementsByName(d)[0].content.toLowerCase())}tmgAdsLog("tmgAdsGetMetaTag("+d+\'): "\'+b+\'"\')}if(d\x3d\x3d"tmgads.keywords"){if(b!\x3d\x3dnull){b\x3db.split(",");for(var a\x3d0;a\x3cb.length;a++){if(String.prototype.trim){b[a]\x3db[a].trim()}else{if(typeof b[a]!\x3d\x3dnull){b[a]\x3db[a].replace(/^\\s\\s*/,"").replace(/\\s\\s*$/,"")}else{tmgAdsLog("tmgAdsGetMetaTag("+d+\'): tmp[i] is null -\x3e "\'+b[a]+\'"\')}}tmgAdsLog("tmgAdsGetMetaTag("+d+\'): tmgads.keywords -\x3e "\'+b[a]+\'"\')}}else{tmgAdsLog("tmgAdsGetMetaTag("+d+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}}}else{tmgAdsLog("tmgAdsGetMetaTag("+d+"): document.getElementsByName(\'"+d+"\')[0] does not exist -\x3e "+b)}tmgAds.data.metatags[d]\x3db;return b}catch(c){tmgAdsLog("ERROR: tmgAdsGetMetTag("+d+") failed -\x3e error\x3d"+c.message)}}function tmgAdsGetPageData(){try{tmgAdsLog("Called:");var a\x3d{zone:"unknown",url:location.protocol+"//"+location.host+location.pathname,url_full:location.href,referrer:document.referrer,domain:location.hostname,protocol:location.protocol,search:location.search,gamp:"0",environment:"-"};tmgAdsGetURLParam("source",window.location.href)\x3d\x3d\x3d"refresh"?(a.refresh\x3d1,tmgAdsLog("tmgAdsGetPageData: page is a refreshed page")):tmgAdsLog("tmgAdsGetPageData: page is not refreshed");(tmgAdsGetMetaTag("DCSext.Platform")\x3d\x3d"mobile")?a.platform\x3d"mobile":a.platform\x3d"desktop";tmgAdsLog("tmgAdsGetPageData: platform is: "+a.platform);(a.platform\x3d\x3d"mobile")?a.pagetype\x3dtmgAdsGetMetaTag("DCSext.Content_Type"):a.pagetype\x3dtmgAdsGetMetaTag("tmgads.pagetype");tmgAdsLog("tmgAdsGetPageData: pagetype is: "+a.pagetype);(a.platform\x3d\x3d"mobile")?a.articleid\x3dtmgAdsGetMetaTag("DCSext.articleId"):a.articleid\x3dtmgAdsGetMetaTag("tmgads.articleid");tmgAdsLog("tmgAdsGetPageData: articleid is: "+a.articleid);(a.platform\x3d\x3d"mobile")?a.geo\x3dtmgAdsGetMetaTag("DCSext.akamaigeo"):a.geo\x3dtmgAdsGetMetaTag("tmgads.geo");tmgAdsLog("tmgAdsGetPageData; geo is: "+a.geo);if(a.platform\x3d\x3d"mobile"){a.zone\x3dtmgAdsGetMetaTag("DCSext.MLC").substring(1,tmgAdsGetMetaTag("DCSext.MLC").length)}else{a.zone\x3dtmgAdsGetMetaTag("tmgads.zone")}if(typeof a.zone!\x3d\x3dnull){a.zone\x3da.zone.replace(/\\//g,".").replace(/-/g,"").replace(/_/g,"")}else{a.zone\x3d"unknown";tmgAdsLog("WARNING:::: tmgAdsGetPageData: zone is null, setting to unknown")}tmgAdsLog("tmgAdsGetPageData: zone is: "+a.zone);a.businessseg\x3dtmgAdsGetMetaTag("tmgads.businessSegment");tmgAdsLog("tmgAdsGetPageData: bsuinessSeg is: "+a.businesssegm);tmgAdsLog("tmgAdsGetMetaTag: Fixing broken classifications");if(a.zone\x3d\x3d"lifestyle/puzzles"){a.zone\x3d"puzzles";tmgAdsLog("tmgAdsGetPageData: changed lifestlye/puzzles to puzzles")}if(a.businessseg\x3d\x3d\x3dnull){tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg is null, use the zone data in it\'s entirety, NB: we set businesssseg to the site value after this script.")}else{tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg not null, work out if we need to prepend the businessSeg value to the start of the zone value (only do this if the businessSeg is different from th first zone array value: ");tmgAdsLog("tmgAdsGetMetaTag: tmp.businessseg \x3d "+a.businessseg);tmgAdsLog("tmgAdsGetMetaTag; tmp.zone \x3d "+a.zone);if(a.businessseg\x3d\x3da.zone.split(".")[0]){tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is same as the businessseg so don\'t do anything to the zone:")}else{tmgAdsLog("tmgAdsGetMetaTag: tmp.zone first element is different from businessseg so prepend this to the zone:");a.zone\x3da.businessseg+"."+a.zone}tmgAdsLog("tmgAdsGetMetaTag: tmp.zone value: "+a.zone)}a.zonedata\x3da.zone.split(".");a.level\x3da.zonedata.length;a.section\x3da.zone.replace(/\\./g,"-").replace(/_/g,"");a.site\x3da.zonedata[0];a.businessseg-a.site;a.otherdata\x3d"";a.editorschoice\x3dtmgAdsGetMetaTag("tmgads.editorschoice");a.keywords\x3dtmgAdsGetMetaTag("tmgads.keywords");a.make\x3dtmgAdsGetMetaTag("tmgads.make");a.model\x3dtmgAdsGetMetaTag("tmgads.model");a.mostshared\x3dtmgAdsGetMetaTag("tmgads.mostshared");a.mostviewed\x3dtmgAdsGetMetaTag("tmgads.mostviewed");a.parentid\x3dtmgAdsGetMetaTag("tmgads.parentid");a.product\x3dtmgAdsGetMetaTag("tmgads.product");a.sensitive\x3dtmgAdsGetMetaTag("tmgads.sensitive");a.videosrc\x3dtmgAdsGetMetaTag("tmgads.videosrc");a.sponsor\x3dtmgAdsGetMetaTag("tmgads.sponsor");tmgAdsLog("tmgAdsGetMetaTag: Fixing bad page classifications/taxonomies");(a.section\x3d\x3d"ece_frontpage"||a.section\x3d\x3d"ecefrontpage")?a.section\x3d"portal":null;(a.section\x3d\x3d"food_and_drink"||a.section\x3d\x3d"food-and-drink")?a.section\x3d"foodanddrink":null;(a.site\x3d\x3d"food_and_drink"||a.site\x3d\x3d"food-and-drink")?a.site\x3d"foodanddrink":null;a.dataLayer\x3dwindow.dataLayer||["UNSET"];a.pageData\x3dwindow.pageData||["UNSET"];return a}catch(b){tmgAdsLog("ERROR: tmgAdsGetPageData() failed -\x3e error\x3d"+b.message)}}function tmgAdsGetURLParam(c,a){tmgAdsLog(\'Called: tmgAdsGetUrlParam("\'+c+\'","\'+a+\'")\');var b\x3ddecodeURI((RegExp(c+"\x3d(.+?)(\x26|$)").exec(a)||[,null])[1]);if(c\x3d\x3d"adconsole"||c\x3d\x3d"adsafe"||c\x3d\x3d"adkill"){if(b\x3d\x3d"1"||b\x3d\x3d"true"||b\x3d\x3d"on"||b\x3d\x3d"yes"){b\x3dtrue}else{b\x3dfalse}}if(c\x3d\x3d"adheaderbid"||c\x3d\x3d"adindexexchange"||c\x3d\x3d"adprebid"||c\x3d\x3d"adpubfood"||c\x3d\x3d"adfastlane"){if(b\x3d\x3d"on"){b\x3dtrue}if(b\x3d\x3d"off"){b\x3dfalse}}tmgAdsLog("Setting url-param ["+c+"]: "+b);return b}function tmgAdsGetTMGCookies(e){tmgAdsLog("Called:");tmgAdsLog("tmgAds.plugins.tmgcookies.active \x3d "+tmgAds.plugins.tmgcookies.active);var b\x3d"",d;if(tmgAds.plugins.tmgcookies.active){tmgAdsLog("Adding any tmgcookies");var c\x3ddocument.cookie.split("; ");for(var a\x3d0;a\x3cc.length;a++){if(c[a].hasOwnProperty(a)){d\x3dc[a].split("\x3d");if(d[0].substr(0,7)\x3d\x3d\x3d"tmgads_"\x26\x26d[0].length\x3e0){b+\x3d";ck_"+d[0].substr(7,d[0].length-7)+"\x3d"+d[1]}}}}return b}function tmgAdsLoadJS(e,d,c,f){tmgAdsEvent(e+":init");var a\x3d{name:e.toUpperCase(),status:"init",type:"text/javascript",url:d,performance:{tsTagStart:tmgAdsTimer(),tsTagRequested:0,tsTagEnd:0,tmTag:0,}};var b\x3ddocument.createElement("script");b.type\x3d"text/javascript";if(b.readyState){b.onreadystatechange\x3dfunction(){if(b.readyState\x3d\x3d"loaded"||b.readyState\x3d\x3d"complete"){b.onreadystatechange\x3dnull;tmgAdsEvent(e+":loaded");a.status\x3d"loaded";a.performance.tsTagEnd\x3dtmgAdsTimer();a.performance.tmTag\x3da.performance.tsTagEnd-a.performance.tsTagStart;if(typeof f\x3d\x3d"function"){f()}}}}else{b.onload\x3dfunction(){tmgAdsEvent(e+":loaded");a.status\x3d"loaded";a.performance.tsTagEnd\x3dtmgAdsTimer();a.performance.tmTag\x3da.performance.tsTagEnd-a.performance.tsTagStart;if(typeof f\x3d\x3d"function"){f()}}}a.status\x3d"requested";b.src\x3da.url;document.head.appendChild(b)}function tmgAdsGetBrowserData(){tmgAdsLog("Called:");var a\x3d{};for(var b in navigator){if(navigator.hasOwnProperty(b)){var c\x3dnavigator[b];if(typeof c!\x3d"object"){a[b]\x3dc}}}if(document.all){tmgAdsLog("document.all exists");a.biw\x3ddocument.documentElement.offsetWidth;a.bih\x3ddocument.documentElement.offsetHeight}else{tmgAdsLog("document.all does not exists");a.biw\x3dwindow.innerWidth;a.bih\x3dwindow.innerHeight}return a}function tmgAdsFlashDetect(){tmgAdsLog("Called:");var a\x3d{};FlashDetect\x3dnew function(){var b\x3dthis;b.installed\x3dfalse;b.raw\x3d"";b.major\x3d-1;b.minor\x3d-1;b.revision\x3d-1;b.revisionStr\x3d"";var c\x3d[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(j){return e(j)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(l){var j\x3d"6,0,21";try{l.AllowScriptAccess\x3d"always";j\x3de(l)}catch(k){}return j}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(j){return e(j)}}];var e\x3dfunction(l){var j\x3d-1;try{j\x3dl.GetVariable("$version")}catch(k){}return j};var h\x3dfunction(j){var l\x3d-1;try{l\x3dnew ActiveXObject(j)}catch(k){l\x3d{activeXError:true}}return l};var d\x3dfunction(k){var j\x3dk.split(",");return{raw:k,major:parseInt(j[0].split(" ")[1],10),minor:parseInt(j[1],10),revision:parseInt(j[2],10),revisionStr:j[2]}};var g\x3dfunction(m){var k\x3dm.split(/ +/);var l\x3dk[2].split(/\\./);var j\x3dk[3];return{raw:m,major:parseInt(l[0],10),minor:parseInt(l[1],10),revisionStr:j,revision:f(j)}};var f\x3dfunction(j){return parseInt(j.replace(/[a-zA-Z]/g,""),10)||b.revision};b.majorAtLeast\x3dfunction(j){return b.major\x3e\x3dj};b.minorAtLeast\x3dfunction(j){return b.minor\x3e\x3dj};b.revisionAtLeast\x3dfunction(j){return b.revision\x3e\x3dj};b.versionAtLeast\x3dfunction(k){var l\x3d[b.major,b.minor,b.revision];var j\x3dMath.min(l.length,arguments.length);for(i\x3d0;i\x3cj;i++){if(l[i]\x3e\x3darguments[i]){if(i+1\x3cj\x26\x26l[i]\x3d\x3darguments[i]){continue}else{return true}}else{return false}}};b.FlashDetect\x3dfunction(){if(navigator.plugins\x26\x26navigator.plugins.length\x3e0){var m\x3d"application/x-shockwave-flash";var l\x3dnavigator.mimeTypes;if(l\x26\x26l[m]\x26\x26l[m].enabledPlugin\x26\x26l[m].enabledPlugin.description){var j\x3dl[m].enabledPlugin.description;var n\x3dg(j);b.raw\x3dn.raw;b.major\x3dn.major;b.minor\x3dn.minor;b.revisionStr\x3dn.revisionStr;b.revision\x3dn.revision;b.installed\x3dtrue}}else{if(navigator.appVersion.indexOf("Mac")\x3d\x3d-1\x26\x26window.execScript){var j\x3d-1;for(var k\x3d0;k\x3cc.length\x26\x26j\x3d\x3d-1;k++){var o\x3dh(c[k].name);if(!o.activeXError){b.installed\x3dtrue;j\x3dc[k].version(o);if(j!\x3d-1){var n\x3dd(j);b.raw\x3dn.raw;b.major\x3dn.major;b.minor\x3dn.minor;b.revision\x3dn.revision;b.revisionStr\x3dn.revisionStr}}}}}}()};if(FlashDetect.installed){a\x3d{versionMaj:FlashDetect.major,versionMin:FlashDetect.minor,versionRev:FlashDetect.revision,versionRaw:FlashDetect.raw}}else{a\x3d{versionMaj:0,versionMin:0,versionRev:0,versionRaw:"none"}}return a}function tmgAdsGetCookie(b){tmgAdsLog("Called: tmgAdsGetCookie("+b+"): Called");var d,c,a,f,e\x3ddocument.cookie.split(";");for(c\x3d0;c\x3ce.length;c++){a\x3de[c].substr(0,e[c].indexOf("\x3d"));f\x3de[c].substr(e[c].indexOf("\x3d")+1);a\x3da.replace(/^\\s+|\\s+$/g,"");if(a\x3d\x3db){d\x3ddecodeURIComponent(f)}}return d}function tmgAdsSetCookie(a,d,f,j){tmgAdsLog(\'Called: tmgAdsSetCookie("\'+a+\'","\'+d+\'","\'+f+\'","\'+j+\'"): Called\');var l\x3d";path\x3d/",k\x3da+"\x3d"+encodeURIComponent(d),b,g,c,h,e;if(f){b\x3dnew Date();g\x3db.getTime();g+\x3df*3600*1000;b.setTime(g);c\x3d";expires\x3d"+b.toGMTString()}else{c\x3d""}if(typeof j\x3d\x3d"undefined"){h\x3d""}else{h\x3d";domain\x3d"+j}e\x3dk+c+l+h;document.cookie\x3de}function tmgAdsTimer(){var a\x3dDate.now();if(typeof window.performance!\x3d"undefined"){if(typeof window.performance.now!\x3d"undefined"){var a\x3dwindow.performance.now()}}return Number(a)}function tmgAdsGetDoNotTrack(){tmgAdsLog("Called:");var a;if(navigator.doNotTrack\x3d\x3d"unspecified"||navigator.doNotTrack\x3d\x3d1||navigator.doNotTrack\x3d\x3d"yes"){tmgAdsLog("using the navigator.doNotTrack method");a\x3dnavigator.doNotTrack}if(navigator.msDoNotTrack){tmgAdsLog("using the navigator.msDoNotTrack method");a\x3dnavigator.msDoNotTrack}if(typeof a\x3d\x3d"undefined"){a\x3d0}if(a\x3d\x3d"unspecified"){a\x3d0}if(a\x3d\x3d"no"){a\x3d0}if(a\x3d\x3d"yes"){a\x3d1}return a}function tmgAdsCsvToObj(d,a,f){var c;tmgAdsLog(\'Called: data\x3d"\'+d+\'" delimiter\x3d"\'+a+\'" assignment\x3d\'+f);f\x3df||"\x3d";if(typeof d!\x3d"undefined"){c\x3d{dfplegacy:"",raw:d,vars:{}};c.data\x3dd.split(a);for(var b in c.data){if(c.data[b].length\x3e0\x26\x26typeof c.data[b]\x3d\x3d"string"){var e\x3dc.data[b].split(f);c.vars[e[0]]\x3de[1];c.dfplegacy+\x3d"\x26"+e[0]+"\x3d"+e[1];tmgAdsLog("extra custVars set in function call, creating them now -\x3e "+e[0]+f+e[1])}else{}}}return c}function tmgAdsBuildAd(e,a,d){tmgAdsLog(\'########## Called: tmgAdsBuildAd("\'+e+\'","\'+a+\'","\'+d+\'")\');++tmgAds.dfp.tile;var c\x3d{adunit:tmgAds.dfp.adunit,altsizes:d,outofpage:false,arguments:arguments,slot:e.split("_"),size:[],slotid:e,customvars:tmgAds.dfp.customvars,customParams:"",refreshable:false,div:e,pos:tmgAds.dfp.tile,tile:tmgAds.dfp.tile,ord:Number(new Date()),extra:tmgAdsCsvToObj(a,";")};(tmgAds.config.deliveryModel.activityStatus!\x3d"none")?c.adcount\x3d1:c.adcount\x3d0;tmgAds.ads[c.pos]\x3d{};c.adloc\x3dc.slot[1];c.adtype\x3dc.slot[2];c.adpos\x3dc.slot[3];(c.adtype\x3d\x3d"ftr"||c.adpos\x3d\x3d"oop"||c.adtype\x3d\x3d"tmg"||c.adtype\x3d\x3d"inr"||c.adtype\x3d\x3d"int")?c.outofpage\x3dtrue:null;if(typeof tmgAds.metrics.tmggptAdFirstAdQueued\x3d\x3d"undefined"){tmgAds.metrics.tmggptAdFirstAdQueued\x3dtmgAdsTimer();if(typeof tmgAds.metrics.tmggptPageLoad!\x3d"undefined"){tmgAds.metrics.metricTimeToQueueFirstAd\x3dtmgAds.metrics.tmggptAdFirstAdQueued-tmgAds.metrics.tmggptPageLoad}else{tmgAds.metrics.metricTimeToQueueFirstAd\x3d-1}}tmgAds.metrics.tmggptAdLastAdQueued\x3dtmgAdsTimer();tmgAds.metrics.ads[c.adtype]\x3d{queued:tmgAds.metrics.tmggptAdLastAdQueued};var b;if(a.length\x3e0){for(b in c.extra.vars){if(c.extra.vars.hasOwnProperty(b)){c.customvars[b]\x3dc.extra.vars[b]}}for(b in c.customvars){if(c.customvars.hasOwnProperty(b)){c.customParams+\x3d"\x26"+b+"\x3d"+c.customvars[b];tmgAdsLog("KVPs: "+b+"\x3d"+c.customvars[b])}}}if(c.altsizes.length\x3e0){tmgAdsLog("Altsizes have been chosen - over-riding the defaults and setting them to: "+c.altsizes);c.oldsizes\x3dc.altsizes.split(",");tmgAdsLog("Altsizes set: ");c.newsizes\x3d[];for(b\x3d0;b\x3cc.oldsizes.length;b++){if(c.oldsizes[b]!\x3d\x3d""\x26\x26c.oldsizes[b].length\x3e\x3d3){tmgAdsLog("Altsizes: using this value "+c.oldsizes[b]);c.newsizes.push(c.oldsizes[b])}else{tmgAdsLog(\'Altsizes: not using this value "\'+c.oldsizes[b]+\'"\')}}c.sizes\x3dc.newsizes;tmgAdsLog("Altsizes set: ");for(b in c.sizes){if(c.sizes.hasOwnProperty(b)){c.size.push([Number(c.sizes[b].split("x")[0]),Number(c.sizes[b].split("x")[1])])}}}else{c.size\x3dtmgAds.plugins.sizemapping[tmgAds.layout.viewport][c.adtype];tmgAdsLog("default sizes have been chosen - sizes are:"+c.size);c.sizemapping\x3dgoogletag.cmd.push(function(){googletag.sizeMapping().addSize(tmgAds.plugins.sizemapping.x.size,tmgAds.plugins.sizemapping.x[c.adtype]).addSize(tmgAds.plugins.sizemapping.l.size,tmgAds.plugins.sizemapping.l[c.adtype]).addSize(tmgAds.plugins.sizemapping.m.size,tmgAds.plugins.sizemapping.m[c.adtype]).addSize(tmgAds.plugins.sizemapping.s.size,tmgAds.plugins.sizemapping.s[c.adtype]).addSize(tmgAds.plugins.sizemapping.xs.size,tmgAds.plugins.sizemapping.xs[c.adtype]).build()})}if(c.adtype\x3d\x3d"vid"||c.adtype\x3d\x3d"ins"||c.adtype\x3d\x3d"int"){if(c.adtype\x3d\x3d"vid"){c.tmpsize\x3dtmgAds.plugins.sizemapping[tmgAds.layout.viewport].vid;c.vidslot\x3dc.slotid+"_"+c.pos;c.url\x3d"https://securepubads.g.doubleclick.net/gampad/ads?env\x3dvp\x26sz\x3d"+c.tmpsize+"\x26gdfp_req\x3d1\x26impl\x3ds\x26unviewed_position_start\x3d1\x26output\x3d"+tmgAds.plugins.gpt.vastOutputVersion+"\x26iu\x3d"+c.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26description_url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26hl\x3den\x26cust_params\x3d"+encodeURIComponent(c.customParams+"\x26vidslot\x3d"+c.vidslot+"\x26at\x3d"+c.adtype+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26ciu_szs\x3d\x26scp\x3d\x26scor\x3d"+c.pos+"\x26correlator\x3d"+tmgAds.dfp.ord;tmgAdsLog("Video Ad Request - URL\x3d"+c.url)}if(c.adtype\x3d\x3d"ins"){c.tmpsize\x3dc.size[0][0]+"x"+c.size[0][1];c.url\x3d"https://securepubads.g.doubleclick.net/gampad/adx?sz\x3d"+c.tmpsize+"\x26iu\x3d"+tmgAds.dfp.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26t\x3d"+encodeURIComponent(c.customParams+"\x26at\x3d"+c.thisad+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26m\x3dapplication/javascript\x26tile\x3d"+c.pos+"\x26c\x3d"+tmgAds.dfp.ord;tmgAdsLog("InSkin Ad Request - URL\x3d"+c.url)}if(c.adtype\x3d\x3d"int"){c.tmpsize\x3dc.size[0][0]+"x"+c.size[0][1];c.url\x3d"https://securepubads.g.doubleclick.net/gampad/adx?sz\x3d"+c.tmpsize+"\x26iu\x3d"+tmgAds.dfp.adunit+"\x26url\x3d"+encodeURIComponent(tmgAds.page.url)+"\x26t\x3d"+encodeURIComponent(c.customParams+"\x26at\x3d"+c.thisad+"\x26pos\x3d"+c.pos+"\x26acount\x3d"+c.adcount)+"\x26m\x3dapplication/javascript\x26tile\x3d"+c.pos+"\x26c\x3d"+tmgAds.dfp.ord;tmgAdsLog("Luxury Interstitial Ad Request - URL\x3d"+c.url)}c.fetchUrl\x3dfunction(){tmgAdsLog(".fetchUrl() called for: "+c.slotid+" -\x3e "+c.url);return c.url};return c}else{tmgAdsLog("adtype\x3d"+c.adtype+" -\x3e Current tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus);if(tmgAds.plugins.adSlotRefresh.exemptAdSlots.indexOf(c.adtype)\x3e-1||tmgAds.config.deliveryModel.activityStatus\x3d\x3d"none"||tmgAds.config.deliveryModel.activityStatus\x3d\x3dc.adtype||tmgAds.config.deliveryModel.activityStatus\x3d\x3d"ban"\x26\x26c.adtype\x3d\x3d"mpu"\x26\x26(tmgAds.layout.viewport\x3d\x3d"m"||tmgAds.layout.viewport\x3d\x3d"s"||tmgAds.layout.viewport\x3d\x3d"xs")){tmgAdsLog("SUCCESS: matched - tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype\x3d"+c.adtype);if(tmgAds.config.deliveryModel.activityStatus\x3d\x3d"ban"\x26\x26c.adtype\x3d\x3d"ban"){(tmgAds.layout.viewport\x3d\x3d"m")?c.size\x3d[728,90]:null;(tmgAds.layout.viewport\x3d\x3d"s")?c.size\x3d[[300,50],[320,50]]:null;(tmgAds.layout.viewport\x3d\x3d"xs")?c.size\x3d[[300,50],[320,50]]:null}if(tmgAds.config.deliveryModel.activityStatus\x3d\x3d"mpu"\x26\x26c.adtype\x3d\x3d"mpu"){(tmgAds.layout.viewport\x3d\x3d"x")?c.size\x3d[[300,250],[300,600]]:null;(tmgAds.layout.viewport\x3d\x3d"l")?c.size\x3d[[300,250],[300,600]]:null;if(tmgAds.layout.viewportHeight\x3ctmgAds.config.deliveryModel.minHeight){tmgAdsLog("tmgAds.layout.viewportHeight is less thean the minHeight for certain sticky ads/mpus on this page, restricting to only 300x250");c.size\x3d[300,250]}}googletag.cmd.push(function(){if(c.outofpage\x3d\x3d\x3dtrue){tmgAdsLog("OutOfPage unit chosen for: "+c.slotid);c.adslot\x3dgoogletag.defineOutOfPageSlot(c.adunit,c.div).addService(googletag.pubads())}else{tmgAdsLog("Standard Display unit chosen for: "+c.slotid+" sizes: "+c.size);c.adslot\x3dgoogletag.defineSlot(c.adunit,c.size,c.div).addService(googletag.pubads())}c.adslot.setTargeting("div",c.div);c.adslot.setTargeting("at",c.adtype);c.adslot.setTargeting("pos",c.pos);c.adslot.setTargeting("adcount",String(c.adcount));for(var f in tmgAds.dfp.customvars){if(typeof tmgAds.dfp.customvars[f]!\x3d\x3dnull){c.adslot.setTargeting(f,tmgAds.dfp.customvars[f])}}for(f in c.extra.vars){tmgAdsLog(\'extra vars have been set, itterating through them now. Adding extra vars: ["\'+f+\'","\'+c.extra.vars[f]+\'"]\');c.adslot.setTargeting(f,c.extra.vars[f])}c.adslot.defineSizeMapping(c.sizemapping);if(tmgAds.plugins.gpt.collapseEmptyDivs\x3d\x3d1){tmgAdsLog("setCollapseEmptyDiv is active for: "+c.slotid);c.adslot.setCollapseEmptyDiv(true)}googletag.enableServices()});tmgAds.ads[c.pos]\x3dc;c.display\x3dfunction(){tmgAdsLog(".display() called for: "+c.slotid);googletag.cmd.push(function(){if(tmgAds.plugins.headerBidders.active){(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.display(c.slotid):googletag.display(c.slotid)}else{googletag.display(c.slotid)}});return c};c.refresh\x3dfunction(){tmgAdsLog(".refresh() called for slotid :"+c.slotid);googletag.cmd.push(function(){if(tmgAds.plugins.headerBidders.active){(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.pubads().refresh([c.adslot]):googletag.pubads().refresh([c.adslot])}else{googletag.display(c.slotid)}})};tmgAds.adslots[c.slotid]\x3dc;if(tmgAds.plugins.adkill\x3d\x3d\x3dtrue){tmgAdsLog(\'ALERT: "adkill" has been selected, so bailing here and not sending you an ad...\');c.refresh\x3dfunction(){return c};c.display\x3dfunction(){return c};c.fetchUrl\x3dfunction(){return c};return c}return c}else{if(tmgAds.config.deliveryModel.activityStatus!\x3dc.adtype){tmgAdsLog("ALERT: not matched - tmgAds.config.deliveryModel.activityStatus\x3d"+tmgAds.config.deliveryModel.activityStatus+"  --\x3e  tmp.adtype\x3d"+c.adtype+" so we did not call this ad.");c.refresh\x3dfunction(){return c};c.display\x3dfunction(){return c};c.fetchUrl\x3dfunction(){return c};return c}}}tmgAdsLog("WARNING: seemed to have hit the end of the tmgAdsBuildAd() without returning anything.... investigate")}function tmgAdsBuildAdTag(j,k,h,b,a,f,e){tmgAdsLog("-\x3d-\x3d-\x3d--\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d-\x3d");tmgAdsLog(\'WARNING: DEPRECATED tmgAdsBuildAdTag("\'+j+\'","\'+k+\'","\'+h+\'","\'+b+\'","\'+a+\'")\');var d\x3d{tile:(function(){++tmgAds.dfp.tile;return tmgAds.dfp.tile})(),adslot:j.split(","),sizes:k.split(","),thisad:j.split(",")[0].substr(0,3),sz:[],type:h,extra:{data:b,vars:{},dfp:""},style:a,refresh:f,refreshtime:e};if(d.thisad\x3d\x3d"mob"){d.thisad\x3d"ban"}d.id_div\x3d"advert_tmg_"+d.thisad;if(d.extra.data.length\x3e0){d.extra.tmp\x3dd.extra.data.split(";");for(var c in d.extra.tmp){if(d.extra.tmp[c].length\x3e0){var g\x3dd.extra.tmp[c].split("\x3d");d.extra.vars[g[0]]\x3dg[1];d.extra.dfp+\x3d"\x26"+g[0]+"\x3d"+g[1];tmgAdsLog("extra custVars set in function call, creating them now -\x3e "+g[0]+"\x3d"+g[1])}}}if(d.thisad!\x3d"ins"\x26\x26d.thisad!\x3d"vid"\x26\x26d.thisad!\x3d"int"){d.output\x3d\'\x3cdiv id\x3d"\'+d.id_div+\'"\x3e\x3cscript type\x3d"text/javascript"\x3etmgAds.cmd.push(function(){var \'+d.id_div+\' \x3d tmgAdsBuildAd("\'+d.id_div+\'","\'+d.extra.data+\'","\'+k+\'","0").display();});\x3c\\/script\x3e\x3c/div\x3e\\n\'}else{d.output\x3dtmgAdsBuildAd(d.id_div,d.extra.data,k,0).fetchUrl()}--tmgAds.dfp.tile;return d.output}function tmgAdsRefreshAd(c,b,a){tmgAdsLog("Called: Refreshing ad["+a+"]: "+b);if(tmgAds.ads[a].hasOwnProperty("adslot")){tmgAdsLog("Refreshing ad: googletag.pubads().refresh(["+c+"]);");googletag.cmd.push(function(){tmgAdsLog("Updating setTargeting values:");c.setTargeting("adcount",[tmgAds.refreshTimers[b].adcount]);tmgAdsLog("Updating setTargeting values-\x3e adcount\x3d"+tmgAds.refreshTimers[b].adcount);for(var d in tmgAds.dfp.customvars){if(typeof tmgAds.dfp.customvars[d]!\x3d\x3dnull){c.setTargeting(d,tmgAds.dfp.customvars[d]);tmgAdsLog("Updating setTargeting values -\x3e "+d+"\x3d"+tmgAds.dfp.customvars[d])}}if(tmgAds.plugins.headerBidders.active){tmgAdsLog("tmgAds.plugins.headerBidders.active is ON");(tmgAds.plugins.headerBidders.indexExchange.active)?headertag.pubads().refresh([c]):googletag.pubads().refresh([c])}else{tmgAdsLog("tmgAds.plugins.headerBidders.active is OFF");googletag.pubads().refresh([c])}})}else{tmgAdsLog("adslot does not exist: googletag.pubads().refresh(["+c+"]);")}}function tmgAdsCountdown(a,b){if(tmgAds.refreshTimers[b].currentCount\x3e0){if(tmgAds.config.viewportstatus\x3d\x3d\x3dtrue){tmgAdsLog("Countdown not finished, reducing countdown by 1s :: adtype:"+b+"  viewportstatus:"+tmgAds.config.viewportstatus+"  countdownID:"+tmgAds.refreshTimers[b].countdownID+"  timeOutstanding:"+tmgAds.refreshTimers[b].currentCount+"  adcount:"+tmgAds.refreshTimers[b].adcount);if(tmgAds.refreshTimers[b].currentCount\x3d\x3d2){tmgAdsEvent("actionHeaderBids")}--tmgAds.refreshTimers[b].currentCount}else{tmgAdsLog("tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus+" - window is not active, so countdown remains at "+tmgAds.refreshTimers[b].currentCount+"s")}}else{tmgAdsLog("Countdown finished, - ad is ready to refresh - waiting for the user to interact with the page before we refresh ads.")}}function tmgAdsScheduleRefreshableAds(c,b,a){function d(e){if(tmgAds.refreshTimers[c].currentCount\x3d\x3d\x3d0\x26\x26tmgAds.refreshTimers[c].refreshStatus\x3d\x3d\x3dfalse){tmgAds.refreshTimers[c].refreshStatus\x3dtrue;document.getElementById(a).style.opacity\x3d"0";setTimeout(function(){tmgAdsLog("User has interacted with page and therefore is now active - event.type\x3d"+e.type+"  -  count is 0... lets refrsh some ads.");tmgAdsLog("Firstly, lets remove the existing countdownID: "+tmgAds.refreshTimers[c].countdownID);window.clearInterval(tmgAds.refreshTimers[c].countdownID);if(tmgAds.config.deliveryModel.refreshCycle\x3d\x3d\x3d0||tmgAds.config.deliveryModel.refreshCycle\x3etmgAds.refreshTimers[c].adcount){tmgAdsLog("SUCCESS: We can refresh this ad as there is either no limit on number of refreshed ads or we have delivered less than the current limit");tmgAdsLog("tmgAds.config.deliveryModel.refreshCycle \x3d "+tmgAds.config.deliveryModel.refreshCycle);++tmgAds.refreshTimers[c].adcount;tmgAdsLog("Incrementing tmgAds.refreshTimers["+c+"].adcount to: "+tmgAds.refreshTimers[c].adcount);tmgAdsLog("Creating a new countdownID");tmgAds.refreshTimers[c].countdownID\x3dsetInterval(function(){tmgAdsCountdown(tmgAds.ads[b].adslot,c)},1000);tmgAdsLog("CSS transitions fadeout - Countdown has reached 1s to go... we need to start transitioning the look/feel of this unit by fading out the adslot...");tmgAdsLog("Resetting the countdown");tmgAds.refreshTimers[c].currentCount\x3dtmgAds.config.deliveryModel.refreshRate/1000;tmgAdsLog("Requesting Ad refresh - adtype:"+c+" countdownID:"+tmgAds.refreshTimers[c].countdownID+" adID\x3d"+b);tmgAds.refreshTimers[c].refreshStatus\x3dfalse;if(e.type!\x3d"click"){tmgAdsLog("Event is NOT a click event, so we can happily refresh this ad now.");tmgAdsRefreshAd(tmgAds.refreshTimers[c].slotID,c,b)}else{tmgAdsLog("Event is a CLICK event, we do not refresh based on these as they can overinflate delivery attempts.")}}else{tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle has been met.");tmgAdsLog("ALERT: tmgAds.config.deliveryModel.refreshCycle \x3d "+tmgAds.config.deliveryModel.refreshCycle);tmgAdsLog("ALERT: tmgAds.refreshTimers["+c+"].adcount \x3d "+tmgAds.refreshTimers[c].adcount);tmgAdsEvent("tmggpt-collapseStickyAdslot")}},1000)}else{}}tmgAds.refreshTimers[c]\x3d{slotID:tmgAds.ads[b].adslot,duration:tmgAds.config.deliveryModel.refreshRate/1000,currentCount:tmgAds.config.deliveryModel.refreshRate/1000,refreshStatus:false,adcount:1,countdownID:setInterval(function(){tmgAdsCountdown(tmgAds.ads[b].adslot,c)},1000)};document.addEventListener("mousemove",function(e){d(e)});document.addEventListener("keypress",function(e){d(e)});document.addEventListener("scroll",function(e){d(e)});document.addEventListener("orientationchange",function(e){d(e)});document.addEventListener("resize",function(e){d(e)});document.addEventListener("focus",function(e){d(e)});document.addEventListener("mousewheel",function(e){d(e)});document.addEventListener("DOMMouseScroll",function(e){d(e)})}function tmgAdsSetAdSlotToRefresh(c){tmgAdsLog("Called: tmgAdsSetAdSlotToRefresh("+c+")");tmgAds.counters\x3dtmgAds.counters||{};if(!tmgAds.counters.hasOwnProperty(c)){tmgAds.counters[c]\x3d0}if(Object.keys(tmgAds.ads).length\x3e0\x26\x26tmgAds.plugins.adSlotRefresh.active\x26\x26tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){tmgAdsLog("SUCCESS: Ads seem to have been defined AND retryCount \x3c\x3d retryLimit: tmgAds.plugins.stadSlotRefresh.retryCount\x3d"+tmgAds.plugins.adSlotRefresh.retryCount+"   tmgAds.plugins.adSlotRefresh.retryLimit\x3d"+tmgAds.plugins.adSlotRefresh.retryLimit);var a\x3d"none";for(var b in tmgAds.ads){if(tmgAds.ads.hasOwnProperty(b)){if(tmgAds.ads[b].adtype\x3d\x3dc){tmgAdsLog("SUCCESS: tmgads.ads["+b+"].adtype \x3d "+c);a\x3db;break}else{tmgAdsLog("FAILURE: tmgads.ads["+b+"].adtype !\x3d "+c)}}else{tmgAdsLog("FAILURE: tmgads.hasOwnProperty("+b+") - no hasOwnProperty exixts")}}if(a\x3d\x3d"none"){tmgAdsLog("Ad not found ["+c+"] perhaps its not beeing created yet. Number of times this script has been run for this ad -\x3e "+tmgAds.counters[c]);if(tmgAds.counters[c]\x3ctmgAds.plugins.counters){++tmgAds.counters[c];tmgAdsLog("Refresh count limit not hit lets call this script again");window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}else{tmgAdsLog("Refresh count limit hit, stop trying to fill this slot and stop running this script.")}}else{if(tmgAds.ads[a].adtype\x3d\x3dc){if(typeof tmgAds.ads[a].adslot\x3d\x3d"object"){tmgAdsLog("SUCCESS: calling tmgAdsScheduleRefreshableAds("+c+")");tmgAdsScheduleRefreshableAds(c,a,tmgAds.ads[a].div)}else{tmgAdsLog("ALERT: delaying implementing refreshables until the adslots are available - recalling tmgAdsSetAdSlotToRefresh("+c+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - retryCount:"+tmgAds.plugins.adSlotRefresh.retryCount+" of "+tmgAds.plugins.adSlotRefresh.retryLimit);if(tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){++tmgAds.plugins.adSlotRefresh.retryCount;window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}else{tmgAdsLog("ALERT: tmgAdsSetAdSlotToRefresh request limit hit")}}}}}else{++tmgAds.plugins.adSlotRefresh.retryCount;tmgAdsLog("ALERT: the tmgAds.ads object does not exist or is empty, ads have not been created yet - recalling tmgAdsSetAdSlotToRefresh("+c+") in "+tmgAds.plugins.adSlotRefresh.retryPeriod+"ms - incrementing count to: "+tmgAds.plugins.adSlotRefresh.retryCount);if(tmgAds.plugins.adSlotRefresh.retryCount\x3c\x3dtmgAds.plugins.adSlotRefresh.retryLimit){window.setTimeout(function(){tmgAdsSetAdSlotToRefresh(c)},tmgAds.plugins.adSlotRefresh.retryPeriod)}}}function tmgAdsOnPageLoad(){tmgAdsLog("##################################################################################################################");tmgAdsLog("P A G E   L  O A D E D ");tmgAdsLog("##################################################################################################################");window.addEventListener("focus",function(){tmgAds.config.viewportstatus\x3dtrue;tmgAdsLog("AutoRefresh Event: window.onfocus - tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus)});window.addEventListener("blur",function(){tmgAds.config.viewportstatus\x3dfalse;tmgAdsLog("AutoRefresh Event: window.onblur - tmgAds.config.viewportstatus\x3d"+tmgAds.config.viewportstatus)});tmgAdsLog("Executing tmgAds.cmd queue:");tmgAdsEvent("tmggpt-cmd-queue-start");while(tmgAds.cmd.length\x3e0){tmgAdsLog("Executing tmgAds.cmd queue: "+tmgAds.cmd.slice(0,1));(tmgAds.cmd.shift())()}tmgAdsInitPerformance()}function tmgAdsEvent(b){var c\x3d"tmgAds:"+b;var a\x3dnew CustomEvent(c);tmgAdsLog("EVENT: "+c);document.dispatchEvent(a)}function tmgAdsInitDeliveryModel(b){try{tmgAdsLog("Called tmgAdsInitDeliveryModel");b.config.deliveryModel\x3d{model:"none",activityStatus:"none"};for(i\x3d0;i\x3cb.config.deliveryModels.length;i++){if(typeof tmgAds.config.modelOld!\x3d"undefined"\x26\x26(b.config.deliveryModels[i].viewport\x3d\x3d"x"||b.config.deliveryModels[i].viewport\x3d\x3d"l")){tmgAdsLog("ALERT: Old tmgAds.model is still on this page - converting OLD model to NEW model - we break this loop here");b.config.deliveryModels[i].minHeight\x3db.config.modelOld.minHeight;b.config.deliveryModels[i].model\x3db.config.modelOld.model;b.config.deliveryModels[i].refreshCycle\x3db.config.modelOld.refreshCycle;b.config.deliveryModels[i].refreshRate\x3db.config.modelOld.refreshRate;b.config.deliveryModels[i].ruleName\x3d"OLD-"+b.config.modelOld.model+"-"+b.config.deliveryModels[i].viewport}else{tmgAdsLog("tmgAds.config.modelOld does not exist, this is a good thing")}if(b.config.deliveryModels[i].viewport\x3d\x3db.layout.viewport){tmgAdsLog("MATCHED (model/vp): vp\x3d"+b.config.deliveryModels[i].viewport+" vp\x3d"+b.layout.viewport);tmgAds.config.deliveryModel\x3db.config.deliveryModels[i];tmgAds.config.deliveryModel.activityStatus\x3d"none";if(b.config.deliveryModel.model\x3d\x3d"banner"){b.config.deliveryModel.model\x3d"ban"}}}if(b.config.deliveryModel.model!\x3d"none"){tmgAdsLog(\'SUCCESS: tmgAds.config.deliveryModel.model is NOT "none" -\x3e \'+b.config.deliveryModel.model);if(b.plugins.adSlotRefresh.pagetypes.indexOf(b.page.pagetype)\x3e-1){tmgAdsLog("SUCCESS: pagetype is suitable for sticky ads: "+b.page.pagetype);if((b.layout.viewport\x3d\x3d"x"||b.layout.viewport\x3d\x3d"l")\x26\x26(b.config.deliveryModel.model\x3d\x3d"mpu")){tmgAdsLog("Viewport \x26 Adtype match - X/L \x26 MPU");b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model;tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)}if((b.layout.viewport\x3d\x3d"xs"||b.layout.viewport\x3d\x3d"s"||b.layout.viewport\x3d\x3d"m")\x26\x26(b.config.deliveryModel.model\x3d\x3d"ban")){tmgAdsLog("Viewport \x26 Adtype match - X/L \x26 MPU");b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model;tmgAdsSetAdSlotToRefresh(tmgAds.config.deliveryModel.activityStatus)}}else{tmgAdsLog("ALERT: tmgAds.page.pagetype is not suitable for sticky ads -\x3e setting tmgAds.config.deliveryModel.activityStatus \x3d none");b.config.deliveryModel.activityStatus\x3d"none"}}else{tmgAdsLog(\'WARNING: tmgAds.config.deliveryModel.model is set to "none" -\x3e setting tmgAds.config.deliveryModel.activityStatus\x3d\'+b.config.deliveryModel.model);b.config.deliveryModel.activityStatus\x3db.config.deliveryModel.model}tmgAdsLog("INFO: Delivery Model is set as: ruleName:"+b.config.deliveryModel.ruleName+"  viewport:"+b.config.deliveryModel.viewport+"  model:"+b.config.deliveryModel.model+"  refreshRate:"+(b.config.deliveryModel.refreshRate/1000)+"s  refreshCycle:"+b.config.deliveryModel.refreshCycle+"  minHeight:"+b.config.deliveryModel.minHeight)}catch(a){tmgAdsLog("ERROR: tmgAdsInitDeliveryModel failed -\x3e error\x3d"+a.message,b)}}function tmgAdsInitHeaderBidders(e){tmgAdsLog("Called:");if(e.plugins.headerBidders.active){tmgAdsLog("headerBidding is ACTIVE");if(e.plugins.headerBidders.indexExchange.active){tmgAdsLog("indexExchange is ACTIVE");e.metrics.headerBidders.indexExchange\x3d{activated:tmgAdsTimer()};window.headertag\x3dwindow.headertag||{};window.headertagconfig\x3d{siteId:e.plugins.headerBidders.indexExchange.siteId,timeout:e.plugins.headerBidders.indexExchange.timeout,partners:{INDX:{targetingType:e.plugins.headerBidders.indexExchange.partners.INDX.targetingType,timeout:e.plugins.headerBidders.indexExchange.partners.INDX.timeout}}};var d\x3ddocument.createElement("script");d.src\x3dtmgAds.plugins.headerBidders.indexExchange.jslib;d.type\x3d"text/javascript";var b\x3ddocument.getElementsByTagName("script")[0];b.parentNode.insertBefore(d,b);tmgAdsLog("IndexEchange library is being loaded:"+d.src);googletag.cmd.push(function(){if(typeof window.headertag\x3d\x3d\x3d"undefined"||window.headertag.apiReady!\x3d\x3dtrue){tmgAdsLog("window.headertag is not defined");window.headertag\x3dgoogletag}else{tmgAdsLog("widnow.headertag is already defined")}})}else{tmgAdsLog("indexExchange is INACTIVE")}if(e.plugins.headerBidders.amazon.active){console.log("Amazon A9 is ACTIVE");e.metrics.headerBidders.amazon\x3d{activated:tmgAdsTimer()};tmgAdsLoadJS("amazona9",tmgAds.plugins.headerBidders.amazon.jslib,function(){tmgAdsEvent("amazona9:loaded")})}else{console.log("Amazon A9 is INACTIVE")}if(e.plugins.headerBidders.prebid.active){tmgAdsLog("Prebid.js is ACTIVE");e.metrics.headerBidders.prebid\x3d{activated:tmgAdsTimer()};window.pbjs\x3dwindow.pbjs||{};window.pbjs.que\x3dwindow.pbjs.que||[];window.PREBID_TIMEOUT\x3de.plugins.headerBidders.prebid.timeout;tmgAdsLog("Prebid.js: we need to set this -\x3e googletag.pubads().disableInitialLoad();");googletag.cmd.push(function(){googletag.pubads().disableInitialLoad()});pbjs.que.push(function(){var g\x3d[{code:"tmgads_head_mpu",sizes:[[300,250],[300,600]],bids:[{bidder:"rubicon",params:{accountId:e.plugins.headerBidders.prebid.bidders.rubicon.accountId,siteId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].siteId,zoneId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].zoneId,sizes:[15,10]}}]},{code:"tmgads_head_ban",sizes:[[728,90],[970,250]],bids:[{bidder:"rubicon",params:{accountId:e.plugins.headerBidders.prebid.bidders.rubicon.accountId,siteId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].siteId,zoneId:e.plugins.headerBidders.prebid.bidders.rubicon.viewports[e.layout.viewport].zoneId,sizes:[2,57]}}]}];pbjs.que.push(function(){pbjs.addAdUnits(g);pbjs.requestBids({bidsBackHandler:f("pbjs.sendAdserverRequest")})});function f(h){if(pbjs.adserverRequestSent){console.log("tmgAdsInitHeaderBidders: pbjs.adserverRequestSent is set - "+h);return}else{console.log("tmgAdsInitHeaderBidders: pbjs.adserverRequestSent is not set - "+h);pbjs.adserverRequestSent\x3dtrue;googletag.cmd.push(function(){pbjs.que.push(function(){console.log("tmgAdsInitHeaderBidders: Prebid.js -\x3e bidsBackhandler");pbjs.setTargetingForGPTAsync();googletag.pubads().refresh()})})}}setTimeout(function(){if(pbjs.adserverRequestSent){f("PREBID_TIMEOUT")}},e.plugins.headerBidders.prebid.timeout)});var c\x3ddocument.createElement("script");c.type\x3d"text/javascript";c.async\x3de.plugins.headerBidders.prebid.async;c.src\x3de.plugins.headerBidders.prebid.jslib;var a\x3ddocument.getElementsByTagName("script")[0];a.parentNode.insertBefore(c,a);tmgAdsLog("Prebid.js libraray is being loaded:"+c.src)}else{tmgAdsLog("Prebid.js is INACTIVE")}}else{tmgAdsLog("headerBidding is INACTIVE")}}function tmgAdsRefreshHeaderBidders(a){}(function(){if(typeof window.CustomEvent\x3d\x3d\x3d"function"){return false}function a(c,d){d\x3dd||{bubbles:false,cancelable:false,detail:undefined};var b\x3ddocument.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail);return b}a.prototype\x3dwindow.Event.prototype;window.CustomEvent\x3da})();(function(a){a.metrics.tmggptInitBegin\x3dtmgAdsTimer();tmgAdsInit(a);tmgAdsInitGPT();tmgAdsInitHeaderBidders(a);tmgAdsInitEventHandlers(a);tmgAdsEvent("tmggpt-initialise:start");tmgAdsInitConfig(a);tmgAdsInitGeoAPIStatus(a);tmgAdsInitData(a);tmgAdsInitDeliveryModel(a);tmgAdsInitDFP(a);tmgAdsLoadJS("grapeshot",a.plugins.grapeshot.url,a.plugins.grapeshot,function(){tmgAdsEvent("grapeshot:loaded")});a.metrics.tmggptInitEnd\x3dtmgAdsTimer();a.metrics.metricTimeToExecuteTMGGPT\x3da.metrics.tmggptInitEnd-a.metrics.tmggptInitBegin;tmgAdsEvent("tmggpt-initialise:end")})(tmgAds);\n\x3c/script\x3e\n\x3cstyle type\x3d"text/css"\x3e\n#tmgads_head_ban {\n\theight:    0px;\n\topacity:   0;\n\ttransition: \n\t  opacity 0.75s ease-in-out, \n    background-color 0.75s ease, \n    height 1s ease;\n}\n\n#tmgads_body_mpu {\n\theight:  0px;\n\topacity: 0;\n\ttransition: \n\t  opacity 0.75s ease-in-out, \n    background-color 0.75s ease, \n    height 1s ease;\n}\n\n\n#tmgads_body_hpg {\n\theight:  0px;\n\topacity: 0;\n\ttransition: \n\t  opacity 1s ease-in-out, \n    background-color 1s ease, \n    height 1s ease;\n}\n\x3c/style\x3e';
f.addClientFiltersList([]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Mather Analytics [v1.0]","disabled":false,"id":41358127,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketingmatheranalyticsv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3c!-- Start Mather Analytics --\x3e\n\x3cscript type\x3d\"text/javascript\"\x3e\nvar _snaq \x3d _snaq || [];\n_snaq.push(['setCollectorUrl', 'www.i.matheranalytics.com']);\n_snaq.push(['setAppId', 'v1']);\n_snaq.push(['setCustomerId', 'ma47389']);\n_snaq.push(['setMarket', '19703987']);\n_snaq.push(['setTopLevelDomains', ['co.uk']]);\n_snaq.push(['enableActivityTracking', 30, 10]);\n\n_snaq.push(['setContext',\n[\n  { tag: '#invitation-v1', context: { action: { type: 'paywall', category: 'payment', action: 'requested' }} },\n  { url: 'subscriptions/terms-and-conditions', context: { action: { type: 'subscription', category: 'payment', action: 'terms_and_conditions' }} },\n  { url: 'subscriptions/thank-you', context: { action: { type: 'subscription', category: 'payment', action: 'completed' }} },\n  { url: 'subscriptions/thankyou', context: { action: { type: 'subscription', category: 'payment', action: 'completed' }} },\n  \n]]);\n\n_snaq.push(['trackPageView']);\n\n(function() {\n  var a \x3d [].concat.apply([], _snaq);\n  var src \x3d a[a.indexOf('setCustomerId') + 1] + '/' + a[a.indexOf('setMarket') + 1] + '/sp.js';\n  var sp \x3d document.createElement('script'); sp.type \x3d 'text/javascript'; sp.async \x3d true; sp.defer \x3d true;\n  sp._mather_tag \x3d document.scripts[document.scripts.length - 1]; sp._mather_sp \x3d sp.uniqueID;\n  sp.src \x3d ('https:' \x3d\x3d document.location.protocol ? 'https' : 'http') + '://js.matheranalytics.com/s/' + src;\n  var s \x3d document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sp, s);\n})();\n\x3c/script\x3e\n\x3c!-- End Mather Analytics --\x3e";
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){qubit.Quick.library("qubit.consent.v1.Tag",{getDefaultConfig:function(){return{name:"Qubit Consent Library",async:true,active:false,description:"Consent library allows to easy create cookie consent banner.",html:"",locationDetail:"",isPrivate:false,url:"d3c3cq33003psk.cloudfront.net/consent/consent-widget-1.1.0.min.js",usesDocWrite:false,upgradeable:true,consentConfig:null,parameters:[],categories:[]}},script:function(){},pre:function(){var E=qubit.opentag.Tags.findTagContainers(this)[0];
if(E){var f=E.config.clientId;var F=E.getContainerId();this.openConsent(f,F)}else this.openConsent()},post:function(){},openConsent:function(E,f){var F=document.createElement("script");F.src="//d3c3cq33003psk.cloudfront.net/PostData.js";document.getElementsByTagName("head")[0].appendChild(F);var O=function(P,N){if(!window._q_)setTimeout(function(){O(P)},100);else if(E&&f)window._q_.PostData("//pong.qubitproducts.com/s?tid\x3d"+E+"_"+f+"\x26time\x3d"+(new Date).getTime()+"\x26type\x3d"+P+"\x26r\x3d"+
N)};var I=this.getDefaultConfiguration();window.qcw=I;var r=this.config.consentConfig;if(r){for(var H in r)if(r.hasOwnProperty(H)&&H!=="status"&&H!=="popup")I[H]=r[H];var K=r.status;if(K)for(H in K)if(K.hasOwnProperty(H))I.status[H]=K[H];var R=r.popup;if(R)for(H in R)if(R.hasOwnProperty(H))I.popup[H]=R[H]}I.onUserAccept=function(P){if(window.opentag_consentGiven)window.opentag_consentGiven();if(window._q_ping)window._q_ping("consentAccept",P)};I.onUserDecline=function(P){if(window._q_ping)window._q_ping("consentDecline",
P)};I.onPostCreate=function(P){if(window._q_ping)window._q_ping("consentShown",P)};I.onUserDismiss=function(P){if(window._q_ping)window._q_ping("consentDismiss",P)}},getDefaultConfiguration:function(){var E="https://d3c3cq33003psk.cloudfront.net/consent/img/background-image.png";var f="https://d3c3cq33003psk.cloudfront.net/consent/img/cbg_w.png";return{mode:"notification",acceptButtonText:"Enable Cookies",declineButtonText:"No, Thank You",acceptButtonId:"buttonAccept",declineButtonId:"buttonDecline",
cookieStatusId:"cookieStatus",cookieAndPrivacyAndPolicyId:"cookieAndPrivacy",closeButtonText:"Dismiss",closeButtonId:"closePopup",statusAcceptedText:"Cookies Enabled",statusDeclinedText:"Cookies Disabled",cookieAndprivacyPolicyText:"privacy and cookies policy",cookieAndprivacyPolicyUrl:"http://www.yoursite.com/privacy",cookieDomain:"",whenIgnoredShowPopup:true,whenIgnoredShowStatus:true,whenAcceptedHideStatus:true,onIgnoreShowEvery:2,sampleRate:1,hidePopupOnBlur:true,onUserAccept:null,onUserDecline:null,
onUserDismiss:null,onPreCreate:null,onPostCreate:null,name:"internal config",cookieExpiryDays:365,popup:{iframeCss:["top: 0;","left: 0;","height: 185px;","width: 100%;","box-shadow: 0 0 20px 0px #888;","z-index: 2147483647;"].join("\n"),headerHtml:['\x3cdiv class\x3d"content"\x3e','  \x3cdiv class\x3d"action-header"\x3e','    \x3cdiv class\x3d"close" id\x3d"{{closeButtonId}}"\x3e',"      {{closeButtonText}}","    \x3c/div\x3e","  \x3c/div\x3e","\x3c/div\x3e"].join("\n"),contentCss:["body {","  padding-top: 8px;",
"  text-align: center;",'  background: url("'+f+'") repeat;',"  font-size: 12px;","  line-height: 17px;","  font-family: arial, helvetica;","  color: #555;","  text-shadow: 0px 0px 1px #CCC;","}",".content {","  text-align: left;","  width: 800px;","  margin: 0 auto;","  padding-top: 5px;","}","body p {","  margin: 5px 0px;","}","a {","  color: #2e9dc5;","}","h1 {","  font-size: 1.4em;","}",".action-footer {","  margin-top: 0px;","}",".action-footer .button {","  padding: 5px 8px;","  line-height: 16px;",
"  cursor: pointer;","}","#{{closeButtonId}} {","  vertical-align: middle","  color: #939598;","  padding: 5px 10px 5px 10px;","  font-size: 13px;","  text-decoration: none;","  margin-top: 0px;","  float: right;","  cursor: pointer;","  border: 1px solid #EEE;","  background: #EEE;","  border-radius: 5px;","}",".action-footer #{{acceptButtonId}} {","  -moz-box-shadow:inset 0px 1px 0px 0px #bbdaf7;","  -webkit-box-shadow:inset 0px 1px 0px 0px #bbdaf7;","  box-shadow:inset 0px 1px 0px 0px #bbdaf7;",
"  background:-webkit-gradient( linear, left top, left "+"bottom, color-stop(0.05, #35b7de), color-stop(1, #0189a1));","  background:-moz-linear-gradient( center top, #35b7de 5%,"+" #0189a1 100% );","  filter:progid:DXImageTransform.Microsoft.gradient("+'startColorstr\x3d"#35b7de", endColorstr\x3d"#0189a1");',"  background-color:#35b7de;","  -moz-border-radius:4px;","  -webkit-border-radius:4px;","  border-radius:4px;","  border:1px solid #0189a1;","  display:inline-block;","  color:#fff;","  font-weight:normal;",
"  text-decoration:none;","  vertical-align: middle;","  float:right;","}",".action-footer #{{acceptButtonId}}:hover {","  background:-webkit-gradient( linear, left top, left "+"bottom, color-stop(0.05, #0189a1), color-stop(1, #35b7de));","  background:-moz-linear-gradient( center top,"+" #0189a1 5%, #35b7de 100% );","  filter:progid:DXImageTransform.Microsoft.gradient("+'startColorstr\x3d"#0189a1", endColorstr\x3d"#35b7de");',"  background-color:#0189a1;","}",".action-footer #{{acceptButtonId}}:active {",
"  position:relative;","  top: 1px;","}",".action-footer #{{declineButtonId}} {","  color: #555;","  float:right;","  margin-right: 15px;","}"].join("\n"),contentHtml:['\x3cdiv class\x3d"content"\x3e',"  \x3ch1\x3ePrivacy and Cookies\x3c/h1\x3e","  \x3cp\x3e","    For this website to run at its best, we ask the browser","    (like Google Chrome and Internet Explorer) for a little ","    personal information. Nothing drastic, just enough to ","    remember your preferences, login ID, and what you like to ",
"    look at (on our site). Having this information to hand  ","    helps us understand your needs and improve our","    service to you. ","  \x3c/p\x3e","  \x3cp\x3e","  If you would like to learn more about the information we ","  store, how it is used or how to disable Cookies please read our",'    \x3ca href\x3d"{{cookieAndprivacyPolicyUrl}}" ','      target \x3d "_blank"','      id\x3d"{{cookieAndPrivacyAndPolicyId}}"\x3e',"      {{cookieAndprivacyPolicyText}}","    \x3c/a\x3e.","  \x3c/p\x3e",
"\x3c/div\x3e"].join("\n"),footerHtml:['\x3cdiv class\x3d"content"\x3e','   \x3cdiv class\x3d"actions action-footer"\x3e','     \x3cdiv class\x3d"button" id\x3d"{{acceptButtonId}}"\x3e',"       {{acceptButtonText}}","     \x3c/div\x3e",'     \x3cdiv class\x3d"button" id\x3d"{{declineButtonId}}"\x3e',"        {{declineButtonText}}","     \x3c/div\x3e","   \x3c/div\x3e","\x3c/div\x3e"].join("\n")},status:{iframeCss:["bottom: 0;","left: 0;","height: 20px;","width: 100%;","z-index: 2147483647;"].join("\n"),
headerHtml:"",contentCss:["body {","  background: transparent;","  margin: 0;","  padding: 0;","  font-family: arial, helvetica;","  text-align: center;","  vertical-align: middle;","  font-size: 12px;","  line-height: 18px;","}",".content {","  width: 800px;","  margin: 0 auto;","  text-align: left;","}","html\x3ebody #{{cookieStatusId}} {","  width: auto;","}","#{{cookieStatusId}} {","  padding: 1px 10px 0px 22px;","  width: 11.5em;","  cursor: pointer; !important","}",".icon {",'  background-image: url("'+
E+'");',"  width: 20px;","  height: 20px;","  position: absolute;","  background-position: 6px -116px;","  background-repeat: no-repeat;","  z-index: 199999;","}",".declined #{{cookieStatusId}} {","  -webkit-box-shadow:inset 0px 1px 0px 0px #f5978e;","  box-shadow:inset 0px 1px 0px 0px #f5978e;","  background:-webkit-gradient( linear, left top, left "+"bottom, color-stop(0.05, #f24537), color-stop(1, #c62d1f) );","  background:-moz-linear-gradient( center top, #f24537 5%,"+" #c62d1f 100% );","  filter:progid:DXImageTransform.Microsoft.gradient("+
'startColorstr\x3d"#f24537", endColorstr\x3d"#c62d1f");',"  background-color:#f24537;","  -moz-border-radius:5px 5px 0px 0px;","  -webkit-border-radius:5px 5px 0px 0px;","  border-radius:5px 5px 0px 0px;","  border:1px solid #d02718;","  display:inline-block;","  color:#ffffff;","  font-family:arial;","  font-size:12px;","  text-decoration:none;","}",".declined #{{cookieStatusId}}:hover {","  background:-webkit-gradient( linear, left top, left "+"bottom, color-stop(0.05, #c62d1f), color-stop(1, #f24537) );",
"  background:-moz-linear-gradient( center top, #c62d1f 5%,"+" #f24537 100% );","  filter:progid:DXImageTransform.Microsoft.gradient("+'startColorstr\x3d"#c62d1f", endColorstr\x3d"#f24537");',"  background-color:#c62d1f;","}",".declined #{{cookieStatusId}}:active {","  position:relative;","  top: 1px;","}",".accepted #{{cookieStatusId}} {","  -moz-box-shadow:inset 0px 1px 0px 0px #6ebf26;","  -webkit-box-shadow:inset 0px 1px 0px 0px #6ebf26;","  box-shadow:inset 0px 1px 0px 0px #6ebf26;","  background:-webkit-gradient( linear, left top, left "+
"bottom, color-stop(0.05, #7ca814), color-stop(1, #5e8007) );","  background:-moz-linear-gradient( center top, #7ca814 5%,"+"#5e8007 100% );","  filter:progid:DXImageTransform.Microsoft."+'gradient(startColorstr\x3d"#7ca814", endColorstr\x3d"#5e8007");',"  background-color:#7ca814;","  -moz-border-radius:5px 5px 0px 0px;","  -webkit-border-radius:5px 5px 0px 0px;","  border-radius:5px 5px 0px 0px;","  border:1px solid #619908;","  display:inline-block;","  color:#ffffff;","  font-family:arial;","  font-size:12px;",
"  font-weight:normal;","  text-decoration:none;","}",".accepted #{{cookieStatusId}}:hover {","  background:-webkit-gradient( linear, left top, left bottom,"+" color-stop(0.05, #5e8007), color-stop(1, #7ca814) );","  background:-moz-linear-gradient( center top, #5e8007 5%, "+"#7ca814 100% );","  filter:progid:DXImageTransform.Microsoft.gradient("+'startColorstr\x3d"#5e8007", endColorstr\x3d"#7ca814");',"  background-color:#5e8007;","}",".accepted #{{cookieStatusId}}:active {","  position:relative;",
"  top: 1px;","}"].join("\n"),contentHtml:['\x3cdiv class\x3d"content"\x3e','  \x3cdiv class\x3d"icon"\x3e\x3c/div\x3e','  \x3cdiv id\x3d"{{cookieStatusId}}"\x3e\x3c/div\x3e',"\x3c/div\x3e"].join("\n"),footerHtml:""}}},consentModes:{notification:"Notification Only",implicit:"Implicit consent",explicit:"Explicit Consent"}})})();
(function(){var E=qubit.vs.qubit.consent.v1.Tag;var f=new E({"async":true,"consentConfig":{"acceptButtonId":"buttonAccept","declineButtonText":"No","cookieAndPrivacyAndPolicyId":"cookieAndPrivacy","mode":"notification","cookieDomain":"","hidePopupOnBlur":true,"onUserDismiss":null,"onPostCreate":null,"onIgnoreShowEvery":10,"closeButtonId":"closePopup","cookieExpiryDays":365,"onPreCreate":null,"closeButtonText":"Dismiss","onUserAccept":null,"whenAcceptedHideStatus":"whenAcceptedHideStatus","cookieAndprivacyPolicyText":"Privacy and Cookies policy",
"statusDeclinedText":"Cookies Disabled","sampleRate":1,"statusAcceptedText":"Cookies Enabled","onUserDecline":null,"popup":{"footerHtml":'\x3cdiv class\x3d"content"\x3e\n   \x3cdiv class\x3d"actions action-footer"\x3e\n     \x3cdiv class\x3d"button" id\x3d"{{acceptButtonId}}"\x3e\n       {{acceptButtonText}}\n     \x3c/div\x3e\n     \x3cdiv class\x3d"button" id\x3d"{{declineButtonId}}"\x3e\n        {{declineButtonText}}\n     \x3c/div\x3e\n   \x3c/div\x3e\n\x3c/div\x3e',"headerHtml":'\x3cdiv class\x3d"content"\x3e\n  \x3cdiv class\x3d"action-header"\x3e\n    \x3cdiv class\x3d"close" id\x3d"{{closeButtonId}}"\x3e\n      {{closeButtonText}}\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e',
"iframeCss":"display: block;\nheight: 76px !important;\nposition: static;\nwidth: 100%;","contentHtml":'\x3cdiv class\x3d"container"\x3e\n    \x3cdiv class\x3d"tmg-cookie-box"\x3e\n      \x3cp\x3e\n        We use cookies to enhance your visit to our site and to bring you advertisements that might interest you. \x3cbr\x3e\n        \x3cb\x3eRead our \x3ca href\x3d"{{cookieAndprivacyPolicyUrl}}"\n          target \x3d "_blank"\n          id\x3d"{{cookieAndPrivacyAndPolicyId}}"\x3e\n          {{cookieAndprivacyPolicyText}}\n        \x3c/a\x3e to find out more. \x3c/b\x3e\n      \x3c/p\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"contentCss":'body {\n  background: #f8f3df;\n  display: table;\n  font-family: Georgia, Arial, Tahoma, sans-serif;\n  font-size: 14px;\n  margin: 0 auto;\n  padding: 19px;\n  max-width: 1240px;\n}\n \nbody \x3e div {\n  display: table-cell;\n  vertical-align: top;\n}\n \nbody \x3e div.content {\n  padding-left: 40px;\n  width: 120px;\n}\n \n.tmg-cookie-box {\n  color: #262626;\n}\n \n.tmg-cookie-box p{\n  margin: 0;\n}\n \n.tmg-cookie-box b {\n  font-size: 12px;\n  font-weight: normal;\n}\n \n.tmg-cookie-box a {\n  color: #262626;\n}\n \n \n#closePopup {\n   \n}\n.action-footer #buttonAccept,\n#closePopup {\n  background: none transparent;\n  border: 1px solid #000;\n  border-radius: 2px;\n  cursor: pointer;\n  display: block;\n  float: right;\n  font-size: 12px;\n  font-weight: bold;\n  line-height: 36px;\n  text-align: center;\n  text-transform: uppercase;\n  width: 100%;\n}\n \n#closePopup {\n  font-size: 0;\n  line-height: 0;\n}\n \n#closePopup:before {\n  content: "Ok";\n  font-size: 12px;\n  line-height: 36px;\n}\n \n.action-footer #buttonAccept:hover,\n#closePopup:hover {\n  box-shadow: none;\n}\n.action-footer #buttonAccept:active,\n#closePopup:active {\n  position:relative;\n  top: 1px;\n}\n.action-footer #buttonDecline {\n  display: none;\n  color: #555;\n  cursor: pointer;\n  line-height: 44px;\n  padding-right: 15px;\n  text-align: right;\n  float: left;\n  width: 121px;\n}\n \n@media only screen and (max-width: 768px) {\n  .tmg-cookie-box p { font-size: 12px; }\n  .tmg-cookie-box p br { display: none; }\n  body \x3e div.content { width: 70px; }\n}\n \n/* Iphone font-size fix on landscape */\n@media only screen and (min-device-width : 320px) and (max-device-width : 568px) and (orientation : landscape) {\n  body { padding-top: 10px; }\n  .tmg-cookie-box p,\n  .tmg-cookie-box p b { font-size: 8px; }\n}\n@media only screen and (max-width: 475px) {\n  body { padding-top: 5px; }\n  .tmg-cookie-box p,\n  .tmg-cookie-box p b { font-size: 10px; }\n  .tmg-cookie-box p br { display: none; }\n}'},
"cookieStatusId":"cookieStatus","cookieAndprivacyPolicyUrl":"http://www.telegraph.co.uk/topics/about-us/3691972/Privacy-and-Cookie-Policy.html","whenIgnoredShowStatus":true,"acceptButtonText":"Ok","name":"internal config","declineButtonId":"buttonDecline","whenIgnoredShowPopup":true,"status":{"footerHtml":"","headerHtml":"","iframeCss":"bottom: 0;\nleft: 0;\nheight: 20px;\nwidth: 100%;\nz-index: 2147483647;","contentHtml":'\x3cdiv class\x3d"content"\x3e\n  \x3cdiv class\x3d"icon"\x3e\x3c/div\x3e\n  \x3cdiv id\x3d"{{cookieStatusId}}"\x3e\x3c/div\x3e\n\x3c/div\x3e',
"contentCss":'body {\n  background: transparent;\n  margin: 0;\n  padding: 0;\n  font-family: arial, helvetica;\n  text-align: center;\n  vertical-align: middle;\n  font-size: 12px;\n  line-height: 18px;\n}\n.content {\n  max-width: 1280px;\n  margin: 0 auto;\n  text-align: left;\n}\nhtml\x3ebody #{{cookieStatusId}} {\n  width: auto;\n}\n#{{cookieStatusId}} {\n  padding: 1px 10px 0px 22px;\n  width: 11.5em;\n  cursor: pointer; !important\n}\n.icon {\n  background-image: url("https://d3c3cq33003psk.cloudfront.net/consent/img/background-image.png");\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  background-position: 6px -116px;\n  background-repeat: no-repeat;\n  z-index: 199999;\n}\n.declined #{{cookieStatusId}} {\n  -webkit-box-shadow:inset 0px 1px 0px 0px #f5978e;\n  box-shadow:inset 0px 1px 0px 0px #f5978e;\n  background: #c43838;\n  -moz-border-radius:5px 5px 0px 0px;\n  -webkit-border-radius:5px 5px 0px 0px;\n  border-radius:5px 5px 0px 0px;\n  border:1px solid #d02718;\n  display:inline-block;\n  color:#ffffff;\n  font-family:arial;\n  font-size:12px;\n  text-decoration:none;\n}\n.declined #{{cookieStatusId}}:hover {\n  background: #ac3232;\n}\n.declined #{{cookieStatusId}}:active {\n  position:relative;\n  top: 1px;\n}\n.accepted #{{cookieStatusId}} {\n  -moz-box-shadow:inset 0px 1px 0px 0px #6ebf26;\n  -webkit-box-shadow:inset 0px 1px 0px 0px #6ebf26;\n  box-shadow:inset 0px 1px 0px 0px #6ebf26;\n  background: #32ac5d;\n  -moz-border-radius:5px 5px 0px 0px;\n  -webkit-border-radius:5px 5px 0px 0px;\n  border-radius:5px 5px 0px 0px;\n  border:1px solid #619908;\n  display:inline-block;\n  color:#ffffff;\n  font-family:arial;\n  font-size:12px;\n  font-weight:normal;\n  text-decoration:none;\n}\n.accepted #{{cookieStatusId}}:hover {\n  background: #28934e;\n}\n.accepted #{{cookieStatusId}}:active {\n  position:relative;\n  top: 1px;\n}'}},
"usesDocumentWrite":false,"dedupe":false,"needsConsent":false,"name":"QuBit Consent","active":true,"disabled":false,"id":956126,"locked":false,"timeout":-1});var F="telegraphproductiontop.tags.qubitconsent.Tag";qubit.Define.clientNamespace(F,f);f.addClientFiltersList([]);f.addClientVariablesMap({});f.genericDependencies=[];f.addClientDependenciesList([])})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ANALYTICS: Travel_Remarketing [v1.0]","disabled":false,"id":53478806,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.analyticstravel_remarketingv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!--\n Start of DoubleClick Floodlight Tag: Please do not remove\n Activity name of this tag: Telegraph - Travel\n URL of the webpage where the tag is expected to be placed: http://http://www.telegraph.co.uk/travel\n This tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\n Creation Date: 10/26/2015\n --\x3e\n \x3cscript type\x3d"text/javascript"\x3e\n var axel \x3d Math.random() + "";\n var a \x3d axel * 10000000000000;\n document.write(\'\x3ciframe src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3dteleg004;ord\x3d\' + a + \'?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\');\n \x3c/script\x3e\n \x3cnoscript\x3e\n \x3ciframe src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3dteleg004;ord\x3d1?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\n \x3c/noscript\x3e\n \x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.ExcludeAllUrls","telegraphproductiontop.filters.IncludeTravel"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Facebook_Periscopix [v2.0]","disabled":false,"id":53478810,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.marketingfacebook_periscopixv20.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3c!-- Facebook Pixel Code --\x3e\n\x3cscript\x3e\n!function(f,b,e,v,n,t,s){if(f.fbq)return;n\x3df.fbq\x3dfunction(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f.ac_fbq)f._fbq\x3dn;\nn.push\x3dn;n.loaded\x3d!0;n.version\x3d'2.0';n.queue\x3d[];t\x3db.createElement(e);t.async\x3d!0;\nt.src\x3dv;s\x3db.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,\ndocument,'script','//connect.facebook.net/en_US/fbevents.js');\n\nfbq('init', '678338115628438');\nfbq('track', \"PageView\");\x3c/script\x3e\n\x3cnoscript\x3e\x3cimg height\x3d\"1\" width\x3d\"1\" style\x3d\"display:none\"\nsrc\x3d\"https://www.facebook.com/tr?id\x3d678338115628438\x26ev\x3dPageView\x26noscript\x3d1\"\n/\x3e\x3c/noscript\x3e\n\x3c!-- End Facebook Pixel Code --\x3e";
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"async":true,"usesDocumentWrite":false,"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"name":"ADTECH: Polar.me [v7.0]","active":true,"disabled":false,"locked":false,"locationObject":"BODY","url":"","timeout":5E3});var F="telegraphproductiontop.tags.adtechpolarmev70.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="";f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll4","telegraphproductiontop.filters.ExcludeSecure1"]);
f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){function O(){if(tmgAds.metrics.tmggptAdFirstAdQueued){tmgAdsLog("POLAR: DFP ads have already started to be called... lets do the Timewarp... I mean, call Polar ads.");window.mediaconductor=window.mediaconductor||function(){(mediaconductor.q=mediaconductor.q||[]).push(arguments)};mediaconductor("init","8147951252164934bcac37f1280cbe8a");mediaconductor("exec")}else if(I.count>=
I.limit){tmgAdsLog("POLAR: DFP ads have not been called for more than "+I.count+"s... lets call the Polar ads regardless");window.mediaconductor=window.mediaconductor||function(){(mediaconductor.q=mediaconductor.q||[]).push(arguments)};mediaconductor("init","8147951252164934bcac37f1280cbe8a");mediaconductor("exec")}else{++I.count;tmgAdsLog("POLAR: DFP ads have not started to be called yet... number of attempts left\x3d"+(I.limit-I.count));setTimeout(function(){O()},I.frequency)}}if(typeof window.tmgAdsLog!=
"function"){console.log("ADTECH:: Testing positive for content-blocking...");window.tmgAdsEvent=function(r,H){var K="tmgAds:"+r;var R=new CustomEvent(K);document.dispatchEvent(R)};window.tmgAdsLog=function(r,H){if(void 0!==typeof tmgAds){var K={time:("00"+(tmgAdsTimer()/1E3).toFixed(5)).slice(-9),callee:null,extra:H,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",
warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:r};arguments.callee.caller&&(K.callee=arguments.callee.caller.name),K.msg="%c[TMG-GPT]["+K.time+"]["+(K.callee+"                         ").substr(0,25)+"]: "+K.msg,K.styling=K.css.none,"ALERT"==r.substr(0,5)&&(K.styling=K.css.alert),"OPTIMIZELY"==r.substr(0,10)&&(K.styling=K.css.optimizely),"SUCCESS"==r.substr(0,7)&&(K.styling=K.css.success),"ERROR"==r.substr(0,
5)&&(K.styling=K.css.error),"WARNING"==r.substr(0,7)&&(K.styling=K.css.warning),"EVENT"==r.substr(0,5)&&(K.styling=K.css.event),"INFO"==r.substr(0,4)&&(K.styling=K.css.info),tmgAds.log.push(K.msg)}};window.tmgAdsPerf=function(r,H){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+r+" - "+H[0]),tmgAds.log.push("Performance: RUM Installed - "+r+" - "+H[0]),"now"==r)return RUM.now();if("mark"==r)return tmgAds.metrics[H[0]]=tmgAdsTimer(),RUM.mark(H[0]);if("measure"==r)return RUM.measure(H[0],
H[1],H[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+r+" - "+H[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+r+" - "+H[0]),"now"==r)return window.performance.now();if("mark"==r)return tmgAds.metrics[H[0]]=tmgAdsTimer(),window.performance.mark(H[0]);if("measure"==r)return window.performance.measure(H[0],H[1],H[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+
r+" - "+H[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+r+" - "+H[0]),"now"==r)return RUM.now();if("mark"==r)return void(tmgAds.metrics[H[0]]=tmgAdsTimer());if("measure"==r)return}};window.tmgAdsTimer=function(){var r=!1;return r=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(r.toFixed(3))};window.tmgAdsLoadJS=function(r,H,K){var R={name:r,status:"start",type:"text/javascript",
url:H,performance:{loadjsStarted:tmgAdsTimer(),loadjsRequested:0,loadjsLoaded:0}};tmgAdsEvent(r+":"+R.status);var P=document.createElement("script");P.type="text/javascript",P.async=!0,P.onload=function(){R.status="loaded",tmgAdsEvent(r+":"+R.status),R.performance.loadjsLoaded=tmgAdsTimer(),tmgAdsPerf("mark",["adverts_loaded_"+r]),tmgAds.metrics[r]||(tmgAds.metrics[r]={});for(var Z in R.performance)tmgAds.metrics[r][Z]=R.performance[Z];tmgAds.metrics[r].loadjsLatency=parseFloat((tmgAds.metrics[r].loadjsLoaded-
tmgAds.metrics[r].loadjsStarted).toFixed(3)),"function"==typeof K&&K()},R.status="requested",R.performance.loadjsRequested=tmgAdsTimer(),tmgAdsEvent(r+":"+R.status),tmgAdsPerf("mark",["adverts_requested_"+r]),P.src=R.url;var N=document.getElementsByTagName("script")[0];N.parentNode.insertBefore(P,N)};window.tmgAdsGetMetaTag=function(r){try{var H=null;if(null!==document.getElementsByName(r)[0]&&void 0!==document.getElementsByName(r)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+r+"): document.getElementsByName('"+
r+"')[0] exists"),document.getElementsByName(r)[0].content.length>0&&(H=document.getElementsByName(r)[0].content.toLowerCase(),H="tmgads.articleid"==r?decodeURIComponent(document.getElementsByName(r)[0].content):decodeURIComponent(document.getElementsByName(r)[0].content.toLowerCase()),tmgAdsLog("tmgAdsGetMetaTag("+r+'): "'+H+'"')),"tmgads.keywords"==r)if(null!==H){H=H.split(",");for(var K=0;K<H.length;K++)String.prototype.trim?H[K]=H[K].trim():null!==typeof H[K]?H[K]=H[K].replace(/^\s\s*/,"").replace(/\s\s*$/,
""):tmgAdsLog("tmgAdsGetMetaTag("+r+'): tmp[i] is null -\x3e "'+H[K]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+r+'): tmgads.keywords -\x3e "'+H[K]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+r+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+r+"): document.getElementsByName('"+r+"')[0] does not exist -\x3e "+H);return H}catch(R){tmgAdsLog("ERROR: tmgAdsGetMetTag("+r+") failed -\x3e error\x3d"+R.message)}};window.tmgAds=window.tmgAds||{};window.tmgAds.log=window.tmgAds.log||
[];window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}}}var I={name:"polar",ver:"7.0",date:"2017-09-07",url:"https://plugin.mediavoice.com/mediaconductor/mc.js",callbackFn:function(){O()}};I.id=I.name;tmgAdsLoadJS(I.id,I.url,I.callbackFn)};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"MARKETING: Subs-Election-Tracking [v1.0]","disabled":false,"id":39142661,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketingsubselectiontrackingv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!--\nStart of DoubleClick Floodlight Tag: Please do not remove\nActivity name of this tag: The Telegraph - All Page Visits\nURL of the webpage where the tag is expected to be placed: http://www.telegraph.co.uk/\nThis tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\nCreation Date: 03/31/2015\n--\x3e\n\x3cscript type\x3d"text/javascript"\x3e\nvar axel \x3d Math.random() + "";\nvar a \x3d axel * 10000000000000;\ndocument.write(\'\x3cifr\'+\'ame src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3dallpage;ord\x3d\' + a + \'?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/ifr\'+\'ame\x3e\');\n\x3c/script\x3e\n\x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll","telegraphproductiontop.filters.AllUrlsUnderHttpWwwTelegraphCoUkNewsGeneralElection2015"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"name":"COMMERCE: DigiDip [2.0]","disabled":false});var F="telegraphproductiontop.tags.commercedigidip20.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n/*\n1.0: Initial release.\n2.0: new version has multple version of the script for aem/aem-galleries/escenic, fixed typos, rolled out to escenic\n*/\n(function(){\n  //////////////////////////////////////////////////////////////\n  var tag \x3d {\n    name        : 'DIGIDIP',\n    ver         : '2.0',\n    date        : '2017-05-11',\n    debug       : false,\n    status      : 'init',\n    type        : 'script',\n    loc         : 'script',\n    url         : false,\n    urls         : {\n      aem     : 'https://static.digidip.net/telegraph.js?loc\x3d'+window.location.href,\n      gallery : 'https://static.digidip.net/telegraph2.js?loc\x3d'+window.location.href,\n      escenic : 'https://static.digidip.net/telegraph3.js?loc\x3d'+window.location.href\n    },\n    classes     : '', // blank string if no class name.       \n    count       : 0,\n    attributes  : [], // attributes to attach to the tag, each entry should be an array of two values, kay/val eg; ['data-client-id','XljfhhtlndnMVmu']\n    matched     : false,\n    delay       : 2000,\n    cms         : window.tmgAds.page.cms,\n    pagetype    : window.tmgAds.page.pagetype,\n    pagetypes   : ['article','story','gallery','video','live'], // the pagetypes this ad needs to run on\n      performance   : {\n      ts_complete    : 0,\n      ts_requested   : 0,\n      tm_load        : 0\n    }\n  };\n  if(typeof window.tmgAds \x3d\x3d 'undefined'){\n    logit('WARNING: tmgAds is not defined');\n  }\n  //debug, make this work in debug envs.\n  if(tag.debug \x26\x26 typeof window.tmgAds \x3d\x3d 'undefined'){\n    window.tmgAds \x3d {performance:[],metrics:{},dfp:{site:'test'}};\n  }\n  //\n  tag.pretag \x3d function(){\n    tag.status \x3d 'pretag';\n    logit('Pre-tag execution');\n    // ascertain which tag to use:\n    // telegraph.js  - AEM\n    // telegraph2.js - AEM galleries\n    // telegraph3.js - ESCENIC\n    if(window.tmgAds.page.cms \x3d\x3d 'aem'){\n      if(window.tmgAds.page.pagetype \x3d\x3d 'gallery'){\n        logit('Project - Galleries');\n        tag.url \x3d tag.urls.gallery;\n      } else {\n        logit('Project - AEM');\n        tag.url \x3d tag.urls.aem;\n      }\n    }\n    if(window.tmgAds.page.cms \x3d\x3d 'escenic'){\n        logit('Project - Escenic');\n        tag.url \x3d tag.urls.escenic;\n    }\n    // now set the site tag - we set this late due to possible race condition\n    ///////////////////\n    for(i in tag.pagetypes){\n      if(tag.pagetype \x3d\x3d tag.pagetypes[i]){\n        tag.matched \x3d true;\n        logit('Matched Site: YES - '+tag.pagetype+' - '+tag.pagetypes[i]+' - '+tag.url);\n      } else {\n        logit('Matched Site: NO  - '+tag.pagetype+' - '+tag.pagetypes[i]);\n      }\n    }\n  };\n  tag.postag \x3d function(){\n    logit('Post-tag execution');\n  };\n  //////////////////////////////////////////////////////////////\n  // functions\n  function timer(){\n    var tmp \x3d Date.now();\n    if(typeof window.performance !\x3d 'undefined'){\n      if(typeof window.performance.now !\x3d 'undefined'){\n        tmp \x3d window.performance.now(); \n      }\n     }\n     return Number(tmp);\n  }\n  function logit(msg){\n    if(tag.debug){\n      console.log(tag.name+':'+tag.ver+':'+tag.status+': '+msg);\n    }\n  }\n  function actionTag(tag, action){\n    // this function records various actions being completed by the script. It's used to collect data about the script and it's performance\n    // currently only expecting 'complete' to be the only action, this provides scalability\n    tag.status \x3d action;\n    tag.performance['ts_'+action] \x3d timer();\n    logit(action+' - '+(tag.performance['ts_'+action]/1000).toFixed(5));\n    // do this if tag is loaded/complete\n    if(tag.status \x3d\x3d\x3d 'complete'){\n      tag.postag();\n      tag.performance.tm_load             \x3d (tag.performance.ts_complete - tag.performance.ts_start);\n      window.tmgAds.performance[tag.name] \x3d tag.performance;\n    }\n  }\n  function loadTag(tag){\n    actionTag(tag,'start');\n    tag.tag           \x3d document.createElement(tag.type);\n    tag.tag.id        \x3d tag.name;\n    tag.tag.className \x3d tag.classes;\n    // add any attributes from tag.attributes\n    for(i in tag.attributes){\n      logit('Adding attributes to tag: '+tag.attributes[i][0]+'\x3d'+tag.attributes[i][1]);\n      tag.tag.setAttribute(tag.attributes[i][0],tag.attributes[i][1]);\n    }\n    tag.tag.onload \x3d function(){\n      actionTag(tag,'complete');\n      logit('Time Start   : '+(tag.performance['ts_start']/1000).toFixed(5));\n      logit('Time Complete: '+(tag.performance['ts_complete']/1000).toFixed(5));\n      logit('Time To Load : '+(tag.performance['tm_load']/1000).toFixed(5));\n    };\n    // set tag url\n    tag.tag.src \x3d tag.url;\n    //http://stackoverflow.com/questions/12113412/dynamically-inject-javascript-file-why-do-most-examples-append-to-head/12113657#12113657\n    if(tag.type \x3d\x3d\x3d 'iframe'){\n      logit('Type \x3d IFRAME: '+tag.url);\n      tag.tag.width   \x3d '1';\n      tag.tag.height  \x3d '1';\n      tag.tag.style.display \x3d 'none';\n    } else {\n      logit('Type \x3d SCRIPT: '+tag.url);     \n    }\n    // if tag.loc is script then insert this before first script tag in page\n    if(tag.type\x3d\x3d\x3d'script' \x26\x26 tag.loc\x3d\x3d\x3d'script'){\n      logit('Inserting script tag before first script tag in page');\n      tag.scriptarray \x3d document.getElementsByTagName('script')[0];\n      tag.scriptarray.parentNode.insertBefore(tag.tag,tag.scriptarray);\n    } else {\n      logit('Appending tag to '+tag.loc);\n      document.getElementsByTagName(tag.loc)[0].appendChild(tag.tag);\n    }\n    if(tag.type\x3d\x3d\x3d'iframe'){\n      logit('Inserting iframe into '+tag.loc);\n      document.getElementsByTagName('body')[0].appendChild(tag.tag);\n    }\n  }\n  //////////////////////////////////////////////////////////////\n  // Now lets call this aftr a set period (tag.setTimeout)\n  if(typeof window.tmgAds !\x3d 'undefined' \x26\x26 typeof window.tmgAds.page !\x3d 'undefined' \x26\x26 typeof window.tmgAds.page.pagetype !\x3d 'undefined'){\n    if(tag.pagetypes.indexOf(window.tmgAds.page.pagetype) \x3e- 1){\n      logit('SUCCESS: Page has matched targeting criteria, loading in '+tag.delay+'ms:');\n      tag.pretag();\n      if(tag.matched){\n        loadTag(tag);\n      } else {\n        logit('WARNING: No tag called as site not matched');\n      }\n    } else {\n      logit('WARNING: Page has NOT matched targeting criteria -\x3e pagetype not matched: '+window.tmgAds.page.pagetype);\n    }\n  } else {\n    logit('WARNING: Page has NOT matched targeting criteria -\x3e tmgAds.page.pagetype not defined: ');\n  }\n})();\n\x3c/script\x3e";
f.addClientFiltersList([]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"EDITORIAL: Qmerce [v1.0]","disabled":false,"id":37911423,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.editorialqmercev10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript type\x3d"text/javascript" src\x3d"//static.qmerce.com/js/sdk/v1.1/apester-sdk.min.js"\x3e\x3c/script\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Twitter_Periscopix [v2.0]","disabled":false,"id":53478819,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketingtwitter_periscopixv20.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript src\x3d"//platform.twitter.com/oct.js" type\x3d"text/javascript"\x3e\x3c/script\x3e\n\x3cscript type\x3d"text/javascript"\x3etwttr.conversion.trackPid(\'ntofc\', { tw_sale_amount: 0, tw_order_quantity: 0 });\x3c/script\x3e\n\x3cnoscript\x3e\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"display:none;" alt\x3d"" src\x3d"https://analytics.twitter.com/i/adsct?txn_id\x3dntofc\x26p_id\x3dTwitter\x26tw_sale_amount\x3d0\x26tw_order_quantity\x3d0" /\x3e\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"display:none;" alt\x3d"" src\x3d"//t.co/i/adsct?txn_id\x3dntofc\x26p_id\x3dTwitter\x26tw_sale_amount\x3d0\x26tw_order_quantity\x3d0" /\x3e\n\x3c/noscript\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.ExcludeAllUrls","telegraphproductiontop.filters.IncludeTravel"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ADVERTISING: Outbrain - Homepage [v1.0]","disabled":false,"id":30498664,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.advertisingoutbrainhomepagev10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3c!--Visual Revenue Reader Response Tracking Script (v6) --\x3e\n\x3cscript type\x3d\"text/javascript\"\x3e\n\tvar _vrq \x3d _vrq || [];\n\t_vrq.push(['id', 591]);\n\t_vrq.push(['automate', true]);\n\t_vrq.push(['track', function(){}]);\n\t(function(d, a){\n\t\tvar s \x3d d.createElement(a),\n\t\tx \x3d d.getElementsByTagName(a)[0];\n\t\ts.async \x3d true;\n\t\ts.src \x3d 'http://a.visualrevenue.com/vrs.js';\n\t\tx.parentNode.insertBefore(s, x);\n\t})(document, 'script');\n\x3c/script\x3e\n\x3c!-- End of VR RR Tracking Script - All rights reserved --\x3e";
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ADTECH: VisualDNA  [v1.0]","disabled":false,"id":8804475,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.adtechvisualdnav10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!-- VisualDNA Audience Analytics API Import --\x3e \n\x3cscript type\x3d"text/javascript"\x3e \n(function(){ var b, a; b\x3ddocument.createElement("script"); b.src\x3d"//a1.vdna-assets.com/analytics.js"; b.async\x3dtrue; a\x3ddocument.getElementsByTagName("head")[0]; a.insertBefore(b,a.firstChild); this.VDNA\x3dthis.VDNA||{}; this.VDNA.queue\x3dthis.VDNA.queue||[]; }()); \nVDNA.queue.push({apiKey:"telegraph.co.uk", method:"reportPageView", args:[window.location.href,document.referrer]}); \n\x3c/script\x3e \n\x3c!-- End of VisualDNA Audience Analytics API Import --\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Bing-Periscopix [v2.0]","disabled":false,"id":53478807,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.marketingbingperiscopixv20.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript\x3e(function(w,d,t,r,u){var f,n,i;w[u]\x3dw[u]||[],f\x3dfunction(){var o\x3d{ti:"4047056"};o.q\x3dw[u],w[u]\x3dnew UET(o),w[u].push("pageLoad")},n\x3dd.createElement(t),n.src\x3dr,n.async\x3d1,n.onload\x3dn.onreadystatechange\x3dfunction(){var s\x3dthis.readyState;s\x26\x26s!\x3d\x3d"loaded"\x26\x26s!\x3d\x3d"complete"||(f(),n.onload\x3dn.onreadystatechange\x3dnull)},i\x3dd.getElementsByTagName(t)[0],i.parentNode.insertBefore(n,i)})(window,document,"script","//bat.bing.com/bat.js","uetq");\x3c/script\x3e\x3cnoscript\x3e\x3cimg src\x3d"//bat.bing.com/action/0?ti\x3d4047056\x26Ver\x3d2" height\x3d"0" width\x3d"0" style\x3d"display:none; visibility: hidden;" /\x3e\x3c/noscript\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Amazon [v1.0]","disabled":false,"id":8804477,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketingamazonv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3c!-- Start of Amazon Publisher Studio Loader --\x3e  \x3c!-- Do not modify the following code directly! You should create a modified segment via Associates Publisher Central and copy it over --\x3e  \n\x3cscript\x3e  window.amznpubstudioDomainId \x3d \"telegraphcouk-21#0c2c504f-e759-406c-a7d2-c17027e5debe#GB\";  window.amznpubstudioTag \x3d \"telegraphtechlinks-21\";  \x3c/script\x3e  \n\x3cscript type\x3d\"text/javascript\"\x3e \n(function() { \n        var amazonScriptTag \x3d document.createElement('script'); \n        amazonScriptTag.type \x3d 'text/javascript'; \n        amazonScriptTag.async \x3d true; \n        amazonScriptTag.id \x3d \"amazonscript\"; \n        amazonScriptTag.src \x3d 'http://ps-eu.amazon-adsystem.com/scripts/aps-base.min.js'; \n        var s \x3d document.getElementsByTagName('script')[0]; \n        s.parentNode.insertBefore(amazonScriptTag, s); \n})(); \n\x3c/script\x3e\x3c!-- End of Amazon Publisher Studio Loader --\x3e";
f.addClientFiltersList(["telegraphproductiontop.filters.TestArticleFilter"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: Google Adwords-Periscopix [v1.0]","disabled":false,"id":42277921,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketinggoogleadwordsperiscopixv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!-- Google Code for Remarketing Tag --\x3e\n\x3c!--------------------------------------------------\nRemarketing tags may not be associated with personally identifiable information or placed on pages related to sensitive categories. See more information and instructions on how to setup the tag on: http://google.com/ads/remarketingsetup\n---------------------------------------------------\x3e\n\x3cscript type\x3d"text/javascript"\x3e\n/* \x3c![CDATA[ */\nvar google_conversion_id \x3d 971994445;\nvar google_custom_params \x3d window.google_tag_params;\nvar google_remarketing_only \x3d true;\n/* ]]\x3e */\n\x3c/script\x3e\n\x3cscript type\x3d"text/javascript" src\x3d"//www.googleadservices.com/pagead/conversion.js"\x3e\n\x3c/script\x3e\n\x3cnoscript\x3e\n\x3cdiv style\x3d"display:inline;"\x3e\n\x3cimg height\x3d"1" width\x3d"1" style\x3d"border-style:none;" alt\x3d"" src\x3d"//googleads.g.doubleclick.net/pagead/viewthroughconversion/971994445/?value\x3d0\x26amp;guid\x3dON\x26amp;script\x3d0"/\x3e\n\x3c/div\x3e\n\x3c/noscript\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":true,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"OPERATIONS: Cookie Notification Script [v1.0]","disabled":false,"id":27755975,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.operationscookienotificationscriptv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n        var cookieHolder \x3d document.createElement("div"),\n                mainBody \x3d document.getElementsByTagName("body")[0];\n \n        cookieHolder.style.webkitTransition \x3d "all .3s";\n        cookieHolder.style.MozTransition \x3d "all .3s";\n        cookieHolder.style.transition \x3d "all .3s";\n        cookieHolder.style.height \x3d "0";\n        cookieHolder.style.overflow \x3d "hidden";\n \n        mainBody.insertBefore(cookieHolder, mainBody.childNodes[0]);\n \n        function cookieTop() {\n            var cookieConsent \x3d document.getElementById("qb_cookie_consent_main");\n            if (cookieConsent \x3d\x3d\x3d null) {\n                setTimeout(cookieTop, 500);\n                return;\n            }\n            cookieHolder.appendChild(cookieConsent);\n            cookieHolder.style.height \x3d "76px";\n            cookieRemove();\n           \n            setTimeout(function() {\n                cookieHolder.parentNode.removeChild(cookieHolder);\n                cookieHolder \x3d null;\n            }, 15000);\n        }\n   \n        function cookieRemove() {\n            var cookieConsent \x3d document.getElementById("qb_cookie_consent_main");\n            if (cookieConsent !\x3d null) {\n                setTimeout(cookieRemove, 250);\n                return;\n            }\n             \n            if (cookieHolder !\x3d null) {\n                cookieHolder.parentNode.removeChild(cookieHolder);\n            }\n             \n        }\n \n        cookieTop();\n    \x3c/script\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"name":"ANALYTICS: Comscore [v3.0]","disabled":false});var F="telegraphproductiontop.tags.analyticscomscorev30.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n/*\nComScore\n3.0 - now fires on pageLoad\n*/\n(function(){\n  function tmgAdsTimer(){\n    var tmp \x3d Date.now();\n    if(typeof window.performance !\x3d 'undefined'){\n      if(typeof window.performance.now !\x3d 'undefined'){\n        var tmp \x3d window.performance.now(); \n      }\n     }\n     // tmp is now a value in miliseconds\n     return Number(tmp);\n  }  \n  \n  var addListener    \x3d document.addEventListener || document.attachEvent, removeListener \x3d document.removeEventListener || document.detachEvent, eventName \x3d document.addEventListener ? \"DOMContentLoaded\" : \"onreadystatechange\";\n  addListener.call(document, eventName, function(){\n    if(eventName \x3d\x3d\x3d \"DOMContentLoaded\" || (eventName \x3d\x3d\x3d \"onreadystatechange\" \x26\x26 document.readyState \x3d\x3d\x3d \"complete\")){\n      var tag \x3d {\n        name        : 'COMSCORE',\n        ver         : '3.0',\n        date        : '2016-11-09',\n        status      : 'init',\n        site        : tmgAds.dfp.site,\n        location    : 'head', // location of where to insefrt this script head/body/ID\n        url         : (document.location.protocol \x3d\x3d 'https:' ? 'https://sb' : 'http://b') + '.scorecardresearch.com/beacon.js',\n        performance  : {\n          tsTagStart     : tmgAdsTimer(),\n          tsTagRequested : 0,\n          tsTagEnd       : 0,\n          tmTag          : 0,\n        }\n      };\n      //console.log(tag.name+\": \"+tag.status);\n      //console.log(tag.name+\": site \x3d \"+tag.site);\n      // add some perromance metrics, NB: we can get the current timetstamp from tmgAdsTimer()\n      window._comscore \x3d [];\n      window._comscore.push({\n        c1: \"2\",\n        c2: \"6035736\",\n        c3: \"\",\n        options: {\n          url_append: \"comscorekw\x3d\" + tag.site\n        }\n      });\n      var script \x3d  document.createElement('script');\n      if(script.readyState){  //IE\n        script.onreadystatechange \x3d function(){\n          if(script.readyState \x3d\x3d \"loaded\" || script.readyState \x3d\x3d \"complete\"){\n            script.onreadystatechange \x3d null;\n            tag.status \x3d 'complete';  \n            tag.performance.tsTagEnd \x3d tmgAdsTimer();\n            tag.performance.tmTag    \x3d tag.performance.tsTagEnd - tag.performance.tsTagStart;\n            tmgAds.performance[tag.name] \x3d tag.performance;\n            //console.log(tag.name+': '+tag.status);\n          }\n        };\n      } else {  //Others\n        script.onload \x3d function(){\n          tag.status \x3d 'complete';\n          tag.performance.tsTagEnd \x3d tmgAdsTimer();\n          tag.performance.tmTag    \x3d tag.performance.tsTagEnd - tag.performance.tsTagStart;\n          tmgAds.performance[tag.name] \x3d tag.performance;\n          //console.log(tag.name+': '+tag.status);\n      };\n      }\n      script.src \x3d tag.url;\n      tag.status \x3d 'requested';\n      //console.log(tag.name+\": \"+tag.status);\n      tag.performance.tsTagRequested \x3d tmgAdsTimer();\n      document.getElementsByTagName(\"script\")[0].parentNode.insertBefore(script, document.getElementsByTagName(\"script\")[0]);\n      var qcdata \x3d {qacct:'p-gyXAHFFgnNQDj', uid:'USER-ID-HERE'};\n    }\n  });\n})();\n\x3c/script\x3e";f.addClientFiltersList([]);
f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":true,"name":"MARKETING: Subs-ElectionPages-Tracking-Only [v1.0]","disabled":false,"id":39142673,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketingsubselectionpagestrackingonlyv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!--\nStart of DoubleClick Floodlight Tag: Please do not remove\nActivity name of this tag: The Telegraph - General Election Page Visit\nURL of the webpage where the tag is expected to be placed: http://www.telegraph.co.uk/news/general-election-2015/\nThis tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\nCreation Date: 03/31/2015\n--\x3e\n\x3cscript type\x3d"text/javascript"\x3e\nvar axel \x3d Math.random() + "";\nvar a \x3d axel * 10000000000000;\ndocument.write(\'\x3cifr\'+\'ame src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3delecpage;ord\x3d\' + a + \'?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/ifr\'+\'ame\x3e\');\n\x3c/script\x3e\n\x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.ExcludeAllUrls","telegraphproductiontop.filters.AllUrlsUnderHttpWwwTelegraphCoUkNewsGeneralElection20151"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"name":"ADTECH: Test Script"});var F="telegraphproductiontop.tags.adtechtestscript.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!--//\nADTECH: test Script\n1.000: Empty\n//--\x3e\n\n\x3cscript type\x3d"text/javascript"\x3e\n///*  Copyright 2015 Logentries - Please view license at https://raw.github.com/logentries/le_js/master/LICENSE */\n//\'use strict\';(function(b,e){"function"\x3d\x3d\x3dtypeof define\x26\x26define.amd?define(function(){return e(b)}):"object"\x3d\x3d\x3dtypeof exports?("object"\x3d\x3d\x3dtypeof global\x26\x26(b\x3dglobal),module.exports\x3de(b)):b.LE\x3de(b)})(this,function(b){function e(a){var c\x3da.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,q\x3da.page_info,e\x3da.token,g\x3da.print,f\x3da.no_format,r;r\x3d"undefined"\x3d\x3d\x3dtypeof XDomainRequest?a.ssl:"https:"\x3d\x3d\x3db.location.protocol?!0:!1;var k;k\x3db.LEENDPOINT?b.LEENDPOINT:f?"webhook.logentries.com/noformat":"js.logentries.com/v1";k\x3d(r?"https://":"http://")+k+"/logs/"+e;var h\x3d[],l\x3d!1,s\x3d!1;if(a.catchall){var t\x3db.onerror;b.onerror\x3dfunction(a,b,d){m({error:a,line:d,location:b}).level("ERROR").send();return t?t(a,b,d):!1}}var p\x3dfunction(){var a\x3db.navigator||{doNotTrack:void 0},c\x3db.screen||{};return{url:(b.location||{}).pathname,referrer:document.referrer,screen:{width:c.width,height:c.height},window:{width:b.innerWidth,height:b.innerHeight},browser:{name:a.appName,version:a.appVersion,cookie_enabled:a.cookieEnabled,do_not_track:a.doNotTrack},platform:a.platform}},u\x3dfunction(){var a\x3dnull,a\x3dArray.prototype.slice.call(arguments);if(0\x3d\x3d\x3da.length)throw Error("No arguments!");return a\x3d1\x3d\x3d\x3da.length?a[0]:a},m\x3dfunction(a){var b\x3du.apply(this,arguments),d\x3d{event:b};"never"\x3d\x3d\x3dq||s\x26\x26"per-entry"!\x3d\x3dq||(s\x3d!0,"undefined"\x3d\x3d\x3dtypeof b.screen\x26\x26"undefined"\x3d\x3d\x3dtypeof b.browser\x26\x26m(p()).level("PAGE").send());c\x26\x26(d.trace\x3dc);return{level:function(a){if(g\x26\x26"undefined"!\x3d\x3dtypeof console\x26\x26"PAGE"!\x3d\x3da){var b\x3dnull;"undefined"!\x3d\x3dtypeof XDomainRequest\x26\x26(b\x3dd.trace+" "+d.event);try{console[a.toLowerCase()].call(console,b||d)}catch(c){console.log(b||d)}}d.level\x3da;return{send:function(){var a\x3d[],b\x3dJSON.stringify(d,function(b,d){if("undefined"\x3d\x3d\x3dtypeof d)return"undefined";if("object"\x3d\x3d\x3dtypeof d\x26\x26null!\x3d\x3dd){var c;a:{for(c\x3d0;c\x3ca.length;c++)if(d\x3d\x3d\x3da[c])break a;c\x3d-1}if(-1!\x3d\x3dc)return"\x3c?\x3e";a.push(d)}return d});l?h.push(b):n(e,b)}}}}};this.log\x3dm;var n\x3dfunction(a,b){l\x3d!0;var d;d\x3d"undefined"!\x3d\x3dtypeof XDomainRequest?new XDomainRequest:new XMLHttpRequest;d.constructor\x3d\x3d\x3dXMLHttpRequest?d.onreadystatechange\x3dfunction(){4\x3d\x3d\x3dd.readyState\x26\x26(400\x3c\x3dd.status?(console.error("Couldn\'t submit events."),410\x3d\x3d\x3dd.status\x26\x26console.warn("This version of le_js is no longer supported!")):(301\x3d\x3d\x3dd.status\x26\x26console.warn("This version of le_js is deprecated! Consider upgrading."),0\x3ch.length?n(a,h.shift()):l\x3d!1))}:d.onload\x3dfunction(){0\x3ch.length?n(a,h.shift()):l\x3d!1};d.open("POST",k,!0);d.constructor\x3d\x3d\x3dXMLHttpRequest\x26\x26(d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.setRequestHeader("Content-type","application/json"));d.overrideMimeType\x26\x26d.overrideMimeType("text");d.send(b)}}function p(a){var b,c\x3d{ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"\x3d\x3d\x3dtypeof a)for(var f in a)c[f]\x3da[f];else throw Error("Invalid parameters for createLogStream()");if(null\x3d\x3d\x3dc.token)throw Error("Token not present.");b\x3dnew e(c);var g\x3dfunction(a){if(b)return b.log.apply(this,arguments);throw Error("You must call LE.init(...) first.");};return{log:function(){g.apply(this,arguments).level("LOG").send()},warn:function(){g.apply(this,arguments).level("WARN").send()},error:function(){g.apply(this,arguments).level("ERROR").send()},info:function(){g.apply(this,arguments).level("INFO").send()}}}var c\x3d{},f\x3dfunction(a){if("string"!\x3d\x3dtypeof a.name)throw Error("Name not present.");if(c.hasOwnProperty(a.name))throw Error("A logger with that name already exists!");c[a.name]\x3dnew p(a);return!0};return{init:function(a){var b\x3d{name:"default"};if("object"\x3d\x3d\x3dtypeof a)for(var c in a)b[c]\x3da[c];else if("string"\x3d\x3d\x3dtypeof a)b.token\x3da;else throw Error("Invalid parameters for init()");return f(b)},createLogStream:f,to:function(a){if(!c.hasOwnProperty(a))throw Error("Invalid name for logStream");return c[a]},destroy:function(a){"undefined"\x3d\x3d\x3dtypeof a\x26\x26(a\x3d"default");delete c[a]},log:function(){for(var a in c)c[a].log.apply(this,arguments)},warn:function(){for(var a in c)c[a].warn.apply(this,arguments)},error:function(){for(var a in c)c[a].error.apply(this,arguments)},info:function(){for(var a in c)c[a].info.apply(this,arguments)}}});\n////////////////\n//// Initialise LE\n//LE.init(\'94ab592c-23cf-4de6-8bcb-2543bb6b56d4\');\n//LE.log("eScenic::desktop:: "+document.location.href);\n\x3c/script\x3e';
f.addClientFiltersList([]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"locationPlaceHolder":"END","name":"ADTECH: OpenX User Synch [v1.0]","description":"Delivers an invisible iframe into the page. The iframe then attempts to fire off up to N (in the square brackets of the tag name) image calls that act as user/cookie synching calls to other ad-systems."});var F="telegraphproductiontop.tags.adtechopenxusersynchv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="\x3cscript type\x3d\"text/javascript\"\x3e\n  console.log('ADTECH: OpenX User/Cookie Synch');\n\x3c/script\x3e\n\x3ciframe src\x3d'https://us-u.openx.net/w/1.0/pd?ph\x3dbbb82fae-1d27-4d90-bb10-e24164ecd7bc\x26plm\x3d5' width\x3d'0' height\x3d'0' style\x3d'display:none;'\x3e\x3c/iframe\x3e";
f.addClientFiltersList([]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"name":"ADBLOCK: Oriel [v1.5]"});var F="telegraphproductiontop.tags.adblockorielv15.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent="";f.addClientFiltersList([]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){if(typeof window.tmgAdsLog!="function"){window.tmgAdsEvent=function(I,r){var H="tmgAds:"+I;var K=new CustomEvent(H);document.dispatchEvent(K)};
window.tmgAdsLog=function(I,r){if(void 0!==typeof tmgAds){var H={time:("00"+(tmgAdsTimer()/1E3).toFixed(5)).slice(-9),callee:null,extra:r,styling:"",css:{none:"background: #FFFFFF; color: #000000",alert:"background: #D4A6A6; color: #000000",success:"background: #B2D8B2; color: #000000",error:"background: #FFB2B2; color: #000000",warning:"background: #FFE4B2; color: #000000",optimizely:"background: #FFDD37: color: #000000",event:"background: #C0CEDC; color: #000000"},msg:I};arguments.callee.caller&&
(H.callee=arguments.callee.caller.name),H.msg="%c[TMG-GPT]["+H.time+"]["+(H.callee+"                         ").substr(0,25)+"]: "+H.msg,H.styling=H.css.none,"ALERT"==I.substr(0,5)&&(H.styling=H.css.alert),"OPTIMIZELY"==I.substr(0,10)&&(H.styling=H.css.optimizely),"SUCCESS"==I.substr(0,7)&&(H.styling=H.css.success),"ERROR"==I.substr(0,5)&&(H.styling=H.css.error),"WARNING"==I.substr(0,7)&&(H.styling=H.css.warning),"EVENT"==I.substr(0,5)&&(H.styling=H.css.event),"INFO"==I.substr(0,4)&&(H.styling=H.css.info),
tmgAds.log.push(H.msg)}};window.tmgAdsPerf=function(I,r){if(void 0!==window.RUM){if(tmgAdsLog("SUCCESS: RUM installed.... go go go go! - "+I+" - "+r[0]),tmgAds.log.push("Performance: RUM Installed - "+I+" - "+r[0]),"now"==I)return RUM.now();if("mark"==I)return tmgAds.metrics[r[0]]=tmgAdsTimer(),RUM.mark(r[0]);if("measure"==I)return RUM.measure(r[0],r[1],r[2])}else if(void 0!==window.performance){if(tmgAdsLog("WARNING: RUM NOT installed.... using window.performance API instead! - "+I+" - "+r[0]),tmgAds.log.push("Performance: RUM Not installed, using performance API - "+
I+" - "+r[0]),"now"==I)return window.performance.now();if("mark"==I)return tmgAds.metrics[r[0]]=tmgAdsTimer(),window.performance.mark(r[0]);if("measure"==I)return window.performance.measure(r[0],r[1],r[2])}else{if(tmgAdsLog("WARNING: RUM NOT installed AND window.performance not supported... - "+I+" - "+r[0]),tmgAds.log.push("Performance: No RUM, No perrformance API - "+I+" - "+r[0]),"now"==I)return RUM.now();if("mark"==I)return void(tmgAds.metrics[r[0]]=tmgAdsTimer());if("measure"==I)return}};window.tmgAdsTimer=
function(){var I=!1;return I=void 0!==window.RUM&&void 0!==window.RUM.now?window.RUM.now():void 0!==window.performance&&void 0!==window.performance.now?window.performance.now():Date.now(),parseFloat(I.toFixed(3))};window.tmgAdsLoadJS=function(I,r,H){var K={name:I,status:"start",type:"text/javascript",url:r,performance:{loadjsStarted:tmgAdsTimer(),loadjsRequested:0,loadjsLoaded:0}};tmgAdsEvent(I+":"+K.status);var R=document.createElement("script");R.type="text/javascript",R.async=!0,R.onload=function(){K.status=
"loaded",tmgAdsEvent(I+":"+K.status),K.performance.loadjsLoaded=tmgAdsTimer(),tmgAdsPerf("mark",["adverts_loaded_"+I]),tmgAds.metrics[I]||(tmgAds.metrics[I]={});for(var N in K.performance)tmgAds.metrics[I][N]=K.performance[N];tmgAds.metrics[I].loadjsLatency=parseFloat((tmgAds.metrics[I].loadjsLoaded-tmgAds.metrics[I].loadjsStarted).toFixed(3)),"function"==typeof H&&H()},K.status="requested",K.performance.loadjsRequested=tmgAdsTimer(),tmgAdsEvent(I+":"+K.status),tmgAdsPerf("mark",["adverts_requested_"+
I]),R.src=K.url;var P=document.getElementsByTagName("script")[0];P.parentNode.insertBefore(R,P)};window.tmgAdsGetMetaTag=function(I){try{var r=null;if(null!==document.getElementsByName(I)[0]&&void 0!==document.getElementsByName(I)[0]){if(tmgAdsLog("tmgAdsGetMetaTag("+I+"): document.getElementsByName('"+I+"')[0] exists"),document.getElementsByName(I)[0].content.length>0&&(r=document.getElementsByName(I)[0].content.toLowerCase(),r="tmgads.articleid"==I?decodeURIComponent(document.getElementsByName(I)[0].content):
decodeURIComponent(document.getElementsByName(I)[0].content.toLowerCase()),tmgAdsLog("tmgAdsGetMetaTag("+I+'): "'+r+'"')),"tmgads.keywords"==I)if(null!==r){r=r.split(",");for(var H=0;H<r.length;H++)String.prototype.trim?r[H]=r[H].trim():null!==typeof r[H]?r[H]=r[H].replace(/^\s\s*/,"").replace(/\s\s*$/,""):tmgAdsLog("tmgAdsGetMetaTag("+I+'): tmp[i] is null -\x3e "'+r[H]+'"'),tmgAdsLog("tmgAdsGetMetaTag("+I+'): tmgads.keywords -\x3e "'+r[H]+'"')}else tmgAdsLog("tmgAdsGetMetaTag("+I+"): tmgads.keywords -\x3e tmgads.keywords content is not set")}else tmgAdsLog("tmgAdsGetMetaTag("+
I+"): document.getElementsByName('"+I+"')[0] does not exist -\x3e "+r);return r}catch(K){tmgAdsLog("ERROR: tmgAdsGetMetTag("+I+") failed -\x3e error\x3d"+K.message)}};window.tmgAds=window.tmgAds||{};window.tmgAds.log=window.tmgAds.log||[];window.tmgAds.metrics=window.tmgAds.metrics||{ads:{}}}var O={name:"oriel",ver:"1.5",date:"2017-08-30",url:"https://zm232.com/hjuu8tk6z9pld1z8x3ucq1fk.js",callbackFn:function(){}};O.id=O.name+"-"+O.ver;tmgAdsLoadJS(O.id,O.url,O.callbackFn)};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"NOT_END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"ANALYTICS: Travel_Hotel_Remarketing [v1.0]","disabled":false,"id":53478792,"locked":false,"locationObject":"HEAD"});var F="telegraphproductiontop.tags.analyticstravel_hotel_remarketingv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3c!--\nStart of DoubleClick Floodlight Tag: Please do not remove\nActivity name of this tag: The Telegraph - Travel (Remarketing)\nURL of the webpage where the tag is expected to be placed: http://http://www.telegraph.co.uk/travel/hotel/\nThis tag must be placed between the \x3cbody\x3e and \x3c/body\x3e tags, as close as possible to the opening tag.\nCreation Date: 11/20/2015\n--\x3e\n\x3cscript type\x3d"text/javascript"\x3e\nvar axel \x3d Math.random() + "";\nvar a \x3d axel * 10000000000000;\ndocument.write(\'\x3ciframe src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3dthete000;dc_lat\x3d;dc_rdid\x3d;tag_for_child_directed_treatment\x3d;ord\x3d\' + a + \'?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\');\n\x3c/script\x3e\n\x3cnoscript\x3e\n\x3ciframe src\x3d"https://4798504.fls.doubleclick.net/activityi;src\x3d4798504;type\x3dvisit0;cat\x3dthete000;dc_lat\x3d;dc_rdid\x3d;tag_for_child_directed_treatment\x3d;ord\x3d1?" width\x3d"1" height\x3d"1" frameborder\x3d"0" style\x3d"display:none"\x3e\x3c/iframe\x3e\n\x3c/noscript\x3e\n\x3c!-- End of DoubleClick Floodlight Tag: Please do not remove --\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.ExcludeAllUrls","telegraphproductiontop.filters.IncludeTravelHotel"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();
(function(){var E=qubit.opentag.CustomTag;var f=new E({"dedupe":false,"locationPlaceHolder":"END","needsConsent":false,"active":true,"url":"","timeout":5E3,"async":true,"usesDocumentWrite":false,"name":"MARKETING: LinkedIn Lead Accelerator [v1.0]","disabled":false,"id":44564669,"locked":false,"locationObject":"BODY"});var F="telegraphproductiontop.tags.marketinglinkedinleadacceleratorv10.Tag";qubit.Define.clientNamespace(F,f);f.htmlContent='\x3cscript type\x3d"text/javascript"\x3e\n_bizo_data_partner_id \x3d "8512";\n\x3c/script\x3e\n\x3cscript type\x3d"text/javascript"\x3e\n(function()\n{ var s \x3d document.getElementsByTagName("script")[0]; var b \x3d document.createElement("script"); b.type \x3d "text/javascript"; b.async \x3d true; b.src \x3d (window.location.protocol \x3d\x3d\x3d "https:" ? "https://sjs" : "http://js") + ".bizographics.com/insight.min.js"; s.parentNode.insertBefore(b, s); }\n)();\n\x3c/script\x3e\n\x3cnoscript\x3e\n\x3cimg height\x3d"1" width\x3d"1" alt\x3d"" style\x3d"display:none;" src\x3d"//www.bizographics.com/collect/?pid\x3d8512\x26fmt\x3dgif" /\x3e\n\x3c/noscript\x3e';
f.addClientFiltersList(["telegraphproductiontop.filters.DefaultFilterMatchAll"]);f.addClientVariablesMap({});f.addParameters([]);f.genericDependencies=[];f.addClientDependenciesList([]);f.pre=function(){};f.script=function(){};f.post=function(){}})();(function(){try{qubit.opentag.Main.run()}catch(E){try{console.error("Errors during opentag main runtime.",E)}catch(f){}}})();