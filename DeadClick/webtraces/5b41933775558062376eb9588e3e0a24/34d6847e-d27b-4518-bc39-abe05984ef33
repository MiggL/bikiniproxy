define(["jquery","underscore","backbone","./pager.tmpl"],function(a,b,c,d){d=b.template(d);var e=c.View.extend({events:{"click .pager-next:not(.is-disabled)":"next","click .pager-prev:not(.is-disabled)":"prev"},currentIndex:0,total:0,pages:0,initialize:function(a){b.extend(this,a.options),this.$itemContainer=this.$("ul"),this.$pagerItems=this.$itemContainer.children(),this.$scroller=this.$itemContainer.wrap("<div class='pager-scroller'></div>").parent(),this.$el.append(d()),this.$next=this.$(".pager-next"),this.$prev=this.$(".pager-prev"),this.total=this.$pagerItems.length,this.pages=Math.ceil(this.total/this.pageBy)},change:function(a){var b=this.currentIndex+a,c=this.$pagerItems.eq(b).position();this.currentIndex=b,c=c?c.left:0,this.$scroller.animate({scrollLeft:c},this.speed),this.render()},resize:function(){var a=this.$pagerItems.eq(0).width();this.change(0)},render:function(){this.$next.toggleClass("is-disabled",this.atEnd()),this.$prev.toggleClass("is-disabled",this.atStart())},next:function(a){this.change(this.pageBy)},prev:function(a){this.change(-1*this.pageBy)},atStart:function(){return this.currentIndex===0},atEnd:function(){return this.currentIndex/this.pageBy===this.pages-1}},{defaults:{selector:".pager",pageBy:2,speed:300}}),f={Pager:e,init:function(c){return c=b.extend({},e.defaults,c),a(c.selector).each(function(){a.data(this,"pager",new e({el:this,options:c}))})}};return f})