define(["jquery"],function(e){function t(z,w){if(z.indexOf(w)>-1){var A=z.split(w);var x=e("<ul>");for(var y in A){x.append(e("<li>").text(A[y]))}return x}return false}function v(w,y){var x=w.search(y);if(x>-1){return true}return false}function h(w,z){var y=0,x=-1;z=encodeURIComponent(z);if(typeof w!=="undefined"){x=w.indexOf(z);if(x>-1){w=w.substring(x);if(w.indexOf("&")>-1){w=w.substring(0,w.indexOf("&"))}y=w.substring(w.indexOf("=")+1)}}return y}function p(w,A,y){var x=w,z="";A=encodeURIComponent(A);y=encodeURIComponent(y);if(typeof w!=="undefined"){if(w.indexOf(A)>-1){z=A+"="+y;x=w.replace(new RegExp(A+"=\\w+","gi"),z)}else{z=(w.indexOf("?")<0)?"?":"&";z+=A+"="+y;x+=z}}return x}function l(y,x){y=decodeURIComponent(y);x=decodeURIComponent(x);var z=y.search(x),w=z>-1?y.substring(z-1,z):"-";if(w==="?"){y=y.replace(x,"?")}else{if(w==="&"){y=y.replace(x,"")}}return encodeURIComponent(y)}function u(y,B){var z=y.indexOf(B),x="",A="",w=y;if(z>-1){x=y.substring(0,z);A=y.substring(z);z=A.indexOf("&");if(z>-1){A=A.substring(z+1);w=x+A}else{if(x.lastIndexOf("&")===x.length-1){x=x.substring(0,x.lastIndexOf("&"))}w=x}}return w}function j(x){var w=x.indexOf("?");var y;if(w>-1){y=x.substring(w+1)}return y}function n(w){if(w.indexOf("?")>0){return w.substring(0,w.indexOf("?"))}return w}function m(w){if(w!=null&&w.hasClass("disabled")){return true}return false}function r(w){if(w!=null&&w.hasClass("disabled")){w.removeClass("disabled")}}function a(w){if(w!=null&&!w.hasClass("disabled")){w.addClass("disabled")}}function d(y){var x=new RegExp("#(.*[?&]|)"+y+"=([^&]+)(&|$)");var w=window.location.hash.match(x);return(w?f(w[2]):"")}function f(w){return e("<div/>").text(w).html().replace(/'/,"&#x27;").replace(/"/,"&quot;").replace(/\//,"")}function i(w,x){return setTimeout(w,x)}function o(w){clearTimeout(w)}var g=(function(){var w={};return function(z,x,y){if(!y){y="Don't call this twice without a uniqueId"}if(w[y]){clearTimeout(w[y])}w[y]=setTimeout(z,x)}})();function s(x){if(x==null||x===""){return false}var w=new RegExp("(P\\.?O\\.?\\s?|post\\s+office )+Box\\s","i");if(x.match(w)){return true}else{return false}}function c(){var y=e("#br-related-searches-widget").length;if(y>0){var x=e("#br-related-searches-widget a").length;if(x>5){var w=LANG_SEARCH_WIDGET.SEARCH_WIDGET_MORE;var z=e('<a id="more" href="javascript:void(0)" >'+w+"</a>");z.bind("click",function(){e("#more").hide();e("div.br-related-query").last().show()});if(e("#more").length===0){e("div.br-related-query").last().hide().after(z)}}}}function k(B){var z={};if(B.nodeType==1){var D=B.attributes.length;if(D>0){z.attributes={};for(var y=0;y<D;y++){var w=B.attributes.item(y);z.attributes[w.nodeName]=w.nodeValue}}}else{if(B.nodeType==3){z=B.nodeValue}}if(B.hasChildNodes()){for(var A=0;A<B.childNodes.length;A++){var E=B.childNodes.item(A);var C=E.nodeName;if(typeof(z[C])=="undefined"){z[C]=k(E)}else{if(typeof(z[C].push)=="undefined"){var x=z[C];z[C]=[];z[C].push(x)}z[C].push(k(E))}}}return z}var b=[{dType:"ios",qString:"ipad"},{dType:"ios",qString:"ipod"},{dType:"ios",qString:"iphone"},{dType:"android",qString:"android"},{dType:"wp7",qString:"windows phone"},{dType:"w8",qString:"windows nt 6.2"}];function q(){var y,x,w,z;y=navigator.userAgent.toLowerCase();x=0;w=b.length;z="default";for(x;x<w;x++){if(y.indexOf(b[x].qString)>=0){z=b[x].dType;break}}return z}return{createHTMLList:t,setURLParam:p,getURLParam:h,hasURLParam:v,removeURLParamPair:l,removeURLParam:u,getURLParams:j,getBaseURL:n,isDisabledButton:m,enableButton:r,disableButton:a,getParamFromHash:d,startTimer:i,stopTimer:o,checkPOBOXAddress:s,showSearchWidgetMoreLink:c,xmlToJson:k,waitForFinalEvent:g,getDeviceType:q}});