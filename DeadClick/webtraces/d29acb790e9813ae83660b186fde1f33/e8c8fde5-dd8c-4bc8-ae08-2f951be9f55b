var IntelliSuggest=function(){var p=null,q=null,o=null,k=null,j=[];return{init:function(a){if(a)if(typeof a=="object"){if(a.siteId)this.siteId=a.siteId;if(a.domain)this.domain=a.domain;if(a.context)this.context=a.context;if(a.seed)this.seed=a.seed;if(typeof a.afterContentPlacement==="function")this.afterContentPlacement=a.afterContentPlacement}else p=a;if(!this.siteId){window.console&&console.log("Site ID not specified");return false}if(!this.domain)if(document.domain){this.domain=document.domain;
a=document.domain.split(/\./);if(a.length>1&&a[a.length-2]!="co")this.domain="."+a[a.length-2]+"."+a[a.length-1]}this.loadContent()},setContext:function(a){q=a},setSeed:function(a){o=a},getSeed:function(a){o=a},viewPage:function(){this.trace("a=viewPage")},search:function(a){var b="a=search";if(a.query)b+="&query="+encodeURIComponent(a.query);if(a.filters)b+="&filters="+encodeURIComponent(a.filters);if(a.sort)b+="&sort="+encodeURIComponent(a.sort);if(a.page)b+="&page="+encodeURIComponent(a.page);
this.trace(b)},viewCategory:function(a){var b="a=viewCategory";if(a.code)b+="&code="+encodeURIComponent(a.code);if(a.name)b+="&name="+encodeURIComponent(a.name);this.trace(b)},viewItem:function(a){if(a.sku){var b="a=viewItem";if(a.sku)b+="&sku="+encodeURIComponent(a.sku);if(a.name)b+="&name="+encodeURIComponent(a.name);if(a.category)b+="&category="+encodeURIComponent(a.category);this.trace(b)}},checkout:function(a){var b="a=checkout";if(a.step)b+="&step="+encodeURIComponent(a.step);this.trace(b)},
haveItem:function(a){a.sku&&a.qty&&a.price&&a.sku.toString().length>0&&a.qty>0&&j.push(a)},inCompare:function(){this.updateItems("compare")},inBasket:function(){this.updateItems("basket")},inWishList:function(){this.updateItems("wishlist")},inSale:function(){var a={},b="";if(arguments.length>=1&&typeof arguments[0]=="object")a=arguments[0];if(a.orderId)b+="&orderId="+encodeURIComponent(a.orderId);if(a.customerId)b+="&customerId="+encodeURIComponent(a.customerId);if(a.total)b+="&total="+encodeURIComponent(a.total);
if(a.shipping)b+="&shipping="+encodeURIComponent(a.shipping);if(a.tax)b+="&tax="+encodeURIComponent(a.tax);if(a.discount)b+="&discount="+encodeURIComponent(a.discount);if(a.city)b+="&city="+encodeURIComponent(a.city);if(a.state)b+="&state="+encodeURIComponent(a.state);if(a.country)b+="&country="+encodeURIComponent(a.country);this.updateItems("sale",b)},updateItems:function(a,b){if(j.length<1){window.console&&console.log("updateItems(): No items provided");return false}for(var d="a="+encodeURIComponent(a),
c=0;c<j.length;++c)d+="&item="+encodeURIComponent(j[c].sku)+";"+encodeURIComponent(j[c].qty)+";"+encodeURIComponent(j[c].price)+";"+(j[c].name?encodeURIComponent(j[c].name):"");if(b)d+=b;this.trace(d)},trace:function(a){if(!this.siteId){window.console&&console.log("Site ID not specified");return false}var b=("https:"==document.location.protocol?"https:":"http:")+"//d3cgm8py10hi0z.cloudfront.net/is.gif?";a+="&s="+encodeURIComponent(this.siteId);if(this.cookiesEnabled()){a+="&u="+encodeURIComponent(this.getUserId());
a+="&ce=1"}else a+="&ce=0";a+="&pt="+encodeURIComponent(document.title);a+="&v="+this.version;a+="&x="+Math.floor(Math.random()*2147483647);if(""!=document.referrer)a+="&r="+encodeURIComponent(document.referrer);b+=a;(new Image(1,1)).src=b;this.traced=true},getUserId:function(){if(!k){k=this.getCookie("_isuid");if(!k||k.length==0){k=this.generateUserId();this.setCookie("_isuid",k)}}return k},generateUserId:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
b=[],d;b[8]=b[13]=b[18]=b[23]="-";b[14]="4";for(var c=0;c<36;c++)if(!b[c]){d=0|Math.random()*16;b[c]=a[c==19?d&3|8:d]}return b.join("")},setCookie:function(a,b){try{var d=new Date;d.setTime(d.getTime()+31536E6);var c=a+"="+b+"; expires="+d.toGMTString()+"; path=/;";if(this.domain)c+="domain="+this.domain+";";document.cookie=c}catch(e){}},getCookie:function(a){try{a=a+"=";var b=document.cookie.split(";"),d,c;for(d=0;d<b.length;d++){for(c=b[d];c.charAt(0)==" ";)c=c.substring(1,c.length);if(c.indexOf(a)==
0)return c.substring(a.length,c.length)}}catch(e){}return null},cookiesEnabled:function(){if(null!=this.cookiesEnabled)return this.cookiesEnabled;var a=navigator.cookieEnabled?true:false;if(typeof navigator.cookieEnabled=="undefined"&&!a){document.cookie="_istc";a=document.cookie.indexOf("_istc")!=-1?true:false}return this.cookiesEnabled=a},addOnloadEvent:function(a){var b=window.onload;window.onload=typeof window.onload!="function"?a:function(){b&&b();a()}},addUnloadEvent:function(a){var b=window.onunload;
window.onunload=typeof window.onunload!="function"?a:function(){b&&b();a()}},placeContent:function(a){for(var b=0;b<this.placementDivs.length;b++)for(var d=0;d<a.length;d++)if(this.placementDivs[b].getAttribute("name")==a[d].name)this.placementDivs[b].innerHTML=a[d].content;this.afterContentPlacement&&this.afterContentPlacement()},loadContent:function(){if(this.context){this.placementDivs=this.getElementsByClassName("intellisuggest");if(this.placementDivs.length>0){var a=("https:"==document.location.protocol?
"https:":"http:")+"//www.intellisuggest.com/widget/index/get-content?";a+="cid="+encodeURIComponent(this.siteId);a+="&ctx="+encodeURIComponent(this.context);if(this.seed)a+=Object.prototype.toString.call(this.seed)==="[object Array]"?"&seed="+encodeURIComponent(this.seed.map(encodeURIComponent).join(" ")):"&seed="+encodeURIComponent(this.seed);for(var b=0;b<this.placementDivs.length;b++){var d=this.placementDivs[b].getAttribute("seed");if(d&&d.length){a+="&cnt["+b+"][n]="+encodeURIComponent(this.placementDivs[b].getAttribute("name"));
a+="&cnt["+b+"][s]="+encodeURIComponent(d)}}if(this.cookiesEnabled()){a+="&uid="+encodeURIComponent(this.getUserId());a+="&ce=1"}else a+="&ce=0";if(""!=document.referrer)a+="&r="+encodeURIComponent(document.referrer);a+="&v="+this.version;b=document.getElementsByTagName("head")[0]||document.documentElement;d=document.createElement("script");d.src=a;b.insertBefore(d,b.firstChild)}}},getElementsByClassName:function(a,b,d){getElementsByClassName=document.getElementsByClassName?function(c,e,f){c=(f||
document).getElementsByClassName(c);e=e?new RegExp("\\b"+e+"\\b","i"):null;f=[];for(var h,g=0,i=c.length;g<i;g+=1){h=c[g];if(!e||e.test(h.nodeName))f.push(h)}return f}:document.evaluate?function(c,e,f){e=e||"*";f=f||document;var h=c.split(" "),g="",i=document.documentElement.namespaceURI==="http://www.w3.org/1999/xhtml"?"http://www.w3.org/1999/xhtml":null;c=[];for(var m,l=0,n=h.length;l<n;l+=1)g+="[contains(concat(' ', @class, ' '), ' "+h[l]+" ')]";try{m=document.evaluate(".//"+e+g,f,i,0,null)}catch(r){m=
document.evaluate(".//"+e+g,f,null,0,null)}for(;e=m.iterateNext();)c.push(e);return c}:function(c,e,f){e=e||"*";f=f||document;var h=c.split(" ");c=[];e=e==="*"&&f.all?f.all:f.getElementsByTagName(e);f=[];var g;g=0;for(var i=h.length;g<i;g+=1)c.push(new RegExp("(^|\\s)"+h[g]+"(\\s|$)"));i=0;for(var m=e.length;i<m;i+=1){h=e[i];g=false;for(var l=0,n=c.length;l<n;l+=1){g=c[l].test(h.className);if(!g)break}g&&f.push(h)}return f};return getElementsByClassName(a,b,d)}}}();
