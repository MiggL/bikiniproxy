/*
 * Copyright (C) 2011 America Online Inc. All rights reserved.
 * $Revision: 1.46 $
 */
var mc=mc||{};mc.is=(function(){var a={};a.array=function(b){return b?this.number(b.length)&&this.fn(b.splice):false};a.bad=function(b){return b===null||b===undefined||b===""};a.bool=function(b){return typeof b==="boolean"};a.def=function(b){return !(typeof b==="undefined")};a.fn=function(b){return typeof b==="function"};a.nil=function(b){return b===null};a.number=function(b){return typeof b==="number"&&isFinite(b)
};a.object=function(b){return(b&&(typeof b==="object"||this.fn(b)))||false};a.string=function(b){return typeof b==="string"};return a}());mc.s2c=(function(jQuery){var x={};var j=jQuery;var attempts=0;var omnitureTitle=document.title;var omnitureFailed="S2C_SendFailed";var omnitureInvoked="S2C_Invoked";var omnitureRateLimited="S2C_ClientRateLimited";var omnitureSent="S2C_SucessfullySent";var protocol=("https:"==document.location.protocol?"https":"http");var aolcdn="http://s.aolcdn.com/aoldotcom-releases/aolshare";
var omnitureUrl=aolcdn+"/omniuni.js";var omnitureVarsUrl=protocol+"://aolmobile.aol.com/js/mmomniture.js";var requestPending=false;var language=navigator.userLanguage?navigator.userLanguage.substring(0,2):(navigator.language?navigator.language.substring(0,2):"en");x.p={};x.p.servletUrl=protocol+"://s2c.aol.com/s2c/";x.p.widgetUrl=aolcdn+"/s2c/";x.p.routableUrl="https://mrs.aol.com/mrs/routable";x.en=function(){x.p.countries=[{n:"United States (+1)",c:1}];x.p.appleLegal="iPad®, iPhone® and iPod® are registered trademarks of Apple Inc.";
x.p.cancel="Cancel";x.p.characters="%s Characters ";x.p.dataRates="Message and data rates may apply. Send <b>STOP</b> to end, <b>HELP</b> for help.";x.p.disclaimer="By clicking 'Send,' you represent that you are the account holder for the number you provided (or have the account holder's permission to receive a text message) and agree that the AOL <a href='http://legal.aol.com/tos'>Terms</a> and <a href='http://privacy.aol.com'>Privacy Policy</a> apply.";x.p.emailHint="";x.p.error="Sorry, there was a problem. Please try later.";
x.p.errorEmail="Please enter a valid email address.";x.p.errorEmpty="Please enter a message.";x.p.errorLength="Please use a shorter message.";x.p.errorNumber="Please use a valid 10-digit mobile number.";x.p.errorRateLimited="Sorry, no more messages may be sent today.";x.p.errorLandline="Sorry, that doesn't look like a mobile number.";x.p.errorCarrier="Sorry, your carrier isn't supported.";x.p.errorUnknown="Sorry, we can't determine your mobile carrier.";x.p.errorForeign="Sorry, international numbers are not supported yet.";
x.p.errorMisc="That number might not be reachable. We can try.";x.p.errorSent="Your message was sent to %s.";x.p.feedback="Feedback";x.p.from="From";x.p.googleLegal="Android is a trademark of Google Inc. Use of this trademark is subject to <a target='legal' href='http://www.google.com/permissions/index.html'>Google Permissions</a>.";x.p.help="Help";x.p.message="Check this out!";x.p.messageHint="";x.p.msLegal="Microsoft and Windows&copy; Phone are trademarks of the Microsoft group of companies.";x.p.phoneHint="Mobile Number";
x.p.privacy="Privacy";x.p.rimLegal="The Trademark BlackBerry® and RIM® are owned by Research In Motion Limited and are registered in the United States and may be pending or registered in other countries. AOL is not endorsed, sponsored, affiliated with or otherwise authorized by Research In Motion Limited.";x.p.scanTheCode="";x.p.send="Send";x.p.subtitle="Enter your mobile number to get the link!";x.p.title="Send to Mobile";x.p.titleFailed="Send Failed";x.p.titleSending="Sending...";x.p.titleSent="Message Sent";
x.p.appleLegalLink="";x.p.googleLegalLink="";x.p.msLegalLink="";x.p.rimLegalLink=""};function setSetters(){for(var m in x.p){eval("x['"+m+"']=function(v){x.p['"+m+"']=v;return x;};")}}x.translate=function(l,f){if(l=="en"||!mc.is.string(l)||l.length>2){x.en();setSetters();return x}if(mc.is.fn(x[l])){if(x.p.trace){alert("Used: "+l)}x[l]();setSetters();return x}j.ajax({url:x.p.widgetUrl+"js/mc.s2c."+l+".min.js",cache:true,async:false,dataType:"script",scriptCharset:"UTF-8",success:function(){if(x.p.trace){alert("Received: "+l)
}if(x[l]){x[l]()}},complete:function(){if(mc.is.fn(f)){f()}}});return x};x.reset=function(){x.p.account="aolsend2cell";x.p.background="";x.p.backgroundColor="#FFFFFF";x.p.border="5px solid #333333 ";x.p.department="S2CW: Generic: Widget";x.p.feedbackUrl="http://feedback.aol.com/rs/rs.php?sid=send2cell";x.p.helpUrl="http://aoltxt.com/help";x.p.iconUrl=null;x.p.id=1;x.p.key="ao1hAlIqg1S_G9tq";x.p.linkColor="#5599CC";x.p.linkUrl=null;x.p.overlay="#000000";x.p.privacyUrl="http://about.aol.com/aolnetwork/aol_pp";
x.p.sendColorDark="#666666";x.p.sendColorLight="#DDDDDD";x.p.textColor="#959595";x.p.titleColor="#464646";x.p.ad=false;x.p.qr=false;x.p.report=true;x.p.roundIcon=true;x.p.shorten=true;x.p.summarize=false;x.p.trace=false;x.p.rateLimit=4;x.p.timeout=20*1000;x.p.height=0;x.p.left=0;x.p.length=50;x.p.top=0;x.p.width=320;x.translate(language)};x.reset();function getQRCode(){if(x.p.qr&&(x.p.linkUrl&&x.p.linkUrl.match(/^http/))){var src="https://chart.googleapis.com/chart?chs=100x100&cht=qr&chld=L%7C0&chl="+encodeURI(x.p.linkUrl);
var qr=j('<div id="s2qrcode" title="'+x.p.linkUrl+'"><img src="'+src+'">'+x.p.scanTheCode+"</div>");qr.fadeIn(2000);j("#s2elements").prepend(qr)}}function setContent(){var countries='<select id ="s2country" name="c1">';for(var n in x.p.countries){countries+='<option value="'+x.p.countries[n].c+'">'+x.p.countries[n].n+"</option>"}countries+="</select>";var w=j("#s2c-widget");w.empty().append('<a id="x" class="closable"></a><form action="javascript:mc.s2c.validate()" name="s2form">'+(!x.p.iconUrl?"":'<div class="s2icon"><img src="'+x.p.iconUrl+'" width="57" height="57">'+((x.p.roundIcon==true)?'<div class="overlay"></div>':"")+"</div>")+'<div id="s2title">'+x.p.title+'</div><div id="s2subtitle">'+x.p.subtitle+'</div><div id="s2elements">'+countries+'<input id="s2phone" type="text" name="p1" maxlength="10" value="'+x.p.phoneHint+'" tabindex="0">'+((x.p.emailHint)?'<input id="s2email" type="text" name="e1" value="'+x.p.emailHint+'" maxlength="30" tabindex="0">':"")+((x.p.messageHint)?'<textarea id="s2message" type="text" name="m1" rows="3" cols="40" maxlength="'+x.p.length+'" onfocus="this.select();" onkeyup="javascript:mc.s2c.checkLength(this)">'+x.p.messageHint+'</textarea><div id="s2limit"></div>':"")+'<input id="s2send" class="button" type="button" onclick="javascript:mc.s2c.validate();" value="'+x.p.send+'"><input id="s2close" class="button closable" type="button" value="'+x.p.cancel+'"></div></form><div id="s2data"><a onclick="javascript:mc.s2c.showLegal();">'+x.p.dataRates+"</a></div>"+((x.p.disclaimer!="")?'<div id="s2disclaimer"><span>'+x.p.disclaimer+"</span> </div>":""));
if(document.documentMode==5){j("#s2phone").css("height","35px");j("#s2email").css("height","35px")}if(x.p.ad){return}w.append('<div id="s2links">'+((x.p.helpUrl!="")?'<a target="_blank" href="'+x.p.helpUrl+'">'+x.p.help+"</a> | ":"")+'<a target="_blank" href="'+x.p.privacyUrl+'">'+x.p.privacy+'</a> | <a target="_blank" href="'+x.p.feedbackUrl+'">'+x.p.feedback+"</a></div>");if(x.p.title.match(/android/i)){j("#s2disclaimer").append("<p>"+x.p.googleLegal+"</p>")}else{if(x.p.title.match(/blackberry|rim/i)){j("#s2disclaimer").append("<p>"+x.p.rimLegal+"</p>")
}else{if(x.p.title.match(/ipad|iphone|ipod/i)){j("#s2disclaimer").append("<p>"+x.p.appleLegal+"</p>")}else{if(x.p.title.match(/windows/i)){j("#s2disclaimer").append("<p>"+x.p.msLegal+"</p>")}}}}}function setGradient(o,from,to){o.css("background","-webkit-gradient(linear,left top,left bottom,from("+from+"),to("+to+"))");o.css("background","-moz-linear-gradient(top,"+from+","+to+")");o.css("filter","progid:DXImageTransform.Microsoft.gradient(startColorstr='"+from+"',endColorstr='"+to+"')")}function setStyles(){if(!x.p.countries){j("#s2country").css("display","none")
}var t=j("#s2title");t.css("color",x.p.titleColor);if(x.p.iconUrl){t.css("overflow","hidden").css("height","60px")}if(x.p.title&&x.p.iconUrl&&x.p.title.length<20){t.css("line-height","2.5em")}var widget=j("#s2c-widget");widget.height(x.p.height?x.p.height:"auto");if(x.p.width){widget.width(x.p.width)}j("#s2c-widget-mask").css("background-color",x.p.overlay);if(x.p.background!=""){widget.css("background",x.p.background)}widget.css("border",x.p.border).css("background-color",x.p.backgroundColor);j("#s2c-widget a").css("color",x.p.linkColor);
var s=j("#s2send");setGradient(s,x.p.sendColorLight,x.p.sendColorDark);s.mousedown(function(){setGradient(s,x.p.sendColorDark,x.p.sendColorLight)});s.mouseup(function(){setGradient(s,x.p.sendColorLight,x.p.sendColorDark)});if(navigator.appVersion.indexOf("MSIE")!=-1){j("#s2close").css("border","1px solid #666666");s.css("border","1px solid #666666")}}function setListeners(){j("#s2message").keyup(function(){typing=true;var l=j(this).val().length;var r=(x.p.length-l);if(r<20){j("#s2limit").fadeIn(500).html(x.p.characters.replace("%s",l+"/"+x.p.length)).css("color",(r<0?"#FF0000":"#959595"))
}else{j("#s2limit").fadeOut(500).empty()}if(l>x.p.length){showError(x.p.errorLength)}else{hideError()}});var p=j("#s2phone");p.focus(function(){j(this).toggleClass("focused");if(isNaN(this.value)){this.value=""}});p.blur(function(){j(this).toggleClass("focused");if(isNaN(this.value)||this.value==""){this.value=x.p.phoneHint}});p.keyup(function(e){if(this.value.match(/[^0-9]/g)){this.value=this.value.replace(/[^0-9]/g,"")}if(this.value.length==this.maxLength){if(this.value.match("([2-9][0-8]\\d)([2-9]\\d{6})")){if(requestPending){return
}requestPending=true;j.ajax({url:x.p.routableUrl+"?pn="+encodeURIComponent(this.value)+"&f=json&c=handleRoutableResponse",dataType:"jsonp",timeout:x.p.timeout,crossDomain:true})}else{showError(x.p.errorNumber);this.value="";return}}})}function sendRequest(){j("#s2send").attr("disabled","disabled");if(attempts++>x.p.rateLimit){showError(x.p.errorRateLimited,3000);sendOmnitureRequest(omnitureRateLimited);return}var url=x.p.servletUrl+"sendtocell.jsp?";url+="appkey="+encodeURIComponent(x.p.key)+"&appid="+encodeURIComponent(x.p.id)+"&phone="+encodeURIComponent(document.s2form.p1.value)+"&message="+encodeURIComponent(x.p.message);
if(x.p.messageHint){var msg="";if(document.s2form.m1.value!=x.p.messageHint){msg=document.s2form.m1.value}if(msg!=""){url+=encodeURIComponent(msg)}}if(x.p.countries){url+="&country="+encodeURIComponent(document.s2form.c1.value)}if(x.p.linkUrl){url+="&link="+encodeURIComponent(x.p.linkUrl);if(x.p.shorten==false){url+="&shorten=false"}}if(x.p.emailHint){var email=document.s2form.e1.value;if(email!=x.p.emailHint){url+="&from="+encodeURIComponent(email)}}if(x.p.trace){alert(url)}var t=j("#s2title");t.fadeOut(250,function(){t.html(x.p.titleSending).fadeIn(250)
});mc.s2c.timeoutHandle=setTimeout("mc.s2c.sendFailed()",x.p.timeout);j.ajax({url:url,dataType:"jsonp",timeout:x.p.timeout,crossDomain:true})}function sendOmnitureRequest(type){if(!x.p.report){return}omniture_account=x.p.account;omniture_dept=x.p.department;omniture_subdept=type;if(x.p.trace){alert(type)}document.title=x.p.title;j.getScript(omnitureVarsUrl,function(){if(x.p.trace){alert(omnitureVarsUrl)}});j.getScript(omnitureUrl,function(){document.title=omnitureTitle;if(x.p.trace){alert(omnitureUrl)
}})}function isValidEmail(){if(!x.p.emailHint){return true}if(x.p.emailHint==document.s2form.e1.value){return true}if(document.s2form.e1.value==""){return true}var reg=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(reg.test(trim(document.s2form.e1.value))==false){document.s2form.e1.focus();document.s2form.e1.value="";showError(x.p.errorEmail);return false}return true}function isValidMessage(){if(!x.p.messageHint){return true}if(document.s2form.m1.value.length>x.p.length){showError(x.p.errorLength);
return false}if(trim(document.s2form.m1.value)==x.p.messageHint||trim(document.s2form.m1.value).length==0){document.s2form.m1.focus();document.s2form.m1.value="";showError(x.p.errorEmpty);return false}return true}function isValidPhone(n){if(isNaN(n)||n.length!=10||!n.match("([2-9][0-8]\\d)([2-9]\\d{6})")){showError(x.p.errorNumber);$("#s2phone").val("").focus();return false}return true}function showError(m,t){var subtitle=j("#s2subtitle");subtitle.fadeOut(500,function(){subtitle.html(m).css("color","#FF0000").fadeIn(500)
});if(t>0){setTimeout("jQuery.modal.close()",t)}}function setSubtitle(m){var subtitle=j("#s2subtitle");subtitle.fadeOut(250,function(){subtitle.empty().append(m).css("color",x.p.textColor).fadeIn(250)})}function hideError(){j("#s2send").removeAttr("disabled");var subtitle=j("#s2subtitle");if(subtitle.text()==x.p.subtitle){return}subtitle.fadeOut(250,function(){subtitle.css("color","#959595").empty().append(x.p.subtitle).fadeIn(250)})}function trim(s){if(s!=null){return s.replace(/^\s\s*/,"").replace(/\s\s*j/,"")
}}x.checkLength=function(obj){var max=obj.getAttribute?parseInt(obj.getAttribute("maxlength")):"";if(obj.getAttribute&&obj.value.length>(max+10)){obj.value=obj.value.substring(0,max)}};x.handleRoutableResponse=function(data){if(x.p.trace){alert("Data: "+JSON.stringify(data))}if(!requestPending){return}requestPending=false;if(!data.response.statusDetailCode){return}var c=data.response.statusDetailCode;if(c==1000){hideError();return}if(c==3001){showError(x.p.errorNumber)}else{if(c==3003){showError(x.p.errorCarrier)
}else{if(c==3004){showError(x.p.errorLandline)}else{if(c==3005){showError(x.p.errorUnknown)}else{if(c==3006){showError(x.p.errorForeign)}else{showError(x.p.errorMisc)}}}}}};x.handleSendResponse=function(s){requestPending=false;clearTimeout(mc.s2c.timeoutHandle);if(x.p.trace){alert("Data: "+JSON.stringify(s))}if(s==4){var t=j("#s2title");t.fadeOut(250,function(){t.html(x.p.titleSent).fadeIn(250)});var u=j("#s2subtitle");u.css("color",x.p.textColor);var n=document.s2form.p1.value;setSubtitle(x.p.errorSent.replace("%s","+"+document.s2form.c1.value+" "+n.substring(0,3)+"-"+n.substring(3,6)+"-"+n.substring(6)));
if(x.p.summarize){if(x.p.emailHint!=""){var email=j("#s2email").val();if(email!=x.p.emailHint){u.after("<p>"+x.p.from+" "+email+"</p>")}}j("#s2subtitle").after("<p>"+x.p.message+"</p>");if(x.p.messageHint!=""){var msg="";if(document.s2form.m1.value!=x.p.messageHint){msg=document.s2form.m1.value}if(msg!=""){u.after("<p>"+msg+"</p>")}}if(x.p.linkUrl){u.after("<p>"+x.p.linkUrl+"</p>")}}j("#s2elements").slideUp(250);j("#s2links").slideUp(250);sendOmnitureRequest(omnitureSent)}else{if(s==5){j("#s2send").attr("enabled","enabled");
j("#s2title").html(x.p.titleFailed);showError(x.p.error);sendOmnitureRequest(omnitureFailed)}else{if(s==3){j("#s2title").html(x.p.titleFailed);showError(x.p.errorRateLimited,3000)}}}};x.init=function(){};x.close=function(){x.reset();j("#s2c-widget").fadeOut(500,function(){j("#s2c-widget-mask").fadeOut()});if(typeof(mc.s2c.timeoutHandle)!="undefined"){clearTimeout(mc.s2c.timeoutHandle)}};x.show=function(){x.init();if(mc.is.bad(x.p.message)||mc.is.bad(x.p.id)||mc.is.bad(x.p.key)){alert("Please set: id, key and message.");
return}omnitureTitle=document.title;setContent();setStyles();setListeners();getQRCode();var mask=j("#s2c-widget-mask");mask.css({width:j(document).width(),height:j(document).height()});mask.hide().fadeTo(500,0.5);var widget=j("#s2c-widget");widget.hide().fadeIn(500);j(window).resize(function(){widget.css("position","absolute");if(x.p.top==0){widget.css("top",(j(window).height()-widget.outerHeight())/2+j(window).scrollTop()+"px")}else{widget.css("top",x.p.top+"px")}if(x.p.left==0){widget.css("left",(j(window).width()-widget.outerWidth())/2+j(window).scrollLeft()+"px")
}else{widget.css("left",x.p.left+"px")}mask.css({width:j(window).width(),height:j(document).height()})});j(window).resize();j("a.closable, div.closable, input.closable").click(function(e){x.close()});mask.click(function(e){x.close()});j(window).scroll(function(){if(x.p.top==0){widget.animate({top:(j(window).height()-widget.outerHeight())/2+j(window).scrollTop()+"px"},{duration:500,queue:false})}else{widget.animate({top:j(window).scrollTop()+x.p.top+"px"},{duration:500,queue:false})}});j(document).keyup(function(e){if(e.keyCode==27){x.close()
}});sendOmnitureRequest(omnitureInvoked);setTimeout("jQuery('#s2subtitle').slideDown(500, function() {})",1000)};x.showLegal=function(m){var d=j("#s2disclaimer");if(d.is(":visible")){d.slideUp(500)}else{d.slideDown(500)}};x.sendFailed=function sendFailed(){var t=j("#s2title");t.fadeOut(500,function(){t.html(x.p.titleFailed).fadeIn(500)});showError(x.p.error)};x.revision=function(){var r="$Revision: 1.46 $";return r.substring(11,r.lastIndexOf(" "))};x.validate=function(){if(!isValidPhone(document.s2form.p1.value)){return
}if(!isValidEmail()){return}if(!isValidMessage()){return}sendRequest()};j(document).ready(function(){var e=document.createElement("link");e.setAttribute("rel","stylesheet");e.setAttribute("type","text/css");e.setAttribute("media","screen");e.setAttribute("href","https://s.aolcdn.com/aoldotcom-releases/aolshare/s2c/css/mc.s2c.css");if(typeof e!=undefined){document.getElementsByTagName("head")[0].appendChild(e)}var d=document.createElement("div");d.setAttribute("id","s2c-widget");var m=document.createElement("div");m.setAttribute("id","s2c-widget-mask");
if(typeof d!=undefined&&typeof m!=undefined){var b=document.getElementsByTagName("body")[0];b.appendChild(d);b.appendChild(m)}});return x}(jQuery));function handleSendResponse(a){if(a&&a.status){mc.s2c.handleSendResponse(a.status)}}function handleRoutableResponse(a){if(a){mc.s2c.handleRoutableResponse(a)}};