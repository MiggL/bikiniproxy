

if (typeof _tb_dis === 'undefined' || _tb_dis === null) {
    var _tb_dis = false;
}
if (!_tb_dis) {
    var pm_ppy = "hearstlocalnews-sfgatecom";

    var _pmep = '//widget.perfectmarket.com/';
    var _pmep_geo = '//geo.perfectmarket.com/';
    if (document.URL.indexOf('https://') > -1) {
        _pmep = _pmep.replace(/88\//gi, '90/');
        _pmep_geo = _pmep_geo.replace(/88\//gi, '90/');
    }
    var _pmpmk = pm_ppy + '/pmk-201749005.8.js';
    var _pmasync = true;
    var _pmoptimization = true;
    var _pmoptimizationmanipulation = true;
    var _pmhp = false;
    var _pmsb = false;

    function _pmloadfile(fileName) {

        if (_pmasync) {
            var js, elements = document.getElementsByTagName("head")[0];
            js = document.createElement("script");
            js.setAttribute("type", "text/javascript");
            js.setAttribute("src", fileName);
            js.setAttribute('async','');
            elements.appendChild(js);
        } else {
            document.writeln('<script src=' + fileName + '></script>');
        }
    }

    var pmk, pmglb, pmfa, pmad, pmdebug_c;
    pmglb = pmglb || null;
    pmfa = pmfa || null;
    pmad = pmad || null;
    pmdebug_c = pmdebug_c || null;
    pmk = pmk || null;
    var _pmenv = _tb_getUrlParameter('pmenv');
    //pm async
    var _pma = _tb_getUrlParameter('_pma');
    if (_pma == true) {
        _pmasync = true;
    }

    if (_pmenv && _pmenv == 'sandbox' && !_pmsb) {

        _pmep = '//widget.sandbox.perfectmarket.com/';
        _pmep_geo = '//geo.sandbox.perfectmarket.com/';
        var _tb_d = new Date();
        var _tb_rand = _tb_d.getTime();
        _pmpmk = pm_ppy + "/load.js?" + _tb_rand;
    }

    (function () {
        var sc = 'script', doc = document;
        _pmloadfile(_pmep + _pmpmk);
    })();
    function pmws_request_done() {
        var sc = "script", doc = document;
        if (doc.all && !window.opera) {
            doc.write('<' + sc + ' type="text/javascript" id="pm_contentloadtag" defer="defer" src="javascript:void(0)"><\/' + sc + '>');
            var pm_contentloadtag = doc.getElementById("pm_contentloadtag");
            if (pm_contentloadtag)pm_contentloadtag.onreadystatechange = function () {
                if (this.readyState == "complete") return;
            }
        }
        _pmloadfile(_pmep + _pmpmk);
    }


    function _tb_getUrlParameter(name) {
        var match = RegExp('[?&]' + name + '=([^&]*)').exec(window.location.search);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
    }


     /** Generated CJS **/ if (window.location.href.indexOf('blog.sfgate.com/') > -1) {
var _pm_ecd={ 
'sr' : '^(?:[^\/]+\/\/)?([^\.]+)',
'at' : '//div[@class="gallery-content"]//h5[@class="byline"]/span/text() | //div[@class="article-title"]//p[contains(@class,"byline")] | //div[contains(@id,"blogarticle")]//div[contains(@class, "byline")]//a/text()',
'ablw' : [", provided by"],
'opd' : ["author"]
};
} else {
var _pm_ecd={ 
'sx' : '//meta[@property="vf:section"]/@content | //div[contains(@id, "wrapper")]//div[contains(@class, "breadcrumb-wrapper")]//ul//li[1]/a',
'at' : '//div[@class="gallery-content"]//h5[@class="byline"]/span/text() | //div[@class="article-title"]//p[contains(@class,"byline")] | //div[contains(@id,"blogarticle")]//div[contains(@class, "byline")]//a/text()',
'ablw' : [", provided by"],
'opd' : ["author"]
};
}

var _tb_vpx = [ 
 {'xpath': '//div[contains(@class,"hearstPlayer playerEmbed0")]//iframe', 'attr': 'iframe'},
 {'xpath': '//div[@class="article-body"]//div[@class="s2nPlayerFrame"]/iframe', 'attr': 'iframe'},
 {'xpath': '//div[contains(@class,"hearst-jwplayer")]//div[contains(@class,"jw-media")]', 'attr': 'div'},
];


_tb_ext_xp = {   
    'facebook': [{
       'xpath': '//div[@class="ObitBody"]//div[@class="ShareElement"]',
       'attr': 'class'
   }
]
};


_pm_compute_pm_pgtp = function() {
    _pm_getCookie = function(v) {
        var i, x, y, c = document.cookie.split(';');
        for (i = 0; i < c.length; i++) {
            x = c[i].substr(0, c[i].indexOf('='));
            y = c[i].substr(c[i].indexOf('=') + 1);
            x = x.replace(/^\s+|\s+$/g, '');
            if (x == v) {
                return unescape(y);
            }
        }
    };

    _pm_isArray = function(v) {
        return Object.prototype.toString.apply(v) === '[object Array]';
    };
    _pm_isString = function(v) {
        return typeof v === 'string';
    };

    _pm_empty = function(v) {

        if (typeof v === 'undefined' || !v || v === 0 || v === undefined || v === null || v === '') {
            return true;
        } else if (_pm_isArray(v)) {
            if (v.length === 0) return true;
            else return false;
        } else if (_pm_isString(v)) {
            if (/^\s+$/.test(v)) return true;
            else return false;
        }

    };
    var domainRegex = /^https?:\/\/[^\/]+\//;
    var sess_r = _pm_getCookie("pm[sess_r]");
    var r;
    if (_pm_empty(sess_r)) {
        if (sess_r !== "") {
            r = document.referrer;
        }
    } else {
        r = sess_r;
    }
    r = r ? r.toLowerCase() : r;
    r = r.match(domainRegex) ? r.match(domainRegex)[0] : "";

    var page_url = document.URL;
    page_url = page_url ? page_url.toLowerCase() : page_url;

    var pm_isGalleryURL = page_url.match(/\/slideshow\/|\/gallery\//) !== null ? true : false;
    if (pm_isGalleryURL) return "";

    var pm_isArticleURL = page_url.match(/https?:\/\/(?!blog).*/) !== null ? true : false;
    var pm_isBlogURL = page_url.match(/https?:\/\/blog\..*/) !== null ? true : false;
    var pm_isRefReddit = r.match(/reddit\..*/) !== null ? true : false;

    var pm_isExcludedRefSource = ((r.match(/twitter\..*/) !== null) || (r.match(/t\.co\/.*/) !== null) || (r.match(/facebook\..*/) !== null) || (r.match(/msn\..*/) !== null) || (r.match(/bing\..*/) !== null) || (r.match(/sfgate\..*/) !== null) || (r.match(/outbrain\..*/) !== null) || (r === "")) ? true : false;
    if (pm_isRefReddit) {
        if (pm_isArticleURL) return "reddit_article";
        if (pm_isBlogURL) return "reddit_blogpage";
    }
     if (pm_isExcludedRefSource) return "excluded_ref";
    return "";

};

var pm_pgtp = _pm_compute_pm_pgtp();/** Generated CJS end **/ 
}