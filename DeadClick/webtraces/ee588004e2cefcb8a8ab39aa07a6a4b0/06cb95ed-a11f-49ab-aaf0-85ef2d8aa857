/*! scripts/single_media_image.js */
var $=jQuery;$(function(){function t(){r.contentBox=a.outerHeight(!0)-a.height(),r.contentHeight=a.height(),r.contentWidth=a.width(),r.imageHeight=l.height(),r.imageWidth=l.width()}function e(){t(),c()}function n(){s(),t(),c()}var i=$("body"),a=$(".l-content"),o=$("#loader"),l=$("#content-image"),u=$("#content-wrapper"),r={isFullsize:null,contentHeight:null,contentWidth:null,imageHeight:null,imageWidth:null,imageNaturalHeight:null,imageNaturalWidth:null,contentBox:null},c=function(){var t="cursor-zoom-in",e="cursor-zoom-out",n="",i="";return function(){var a;a=r.imageWidth<r.imageNaturalWidth?t:r.imageWidth+r.contentBox>r.contentWidth||r.imageHeight+r.contentBox>r.contentHeight||r.isFullsize?e:n,i!==a&&(l.removeClass(i),l.addClass(a),i=a)}}(),s=function(){var e="fullsized-content";return function(){(r.imageWidth<r.imageNaturalWidth||r.isFullsize)&&(r.isFullsize=!r.isFullsize,i.toggleClass(e),t(),a.css({minWidth:function(){return r.isFullsize?r.imageNaturalWidth+r.contentBox:""},minHeight:function(){return r.isFullsize?r.imageNaturalHeight+r.contentBox:""}}))}}();r.imageNaturalHeight=parseInt(l.attr("data-height"),10),r.imageNaturalWidth=parseInt(l.attr("data-width"),10),o.addClass("animate"),l.attr("src",l.attr("data-src")).on("click",n).one("load",function(){$(window).on("resize",e),o.remove(),l.addClass("ready"),t(),c(),o=null,u=null}),function(t){if(t){var e=$(document);e.on("keydown.saveImage",function(){var n=/mac/i.test(navigator.platform)?"metaKey":"ctrlKey",i=83;return function(a){a[n]&&a.keyCode===i&&(a.preventDefault(),t.submit(),e.off("keydown.saveImage"))}}())}}(document.getElementById("save_form"))});