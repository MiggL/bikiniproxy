var $jscomp={scope:{},findInternal:function(b,c,d){b instanceof String&&(b=String(b));for(var f=b.length,g=0;g<f;g++){var h=b[g];if(c.call(d,h,g,b))return{i:g,v:h}}return{i:-1,v:void 0}}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){if(d.get||d.set)throw new TypeError("ES3 does not support getters and setters.");b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};
$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(b,c,d,f){if(c){d=$jscomp.global;b=b.split(".");for(f=0;f<b.length-1;f++){var g=b[f];g in d||(d[g]={});d=d[g]}b=b[b.length-1];f=d[b];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(b,d){return $jscomp.findInternal(this,b,d).v}},"es6-impl","es3");jQuery(document).ready(function(){jQuery("#jqModal").jqm({ajax:"@href",trigger:".jqmify",onLoad:centerJQM,onHide:modalHide});jQuery(".jqmify").bind("contextmenu",function(){return!1})});
var Ebaum={refreshCounter:0,container:"mediaListColumn",galleryTimer:new Date,timeout:6E4,refreshAds:!1,adTimer:null,enableAdRefresh:function(){this.refreshAds=!0;jQuery(window).bind("scroll",Ebaum.enableScrollRefresh)},enableScrollRefresh:function(){jQuery(window).unbind("scroll",Ebaum.enableScrollRefresh);Ebaum.adRefresh()},adRefresh:function(){"undefined"!=typeof adArray&&1==this.refreshAds&&"function"==typeof googletag.pubads&&(this.refreshAds=!1,adArray.refreshable.forEach(refreshSlot),clearTimeout(this.adTimer),
this.adTimer=setTimeout(function(){Ebaum.enableAdRefresh()},this.timeout))},ajaxRefresh:function(b){0==this.refreshCounter%2&&"iPhone"!=navigator.platform&&"iPod"!=navigator.platform&&(b=(new Date).getTime(),5<=Math.round((b-this.galleryTimer.getTime())/1E3)&&(this.galleryTimer=new Date,this.refreshAds=!0,this.adRefresh(),"undefined"!=typeof adArray&&0==this.refreshCounter%4&&"function"==typeof googletag.pubads&&adArray.atfMedRect.forEach(refreshSlot)));this.refreshCounter++},fireComscore:function(b){"undefined"!=
typeof COMSCORE&&COMSCORE.beacon({c1:"2",c2:"15131799",c3:"",c4:b})},updateAnalytics:function(b){b||/:\/\/.*?(\/.*?)$/.exec(String(window.location))},changeListPage:function(b,c,d){null!=c&&(this.container=c);this.loadUri(b);"commentListHolder"==this.container&&jQuery("#commentList").html('<div class="widgetLoader"></div>');void 0!=d&&void 0!=d[2]&&"moderate-mature"==d[2]&&(EbaumScrollAd.type="mature");this.updateAnalytics(b)},loadUri:function(b){jQuery(".listingLoader").show();"function"===typeof history.pushState?
jQuery("#"+this.container).parent().load(b,function(){"commentListHolder"==Ebaum.container&&(offset=document.getElementById(Ebaum.container).offsetTop,120<offset&&(offset-=120),window.scrollTo(0,offset));jQuery(".listingLoader").hide()}):window.location=b},updateMessageCount:function(b){jQuery.getJSON("/message/getmailcount/",function(b){jQuery("#mailCount").text(b.cnt)})},setCookie:function(b,c,d){var f=new Date;f.setDate(f.getDate()+d);c=escape(c)+(null==d?"":"; expires="+f.toUTCString());document.cookie=
b+"="+c+"; path=/"},getCookie:function(b){b+="=";for(var c=document.cookie.split(";"),d=0;d<c.length;d++){for(var f=c[d];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return""},checkNewFeature:function(){jQuery.getJSON("/media/checknewfeature/",function(b){if(b.success){b=b.message;jQuery("#featureCount, #featureCountMini").html(b);jQuery("#featureCount, #featureCountMini").show();var c=document.title.split(")"),d="",d=c[1]?c[1]:c[0],f="("+b+") "+d;document.title=
f;var g=0,h=setInterval(function(){document.title=document.title!=f?f:"NEW!";g++;8==g&&clearInterval(h)},1500)}})}};Ebaum.adTimer=setTimeout(function(){Ebaum.enableAdRefresh()},Ebaum.timeout);
var EbaumTopMedia={launch:function(){jQuery(".topVideoNav li a").click(function(){jQuery("#topVideoList").html('<div id="topMediaLoader" class="topMediaLoader"></div>');var b="/media/topfive/"+jQuery(this).attr("id")+"/",c=this;jQuery("#topVideoList").load(b,function(){jQuery(".topVideoNav a.active").removeClass("active");jQuery(c).addClass("active")})})}},EbaumAllStarSubscribe=function(){jQuery(".allStarSubscribe").click(function(b){b=jQuery(this);var c=jQuery(b).attr("id").split("-");"subscribe"==
c[0]?jQuery.get("/user/subscribe/"+c[1]+"/",function(d){jQuery(b).html("undo");jQuery(b).attr("id","unsubscribe-"+c[1])}):jQuery.getJSON("/user/unsubscribe/"+c[1]+"/",function(d){jQuery(b).html("subscribe");jQuery(b).attr("id","subscribe-"+c[1])})})},EbaumMobile={mobile:!1,setHeader:function(){var b=jQuery(".headerNav").width()/2-47.5;jQuery(".mainLogo").css({left:b+"px"});jQuery(window).resize(function(){var b=jQuery(".headerNav").width()/2-47.5;jQuery(".mainLogo").css({left:b+"px"})})},setListings:function(){var b=
jQuery(".listingThumb a img").width()/1.4545;jQuery(".listingThumb a, .listingThumb img").height(b);jQuery(window).resize(function(){var b=jQuery(".listingThumb a img").width()/1.4545;jQuery(".listingThumb a, .listingThumb img").height(b)})},setAvatars:function(){var b=jQuery(".avatarLink").css("width");jQuery(".avatarLink, .avatarLink img").height(b);jQuery(window).resize(function(){var b=jQuery(".avatarLink img").width();jQuery(".avatarLink, .avatarLink img").height(b)})},addLoader:function(b){jQuery("#"+
b).html('<div class="listLoader alignC"><img src="/img/loadingBigWhiteMatte.gif" style="width:25px; height:25px;" /></div>')},paginateAjax:function(b,c){EbaumMobile.addLoader(c);jQuery("#"+c).load(b,function(){EbaumMobile.setListings();EbaumMobile.setAvatars()})}};function EbaumEnlarge(b){this.iPhone=b}EbaumEnlarge.prototype.enlarge=function(b){(new EbaumLightbox).launch(b,{currentIndex:1,imageCount:1});return!1};
var EbaumHistory={init:function(b){this.add(b);window.onpopstate=function(b){EbaumHistory.pop(b);EbaumListingNav.handlePop(b)}},add:function(b,c){data={url:b,extra:c};"function"===typeof history.pushState&&history.pushState(data,"",b)},pop:function(b){null!=b.state&&(url=b.state.url,Ebaum.loadUri(url))},change:function(b,c){data={url:b,extra:c};"function"===typeof history.pushState&&history.replaceState(data,"",b)}},EbaumAudio={currentPosition:null,currentState:null,autoPaused:0,sendEvent:function(b,
c){this.thisMovie("flashContainer").sendEvent(b,c)},getUpdate:function(b,c,d,f){"time"==b&&(this.currentPosition=c);"state"==b&&(this.currentState=c,0==this.currentState?jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audiopause.png"):jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audioplay.png"))},pauseToggle:function(){autoPaused=0==this.currentState?0:1;2==this.currentState?jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audiopause.png"):
jQuery("#globeAudio").attr("src","http://media.ebaumsworld.com/img/audioplay.png");this.sendEvent("playpause")},getCurrentPosition:function(){return 1E3*Math.round(this.currentPosition)},thisMovie:function(b){return-1!=navigator.appName.indexOf("Microsoft")?window[b]:document[b]}},EbaumVideo={isPlaying:!1,autoplayOn:!1,container:"flashContainer",suspended:!1,playerWidth:0,playerHeigh:0,playerReady:function(b,c,d){EbaumVideo.autoplayOn=EbaumVideo.thisMovie(EbaumVideo.container).getAutonext();EbaumVideo.autoplayOn?
EbaumVideo.turnAutoplayOn():EbaumVideo.turnAutoplayOff();jQuery("#autoplayToggle").show();jQuery("#autoplayToggle").click(function(){EbaumVideo.toggleAutoplay();EbaumVideo.sendEvent("autonext","js")})},thisMovie:function(b){return-1!=navigator.appName.indexOf("Microsoft")?window[b]:document.getElementById(b)},sendEvent:function(b,c){this.thisMovie(this.container).sendEvent(b,c)},getUpdate:function(b,c,d,f){"AUTONEXT"==b&&"postroll"==c&&this.toggleAutoplay();if("object"==typeof b)switch(b.newstate){case "PLAYING":this.suspended?
this.pausePlayer():this.isPlaying=!0;break;case "PAUSED":this.isPlaying=!1}},resizePlayer:function(){var b=jQuery(".mainContent").width(),c=Math.round(b/(EbaumVideo.playerWidth/EbaumVideo.playerHeight));600<c&&(c=600);EbaumVideo.playerWidth=b;EbaumVideo.playerHeight=c;EbaumVideo.thisMovie(EbaumVideo.container).width=b;EbaumVideo.thisMovie(EbaumVideo.container).height=c},pausePlayer:function(){this.sendEvent("PLAY","false");EbaumVideo.thisMovie(EbaumVideo.container).getPosition()},turnAutoplayOn:function(){jQuery("#autoplayToggle").removeClass("off");
jQuery("#autoplayToggle").html("Autoplay On");this.autoplayOn=!0},turnAutoplayOff:function(){jQuery("#autoplayToggle").addClass("off");jQuery("#autoplayToggle").html("Autoplay Off");this.autoplayOff=!1},toggleAutoplay:function(){jQuery("#autoplayToggle").hasClass("off")?this.turnAutoplayOn():this.turnAutoplayOff()}},EbaumColumnStick={initRightColumn:function(){var b=jQuery("#rightColumnStick"),c=jQuery("#rightColumnStick").offset().top,d=jQuery(".rightColumn"),f=32;d.length||(d=jQuery(".communityFeed"),
f=70);var g=jQuery(".featureFeed");g.length||(g=jQuery(".mainContent"));var h=!1,k=!1,l=!1;jQuery(document).ready(function(){});jQuery(window).bind("scroll",function(){if(!k){var m=jQuery(b).offset().top;m!=c&&(c=m);jQuery(d).height()<jQuery(g).height()-f&&jQuery(d).height(jQuery(g).height()-f)}m=jQuery(document).scrollTop();m>c&&!1===h?(k=h=!0,m=0,0<jQuery(".miniMenu").length&&(m+=40),jQuery(b).css({position:"fixed",top:m,"padding-top":"10px"})):(m<c&&!0===h&&(h=!1,jQuery(b).css({position:"static",
"padding-top":"0px"})),1==h&&(containerTop=jQuery(g).offset().top,containerHeight=jQuery(g).height(),bottomThreshold=containerTop+containerHeight-jQuery(b).outerHeight()-f,m>bottomThreshold&&0==l&&(l=!0,jQuery(b).css({position:"absolute",bottom:0,top:"auto"})),1==l&&bottomThreshold>m&&(m=0,0<jQuery(".miniMenu").length&&(m+=40),jQuery(b).css({position:"fixed",bottom:"auto",top:m}),l=!1)))})},initMiddleColumn:function(){var b=jQuery(".homepageFeatures"),c=jQuery(".viralUl li"),d=c.length,f=jQuery(c[d-
2]),g=jQuery(c[d-1]),h=jQuery(f).offset().top,k=!1,l=!1,m=!1;jQuery(window).bind("scroll",function(){if(!l){var c=jQuery(f).offset().top;c>h&&(h=c)}c=jQuery(document).scrollTop();c>h&&0==k?(l=k=!0,jQuery(f).css({position:"fixed",top:"10px"}),jQuery(g).css({position:"fixed",top:jQuery(f).height()+24+"px"})):(c<h&&1==k&&(k=!1,jQuery(f).css({position:"static"}),jQuery(g).css({position:"static"})),1==k&&(containerTop=jQuery(b).offset().top,containerHeight=jQuery(b).height(),bottomThreshold=containerTop+
containerHeight-jQuery(g).height()-jQuery(f).height(),c>bottomThreshold&&0==m&&(m=!0,jQuery(".viralUl").height(jQuery(b).height()),jQuery(f).css({position:"absolute",bottom:jQuery(g).height()+"px",top:"auto"}),jQuery(g).css({position:"absolute",bottom:0,top:"auto"})),1==m&&bottomThreshold>c&&(jQuery(f).css({position:"fixed",top:"10px",bottom:"auto"}),jQuery(g).css({position:"fixed",top:jQuery(f).height()+24+"px",bottom:"auto"}),m=!1)))})}},EbaumScrollAd={type:null,el:null,pos:null,rendered:!1,fixed:!1,
updated:!1,init:function(b){this.type=b;window.onscroll=EbaumScrollAd.trackScroll;b=document.getElementById("mediumRectBTF");this.pos=EbaumScrollAd.getElementPos(b);EbaumScrollAd.el=document.getElementById("mediumRectBTF")},getScrollPos:function(){return window.innerHeight?[window.innerWidth-10,window.innerHeight-10,window.pageXOffset,window.pageYOffset]:document.documentElement.clientHeight?[document.documentElement.clientWidth-10,document.documentElement.clientHeight-10,document.documentElement.scrollLeft,
document.documentElement.scrollTop]:[document.body.clientWidth,document.body.clientHeight,document.body.scrollLeft,document.body.scrollTop]},trackScroll:function(){void 0==EbaumScrollAd.el&&(EbaumScrollAd.el=document.getElementById("mediumRectBTF"));var b=EbaumScrollAd.getScrollPos();3E3<b[3]&&0==EbaumScrollAd.updated&&(EbaumScrollAd.pos=EbaumScrollAd.getElementPos(EbaumScrollAd.el),EbaumScrollAd.updated=!0);var c=EbaumScrollAd.pos;3500<b[3]&&b[3]>c&&0==EbaumScrollAd.fixed&&(EbaumScrollAd.fixed=!0,
EbaumScrollAd.pos=EbaumScrollAd.getElementPos(EbaumScrollAd.el),jQuery("#mediumRectBTF").addClass("fixedRight"));b[3]<=c&&1==EbaumScrollAd.fixed&&(EbaumScrollAd.fixed=!1,jQuery("#mediumRectBTF").removeClass("fixedRight"))},getElementPos:function(b){var c=0;if(b.offsetParent){do c+=b.offsetTop;while(b=b.offsetParent)}return c}},EbaumGAHelper={gaHelper:null,addClickContainer:function(b){null==this.gaHelper&&(this.gaHelper=new EbaumGAEvent);this.gaHelper.addClickContainer(b)}},EbaumKeyMapStack={maps:null,
init:function(){null==this.maps&&(this.maps=[],obj=this,document.onkeyup=function(b){obj.handleKeyUp.call(obj,b)},document.onkeydown=function(b){obj.handleKeyDown.call(obj,b)},document.onkeypress=function(b){obj.handleKeyPress.call(obj,b)})},addMap:function(b){this.init();if(b instanceof EmuseKeyMap)this.maps.push(b);else throw"Invalid Type: Key map must be instace of EmuseKeyMap";},removeMap:function(){null!=this.maps&&this.maps.pop()},handleKeyUp:function(b){this.maps[this.maps.length-1].handleKeyUp(b)},
handleKeyDown:function(b){this.maps[this.maps.length-1].handleKeyDown(b)},handleKeyPress:function(b){this.maps[this.maps.length-1].handleKeyPress(b)}},EbaumSwipeMapStack={maps:null,init:function(){null==this.maps&&(this.maps=[],obj=this,jQuery(document).on("swipeleft",{stack:obj},obj.handleSwipeLeft),jQuery(document).on("swiperight",{stack:obj},obj.handleSwipeRight))},addMap:function(b){this.init();if(b instanceof EmuseSwipeMap)this.maps.push(b);else throw"Invalid Type: Swipe map must be instace of EmuseSwipeMap";
},removeMap:function(){null!=this.maps&&this.maps.pop()},handleSwipeLeft:function(b){var c=b.data.stack.maps.length;0<c&&b.data.stack.maps[c-1].handleSwipeLeft(b)},handleSwipeRight:function(b){b.data.stack.maps[b.data.stack.maps.length-1].handleSwipeRight(b)}},EbaumManualShare={_ga:null,_fb:null,_thumb:null,_pingGA:function(b,c,d){null==this._ga&&(this._ga=new EbaumGAEvent);this._ga.fireGA("Media - Share - "+c,b,d)},_pingFB:function(b){null==this._fb&&(this._fb=new EbaumFBEvent);this._fb.fireFB("mediaShare",
b,!0)},shareFacebook:function(b,c){FB.ui({method:"share",mobile_iframe:!0,href:b},function(b){});this._pingGA("facebook",c,b);this._pingFB("facebook");return!1},shareTwitter:function(b,c){this._pingGA("twitter",c,b);this._pingFB("twitter");var d="https://twitter.com/intent/tweet?original_referer="+b+"&related=ebaumsworld&text="+escape(jQuery("#detailPage h1.title ").html())+"&tw_p=tweetbutton&url="+b+"&via=ebaumsworld";window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+(window.screen.height/
2-218)+",left="+(window.screen.width/2-313));window.focus();return!1},shareStumble:function(b,c){this._pingGA("stumble",c,b);this._pingFB("stumble");var d="http://www.stumbleupon.com/submit?url="+b+"&title="+jQuery("#detailPage .description").html();window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+(window.screen.height/2-218)+",left="+(window.screen.width/2-313));window.focus();return!1},sharePinterest:function(b,c){this._pingGA("pinterest",c,b);this._pingFB("pinterest");switch(c){case "top":case "bottom":image=
jQuery("meta[property='og:image']").attr("content");break;case "lightbox":image=jQuery("#enlargedImage").attr("src");break;case "list":image=this._thumb;break;default:image=jQuery("#galleryFeatureImage").attr("src")}var d="http://pinterest.com/pin/create/bookmarklet/?url="+b+"&media="+image+"&description="+escape(jQuery("#detailPage h1.title ").html());window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+(window.screen.height/2-218)+",left="+(window.screen.width/2-313));window.focus();
return!1},shareEmail:function(b,c){console.log(b);this._pingGA("email",c,b);this._pingFB("email");var d="mailto:?subject="+escape(jQuery("#detailPage h1.title").html())+"&body=Check out this awesome image I found on eBaum's World! "+b;window.open(d,"sharer","toolbar=0,status=0,width=826,height=456,top="+(window.screen.height/2-418)+",left="+(window.screen.width/2-413));window.focus();return!1},shareWhatsapp:function(b,c){this._pingGA("whatsapp",c,b);this._pingFB("whatsapp");window.open("whatsapp://send?text="+
b,"sharer","toolbar=0,status=0,width=626,height=256,top="+(window.screen.height/2-218)+",left="+(window.screen.width/2-313));window.focus();return!1}},EbaumSocialOverlayDisplay={hoverTimer:!1,slideOutShown:!0,init:function(b,c){var d=this;0==c&&(this.slideOutShown=!0);jQuery(b).hover(function(){d.slideOutShown||(d.showRemixLink(),d.slideOutShown=!0);d.hoverTimer=setTimeout(function(){d.hideSocialOverlay()},3E3);jQuery(b).mousemove(function(){jQuery("#socialOverlay").show();d.slideOutShown||(d.showRemixLink(),
d.slideOutShown=!0);window.clearTimeout(d.hoverTimer);d.hoverTimer=setTimeout(function(){d.hideSocialOverlay()},3E3)})});jQuery(b).mouseleave(function(){jQuery("#remixLink span").hide();jQuery("#remixLink").width(31)})},hideSocialOverlay:function(){0==jQuery("#socialOverlay:hover").length&&jQuery("#socialOverlay").fadeOut("slow",function(){jQuery("#remixLink span").hide();jQuery("#remixLink").width(31)})},showRemixLink:function(){256!=jQuery("#remixLink").width()&&jQuery("#remixLink").animate({width:"256px"},
500,function(){jQuery("#remixLink span").fadeIn()})}};EbaumListingNav.prototype=new EmuseEvent;EbaumListingNav.constructor=EbaumListingNav;var originalState;
function EbaumListingNav(b,c){this._container=b;this._action=c.action;this._mediaType=c.mediaType;this._modType=c.modType;this._featureType=c.featureType;this._dateType=c.dateType;this._subscribeType=c.subscribeType;this._layoutType="";this._tag=c.tag;this._searchTerm=c.searchTerm;this._sortType=c.sortType;this._remixId=c.remixId;this._mediaId=c.mediaId;selectedEls=jQuery(".selected");originalState={};for(var d=0,f=selectedEls.length;d<f;d++)originalState[d]=jQuery(selectedEls[d]).attr("id");this._container.onclick=
this.bind(this.handleClick);this._container.onchange=this.bind(this.handleChange)}EbaumListingNav.handlePop=function(b){extras=(popExtras=b.state.extra)?popExtras:originalState;for(div in extras)if(jQuery("#"+extras[div]).parent().siblings().children().removeClass("selected"),jQuery("#"+extras[div]).addClass("selected"),"featured-false"==extras[div]||"featured-featured"==extras[div])string=b=extras[div].split("-")[1],"false"==b&&(string="All"),jQuery("#filterDropLabel").html(string)};
EbaumListingNav.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-"),d=c[0],c=c[1];-1==jQuery(b).parents().index(jQuery("#filterDropList"))&&"filterDropTrigger"!=jQuery(b).attr("id")&&-1==jQuery(b).parents().index(jQuery("#filterDropTrigger"))&&jQuery("#filterDropList").is(":visible")&&jQuery("#filterDropList").hide();switch(d){case "media":this._mediaType="all"==c?!1:c;this.setSelected(b);this.buildUrl();break;case "date":this._dateType="month"==c?!1:
c;this.setSelected(b);this.buildUrl();break;case "subscribed":this._subscribeType="false"==c?!1:c;this.setSelected(b);this.buildUrl();break;case "sort":this._sortType="false"==c?!1:"tags"!=this._action&&"categories"!=this._action&&"remixes"!=this._action||"newest"!=c?c:!1;this.setSelected(b);this.buildUrl();break;case "moderate":this._modType=c;this._featureType=!1;string="nonfeatured"==c?"Non-Featured":c;jQuery("#filterDropLabel").html(string);jQuery("#filterDropList").hide();this.setSelected(b);
this.buildUrl();break;case "featured":this._modType=!1;string=c;"false"==c?(this._featureType=!1,string="Featured"):this._featureType=c;jQuery("#filterDropLabel").html(string);jQuery("#filterDropList").hide();this.setSelected(b);this.buildUrl();break;case "layout":this._layoutType=c;this.setSelected(b);this.buildUrl();break;case "filterDropTrigger":case "filterDropLabel":jQuery("#filterDropList").toggle();break;case "search":this._searchTerm=jQuery("#searchResultInput").val();this.buildUrl();break;
case "contest":window.location="newest"==c?"/newest/contest/":"/popular/contest/"}};
EbaumListingNav.prototype.handleChange=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-"),c=c[0];switch(c){case "mediaSelect":c=jQuery("#"+c).val().split("-");c=c[1];this._mediaType="all"==c?!1:c;this.setSelected(b);this.buildUrl();break;case "mobileFeatureSelect":c=jQuery("#"+c+" option:selected").attr("id").split("-");c=c[1];this._featureType="false"==c?!1:c;this.setSelected(b);this.buildUrl();break;case "mobileSortSelect":c=jQuery("#"+c+" option:selected").attr("id").split("-"),
this._sortType=c=c[1],window.location="/"+this._sortType+"/"+this._mediaType+"/"}};EbaumListingNav.prototype.setSelected=function(b){jQuery(b).parent().siblings().children().removeClass("selected");jQuery(b).addClass("selected")};
EbaumListingNav.prototype.buildUrl=function(){var b="/";0<=this._action.search("user")?(b+=this._action+"/",this._mediaType&&(b+=this._mediaType+"/")):this._mediaType?(b+=this._mediaType+"/","newest"!=this._action&&"categories"!=this._action&&(b+=this._action+"/")):"categories"!=this._action&&(b+=this._action+"/");this._tag&&(b+=this._tag+"/");this._searchTerm&&(b+=this._searchTerm+"/");this._subscribeType&&(b+=this._subscribeType+"/");this._remixId?(this._mediaType&&(b+=this._mediaType+"/"),b+=this._remixId+
"/",this._sortType&&(b+=this._sortType+"/")):(this._sortType&&(b+=this._sortType+"/"),this._dateType&&(b+=this._dateType+"/"));this._modType&&(b+=this._modType+"/");this._featureType&&"featured"!=this._featureType&&(b+=this._featureType+"/");this._layoutType&&(b+="?layout="+this._layoutType);"submissions"==this._action&&"contest"==this._mediaType&&(b="/contest/view/"+this._mediaId+"/submissions/",b=this._sortType?b+(this._sortType+"/"):b+"newest/",this._layoutType&&(b+="?layout="+this._layoutType));
for(var c=jQuery(".selected"),d=0,f=c.length;d<f;d++)jQuery(c[d]).attr("id");this._layoutType?(jQuery(".listingLoader").slideDown(),jQuery("#mediaListColumn").load(b,function(){jQuery(".listingLoader").slideUp()}),this._layoutType=""):window.location=b};EbaumListingNav.prototype.page=function(b){window.location=b};EbaumListingNav.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};EbaumUserMenu.prototype=new EmuseEvent;EbaumUserMenu.constructor=EbaumUserMenu;function EbaumUserMenu(b,c){this._container=b;this._auth=c;this._container.onclick=this.bind(this.handleClick)}
EbaumUserMenu.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;switch(b.id.split("-")[0]){case "subscribe":this.checkAuth()&&this.subscribe(b);break;case "unsubscribe":this.checkAuth()&&this.unsubscribe(b);break;case "addBuddy":this.checkAuth()&&this.addBuddy(b);break;case "mobileAddBuddy":this.checkAuth()&&this.mobileAddBuddy(b);break;case "removeBuddy":this.checkAuth()&&this.removeBuddy(b);break;case "mobileRemoveBuddy":this.checkAuth()&&this.mobileRemoveBuddy(b);break;
case "block":this.checkAuth()&&this.block(b);break;case "unblock":this.checkAuth()&&this.unblock(b);break;case "favorite":this.checkAuth()&&(jQuery("#favorite").hasClass("favorited")?this.unfavorite():this.favorite());break;case "sendPM":this.checkAuth()&&this.sendPM(b);break;case "editProfile":this.checkAuth()&&this.editProfile(b)}};EbaumUserMenu.prototype.checkAuth=function(){return this._auth?!0:(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow(),!1)};
EbaumUserMenu.prototype.subscribe=function(b){var c=b.id.split("-");jQuery.get("/user/subscribe/"+c[1]+"/",function(d){d.success?(jQuery(b).html("unsubscribe"),jQuery(b).removeClass("subscribe").addClass("unsubscribe"),jQuery(b).attr("id","unsubscribe-"+c[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.unsubscribe=function(b){var c=b.id.split("-");jQuery.getJSON("/user/removesubscription/"+c[1]+"/",function(d){d.success?(jQuery(b).html("subscribe"),jQuery(b).removeClass("unsubscribe").addClass("subscribe"),jQuery(b).attr("id","subscribe-"+c[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.block=function(b){var c=b.id.split("-");jQuery.get("/user/blockuser/"+c[1]+"/",function(d){d.success?(jQuery(b).html("unblock"),jQuery(b).removeClass("blockUser").addClass("unblockUser"),jQuery(b).attr("id","unblock-"+c[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.unblock=function(b){var c=b.id.split("-");jQuery.get("/user/unblockuser/"+c[1]+"/",function(d){d.success?(jQuery(b).html("block"),jQuery(b).removeClass("unblockUser").addClass("blockUser"),jQuery(b).attr("id","block-"+c[1])):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.addBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/addbuddy/"+c[1]+"/",function(c){c.success?(jQuery(b).html("pending"),jQuery(b).removeClass("addBuddy").addClass("requestSent").addClass("disabled")):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.removeBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/removebuddy/"+c[1]+"/",function(d){d.success?(jQuery(b).html("add buddy"),jQuery(b).removeClass("removeBuddy").addClass("addBuddy"),jQuery(b).attr("id","addBuddy-"+c[1])):populateModal("<h1>Error</h1>")})};EbaumUserMenu.prototype.mobileAddBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/addbuddy/"+c[1]+"/",function(c){c.success?(jQuery(b).html("Pending"),jQuery(b).attr("id","mobileBuddyAdded")):populateModal("<h1>Error</h1>")})};
EbaumUserMenu.prototype.mobileRemoveBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/removebuddy/"+c[1]+"/",function(d){d.success?(jQuery(b).attr("id","mobileAddBuddy-"+c[1]),jQuery(b).html("Add Buddy")):populateModal("<h1>Error</h1>")})};EbaumUserMenu.prototype.sendPM=function(b){b=b.id.split("-");window.location.href="/message/compose/?buddy="+b[1]};EbaumUserMenu.prototype.editProfile=function(b){jQuery("#jqModal").jqm({ajax:"/user/edit/"});jQuery("#jqModal").jqmShow()};
EbaumUserMenu.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};EbaumLiveRail.constructor=EbaumLiveRail;
function EbaumLiveRail(b,c,d){this._LiveRailVPAID;this._vpaidFrame;this._vpaidLoader;this._videoSrc=d.filePath;this._videoTitle=d.title;this._videoId=d.id;this._tier=d.tier;this._autoplay=d.autoplay;this._videoWrapper=document.getElementById(b);this._videoElement=document.getElementById(c);var f=this;this._vpaidFrame=document.createElement("iframe");this._vpaidFrame.style.display="none";this._vpaidFrame.onload=function(){console.log("vpaid Frame loaded");f._vpaidLoader=f._vpaidFrame.contentWindow.document.createElement("script");
f._vpaidLoader.src="http://cdn-static.liverail.com/js/LiveRail.AdManager-1.0.js";f._vpaidLoader.onload=function(){f._LiveRailVPAID=f._vpaidFrame.contentWindow.getVPAIDAd();f._LiveRailVPAID.handshakeVersion("2.0");f.onVPAIDLoad();f._videoWrapper.onclick=function(){console.log("wrapper click");f.initing()};f._videoElement.onclick=function(){console.log("video click");return!1}};f._vpaidFrame.contentWindow.document.body.appendChild(f._vpaidLoader)};document.body.appendChild(this._vpaidFrame)}
EbaumLiveRail.prototype.initing=function(){console.log("initing");this._LiveRailVPAID.initAd(this._videoElement.offsetWidth,this._videoElement.offsetHeight,"normal",600,{},{slot:this._videoWrapper,videoSlot:this._videoElement,videoSlotCanAutoPlay:!0,LR_PUBLISHER_ID:1406,LR_TAGS:"demo",LR_VIDEO_ID:this._videoId,LR_TITLE:this._videoTitle,LR_AUTOPLAY:this._autoplay,LR_VERTICALS:"mobile,tier"+this._tier,LR_PLAYER_HANDLES_CLICK:1})};
EbaumLiveRail.prototype.playerReset=function(b){console.log("player reset");""===this._videoElement.canPlayType("video/mp4")&&""!==this._videoElement.canPlayType("video/webm")?console.log("playing webm"):(console.log("playing mp4 "+this._videoSrc),this._videoElement.src=this._videoSrc);this._videoElement.load();this._videoElement.play();this._videoWrapper.onclick=function(){};this._videoElement.onclick=function(){}};
EbaumLiveRail.prototype.onVPAIDLoad=function(b){console.log("on VPAID Load");self=this;this._LiveRailVPAID.subscribe(function(){self._LiveRailVPAID.startAd()},"AdLoaded");this._LiveRailVPAID.subscribe(function(){self.playerReset()},"AdStopped");this._LiveRailVPAID.subscribe(function(){self.playerReset()},"AdError");this._LiveRailVPAID.subscribe(function(b){console.log("AdLog: "+b)},"AdLog")};EbaumMediaDetail.prototype=new EmuseEvent;EbaumMediaDetail.constructor=EbaumMediaDetail;
function EbaumMediaDetail(b,c,d,f){this._container=b;this._id=c;this._auth=d;this._mediaType=f;this._ga=new EbaumGAEvent;this._container.onclick=this.bind(this.handleClick);this._relatedMoreClick=0;this._relatedMobilePages=3;var g=this;0<jQuery("#mobileFBShareOverlay").length&&setTimeout(function(){jQuery("#mobileFBShareOverlay").slideDown();jQuery("#pushNotificationWrapper").hide()},25E3);if(0<jQuery("#mobileFBBotOverlay").length){setTimeout(function(){jQuery("#mobileFBBotOverlay").slideDown();jQuery("#pushNotificationWrapper").hide()},
25E3);var h=this;jQuery("#bot-facebook-mobileOverlay").click(function(){h._ga.fireGA("Media - Mobile - FB Bot Overlay","subscribe",window.location.href);window.location="https://m.me/ebaumsworld?ref=website,mobile_optin"})}jQuery("#detailNextMedia").click(function(){g._ga.fireGA("Media - Next",g._mediaType,"btf")})}
EbaumMediaDetail.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-"),d=c[0],f=c[1],g=c[2];"dropListTrigger"!=d&&"sortDropTrigger"!=d&&"sortDropLabel"!=d&&jQuery(".dropList").is(":visible")&&jQuery(".dropList").hide();switch(d){case "dropListTrigger":this.checkAuth()&&EbaumUser.triggerMenu(g,f);break;case "sortDropTrigger":case "sortDropLabel":jQuery("#filterDropList").toggle();break;case "subscribe":this.checkAuth()&&this.subscribe(b);break;case "unsubscribe":this.checkAuth()&&
this.unsubscribe(b);break;case "addBuddy":this.checkAuth()&&this.addBuddy(b);break;case "removeBuddy":this.checkAuth()&&this.removeBuddy(b);break;case "block":this.checkAuth()&&this.block(b);break;case "unblock":this.checkAuth()&&this.unblock(b);break;case "favorite":this.checkAuth()&&(jQuery("#favorite").hasClass("favorited")?this.unfavorite():this.favorite());break;case "flag":this.checkAuth()&&(jQuery("#flag").hasClass("flagged")||this.flag());break;case "sendPM":this.checkAuth()&&this.sendPM(b);
break;case "showcase":this.checkAuth()&&this.showcase(b);break;case "userDelete":this.checkAuth()&&this.userDelete(b);break;case "seekImage":gallery&&gallery.seekHandler(f);break;case "seekTime":ebwPlayer&&ebwPlayer.seekHandler(f);break;case "share":if(!isNaN(c[3])||"lightbox"==g)break;this.share(f,g,c[3]);break;case "comments":jQuery("html, body").animate({scrollTop:jQuery("#commentSection").offset().top},200);break;case "mobileFBLikeClose":jQuery("#mobileFBShareOverlay, #mobileFBBotOverlay").slideUp("fast");
this._ga.fireGA("Media - Mobile - Share Overlay","close",window.location.href);jQuery("#pushNotificationWrapper").show();Ebaum.setCookie("mobileShareOverlay","true",1);break;case "detailNextMedia":this._ga.fireGA("Media - Next",this._mediaType,"btf");break;case "mobileMoreMedia":this._ga.fireGA("Media - Next","mobile","btf");break;case "mobileRelatedShowMore":if(this._relatedMoreClick++,console.log("click!",this._relatedMoreClick),3>this._relatedMoreClick){this._ga.fireGA("Related - More","mobile",
this._relatedMoreClick);b=jQuery("#mobileRelatedMediaList li");c=4+4*this._relatedMoreClick;for(d=0;d<c;d++)jQuery(b[d]).show();2==this._relatedMoreClick&&jQuery("#mobileRelatedShowMore").hide()}}};
EbaumMediaDetail.prototype.share=function(b,c,d){var f=window.location.href.split("?")[0];isNaN(d)||d==this._id||(f+="?image="+d);switch(b){case "facebook":EbaumManualShare.shareFacebook(f,c);break;case "twitter":EbaumManualShare.shareTwitter(f,c);break;case "stumble":EbaumManualShare.shareStumble(f,c);break;case "pinterest":EbaumManualShare.sharePinterest(f,c);break;case "email":EbaumManualShare.shareEmail(f,c);break;case "whatsapp":EbaumManualShare.shareWhatsapp(f,c)}};
EbaumMediaDetail.prototype.checkAuth=function(){return this._auth?!0:(EbaumMobile.mobile?window.location="/user/login/":(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow()),!1)};EbaumMediaDetail.prototype.subscribe=function(b){var c=b.id.split("-");jQuery.get("/user/subscribe/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.unsubscribe=function(b){var c=b.id.split("-");jQuery.getJSON("/user/removesubscription/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.block=function(b){var c=b.id.split("-");jQuery.get("/user/blockuser/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.unblock=function(b){var c=b.id.split("-");jQuery.get("/user/unblockuser/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.addBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/addbuddy/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};
EbaumMediaDetail.prototype.removeBuddy=function(b){var c=b.id.split("-");jQuery.get("/user/removebuddy/"+c[1]+"/",function(c){c.success?jQuery(b).html("Success"):populateModal("oops")})};EbaumMediaDetail.prototype.sendPM=function(b){b=b.id.split("-");jQuery("#jqModal").jqm({ajax:"/message/compose/?buddy="+b[1]});jQuery("#jqModal").jqmShow()};
EbaumMediaDetail.prototype.favorite=function(b){jQuery.getJSON("/user/addfavorite/"+this._id+"/",function(b){return b.success?(jQuery(".favoriteStat").addClass("favorited"),b=jQuery(".favoriteCount").html(),b=parseInt(b),0<b?b++:b=1,jQuery(".favoriteCount").html(b),jQuery("#favorite").attr("title","Click to remove from your favorites!"),!0):!1})};
EbaumMediaDetail.prototype.unfavorite=function(b){jQuery.getJSON("/user/removefavorites/"+this._id+"/",function(b){return b.success?(jQuery(".favoriteStat").removeClass("favorited"),b=jQuery(".favoriteCount").html(),b=parseInt(b),0<b?b--:b=1,jQuery(".favoriteCount").html(b),jQuery("#favorite").attr("title","Click to add to your favorites!"),!0):!1})};
EbaumMediaDetail.prototype.flag=function(b){jQuery.get("/media/flag/"+this._id+"/",function(b){if(b.success)return jQuery("#flag").addClass("flagged"),!0;jQuery("#flag").addClass("flagged");return!1})};EbaumMediaDetail.prototype.showcase=function(b){jQuery.get("/user/setshowcase/"+this._id+"/",function(b){if(b.success)return window.location=b.data,!0;jQuery("#flag").hide();return!1})};
EbaumMediaDetail.prototype.userDelete=function(b){confirm("Do you really want to delete this media item?")&&jQuery.get("/user/removeuploads/"+this._id+"/",function(b){b.success?window.location="/":populateModal("<h1>ALERT</h1> Media failed to delete.")});return!1};EbaumMediaDetail.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};EbaumMediaEngage.prototype=new EmuseEvent;EbaumMediaEngage.constructor=EbaumMediaEngage;
function EbaumMediaEngage(b,c,d){this._container=b;this._mediaType=c;this._mobile=d.mobile;this._ga=new EbaumGAEvent;this._engaged=!1;this._scrollThreshold=100;this._pageHeight;this._contentOffset;this._container.addEventListener("click",this.bind(this.handleClick));window.addEventListener("scroll",this.bind(this.handleScroll));switch(c){case "video":case "audio":this._length=d.length;this._length||(this._length=60);length=Math.round(.2*this._length);var f=this;setTimeout(function(){f.fireEngaged()},
1E3*length);break;case "gallery":if(this._mobile)this._galleryView="list",images=jQuery(".mobileGalleryItem"),this._firstImage=images[0];else switch(this._galleryObj=d.gallery,this._galleryObj.addListener(GalleryEvent.IMAGE_CHANGE,this.bind(this.fireEngaged)),this._galleryObj.addListener(GalleryEvent.VIEW_CHANGE,this.bind(this.fireEngaged)),this._galleryObj.addListener(GalleryEvent.LIGHTBOX_LAUNCH,this.bind(this.fireEngaged)),this._galleryView=this._galleryObj._view,this._galleryView){case "list":images=
jQuery(".galleryListItem"),this._firstImage=images[0]}}}EbaumMediaEngage.prototype.handleClick=function(b){if(!this._engaged){b=b||window.event;switch((b.target||b.srcElement).id.split("-")[0]){case "share":this.fireEngaged();break;case "videoPlayer":case "video":this.fireEngaged()}switch(this._mediaType){case "contest":this.fireEngaged()}}};
EbaumMediaEngage.prototype.handleScroll=function(){if(!this._engaged)switch(mediaHeight=jQuery(".media").height(),screenHeight=window.innerHeight,mediaTop=jQuery(".media").offset().top,mediaBottom=mediaTop+mediaHeight,this._mediaType){case "gallery":switch(this._galleryView){case "list":jQuery(this._firstImage).offset().top+jQuery(this._firstImage).height()<=jQuery(window).scrollTop()&&this.fireEngaged();break;case "grid":jQuery(".galleryGridView").offset().top<=jQuery(window).scrollTop()&&this.fireEngaged()}break;
case "article":case "blog":case "joke":mediaHeight<screenHeight?mediaBottom<jQuery(window).scrollTop()&&this.fireEngaged():mediaTop+.2*mediaHeight<=jQuery(window).scrollTop()&&this.fireEngaged();break;case "contest":jQuery("#contestTabs").offset().top<=jQuery(window).scrollTop()&&this.fireEngaged();break;case "game":case "soundboard":case "animation":case "picture":mediaHeight<screenHeight?mediaBottom<jQuery(window).scrollTop()+screenHeight&&this.fireEngaged():mediaTop<=jQuery(window).scrollTop()&&
this.fireEngaged()}};EbaumMediaEngage.prototype.fireEngaged=function(){0==this._engaged&&(this._ga.fireGA("Media - Engaged",this._mediaType,window.location.href,!0),this._engaged=!0,window.removeEventListener("scroll",this.handleScroll),this._container.removeEventListener("click",this.handleClick))};EbaumMediaEngage.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};EbaumBinaryVote.prototype=new EmuseEvent;EbaumBinaryVote.constructor=EbaumBinaryVote;function EbaumBinaryVote(b,c){this._container=b;this._id=c.id;this._total=c.total;this._one=c.one;this._zero=c.zero;this._type=c.type;this._voted=this._busy=!1;this._container.onclick=this.bind(this.handleClick)}
EbaumBinaryVote.prototype.handleClick=function(b){b=b||window.event;b=this._splitId(b.target||b.srcElement);if(!this._busy)switch(b.type){case "voteReal":this.voteOne("realorfakevote");break;case "voteFake":this.voteZero("realorfakevote");break;case "commentVoteUp":this.voteOne("commentvote",b.id);break;case "commentVoteDown":this.voteZero("commentvote",b.id)}};
EbaumBinaryVote.prototype.voteOne=function(b,c){var d=this;this._busy=!0;switch(b){case "realorfakevote":jQuery.post("/media/"+b+"/"+this._id+"/",{vote:1},function(b){b.success&&(jQuery(".realResults .voteCount").html(d._one+1+" Votes"),jQuery(".barResults .real").css({width:(d._one+1)/(d._total+1)*100+"%"}),jQuery(".barResults .fake").css({width:d._zero/(d._total+1)*100+"%"}),jQuery("#realOrFakeVote").hide(),jQuery("#realOrFakeResults").show());d._busy=!1});break;case "commentvote":jQuery.post("/comment/vote/"+
c+"/",{vote:1},function(b){b.success&&(jQuery("#commentVoteUp-"+c).addClass("active"),jQuery("#commentVoteDown-"+c).addClass("disabled"),count=jQuery("#voteUpCount-"+c).html(),jQuery.isNumeric(count)&&jQuery("#voteUpCount-"+c).html(parseInt(count)+1),jQuery("#commentVoteUp-"+c).removeAttr("id"),jQuery("#commentVoteDown-"+c).removeAttr("id"));d._busy=!1})}};
EbaumBinaryVote.prototype.voteZero=function(b,c){var d=this;this._busy=!0;switch(b){case "realorfakevote":jQuery.post("/media/"+b+"/"+this._id+"/",{vote:0},function(b){b.success&&(jQuery(".fakeResults .voteCount").html(d._zero+1+" Votes"),jQuery(".barResults .fake").css({width:(d._zero+1)/(d._total+1)*100+"%"}),jQuery(".barResults .real").css({width:d._one/(d._total+1)*100+"%"}),jQuery("#realOrFakeVote").hide(),jQuery("#realOrFakeResults").show());d._busy=!1});break;case "commentvote":jQuery.post("/comment/vote/"+
c+"/",{vote:0},function(b){b.success&&(jQuery("#commentVoteDown-"+c).addClass("active"),jQuery("#commentVoteUp-"+c).addClass("disabled"),count=jQuery("#voteDownCount-"+c).html(),jQuery.isNumeric(count)&&jQuery("#voteDownCount-"+c).html(parseInt(count)-1),jQuery("#commentVoteDown-"+c).removeAttr("id"),jQuery("#commentVoteUp-"+c).removeAttr("id"));d._busy=!1})}};EbaumBinaryVote.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};function EmuseKeyMap(){}EmuseKeyMap.prototype.handleKeyUp=function(b){};EmuseKeyMap.prototype.handleKeyDown=function(b){};EmuseKeyMap.prototype.handleKeyPress=function(b){};function EmuseSwipeMap(){}EmuseSwipeMap.prototype.handleSwipeLeft=function(b){};EmuseSwipeMap.prototype.handleSwipeRight=function(b){};EbaumMobileNavSwipeMap.prototype=new EmuseSwipeMap;EbaumMobileNavSwipeMap.constructor=EbaumMobileNavSwipeMap;function EbaumMobileNavSwipeMap(b){this._nav=b}EbaumMobileNavSwipeMap.prototype.handleSwipeLeft=function(b){this._nav.triggerToggle()};EbaumMobileContestGallery.constructor=EbaumMobileContestGallery;
function EbaumMobileContestGallery(b,c,d){this._container=b;this._id=c.id;this._webPath=c.url;this._count=c.count;this._start=c.start;this._contest=c.contest;this._mobile=d;this._busy=!1;this._thumbImages=jQuery(".galleryThumbImage");this._fullImages=[];this._thumbImages=jQuery("li.galleryThumb img.galleryThumbImage");this._current=this._start;this._currentImageToLoad=this._start-1;this._currentThumbToLoad=0;this._carousel;b=new EbaumMobileContestGallerySwipeMap(this);EbaumSwipeMapStack.addMap(b);
var f=this;this._current=this._start;var g=jQuery("#submissionsList li"),h=g[this._start-1],k=jQuery(h).height();jQuery("#submissionViewer.jcarousel").on("jcarousel:reload jcarousel:create",function(){f._carousel=jQuery(this);k=jQuery(h).height();jQuery(".contestSubmissions.jcarousel-wrapper").css({height:k});jQuery(".jcarousel ul").css({width:jQuery("#mainContent").width()*f._count+"px !important"});jQuery(".submission").css({width:jQuery("#mainContent").width()+"px"});setTimeout(function(){k=jQuery(h).height();
jQuery(".contestSubmissions.jcarousel-wrapper").css({height:k});console.log(k)},1E3);jQuery("#nextBtn").click(function(){console.log("next");f.nextHandler()});jQuery("#prevBtn").click(function(){f.prevHandler()})}).on("jcarousel:scroll",function(b,c,d){console.log("scroll");console.log(b);b=jQuery(g[b.currentTarget-1]).height();jQuery(".contestSubmissions.jcarousel-wrapper").css({height:b+"px"});jQuery(".jcarousel ul").css({width:jQuery("#mainContent").width()*f._count+"px"});jQuery("#currentSubmissionNum").html(f._current);
f._busy=!1}).jcarousel({wrap:"circular"})}
EbaumMobileContestGallery.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-");if(!this._busy)switch(c[0]){case "galleryNext":this.nextHandler();break;case "galleryPrev":this.prevHandler();break;case "thumb":this.thumbHandler(b);break;case "thumbNum":this.thumbHandler(b.nextElementSibling);break;case "gridToggle":jQuery("#gridOverlay").toggle();break;case "share":jQuery("#shareOverlay").show();break;case "shareToggle":jQuery("#shareOverlay").hide();break;
case "captionReveal":jQuery("#captionReveal").hide();jQuery("#captionOverlay").slideToggle("fast");break;case "captionClose":jQuery("#captionOverlay").slideToggle("fast",function(){jQuery("#captionReveal").show()});break;case "shareFacebook":var d="http://www.facebook.com/sharer/sharer.php?s=100&p[url]=http://www.ebaumsworld.com/pictures/view/"+this._id+"/?image="+this._currentId+"&p[title]="+jQuery("#detailPage h1.title").html()+"&p[images][0]="+jQuery("#galleryFeatureImage").attr("src")+"&p[summary]="+
jQuery("#detailPage .fullDescription").html();b=window.screen.height/2-218;c=window.screen.width/2-313;window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+b+",left="+c);return!1;case "shareTwitter":return d="https://twitter.com/intent/tweet?original_referer=http://www.ebaumsworld.com/pictures/view/"+this._id+"/?image="+this._currentId+"&related=ebaumsworld&text="+escape(jQuery("#detailPage h1.title ").html())+"&tw_p=tweetbutton&url=http://www.ebaumsworld.com/pictures/view/"+this._id+
"/?image="+this._currentId+"&via=ebaumsworld",b=window.screen.height/2-218,c=window.screen.width/2-313,window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+b+",left="+c),!1;case "sharePinterest":return d="http://pinterest.com/pin/create/bookmarklet/?url=http://www.ebaumsworld.com/pictures/view/"+this._id+"?image="+this._currentId+"&media="+jQuery("#galleryFeatureImage").attr("src")+"&description="+jQuery("#detailPage h1.title ").html(),b=window.screen.height/2-218,c=window.screen.width/
2-313,window.open(d,"sharer","toolbar=0,status=0,width=626,height=256,top="+b+",left="+c),!1;case "shareLink":jQuery("#shareOverlay").show()}};EbaumMobileContestGallery.prototype.handleKeyUp=function(b){if(!this._busy)switch((b||window.event).keyCode){case 37:this.prevHandler();break;case 39:this.nextHandler()}};EbaumMobileContestGallery.prototype.handleSwipe=function(b,c,d,f,g){"left"==c?this.nextHandler():"right"==c&&this.prevHandler()};
EbaumMobileContestGallery.prototype.nextHandler=function(){this._busy||(this._busy=!0,this._current=this._current==this._count?1:this._current+1,this._carousel.jcarousel("scroll","+=1"))};EbaumMobileContestGallery.prototype.prevHandler=function(){this._busy||(this._busy=!0,this._carousel.prev(),1==this._current?this._current=this._count:--this._current);this._carousel.jcarousel("scroll","-=1")};
EbaumMobileContestGallery.prototype.seekHandler=function(b){b<=this._count&&0<b&&(this.changeImage(b),jQuery("body,html").animate({scrollTop:380},500))};EbaumMobileContestGallery.prototype.thumbHandler=function(b){b=jQuery(b);b=parseInt(jQuery(b).parent("li").attr("id").match(/([0-9]+)/)[0]);this._current!=b&&(this.loadImage(b-1),this.changeImage(b),jQuery("#gridOverlay").toggle())};
EbaumMobileContestGallery.prototype.changeImage=function(b){this._current=parseInt(b);var c=jQuery("#thumb"+this._current+" .galleryThumbImage");this.loadImage(this._current-1);this._busy=!0;b=jQuery(c).attr("id");if(void 0!=b){b=b.split("-");var d=b[0];this._currentId=b[1];jQuery(c).attr("path");b=jQuery(c).attr("title");jQuery(c).attr("avgrating");var f=jQuery(c).attr("dimwidth"),g=jQuery(c).attr("dimheight"),d=jQuery(c).attr("type"),h=this;"picture"==d?(jQuery(".twitterEmbed").hide(),jQuery(".vineEmbed").remove(),
0!=jQuery("#galleryFeature span img").length&&jQuery("#galleryFeaturedImage").is(":visible")&&jQuery("#galleryFeature span img").attr("src")==h._fullImages[h._current-1].src&&this._start!=this._current?this._busy=!1:jQuery("#galleryFeature").animate({opacity:0},250,function(){jQuery("#galleryFeature span").html(h._fullImages[h._current-1]);jQuery("#galleryFeature span img").attr("id","galleryFeatureImage");jQuery("#galleryFeatureImage").show();jQuery("#galleryFeature").fadeTo(250,1);f>g?(newWidth=
630,newHeight=newWidth*g/f,580<newHeight&&(newHeight=580,newWidth=newHeight*f/g)):(newHeight=580,newWidth=newHeight*f/g,630<newWidth&&(newWidth=630,newHeight=newWidth*g/f));jQuery("img#galleryFeatureImage").css({width:newWidth+"px"});jQuery("img#galleryFeatureImage").css({height:newHeight+"px"});jQuery("#galleryPostRoll").hide();jQuery("#galleryFeature").show();jQuery("#socialOverlayShare").css({"padding-bottom":"0"});jQuery("#socialOverlayRemix").css({display:"inline-block"});h._busy=!1})):jQuery("#galleryFeature").animate({opacity:0},
250,function(){jQuery(".twitterEmbed").hide();jQuery("#galleryFeatureImage").hide();"tweet"==d?(jQuery(".vineEmbed").remove(),jQuery("#twitterEmbed-"+h._current).length?jQuery("#twitterEmbed-"+h._current).show():jQuery("#galleryFeature").append('<div id="twitterEmbed-'+h._current+'" class="twitterEmbed" style="width:500px; margin:auto;">'+jQuery(c).attr("body")+"</div>")):"vine"==d&&(jQuery("#vineEmbed-"+h._current).length?jQuery("#vineEmbed-"+h._current).show():jQuery("#galleryFeature span").html('<div id="vineEmbed-'+
h._current+'" class="vineEmbed" style="width:600px; margin:auto;">'+jQuery(c).attr("body")+"</div>"));jQuery("#socialOverlayShare").css({"padding-bottom":"5px"});jQuery("#socialOverlayRemix").css({display:"none"});jQuery("#galleryPostRoll").hide();h._busy=!1;jQuery("#galleryFeature").fadeTo(250,1)});this.loadImage(this._current);jQuery(".currentThumb").removeClass("currentThumb");jQuery(c).addClass("currentThumb");630<f||580<g?(jQuery("#enlarge").show(),jQuery("#enlarge a").attr({href:"/pictures/enlarge/"+
this._currentId+"/"}),jQuery("#share")):jQuery("#enlarge").hide();jQuery("#remixLink a").attr({href:"/upload/?remixId="+this._currentId});jQuery("#currentThumbIndex").html(this._current);jQuery("#captionContent").html(b);""!=b?(jQuery("#captionOverlay").show(),jQuery("#captionContent").scrollTop(0)):jQuery("#captionOverlay").hide();jQuery("#captionReveal").hide();this._contest&&(b=jQuery("#contestRating div").attr("id"))&&(b=b.split("-"),b=b[1],jQuery("#ratingsWrapper-"+b).html(jQuery("#contestRating").html()),
this.loadRating(this._currentId));jQuery(c).attr("parentRemixUrl")?(jQuery("#remixesList").html("View Original"),jQuery("#remixesList").attr("href",jQuery(c).attr("parentRemixUrl"))):0<jQuery(c).attr("remixCount")?(jQuery("#remixesList").html(jQuery(c).attr("remixCount")+" Remixes"),jQuery("#remixesList").attr("href","/remixes/picture/"+this._currentId+"/")):(jQuery("#remixesList").html(""),jQuery("#remixesList").removeAttr("href"));jQuery("#shareUrl").val("http://www.ebaumsworld.com/pictures/view/"+
this._id+"/?image="+this._currentId);jQuery("#shareThumb img").attr("src",jQuery(c).attr("thumb"));Ebaum.ajaxRefresh(this._id);/:\/\/.*?(\/.*?)$/.exec(String(window.location));Ebaum.fireComscore(window.location.href+"#image="+this._currentId)}};EbaumMobileContestGallery.prototype.loadRating=function(b){jQuery("#contestRating").html(jQuery("#ratingsWrapper-"+b).html());jQuery("#ratingsWrapper-"+b).html("")};
EbaumMobileContestGallery.prototype.checkImageLoaded=function(b){return this._fullImages[b]&&this._fullImages[b].complete&&this._thumbImages[b].complete?!0:!1};
EbaumMobileContestGallery.prototype.loadImage=function(b){b>=this._count&&this._fullImages[this._count-1]?b=0:b>=this._count&&(b=this._count-1);this._fullImages[b]||(this._fullImages[b]=new Image,"picture"==jQuery(this._thumbImages[b]).attr("type")?this._fullImages[b].src=jQuery(this._thumbImages[b]).attr("path"):this._fullImages[b].src="http://images.ebaumsworld.com/img/blank.gif");return!0};
EbaumMobileContestGallery.prototype.loadThumbsInOrder=function(){var b=this;b._thumbImages[b._currentThumbToLoad].onload=function(){jQuery(this).prev().remove();jQuery(this).css({display:"inline"});b._currentThumbToLoad++;b._currentThumbToLoad<b._count&&!jQuery(b._thumbImages[b._currentThumbToLoad]).attr("src")&&b.loadThumbsInOrder()};b._thumbImages[b._currentThumbToLoad].src=jQuery(b._thumbImages[b._currentThumbToLoad]).attr("thumb")};
EbaumMobileContestGallery.prototype.loadImagesInOrder=function(){var b=this;this._fullImages[this._currentImageToLoad]=new Image;this._fullImages[this._currentImageToLoad].onload=function(){b._thumbImages[b._currentImageToLoad].onload=function(){jQuery(this).prev().remove();jQuery(this).css({display:"inline"});b._currentImageToLoad++;b._currentImageToLoad<b._count&&!b._fullImages[b._currentImageToLoad]?b.loadImagesInOrder():b._fullImages[0]||(b._count-b._start<b._scroll?b._currentImageToLoad==b._count?
b._currentImageToLoad=b._start-2:(b._currentImageToLoad-=2,b._currentImageToLoad<b._count-b._scroll-1&&(b._currentImageToLoad=0)):b._currentImageToLoad=0,b.loadImagesInOrder())};b._thumbImages[b._currentImageToLoad].src=jQuery(b._thumbImages[b._currentImageToLoad]).attr("thumb")};this._fullImages[this._currentImageToLoad].src=jQuery(this._thumbImages[this._currentImageToLoad]).attr("path")};EbaumMobileContestGallerySwipeMap.prototype=new EmuseSwipeMap;EbaumMobileContestGallerySwipeMap.constructor=EbaumMobileContestGallerySwipeMap;function EbaumMobileContestGallerySwipeMap(b){this._gallery=b}EbaumMobileContestGallerySwipeMap.prototype.handleSwipeLeft=function(b){this._gallery.nextHandler()};EbaumMobileContestGallerySwipeMap.prototype.handleSwipeRight=function(b){this._gallery.prevHandler()};EbaumMobileNav.prototype=new EmuseEvent;EbaumMobileNav.constructor=EbaumMobileNav;
function EbaumMobileNav(){this._swipeMap=new EbaumMobileNavSwipeMap(this);var b=this;jQuery("#mobileNavHitArea").on("click",b.triggerToggle);jQuery("#menuTrigger").toggle(function(){b.showNav();jQuery("#mainContent").on("click",b.disableClicks);jQuery("#mainContent").css({overflow:"hidden"})},function(){jQuery("#mainContent").off("click",b.disableClicks);jQuery("#mainContent").css({overflow:"auto"});b.hideNav()});jQuery("#headerSearchTrigger, #headerSearchClose").click(function(){jQuery("#searchExpanded").is(":visible")?jQuery("#searchExpanded").removeClass("opened"):
jQuery("#searchExpanded").addClass("opened")})}EbaumMobileNav.prototype.triggerToggle=function(b){jQuery("#menuTrigger").trigger("click")};
EbaumMobileNav.prototype.showNav=function(){var b=jQuery(document).scrollTop(),c=0,d=0-b,f=jQuery("#headerAppStoreLink").length;f&&jQuery("#headerAppStoreLink").offset().top;0<b&&(c=0-b,f&&(d=c));jQuery(".mainContainer, #mobileNav, .mobileNavHitArea").addClass("menuOpened");jQuery("#headerAppStoreLink").css({position:"relative",top:c+"px"});jQuery(".mainContent").css({top:d+"px"});EbaumSwipeMapStack.addMap(this._swipeMap)};
EbaumMobileNav.prototype.hideNav=function(){EbaumSwipeMapStack.removeMap();var b=jQuery("#headerAppStoreLink").length,c=jQuery(".mainContent").css("top"),d=jQuery("#headerAppStoreLink").css("top");jQuery("#mobileNav, .mainContainer, .mobileNavHitArea").removeClass("menuOpened");jQuery(".mainContent").css({top:"auto",overflow:"auto"});jQuery("#headerAppStoreLink").css({position:"relative",top:"auto"});b?window.scroll(0,-parseInt(d)):window.scroll(0,-parseInt(c))};
EbaumMobileNav.prototype.disableClicks=function(b){b.preventDefault();return!1};EbaumGalleryKeyMap.prototype=new EmuseKeyMap;EbaumGalleryKeyMap.constructor=EbaumGalleryKeyMap;function EbaumGalleryKeyMap(b){this._gallery=b}EbaumGalleryKeyMap.prototype.handleKeyUp=function(b){b=b||window.event;if(!this._gallery._busy)switch(b.keyCode){case 37:this._gallery.prevHandler();break;case 39:this._gallery.nextHandler()}};EbaumLightboxKeyMap.prototype=new EmuseKeyMap;EbaumLightboxKeyMap.constructor=EbaumLightboxKeyMap;function EbaumLightboxKeyMap(b){this._lightbox=b}EbaumLightboxKeyMap.prototype.handleKeyUp=function(b){b=b||window.event;switch(b.keyCode){case 27:jQuery("#jqEnlargeX").click();break;case 37:this._lightbox.prevHandler();break;case 39:this._lightbox.nextHandler()}};EbaumForm.prototype=new EmuseEvent;EbaumForm.constructor=EbaumForm;
function EbaumForm(b,c){this._container=b;this._ip=c.ip;this._avatar=c.avatar;this._ga=new EbaumGAEvent;this._container.onclick=this.bind(this.handleClick);var d=this;jQuery("input").focus(function(b){var c=b||window.event,c=c.target||c.srcElement;"signupBtn"!=c.id&&"forgotLoginBtn"!=c.id&&"submit"!=c.type&&"newsletterBtn"!=c.id&&d.handleClick(b)});jQuery("input").blur(function(b){b=b||window.event;b=(b.target||b.srcElement).id.split("-");jQuery("#label-"+b.id).removeClass("inputFocus")});jQuery("#register input[name=username]").blur(function(){var b=
jQuery("#register input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",value:b},function(b){b.success?jQuery("#register #usernameError").html(""):jQuery("#usernameError").html("Username already in use.  Please choose a different username.")})});jQuery("#register input[name=email]").blur(function(){var b=jQuery("#register input[name=email]").val();jQuery.getJSON("/user/checkavailable/",{type:"email",value:b},function(b){b.success?jQuery("#register #emailError").html(""):
jQuery("#emailError").html("Email already in use.  Please choose a different email address.")})})}
EbaumForm.prototype.handleClick=function(b){b=b||window.event;var c=b.target||b.srcElement,d=c.id.split("-"),f=d[0],d=d[1];jQuery(".inputFocus").removeClass("inputFocus");switch(f){case "input":jQuery("#label-"+d).addClass("inputFocus");break;case "femaleCheckBox":"f"!=jQuery("#gender").val()?(jQuery("#gender").val("f"),jQuery("#"+c.id).addClass("checked"),jQuery("#maleCheckBox").removeClass("checked")):(jQuery("#gender").attr("value",""),jQuery("#"+c.id).removeClass("checked"));break;case "maleCheckBox":"m"!=
jQuery("#gender").val()?(jQuery("#gender").val("m"),jQuery("#"+c.id).addClass("checked"),jQuery("#femaleCheckBox").removeClass("checked")):(jQuery("#gender").attr("value",""),jQuery("#maleCheckBox").removeClass("checked"));break;case "termsCheckBox":jQuery("#check-terms").val()?(jQuery("#check-terms").val(""),jQuery("#"+c.id).removeClass("checked"),jQuery("#signupBtn").attr("disabled",!0)):(jQuery("#check-terms").val(this._ip),jQuery("#"+c.id).addClass("checked"),jQuery("#signupBtn").attr("disabled",
!1));break;case "prizeTermsCheckBox":jQuery("#check-prizeTerms").val()?(jQuery("#check-prizeTerms").val(""),jQuery("#"+c.id).removeClass("checked"),jQuery("#prizeClaimSubmit").attr("disabled",!0)):(jQuery("#check-prizeTerms").val(!0),jQuery("#"+c.id).addClass("checked"),jQuery("#prizeClaimSubmit").attr("disabled",!1));break;case "newsCheckBox":jQuery("#check-news").val()?(jQuery("#check-news").val(""),jQuery("#"+c.id).removeClass("checked")):(jQuery("#check-news").val(1),jQuery("#"+c.id).addClass("checked"));
break;case "rememberCheck":jQuery("#rememberMe").val()?(jQuery("#rememberMe").val(""),jQuery("#"+c.id).removeClass("checked")):(jQuery("#rememberMe").val(1),jQuery("#"+c.id).addClass("checked"));break;case "avatarCheckBox":jQuery("#fbAvatar").val()?(jQuery("#fbAvatar").val(""),jQuery("#"+c.id).removeClass("checked")):(jQuery("#fbAvatar").val(this._avatar),jQuery("#"+c.id).addClass("checked"));break;case "fakeCheck":jQuery("#realCheck-"+d).val()?(jQuery("#realCheck-"+d).val(""),jQuery("#"+c.id).removeClass("checked")):
(jQuery("#realCheck-"+d).val(1),jQuery("#"+c.id).addClass("checked"));break;case "matureYesBox":"1"!=jQuery("#maturePref").val()?(jQuery("#maturePref").val("1"),jQuery("#"+c.id).addClass("checked"),jQuery("#matureNoBox").removeClass("checked")):(jQuery("#maturePref").attr("value",""),jQuery("#"+c.id).removeClass("checked"),jQuery("#matureNoBox").addClass("checked"));break;case "matureNoBox":""!=jQuery("#maturePref").val()?(jQuery("#maturePref").val(""),jQuery("#"+c.id).addClass("checked"),jQuery("#matureYesBox").removeClass("checked")):
(jQuery("#maturePref").attr("value","1"),jQuery("#"+c.id).removeClass("checked"),jQuery("#matureYesBox").addClass("checked"));break;case "signupBtn":this.submitSignup();break;case "forgotLoginBtn":b.preventDefault();this.forgotLogin();break;case "newsletterBtn":this.newsletterSignup();break;case "submitLoginBtn":jQuery("#loginError").html("");c="";""==jQuery("#input-username").val()&&(c="Please enter a username. ");""==jQuery("#input-password").val()&&(c+="Please enter a password");if(""!=c)return jQuery("#loginError").html(c),
b.preventDefault(),!1;break;default:jQuery(".uploadLabel").removeClass("inputFocus")}};EbaumForm.prototype.submitSignup=function(){var b=jQuery("#register").serialize();jQuery.post("/user/signup/",b,function(b){if(b.success)window.location="/";else{jQuery(".error").html("");var c=b.data.errors;if(null!=c){var f="";for(x in c)f+=c[x]+"<br />";jQuery("#submitError").html(f)}else jQuery("#submitError").html("Errors found. Please review.");b=b.data.fieldErrors;for(x in b)jQuery("#"+x+"Error").html(b[x])}})};
EbaumForm.prototype.forgotLogin=function(){var b=jQuery("#lost").serialize();jQuery.post("/user/forgotlogin/",b,function(b){if(b.success)window.location.reload();else if(jQuery("#submitError").html(""),b=b.data.errors,null!=b){var c="";for(x in b)c+=b[x]+"<br />";jQuery("#submitError").html(c)}})};
EbaumForm.prototype.newsletterSignup=function(){var b=jQuery("#input-email").val();jQuery("#newsletter-error").hide();if(0==jQuery.trim(b).length||0!=jQuery.trim(b).length&&!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(b))return jQuery("#newsletter-error").html("Enter a valid email address.").show(),!1;var c=this._ga;jQuery.getJSON("/newsletter/issubscribed/?email="+b,function(d){d.success?jQuery("#newsletter-error").html("Already subscribed to the newsletter.").show():jQuery.post("/newsletter/signup/",
{email:b},function(b){b.success&&(jQuery("#newsletter-error").html("Subscription Success!").show(),b="Right Column",0<jQuery("#mobileNav").length&&(b="Mobile"),c.fireGA("Newsletter Signup",b,window.location.href))})})};EbaumSlider.prototype=new EmuseEvent;EbaumSlider.constructor=EbaumSlider;function EbaumSlider(b){this._container=b;this._container.onmouseover=this.bind(this.handleEnter);this._container.onmouseout=this.bind(this.handleLeave)}
EbaumSlider.prototype.handleEnter=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.fromElement,d=b.id.split("-"),d=d[0];if("slider"!=d){for(;"slider"!=d&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),d=d[0];if("slider"==d)if(void 0===c)this.enterHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.enterHandler(b)}}else if(void 0===c)this.enterHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.enterHandler(b)}};
EbaumSlider.prototype.handleLeave=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.toElement,d=b.id.split("-"),d=d[0];if("slider"!=d){for(;"slider"!=d&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),d=d[0];if("slider"==d)if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}}else if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}};
EbaumSlider.prototype.enterHandler=function(b){jQuery("#"+b.id+" .slider").show(100)};EbaumSlider.prototype.leaveHandler=function(b){jQuery("#"+b.id+" .slider").hide(100)};EbaumRating.constructor=EbaumRating;function EbaumRating(b){this._container=b;var c=this;this._container.onclick=function(b){c.handleClick.call(c,b)};this._container.onmouseover=function(b){c.handleEnter.call(c,b)};this._container.onmouseout=function(b){c.handleLeave.call(c,b)}}
EbaumRating.prototype.handleEnter=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.fromElement,d=b.id.split("-"),f=d[0],d=d[2];if("stars"!=f){for(;"stars"!=f&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),f=d[0];if("stars"==f)if(void 0===c)this.enterHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.enterHandler(b)}}else if(d)this.enterHandler(b);else if(void 0===c)this.enterHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;
c!=b&&this.enterHandler(b)}};EbaumRating.prototype.enterHandler=function(b){var c=b.id.split("-"),d=c[1];if(c[2]&&jQuery("#stars-"+d+" .mediaStars").length)for(jQuery(b).attr("cursor","pointer"),d=c[1],c=c[2],jQuery("#stars-"+d+" .userDynamic .star").removeClass("yellowOn"),jQuery("#stars-"+d+" .userDynamic .star").addClass("off");0<c;c--)jQuery("#stars-"+d+"-"+c).removeClass("off"),jQuery("#stars-"+d+"-"+c).addClass("yellowOn");jQuery("#"+b.id+" .userStars").show();jQuery("#"+b.id+" .mediaStars").hide()};
EbaumRating.prototype.handleLeave=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.toElement,d=b.id.split("-"),f=d[0],g=d[1],d=d[2];if("stars"!=f){for(;"stars"!=f&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),f=d[0];if("stars"==f)if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}}else if(d)c.id.split("-")[2]?this.starLeaveHandler(b):jQuery("#stars-"+g+" .mediaStars").length&&(jQuery("#stars-"+
g+" .userStars").hide(),jQuery("#stars-"+g+" .mediaStars").show());else if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}};EbaumRating.prototype.starLeaveHandler=function(b){var c=b.id.split("-"),d=c[1];if(c[2]&&jQuery("#stars-"+d+" .mediaStars").length)for(jQuery(b).attr("cursor","pointer"),d=c[1],b=c[2];0<b;b--)jQuery("#stars-"+d+"-"+b).addClass("off"),jQuery("#stars-"+d+"-"+b).removeClass("yellowOn")};
EbaumRating.prototype.leaveHandler=function(b){b.id.split("-");jQuery("#"+b.id+" .mediaStars").length&&(jQuery("#"+b.id+" .userStars").hide(),jQuery("#"+b.id+" .mediaStars").show())};EbaumRating.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;jQuery(b.parentNode).hasClass("userDynamic")&&(b.id.split("-")[2]?this.submitUserRating(b):EbaumMobile.mobile?window.location="/user/login/":(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow()))};
EbaumRating.prototype.submitUserRating=function(b){b=jQuery(b).attr("id").split("-");var c=b[1],d=b[2],f=this;jQuery.post("/media/rate/"+c+"/",{rating:d},function(b){b.success?f.updateVoteDisplay(d,c):populateModal('<h1>Oops!</h1><div style="padding:9px;">'+b.error+"</div>")})};
EbaumRating.prototype.updateVoteDisplay=function(b,c){jQuery("#rating-"+c+" .userDynamic").addClass("userStatic");jQuery("#rating-"+c+" .userStatic .star").unbind();jQuery("#rating-"+c+" .userStatic").removeClass("userDynamic");jQuery("#rating-"+c+" .userStatic .star").attr("title",b+" stars");for(var d=b;0<d;d--)jQuery("#stars-"+c+"-"+d).removeClass("off"),jQuery("#stars-"+c+"-"+d).addClass("yellowOn");d=jQuery("#votes-"+c).html();d=parseInt(d);0<d?d++:d=1;jQuery("#votes-"+c).html(d);jQuery("#rating-"+
c+" .mediaStars").remove();jQuery("#rating-"+c+" .userStars").show();jQuery("#voteNowLabel-"+c).html("THANK YOU!");jQuery("#voteCTA").html("THANK YOU!")};var GalleryEvent={IMAGE_CHANGE:"image_change",LIGHTBOX_LAUNCH:"lightbox_launch",VIEW_CHANGE:"view_change"};EbaumGallery.prototype=new EmuseEvent;EbaumGallery.constructor=EbaumGallery;
function EbaumGallery(b,c,d){this._container=b;this._id=c.id;this._webPath=c.url;this._count=c.count;this._start=c.start;this._mobile=d;this._busy=!1;this._contest=c.contest;this._fullImages=[];this._thumbImages=jQuery("img.galleryThumbImage");this._lightboxIndex=this._current=this._start;this._currentImageToLoad=this._start-1;this._currentThumbToLoad=0;this._enlarge=new EbaumEnlarge(d);this._lightbox=new EbaumLightbox;this._ga=new EbaumGAEvent;this._view=c.view;this._postroll=c.postroll;this._postroll||
(this._postroll=1);this._playerLoaded=!1;this._view||(this._view="player",this._playerLoaded=!0);this._ga.fireGA("Gallery - Start View",this._view,window.location,!0);this._lightbox.addListener(LightboxEvent.CLOSE,this.bind(this.lightboxCloseHandler));this._lightbox.addListener(LightboxEvent.NAV_NEXT,this.bind(this.changeLightbox));this._lightbox.addListener(LightboxEvent.NAV_PREV,this.bind(this.changeLightbox));this._lightbox.addListener(LightboxEvent.CHANGE_COMPLETE,this.bind(this.changeLightboxComplete));
this._lightbox.addListener(LightboxEvent.RESTART,this.bind(this.changeLightbox));startId=jQuery("#overlay-grid-"+this._start+" .galleryThumbImage").attr("id");info=startId.split("-");this._currentId=startId=info[2];b=new EbaumGalleryKeyMap(this);EbaumKeyMapStack.addMap(b);var f=this;"ontouchstart"in window?(this._container.ontouchstart=function(b){f.handleClick.call(f,b)},jQuery("#galleryFeature").swipe({swipe:function(b,c,d,l,m){f.handleSwipe.call(f,b,c,d,l,m)},click:!0,allowPageScroll:"vertical",
threshold:100})):this._container.onclick=function(b){f.handleClick.call(f,b)};this._mobile||EbaumSocialOverlayDisplay.init();this.loadImage(this._currentImageToLoad);this._contest?jQuery("#contestRating").html(jQuery("#ratingsWrapper-"+startId).html()):this.loadThumbsInOrder();this._current=this._start;this.changeImage(this._start);jQuery(".galleryView").hide();jQuery("#gallery-view-"+this._view).show()}
EbaumGallery.prototype.handleClick=function(b){b=b||window.event;var c=b.target||b.srcElement,d=c.id.split("-");b=d[1];if(!this._busy)switch(d[0]){case "view":jQuery(".galleryViewFilters li").removeClass("active");jQuery("#"+c.id).addClass("active");this._view=b;jQuery(".galleryView").hide();jQuery("#gallery-view-"+this._view).show();"player"==this._view&&0==this._playerLoaded&&(this.changeImage(1),this._playerLoaded=!0,jQuery("#captionContentInner").scrollTop(1));Ebaum.setCookie("galleryView",b,
100);this._ga.fireGA("Gallery - View Change",b,window.location);this.fire(GalleryEvent.VIEW_CHANGE);break;case "thumb":case "enlarge":this.handleEnlarge(c.id,!0);break;case "galleryNext":this.nextHandler();break;case "galleryPrev":this.prevHandler();break;case "thumb":this.thumbHandler(c);break;case "thumbNum":this.thumbHandler(c.nextElementSibling);break;case "galleryFeatureImage":this.handleEnlarge("galleryFeaturedImage-"+this._current+"-"+this._currentId+"-view-"+this._view,!0);break;case "gridToggle":jQuery("#gridOverlay").toggle();
break;case "share":imageId=d[3];"player"==this._view?(url="http://www.ebaumsworld.com"+this._webPath+"?image="+this._currentId,src=jQuery("#galleryFeatureImage").attr("src"),c="player"):(url="http://www.ebaumsworld.com"+this._webPath+"/?image="+imageId,src=jQuery("#overlay-list-"+imageId+" .galleryListImage").attr("src"),c="list");EbaumManualShare._thumb=src;switch(b){case "facebook":EbaumManualShare.shareFacebook(url,c);break;case "twitter":EbaumManualShare.shareTwitter(url,c);break;case "stumble":EbaumManualShare.shareStumble(url,
c);break;case "email":EbaumManualShare.shareEmail(url,c);break;case "pinterest":EbaumManualShare.sharePinterest(url,c);break;case "whatsapp":EbaumManualShare.shareWhatsapp(url,c)}break;case "replayGallery":jQuery(".vineEmbed").remove();jQuery("#galleryPostRoll").hide();jQuery(".pictureContainer").removeClass("postRoll");jQuery("#galleryFeature").show();jQuery(".galleryProgress").show();jQuery("#galleryControlBar").show();jQuery("#galleryPlayerShare").show();this._ga.fireGA("Gallery - Replay","player-"+
this._postroll,window.location.href);jQuery("#overlay-galleryContainer .overlay").css({opacity:"1"});ga("send","pageview");this.changeImage(1);break;case "shareToggle":jQuery("#shareOverlay").hide();break;case "shareLink":jQuery("#shareOverlay").show()}};EbaumGallery.prototype.handleKeyUp=function(b){if(!this._busy)switch((b||window.event).keyCode){case 37:this.prevHandler();break;case 39:this.nextHandler()}};
EbaumGallery.prototype.handleSwipe=function(b,c,d,f,g){"left"==c?this.nextHandler():"right"==c&&this.prevHandler()};EbaumGallery.prototype.handleEnlarge=function(b,c){if(!(0<jQuery(".mobileToggle").length)){var d=b.split("-"),f=d[1],g={currentIndex:f,currentId:this._currentId,imageCount:this._count};c&&(this._lightbox.launch("/pictures/enlarge/"+d[2]+"/",g),this._lightboxIndex=f,this._ga.fireGA("Gallery - View Change","lightbox",window.location.href),this.fire(GalleryEvent.LIGHTBOX_LAUNCH))}};
EbaumGallery.prototype.lightboxCloseHandler=function(b){"player"==this._view&&jQuery("#jqEnlargeModal").is(":visible")&&this.seekHandler(this._lightboxIndex)};
EbaumGallery.prototype.changeLightbox=function(b){if(!this._busy)if(b=b.type,current=parseInt(this._lightboxIndex),current=b==LightboxEvent.NAV_NEXT?current+1:b==LightboxEvent.NAV_PREV&&current==this._count?this._lightbox._postroll?this._count:this._count-1:current-1,b==LightboxEvent.RESTART&&(current=1),current>this._count)this._lightbox.launchPostroll(),this._busy=!1;else{0==current&&(current=this._count);this._lightboxIndex=current;b=jQuery("#overlay-grid-"+this._lightboxIndex+" .galleryThumbImage");
this.loadImage(this._lightboxIndex-1);this._busy=!0;var c=jQuery(b).attr("id");void 0!=c&&(c.split("-"),b=jQuery(b),c=b.prop("id"),c=c.split("-"),b={index:this._lightboxIndex,id:c[2],image:this._fullImages[this._lightboxIndex-1],type:b.attr("type"),origWidth:b.attr("dimwidth"),origHeight:b.attr("dimheight"),title:b.attr("title"),description:b.attr("description"),body:b.attr("body"),ratingsHTML:jQuery("#ratings-"+c[2]).html(),username:b.attr("username"),avatar:b.attr("avatar"),uploaddate:b.attr("uploaddate"),
contestrank:b.attr("contestrank")},this._lightbox.change(b),this.loadImage(current))}};EbaumGallery.prototype.changeLightboxComplete=function(b){this._busy=!1};EbaumGallery.prototype.tweetLoaded=function(b){jQuery(".galleryLoader").hide();jQuery(".tweetEnlarge").css({opacity:1});jQuery("#galleryFeature").css({opacity:1})};
EbaumGallery.prototype.nextHandler=function(){if("postroll"==this._current)jQuery("#nextGallery .thumbnail a").click(),document.location=jQuery("#nextGallery .thumbnail a").attr("href");else if(this._current<this._count)this.changeImage(this._current+1);else{jQuery("#galleryPostRoll").show();jQuery("#mainImage").addClass("postRoll");jQuery(".galleryProgress").hide();jQuery("#galleryControlBar").hide();jQuery(".vineEmbed").remove();jQuery("#galleryPlayerShare").hide();jQuery("#overlay-galleryContainer .overlay").css({opacity:"0"});
var b=jQuery("#replayGallery img").attr("src");b||(b=jQuery("#replayGalleryShare img").attr("src"));jQuery("#galleryFeatureImage").attr("src",b);jQuery("#galleryFeature").css({height:"auto","margin-top":"auto"});jQuery("#galleryFeatureImage").css({height:"auto",width:"100%"});this._ga.fireGA("Gallery - Postroll","player-"+this._postroll,window.location.href);featureHeight=jQuery("#mainImage").height();imageHeight=jQuery("#galleryFeatureImage").height();imageHeight<featureHeight&&jQuery("#galleryFeature").css({"margin-top":featureHeight-
imageHeight});this._current="postroll"}this.fire(GalleryEvent.IMAGE_CHANGE)};EbaumGallery.prototype.prevHandler=function(){"postroll"==this._current?(jQuery(".vineEmbed").remove(),jQuery("#galleryFeature").show(),jQuery("#galleryPostRoll").hide(),jQuery(".pictureContainer").removeClass("postRoll"),jQuery(".galleryProgress").show(),jQuery("#share").show(),this.changeImage(this._count)):1<this._current?this.changeImage(this._current-1):this.changeImage(this._count);this.fire(GalleryEvent.IMAGE_CHANGE)};
EbaumGallery.prototype.seekHandler=function(b){b<=this._count&&0<b&&(this.changeImage(b),jQuery("body,html").animate({scrollTop:380},500))};EbaumGallery.prototype.thumbHandler=function(b){b=jQuery(b);b=parseInt(jQuery(b).parent("li").attr("id").match(/([0-9]+)/)[0]);this._current!=b&&(this.loadImage(b-1),this.changeImage(b),jQuery("#gridOverlay").toggle())};
EbaumGallery.prototype.changeImage=function(b){this._current=parseInt(b);if("list"!=this._view){var c=jQuery("#overlay-grid-"+this._current+" .galleryThumbImage");this.loadImage(this._current-1);this._busy=!0;b=jQuery(c).attr("id");if(void 0!=b){var d=b.split("-"),f=d[0];this._previousId=this._currentId;this._currentId=d[2];var g=jQuery(c).attr("path");jQuery(c).attr("title");b=jQuery(c).attr("description");jQuery(c).attr("avgrating");var h=jQuery(c).attr("dimwidth"),d=jQuery(c).attr("dimheight"),
f=jQuery(c).attr("type"),k=this;if("picture"==f)if(jQuery(".twitterEmbed").hide(),jQuery(".vineEmbed").remove(),0!=jQuery("#galleryFeature img").length&&jQuery("#galleryFeaturedImage").is(":visible")&&jQuery("#galleryFeature img").attr("src")==k._fullImages[k._current-1].src&&this._start!=this._current)this._busy=!1;else{h>d?(newWidth=jQuery("#galleryFeature").width(),newHeight=newWidth*d/h,600<newHeight&&(newHeight=600,newWidth=newHeight*h/d)):(newHeight=600,newWidth=newHeight*h/d,newWidth>jQuery("#galleryFeature").width()&&
(newWidth=jQuery("#galleryFeature").width(),newHeight=newWidth*d/h));var l=0;500>newHeight&&(l=(500-newHeight)/2);jQuery("#galleryFeature").animate({opacity:0},250,function(){jQuery("#galleryFeature #galleryFeatureImage").remove();jQuery("#galleryFeature").append(k._fullImages[k._current-1]);jQuery("#galleryFeature img").prop("id","galleryFeatureImage");jQuery("#galleryFeatureImage").attr("src",g);jQuery("#galleryFeatureImage").show();jQuery("img#galleryFeatureImage").animate({width:newWidth+"px"},
250,function(){});jQuery("img#galleryFeatureImage, #galleryFeature").animate({height:newHeight+"px","margin-top":0},250,function(){jQuery("#galleryFeature").css({"margin-top":l+"px"})});jQuery(".galleryLoader").hide();jQuery("#galleryFeature").fadeTo(250,1);jQuery("#galleryPostRoll").hide();jQuery("#galleryFeature").show();jQuery("#socialOverlayShare").css({"padding-bottom":"0"});jQuery("#socialOverlayRemix").css({display:"inline-block"});k._busy=!1})}else jQuery("#galleryFeature").animate({opacity:0},
250,function(){jQuery(".twitterEmbed").hide();jQuery("#galleryFeatureImage").hide();"tweet"==f?(jQuery(".vineEmbed").hide(),jQuery("#twitterEmbed-"+k._current).length?jQuery("#twitterEmbed-"+k._current).show():(jQuery("#galleryFeature").append('<div id="twitterEmbed-'+k._current+'" class="twitterEmbed">'+jQuery(c).attr("body")+"</div>"),jQuery("#galleryFeature").css({opacity:0}),jQuery(".galleryLoader").show())):"vine"==f&&(jQuery("#vineEmbed-"+k._current).length?jQuery("#vineEmbed-"+k._current).show():
jQuery("#galleryFeature").append('<div id="vineEmbed-'+k._current+'" class="vineEmbed">'+jQuery(c).attr("body")+"</div>"),jQuery("#vineEmbed-"+k._current).show(),jQuery(".galleryLoader").hide());jQuery("#galleryFeature").css({padding:"30px 0"});jQuery("#socialOverlayShare").css({"padding-bottom":"5px"});jQuery("#socialOverlayRemix").css({display:"none"});jQuery("#galleryPostRoll").hide();k._busy=!1;jQuery("#galleryFeature").fadeTo(250,1)});this.loadImage(this._current);jQuery(".currentThumb").removeClass("currentThumb");
jQuery(c).addClass("currentThumb");h=jQuery("#gallery-view-player .imageEnlarge").prop("id");d=h.split("-");d="enlarge-"+this._current+"-"+this._currentId+"-"+d[3];jQuery("#"+h).prop("id",d);jQuery("#remixLink a").attr({href:"/upload/?remixId="+this._currentId});jQuery("#currentThumbIndex").html(this._current);jQuery("#captionContentInner").html(b);""!=b&&jQuery("#captionContentInner").scrollTop(0);this._contest&&((b=jQuery("#rating-"+this._previousId).html())&&jQuery("#ratings-"+this._previousId).html(b),
jQuery("#rating-"+this._previousId).html(jQuery("#ratings-"+this._currentId).html()).attr("id","rating-"+this._currentId),jQuery("#ratings-"+this._currentId).html(""),jQuery("#rating-"+this._currentId+" .userDynamic").length?jQuery(".voteCTA").html("VOTE NOW!"):jQuery(".voteCTA").html("VOTED!"),jQuery("#uploaderAvatar").attr("href","/user/profile/"+jQuery(c).attr("username")),jQuery("#uploaderUsername").attr("href","/user/profile/"+jQuery(c).attr("username")).html(jQuery(c).attr("username")),jQuery("#uploaderAvatar img").attr("src",
jQuery(c).attr("avatar")),(b=jQuery(c).attr("contestrank"))?("finalist"==b?(jQuery("#contestRank div").addClass("finalist"),jQuery("#contestRank div").html("finalist")):(jQuery("#contestRank div").removeClass("finalist"),jQuery("#contestRank div").html("winner")),jQuery("#contestRank").show()):jQuery("#contestRank").hide());jQuery(c).attr("parentRemixUrl")?(jQuery("#remixesList").html("View Original"),jQuery("#remixesList").attr("href",jQuery(c).attr("parentRemixUrl"))):0<jQuery(c).attr("remixCount")?
(jQuery("#remixesList").html(jQuery(c).attr("remixCount")+" Remixes"),jQuery("#remixesList").attr("href","/remixes/picture/"+this._currentId+"/")):(jQuery("#remixesList").html(""),jQuery("#remixesList").removeAttr("href"));jQuery("#shareUrl").val("http://www.ebaumsworld.com"+this._webPath+"/?image="+this._currentId);jQuery("#shareThumb img").attr("src",jQuery(c).attr("thumb"));Ebaum.ajaxRefresh(this._id);/:\/\/.*?(\/.*?)$/.exec(String(window.location));Ebaum.fireComscore(window.location.href+"#image="+
this._currentId)}}};EbaumGallery.prototype.loadRating=function(b){jQuery("#ratingsContestWrapper").html(jQuery("#ratings-"+b).html());jQuery("#ratingsWrapper-"+b).html("")};EbaumGallery.prototype.checkImageLoaded=function(b){return this._fullImages[b]&&this._fullImages[b].complete&&this._thumbImages[b].complete?!0:!1};
EbaumGallery.prototype.loadImage=function(b){b>=this._count&&this._fullImages[this._count-1]?b=0:b>=this._count&&(b=this._count-1);this._fullImages[b]||(this._fullImages[b]=new Image,"picture"==jQuery(this._thumbImages[b]).attr("type")?this._fullImages[b].src=jQuery(this._thumbImages[b]).attr("path"):("tweet"==jQuery(this._thumbImages[b]).attr("type")?jQuery("#galleryFeature").append('<div id="twitterEmbed-'+(b+1)+'" class="twitterEmbed">'+jQuery(this._thumbImages[b]).attr("body")+"</div>"):jQuery("#galleryFeature").append('<div id="vineEmbed-'+
(b+1)+'" class="vineEmbed">'+jQuery(this._thumbImages[b]).attr("body")+"</div>"),this._fullImages[b].src="http://images.ebaumsworld.com/img/blank.gif"));return!0};
EbaumGallery.prototype.loadThumbsInOrder=function(){var b=this;b._thumbImages[b._currentThumbToLoad].onload=function(){jQuery(this).prev().remove();jQuery(this).css({display:"block"});b._currentThumbToLoad++;b._currentThumbToLoad<b._count&&!jQuery(b._thumbImages[b._currentThumbToLoad]).attr("src")&&b.loadThumbsInOrder()};jQuery(b._thumbImages[b._currentThumbToLoad]).hide();b._thumbImages[b._currentThumbToLoad].src=jQuery(b._thumbImages[b._currentThumbToLoad]).attr("thumb")};
EbaumGallery.prototype.loadImagesInOrder=function(){var b=this;this._fullImages[this._currentImageToLoad]=new Image;this._fullImages[this._currentImageToLoad].onload=function(){b._thumbImages[b._currentImageToLoad].onload=function(){jQuery(this).prev().remove();jQuery(this).css({display:"inline"});b._currentImageToLoad++;b._currentImageToLoad<b._count&&!b._fullImages[b._currentImageToLoad]?b.loadImagesInOrder():b._fullImages[0]||(b._count-b._start<b._scroll?b._currentImageToLoad==b._count?b._currentImageToLoad=
b._start-2:(b._currentImageToLoad-=2,b._currentImageToLoad<b._count-b._scroll-1&&(b._currentImageToLoad=0)):b._currentImageToLoad=0,b.loadImagesInOrder())};b._thumbImages[b._currentImageToLoad].src=jQuery(b._thumbImages[b._currentImageToLoad]).attr("thumb")};this._fullImages[this._currentImageToLoad].src=jQuery(this._thumbImages[this._currentImageToLoad]).attr("path")};EbaumMobileGallery.constructor=EbaumMobileGallery;function EbaumMobileGallery(b,c){this._container=b;this._id=c.id;this._start=c.start;this._webPath=c.url;this._fullImages=[];this._thumbImages=[];this._lastClicked;var d=this;this._container.onclick=function(b){d.handleClick.call(d,b)};if(1<this._start){var f=jQuery(".mobileGalleryItem")[this._start-1];jQuery("html, body").animate({scrollTop:jQuery(f).offset().top},500)}}
EbaumMobileGallery.prototype.handleClick=function(b){var c=b||window.event,c=c.target||c.srcElement,d=c.id.split("-"),f=d[0],g=d[1];if(!this._busy)switch(console.log(c.id),f){case "mobileGalleryShareToggle":case "mobileGalleryListImage":this.clickHandler(c);break;case "mobileGalleryGifPlay":b.stopPropagation();this.playHandler(c);break;case "share":switch(place=d[3],imageId=d[4],url="http://www.ebaumsworld.com"+this._webPath+"?image="+imageId,src=jQuery("#mobileGalleryImage-"+place+" .mobileGalleryListImage").attr("src"),
extra="list",EbaumManualShare._thumb=src,g){case "facebook":EbaumManualShare.shareFacebook(url,extra);break;case "twitter":EbaumManualShare.shareTwitter(url,extra);break;case "stumble":EbaumManualShare.shareStumble(url,extra);break;case "email":EbaumManualShare.shareEmail(url,extra);break;case "pinterest":EbaumManualShare.sharePinterest(url,extra);break;case "whatsapp":EbaumManualShare.shareWhatsapp(url,extra)}}};
EbaumMobileGallery.prototype.clickHandler=function(b){b=jQuery(b).attr("id");var c=b.split("-"),d="none"==jQuery("#mobileImageShare-"+c[1]).css("display");jQuery(".mobileImageShare").css({display:"none"});if(d){var d=jQuery("#"+b).attr("gif-src"),f=jQuery("#"+b).attr("src");d&&f!=d?(jQuery(".mobileGalleryGifPlay").show(),this.playGif(d,f,b)):jQuery("#mobileImageShare-"+c[1]).show()}else jQuery(".mobileImageShare").css({display:"none"})};
EbaumMobileGallery.prototype.playHandler=function(b){b=jQuery(b).attr("id");b="mobileGalleryImage-"+b.split("-")[1];var c=jQuery("#"+b+" img").attr("gif-src"),d=jQuery("#"+b+" img").attr("src");c&&d!=c&&this.playGif(c,d,b);jQuery(".mobileImageShare").css({display:"none"})};
EbaumMobileGallery.prototype.playGif=function(b,c,d){var f=d.split("-");this._lastClicked=f[1];jQuery(".mobileGalleryGifPlay").show();jQuery("#mobileGalleryGifPlay-"+f[1]).addClass("mobileGifLoading");var g=this;jQuery(".mobileGalleryImage img").each(function(){var d=jQuery(this).attr("id").split("-"),k=jQuery(this).attr("gif-src"),l=jQuery(this).attr("src");if(k&&l==c&&d[1]==f[1])if(g._fullImages[f[1]])jQuery("#mobileGalleryGifPlay-"+f[1]).hide(),jQuery("#mobileGalleryGifPlay-"+f[1]).removeClass("mobileGifLoading"),
jQuery(m).addClass("gifPlaying"),jQuery(this).attr("src",g._fullImages[f[1]].src);else{var m=this;g._thumbImages[f[1]]=new Image;g._thumbImages[f[1]].src=c;g._fullImages[f[1]]=new Image;g._fullImages[f[1]].onload=function(){jQuery("#mobileGalleryGifPlay-"+f[1]).removeClass("mobileGifLoading");0==jQuery(".gifPlaying").length||g._lastClicked==d[1]?(jQuery("#mobileGalleryGifPlay-"+f[1]).hide(),jQuery(m).attr("src",g._fullImages[f[1]].src),jQuery(m).addClass("gifPlaying")):jQuery("#mobileGalleryGifPlay-"+
f[1]).show()};g._fullImages[f[1]].src=b}else k&&k==l&&(k=jQuery(this).attr("id").split("-"),jQuery(this).attr("src",g._thumbImages[k[1]].src),jQuery(m).removeClass("gifPlaying"))})};
EbaumMobileGallery.prototype.loadImage=function(b){b>=this._count&&this._fullImages[this._count-1]?b=0:b>=this._count&&(b=this._count-1);this._fullImages[b]||(this._fullImages[b]=new Image,"picture"==jQuery(this._thumbImages[b]).attr("type")?this._fullImages[b].src=jQuery(this._thumbImages[b]).attr("path"):this._fullImages[b].src="http://images.ebaumsworld.com/img/blank.gif");return!0};var LightboxEvent={LAUNCH:"launch",NAV_NEXT:"nav_next",NAV_PREV:"nav_prev",CLOSE:"close",CHANGE_COMPLETE:"change_complete",RESTART:"restart"};EbaumLightbox.prototype=new EmuseEvent;EbaumLightbox.constructor=EbaumLightbox;
function EbaumLightbox(){this._container;this._containerId="#jqEnlargeModal";this._countContainer;this._indexContainerId="#enlargeCurrentIndex";this._imageCount=0;this._images=[];this._currentIndex=0;this._currentId;this._keyMap=new EbaumLightboxKeyMap(this);this._ga=new EbaumGAEvent;this._postroll=!1;this._sizeConfig={rightColWidth:320,maxImgWidth:window.innerWidth-322,minContentHeight:window.innerHeight-2};this.addListener(LightboxEvent.LAUNCH,this.launchHandler);this.addListener(LightboxEvent.CLOSE,
this.closeHandler);var b=this;jQuery(document).ready(function(){jQuery("body").prepend('<div id="jqEnlargeModal" class="jqmWindow enlargeModal galleryLightbox"></div>');jQuery(b._container).jqm();b._container=document.getElementById("jqEnlargeModal");b._container.onclick=b.bind(b.handleClick)});jQuery(window).resize(function(){if(jQuery(b._container).is(":visible")){b._sizeConfig.maxImgWidth=window.innerWidth-b._sizeConfig.rightColWidth-2;b._sizeConfig.minContentHeight=window.innerHeight-2;var c=
jQuery("#enlargedImage").attr("dimwidth"),d=jQuery("#enlargedImage").attr("dimheight");b.resizeImage(c,d);b.resizeCaption()}})}
EbaumLightbox.prototype.handleClick=function(b){b=b||window.event;var c=(b.target||b.srcElement).id.split("-"),d=c[1];switch(c[0]){case "enlargeNav":c=jQuery("#rating-"+this._currentId).html();jQuery("#ratings-"+this._currentId).html(c);jQuery("#enlargeRatings").html(jQuery("#ratings-"+this._currentId).html());"prev"==d?this.prevHandler(b):this.nextHandler(b);break;case "share":base=window.location.href;parts=base.split("?");url=parts[0];jQuery(".enlargeNavigation").length&&(url+="?image="+this._currentId);
switch(d){case "facebook":EbaumManualShare.shareFacebook(url,"lightbox");break;case "twitter":EbaumManualShare.shareTwitter(url,"lightbox");break;case "stumble":EbaumManualShare.shareStumble(url,"lightbox");break;case "email":EbaumManualShare.shareEmail(url,"lightbox");break;case "whatsapp":EbaumManualShare.shareWhatsapp(url,"lightbox");break;case "pinterest":EbaumManualShare.sharePinterest(url,"lightbox")}break;case "enlargeReplayGallery":this._ga.fireGA("Gallery - Replay","lightbox",window.location.href),
this.fire(LightboxEvent.RESTART),this.hidePostroll()}};
EbaumLightbox.prototype.launch=function(b,c){jQuery("#jqEnlargeModal").jqm({onLoad:function(b){jQuery("#mediumrect_atf").hide()},onHide:function(b){jQuery("#mediumrect_atf").show();b.w.fadeOut("2000",function(){b.o.remove()})}});this._imageCount=c.imageCount;this._currentIndex=c.currentIndex;this._currentId=c.currentId;jQuery("#ratings-"+this._currentId).html(jQuery("#rating-"+this._currentId).html());var d=this;jQuery.get(b,function(b){jQuery("body").css({overflow:"hidden"});jQuery(d._container).css({width:""});
jQuery(d._container).jqmShow();jQuery(d._container).html("");jQuery(d._container).append(b);jQuery("#enlargeGalleryCount").html(d._imageCount);jQuery(d._indexContainerId).html(d._currentIndex);jQuery("#rating-"+d._currentId).prop("id","rating-paused").html("");jQuery("#ratings-"+d._currentId).html("");jQuery("#enlargeRatings").prop("id","rating-"+d._currentId);jQuery("#rating-"+d._currentId+" .userDynamic").length?jQuery("#voteCTA").html("VOTE NOW!"):jQuery("#voteCTA").html("VOTED!");b=jQuery("#enlargedImage").attr("dimwidth");
var c=jQuery("#enlargedImage").attr("dimheight");d.resizeImage(b,c);jQuery(d._container).jqmAddClose(".jqEnlargeClose");this.iPhone&&(b=jQuery("#siteContainer").height(),c=jQuery(window).scrollTop(),jQuery(".jqmOverlay").css({height:b+"px"}),jQuery(d._container).css({top:c+50+"px"}));jQuery(".jqmOverlay, #jqEnlargeX").click(function(){d.fire(LightboxEvent.CLOSE)});EbaumKeyMapStack.addMap(d._keyMap);d.resizeCaption()})};
EbaumLightbox.prototype.center=function(b){b>screen.availWidth||b>jQuery(window).width()||jQuery(window).width()};
EbaumLightbox.prototype.resizeImage=function(b,c){newWidth=this._sizeConfig.maxImgWidth;newHeight=newWidth*c/b;newHeight>this._sizeConfig.minContentHeight&&(newHeight=this._sizeConfig.minContentHeight,newWidth=newHeight*b/c);jQuery("#enlargedImage").css({margin:"auto"});jQuery(".enlargeContent img").css({"margin-top":1});if(newHeight<this._sizeConfig.minContentHeight){var d=this._sizeConfig.minContentHeight-newHeight;jQuery(".enlargeContent img").css({"margin-top":d/2+"px"})}jQuery(".enlargeContent").css({width:this._sizeConfig.maxImgWidth+
2+"px"});jQuery("#enlargedImage").css({height:newHeight+"px",width:newWidth+"px"});jQuery("#lightboxShare").css({top:jQuery("#enlargedImage").css("margin-top"),left:jQuery("#enlargedImage").offset().left})};
EbaumLightbox.prototype.resizeCaption=function(){var b=window.innerHeight-30,c=jQuery("#enlargeCaption").offset();if(c){var d=c.top-jQuery(window).scrollTop();jQuery(window).scrollLeft();50<b-d&&!jQuery("#lightboxAd").is(":visible")&&jQuery("#lightboxAd").show();c=jQuery("#lightboxAd").offset();c=c.top-jQuery(window).scrollTop()-d-30;0<c||(jQuery("#lightboxAd").hide(),c=b-d);jQuery("#enlargeCaption, #enlargeCaptionInner").css({"max-height":c+"px"});jQuery("#enlargeCaption .ps-scrollbar-y-rail").css({height:c+
"px"})}};EbaumLightbox.prototype.closeHandler=function(b){b=jQuery("#rating-"+this._currentId).html();jQuery("#rating-"+this._currentId).html("").prop("id","enlargeRatings");jQuery("#rating-paused").html(b).prop("id","rating-"+this._currentId);jQuery("body").css({overflow:"auto"})};EbaumLightbox.prototype.prevHandler=function(b){this.fire(LightboxEvent.NAV_PREV)};EbaumLightbox.prototype.nextHandler=function(b){this.fire(LightboxEvent.NAV_NEXT)};
EbaumLightbox.prototype.change=function(b){var c=this,d=this._currentId;this._currentId=b.id;this.hidePostroll();"picture"==b.type?(jQuery(".twitterEmbed").hide(),jQuery(".vineEmbed").remove(),b.origWidth=parseInt(b.origWidth),b.origHeight=parseInt(b.origHeight),jQuery(this._containerId).animate({opacity:0},250,function(){jQuery("#enlargedImage").remove();jQuery(".enlargeContent").append(b.image);jQuery(".enlargeContent img").prop("id","enlargedImage");jQuery("#enlargedImage").attr("dimwidth",b.origWidth);
jQuery("#enlargedImage").attr("dimheight",b.origHeight);jQuery("#enlargedImage").css({"margin-top":0});c.resizeImage(b.origWidth,b.origHeight);jQuery(c._containerId).css({opacity:1});jQuery("#socialOverlayShare").css({"padding-bottom":"0"});jQuery("#socialOverlayRemix").css({display:"inline-block"});gallery&&(gallery._busy=!1)})):jQuery(this._containerId).animate({opacity:0},250,function(){jQuery(".tweetEnlarge").hide();jQuery(".vineEnlarge").hide();"tweet"==type?(jQuery("#tweetEnlarge-"+b.index).length?
jQuery("#tweetEnlarge-"+b.index).show():(jQuery(".enlargeContent").append('<div id="tweetEnlarge-'+b.index+'" class="tweetEnlarge">'+b.body+"</div>"),jQuery("#tweetEnlarge-"+b.index).css({opacity:0}),jQuery("#enlargeLoader").show()),c.centerLightbox(900)):"vine"==type&&(jQuery("#vineEmbed-"+b.index).length?jQuery("#vineEmbed-"+b.index).show():jQuery(".enlargeContent").append('<div id="vineEmbed-'+b.index+'" class="vineEmbed">'+b.body+"</div>"),this.centerLightbox(920));jQuery(this._containerId).css({opacity:1});
gallery&&(gallery._busy=!1)});jQuery("#enlargeCurrentIndex").html(b.index);jQuery("#enlargeTitle").html(b.title);jQuery("#enlargeCaptionInner").html(b.description);this.updateVoteDisplay(b,d);jQuery("#enlargeCaptionInner").perfectScrollbar("update");b.contestrank?(jQuery(".enlargeDetails").addClass("rank"),jQuery("#enlargeContestRank div").html(b.contestrank),jQuery("#enlargeContestRank").show()):(jQuery("#enlargeContestRank").hide(),jQuery(".enlargeDetails").removeClass("rank"))};
EbaumLightbox.prototype.launchPostroll=function(){jQuery("#enlargePostRoll").width(jQuery("#overlay-enlargeContent").width());jQuery("#overlay-enlargeContent").hide();jQuery("#enlargePostRoll").show();jQuery(".enlargeDetails").hide();this._ga.fireGA("Gallery - Postroll","lightbox",window.location.href);this._postroll=!0;FB.XFBML.parse()};
EbaumLightbox.prototype.hidePostroll=function(){jQuery("#overlay-enlargeContent").show();jQuery("#enlargePostRoll").hide();jQuery(".enlargeDetails").show();this._postroll=!1};
EbaumLightbox.prototype.updateVoteDisplay=function(b,c){jQuery("#ratings-"+c).html(jQuery("#rating-"+c).html());jQuery("#rating-"+c).html(b.ratingsHTML).prop("id","rating-"+this._currentId);jQuery("#ratings-"+this._currentId).html("");jQuery("#rating-"+this._currentId+" .userDynamic").length?jQuery("#voteCTA").html("VOTE NOW!"):jQuery("#voteCTA").html("VOTED!");jQuery("#enlargeUploaderAvatar").prop("href","/user/profile/"+b.username);jQuery("#enlargeUploaderUsername").prop("href","/user/profile/"+
b.username).html(b.username);jQuery("#enlargeUploaderAvatar img").prop("src",b.avatar)};EbaumLightbox.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};var EbaumFacebook={init:function(){window.fbAsyncInit=function(){FB.init({appId:0x7f95d621035b,status:!1,cookie:!0,xfbml:!0,version:"v2.6"});FB.Event.subscribe("edge.create",function(b){});FB.Event.subscribe("message.send",function(b){})};(function(b){var c;b.getElementById("facebook-jssdk")||(c=b.createElement("script"),c.id="facebook-jssdk",c.async=!0,c.src="//connect.facebook.net/en_US/all.js",b.getElementsByTagName("head")[0].appendChild(c))})(document)},login:function(){FB.login(function(b){"connected"==
b.status&&(jQuery("#jqModal").hide(),jQuery("#jqModal").show(),jQuery(".jqContent").html('<h1>Facebook Connect</h1><div class="modalContentWrapper">Logging in with Facebook Connect...<br /><br /><div class="modalLoader"></div><br /></div>'),window.location="/user/facebookconnect/")},{scope:"email"})},signup:function(){jQuery("form[name=register]").submit(function(){var b=!0;jQuery("input[class=required]").each(function(){if(0==jQuery.trim(this.value).length)return alert("Please enter all required fields."),
jQuery("input[class=required]").each(function(){""==this.value&&jQuery(this).css({backgroundColor:"yellow"})}),b=!1});unstring=jQuery("input[name=username]").val();if(15<unstring.length||4>unstring.length)alert("Your username must between 4 and 15 characters long"),b=!1;0==jQuery("input[name=gender]:checked").size()&&(alert("You must select a gender"),b=!1);0==jQuery("input[name=termsbox]:checked").size()&&(alert("You must accept the terms of use policy"),b=!1);return b?(jQuery("#jqModal").show(),
jQuery(".jqContent").html('Registering your information...<br /><br /><div class="modalLoader"></div><br />'),!0):!1});jQuery("input[name=username]").blur(function(){var b=jQuery("input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",value:b},function(b){b.success||(alert("Username already in use.  Please choose a different username."),jQuery("input[name=username]").select())})})}};EbaumInbox.prototype=new EmuseEvent;EbaumInbox.constructor=EbaumInbox;function EbaumInbox(b){this._container=b;this._listPage=1;this._sort=void 0;this._container.onclick=this.bind(this.handleClick);this._container.onchange=this.bind(this.handleChange);this._container.onsubmit=this.bind(this.handleSubmit)}EbaumInbox.prototype.handleSubmit=function(b){b=b||window.event;(b.target||b.srcElement).id.split("-")};
EbaumInbox.prototype.handleChange=function(b){b=b||window.event;b=(b.target||b.srcElement).id.split("-");b=b[0];switch(b){case "inboxCheckbox":"all"==jQuery("#"+b).val()?jQuery("input:checkbox").attr("checked",!0):"read"==jQuery("#"+b).val()?(jQuery("input:checkbox").attr("checked",!1),jQuery("input:checkbox.read").attr("checked",!0)):"unread"==jQuery("#"+b).val()?(jQuery("input:checkbox").attr("checked",!1),jQuery("input:checkbox.unread").attr("checked",!0)):"saved"==jQuery("#"+b).val()?(jQuery("input:checkbox").attr("checked",
!1),jQuery("input:checkbox.saved").attr("checked",!0)):"none"==jQuery("#"+b).val()&&jQuery("input:checkbox").attr("checked",!1);break;case "inboxSelect":b=jQuery("#"+b+" option:selected").attr("id").split("-"),b=b[1],window.location="all"==b?"/message/inbox/":"/message/inbox/"+b+"/"}};
EbaumInbox.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-"),d=c[1];switch(c[0]){case "viewComment":this.gotoComment(b);break;case "confirmBuddy":this.confirmBuddy(b);break;case "addBuddy":this.addBuddy(b);break;case "blockUser":this.blockUser(b);break;case "viewMedia":this.gotoMedia(b);break;case "acceptCreator":this.acceptCreator(b);break;case "reply":jQuery("#message-"+d).hasClass("unread")&&this.markRead(b);window.location="/message/reply/"+d+"/";
break;case "remove":this.remove(b);break;case "bulkMarkRead":this.bulkMarkRead(b);break;case "bulkRemove":this.bulkRemove(b);break;case "featured":"unread"==d?jQuery("#markAllRead").show():jQuery("#markAllRead").hide();break;case "markReadAll":this.markAllRead(b);break;case "markRead":this.markRead(b)}};EbaumInbox.prototype.gotoComment=function(b){b=b.id.split("viewComment-");window.location=b[1]};
EbaumInbox.prototype.gotoMedia=function(b){var c=this._splitId(b);jQuery("#message-"+c.id).hasClass("unread")&&this.markRead(b);b=b.id.split("viewMedia-");window.location=b[1]};EbaumInbox.prototype.remove=function(b){var c=this._splitId(b);jQuery.post("/message/remove/",{ids:c.id},function(b){b.success&&jQuery("#message-"+c.id).hide()})};
EbaumInbox.prototype.bulkRemove=function(b){this._splitId(b);ids="";jQuery("input:checkbox:checked").each(function(){ids+=jQuery(this).val()+","});jQuery.post("/message/remove/",{ids:ids},function(b){if(b.success){idArray=ids.split(",");b=0;for(var c=idArray.length;b<c;b++)jQuery("#message-"+idArray[b]).hide()}})};
EbaumInbox.prototype.bulkMarkRead=function(b){this._splitId(b);ids="";jQuery("input:checkbox:checked").each(function(){ids+=jQuery(this).val()+","});jQuery.post("/message/markread/",{ids:ids},function(b){b.success&&jQuery(".unread").removeClass("unread")})};EbaumInbox.prototype.markRead=function(b){var c=this._splitId(b);jQuery.get("/message/markread/?ids="+c.id,function(b){b.success&&(jQuery("#message-"+c.id).removeClass("unread"),jQuery("#message-"+c.id+" #markRead-"+c.id).hide())})};
EbaumInbox.prototype.markAllRead=function(b){this._splitId(b);jQuery.get("/message/markread/",function(b){b.success&&jQuery(".unread").removeClass("unread")})};EbaumInbox.prototype.markSpam=function(b){var c=this._splitId(b);jQuery.get("/message/markspam/"+c.id+"/",function(b){b.success&&jQuery("#message-"+c.id).hide()})};
EbaumInbox.prototype.acceptCreator=function(b){var c=b.id.split("-");jQuery("#message-"+c[1]).hasClass("unread")&&this.markRead(b);jQuery.get("/producer/confirm/",function(c){c.success?(jQuery("#"+b.id).html("Confirmed"),jQuery("#"+b.id).addClass("confirmed")):populateModal("<h1>Error</h1> Your status could not be confirmed at this time.")})};
EbaumInbox.prototype.confirmBuddy=function(b){var c=b.id.split("-"),d="/user/confirmbuddy/"+c[2]+"/";jQuery("#message-"+c[1]).hasClass("unread")&&this.markRead(b);jQuery.get(d,function(c){c.success?(jQuery("#"+b.id).html("Confirmed"),jQuery("#"+b.id).attr("id","")):(jQuery("#"+b.id).html("Error"),populateModal("<h1>Error</h1>"+c.error))})};
EbaumInbox.prototype.addBuddy=function(b){var c=this._splitId(b),d="/user/addbuddy/"+c.id+"/";jQuery("#message-"+c.id).hasClass("unread")&&this.markRead(b);jQuery.get(d,function(b){})};EbaumInbox.prototype.blockUser=function(b){b="/user/blockuser/"+this._splitId(b).id+"/";jQuery.get(b,function(b){})};EbaumInbox.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};EbaumUpload.prototype=new EmuseEvent;EbaumUpload.constructor=EbaumUpload;
function EbaumUpload(b,c){this._container=b;this._mediaType=c.mediaType;this._adminHtml=c.adminHtml;this._sid=c.sid;this._ip=c.ip;this._form=document.getElementById(c.formId);this._fileBox=document.getElementById("fileBox");this._locked=!1;this._fileUploadLimit=1;this._multipleFiles=!1;this._contentType="file";this._previousErrors=this._filesPending=this._numUploadedFiles=this._blogEditor=0;this._appErrors=[];this._legacyFiles=this._errorCount=0;this._selectedCategory=this.categoryContent="";this._uploader=
null;this._uploadUrl="";this._container.onclick=this.bind(this.handleClick);this._fileBox&&(this._fileBox.ondragenter=this.bind(this.handleDragEnter),this._fileBox.ondragleave=this.bind(this.handleDragLeave),this._fileBox.ondragover=this.bind(this.handleDragOver),this._fileBox.ondrop=this.bind(this.handleDrop));this._requestListeners={onAbort:this.bind(this.handleRequestAbort),onError:this.bind(this.handleRequestError),onLoad:this.bind(this.handleRequestLoad),onLoadStart:this.bind(this.handleRequestLoadStart),
onProgress:this.bind(this.handleRequestProgress),onStateChange:this.bind(this.handleRequestStateChange),onSuccess:this.bind(this.handleRequestSuccess)};this._requestOptions={fileName:"Filedata"};this._readerListeners={onAbort:function(){console.log("Reader: onAbort")},onError:function(){console.log("Reader: onError")},onLoad:function(){console.log("Reader: onLoad")},onLoadStart:function(){console.log("Reader: onLoadStart")},onLoadEnd:function(){console.log("Reader: onLoadEnd")},onProgress:function(){console.log("Reader: onProgress")}};
if(this._fileButton=document.getElementById("browseBtn"))this._fileButton.onchange=this.bind(this.handleFileChange);jQuery("#input-tag").blur(function(b){b=jQuery(this).val();if(""!=b){b=b.split(" ");var c=b.length,d="";if(0<c){jQuery("#tag-fake").html("");for(var h=0;h<c;h++)b[h]=b[h].replace(/[^A-Za-z0-9]/g,""),""!=b[h]&&(jQuery("#tag-fake").append('<li class="tag" id="tag-'+h+'"><div class="deleteArea" id="tag-delete-'+h+'"></div>'+b[h]+" </li>"),d+=b[h],h!=c-1&&(d+=" "));jQuery("#input-tag").val(d);
jQuery("#input-tag, #tag-fake").toggle()}}})}EbaumUpload.prototype.handleRequestAbort=function(b,c){};EbaumUpload.prototype.handleRequestLoad=function(b,c){};EbaumUpload.prototype.handleRequestLoadStart=function(b,c){this._locked||this.lockForm()};EbaumUpload.prototype.handleRequestError=function(b,c){jQuery("#errorBox").html("An error has occured. Please try again!").show()};
EbaumUpload.prototype.handleRequestProgress=function(b,c){percent=1<this._numUploadedFiles?Math.ceil((this._numUploadedFiles-this._filesPending)/this._numUploadedFiles*100):Math.ceil(b.loaded/b.total*100);100==percent?jQuery("#progressText").html("Processing..."):(this._multipleFiles||jQuery("#progressText").html(percent+"%"),jQuery(".outer_progress div.progress").css({width:percent+"%"}))};EbaumUpload.prototype.handleRequestStateChange=function(b,c,d){};
EbaumUpload.prototype.handleRequestSuccess=function(b,c,d){this._filesPending--;b=eval("("+b.currentTarget.responseText+")");0==this._filesPending?(b.success?(this._multipleFiles&&(jQuery("#uploadBox").show(),this._legacyFiles=this._numUploadedFiles),jQuery("#fileBoxWrapper").addClass("complete"),jQuery("#submitBtn").show(),jQuery(".uploadingList, .outer_progress, #progress_text").hide(),jQuery("#complete_text").show(),b=this._mediaType,this._multipleFiles?(b="gallery",jQuery("#addMoreBtn").show()):
jQuery(".uploadingList").show(),jQuery("#uploadTypeIcon").removeClass(b).addClass("complete")):(jQuery("#progress_text, .uploadingList").hide(),jQuery("#errorBox").html(b.error).show(),this._previousErrors=b.error),jQuery("#clearBtn").show()):this._multipleFiles&&this.uploadFile()};EbaumUpload.prototype.handleDragEnter=function(b){b.stopPropagation();b.preventDefault();jQuery("#fileBox").addClass("dragOver")};
EbaumUpload.prototype.handleDragLeave=function(b){b.stopPropagation();b.preventDefault();jQuery("#fileBox").removeClass("dragOver")};EbaumUpload.prototype.handleDragOver=function(b){b.stopPropagation();b.preventDefault()};EbaumUpload.prototype.handleDrop=function(b){b.stopPropagation();b.preventDefault();jQuery("#fileBox").removeClass("dragOver");this.handleHTML5UploadStart(b)};EbaumUpload.prototype.handleFileChange=function(b){b.stopPropagation();b.preventDefault();this.handleHTML5UploadStart(b)};
EbaumUpload.prototype.uploadFile=function(b){b=this._numUploadedFiles-this._legacyFiles-this._filesPending;this._goodFiles[b]&&((new EmuseXmlHttpRequest(this._requestListeners,this._requestOptions)).initUpload("/upload/sendfiles/"+this._mediaType+"/",this._goodFiles[b]),jQuery("#errorBox").html(""),jQuery("#errorBox").hide(),jQuery(".uploadingList").html('<li class="currentUpload upload_cont"><div class="outer_progress"><div class="progress"></div></div><div class="filename">'+this._goodFiles[b].name+
"</div></li>"),jQuery("#progressText").html("Uploading"),jQuery("#numUploaded").html(this._legacyFiles+b+1))};
EbaumUpload.prototype.validateFiles=function(b){var c=b.length,d={errors:[],badFiles:[],goodFiles:[]};if(c>this._fileUploadLimit)d.errors.push(" Too many files! Only "+this._fileUploadLimit+" file allowed for this type.");else for(var f=0;f<c;f++){file=b[f];var g=this._allowedTypes.replace(/[^a-z0-9;\/-]/gi,"").split(";"),h=file.type.split("/"),k=this._sizeLimit.replace(/[^0-9]/g,"");type=1<h.length?h[1]:h[0];this.inArray(g,type)?file.size>=1048576*k?(d.errors.push(" "+file.name+" is too large."),
d.badFiles.push(file)):d.goodFiles.push(file):(d.errors.push(" "+file.name+" is not the correct type."),d.badFiles.push(file))}return d};
EbaumUpload.prototype.handleHTML5UploadStart=function(b,c){c="change"==b.type?b.target.files:b.dataTransfer.files;var d=this.validateFiles(c);d.errors.length&&jQuery("#errorBox").html(d.errors.toString().replace(/[,]/g,"")).show();if(d.goodFiles.length){var f=this;f._numUploadedFiles=d.goodFiles.length;f._filesPending=d.goodFiles.length;f._goodFiles=d.goodFiles;jQuery(".uploadNotes, #uploadBox").css({opacity:"0"});jQuery("#progress_text, .uploadingList").show();jQuery("#complete_text").hide();d="+=0";
"90px"==jQuery(".fileBox").css("padding-top")&&(d="-=90",jQuery(".uploadTypeIcon").animate({"margin-top":"90px"},0,function(){}));jQuery(".fileBox").animate({"padding-top":d},0,function(){0<f._legacyFiles?(f._numUploadedFiles+=f._legacyFiles,jQuery("#fileCountProgress").show().css({"padding-left":"0"}),100<f._numUploadedFiles?jQuery("#errorBox").append("Error queueing: You are only allowed to upload 100 images to one gallery. <br />"):(jQuery(".waitForUpload").show(),jQuery("#numTotal").html("of "+
f._numUploadedFiles),jQuery("#numUploaded").html(f._legacyFiles+1),jQuery("#galleryProgress").show(),jQuery("#fileCountProgress").show)):f._multipleFiles&&(jQuery("#fileCountProgress").show().css({"padding-left":"0"}),jQuery(".waitForUpload").show(),jQuery("#numUploaded").html("1 "),jQuery("#numTotal").html("of "+f._numUploadedFiles));f.uploadFile()})}};
EbaumUpload.prototype.submit=function(b){jQuery(".error").html("");jQuery(".hasErrors").removeClass("hasErrors");b=jQuery("#uploadForm").serialize();if("blog"==this._mediaType&&!this._adminHtml){var c=CKEDITOR.instances.blogBody.getData();c&&(jQuery("#input-body").html(c),b+="&blog_body2="+jQuery("#input-body").val())}jQuery("#submitErrors").html("");jQuery("#submitBtn").attr("disabled",!0);jQuery("#submitLoader").show();console.log("submitting upload");jQuery.post("/upload/",b,function(b){console.log("upload complete");
console.log(b);if(b.success)console.log("upload success"),window.scrollTo(0,0),b.data?jQuery.get(b.data,function(b){jQuery(".jqContent").html(b)}):jQuery("#uploadContainer").html(b.message);else if(console.log("upload fail"),console.log(b),jQuery("#submitErrors").html(b.error),jQuery("#submitBtn").attr("disabled",!1),b.data){var c=b.data.errors;if(c.length){var d="";for(x in c)d+=c[x]+"<br />";jQuery("#submitErrors").html(d)}b=b.data.fieldErrors;for(x in b)jQuery("#"+x+"Error").html(b[x]),jQuery("#"+
x+"Wrapper").addClass("hasErrors")}})};
EbaumUpload.prototype.handleClick=function(b){b=b||window.event;var c=b.target||b.srcElement;b=c.id.split("-");var d=b[1],f=b[2];switch(b[0]){case "selectMedia":this._mediaType=d;this.buildForm();break;case "uploadMedia":this._locked?confirm("Are you sure you want to leave this page? Your changes will be lost.")&&("picture"==this._mediaType&&1==this._multipleFiles&&(this._multipleFiles=!1),this._mediaType=d,this.clearForm(),this.buildForm(),this._locked=!1):(this._mediaType=d,this.buildForm());break;
case "category":jQuery("#uploadCategorySelect .fakeCheck").removeClass("checked");jQuery("#categoryId").val()==d?(jQuery(c).removeClass("checked"),jQuery(c).next().removeClass("checked"),jQuery("#categoryId").val(""),this._selectedCategory="",jQuery("#input-category").removeClass("categoryChosen")):(jQuery(c).addClass("checked"),jQuery(c).next().addClass("checked"),jQuery("#categoryId").val(d),this._selectedCategory=jQuery("#category-"+d).next().html(),jQuery("#input-category").addClass("categoryChosen"));
jQuery("#categoryDropDown, .categorySelect").toggle();(b=jQuery("#categoryId").val())?jQuery("#input-category").attr("placeholder","Category: "+this._selectedCategory):jQuery("#input-category").attr("placeholder","Select a Category");break;case "tag":var g=jQuery("#input-tag");b=jQuery(g).val();var h=b.split(" "),k=h.length;if("delete"==d){d="";for(b=0;b<k;b++)h[b]=h[b].replace(/[^A-Za-z0-9]/g,""),b!=f&&""!=h[b]&&(d+=h[b],b!=k+1&&(d+=" "));h=d.split(" ");jQuery(g).val(d);1==h.length&&(jQuery("#input-tag, #tag-fake").toggle(),
jQuery("#input-tag").focus());jQuery("#"+jQuery(c).parent().attr("id")).remove();c=jQuery("#tag-fake .tag");d=c.length;for(b=0;b<d;b++)jQuery(c[b]).children().attr("id","tag-delete-"+b),jQuery(c[b]).attr("id","tag-"+b)}else if(jQuery("#input-tag, #tag-fake").toggle(),jQuery(g).is(":visible")){jQuery(g).focus();c=0;if("fake"==d)c=b.length;else for(b=0;b<=d;)c+=h[b].length,b!=d&&(c+=1),b++;g=document.getElementById("input-tag");g.createTextRange?(b=g.createTextRange(),b.move("character",c),b.select()):
null!=g.selectionStart&&(g.focus(),g.setSelectionRange(c,c))}break;case "girlCheckBox":this._locked||this.lockForm();5!=jQuery("#moderateCode").val()?(jQuery("#moderateCode").val(5),jQuery("#"+c.id).addClass("checked")):jQuery("#girlCheckBox").removeClass("checked");break;case "termsCheckBox":this._locked||this.lockForm();jQuery("#terms-check").val()?(jQuery("#terms-check").val(""),jQuery("#"+c.id).removeClass("checked"),jQuery("#submitBtn").attr("disabled",!0)):(jQuery("#terms-check").val(this._ip),
jQuery("#"+c.id).addClass("checked"),jQuery("#submitBtn").attr("disabled",!1));break;case "input":this._locked||this.lockForm();jQuery(".uploadLabel").removeClass("inputFocus");jQuery("#"+d+"Box .uploadLabel").addClass("inputFocus");"category"==d?jQuery("#categoryDropDown, .categorySelect").toggle():jQuery("#categoryDropDown").is(":visible")&&(jQuery("#categoryDropDown, .categorySelect").toggle(),(b=jQuery("#categoryId").val())&&jQuery("#input-category").attr("placeholder","Category: "+this._selectedCategory));
break;case "categorySelectFake":jQuery("#categoryDropDown, .categorySelect").toggle();(b=jQuery("#categoryId").val())&&jQuery("#input-category").attr("placeholder","Category: "+this._selectedCategory);break;case "clearBtn":this.clearForm();break;case "editLink":jQuery(".jqContent").load("/user/editupload/"+d);break;case "addMoreBtn":jQuery(c).hide();jQuery("#fileBoxWrapper").removeClass("complete");jQuery("#browseBtnViewable,#uploadBox, .uploadNotes").css({opacity:"1"});jQuery("#complete_text").hide();
b=this._mediaType;this._multipleFiles&&(b="gallery");jQuery("#uploadTypeIcon").removeClass("complete").addClass(b);jQuery("#errorBox").html("").hide();jQuery("#clearBtn").hide();jQuery(".filename").html("");jQuery("#fileCountProgress").show().css({"padding-left":"100px"});"60px"!=jQuery(".fileBox").css("padding-top")&&jQuery("#uploadTypeIcon").animate({"margin-top":"-=90"},0,function(){});jQuery("#fileBox").css({"padding-top":"90px"});break;default:jQuery(".uploadLabel").removeClass("inputFocus")}"blog"==
this._mediaType&&jQuery(".nicEdit-main").hasClass("nicEdit-selected")&&(jQuery(".uploadLabel").removeClass("inputFocus"),jQuery("#blogBody .uploadLabel").addClass("inputFocus"))};EbaumUpload.prototype.lockForm=function(){this._locked=!0;var b=this._mediaType;this._multipleFiles&&(b="gallery");jQuery(".mediaSelect ."+b).removeClass("disabled").addClass("selected")};
EbaumUpload.prototype.clearForm=function(){var b=this;jQuery.get("/upload/clear/",function(c){c.success&&(b._appErrors=[],jQuery("#fileBoxWrapper").removeClass("complete"),jQuery("#browseBtnViewable, .uploadNotes").css({opacity:"1"}),jQuery("#complete_text").hide(),c=b._mediaType,b._multipleFiles&&(c="gallery"),jQuery("#uploadTypeIcon").removeClass("complete").addClass(c),b._numUploadedFiles=0,b._legacyFiles=0,jQuery("#fileList ul").html(""),jQuery("#errorBox").html("").hide(),jQuery("#fileCountProgress, #addMoreBtn, #clearBtn").hide(),
jQuery(".filename").html(""),"60px"!=jQuery(".fileBox").css("padding-top")&&jQuery("#uploadTypeIcon").animate({"margin-top":"0"},0,function(){}),jQuery("#fileBox").css({"padding-top":"90px"}),b.initHTML5Uploader())})};
EbaumUpload.prototype.buildForm=function(){jQuery("#selectMediaWindows, #clearBtn, #errorBox").hide();jQuery("#uploadPageContainer").show();jQuery(".mediaSelect li").removeClass("selected");jQuery(".mediaSelect ."+this._mediaType).addClass("selected");jQuery("#multipleNote").hide();jQuery("#browseBtn").removeAttr("multiple","multiple");var b="",b="",b="flash"==this._mediaType?"Animation":this._mediaType[0].toUpperCase()+this._mediaType.slice(1);jQuery("#uploadHeader").html("Upload "+b);jQuery("#uploadTypeIcon").removeClass("video gallery picture game soundboard audio joke blog flash");
jQuery("#uploadTypeIcon").addClass(this._mediaType).css({"margin-top":"0px"});this._multipleFiles=!1;this._fileUploadLimit=1;jQuery("#browseBtn").removeAttr("multiple");switch(this._mediaType){case "audio":b="n Audio";break;case "flash":b="n Animation";break;case "gallery":b=" Gallery";jQuery("#multipleNote").show();this._mediaType="picture";this._multipleFiles=!0;this._fileUploadLimit=100;jQuery("#browseBtn").attr("multiple","multiple");break;default:title=this._mediaType[0].toUpperCase()+this._mediaType.slice(1),
b=" "+title}this._form.reset();jQuery("#bodyWrapper, #blogWrapper,#cke_blogBody").hide();jQuery("#youTubeWrapper, #embedWrapper").hide();jQuery("#gameEmbedWrapper, #fileBoxWrapper").hide();jQuery(".videoGameOptions").hide();jQuery("#hiddenMediaType").val(this._mediaType);jQuery("#uploadTitleType").html(b);jQuery("#uploadFormContainer").removeClass("blogJoke").show();jQuery("#uploadFormContainer").removeClass("blogJoke");jQuery("#categoryWrapper").html(this.categoryContent);"blog"==this._mediaType?
(jQuery("#blogWrapper, #cke_blogBody").show(),jQuery("#uploadFormContainer").addClass("blogJoke"),this._blogEditor||(this._adminHtml?this._blogEditor=1:CKEDITOR.replace("blogBody",{customConfig:"/js/ckeditor/configUser.js"})),jQuery(".uploadForm select").width("442px"),jQuery(".prettySelect").customSelect(),jQuery("#youTubePreview").hide()):(jQuery("#youTubePreview").hide(),"joke"!=this._mediaType&&"blog"!=this._mediaType?(this.initHTML5Uploader(),jQuery("#fileBoxWrapper").show(),jQuery("#descriptionWrapper").attr("maxlength",
350),"video"==this._mediaType?(jQuery("#youTubeWrapper, #embedWrapper").show(),0<jQuery("#embedWrapper").length||jQuery("#fileBoxWrapper").hide(),jQuery("#youTubePreview, .scrapeYouTube").show(),jQuery("#input-youTubeLink").on("paste",function(){setTimeout(function(){jQuery("#videoPreviewImg").hide();var b="http://www.youtube.com/embed/"+jQuery("#input-youTubeLink").val().split("v=")[1].split("&")[0]+"/";jQuery("#youTubePreviewFrame").css({display:"block"}).attr("src",b)},500)})):jQuery("#youTubePreview").hide(),
"game"==this._mediaType&&jQuery("#gameEmbedWrapper").show()):(jQuery("#youTubePreview").hide(),jQuery(".uploadForm select").width("442px"),jQuery("#bodyWrapper").show(),jQuery("#uploadFormContainer").addClass("blogJoke")));jQuery(".prettySelect").customSelect()};
EbaumUpload.prototype.initHTML5Uploader=function(){switch(this._mediaType){case "audio":this._allowedDescription="MP3 Audio Files";this._allowedTypes="*.mp3; mpeg";this._sizeLimit="10 MB";break;case "game":case "flash":case "soundboard":this._allowedDescription="Flash Files";this._allowedTypes="*.swf; x-shockwave-flash";this._sizeLimit="150 MB";break;case "picture":this._allowedDescription="Image Files";this._allowedTypes="*.jpg; *.jpeg; *.gif; *.png";this._sizeLimit="3 MB";break;case "video":this._allowedDescription=
"Video Files";this._allowedTypes="*.flv; *.avi; *.wmv; *.mpg; *.mpeg; *.mov; *.mp4; *.m4v; *quicktime; x-flv; video";this._sizeLimit="1000 MB";break;default:this._alloweDescription="None",this._allowedTypes="none",this._sizeLimit=0}jQuery("span#sizeLimit").html(this._sizeLimit);var b=this._allowedTypes.replace(/[^a-z0-9.;]/g," ");jQuery("span#fileTypes").html(b);jQuery("#browseBtn").attr("accept",b.replace(/;/g,", "));jQuery("#uploadBox").css({opacity:"1"})};
EbaumUpload.prototype.initUploader=function(){switch(this._mediaType){case "audio":this._allowedDescription="MP3 Audio Files";this._allowedTypes="*.mp3";this._sizeLimit="10 MB";break;case "game":case "flash":case "soundboard":this._allowedDescription="Flash Files";this._allowedTypes="*.swf";this._sizeLimit="150 MB";break;case "picture":this._allowedDescription="Image Files";this._allowedTypes="*.jpg; *.jpeg; *.gif; *.png";this._sizeLimit="3 MB";break;case "video":this._allowedDescription="Video Files";
this._allowedTypes="*.flv; *.avi; *.wmv; *.mpg; *.mpeg; *.mov; *.mp4; *.m4v";this._sizeLimit="1000 MB";break;default:this._alloweDescription="None",this._allowedTypes="none",this._sizeLimit=0}jQuery("span#sizeLimit").html(this._sizeLimit);var b=this._allowedTypes.replace(/[^a-z0-9.;]/g," ");jQuery("span#fileTypes").html(b);jQuery('object[id^="SWFUpload_"]').remove();jQuery("#uploadBox").prepend('<span id="spanButtonPlaceHolder"></span>');jQuery("#uploadBox").css({opacity:"1"});var c=this;this._uploader=
this.uploadMedia=new SWFUpload({upload_url:"/upload/sendfiles/"+this._mediaType+"/?PHPSESSID="+jQuery("#SID").html(),file_queue_error_handler:function(b,c,g){jQuery("#errorBox").show();jQuery("#progress_text").hide();b?jQuery("#errorBox").append("Error queueing: <span>"+b.name+"</span>&nbsp;"+g+"<br/ >"):jQuery("#errorBox").append("Error queueing: You are only allowed up upload 100 images to one gallery. <br />")},file_dialog_start_handler:function(){c._locked||c.lockForm();jQuery("#errorBox").html("");
jQuery("#errorBox").hide()},file_dialog_complete_handler:function(b){if(0<b&&(1>this.getStats().files_queued&&jQuery("#clearBtn").removeAttr("disabled"),c._errorCount=this.getStats().queue_errors,c._errorCount-=c._previousErrors,c._numUploadedFiles=b-c._errorCount,!(0<c._errorCount))){jQuery(".uploadNotes, #uploadBox").css({opacity:"0"});jQuery("#progress_text").show();jQuery("#complete_text").hide();var d=this;b=jQuery(".fileBox").css("padding-top");var g="+=0";"90px"==b&&(g="-=60");"90px"==b&&jQuery(".uploadTypeIcon").animate({"margin-top":"60px"},
0,function(){});jQuery(".fileBox").animate({"padding-top":g},0,function(){0<c._legacyFiles?(c._numUploadedFiles+=c._legacyFiles,100<c._numUploadedFiles?jQuery("#errorBox").append("Error queueing: You are only allowed to upload 100 images to one gallery. <br />"):(jQuery(".waitForUpload").show(),jQuery("#numTotal").html("of "+c._numUploadedFiles),jQuery("#numUploaded").html(c._legacyFiles+1),jQuery("#galleryProgress").show(),jQuery("#fileCountProgress").show)):c._multipleFiles&&(jQuery(".waitForUpload").show(),
jQuery("#numUploaded").html("1 "),jQuery("#numTotal").html("of "+c._numUploadedFiles));d.startUpload()})}},upload_progress_handler:function(b,f,g){percent=1<c._numUploadedFiles?Math.ceil(this.getStats().successful_uploads/c._numUploadedFiles*100):Math.ceil(f/b.size*100);100==percent?jQuery("#progressText").html("Processing..."):(c._multipleFiles||jQuery("#progressText").html(percent+"%"),jQuery(".outer_progress div.progress").css({width:percent+"%"}))},upload_start_handler:function(b){jQuery(".uploadingList").html('<li class="currentUpload upload_cont"><div class="outer_progress"><div class="progress"></div></div><div class="filename">'+
b.name+"</div></li>");jQuery("#progressText").html("Uploading");return!0},upload_error_handler:function(b,f,g){jQuery("#progress_text").hide();jQuery("#errorBox").html("Error uploading media file: "+g+" ("+f+")");jQuery("#errorBox").show();c._appErrors.push("Error uploading media file: "+g+" ("+f+")")},upload_success_handler:function(b,f){json=eval("("+f+")");json.error?(jQuery("li.currentUpload").remove(),c._appErrors.push(json.error),jQuery("#progress_text").hide(),jQuery("#errorBox").html(json.error),
jQuery("#errorBox").show()):c._locked=!0;jQuery(".currentUpload").removeClass("currentUpload")},upload_complete_handler:function(b,f,g){0<this.getStats().files_queued?(1==c._multipleFiles&&(jQuery("#numUploaded").html(this.getStats().successful_uploads+1+"&nbsp;"),jQuery("#numTotal").html("of "+c._numUploadedFiles)),this.startUpload()):(0<c._appErrors.length||(c._multipleFiles?(jQuery("#uploadBox").show(),c._legacyFiles=c._numUploadedFiles,c._previousErrors=this.getStats().queue_errors):(jQuery(".uploader .swfupload").hide(),
c._previousErrors=this.getStats()),jQuery("#fileBoxWrapper").addClass("complete"),jQuery("#submitBtn").show(),jQuery(".waitForUpload, .outer_progress").hide(),jQuery("#complete_text").show(),b=c._mediaType,c._multipleFiles&&(b="gallery"),jQuery("#uploadTypeIcon").removeClass(b).addClass("complete")),jQuery("#clearBtn").show(),c._multipleFiles&&jQuery("#addMoreBtn").show())},file_queued_handler:function(b){},flash_url:"/js/swfupload/swfupload_f10.swf?3433",flash9_url:"/js/swfupload/swfupload_f9.swf",
file_size_limit:this._sizeLimit,file_types:this._allowedTypes,file_types_description:this._allowedDescription,file_upload_limit:this._fileUploadLimit,file_queue_limit:this._fileUploadLimit,debug:!1,button_placeholder_id:"spanButtonPlaceHolder",button_image_url:"",button_width:170,button_height:44,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,button_action:this._multipleFiles?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,
button_disable:!1,button_window_mode:"transparent",button_cursor:SWFUpload.CURSOR.HAND})};EbaumUpload.prototype.inArray=function(b,c){for(var d in b)if(b[d]==c)return!0;return!1};function EmuseEvent(){this._listeners={}}EmuseEvent.prototype.addListener=function(b,c){"undefined"==typeof this._listeners[b]&&(this._listeners[b]=[]);this._listeners[b].push(c)};EmuseEvent.prototype.removeListener=function(b,c){if(this._listeners[b]instanceof Array)for(var d=this._listeners[b],f=0,g=d.length;f<g;f++)if(d[f]===c){d.splice(f,1);break}};
EmuseEvent.prototype.fire=function(b){"string"==typeof b&&(b={type:b});b.target||(b.target=this);if(!b.type)throw Error("Event object missing 'type' property.");if(this._listeners[b.type]instanceof Array)for(var c=this._listeners[b.type],d=0,f=c.length;d<f;d++)c[d].call(this,b)};EmuseEvent.prototype.relay=function(b,c){if(void 0==c)throw Error("No target passed to relay");"string"==typeof b&&(b={type:b});b.target=c;this.fire(b)};
EmuseEvent.prototype.bind=function(b){var c=this;return function(d){b.call(c,d)}};var EbaumUser={username:null,init:function(b){this.username=b},submissionsListInit:function(){jQuery("#profileMediaList").load("/user/uploads/"+this.username+"/",function(){EbaumMobile.setListings()})},toggleMore:function(){jQuery("#profileMore").toggle();jQuery("button.more").hasClass("open")?(jQuery("button.more").removeClass("open"),jQuery("button.more").html("More...")):(jQuery("button.more").addClass("open"),jQuery("button.more").html("Close"))},toggleFavorites:function(){jQuery(".favoritesToggle").hasClass("active")||
(jQuery(".submissionsToggle").removeClass("active"),jQuery(".favoritesToggle").addClass("active"),EbaumMobile.addLoader("profileMediaList"),jQuery("#profileMediaList").load("/user/favorites/"+this.username+"/",function(){EbaumMobile.setListings()}))},toggleSubmissions:function(){jQuery(".submissionsToggle").hasClass("active")||(jQuery(".submissionsToggle").addClass("active"),jQuery(".favoritesToggle").removeClass("active"),EbaumMobile.addLoader("profileMediaList"),jQuery("#profileMediaList").load("/user/uploads/"+
this.username+"/",function(){EbaumMobile.setListings()}))},toggleBuddies:function(){jQuery(".buddiesToggle").hasClass("active")||(jQuery(".subscriptionsToggle").removeClass("active"),jQuery(".buddiesToggle").addClass("active"),EbaumMobile.addLoader("profileUserList"),jQuery("#profileUserList").load("/user/buddies/"+this.username+"/",function(){EbaumMobile.setAvatars()}))},toggleSubscriptions:function(){jQuery(".subscriptionsToggle").hasClass("active")||(jQuery(".subscriptionsToggle").addClass("active"),
jQuery(".buddiesToggle").removeClass("active"),EbaumMobile.addLoader("profileUserList"),jQuery("#profileUserList").load("/user/subscriptions/"+this.username+"/",function(){EbaumMobile.setAvatars()}))},buddyListInit:function(){jQuery("#profileUserList").load("/user/buddies/"+this.username+"/")},mobileBuddyListInit:function(){jQuery("#profileUserList").load("/user/buddies/"+this.username+"/",function(){setTimeout(function(){EbaumMobile.setAvatars()},5E3)})},triggerMenu:function(b,c){jQuery("#"+c).is(":visible")?
jQuery("#"+c).hide():(jQuery("#"+c).load("/user/menu/"+b+"/"),jQuery("#"+c).show())},subscriptionListInit:function(){jQuery("#subscriptionList").load("/user/subscriptions/"+this.username+"/")},mobileSubscriptionListInit:function(){jQuery("#profileUserList").load("/user/subscriptions/"+this.username+"/",function(){EbaumMobile.setAvatars()})},editBuddies:function(){jQuery("#profileUserList img").unbind("click");jQuery("#editBuddies").slideUp("fast");jQuery("#cancelEditBuddies").slideDown("fast");jQuery("#cancelEditBuddies").css({display:"block"});
jQuery("#profileUserList").addClass("editingEnabled");jQuery("#profileUserList .userItem").click(function(){var b=jQuery(this).attr("id").split("-")[1];confirm("Do you really want to remove "+b+" from your buddy list?")&&EbaumUser.removeBuddy(b);return!1})},cancelEditBuddies:function(){jQuery("#editBuddies").slideDown("fast");jQuery("#cancelEditBuddies").slideUp("fast");jQuery("#profileUserList .userItem").unbind("click");jQuery("#profileUserList").removeClass("editingEnabled");jQuery("#profileUserList .userItem").click(function(){return!0})},
editSubscriptions:function(){jQuery("#profileUserList img").unbind("click");jQuery("#editSubscriptions").slideUp("fast");jQuery("#cancelEditSubscriptions").slideDown("fast");jQuery("#cancelEditSubscriptions").css({display:"block"});jQuery("#profileUserList").addClass("editingEnabled");jQuery("#profileUserList .userItem").click(function(){var b=jQuery(this).attr("id").split("-")[1];confirm("Do you really want to remove "+b+" from your subscription list?")&&EbaumUser.removeSubscription(b);return!1})},
cancelEditSubscriptions:function(){jQuery("#editSubscriptions").slideDown("fast");jQuery("#cancelEditSubscriptions").slideUp("fast");jQuery("#profileUserList .userItem").unbind("click");jQuery("#profileUserList").removeClass("editingEnabled");jQuery("#profileUserList .userItem").click(function(){return!0})},removeSubscription:function(b){jQuery.getJSON("/user/removesubscription/"+b+"/",function(c){c.success?(populateModal("The user was removed from your subscription list."),jQuery("#subscription-"+
b).remove()):populateModal(c.error)})},removeBuddy:function(b){jQuery.get("/user/removebuddy/"+b+"/",function(c){c.success?(populateModal("The user was removed from your buddy list."),jQuery("#buddy-"+b).remove()):populateModal(c.error)})},addBuddy:function(b){jQuery.get("/user/addbuddy/"+b+"/",function(b){b.success?populateModal("The user was added to your buddy list."):populateModal(b.error)})},confirmBuddy:function(b,c){jQuery.get("/user/confirmbuddy/"+b+"/",function(b){b.success?(populateModal("You have accepted the buddy request."),
inboxAction("markread","",c.parents("ul.msgListItem").attr("id"),location.href),jQuery(c).remove()):populateModal(b.error)})},blockUser:function(b){jQuery.get("/user/blockuser/"+b+"/",function(b){b.success?populateModal("The user was added to your blocklist. To remove a user from you block list visit the 'Edit Profile' section."):populateModal(b.error)})},subscribe:function(){this.username?jQuery.get("/user/subscribe/"+this.username+"/",function(b){b=b.success?'<img src="http://images.ebaumsworld.com/img/accept.png"height="16" width="16" /> <span style="color:#369;">Subscribed!</span>':
b.error;jQuery("#subscribeInfo").html(b)}):(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow())},unblockUser:function(b){jQuery.get("/user/unblockuser/"+b+"/",function(c){c.success?jQuery("#block-"+b).remove():populateModal(c.error)})},profileWriteMessage:function(b){if(!b)return jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow(),!1;jQuery("#profileWriteTrigger").hide();jQuery("#writeProfileMessage").slideDown("slow")},profileShowcaseInit:function(b){jQuery("#showcasedMedia").load("/user/showcase/"+
this.username+"/")},profileMessageInit:function(){jQuery("#messageList").load("/user/message/"+this.username+"/")},profileActivityInit:function(){jQuery("#activityList").load("/user/activity/"+this.username+"/")},pageProfileMessage:function(b,c){jQuery("#messageList").load("/user/message/"+b+"/?page="+c)},removeMessage:function(b){jQuery.get("/message/remove/?ids="+b,function(c){c.success?jQuery("#message-"+b).remove():populateModal("<h1>ALERT</h1>Message failed to delete.")})},removeComment:function(b){confirm("Do you really want to remove this comment from your list?")&&
jQuery.get("/user/removecomment/"+b+"/",function(c){c.success?jQuery("#comment-"+b).remove():populateModal("<h1>ALERT</h1>Message failed to delete.")});return!1},setAvatar:function(b,c){data={userId:b,avatarId:c};jQuery.post("/user/changeavatar/",data,function(b){b.success?(jQuery(".currentAvatar img").attr("src",b.data.path),jQuery("#avatarInfo img").attr("src",b.data.path),jQuery(".historyAvatar").removeClass("selectedAvatar"),jQuery("#"+c).addClass("selectedAvatar")):(jQuery(".error").html(b.error),
jQuery(".error").show())})},removeAvatar:function(b,c){data={userId:b,avatarId:c};jQuery.post("/user/removeavatar/",data,function(b){b.success?(jQuery("#"+c).parent().hide(),b.data&&(newImg=jQuery('.historyAvatar img[src="http://images.ebaumsworld.com'+b.data.avatar_path+'"]'),jQuery(newImg).parent().addClass("selectedAvatar"),jQuery(".currentAvatar img").attr("src",b.data.path),jQuery("#avatarinfo img").attr("src",b.data.path),jQuery("#profileAvatar img").attr("src",b.data.path))):(jQuery(".error").html(b.error),
jQuery(".error").show())})},confirmCode:function(){if(""==jQuery("#input-code").val())return alert("Please enter a code."),!1;document.confirmcode.submit()},resendCode:function(){jQuery("#sendcode").attr("disabled","disabled");return!0},confirmEmail:function(){if(""==jQuery("#input-email").val())return alert("Please enter a new email address."),!1;document.updateemail.submit()},profileEditInit:function(b){jQuery(".jqmWindow").css({position:"absolute"});jQuery(".jqmOverlay").unbind();jQuery("input[name=user_email]").blur(function(){value=
jQuery("input[name=user_email]").val();jQuery.getJSON("/user/checkavailable/",{type:"email",value:value},function(b){b.success||(alert("Email address already in use.  Please choose a different email address"),jQuery("input[name=user_email]").select())})});this.initAvatarUpload("/user/uploadavatar/?PHPSESSID="+b,"Avatar")},profileEditSubmit:function(){data=jQuery("#editProfileForm").serialize();jQuery(".error").html("");jQuery.post(jQuery("#editProfileForm").attr("action"),data,function(b){if(b.success)window.location.reload();
else if(b.error){for(err in b.error)for(e in b.error[err])jQuery("#"+err+"Error").append(b.error[err][e]);jQuery("#"+err+"Error").show()}});return!1},initAvatarUpload:function(b,c){uploadAvatar=new SWFUpload({upload_url:b,file_queue_error_handler:function(b,c,g){jQuery("#uploaderError").html("Error queueing file for upload: "+g).show()},file_dialog_complete_handler:function(b){0<b&&this.startUpload()},upload_progress_handler:function(b,f){percent=Math.ceil(f/b.size*100);jQuery("#"+c+" .uploadStatus").html("Uploading ... "+
percent+"% Complete");percent=Math.ceil(f/b.size*100);100==percent?(jQuery(".currentUpload div.progress_text").html('<img width="20" height="20"src="http://media.ebaumsworld.com/img/modalLoader.gif" />'),jQuery(".currentUpload div.progress").css({width:"230px"})):(jQuery(".currentUpload div.progress_text").html("<span>"+percent+"%</span>"),jQuery(".currentUpload div.progress").css({width:percent+"%"}))},upload_start_handler:function(b){jQuery("#uploaderError").html("").hide();jQuery(".uploadingList").html('<li class="currentUpload upload_cont"><div class="filename">'+
b.name+'</div><div class="outer_progress"><div class="progress"></div></div><div class="progress_text"></div></li>');return!0},upload_error_handler:function(b,c,g){jQuery("#uploaderError").html("Error uploading media file: "+g+" ("+c+")");jQuery("#uploaderError").show()},upload_success_handler:function(b,f){resp=eval("("+f+")");0==resp.success?(jQuery("li.currentUpload").remove(),jQuery("#uploaderError").html(resp.error),jQuery("#uploaderError").show()):(jQuery(".currentUpload div.progress").css({width:"230px"}),
jQuery(".currentUpload div.outer_progress").css({background:"#F1CE15",width:"230px"}),jQuery("#current"+c).attr("src","http://images.ebaumsworld.com"+resp.data.path),jQuery(".currentUpload div.progress_text").html(""));jQuery(".currentUpload").removeClass("currentUpload")},upload_complete_handler:function(b){0<this.getStats().files_queued?this.startUpload():(jQuery("#"+c+" .uploadBtn").show(),jQuery("#"+c+" .uploadStatus").html("<strong>Upload Complete</strong>"))},flash_url:"/js/swfupload/swfupload_f10.swf",
file_size_limit:50,file_types:"*.jpeg; *.jpg; *.gif;",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:"spanButtonPlaceHolder",button_width:152,button_height:50,button_text:"",button_text_style:".btnText { font-family: 'Fira Sans';font-weight: 500; }",button_text_left_padding:0,button_text_top_padding:0,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_cursor:SWFUpload.CURSOR.HAND,button_window_mode:"transparent"});jQuery("#"+c+" .uploader").html("");
jQuery("#"+c+" .uploader").append('<div class="uploadContainer" style="float:left;">');jQuery("#"+c+" .uploader").append('<span class="uploadStatus"></span>');jQuery("#"+c+" .uploader").append('<div class="uploadFileList"><ul></ul></div>');jQuery("#"+c+" .uploader").append("</div>")},signupEnable:function(b){if(""==b.value)return!1;"disabled"==jQuery("uploadBtn").attr("disabled")&&jQuery("uploadBtn").attr("disabled",!1);0==jQuery("termscheck").checked&&jQuery("uploadBtn").attr("disabled","disabled");
return!0},signupInit:function(){jQuery("form[name=register]").submit(function(){jQuery("input[class=required]").each(function(){if(0==jQuery.trim(this.value).length)return jQuery("#submitError").html("Please enter all required fields."),jQuery("input[class=required]").each(function(){""==this.value&&jQuery(this).css({backgroundColor:"yellow"})}),!1})});jQuery("input[name=username]").blur(function(){var b=jQuery("input[name=username]").val();jQuery.getJSON("/user/checkavailable/",{type:"username",
value:b},function(b){b.success||(alert("Username already in use.  Please choose a different username."),jQuery("input[name=username]").select())})});jQuery("input[name=email]").blur(function(){if(""!=jQuery("input[name=email]").val()){var b=jQuery("input[name=email]").val();jQuery.getJSON("/user/checkavailable/",{type:"email",value:b},function(b){b.success||jQuery("input[name=email]").select()})}})}},EbaumProfileFlash={removeRefresh:function(){jQuery("#reloadFlash").remove()},loadFlash:function(b,
c,d){jQuery("#flashContainer").html('<div id="flashObject"></div>');params={menu:!1};swfobject.embedSWF("http://media.ebaumsworld.com"+d,"flashObject",b,c,"9",!1,!1,params);swfobject.addLoadEvent();jQuery(".jqmWindow").css({position:"absolute"});this.removeRefresh()},loadMedia:function(b){0!=jQuery("#iPhoneUserCol").length?populateModal("<div style='font-size:22px; font-weight:bold;'>The pageyou requested is not supported on this device.</div>"):(jQuery("#jqModal").jqm({ajax:"/user/showcaseenlarge/"+
b+"/"}),jQuery("#jqModal").jqmShow())}},EbaumUserMedia={orderChange:!1,uploadNatural:!1,uploadFixed:!1,init:function(b,c){this.uploadNaturalThumbInit("/upload/sendfiles/picture/?media="+b+"&PHPSESSID="+c+"&thumb=natural","thumbnailUploadInfo");this.uploadFixedThumbInit("/upload/sendfiles/picture/?media="+b+"&PHPSESSID="+c+"&thumb=fixed","thumbnailUploadInfo")},submit:function(b){if(this.orderChange){var c=[];jQuery.each(jQuery("ul#sortable li.sortableLi img"),function(b,f){id=jQuery(f).attr("id");
parts=id.split("-");c[b]=parts[1]});jQuery("#galleryOrder").val(c.join(","))}"blog"!=b&&"article"!=b||jQuery("#blogBody").html(CKEDITOR.instances.blogBody.getData());return!0},remove:function(b,c){confirm("Do you really want to remove this item for your "+c+"?")&&jQuery.get("/user/remove"+c+"/"+b+"/",function(d){d.success?jQuery("#media-"+b).remove():d.error?populateModal("<h1>ALERT</h1>"+d.error+"."):populateModal("<h1>ALERT</h1>"+c+" failed to delete.")});return!1},setNewThumb:function(){jQuery("img.gallerySelectedThumb").removeClass("gallerySelectedThumb");
jQuery("a.gallerySelectedThumb").attr("class","");jQuery("a[name=clicked] img").addClass("gallerySelectedThumb");jQuery("#currentThumb").attr("src",jQuery("a[name=clicked] img").attr("src"));jQuery("#thumb_path").attr("value",jQuery("a[name=clicked] img").attr("src"));fullId=jQuery("a[name=clicked] img").attr("id");parts=fullId.split("-");jQuery("#thumbId").attr("value",parts[1]);jQuery("a[name=clicked]").attr("name","")},uploadNaturalThumbInit:function(b,c){uploadNaturalThumb=new SWFUpload({upload_url:b,
file_queue_error_handler:function(b,c,g){jQuery("#uploadNaturalBox .uploadProgress").hide();jQuery("#uploadNaturalBox .error").show();jQuery("#uploadNaturalBox .errorMessage").html(g)},file_dialog_complete_handler:function(b){0<b&&this.startUpload()},upload_progress_handler:function(b,c){jQuery("#uploadNaturalBox .thumbBrowse").hasClass("disabled")||(jQuery("#uploadNaturalBox .thumbBrowse").addClass("disabled"),jQuery("#uploadFixedBox .thumbBrowse").addClass("disabled"),jQuery("#uploadFixedBox .swfupload").hide());
jQuery("#uploadNaturalBox .error").hide();jQuery("#uploadNaturalBox .uploadProgress").show();jQuery(".commitChangesBtn").attr("disabled",!0).addClass("disabled");percent=Math.ceil(c/b.size*100);jQuery("#uploadNaturalBox .progressText").html("Uploading... "+percent+"% Complete");100<=percent&&(jQuery("#uploadNaturalBox .progressText").html("Uploading... 100% Complete"),jQuery("#uploadNaturalBox .progressText").html("Processing..."))},upload_error_handler:function(b,c,g){jQuery("#uploadNaturalBox .error").show();
jQuery("#uploadNaturalBox .errorMessage").html(g+" ("+c+")")},upload_success_handler:function(b,c){jQuery(".commitChangesBtn").attr("disabled",!1).removeClass("disabled");json=eval("("+c+")");json.error?(jQuery("#uploadNaturalBox .uploadProgress").hide(),jQuery("#uploadNaturalBox .error").show(),jQuery("#uploadNaturalBox .errorMessage").html(json.error)):(jQuery(".naturalThumbPreview").attr("src","http://cdn.ebaumsworld.com"+json.data.thumbNatural),jQuery("#uploadNaturalBox .thumbBrowse, #uploadNaturalBox object.swfupload").hide(),
jQuery("#uploadFixedBox .thumbBrowse").removeClass("disabled"),jQuery("#uploadFixedBox object.swfupload").show(),jQuery("#uploadNaturalBox .uploadedFile").html(b.name))},upload_complete_handler:function(b){jQuery("#uploadNaturalBox .uploadComplete").show();jQuery("#uploadNaturalBox .uploadProgress").hide()},flash_url:"/js/swfupload/swfupload_f10.swf",file_size_limit:"3MB",file_types:"*.jpeg; *.jpg; *.gif; *.png;",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:"naturalThumbButtonPlaceHolder",
button_image_url:"",button_width:83,button_height:44,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_window_mode:"transparent",button_cursor:SWFUpload.CURSOR.HAND})},uploadFixedThumbInit:function(b,c){uploadFixedThumb=new SWFUpload({upload_url:b,file_queue_error_handler:function(b,c,g){jQuery("#uploadFixedBox .uploadProgress").hide();jQuery("#uploadFixedBox .error").show();
jQuery("#uploadFixedBox .errorMessage").html(g)},file_dialog_complete_handler:function(b){0<b&&this.startUpload()},upload_progress_handler:function(b,c){jQuery("#uploadFixedBox .thumbBrowse").hasClass("disabled")||(jQuery("#uploadNaturalBox .thumbBrowse").addClass("disabled"),jQuery("#uploadFixedBox .thumbBrowse").addClass("disabled"),jQuery("#uploadNaturalBox .swfupload").hide());jQuery("#uploadFixedBox .error").hide();jQuery("#uploadFixedBox .uploadProgress").show();jQuery(".commitChangesBtn").attr("disabled",
!0).addClass("disabled");percent=Math.ceil(c/b.size*100);jQuery("#uploadFixedBox .progressText").html("Uploading... "+percent+"% Complete");100<=percent&&(jQuery("#uploadFixedBox .progressText").html("Uploading... 100% Complete"),jQuery("#uploadFixedBox .progressText").html("Processing..."))},upload_error_handler:function(b,c,g){jQuery("#uploadFixedBox .error").show();jQuery("#uploadFixedBox .errorMessage").html(g+" ("+c+")")},upload_success_handler:function(b,c){jQuery(".commitChangesBtn").attr("disabled",
!1).removeClass("disabled");json=eval("("+c+")");json.error?(jQuery("#uploadFixedBox .uploadProgress").hide(),jQuery("#uploadFixedBox .error").show(),jQuery("#uploadFixedBox .errorMessage").html(json.error)):(jQuery(".fixedThumbPreview").attr("src","http://cdn.ebaumsworld.com"+json.data.thumbFixed),jQuery("#uploadFixedBox .thumbBrowse, #uploadFixedBox object.swfupload").hide(),jQuery("#uploadNaturalBox .thumbBrowse").removeClass("disabled"),jQuery("#uploadNaturalBox object.swfupload").show(),jQuery("#uploadFixedBox .uploadedFile").html(b.name))},
upload_complete_handler:function(b){jQuery("#uploadFixedBox .uploadComplete").show();jQuery("#uploadFixedBox .uploadProgress").hide()},flash_url:"/js/swfupload/swfupload_f10.swf?3433",file_size_limit:"3MB",file_types:"*.jpeg; *.jpg; *.gif; *.png;",file_upload_limit:1,file_queue_limit:1,debug:!1,button_placeholder_id:"fixedThumbButtonPlaceHolder",button_image_url:"",button_width:83,button_height:44,button_text:"",button_text_style:".btnText { font-family: Arial; }",button_text_left_padding:0,button_text_top_padding:0,
button_action:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disable:!1,button_window_mode:"transparent",button_cursor:SWFUpload.CURSOR.HAND})}};var CommentEvent={ADD:"add",ADD_REPLY:"add_reply",ADD_COMPLETE:"add_complete"};EbaumComment.prototype=new EmuseEvent;EbaumComment.constructor=EbaumComment;
function EbaumComment(b,c,d,f){this._authenticated=d;this._id=c;this._mediaType=f;this._container=b;this._listPage=1;this._timeoutId=void 0;this._processing=0;this._sort=void 0;this._commentId=!1;this._ga=new EbaumGAEvent;this._linkWhitelist=this._imgWhitelist=!1;this._container.onclick=this.bind(this.handleClick);this._container.onchange=this.bind(this.handleChange);this.addListener(CommentEvent.ADD,this.addHandler);this.addListener(CommentEvent.ADD_REPLY,this.addReplyHandler);this.addListener(CommentEvent.ADD_COMPLETE,
this.page);(this._commentId=this.getCommentIdFromUrl())?this._listPage=this.getCommentPage(this._commentId):this.load(this._listPage)}
EbaumComment.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;var c=b.id.split("-"),d=c[1];switch(c[0]){case "addComment":this.relay(CommentEvent.ADD,b);break;case "addReply":this.relay(CommentEvent.ADD_REPLY,b);break;case "reply":this.replyBtn(d);break;case "ban":this.banBtn(b);break;case "batch":"select"==d&&this.selectAll();"delete"==d&&this.batchDelete();break;case "confirmBan":this.confirmBan(b);break;case "delete":this.deleteBtn(b);break;case "remove":this.removeBtn(b);
break;case "feature":this.featureBtn(b);break;case "restore":this.restoreBtn(b);break;case "addCommentText":jQuery(b).val()||(jQuery(b).autosize(),jQuery(".submitComment").removeClass("disabled"));jQuery("textarea").blur(function(){jQuery(this).val()||(jQuery(this).css({height:"52px"}),jQuery(".submitComment").addClass("disabled"))});break;case "commentReplyText":jQuery(b).val()||(jQuery("#addReply-"+d).autosize(),jQuery("#addReply-"+d).removeClass("disabled"));jQuery(b).blur(function(){jQuery(this).val()||
(jQuery(this).css({height:"20px"}),jQuery("#addReply-"+d).addClass("disabled"))});break;case "commentRefresh":this.refreshComments();break;case "rateUp":this.rateComment(d,1);break;case "rateDown":this.rateComment(d,-1);break;case "watch":this.watchComment(b);break;case "commentSortInfo":jQuery("#jqModal").jqm({ajax:"/comment/explain/"});jQuery("#jqModal").jqmShow();break;case "sort":this.sortList(d,this._page);document.getElementById("sortDropLabel").innerHTML=b.innerHTML;break;case "commentToggle":case "commentToggleAction":jQuery("#commentHolder").is(":visible")?
(jQuery("#commentHolder").hide(),jQuery("#commentToggleAction").html("Show"),jQuery("#commentToggleAction-icon").html("+").removeClass("hideComments"),this._ga.fireGA("Comments - Hide","mobile","btf")):(jQuery("#commentHolder").show(),jQuery("#commentToggleAction").html("Hide"),jQuery("#commentToggleAction-icon").html("_").addClass("hideComments"),this._ga.fireGA("Comments - Show","mobile","btf"))}};
EbaumComment.prototype.handleChange=function(b){b=b||window.event;b=(b.target||b.srcElement).id.split("-");b=b[0];switch(b){case "sortBySelect":this.sortList(jQuery("#sortBySelect option:selected").val(),this._page);break;case "mobileSortComments":b=jQuery("#"+b+" option:selected").attr("id").split("-"),b=b[1],this.sortList(b,this._page)}};
EbaumComment.prototype.rateComment=function(b,c){if(!this._authenticated)return this.promptLogin(),!1;jQuery.post("/comment/rate/",{commentId:b,rating:c},function(d){d.success?(d=parseInt(jQuery("#commentRating-"+b).html().replace(/\s*/g,"")),1==c?(d++,0<=d&&jQuery("#commentRating-"+b).removeClass("negative"),jQuery("#rateUp-"+b).addClass("rated"),jQuery("#rateDown-"+b).fadeOut("fast")):(d--,0>d&&jQuery("#commentRating-"+b).addClass("negative"),jQuery("#rateDown-"+b).addClass("rated"),jQuery("#rateUp-"+
b).fadeOut("fast")),jQuery("#commentRating-"+b).html(" "+d)):(jQuery("#rateUp-"+b).attr("background","url('http://media.ebaumsworld.com/img/exclamation.png') 0 0 no-repeat"),jQuery("#rateDown-"+b).fadeOut("fast"))})};
EbaumComment.prototype.load=function(b){"number"!=typeof b&&(b=this._listPage);var c=this;jQuery("#commentListHolder").load("/comment/list/"+this._id+"/?page="+b,function(){c._commentId&&(jQuery("#comment-"+c._commentId).offset(),c._commentId&&(setTimeout(function(){var b=jQuery("#comment-"+c._commentId).offset();jQuery("html,body").animate({scrollTop:b.top-50},500)},2E3),jQuery("#comment-"+c._commentId).css({"background-color":"#e7e9ee"})));c.linkify()})};
EbaumComment.prototype.changeListPage=function(b,c,d){null!=c&&(this.container=c);var f=this,g=jQuery("#commentList").offset();jQuery("html,body").animate({scrollTop:g.top-150},500);jQuery("#commentList").html('<div class="loaderWrapper alignC"><div class="widgetLoader"><svg width="1em" height="1em"><circle cx="0.5em" cy="0.5em" r="0.45em"/></svg></div></div>');"commentListHolder"==this.container&&jQuery("#"+this.container).load(b,function(){"mediaListColumn"==Ebaum.container&&(g=document.getElementById("commentList").offsetTop,
120<g&&(g-=120));f.linkify()});void 0!=d&&void 0!=d[2]&&"moderate-mature"==d[2]&&(EbaumScrollAd.type="mature");Ebaum.updateAnalytics(b)};
EbaumComment.prototype.linkify=function(){var b=/(#([0-9]*))/gim;if(0<this._imgWhitelist.length){for(var c="((",d=0,f=this._imgWhitelist.length;d<f;d++)c+=this._imgWhitelist[d].replace("///gim","\\/").replace("/./","."),d+1<f&&(c+="|");c+=")[-A-Z0-9+&@#/%?=~_|!:,.;]*.(?:jpg|png|gif))"}var g=this;jQuery(".commentBody").each(function(){inputText=jQuery(this).html();inputText.match(/(?!.*(png|gif|jpg))((http:\/\/forum.|forum.)ebaumsworld.com([-A-Z0-9+&@#/%?=~_|!:,.;]*))/,"gim")?(console.log("match!"),
replacedText=inputText.replace(RegExp("(?!.*(png|gif|jpg))((http://forum.|forum.)ebaumsworld.com([-A-Z0-9+&@#/%?=~_|!:,.;]*))","gim"),'<a href="http://forum.ebaumsworld.com$4" target="_blank">http://forum.ebaumsworld.com$4</a>')):replacedText=inputText.replace(RegExp("(?!.*(png|gif|jpg))((http://www.|www.|http://)*ebaumsworld.com([-A-Z0-9+&@#/%?=~_|!:,.;]*))","gim"),'<a href="http://www.ebaumsworld.com$4" target="_blank">http://www.ebaumsworld.com$4</a>');jQuery(this).html(replacedText);c&&(imageText=
jQuery(this).html(),replacedText=imageText.replace(new RegExp(c,"mi"),'<img src="$1" class="commentImage" />'),jQuery(this).html(replacedText));if("gallery"==g._mediaType||"contest"==g._mediaType)inputText=jQuery(this).html(),replacedText=inputText.replace(b,'<a id="seekImage-$2">$1</a>'),jQuery(this).html(replacedText);if("video"==g._mediaType&&(inputText=jQuery(this).html(),matches=inputText.match(RegExp("((([0-9]{0,2}):)?([0-9]{0,2})?:([0-9]{2}))","gim")))){for(var d=0;d<matches.length;d++){match=
matches[d].split(":");time=0;units=match.length;for(var f=units-1;0<=f;f--)f==units-1&&(time+=1*match[f]),f==units-2&&(time+=60*match[f]),f==units-3&&(time+=3600*match[f]);inputText=replacedText=inputText.replace(new RegExp(matches[d],"gim"),'<a id="seekTime-'+time+'">'+matches[d]+"</a>")}jQuery(this).html(replacedText)}})};EbaumComment.prototype.getCommentIdFromUrl=function(){var b=location.href.match(/#comment-([0-9]+)$/i);return b&&b[1]?b[1]:!1};
EbaumComment.prototype.getCommentPage=function(b){eComment=this;jQuery.getJSON("/comment/getpage/"+b+"/",function(b){eComment._listPage=0<b.data.page?b.data.page:1;eComment.load(this._listPage)})};
EbaumComment.prototype.page=function(b){if(void 0!=this._id){isNaN(b)&&(b=1);jQuery("#commentList").html('<div class="widgetLoader"></div>');var c="/comment/list/"+this._id+"/";void 0!=this._sort&&(c+=this._sort+"/");c+="?page="+b;eComment=this;jQuery("#commentListHolder").load(c,function(){eComment.linkify()});Ebaum.ajaxRefresh(this._id);Ebaum.updateAnalytics(c)}};
EbaumComment.prototype.addHandler=function(){if(!this._authenticated)return this.promptLogin(),!1;if(!jQuery("#addComment").hasClass("disabled")&&0==this._processing){this._processing=1;var b=escape(jQuery("#addCommentText").val());eComment=this;jQuery.post("/comment/add/"+this._id+"/",{comment:b},function(b){if(b.success)clearInterval(f),clearTimeout(g),eComment.fire(CommentEvent.ADD_COMPLETE),jQuery("#addCommentText").val(""),jQuery("#commentError").html("").hide(),b=parseInt(jQuery(".commentTitle").html()),
jQuery(".commentTitle").html(b+1+" Comments"),eComment._ga.fireGA("User - Media Comment",eComment._mediaType,window.location.href);else{jQuery("#commentError").html(b.error).show();g=b.error.replace(/[^0-9]/g,"");g=b.data;if(0<g){jQuery("#commentTimer").show();jQuery("#addComment").addClass("disabled");var c=g,f=setInterval(function(){jQuery("#commentSeconds").html(--c)},1E3),g=setTimeout(function(){clearInterval(f);jQuery("#commentTimer, #commentError").hide();jQuery("#addComment").removeClass("disabled")},
1E3*g)}eComment._processing=0;return!1}eComment._processing=0;return!0})}};EbaumComment.prototype.replyBtn=function(b){jQuery("#commentReplyForm-"+b).slideDown("fast");jQuery("#commentReplyText-"+b).focus()};
EbaumComment.prototype.addReplyHandler=function(b){if(!this._authenticated)return this.promptLogin(),!1;var c=b.target.id.split("-")[1];if(0==this._processing&&c){this._processing=1;b=escape(jQuery("#commentReplyText-"+c).val());var d=this;jQuery.post("/comment/add/"+this._id+"/",{comment:b,parent:c},function(b){if(b.success)newId=b.data.id,d.getCommentPage(newId);else return jQuery("#replyError-"+c).html(b.error),d._processing=0,!1;d._ga.fireGA("User - Media Comment - Reply",d._mediaType,window.location.href);
d._processing=0;return!0})}};EbaumComment.prototype.watchComment=function(b){if(!this._authenticated)return this.promptLogin(),!1;var c=this._splitId(b);jQuery.post("/comment/watch/",{id:c.id},function(b){if(b.success)jQuery("#commentWatchButton-"+c.id+" img").attr("src","http://media.ebaumsworld.com/img/tick.png");else return jQuery("#commentWatchButton-"+c.id+" img").attr("src","http://media.ebaumsworld.com/img/exclamation.png"),!1;return!0})};
EbaumComment.prototype.refreshComments=function(){jQuery("#commentRefresh").attr("disabled")||(this._sort=void 0,this.page(1),jQuery("#commentRefresh").attr("disabled","disabled"),this._timeoutId=setTimeout(this.enableRefresh,2E3))};EbaumComment.prototype.enableRefresh=function(){jQuery("#commentRefresh").removeAttr("disabled");"undefined"!=this._timeoutId&&window.clearTimeout(this._timeoutId)};EbaumComment.prototype.sortList=function(b,c){c||(c=1);this._sort=b;this.page(c)};
EbaumComment.prototype.clearInput=function(b){jQuery(b).val("")};EbaumComment.prototype.deleteBtn=function(b){var c=this._splitId(b);"user"==b.id.split("-")[2]?jQuery.post("/comment/userdelete/",{id:c.id},function(b){b.success?(jQuery("#jqModal").jqmHide(),jQuery("#comment-"+c.id).addClass("deletedComment")):jQuery("#comment-"+c.id).before(b.message);return!0}):(jQuery("#jqModal").jqm({ajax:"/comment/admin/delete/?id="+c.id}),jQuery("#jqModal").jqmShow())};
EbaumComment.prototype.removeBtn=function(b){var c=this._splitId(b);jQuery.post("/comment/admin/removeimage/",{id:c.id},function(b){b.success?jQuery("#comment-"+c.id+" .commentBody:first").html(b.message):(jQuery("#jqModal").jqmShow(),jQuery("#jqModal .jqContent").html("<h1>Error!</h1><div class='modalContentWrapper'>"+b.error+"</div>"));return!0})};
EbaumComment.prototype.featureBtn=function(b){var c=this._splitId(b),d="";jQuery("#feature-"+c.id).attr("src","http://cdn.ebaumsworld.com/img/desktop/loaderGlobe32BlueGrey.gif");jQuery.post("/comment/admin/feature",{id:c.id},function(b){b.success?(d="Comment Featured",jQuery("#feature-"+c.id).attr("src","http://cdn.ebaumsworld.com/img/admin/yes.png")):(d="Comment Was Not Featured",jQuery("#feature-"+c.id).attr("src","http://cdn.ebaumsworld.com/img/admin/no.png"));populateModal(d)})};
EbaumComment.prototype.restoreBtn=function(b){var c=this._splitId(b);jQuery.post("/comment/admin/restore/",{id:c.id},function(b){b.success?(jQuery("#comment-"+c.id).removeClass("deletedComment"),jQuery("#comment-"+c.id+" li").removeClass("deletedComment")):jQuery("#comment-"+c.id).before(b.message);return!0})};
EbaumComment.prototype.banBtn=function(b){document.getElementById("jqModal").onclick=this.bind(this.handleClick);b=this._splitId(b);jQuery(".jqBarText").html("Comment Ban User");jQuery("#jqModal").jqm({ajax:"/comment/admin/ban/"+b.id+"/",target:".jqContent"}).jqmShow()};
EbaumComment.prototype.batchDelete=function(){var b="",c=jQuery(".batchDelete input:checked");i=0;for(len=c.length;i<len;i++)b+=jQuery(c[i]).val(),i<len-1&&(b+=",");jQuery("#jqModal").jqm({ajax:"/comment/admin/batchdelete/?id="+b});jQuery("#jqModal").jqmShow()};EbaumComment.prototype.selectAll=function(){var b=jQuery(".batchDelete input[name=batchSelect]");b.prop("checked",!b.prop("checked"))};
EbaumComment.prototype.confirmBan=function(b){if(!jQuery("#banReason").val())return jQuery("#formError").html("You must enter a reason to ban the user."),!1;var c=this._splitId(b);b=jQuery("#commentBanForm").serialize();jQuery("#formError").html('<img src="http://media.ebaumsworld.com/img/modalLoader.gif" />');jQuery.post("/comment/admin/ban/"+c.id+"/",b,function(b){b.success?(populateModal(b.message),jQuery("img#ban-"+c.id).attr("src","http://media.ebaumsworld.com/img/tick.png"),jQuery("#comment-"+
c.id).fadeTo("slow",.3)):populateModal(b.error)})};EbaumComment.prototype.promptLogin=function(){EbaumMobile.mobile?window.location="/user/login/":(jQuery("#jqModal").jqm({ajax:"/user/login/"}),jQuery("#jqModal").jqmShow())};EbaumComment.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};var EbaumRelatedMedia={prevPage:0,page:1,nextPage:2,prevButton:void 0,nextButton:void 0,totalCount:void 0,fadeSpeed:"fast",working:!1,init:function(){this.prevButton=jQuery("#prevRelatedMedia");this.nextButton=jQuery("#nextRelatedMedia");this.totalCount=1*jQuery("#relatedMediaCount").val();jQuery(".relatedMediaList"+this.page).fadeIn(this.fadeSpeed);4<this.totalCount?this.setNextActive():this.setNextInactive();this.setPrevInactive()},prev:function(){!this.working&&(this.working=!0,0<this.prevPage||
1==this.page)&&(this.fade(this.prevPage),this.setNextActive())},next:function(b){this.working||(this.working=!0,this.totalCount/4>this.page?(this.fade(this.nextPage),this.setPrevActive()):this.setNextInactive())},setPrevInactive:function(){this.prevButton.removeClass("active");this.prevButton.attr("src","http://media.ebaumsworld.com/img/arrowInactivePrevious.png");this.prevButton.unbind("click")},setPrevActive:function(){this.prevButton.addClass("active");this.prevButton.attr("src","http://media.ebaumsworld.com/img/arrowActivePrevious.png");
this.prevButton.unbind("click");this.prevButton.click(function(){EbaumRelatedMedia.prev()})},setNextInactive:function(){this.nextButton.removeClass("active");this.nextButton.attr("src","http://media.ebaumsworld.com/img/arrowInactiveNext.png");this.nextButton.unbind("click")},setNextActive:function(){this.nextButton.addClass("active");this.nextButton.attr("src","http://media.ebaumsworld.com/img/arrowActiveNext.png");this.nextButton.unbind("click");this.nextButton.click(function(){EbaumRelatedMedia.next()})},
fade:function(b){jQuery(".relatedMediaList"+this.page).fadeOut(this.fadeSpeed,function(){jQuery(".relatedMediaList"+b).fadeIn(EbaumRelatedMedia.fadeSpeed);EbaumRelatedMedia.working=!1});b>this.page?this.incrementCounts():b<this.page&&this.decrementCounts()},incrementCounts:function(){this.prevPage=this.page;this.page=this.nextPage;++this.nextPage>this.totalCount/4&&this.setNextInactive()},decrementCounts:function(){this.nextPage=this.page;this.page=this.prevPage;this.prevPage--;1==this.page&&this.setPrevInactive()}};EbaumOverlay.prototype=new EmuseEvent;EbaumOverlay.constructor=EbaumOverlay;function EbaumOverlay(b,c){this._container=b;this._authenticated=c;this._container.onclick=this.bind(this.handleClick);this._container.onmouseover=this.bind(this.handleEnter);this._container.onmouseout=this.bind(this.handleLeave)}
EbaumOverlay.prototype.handleClick=function(b){b=b||window.event;b=b.target||b.srcElement;if(b.id){b=b.id.split("-");var c=b[1];switch(b[0]){case "hl":b=document.getElementById("hla-"+c);c="_blank"==b.target?"_blank":"_self";window.open(b.href,c);break;case "rm":b=document.getElementById("rma-"+c),c="_blank"==b.target?"_blank":"_self",window.open(b.href,c)}}};
EbaumOverlay.prototype.handleEnter=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.fromElement,d=b.id.split("-"),d=d[0];if("overlay"!=d){for(;"overlay"!=d&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),d=d[0];if("overlay"==d)if(void 0===c)this.enterHandler(b);else if("HTML"!=c.nodeName){for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.enterHandler(b)}}else if(void 0===c)this.enterHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&
this.enterHandler(b)}};EbaumOverlay.prototype.handleLeave=function(b){var c=b||window.event;b=c.target||c.srcElement;var c=c.relatedTarget||c.toElement,d=b.id.split("-"),d=d[0];if("overlay"!=d){for(;"overlay"!=d&&"BODY"!=b.nodeName;)b=b.parentNode,d=b.id.split("-"),d=d[0];if("overlay"==d)if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}}else if(void 0===c)this.leaveHandler(b);else{for(;c!=b&&"BODY"!=c.nodeName;)c=c.parentNode;c!=b&&this.leaveHandler(b)}};
EbaumOverlay.prototype.enterHandler=function(b){jQuery("#"+b.id+" .overlay").show()};EbaumOverlay.prototype.leaveHandler=function(b){jQuery("#"+b.id+" .overlay").hide()};
EbaumOverlay.prototype.flagHandler=function(b){var c=b.id.split("-")[1];this._authenticated?jQuery.getJSON("/media/flag/"+c+"/",function(c){0==c.success?(populateModal(c.message),jQuery(".jqBarText").html("Oops!")):c.message?jQuery("img#"+b.id).attr("src","/img/assets/overlayFlag.png"):jQuery("img#"+b.id).attr("src","/img/assets/overlayFlagged.png")}):(populateModal("Log in to flag this."),jQuery(".jqBarText").html("Login"))};
EbaumOverlay.prototype.likeHandler=function(b){var c=b.id.split("-")[1];this._authenticated?(jQuery.getJSON("/user/likemedia/"+c+"/",function(c){0==c.success?(populateModal(c.message),jQuery(".jqBarText").html("Oops!")):c.message?(jQuery("img#"+b.id).attr("src","/img/assets/overlayLike.png"),jQuery("#statLikeCount").html(1*jQuery("#statLikeCount").html()-1)):(jQuery("img#"+b.id).attr("src","/img/assets/overlayLiked.png"),jQuery("#statLikeCount").html(1*jQuery("#statLikeCount").html()+1))}),jQuery("img#"+
b.id).attr("src","/img/assets/overlayLiked.png")):(populateModal("Log in to like this."),jQuery(".jqBarText").html("Login"))};EbaumGAEvent.prototype=new EmuseEvent;EbaumGAEvent.constructor=EbaumGAEvent;function EbaumGAEvent(){this._containers=[];this._ids=[]}EbaumGAEvent.prototype.addClickContainer=function(b){b&&("undefined"==typeof this._containers[b.id]&&(this._containers[b.id]=[]),b.onclick=this.bind(this.handleClick),this._containers[b.id].push(b),this._ids.push(b.id))};
EbaumGAEvent.prototype.handleClick=function(b){b=b||window.event;var c=b.target||b.srcElement,d=c;if(0>this._ids.indexOf(c.id)){for(cont=c.id;0>this._ids.indexOf(cont)&&"BODY"!=d.nodeName;)d=d.parentNode,cont=d.id;parts=cont.split("-");cont=parts[0];"a"!=c.tagName.toLowerCase()?(children=c.getElementsByTagName("a"),0<children.length?link=children[0].href:(other=c.parentNode,"a"!=other.tagName.toLowerCase()?(children=other.getElementsByTagName("a"),0<children.length&&(link=children[0].href)):link=
other.href)):link=c.href;label=window.location.href;switch(cont){case "highlightsList":newC=c.id;for(newP=c;0>this._ids.indexOf(newC)&&"BODY"!=newP.nodeName;){if("li"==newP.tagName.toLowerCase()){divP=newP.id.split("-");page=divP[2];break}newP=newP.parentNode;newC=newP.id}category="Highlights "+page;break;case "ebaumPicks":category="Ebaums Picks";break;case "popularGames":category="Popular Games";break;case "popularGalleries":category="Popular Galleries";break;case "topVideos":category="Top Media";
break;case "topVideoList":category="Trending";break;case "bigdog":category="Bigdog "+parts[1];break;case "puppydog":category="Puppydog "+parts[1];break;case "tagPromoList":category="Tag Promo List";break;case "mobileInfiniteMediaList":category="Media - Infinite - Featured";link="mobile";label="btf";break;case "mobileRelatedMediaList":category="Media - Related";link="mobile";label="btf";break;case "relatedGalleryList":category="Gallery - Related Media";link=0<jQuery("#replayGalleryShare").length?"player-2":
"player-1";break;case "replayGallery":category="Gallery - Replay";break;case "nextGallery":category="Gallery - Next";link=0<jQuery("#replayGalleryShare").length?"player-2":"player-1";break;case "lightboxNextGallery":category="Gallery - Next";link="lightbox";break;case "lightboxNextContest":category="Contest - Next";link="lightbox";break;case "mobileMoreMedia":category="Mobile - Next";link="Show More";break;case "outbrainRelatedMedia":c=jQuery(b.target);c.parents("a")&&(category="nofollow"==c.parents("a").attr("rel")?
"Outbrain Paid Link":"Outbrain Internal Link");break;case "lightboxRelatedGalleryList":category="Gallery - Related Media";link="lightbox";break;case "exitOverlay":parts=c.id.split("-");if(!parts[0])return;version=(version=jQuery(".version1").length)?1:4;category="Exit Overlay - "+version;link=parts[1];label=parts[2];break;case "rcRelatedVideos2":b=this.getMediaType();category="Right Rail - Related Media - "+b;link="Style 2";label="Related";break;case "rcNextVideos2":b=this.getMediaType();category=
"Right Rail - Related Media - "+b;link="Style 2";label="Next";break;case "rcRelatedVideos4":b=this.getMediaType();category="Right Rail - Related Media - "+b;link="Style 1";label="Related";break;case "rcNextVideos4":b=this.getMediaType();category="Right Rail - Related Media - "+b;link="Style 1";label="Next";break;default:return}this.fireGA(category,link,label)}};
EbaumGAEvent.prototype.getMediaType=function(){var b=window.location.href.split("/")[3];switch(b){case "pictures":b="Gallery";break;case "videos":b="Video"}return b};EbaumGAEvent.prototype.fireGA=function(b,c,d,f){f=f?{nonInteraction:"true"}:{};ga("send","event",b,c,d,f)};EbaumFBEvent.prototype=new EmuseEvent;EbaumFBEvent.constructor=EbaumFBEvent;function EbaumFBEvent(){this._containers=[];this._ids=[]}EbaumFBEvent.prototype.addClickContainer=function(b){b&&("undefined"==typeof this._containers[b.id]&&(this._containers[b.id]=[]),b.onclick=this.bind(this.handleClick),this._containers[b.id].push(b),this._ids.push(b.id))};
EbaumFBEvent.prototype.handleClick=function(b){b=b||window.event;var c=b=b.target||b.srcElement;if(0>this._ids.indexOf(b.id)){for(cont=b.id;0>this._ids.indexOf(cont)&&"BODY"!=c.nodeName;)c=c.parentNode,cont=c.id;parts=cont.split("-");cont=parts[0];"a"!=b.tagName.toLowerCase()?(children=b.getElementsByTagName("a"),0<children.length?link=children[0].href:(other=b.parentNode,"a"!=other.tagName.toLowerCase()?(children=other.getElementsByTagName("a"),0<children.length&&(link=children[0].href)):link=other.href)):
link=b.href;this.fireFB(category,link,window.location.href)}};EbaumFBEvent.prototype.fireFB=function(b,c,d){d?fbq("trackCustom",b,c):fbq("track",b,c)};var XHRState={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4};EmuseXmlHttpRequest.prototype=new EmuseEvent;EmuseXmlHttpRequest.constructor=EmuseXmlHttpRequest;function EmuseXmlHttpRequest(b,c){this._request=new XMLHttpRequest;this._options={name:c.fileName};this._listeners={onAbort:b.onAbort,onError:b.onError,onLoad:b.onLoad,onLoadStart:b.onLoadStart,onProgress:b.onProgress,onStateChange:b.onStateChange,onSuccess:b.onSuccess};this.setListeners()}
EmuseXmlHttpRequest.prototype.setListeners=function(){var b=this._listeners,c=this._request,d=this;this._request.upload.onabort=function(c){if(b.onAbort)b.onAbort(c,d._file)};this._request.upload.onerror=function(c){if(b.onServerError)b.onServerError(c,d._file)};this._request.upload.onload=function(c){if(b.onServerLoad)b.onServerLoad(c,d._file)};this._request.upload.onloadstart=function(c){if(b.onLoadStart)b.onLoadStart(c,d._file)};this._request.upload.onprogress=function(c){if(b.onProgress)b.onProgress(c,
d._file)};this._request.onreadystatechange=function(f){if(b.onStateChange)b.onStateChange(f,d._file,c.readyState);if(b.onSuccess&&c.readyState==XHRState.DONE&&200==c.status)b.onSuccess(f,d._file,c.responseText)}};
EmuseXmlHttpRequest.prototype.initUpload=function(b,c){this._file=c;this._request.open("POST",b,!0);if(c.getAsBinary){var d=dashes+boundary+crlf+'Content-Disposition: form-data;name="'+settings.name+'";filename="'+unescape(encodeURIComponent(c.name))+'"'+crlf+"Content-Type: application/octet-stream"+crlf+crlf+c.getAsBinary()+crlf+dashes+boundary+dashes;this._request.setRequestHeader("Content-Type","multipart/form-data;boundary="+boundary);this._request.sendAsBinary(d)}else window.FormData&&(d=new FormData,
d.append(this._options.name,c),this._request.send(d))};EmuseXmlHttpRequest.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};var FileReaderState={EMPTY:0,LOADING:1,DONE:2};EmuseFileReader.prototype=new EmuseEvent;EmuseFileReader.constructor=EmuseFileReader;function EmuseFileReader(b,c){this._reader=new FileReader;this._file=c;this._listeners={onAbort:b.onAbort,onError:b.onError,onLoad:b.onLoad,onLoadEnd:b.onLoadEnd,onLoadStart:b.onLoadStart,onProgress:b.onProgress};this.setListeners()}
EmuseFileReader.prototype.setListeners=function(){var b=this._listeners,c=this._file;this._reader.onabort=function(d){if(b.onAbort)b.onAbort(d,c)};this._reader.onerror=function(d){if(b.onError)b.onError(d,c)};this._reader.onload=function(d){if(b.onLoad)b.onLoad(d,c)};this._reader.onloadend=function(d){if(b.onLoadEnd)b.onLoadEnd(d,c)};this._reader.onloadstart=function(d){if(b.onLoadStart)b.onLoadStart(d,c)};this._reader.onprogress=function(d){if(b.onProgress)b.onProgress(d,c)}};
EmuseFileReader.prototype.initRead=function(b){this._reader.readAsDataURL(b)};EmuseFileReader.prototype._splitId=function(b){b=b.id.split("-");return{type:b[0],id:b[1]}};var EbaumIM=window.EbaumIM||{};EbaumIM.bar=window.EbaumIM.bar||{};
(function(b){EbaumIM.bar=function(b){this.client=b;this.chats={};this.testCount=0;this.client.addListener("RESUMED",this.bind(this.initTheme));this.addListener("THEME_READY",this.bind(this.initBar));this.addListener("BAR_READY",this.bind(this.initEventListeners))};EbaumIM.bar.prototype=new EmuseEvent;EbaumIM.bar.constructor=EbaumIM.bar;EbaumIM.bar.prototype.initTheme=function(){EbaumIM.DEBUG&&console.log("[EbaumIM] Initializing Theme...");var c=this;b("<div></div>").appendTo("body").load(this.client.config.theme+
"/theme.html #imjs-bar, .imjs-tooltip",function(){c.fire("THEME_READY")})};EbaumIM.bar.prototype.initEventListeners=function(){this.refreshFriends();this.refreshMsgs();this.client.addListener("FRIEND_UPDATE",this.bind(this.refreshFriends));this.client.addListener("MSG_UPDATE",this.bind(this.refreshMsgs));this.client.addListener("MSG_NOTIFY",this.bind(this.notfiy));this.client.addListener("STATUS_UPDATE",this.bind(this.refreshStatus));this.client.addListener("RELOAD",this.bind(this.reloadPage));this.client.addListener("CLICK_FRIEND",
this.bind(this.clickFriend));this.client.addListener("CLICK_TAB",this.bind(this.clickTab));this.client.addListener("CLICK_TAB_CLOSE",this.bind(this.clickTabClose));this.client.addListener("CLICK_LEFT",this.bind(this.clickLeft));this.client.addListener("CLICK_RIGHT",this.bind(this.clickRight));(activeTab=b.jStore.store(this.client.storeKey+"activeTab"))&&"*"!=activeTab[0]&&this.activateTab.call(b("#imjs-tab-"+activeTab[0]))};EbaumIM.bar.prototype.initBar=function(){EbaumIM.DEBUG&&console.log("[EbaumIM] Theme Ready");
EbaumIM.DEBUG&&console.log("[EbaumIM] Initializing Bar...");var c=this,d=this.client.getStatus();if(d&&"offline"==d[0])this.initBarOffline();else{b("#imjs-friends").removeClass("imjs-not-connected");b("#imjs-friends").attr("class","imjs-"+c.client.status[0]);b("#imjs-friends .imjs-active-user .status").html(c.client.status[0]);b("#imjs-friends-panel .imjs-active-user .username").html(this.client.username);var f=b("#imjs-friends-panel .imjs-active-user .avatarDropDown"),d='<img src="http://cdn.ebaumsworld.com'+
this.client.avatar+'" />';f.html(f.html().replace("{avatar}",d));f=b("#imjs-tab-bar");f.html(f.html().replace("{avatar}",d));b(".imjs-chatbox").live("click",function(b){c.dropDownHitTest(b);b.preventDefault();return!1});b(".imjs-chatbox .imjs-msglog a").live("click",function(b){b.stopPropagation();return!0});b(".imjs-chatbox .imjs-minimize").live("click",function(){b(this).parents(".imjs-chatbox").data("tab").click()});b(".imjs-chatbox .imjs-input").live("keydown",function(d){var f=b(this);13!=d.keyCode||
b.browser.msie&&8>b.browser.version||c.client.send(f.parents(".imjs-chatbox").data("username"),f.val());d.stopPropagation()}).live("keyup",function(d){if(13==d.keyCode){if(b.browser.msie&&8>b.browser.version){var f=b(this);c.client.send(f.parents(".imjs-chatbox").data("username"),f.val())}f=b(this);f.val("");f.height(f.data("height"))}d.stopPropagation()}).live("keypress",function(c){var d=b(this);b.browser.msie&&b.browser.opera||d.height(0);(this.scrollHeight>d.height()||this.scrollHeight<d.height())&&
d.height(this.scrollHeight);c.stopPropagation()});b(".imjs-msglog").live("click",function(){b(this).parents(".imjs-chatbox").find(".imjs-input").focus()});b(".imjs-friend").live("click",function(){setTimeout(function(){c.client._lc.send("CLICK_FRIEND",this.id)},500);c.clickFriend({target:this.id})});b(".imjs-user-info .avatarDropDown").live("click",function(c){b(".imjs-user-info .avatarDropDown").not(this).find("ul").hide();b(this).find("ul").toggle();c.preventDefault();return!1});b(".imjs-user-info .avatarDropDown .activeUserOptions li").live("click",
function(d){b(".imjs-user-info .avatarDropDown").find("ul").hide();var f=b(this).attr("class"),g=EbaumIM.util.statuses;b(".avatarDropDown .options").hide();if(void 0!=g[f])return c.client.fire({type:"STATUS_UPDATE",target:f}),c.fire({type:"STATUS_UPDATE",target:f}),setTimeout(function(){c.client._lc.send("STATUS_UPDATE",f)},500),d.preventDefault(),!1});b(".imjs-user-info .avatarDropDown .buddyUserOptions li").live("click",function(d){b(".imjs-user-info .avatarDropDown .buddyUserOptions").hide();switch(b(this).attr("class")){case "block":var f=
b(this).attr("id"),f=f.split("-");c.fire({type:"BLOCK",target:f[1]});break;case "unblock":f=b(this).attr("id"),f=f.split("-"),c.fire({type:"UNBLOCK",target:f[1]})}d.preventDefault();return!1});b("#imjs-group-online").length||(d=b(".imjs-friend-group.imjs-default").clone().removeClass("imjs-default").attr("id","imjs-group-online").data("group","eBaum's World").appendTo("#imjs-friends-list"),d=d.find(".imjs-friend-group-header"),d.html(d.html().replace("{group}","Online")),d=b(".imjs-friend-group.imjs-default").clone().removeClass("imjs-default").attr("id",
"imjs-group-offline").data("group","eBaum's World").appendTo("#imjs-friends-list"),d=d.find(".imjs-friend-group-header"),d.html(d.html().replace("{group}","Offline")));b(document).click(function(d){c.dropDownHitTest(d);"imjs-friends"==d.target.id||b(d.target).parents("#imjs-friends").length||"active"==b("#imjs-friends").data("state")&&c.activateTab.call(b("#imjs-friends"))});b("#imjs-friends").data("state","minimized").click(function(d){b(this).hasClass("imjs-not-connected")||"imjs-friends-panel"==
d.target.id||b(d.target).parents("#imjs-friends-panel").length?b(this).hasClass("imjs-not-connected")&&(c.fire({type:"STATUS_UPDATE",target:"available"}),c.client._lc.send("RELOAD"),setTimeout(function(){location.reload()},500)):c.activateTab.call(this)}).mouseenter(function(){if(b(this).hasClass("imjs-not-connected")){b(".imjs-tooltip").css("display","block");b(".imjs-tooltip p").html(EbaumIM.util.i18n.notConnectedTip);var c=b(this).offset().left-b(".imjs-tooltip").outerWidth()+b(this).outerWidth()/
2,d=b(this).offset().top-b(".imjs-tooltip").outerHeight(!0);b(".imjs-tooltip").css({left:c,top:d})}}).mouseleave(function(){b(this).hasClass("imjs-not-connected")&&b(".imjs-tooltip").css("display","")});b("#imjs-friends-panel").data("tab",b("#imjs-friends")).css("display","none");b(".imjs-friend-group-header").live("click",function(){b(this).siblings("ul").toggle();b(this).siblings("ul").is(":visible")?b(this).find("span").removeClass("collapsed"):b(this).find("span").addClass("collapsed")});b("#imjs-search-friends").live("click",
function(){"Search Buddy List..."==b(this).val()&&b(this).val("");return!1});b("#imjs-search-friends").live("blur",function(){""==b(this).val()&&b(this).val("Search Buddy List...");return!1});b("#imjs-search-friends").live("keyup",function(){var c=b(this).val();b(".imjs-friend").each(function(){var d=0==c.length||b(this).is(":containsi("+c+")");b(this).toggle(d)});b(".imjs-default").hide();return!1});b(".imjs-tab").live("click",function(d){(d=b(this).find(".imjs-chatbox")||!1)&&(username=d.data("username"))&&
b.jStore.store(c.client.storeKey+"activeTab",[username]);c.clickTab({target:this.id});var f=this.id;setTimeout(function(){c.client._lc.send("CLICK_TAB",f)},500)});b(".imjs-tab .imjs-close").live("click",function(d){d.stopPropagation();var f=b(this).parents(".imjs-tab");c.clickTabClose({target:"li#"+f[0].id+".imjs-tab"});setTimeout(function(){c.client._lc.send("CLICK_TAB_CLOSE","li#"+f[0].id+".imjs-tab")},500);return!1});b(".imjs-scroll").css("display","none");b("#imjs-scroll-left").live("click",function(){setTimeout(function(){c.client._lc.send("CLICK_LEFT")},
500);c.clickLeft();return!1});b("#imjs-scroll-right").live("click",function(){c.clickRight();setTimeout(function(){c.client._lc.send("CLICK_RIGHT")},500);return!1});b(window).resize(function(){c._scrollers()});b("ul#imjs-bar").css({display:"block"});this.fire("BAR_READY")}};EbaumIM.bar.prototype.initBarOffline=function(){b("#imjs-friends").data("state","minimized").click(function(c){b(this).hasClass("imjs-not-connected")&&(self.fire({type:"STATUS_UPDATE",target:"available"}),self.client._lc.send("RELOAD"),
setTimeout(function(){location.reload()},500))}).mouseenter(function(){if(b(this).hasClass("imjs-not-connected")){b(".imjs-tooltip").css("display","block");b(".imjs-tooltip p").html(EbaumIM.util.i18n.notConnectedTip);var c=b(this).offset().left-b(".imjs-tooltip").outerWidth()+b(this).outerWidth()/2,d=b(this).offset().top-b(".imjs-tooltip").outerHeight(!0);b(".imjs-tooltip").css({left:c,top:d})}}).mouseleave(function(){b(this).hasClass("imjs-not-connected")&&b(".imjs-tooltip").css("display","")}).addClass("imjs-not-connected");
b(".imjs-tab").hide();b("#imjs-friends-panel").hide();b(".imjs-scroll").hide();b(".imjs-scroll").css("display","none");b("ul#imjs-bar").css({display:"block"});this.fire("BAR_READY")};EbaumIM.bar.prototype.refreshFriends=function(c){if(!this.client.status||"offline"!=this.client.status[0]){EbaumIM.DEBUG&&console.log("[EbaumIM] Refreshing Friends...");var d=this;c=this.client.getFriends();b.each(c,function(b,c){d.addFriend.apply(d,[b,c.status,c.group,c.img,c.blocked])});this._updateFriendCount()}};
EbaumIM.bar.prototype.refreshMsgs=function(c){if(!this.client.status||"offline"!=this.client.status[0]){EbaumIM.DEBUG&&console.log("[EbaumIM] Refreshing Messages...");var d=this,f=this.client.getMsgs();f&&b.each(f,function(f,h){var g=void 0==c?d.restoreChatbox(f):d._createChatbox(f);g.find(".imjs-msglog").empty();b.each(h,function(b,c){c.length&&d.addMessage(c[0],g,c[1],decodeURIComponent(c[2]),c[3])})})}};EbaumIM.bar.prototype.refreshStatus=function(c){c=c.target;b("#imjs-friends").attr("class",
"imjs-"+c);b("#imjs-friends .imjs-active-user .status").html(c);0==EbaumIM.util.statuses[c]?(b("#imjs-friends").addClass("imjs-not-connected"),b(".imjs-tab").hide(),b("#imjs-friends-panel").hide(),b(".imjs-scroll").hide(),EbaumIM.cookies.erase("resumed")):b("#imjs-friends").hasClass("imjs-not-connected")&&(b("#imjs-friends").removeClass("imjs-not-connected"),b(".imjs-tab").show(),b("#imjs-friends-panel").show(),b(".imjs-scroll").show())};EbaumIM.bar.prototype.reloadPage=function(b){location.reload()};
EbaumIM.bar.prototype.notfiy=function(c){c=b("#imjs-tab-"+c.target);"minimized"==c.data("state")&&this.notification(c)};EbaumIM.bar.prototype.clickFriend=function(c){EbaumIM.DEBUG&&console.log("[EbaumIM] Friend Clicked");id=c.target;c=this._createChatbox(b("#"+id).data("friend"));"active"!=c.data("tab").data("state")&&this.activateTab.call(c.data("tab"));c.find(".imjs-input").focus()};EbaumIM.bar.prototype.clickTab=function(c){this.testCount++;c=b("#"+c.target);this.activateTab.call(c)};EbaumIM.bar.prototype.clickTabClose=
function(c){EbaumIM.DEBUG&&console.log("[EbaumIM] Tab Close Clicked");var d=b(c.target),f=d.data("state");d.css("display","none").data("state","closed");void 0==c.type&&("active"==f&&b.jStore.store(EbaumIM.client.storeKey+"activeTab",["*"]),c=this.client.getMsgs())&&(delete c[d.find(".imjs-chatbox").data("username")],b.jStore.store(this.client.storeKey+"chat",c));d.find(".imjs-msglog").empty();this._scrollers()};EbaumIM.bar.prototype.clickLeft=function(c){b("#imjs-bar li.imjs-tab:visible").slice(-1).next("#imjs-bar li.imjs-tab:hidden").filter(function(){return"closed"!=
b("#imjs-scroll-left").data("state")}).not(".imjs-default").slice(-1).css("display","").length&&(b("#imjs-bar li.imjs-tab:visible").eq(0).css("display","none"),b("#imjs-scroll-left .count").html(parseInt(b("#imjs-scroll-left .count").html())-1),b("#imjs-scroll-right .count").html(parseInt(b("#imjs-scroll-right .count").html())+1))};EbaumIM.bar.prototype.clickRight=function(c){b("#imjs-bar li.imjs-tab:visible").eq(0).prev("#imjs-bar li.imjs-tab:hidden").filter(function(){return"closed"!=b("#imjs-scroll-right").data("state")}).not(".imjs-default").slice(-1).css("display",
"").length&&(b("#imjs-bar li.imjs-tab:visible").slice(-1).css("display","none"),b("#imjs-scroll-right .count").html(parseInt(b("#imjs-scroll-right .count").html())-1),b("#imjs-scroll-left .count").html(parseInt(b("#imjs-scroll-left .count").html())+1))};EbaumIM.bar.prototype.addFriend=function(c,d,f,g,h){f=EbaumIM.util.statuses;var k="available";b.each(f,function(b,c){if(d[0]==c)return k=b,!1});group_item=0==d[0]?b("#imjs-group-offline"):b("#imjs-group-online");f="imjs-friend-"+c;b("#"+f).length?
(d=d[0],k="available",f=EbaumIM.util.statuses,b.each(f,function(b,c){if(d==c)return k=b,!1}),1==h&&(b("#imjs-friend-"+c+" .avatarDropDown .block").removeClass("block").addClass("unblock").html("Unblock"),b("#imjs-"+c+" .avatarDropDown .block").removeClass("block").addClass("unblock").html("Unblock"),d=0,k="offline"),0==h&&(b("#imjs-friend-"+c+" .avatarDropDown .unblock").removeClass("unblock").addClass("block").html("Block"),b("#imjs-"+c+" .avatarDropDown .unblock").removeClass("unblock").addClass("block").html("Block")),
this.chats[c]&&(h=this.chats[c].data("tab"),f="imjs-tab",g=b("#imjs-"+c+" .status").html(),"active"==h.data("state")&&(f+=" imjs-selected"),h.attr("class",f+(" imjs-"+k)),h=b(".imjs-tab.imjs-default .imjs-chatbox .imjs-msglog .imjs-date").clone(),f=h.find(".imjs-msg-time"),f.length&&f.html(EbaumIM.util.dateFormat(f.html())),h.find(".imjs-date-date").html(EbaumIM.util.i18n["chat"+k[0].toUpperCase()+k.slice(1)].replace(/%s/g,c)),f=this.chats[c].find(".imjs-msglog"),g!=k&&h.appendTo(f),f[0].scrollTop=
f[0].scrollHeight),g="imjs-friend-"+c,b("#"+g).attr("class","imjs-friend imjs-user-info imjs-"+k),0==d?b("#"+g).appendTo("#imjs-group-offline ul.imjs-friends-ul"):b("#"+g).appendTo("#imjs-group-online ul.imjs-friends-ul"),b("#"+g+" .status").html(k),b("#imjs-"+c+" .status").html(k)):(f=group_item.find("ul li.imjs-default").clone().removeClass("imjs-default").addClass("imjs-"+k).attr("id",f).data("friend",c).appendTo(group_item.find("ul.imjs-friends-ul")),f.html(f.html().replace(/{username}/g,c)),
f.html(f.html().replace("{avatar}",'<img src="http://cdn.ebaumsworld.com'+g+'" />')),f.html(f.html().replace("{status}",k)),1==h&&b("#block-"+c).removeClass("block").addClass("unblock").html("Unblock"));this._updateFriendCount()};EbaumIM.bar.prototype._updateFriendCount=function(){var c=0,d;for(d in this.client.friends)0!=this.client.friends[d].status[0]&&c++;b("#imjs-friends .imjs-tab-text span span").html(c)};EbaumIM.bar.prototype.addMessage=function(c,d,f,g,h){var k=d.find(".imjs-msglog > *:last-child");
if(k.hasClass("imjs-msg-"+c)){var k=k.hasClass("imjs-msg-"+c+"-container")?k:k.find(".imjs-msg-"+c+"-container"),l=b(".imjs-tab.imjs-default .imjs-chatbox .imjs-msglog .imjs-msg-"+c+"-msg").clone().appendTo(k);l.html(l.html().replace("{username}",f))}else k.length&&k.hasClass("imjs-msg-"+c)||(k=b(".imjs-tab.imjs-default .imjs-chatbox .imjs-msg-"+c).clone().appendTo(d.find(".imjs-msglog")),k.html(k.html().replace("{username}",f)),f=k.find(".imjs-msg-time"),h||(h=new Date),"string"!=typeof h&&(h=AjaxIM.dateFormat(h,
f.html())),f.html(h),l=k.find(".imjs-msg-"+c+"-msg"));g=g.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(^|.*)\*([^*]+)\*(.*|$)/,"$1<strong>$2</strong>$3");g=g.replace(RegExp("([A-Za-z][A-Za-z0-9+.-]{1,120}:[A-Za-z0-9/](([A-Za-z0-9$_.+!*,;/?:@&~=-])|%[A-Fa-f0-9]{2}){1,333}(#([a-zA-Z0-9][a-zA-Z0-9$_.+!*,;/?:@&~=%-]{0,1000}))?)","g"),'<a href="$1" target="_blank">$1</a>');l.html(l.html().replace("{message}",g));f=l.find(".imjs-msg-time");h||(h=new Date);"string"!=typeof h&&(h=AjaxIM.dateFormat(h,
f.html()));f.html(h);c=d.find(".imjs-msglog");c[0].scrollTop=c[0].scrollHeight;d.data("tab").data("state");return h};EbaumIM.bar.prototype.activateTab=function(){var c=b(this).find(".imjs-chatbox")||!1;console.log("state: "+b(this).data("state"));if("active"!=b(this).data("state")){"imjs-friends"!=b(this).attr("id")&&b("#imjs-bar > li").not(b(this)).not("#imjs-friends").removeClass("imjs-selected").each(function(){if("closed"!=b(this).data("state")){b(this).data("state","minimized");var c=b(this).find(".imjs-chatbox");
c.length&&c.css("display","none")}});c&&"none"==c.css("display")&&c.css("display","");var d=b(this).addClass("imjs-selected").data("state","active");d.find(".imjs-notification").css("display","none").data("count",0);c&&(username=c.data("username"))&&b.jStore.store(EbaumIM.client.storeKey+"activeTab",[username])}else d=b(this).removeClass("imjs-selected").data("state","minimized"),c&&"none"!=c.css("display")&&c.css("display","none"),"imjs-friends"!=b(this).attr("id")&&b.jStore.store(EbaumIM.client.storeKey+
"activeTab",["*"]);if(c){(input=c.find(".imjs-input")).data("height")||input.data("height",input.height());try{var f=c.find(".imjs-msglog");f[0].scrollTop=f[0].scrollHeight}catch(g){}try{c.find(".imjs-input").focus()}catch(g){}}};EbaumIM.bar.prototype.addTab=function(c,d,f){d=b(".imjs-tab.imjs-default").clone().insertAfter("#imjs-scroll-right");d.removeClass("imjs-default").attr("id","imjs-tab-"+c).html(d.html().replace("{label}",c)).data("state","minimized");c=d.find(".imjs-notification");c.css("display",
"none").data("count",0).data("default-text",c.html()).html(c.html().replace("{count}","0"));!1===f&&d.find(".imjs-close").eq(0).remove();return d};EbaumIM.bar.prototype.closeTab=function(){var c=EbaumIM.client.bar,d=b(this).parents(".imjs-tab");d.css("display","none").data("state","closed");var f=this.client.getMsgs();delete f[d.find(".imjs-chatbox").data("username")];b.jStore.store(EbaumIM.client.storeKey+"chat",f);b(c).trigger("tabToggled",["closed",d]);c._scrollers();return!1};EbaumIM.bar.prototype.notification=
function(c){var d=c.find(".imjs-notification"),f=d.data("count")+1,g=f;3<f?(b(d).addClass("highNumber"),g=f+"+"):b(d).removeClass("highNumber");this.intervalMap||(this.intervalMap={});var h=b(d).siblings(".tabUsername").html();this.intervalMap[h]&&clearInterval(this.intervalMap[h]);var k=0,l=setInterval(function(){b(c).hasClass("imjs-selected")?(b(c).removeClass("blink"),void 0!=self.intervalMap&&self.intervalMap[h]&&(self.intervalMap[h]=void 0),clearInterval(l)):(b(c).hasClass("blink")?b(c).removeClass("blink"):
b(c).addClass("blink"),k++,8==k&&void 0!=self.intervalMap&&self.intervalMap[h]&&(self.intervalMap=void 0),8==k&&clearInterval(l))},1E3);this.intervalMap[h]=l;d.data("count",f).html(d.data("default-text").replace("{count}",g)).css("display","")};EbaumIM.bar.prototype._createChatbox=function(c,d){var f="imjs-"+c,g=EbaumIM.util.statuses;if((k=b("#"+f)).size())"closed"==k.data("tab").data("state")&&(k.find(".imjs-msglog > *").addClass("imjs-msg-old"),h=k.data("tab"),k.css("display","none"),"none"==h.css("display")&&
h.css("display","").removeClass("imjs-selected"),this._scrollers(),0==b("#imjs-bar .imjs-selected").length?this.activateTab.call(h):this.notification(h));else{var h=this.addTab(c,"#"+f),k=h.find(".imjs-chatbox");k.attr("id",f);k.data("tab",h);k.find(".imjs-msglog").empty();f=k.find(".imjs-user-info");f.html(f.html().replace(/{username}/g,c));f.html(f.html().replace("{avatar}",'<img src="http://cdn.ebaumsworld.com'+this.client.friends[c].img+'" />'));this.chats[c]=k;k.data("username",c);this._scrollers();
if(c in this.client.friends){var l=this.client.friends[c].status,m="available";b.each(g,function(b,c){if(l[0]==c)return m=b,!1});h.addClass("imjs-"+m);f.html(f.html().replace("{status}",m));1==this.client.friends[c].blocked&&b("#imjs-"+c+" .block").removeClass("block").addClass("unblock").html("Unblock")}k.css("display","none");0==b("#imjs-bar .imjs-selected").length?this.activateTab.call(h):this.notification(h)}(g=this.client.getMsgs())||(g={});g[c]||(g[c]=[],g[c].push([]),b.jStore.store(this.client.storeKey+
"chat",g));return k};EbaumIM.bar.prototype.restoreChatbox=function(c,d){var f="imjs-"+c,g=EbaumIM.util.statuses,h=b.jStore.store(this.client.storeKey+"activeTab"),k=this.addTab(c,"#"+f),l=k.find(".imjs-chatbox");l.attr("id",f);l.data("tab",k);l.find(".imjs-msglog").empty();f=l.find(".imjs-user-info");f.html(f.html().replace(/{username}/g,c));f.html(f.html().replace("{avatar}",'<img src="http://cdn.ebaumsworld.com'+this.client.friends[c].img+'" />'));this.chats[c]=l;l.data("username",c);this._scrollers();
if(c in this.client.friends){var m=this.client.friends[c].status,n="available";b.each(g,function(b,c){if(m[0]==c)return n=b,!1});k.addClass("imjs-"+n);f.html(f.html().replace("{status}",n));1==this.client.friends[c].blocked&&b("#imjs-"+c+" .block").removeClass("block").addClass("unblock").html("Unblock")}h&&"*"==h[0]&&l.css("display","none");return l};EbaumIM.bar.prototype._scrollers=function(){var c=this,d=!1;b(".imjs-tab").filter(function(){return"closed"!=b(this).data("state")}).css("display",
"");b.each(this.chats,function(f,g){var h=g.data("tab");if("closed"==h.data("state"))return!0;h.position().top>b("#imjs-bar").height()&&c.client.config.checkResume?(b(".imjs-scroll").css("display",""),h.css("display","none"),d=!0):h.css("display","")});d||b(".imjs-scroll").css("display","none");"none"!=b("#imjs-scroll-left").css("display")&&b("#imjs-scroll-left").position().top>b("#imjs-bar").height()&&b("#imjs-bar li.imjs-tab:visible").slice(-1).css("display","none");var f=b("#imjs-bar li.imjs-tab:visible").slice(-1).nextAll("#imjs-bar li.imjs-tab:hidden").not(".imjs-default").filter(function(){return"closed"!=
b(this).data("state")}).length,g=b("#imjs-bar li.imjs-tab:visible").eq(0).prevAll("#imjs-bar li.imjs-tab:hidden").not(".imjs-default").filter(function(){return"closed"!=b(this).data("state")}).length;b("#imjs-scroll-left .count").html(f);b("#imjs-scroll-right .count").html(g)};EbaumIM.bar.prototype.dropDownHitTest=function(c){b(c.target).parents(".avatarDropDown").length||b(".avatarDropDown .options").hide()}})(jQuery);$.expr[":"].containsi=function(b,c,d){return 0<=jQuery(b).text().toUpperCase().indexOf(d[3].toUpperCase())};EbaumIM=window.EbaumIM||{};EbaumIM.client=window.EbaumIM.client||{};EbaumIM.init=function(){this.client=new EbaumIM.client};EbaumIM.DEBUG=!1;
(function(b){EbaumIM.client=function(b){EbaumIM.DEBUG&&console.log("[EbaumIM] Initializing Client...");this.config={pollServer:"/im",cookieName:"ebwim",theme:"/im",checkResume:!0};this.actions={poll:["jsonp",this.config.pollServer+"/poll?callback=?"],send:["ajax",this.config.pollServer+"/send"],status:["ajax",this.config.pollServer+"/status"],resume:["ajax",this.config.pollServer+"/resume"],block:["ajax",this.config.pollServer+"/block"]};this.avatar="";this.status={};this.bar={};this.friends={};this.chats=
{};this._poll=!0;this._pollTimeout=!1;this._lc={};this.init()};EbaumIM.client.prototype=new EmuseEvent;EbaumIM.client.constructor=EbaumIM.client;EbaumIM.client.prototype.init=function(){this.bar=new EbaumIM.bar(this);this._lc=new LocalConnection({name:"EbaumIM-LC"});this._lc.addCallback("NO_POLL",this.bind(this.noPoll));this._lc.addCallback("FRIEND_UPDATE",this.bind(this.tabEventRelay));this._lc.addCallback("MSG_UPDATE",this.bind(this.tabEventRelay));this._lc.addCallback("MSG_NOTIFY",this.bind(this.tabEventRelay));
this._lc.addCallback("STATUS_UPDATE",this.bind(this.tabEventRelay));this._lc.addCallback("RELOAD",this.bind(this.tabEventRelay));this._lc.addCallback("CLICK_FRIEND",this.bind(this.tabEventRelay));this._lc.addCallback("CLICK_TAB",this.bind(this.tabEventRelay));this._lc.addCallback("CLICK_TAB_CLOSE",this.bind(this.tabEventRelay));this._lc.addCallback("CLICK_LEFT",this.bind(this.tabEventRelay));this._lc.addCallback("CLICK_RIGHT",this.bind(this.tabEventRelay));this._lc.listen();this.addListener("STORAGE_READY",
this.bind(this.resume));this.addListener("RESUMED",this.bind(this.initPolling));this.addListener("FRIEND_UPDATE",this.bind(this.getFriends));this.addListener("MSG_UPDATE",this.bind(this.getMsgs));this.addListener("UPDATE_STATUS",this.bind(this.getStatus));this.bar.addListener("STATUS_UPDATE",this.bind(this.setStatus));this.bar.addListener("BLOCK",this.bind(this.block));this.bar.addListener("UNBLOCK",this.bind(this.block));EbaumIM.DEBUG&&console.log("[EbaumIM] Initializing Storage...");var c=this;
b.each(["local"],function(){if(b.jStore.Availability[this]())return!1});b.extend(b.jStore.defaults,{project:"EbaumIM",engine:"local"});b.jStore.ready(function(b){b.ready(function(){c.fire("STORAGE_READY")})});b.jStore.load()};EbaumIM.client.prototype.tabEventRelay=function(b){var c=b.event;b=b.args;EbaumIM.DEBUG&&console.log("[EbaumIM] Firing Tab Event: "+c+"...");b.length?this.relay(c,b[0]):this.fire(c)};EbaumIM.client.prototype.resume=function(){EbaumIM.DEBUG&&console.log("[EbaumIM] Resuming state...");
var c=this,d=EbaumIM.cookies.get(this.config.cookieName);if(d){var f=EbaumIM.cookies.get("resumed");f||(f=!1);this.username=d.user;this.storeKey="EbaumIM-"+this.username+"-";this.config.checkResume&&!f?(EbaumIM.DEBUG&&console.log("[EbaumIM] Active Resume"),EbaumIM.util.request(this.actions.resume,{},function(d){if("connected"==d.r){EbaumIM.DEBUG&&console.log("[EbaumIM] Connected");d.f&&c.storeFriends(d.f);d.i&&(c.avatar=d.i,b.jStore.store(c.storeKey+"avatar",c.avatar));if(d.s){switch(d.s[0]){case "0":c.status=
["offline",""];break;case "1":c.status=["available",""];break;case "2":c.status=["away",""];break;case "3":c.status=["invisible",""]}b.jStore.store(c.storeKey+"status",c.status)}c.fire("RESUMED")}else EbaumIM.DEBUG&&console.log("[EbaumIM] Resume Failed")})):(EbaumIM.DEBUG&&console.log("[EbaumIM] Passive Resume"),this.fire("RESUMED"));this.friends=b.jStore.store(this.storeKey+"friends");this.status=b.jStore.store(this.storeKey+"status");this.avatar=b.jStore.store(this.storeKey+"avatar");f||EbaumIM.cookies.set("resumed",
{resumed:1},300)}else EbaumIM.DEBUG&&console.log("[EbaumIM] Resume Failed, no session")};EbaumIM.client.prototype.initPolling=function(){if(!this.status||"offline"!=this.status[0]){EbaumIM.DEBUG&&console.log("[EbaumIM] Initializing Polling...");var c=this;b(document).ready(setTimeout(function(){c.poll()},4E3))}};EbaumIM.client.prototype.noPoll=function(){var b=this;this._poll=!1;this._pollTimeout&&clearTimeout(this._pollTimeout);this._lc.gc(!0);this._pollTimeout=setTimeout(function(){b._poll=!0;b.poll()},
3E4)};EbaumIM.client.prototype.poll=function(){var b=this;0==this._poll?EbaumIM.DEBUG&&console.log("[EbaumIM] Polling Suspended (another tab is polling)"):(this._lc.send("NO_POLL"),EbaumIM.DEBUG&&console.log("[EbaumIM] Polling..."),this.pollRequest=EbaumIM.util.request(this.actions.poll,{},function(c){b._lc.gc();c.e?EbaumIM.DEBUG&&console.log("[EbaumIM] Poll Failed"):(EbaumIM.DEBUG&&console.log("[EbaumIM] Poll Success"),c.f&&b.storeFriends(c.f),c.m.length&&b.storeMsgs(c.m),clearTimeout(b._pollTimeout),
setTimeout(function(){b.poll()},0))},function(b){EbaumIM.DEBUG&&console.log("[EbaumIM] Poll Failed")}),this._pollTimeout=setTimeout(function(){b.pollRequest&&(b.pollRequest.abort(),b.poll())},5E4))};EbaumIM.client.prototype.send=function(b,d){EbaumIM.DEBUG&&console.log("[EbaumIM] Sending Message");d&&(this.storeMsgs([{s:b,m:d}],this.username),this.sendQueue||(this.sendQueue=[]),this.sendQueue.unshift([b,d]),this.sendQueueProcessing||(this.sendQueueProcessing=1,this._send()))};EbaumIM.client.prototype._send=
function(){var b=this;if(this.sendQueue.length){var d=this.sendQueue.pop();EbaumIM.util.request(this.actions.send,{to:d[0],message:d[1]},function(c){b.sendQueue.length&&b._send();b.sendQueue.length||(b.sendQueueProcessing=0)},function(c){b.sendQueue=[];b.sendQueueProcessing=0})}};EbaumIM.client.prototype.block=function(c){var d=this,f=c.target;a="BLOCK"==c.type?1:0;EbaumIM.util.request(this.actions.block,{block:f,act:a},function(c){switch(c.r){case "ok":c=b.jStore.store(d.storeKey+"friends"),c[f]&&
(c[f].blocked=a,b.jStore.store(d.storeKey+"friends",c),d.friends=c,d.fire("FRIEND_UPDATE"),setTimeout(function(){d._lc.send("FRIEND_UPDATE")},500))}},function(b){})};EbaumIM.client.prototype.setStatus=function(c){EbaumIM.DEBUG&&console.log("[EbaumIM] Updating Client Status");var d=c.target,f=this;c=EbaumIM.util.statuses;if(c[d]||0==c[d])EbaumIM.util.request(this.actions.status,{status:c[d],message:""},function(c){switch(c.r){case "ok":b.jStore.store(f.storeKey+"status",[d,""])}},function(b){}),this.fire("UPDATE_STATUS"),
setTimeout(function(){f._lc.send("UPDATE_STATUS")},500)};EbaumIM.client.prototype.getStatus=function(){return this.status=b.jStore.store(this.storeKey+"status")};EbaumIM.client.prototype.storeFriends=function(c){EbaumIM.DEBUG&&console.log("[EbaumIM] Storing "+c.length+" Friends");var d=this,f={};b.each(c,function(b,c){f[c.u]={status:[c.s,""],group:c.g,img:c.i,blocked:c.b}});b.jStore.store(this.storeKey+"friends",f);this.fire("FRIEND_UPDATE");setTimeout(function(){d._lc.send("FRIEND_UPDATE")},500)};
EbaumIM.client.prototype.getFriends=function(){return this.friends=b.jStore.store(this.storeKey+"friends")};EbaumIM.client.prototype.storeMsgs=function(c,d){EbaumIM.DEBUG&&console.log("[EbaumIM] Storing "+c.length+" Messages");var f=this,g=b.jStore.store(this.storeKey+"chat");g||(g={});var h={};b.each(c,function(b,c){var f=c.s,k=c.m,k=k.replace(/</g,"&lt;").replace(/>/g,"&gt;");f in g?300<g[f].length&&g[f].shift():g[f]=[];var l=EbaumIM.util.dateFormat(new Date,"hh:MM TT"),q=Date.now();d?g[f].push(["a",
d,encodeURIComponent(k),l,0,q]):(g[f].push(["b",f,encodeURIComponent(k),l,0,q]),h[f]=!0)});b.jStore.store(this.storeKey+"chat",g);b.each(h,function(b,c){f._lc.send("MSG_NOTIFY",b);f.fire({type:"MSG_NOTIFY",target:b})});this.fire("MSG_UPDATE");setTimeout(function(){f._lc.send("MSG_UPDATE")},500)};EbaumIM.client.prototype.getMsgs=function(){return this.chats=b.jStore.store(this.storeKey+"chat")}})(jQuery);function LocalConnection(b){this.name="localconnection";this.id=(new Date).getTime();this.debug=this.useLocalStorage=!1;this._actions=[];this._events={};this._threshold=3E3;this.init=function(b){try{localStorage.setItem(this.id,this.id),localStorage.removeItem(this.id),this.useLocalStorage=!0}catch(f){this.useLocalStorage=!1}for(var c in b)this[c]=b[c];this.clear()};this.listen=function(){this.useLocalStorage?window.addEventListener?window.addEventListener("storage",this.bind(this,this._check),!1):
window.attachEvent("onstorage",this.bind(this,this._check)):setInterval(this.bind(this,this._check),100)};this.send=function(b){var c=Array.prototype.slice.call(arguments,1);return this._write(b,c)};this.addCallback=function(b,d,f){void 0==f&&(f=this);void 0==this._actions[b]&&(this._actions[b]=[]);this._actions[b].push({f:d,s:f})};this.removeCallback=function(b){for(var c in this._actions)if(c==b){delete this._actions[c];break}};this.gc=function(b){if(!b){b=this._getEvents();for(var c in b)Date.now()-
b[c].time>=this._threshold&&b.splice(c,1);if(this.useLocalStorage)if(this._storageLock())localStorage.setItem(this.name,JSON.stringify(b)),this._storageUnlock();else{var f=this;setTimeout(function(){f.gc()},100)}else document.cookie=this.name+"="+JSON.stringify(b)+"; path=/"}for(var g in this._events)Date.now()-parseInt(g)>=10*this._threshold&&delete this._events[g]};this._check=function(){var b=this._read();if(0<b.length)for(var d in b)this._receive(b[d].event,b[d].args)};this._receive=function(b,
d){if(void 0!=this._actions[b])for(var c in this._actions[b])if(this._actions[b].hasOwnProperty(c)){this.log('Triggering callback "'+b+'"',this._actions[b]);var g=this._actions[b][c];g.f.call(g.s,{event:b,args:d})}};this._write=function(b,d){var c=this._getEvents(),g={id:this.id,event:b,args:d,time:Date.now()};c.push(g);this.log("Sending event",g);if(this.useLocalStorage)if(this._storageLock())localStorage.setItem(this.name,JSON.stringify(c)),this._storageUnlock();else{var h=this;setTimeout(function(){h._write(b,
d)},100)}else document.cookie=this.name+"="+JSON.stringify(c)+"; path=/";return!0};this._read=function(){var b=this._getEvents();if(""==b)return!1;var d=[],f;for(f in b)b[f].id!=this.id&&Date.now()-parseInt(b[f].time)<this._threshold&&!this._events[b[f].time]&&d.push({event:b[f].event,args:b[f].args}),this._events[b[f].time]=b[f].event;d.length||(d=!1);return d};this._getEvents=function(){return this.useLocalStorage?this._getLocalStorage():this._getCookie()};this._getLocalStorage=function(){var b;
b=localStorage.getItem(this.name);return null==b?[]:JSON.parse(b)};this._getCookie=function(){for(var b=document.cookie.split(";"),d,f=0;f<b.length;f++){for(var g=b[f];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(this.name+"=")){d=g.substring(this.name.length+1,g.length);break}}return JSON.parse(d||"[]")};this._storageLock=function(){return this.useLocalStorage&&0==this._storageIsLocked()?(localStorage.setItem(this.name+"-lk",1),!0):!1};this._storageUnlock=function(){this.useLocalStorage&&
localStorage.removeItem(this.name+"-lk")};this._storageIsLocked=function(){var b=!1;this.useLocalStorage&&localStorage.getItem(this.name+"-lk")&&(b=!0);return b};this.clear=function(){this.useLocalStorage?localStorage.removeItem(this.name):document.cookie=this.name+"=; path=/"};this.bind=function(b,d){return function(){d.apply(b,arguments)}};this.log=function(){this.debug&&console&&console.log(Array.prototype.slice.call(arguments))};this.init(b)};EbaumIM=window.EbaumIM||{};
(function(b){EbaumIM.cookies={set:function(c,d,f){var g="";f&&(g=new Date,g.setTime(g.getTime()+1E3*f),g="; expires="+g.toGMTString());document.cookie=c+"="+b.compactJSON(d)+g+"; path=/"},get:function(c){c+="=";for(var d=document.cookie.split(";"),f=0;f<d.length;f++){for(var g=d[f];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(c))return c=decodeURIComponent(g.substring(c.length,g.length)),b.secureEvalJSON(c)}return null},erase:function(b){EbaumIM.cookies.set(b,"",-1)}};EbaumIM.util=
{request:function(c,d,f,g){g=function(){};d=b[c[0]]({url:c[1],data:d,dataType:"ajax"==c[0]?"json":"jsonp",type:"POST",cache:!1,timeout:6E4,callback:"jsonp"+(new Date).getTime(),success:function(b,c){f(b)},error:function(b,c){g(c)}});"jsonp"==c[0]&&b.browser.mozilla&&b.jsonp({url:"about:",timeout:0});return d},dateFormat:function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,d=RegExp("\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]d{4})?)\b",
"g"),f=/[^-+\dA-Z]/g,g=function(b,c){b=String(b);for(c=c||2;b.length<c;)b="0"+b;return b};return function(c,k,l){var h=EbaumIM.util;1!=arguments.length||"[object String]"!=Object.prototype.toString.call(c)||/\d/.test(c)||(k=c,c=void 0);c=c?new Date(c):new Date;if(isNaN(c))throw SyntaxError("invalid date");k=String(h.dateMasks[k]||k||h.dateMasks["default"]);"UTC:"==k.slice(0,4)&&(k=k.slice(4),l=!0);var n=l?"getUTC":"get",h=c[n+"Date"](),t=c[n+"Day"](),q=c[n+"Month"](),u=c[n+"FullYear"](),p=c[n+"Hours"](),
v=c[n+"Minutes"](),w=c[n+"Seconds"](),n=c[n+"Milliseconds"](),r=l?0:c.getTimezoneOffset(),y={d:h,dd:g(h),ddd:EbaumIM.util.i18n.dayNames[t],dddd:EbaumIM.util.i18n.dayNames[t+7],m:q+1,mm:g(q+1),mmm:EbaumIM.util.i18n.monthNames[q],mmmm:EbaumIM.util.i18n.monthNames[q+12],yy:String(u).slice(2),yyyy:u,h:p%12||12,hh:g(p%12||12),H:p,HH:g(p),M:v,MM:g(v),s:w,ss:g(w),l:g(n,3),L:g(99<n?Math.round(n/10):n),t:12>p?"a":"p",tt:12>p?"am":"pm",T:12>p?"A":"P",TT:12>p?"AM":"PM",Z:l?"UTC":(String(c).match(d)||[""]).pop().replace(f,
""),o:(0<r?"-":"+")+g(100*Math.floor(Math.abs(r)/60)+Math.abs(r)%60,4),S:["th","st","nd","rd"][3<h%10?0:(10!=h%100-h%10)*h%10]};return k.replace(b,function(b){return b in y?y[b]:b.slice(1,b.length-1)})}}(),dateMasks:{"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"},
i18n:{dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" "),chatOffline:"%s signed off.",chatAvailable:"%s became available.",chatAway:"%s went away.",notConnected:"You are currently not connected or the server is not available. Please ensure that you are signed in and try again.",notConnectedTip:"You are currently signed out. Click here to sign in.",
authInvalid:"Invalid username or password.",registerPasswordLength:"Passwords must be more than 4 characters in length.",registerUsernameLength:"Usernames must be more than 2 characters in length and  contain only A-Z, a-z, 0-9, underscores (_) and periods (.).",registerPasswordMatch:"Entered passwords do not match.",registerUsernameTaken:"The chosen username is already in use; please choose another.",registerUnknown:"An unknown error occurred. Please try again."},statuses:{offline:0,available:1,
away:2,invisible:3}}})(jQuery);
