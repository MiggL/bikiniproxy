define(["jquery","domReady","owl.carousel.extended"],function(d,c){var a=false,b="promoCarousel";var e=function(g,f){this.element=g;this.options=f||{};this.$promoContent=null;this.$promoCarousel=null;this.$prevButton=null;this.$nextButton=null;this.owl=null;this.defaults={container:".promo-content-js",carousel:".promo-carousel-js",prevButton:".prev-js",nextButton:".next-js"}};e.prototype={init:function(){if(a&&console){console.log("Initializing promo bar")}var f=this;f.config=d.extend({},f.defaults,f.options);f.setupElements();f.activatePromoCarousel();f.resetPromoCarouselWidth();f.clonePromoBarToDropdowns();return f},setupElements:function(){var f=this;f.$promoContent=d(f.element).find(f.config.container);f.$promoCarousel=f.$promoContent.find(f.config.carousel);f.$prevButton=f.$promoContent.find(f.config.prevButton);f.$nextButton=f.$promoContent.find(f.config.nextButton)},activatePromoCarousel:function(){var f=this;f.owl=f.$promoCarousel.owlCarousel({autoPlay:WCS_CONFIG.get("owlCarousel::autoPlay"),pagination:false,slideSpeed:300,singleItem:true});f.events()},resetPromoCarouselWidth:function(){var f=this,g=f.$promoContent.parents(".page-util-container").width();d(f.config.container).css("width","100%")},clonePromoBarToDropdowns:function(){if(!espotHeaderNavCloneEnabled||d(".espot-clone-js").length>0){return}var g=this,f=d(".espot-header-js").clone(true),h=d(".dropdown-arrow").next(".dropdown:not(.dropdown-list-js)");f.removeAttr("id").addClass("espot-clone espot-clone-js");d("<li/>",{"class":"page-util",html:f}).appendTo(h);g.setupElements(d(".espot-clone-js .promo-content-js"));g.activatePromoCarousel()},events:function(){var f=this;d(window).on("resize",function(){f.resetPromoCarouselWidth()});f.$prevButton.on("click",function(){f.owl.trigger("owl.prev")});f.$nextButton.on("click",function(){f.owl.trigger("owl.next")})}};d.fn.promoCarousel=function(f){if(a&&console){console.log("$.fn.promoCarousel",f)}return this.each(function(){var g=d(this).data(b);if(!g){g=new e(this,f).init();d(this).data(b,g)}})}});