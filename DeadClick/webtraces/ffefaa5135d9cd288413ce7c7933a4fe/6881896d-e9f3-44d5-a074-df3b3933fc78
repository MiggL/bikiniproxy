define(["jquery","domReady","wcs.product-video-plugin","datalayer.youtube"],function(d,a){function c(){var f=b();if(!f.host){console.warn("Could not build video options, aborting");return}d("#product-imgs").pdpVideoPlayer(f)}function b(){wcsPDPVideoConfig=wcsPDPVideoConfig||{};var h={};var g=wcsPDPVideoConfig.hasOwnProperty("videos")?wcsPDPVideoConfig.videos.length:0,f;if(g===0){return false}else{f=wcsPDPVideoConfig.videos}for(var i in f){h.host=f[i].host;h.sources=[];h.sources[i]={};h.sources[i].src=i.host==="youtube"?f[i].src:SCENE7.URL_PREFIX.replace("image/","content/")+"/"+f[i].src;h.sources[i].type=f[i].type;h.loop=h.host==="youtube"?false:true;if(h.host!=="youtube"){h.poster=SCENE7.URL_PREFIX+"/"+f[i].poster}}h.carouselThumbLocation=wcsPDPVideoConfig.carouselThumbLocation;return h}d(document).on("close","#modal, #modal-marketing-video-template","[data-reveal]",e);function e(){if(typeof d("#product-imgs").data("pdpVideoPlayer")!=="undefined"){d("#product-imgs").data("pdpVideoPlayer").destroy()}}return{initializeVideo:c}});