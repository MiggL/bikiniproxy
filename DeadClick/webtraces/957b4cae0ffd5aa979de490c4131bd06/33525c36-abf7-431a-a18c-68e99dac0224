// Everything here copyright (c) NitroSell Limited
// NO REPRODUCTION OF *ANY* KIND PERMITTED!
/** list windows **/function displaySelectionWindow(e,t,n,r){return showModalWindow(e,"",t,n),document.getElementById("listselect").options.length>1?(document.getElementById("listselect").focus(),document.getElementById("newListNameEntry").disabled=!0):document.getElementById("newListNameEntry").focus(),!1}function displayDeleteWindow(e,t){var n=e[0],r=e[1],i='<div class="col-sm-12" id="deletelistdiv"><form class="form-horizontal" id="listdeleteform" name="listdeleteform" onsubmit="return '+t+'";>'+'<div class="form-group">'+'  <label for="listdelete" class="col-sm-9 control-label">'+e[2]+"</label>"+"</div>"+'<div class="form-group">'+'  <div class="col-sm-12">'+'    <input type="button" name="OK" value="'+e[3]+'" onClick="'+t+'" class="btn btn-primary">'+'    <input type="button" name="CANCEL" value="'+e[4]+'" onClick="hideModalWindow()"; class="btn btn-primary">'+"  </div>"+"</div>"+"</form>"+"</div>";showModalWindow(n,"",r,i)}function displayRenameWindow(e,t){var n=document.forms.frmMain.listName.value,r=e[0],i=e[1],s='<div class="col-sm-12" id="renamelistdiv"><form class="form-horizontal" id="listrenameform" name="listrenameform" onsubmit="return '+t+'";>'+'<div class="form-group">'+'  <label for="renameListEntry" class="col-sm-2 col-sm-offset-1 control-label">'+e[2]+"</label>"+'  <div class="col-sm-6">'+'    <input type="text" class="form-control" id="renameListEntry" name="renameListEntry"  value="'+n+'">'+"  </div>"+""+"</div>"+'<div class="form-group">'+'  <div class="col-sm-12" id="renamelistdivbuttons">'+'    <input type="button" name="OK" value="'+e[3]+'" onClick="'+t+'" class="btn btn-primary">'+'    <input type="button" name="CANCEL" value="'+e[4]+'" onClick="hideModalWindow()"; class="btn btn-primary">'+"  </div>"+"</div>"+"</form>"+"</div>";showModalWindow(r,"",i,s),document.getElementById("renameListEntry").focus()}function renameList(){displayRenameWindow(["modal-rename-list","Rename List","Name:","OK","Cancel"],"checkRenameList()")}function renameRegistry(){displayRenameWindow(["modal-rename-registry","Rename Registry","Name:","OK","Cancel"],"checkRenameList()")}function checkRenameList(){var e=!1,t=document.getElementById("renameListEntry").value;return t&&t.length>0&&(e=!0,hideModalWindow(),document.forms.frmMain.listName.value=t,document.forms.frmMain.action.value="Rename List",document.forms.frmMain.submit()),e||(alert("Please enter a valid name!"),document.getElementById("renameListEntry").focus()),!1}function deleteList(){displayDeleteWindow(["modal-delete-list","Delete List Confirmation","Are you sure you wish to delete this list (<strong>"+document.forms.frmMain.listName.value+"</strong>)?","Yes","No"],"checkDeleteList()")}function deleteRegistry(){displayDeleteWindow(["modal-delete-list","Delete Registry Confirmation","Are you sure you wish to delete this registry (<strong>"+document.forms.frmMain.listName.value+"</strong>)?","Yes","No"],"checkDeleteList()")}function checkDeleteList(){hideModalWindow(),document.forms.frmMain.action.value="Delete List",document.forms.frmMain.submit()}function addToList(e,t){document.forms.frmAddToListHandler.listProdcode.value=e,document.forms.frmAddToListHandler.quantity.value=t,document.forms.frmAddToListHandler.action.value="Add to List",nsc.get("/store/store.asp?action=do&doaction=getuserlists",function(e,t){t=="success"&&displaySelectionWindow("modal-add-list","Add to List",e,"checkListName(false)")})}function addAllToList(){document.forms.frmMultiAddProductHandler.action.value="Add to List",nsc.get("/store/store.asp?action=do&doaction=getuserlists",function(e,t){displaySelectionWindow(["modal-add-list","Add All to List","Select list:","List name:","OK","Cancel"],e,"checkListName(true)")})}function addToRegistry(e,t){document.forms.frmAddToListHandler.listProdcode.value=e,document.forms.frmAddToListHandler.quantity.value=t,document.forms.frmAddToListHandler.action.value="Add to Registry",nsc.get("/store/store.asp?action=do&doaction=getuserregistries",function(e,t){t=="success"&&displaySelectionWindow("modal-add-registry","Add to Registry",e,"checkListName(false)")})}function addAllToRegistry(){document.forms.frmMultiAddProductHandler.action.value="Add to Registry",nsc.get("/store/store.asp?action=do&doaction=getuserregistries",function(e,t){t=="success"&&displaySelectionWindow("modal-add-registry","Add All to Registry",e,"checkListName(true)")})}function moveToList(){document.forms.frmAddToListHandler.action.value="Move to List",nsc.get("/store/store.asp?action=do&doaction=getuserlists",function(e,t){t=="success"&&displaySelectionWindow("modal-move-list","Move to List",e,"checkListName(false)")})}function moveToRegistry(){document.forms.frmAddToListHandler.action.value="Move to Registry",nsc.get("/store/store.asp?action=do&doaction=getuserregistries",function(e,t){t=="success"&&displaySelectionWindow("modal-move-registry","Move to Registry",e,"checkListName(false)")})}function selectList(e){var t=document.getElementById("newListNameEntry");e==0||document.getElementById("listselect").options.length==1?(t.disabled=!1,t.focus()):t.disabled=!0}function checkListName(e){var t=!1,n=document.getElementById("listselect"),r=0;if(n.options[n.selectedIndex].value==0){var i=document.getElementById("newListNameEntry").value;i&&i.length>0&&(t=!0,document.getElementById("newListName").value=i)}else r=n.options[n.selectedIndex].value,t=!0;return t?(hideModalWindow(),document.forms.frmAddToListHandler.action.value=="Move to List"||document.forms.frmAddToListHandler.action.value=="Move to Registry"?(r==0&&(document.forms.frmMain.newListName.value=document.forms.frmAddToListHandler.newListName.value),document.forms.frmMain.action.value=document.forms.frmAddToListHandler.action.value,document.forms.frmMain.listId.value=r,document.forms.frmMain.submit()):e?(r==0&&(document.forms.frmMultiAddProductHandler.newListName.value=document.forms.frmAddToListHandler.newListName.value),document.forms.frmMultiAddProductHandler.listId.value=r,document.forms.frmMultiAddProductHandler.submit()):(document.forms.frmAddToListHandler.listId.value=r,document.forms.frmAddToListHandler.submit())):(alert("Please enter a valid name!"),document.getElementById("newListNameEntry").focus()),!1}function checkListItemQtys(e){var t=0;nsc(".list-qty-dropdown").each(function(){nsc(this).val()>0&&(t+=nsc(this).val())});if(t<1)return alert("Please select a quantity for at least one item!"),!1}function setRegistry(e){nsc.ajax({url:"/store/store.asp",method:"POST",data:{action:"Set Registry",listId:e}})}nsc(document).ready(function(){nsc("#list-add-to-basket").click(checkListItemQtys),nsc(".list-qty-dropdown-nowebsale").click(function(){return alert("This item is no longer available for purchase online. Please contact the store owner."),nsc(".list-qty-dropdown-nowebsale").val(0),!1})});