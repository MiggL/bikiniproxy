(function(){function t(n){return null===n||null!==n.match(/^ *$/)}function r(n){return n.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target='_blank' href='$1'>$1<\/a>")}function u(n,i){i=t(i)?"Visiteur":i;var u=n.replace("<","").replace(">","").replace("{tokySendPoint}",i+" vous a envoyé un Merci !").replace("{tokyAnsweredByMail}","Réponse par mail prise en charge par un administrateur.").replace("{tokyCoachOfTheWeek}",i+" vous a nommé coach du mois !").replace("{tokyCoachCertified}",i+" vous a nommé coach certifié !").replace("{tokyCouponSent}",i+" vous a envoyé un coupon");return r(u)}function o(n){return/^([a-zA-Z0-9_%+.-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,6})+$/.test(n)}function s(n){var t,r,i;if(void 0===n||null===n||0===n.length)return"EmptyPassword";if(t=n,"function"==typeof n.normalize&&(t=n.normalize(y)),r=n.length>=h&&n.length<=c,!r)return"PasswordBadLength";for(var u=0,f=0,e=0,o=t.length;o--;)i=t[o],$.isNumeric(i)?e++:i===i.toUpperCase()?u++:f++;return l>u||a>f||v>e?"PasswordInvalidComplexity":null}function t(n){return null===n||null!==n.match(/^ *$/)}function r(n){return n.replace(/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a target='_blank' href='$1'>$1<\/a>")}function u(n,i){i=t(i)?"Visiteur":i;var u=n.replace("<","").replace(">","").replace("{tokySendPoint}",i+" vous a envoyé un Merci !").replace("{tokyAnsweredByMail}","Réponse par mail prise en charge par un administrateur.").replace("{tokyCoachOfTheWeek}",i+" vous a nommé coach du mois !").replace("{tokyCoachCertified}",i+" vous a nommé coach certifié !").replace("{tokyCouponSent}",i+" vous a envoyé un coupon");return r(u)}var f,e,n;(function(t){function u(n,t){return b.call(n,t)}function l(n,t){var o,s,f,e,v,h,p,i,c,y,u=t&&t.split("/"),l=r.map,a=l&&l["*"]||{};if(n&&n.charAt(0)===".")if(t){for(u=u.slice(0,u.length-1),n=u.concat(n.split("/")),i=0;i<n.length;i+=1)if(y=n[i],y===".")n.splice(i,1),i-=1;else if(y==="..")if(i===1&&(n[2]===".."||n[0]===".."))break;else i>0&&(n.splice(i-1,2),i-=2);n=n.join("/")}else n.indexOf("./")===0&&(n=n.substring(2));if((u||a)&&l){for(o=n.split("/"),i=o.length;i>0;i-=1){if(s=o.slice(0,i).join("/"),u)for(c=u.length;c>0;c-=1)if(f=l[u.slice(0,c).join("/")],f&&(f=f[s],f)){e=f;v=i;break}if(e)break;!h&&a&&a[s]&&(h=a[s],p=i)}!e&&h&&(e=h,v=p);e&&(o.splice(0,v,e),n=o.join("/"))}return n}function p(n,i){return function(){return o.apply(t,k.call(arguments,0).concat([n,i]))}}function d(n){return function(t){return l(t,n)}}function g(n){return function(t){i[n]=t}}function a(n){if(u(h,n)){var r=h[n];delete h[n];y[n]=!0;c.apply(t,r)}if(!u(i,n)&&!u(y,n))throw new Error("No "+n);return i[n]}function w(n){var i,t=n?n.indexOf("!"):-1;return t>-1&&(i=n.substring(0,t),n=n.substring(t+1,n.length)),[i,n]}function nt(n,t,i){if(f.onResourceLoad&&n)f.onResourceLoad({defined:t},{id:n},i)}function tt(n){return function(){return r&&r.config&&r.config[n]||{}}}var c,o,v,s,i={},h={},r={},y={},b=Object.prototype.hasOwnProperty,k=[].slice;v=function(n,t){var r,u=w(n),i=u[0];return n=u[1],i&&(i=l(i,t),r=a(i)),i?n=r&&r.normalize?r.normalize(n,d(t)):l(n,t):(n=l(n,t),u=w(n),i=u[0],n=u[1],i&&(r=a(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}};s={require:function(n){return p(n)},exports:function(n){var t=i[n];return typeof t!="undefined"?t:i[n]={}},module:function(n){return{id:n,uri:"",exports:i[n],config:tt(n)}}};c=function(n,r,f,e){var w,o,k,b,c,l=[],d;if(e=e||n,typeof f=="function"){for(r=!r.length&&f.length?["require","exports","module"]:r,c=0;c<r.length;c+=1)if(b=v(r[c],e),o=b.f,o==="require")l[c]=s.require(n);else if(o==="exports")l[c]=s.exports(n),d=!0;else if(o==="module")w=l[c]=s.module(n);else if(u(i,o)||u(h,o)||u(y,o))l[c]=a(o);else if(b.p)b.p.load(b.n,p(e,!0),g(o),{}),l[c]=i[o];else throw new Error(n+" missing "+o);k=f.apply(i[n],l);n&&(w&&w.exports!==t&&w.exports!==i[n]?i[n]=w.exports:k===t&&d||(i[n]=k))}else n&&(i[n]=f);nt(n,i,l)};f=e=o=function(n,i,u,f,e){return typeof n=="string"?s[n]?s[n](i):a(v(n,i).f):(n.splice||(r=n,i.splice?(n=i,i=u,u=null):n=t),i=i||function(){},typeof u=="function"&&(u=f,f=e),f?c(t,n,i,u):setTimeout(function(){c(t,n,i,u)},4),o)};o.config=function(n){return r=n,r.deps&&o(r.deps,r.callback),o};f._defined=i;n=function(n,t,r){t.splice||(r=t,t=[]);u(i,n)||u(h,n)||(h[n]=[n,t,r])};n.amd={jQuery:!0}})();n("../Scripts/almond-custom",function(){});n("durandal/system",["require","jquery"],function(n,t){function l(n){var t="[object "+n+"]";i["is"+n]=function(n){return h.call(n)==t}}var i,o=!1,a=Object.keys,v=Object.prototype.hasOwnProperty,h=Object.prototype.toString,c=!1,y=Array.isArray,r=Array.prototype.slice,s,e;if(Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(n){console[n]=this.call(console[n],console)},Function.prototype.bind)}catch(b){c=!0}n.on&&n.on("moduleLoaded",function(n,t){i.setModuleId(n,t)});"undefined"!=typeof f&&(f.onResourceLoad=function(n,t){i.setModuleId(n.defined[t.id],t.id)});var u=function(){},p=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var n=0;n<arguments.length;)console.log("Item "+(n+1)+": "+arguments[n]),n++;else 1==r.call(arguments).length&&"string"==typeof r.call(arguments)[0]?console.log(r.call(arguments).toString()):console.log.apply(console,r.call(arguments));else Function.prototype.bind&&!c||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,r.call(arguments))}catch(t){}},w=function(n){if(n instanceof Error)throw n;throw new Error(n);};for(i={version:"2.0.1",noop:u,getModuleId:function(n){return n?"function"==typeof n?n.prototype.__moduleId__:"string"==typeof n?null:n.__moduleId__:null},setModuleId:function(n,t){if(n)return"function"==typeof n?(n.prototype.__moduleId__=t,void 0):("string"!=typeof n&&(n.__moduleId__=t),void 0)},resolveObject:function(n){return i.isFunction(n)?new n:n},debug:function(n){return 1==arguments.length&&(o=n,o?(this.log=p,this.error=w,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=u,this.error=u)),o},log:u,error:u,assert:function(n,t){n||i.error(new Error(t||"Assert:Failed"))},defer:function(n){return t.Deferred(n)},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=0|16*Math.random(),i="x"==n?t:8|3&t;return i.toString(16)})},acquire:function(){var t,u=arguments[0],f=!1;return i.isArray(u)?(t=u,f=!0):t=r.call(arguments,0),this.defer(function(i){n(t,function(){var n=arguments;setTimeout(function(){n.length>1||f?i.resolve(r.call(n,0)):i.resolve(n[0])},1)},function(n){i.reject(n)})}).promise()},extend:function(n){for(var i,f,u=r.call(arguments,1),t=0;t<u.length;t++)if(i=u[t],i)for(f in i)n[f]=i[f];return n},wait:function(n){return i.defer(function(t){setTimeout(t.resolve,n)}).promise()}},i.keys=a||function(n){var t,i;if(n!==Object(n))throw new TypeError("Invalid object");t=[];for(i in n)v.call(n,i)&&(t[t.length]=i);return t},i.isElement=function(n){return!(!n||1!==n.nodeType)},i.isArray=y||function(n){return"[object Array]"==h.call(n)},i.isObject=function(n){return n===Object(n)},i.isBoolean=function(n){return"boolean"==typeof n},i.isPromise=function(n){return n&&i.isFunction(n.then)},s=["Arguments","Function","String","Number","Date","RegExp"],e=0;e<s.length;e++)l(s[e]);return i});n("durandal/viewEngine",["durandal/system","jquery"],function(n,t){var i;return i=t.parseHTML?function(n){return t.parseHTML(n)}:function(n){return t(n).get()},{viewExtension:".html",viewPlugin:"text",isViewUrl:function(n){return-1!==n.indexOf(this.viewExtension,n.length-this.viewExtension.length)},convertViewUrlToViewId:function(n){return n.substring(0,n.length-this.viewExtension.length)},convertViewIdToRequirePath:function(n){return this.viewPlugin+"!"+n+this.viewExtension},parseMarkup:i,processMarkup:function(n){var t=this.parseMarkup(n);return this.ensureSingleElement(t)},ensureSingleElement:function(n){var i,u,r,f;if(1==n.length)return n[0];for(i=[],u=0;u<n.length;u++)if(r=n[u],8!=r.nodeType){if(3==r.nodeType&&(f=/\S/.test(r.nodeValue),!f))continue;i.push(r)}return i.length>1?t(i).wrapAll('<div class="durandal-wrapper"><\/div>').parent().get(0):i[0]},createView:function(t){var i=this,r=this.convertViewIdToRequirePath(t);return n.defer(function(u){n.acquire(r).then(function(n){var r=i.processMarkup(n);r.setAttribute("data-view",t);u.resolve(r)}).fail(function(n){i.createFallbackView(t,r,n).then(function(n){n.setAttribute("data-view",t);u.resolve(n)})})}).promise()},createFallbackView:function(t,i){var r=this,u='View Not Found. Searched for "'+t+'" via path "'+i+'".';return n.defer(function(n){n.resolve(r.processMarkup('<div class="durandal-view-404">'+u+"<\/div>"))}).promise()}}});n("durandal/viewLocator",["durandal/system","durandal/viewEngine"],function(n,t){function i(n,t){for(var r,u,i=0;i<n.length;i++)if(r=n[i],u=r.getAttribute("data-view"),u==t)return r}function r(n){return(n+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(n,t,i){n=n||"viewmodels";t=t||"views";i=i||t;var u=new RegExp(r(n),"gi");this.convertModuleIdToViewId=function(n){return n.replace(u,t)};this.translateViewIdToArea=function(n,t){return t&&"partial"!=t?i+"/"+t+"/"+n:i+"/"+n}},locateViewForObject:function(t,i,r){var f,u;return t.getView&&(f=t.getView())?this.locateView(f,i,r):t.viewUrl?this.locateView(t.viewUrl,i,r):(u=n.getModuleId(t),u?this.locateView(this.convertModuleIdToViewId(u),i,r):this.locateView(this.determineFallbackViewId(t),i,r))},convertModuleIdToViewId:function(n){return n},determineFallbackViewId:function(n){var t=/function (.{1,})\(/.exec(n.constructor.toString()),i=t&&t.length>1?t[1]:"";return"views/"+i},translateViewIdToArea:function(n){return n},locateView:function(r,u,f){var e,o;return"string"==typeof r?(e=t.isViewUrl(r)?t.convertViewUrlToViewId(r):r,u&&(e=this.translateViewIdToArea(e,u)),f)&&(o=i(f,e),o)?n.defer(function(n){n.resolve(o)}).promise():t.createView(e):n.defer(function(n){n.resolve(r)}).promise()}}});n("durandal/binder",["durandal/system","knockout"],function(n,t){function o(t){return void 0===t?{applyBindings:!0}:n.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function r(r,h,c,l){var y,a;if(!h||!c)return i.throwOnErrors?n.error(u):n.log(u,h,l),void 0;if(!h.getAttribute)return i.throwOnErrors?n.error(f):n.log(f,h,l),void 0;y=h.getAttribute("data-view");try{return r&&r.binding&&(a=r.binding(h)),a=o(a),i.binding(l,h,a),a.applyBindings?(n.log("Binding",y,l),t.applyBindings(c,h)):r&&t.utils.domData.set(h,s,{$data:r}),i.bindingComplete(l,h,a),r&&r.bindingComplete&&r.bindingComplete(h),t.utils.domData.set(h,e,a),a}catch(v){v.message=v.message+";\nView: "+y+";\nModuleId: "+n.getModuleId(l);i.throwOnErrors?n.error(v):n.log(v.message)}}var i,u="Insufficient Information to Bind",f="Unexpected View Type",e="durandal-binding-instruction",s="__ko_bindingContext__";return i={binding:n.noop,bindingComplete:n.noop,throwOnErrors:!1,getBindingInstruction:function(n){return t.utils.domData.get(n,e)},bindContext:function(n,t,i){return i&&n&&(n=n.createChildContext(i)),r(i,t,n,i||(n?n.$data:null))},bind:function(n,t){return r(n,t,n,n)}}});n("durandal/activator",["durandal/system","knockout"],function(n,t){function f(n){return void 0==n&&(n={}),n.closeOnDeactivate||(n.closeOnDeactivate=i.defaults.closeOnDeactivate),n.beforeActivate||(n.beforeActivate=i.defaults.beforeActivate),n.afterDeactivate||(n.afterDeactivate=i.defaults.afterDeactivate),n.affirmations||(n.affirmations=i.defaults.affirmations),n.interpretResponse||(n.interpretResponse=i.defaults.interpretResponse),n.areSameItem||(n.areSameItem=i.defaults.areSameItem),n}function r(t,i,r){return n.isArray(r)?t[i].apply(t,r):t[i](r)}function u(t,i,r,u,f){if(t&&t.deactivate){n.log("Deactivating",t);var e;try{e=t.deactivate(i)}catch(o){return n.error(o),u.resolve(!1),void 0}e&&e.then?e.then(function(){r.afterDeactivate(t,i,f);u.resolve(!0)},function(t){n.log(t);u.resolve(!1)}):(r.afterDeactivate(t,i,f),u.resolve(!0))}else t&&r.afterDeactivate(t,i,f),u.resolve(!0)}function e(t,i,u,f){if(t)if(t.activate){n.log("Activating",t);var e;try{e=r(t,"activate",f)}catch(o){return n.error(o),u(!1),void 0}e&&e.then?e.then(function(){i(t);u(!0)},function(t){n.log(t);u(!1)}):(i(t),u(!0))}else i(t),u(!0);else u(!0)}function o(t,i,r){return r.lifecycleData=null,n.defer(function(u){if(t&&t.canDeactivate){var f;try{f=t.canDeactivate(i)}catch(e){return n.error(e),u.resolve(!1),void 0}f.then?f.then(function(n){r.lifecycleData=n;u.resolve(r.interpretResponse(n))},function(t){n.error(t);u.resolve(!1)}):(r.lifecycleData=f,u.resolve(r.interpretResponse(f)))}else u.resolve(!0)}).promise()}function s(t,i,u,f){return u.lifecycleData=null,n.defer(function(e){if(t==i())return e.resolve(!0),void 0;if(t&&t.canActivate){var o;try{o=r(t,"canActivate",f)}catch(s){return n.error(s),e.resolve(!1),void 0}o.then?o.then(function(n){u.lifecycleData=n;e.resolve(u.interpretResponse(n))},function(t){n.error(t);e.resolve(!1)}):(u.lifecycleData=o,e.resolve(u.interpretResponse(o)))}else e.resolve(!0)}).promise()}function h(i,r){var l,c=t.observable(null),h;return r=f(r),h=t.computed({read:function(){return c()},write:function(n){h.viaSetter=!0;h.activateItem(n)}}),h.__activator__=!0,h.settings=r,r.activator=h,h.isActivating=t.observable(!1),h.canDeactivateItem=function(n,t){return o(n,t,r)},h.deactivateItem=function(t,i){return n.defer(function(n){h.canDeactivateItem(t,i).then(function(f){f?u(t,i,r,n,c):(h.notifySubscribers(),n.resolve(!1))})}).promise()},h.canActivateItem=function(n,t){return s(n,c,r,t)},h.activateItem=function(t,i){var f=h.viaSetter;return h.viaSetter=!1,n.defer(function(o){if(h.isActivating())return o.resolve(!1),void 0;h.isActivating(!0);var s=c();return r.areSameItem(s,t,l,i)?(h.isActivating(!1),o.resolve(!0),void 0):(h.canDeactivateItem(s,r.closeOnDeactivate).then(function(a){a?h.canActivateItem(t,i).then(function(a){a?n.defer(function(n){u(s,r.closeOnDeactivate,r,n)}).promise().then(function(){t=r.beforeActivate(t,i);e(t,c,function(n){l=i;h.isActivating(!1);o.resolve(n)},i)}):(f&&h.notifySubscribers(),h.isActivating(!1),o.resolve(!1))}):(f&&h.notifySubscribers(),h.isActivating(!1),o.resolve(!1))}),void 0)}).promise()},h.canActivate=function(){var n;return i?(n=i,i=!1):n=h(),h.canActivateItem(n)},h.activate=function(){var n;return i?(n=i,i=!1):n=h(),h.activateItem(n)},h.canDeactivate=function(n){return h.canDeactivateItem(h(),n)},h.deactivate=function(n){return h.deactivateItem(h(),n)},h.includeIn=function(n){n.canActivate=function(){return h.canActivate()};n.activate=function(){return h.activate()};n.canDeactivate=function(n){return h.canDeactivate(n)};n.deactivate=function(n){return h.deactivate(n)}},r.includeIn?h.includeIn(r.includeIn):i&&h.activate(),h.forItems=function(t){var i,u;return r.closeOnDeactivate=!1,r.determineNextItemToActivate=function(n,t){var i=t-1;return-1==i&&n.length>1?n[1]:i>-1&&i<n.length-1?n[i]:null},r.beforeActivate=function(n){var u=h(),i;return n?(i=t.indexOf(n),-1==i?t.push(n):n=t()[i]):n=r.determineNextItemToActivate(t,u?t.indexOf(u):0),n},r.afterDeactivate=function(n,i){i&&t.remove(n)},i=h.canDeactivate,h.canDeactivate=function(r){return r?n.defer(function(n){function e(){for(var t=0;t<i.length;t++)if(!i[t])return n.resolve(!1),void 0;n.resolve(!0)}for(var u=t(),i=[],f=0;f<u.length;f++)h.canDeactivateItem(u[f],r).then(function(n){i.push(n);i.length==u.length&&e()})}).promise():i()},u=h.deactivate,h.deactivate=function(i){return i?n.defer(function(n){function o(r){h.deactivateItem(r,i).then(function(){f++;t.remove(r);f==e&&n.resolve()})}for(var u=t(),f=0,e=u.length,r=0;e>r;r++)o(u[r])}).promise():u()},h},h}var i,c={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(i){return n.isObject(i)&&(i=i.can||!1),n.isString(i)?-1!==t.utils.arrayIndexOf(this.affirmations,i.toLowerCase()):i},areSameItem:function(n,t){return n==t},beforeActivate:function(n){return n},afterDeactivate:function(n,t,i){t&&i&&i(null)}};return i={defaults:c,create:h,isActivator:function(n){return n&&n.__activator__}}});n("durandal/composition",["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(n,t,i,r,u,f,e){function g(n){for(var r=[],i={childElements:r,activeView:null},t=e.virtualElements.firstChild(n);t;)1==t.nodeType&&(r.push(t),t.getAttribute(y)&&(i.activeView=t)),t=e.virtualElements.nextSibling(t);return i.activeView||(i.activeView=r[0]),i}function h(){l--;0===l&&setTimeout(function(){for(var t=s.length;t--;)try{s[t]()}catch(i){n.error(i)}s=[]},1)}function c(n){delete n.activeView;delete n.viewElements}function nt(t,i,r){if(r)i();else if(t.activate&&t.model&&t.model.activate){var u;try{u=n.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData);u&&u.then?u.then(i,function(t){n.error(t);i()}):u||void 0===u?i():(h(),c(t))}catch(f){n.error(f)}}else i()}function tt(){var t=this;if(t.activeView&&t.activeView.removeAttribute(y),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t);t.attached&&t.attached(t.child,t.parent,t);t.child.setAttribute(y,!0);t.composingNewView&&t.model&&t.model.detached&&e.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(i){n.error(i)}})}catch(i){n.error(i)}t.triggerAttach=n.noop}function it(t){if(n.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var i=t.activeView.getAttribute("data-view"),r=t.child.getAttribute("data-view");return i!=r}}return!0}return!1}function a(n){for(var r,t=0,u=n.length,i=[];u>t;t++)r=n[t].cloneNode(!0),i.push(r);return i}function w(n){var r=a(n.parts),t=o.getParts(r,null,!0),u=o.getParts(n.child);for(var i in t)f(u[i]).replaceWith(t[i])}function b(t){var i,u,r=e.virtualElements.childNodes(t.parent),f;if(!n.isArray(r)){for(f=[],i=0,u=r.length;u>i;i++)f[i]=r[i];r=f}for(i=1,u=r.length;u>i;i++)e.removeNode(r[i])}function v(n){e.utils.domData.set(n,d,n.style.display);n.style.display="none"}function rt(n){n.style.display=e.utils.domData.get(n,d)}function ut(n){var i=n.getAttribute("data-bind"),t,r;if(!i)return!1;for(t=0,r=p.length;r>t;t++)if(i.indexOf(p[t])>-1)return!0;return!1}var o,ft={},y="data-active-view",s=[],l=0,k="durandal-composition-data",et="data-part",ot=["model","view","transition","area","strategy","activationData"],d="durandal-visibility-data",p=["compose:"],st={complete:function(n){s.push(n)}};return o={composeBindings:p,convertTransitionToModuleId:function(n){return"transitions/"+n},defaultTransitionName:null,current:st,addBindingHandler:function(n,t,i){var r,f,u="composition-handler-"+n;t=t||e.bindingHandlers[n];i=i||function(){return void 0};f=e.bindingHandlers[n]={init:function(n,r,f,s,h){if(l>0){var c={trigger:e.observable(null)};o.current.complete(function(){t.init&&t.init(n,r,f,s,h);t.update&&(e.utils.domData.set(n,u,t),c.trigger("trigger"))});e.utils.domData.set(n,u,c)}else e.utils.domData.set(n,u,t),t.init&&t.init(n,r,f,s,h);return i(n,r,f,s,h)},update:function(n,t,i,r,f){var o=e.utils.domData.get(n,u);return o.update?o.update(n,t,i,r,f):(o.trigger&&o.trigger(),void 0)}};for(r in t)"init"!==r&&"update"!==r&&(f[r]=t[r])},getParts:function(n,t,i){var u,e,r,f;if(t=t||{},!n)return t;for(void 0===n.length&&(n=[n]),u=0,e=n.length;e>u;u++)if(r=n[u],r.getAttribute){if(!i&&ut(r))continue;f=r.getAttribute(et);f&&(t[f]=r);!i&&r.hasChildNodes()&&o.getParts(r.childNodes,t)}return t},cloneNodes:a,finalize:function(t){var u,r;(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)?it(t)?(u=this.convertTransitionToModuleId(t.transition),n.acquire(u).then(function(n){t.transition=n;n(t).then(function(){if(t.cacheViews){if(t.activeView){var n=i.getBindingInstruction(t.activeView);n&&void 0!=n.cacheViews&&!n.cacheViews&&e.removeNode(t.activeView)}}else t.child?b(t):e.virtualElements.emptyNode(t.parent);t.triggerAttach();h();c(t)})}).fail(function(t){n.error("Failed to load transition ("+u+"). Details: "+t.message)})):(t.child!=t.activeView&&(t.cacheViews&&t.activeView&&(r=i.getBindingInstruction(t.activeView),!r||void 0!=r.cacheViews&&!r.cacheViews?e.removeNode(t.activeView):v(t.activeView)),t.child?(t.cacheViews||b(t),rt(t.child)):t.cacheViews||e.virtualElements.emptyNode(t.parent)),t.triggerAttach(),h(),c(t)):(t.cacheViews||e.virtualElements.emptyNode(t.parent),t.triggerAttach(),h(),c(t))},bindAndShow:function(n,t,u){t.child=n;t.composingNewView=t.cacheViews?-1==e.utils.arrayIndexOf(t.viewElements,n):!0;nt(t,function(){if(t.binding&&t.binding(t.child,t.parent,t),t.preserveContext&&t.bindingContext)t.composingNewView&&(t.parts&&w(t),v(n),e.virtualElements.prepend(t.parent,n),i.bindContext(t.bindingContext,n,t.model));else if(n){var u=t.model||ft,f=e.dataFor(n);if(f!=u){if(!t.composingNewView)return e.removeNode(n),r.createView(n.getAttribute("data-view")).then(function(n){o.bindAndShow(n,t,!0)}),void 0;t.parts&&w(t);v(n);e.virtualElements.prepend(t.parent,n);i.bind(u,n)}}o.finalize(t)},u)},defaultStrategy:function(n){return t.locateViewForObject(n.model,n.area,n.viewElements)},getSettings:function(t){var h,s=t(),i=e.utils.unwrapObservable(s)||{},o=u.isActivator(s),f;if(n.isString(i))return r.isViewUrl(i)?{view:i}:{model:i,activate:!0};if(h=n.getModuleId(i))return{model:i,activate:!0};!o&&i.model&&(o=u.isActivator(i.model));for(f in i)i[f]=-1!=e.utils.arrayIndexOf(ot,f)?e.utils.unwrapObservable(i[f]):i[f];return o?i.activate=!1:void 0===i.activate&&(i.activate=!0),i},executeStrategy:function(n){n.strategy(n).then(function(t){o.bindAndShow(t,n)})},inject:function(i){return i.model?i.view?(t.locateView(i.view,i.area,i.viewElements).then(function(n){o.bindAndShow(n,i)}),void 0):(i.strategy||(i.strategy=this.defaultStrategy),n.isString(i.strategy)?n.acquire(i.strategy).then(function(n){i.strategy=n;o.executeStrategy(i)}).fail(function(t){n.error("Failed to load view strategy ("+i.strategy+"). Details: "+t.message)}):this.executeStrategy(i),void 0):(this.bindAndShow(null,i),void 0)},compose:function(i,r,u,f){l++;f||(r=o.getSettings(function(){return r},i));r.compositionComplete&&s.push(function(){r.compositionComplete(r.child,r.parent,r)});s.push(function(){r.composingNewView&&r.model&&r.model.compositionComplete&&r.model.compositionComplete(r.child,r.parent,r)});var e=g(i);r.activeView=e.activeView;r.parent=i;r.triggerAttach=tt;r.bindingContext=u;r.cacheViews&&!r.viewElements&&(r.viewElements=e.childElements);r.model?n.isString(r.model)?n.acquire(r.model).then(function(t){r.model=n.resolveObject(t);o.inject(r)}).fail(function(t){n.error("Failed to load composed module ("+r.model+"). Details: "+t.message)}):o.inject(r):r.view?(r.area=r.area||"partial",r.preserveContext=!0,t.locateView(r.view,r.area,r.viewElements).then(function(n){o.bindAndShow(n,r)})):this.bindAndShow(null,r)}},e.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,i,u,f){var s=o.getSettings(t,n),h,c;s.mode&&(h=e.utils.domData.get(n,k),h||(c=e.virtualElements.childNodes(n),h={},"inline"===s.mode?h.view=r.ensureSingleElement(c):"templated"===s.mode&&(h.parts=a(c)),e.virtualElements.emptyNode(n),e.utils.domData.set(n,k,h)),"inline"===s.mode?s.view=h.view.cloneNode(!0):"templated"===s.mode&&(s.parts=h.parts),s.preserveContext=!0);o.compose(n,s,f,!0)}},e.virtualElements.allowedBindings.compose=!0,o});n("durandal/events",["durandal/system"],function(n){var r=/\s+/,t=function(){},i=function(n,t){this.owner=n;this.events=t};return i.prototype.then=function(n,t){return this.callback=n||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},i.prototype.on=i.prototype.then,i.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},t.prototype.on=function(n,t,u){var f,e,o;if(t){for(f=this.callbacks||(this.callbacks={}),n=n.split(r);e=n.shift();)o=f[e]||(f[e]=[]),o.push(t,u);return this}return new i(this,n)},t.prototype.off=function(t,i,u){var s,o,e,f;if(!(o=this.callbacks))return this;if(!(t||i||u))return delete this.callbacks,this;for(t=t?t.split(r):n.keys(o);s=t.shift();)if((e=o[s])&&(i||u))for(f=e.length-2;f>=0;f-=2)i&&e[f]!==i||u&&e[f+1]!==u||e.splice(f,2);else delete o[s];return this},t.prototype.trigger=function(n){var o,s,i,t,f,h,u,e;if(!(s=this.callbacks))return this;for(e=[],n=n.split(r),t=1,f=arguments.length;f>t;t++)e[t-1]=arguments[t];for(;o=n.shift();){if((u=s.all)&&(u=u.slice()),(i=s[o])&&(i=i.slice()),i)for(t=0,f=i.length;f>t;t+=2)i[t].apply(i[t+1]||this,e);if(u)for(h=[o].concat(e),t=0,f=u.length;f>t;t+=2)u[t].apply(u[t+1]||this,h)}return this},t.prototype.proxy=function(n){var t=this;return function(i){t.trigger(n,i)}},t.includeIn=function(n){n.on=t.prototype.on;n.off=t.prototype.off;n.trigger=t.prototype.trigger;n.proxy=t.prototype.proxy},t});n("durandal/app",["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(n,t,i,r,u){function s(){return n.defer(function(t){return 0==f.length?(t.resolve(),void 0):(n.acquire(f).then(function(i){for(var e,u,r=0;r<i.length;r++)e=i[r],e.install?(u=o[r],n.isObject(u)||(u={}),e.install(u),n.log("Plugin:Installed "+f[r])):n.log("Plugin:Loaded "+f[r]);t.resolve()}).fail(function(t){n.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var e,f=[],o=[];return e={title:"Application",configurePlugins:function(t,i){var e=n.keys(t),r,u;for(i=i||"plugins/",-1===i.indexOf("/",i.length-1)&&(i+="/"),r=0;r<e.length;r++)u=e[r],f.push(i+u),o.push(t[u])},start:function(){return n.log("Application:Starting"),this.title&&(document.title=this.title),n.defer(function(t){u(function(){s().then(function(){t.resolve();n.log("Application:Started")})})}).promise()},setRoot:function(r,u,f){var o,e={activate:!0,transition:u};o=!f||n.isString(f)?document.getElementById(f||"applicationHost"):f;n.isString(r)?t.isViewUrl(r)?e.view=r:e.model=r:e.model=r;i.compose(o,e)}},r.includeIn(e),e});n("plugins/history",["durandal/system","jquery"],function(n,t){function r(n,t,i){if(i){var r=n.href.replace(/(javascript:|#).*$/,"");n.replace(r+"#"+t)}else n.hash="#"+t}var u=/^[#\/]|\s+$/g,f=/^\/+|\/+$/g,e=/msie [\w.]+/,o=/\/$/,i={interval:50,active:!1};return"undefined"!=typeof window&&(i.location=window.location,i.history=window.history),i.getHash=function(n){var t=(n||i).location.href.match(/#(.*)$/);return t?t[1]:""},i.getFragment=function(n,t){if(null==n)if(i._hasPushState||!i._wantsHashChange||t){n=i.location.pathname+i.location.search;var r=i.root.replace(o,"");n.indexOf(r)||(n=n.substr(r.length))}else n=i.getHash();return n.replace(u,"")},i.activate=function(r){var o,s;i.active&&n.error("History has already been activated.");i.active=!0;i.options=n.extend({},{root:"/"},i.options,r);i.root=i.options.root;i._wantsHashChange=i.options.hashChange!==!1;i._wantsPushState=!!i.options.pushState;i._hasPushState=!!(i.options.pushState&&i.history&&i.history.pushState);var h=i.getFragment(),c=document.documentMode,l=e.exec(navigator.userAgent.toLowerCase())&&(!c||7>=c);if(i.root=("/"+i.root+"/").replace(f,"/"),l&&i._wantsHashChange&&(i.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,i.navigate(h,!1)),i._hasPushState?t(window).on("popstate",i.checkUrl):i._wantsHashChange&&"onhashchange"in window&&!l?t(window).on("hashchange",i.checkUrl):i._wantsHashChange&&(i._checkUrlInterval=setInterval(i.checkUrl,i.interval)),i.fragment=h,o=i.location,s=o.pathname.replace(/[^\/]$/,"$&/")===i.root,i._wantsHashChange&&i._wantsPushState){if(!i._hasPushState&&!s)return i.fragment=i.getFragment(null,!0),i.location.replace(i.root+i.location.search+"#"+i.fragment),!0;i._hasPushState&&s&&o.hash&&(this.fragment=i.getHash().replace(u,""),this.history.replaceState({},document.title,i.root+i.fragment+o.search))}if(!i.options.silent)return i.loadUrl()},i.deactivate=function(){t(window).off("popstate",i.checkUrl).off("hashchange",i.checkUrl);clearInterval(i._checkUrlInterval);i.active=!1},i.checkUrl=function(){var n=i.getFragment();return n===i.fragment&&i.iframe&&(n=i.getFragment(i.getHash(i.iframe))),n===i.fragment?!1:(i.iframe&&i.navigate(n,!1),i.loadUrl(),void 0)},i.loadUrl=function(n){var t=i.fragment=i.getFragment(n);return i.options.routeHandler?i.options.routeHandler(t):!1},i.navigate=function(t,u){if(!i.active)return!1;if(void 0===u?u={trigger:!0}:n.isBoolean(u)&&(u={trigger:u}),t=i.getFragment(t||""),i.fragment!==t){i.fragment=t;var f=i.root+t;if(""===t&&"/"!==f&&(f=f.slice(0,-1)),i._hasPushState)i.history[u.replace?"replaceState":"pushState"]({},document.title,f);else{if(!i._wantsHashChange)return i.location.assign(f);r(i.location,t,u.replace);i.iframe&&t!==i.getFragment(i.getHash(i.iframe))&&(u.replace||i.iframe.document.open().close(),r(i.iframe.location,t,u.replace))}return u.trigger?i.loadUrl(t):void 0}},i.navigateBack=function(){i.history.back()},i});n("plugins/router",["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(n,t,i,r,u,f,e,o){function c(n){return n=n.replace(k,"\\$&").replace(p,"(?:$1)?").replace(w,function(n,t){return t?n:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+n+"$")}function l(n){var t=n.indexOf(":"),i=t>0?t-1:n.length;return n.substring(0,i)}function a(n,t){return-1!==n.indexOf(t,n.length-t.length)}function y(n,t){if(!n||!t||n.length!=t.length)return!1;for(var i=0,r=n.length;r>i;i++)if(n[i]!=t[i])return!1;return!0}var h,s,p=/\((.*?)\)/g,w=/(\(\?)?:\w+/g,b=/\*\w+/g,k=/[\-{}\[\]+?.,\\\^$|#\s]/g,d=/\/$/,v=function(){function rt(n){return n.router&&n.router.parent==u}function ut(n){p&&p.config.isActive&&p.config.isActive(n)}function ht(t,i){var r,f;n.log("Navigation Complete",t,i);r=n.getModuleId(o);r&&u.trigger("router:navigation:from:"+r);o=t;ut(!1);p=i;ut(!0);f=n.getModuleId(o);f&&u.trigger("router:navigation:to:"+f);rt(t)||u.updateDocumentTitle(t,i);s.explicitNavigation=!1;s.navigatingBack=!1;u.trigger("router:navigation:complete",t,i,u)}function k(t,i){n.log("Navigation Cancelled");u.activeInstruction(p);p&&u.navigate(p.fragment,!1);w(!1);s.explicitNavigation=!1;s.navigatingBack=!1;u.trigger("router:navigation:cancelled",t,i,u)}function g(t){n.log("Navigation Redirecting");w(!1);s.explicitNavigation=!1;s.navigatingBack=!1;u.navigate(t,{trigger:!0,replace:!0})}function nt(t,i,r){s.navigatingBack=!s.explicitNavigation&&o!=r.fragment;u.trigger("router:route:activating",i,r,u);t.activateItem(i,r.params).then(function(n){var e,f;n?(e=o,(ht(i,r),rt(i))&&(f=r.fragment,r.queryString&&(f+="?"+r.queryString),i.router.loadUrl(f)),e==i&&(u.attached(),u.compositionComplete())):t.settings.lifecycleData&&t.settings.lifecycleData.redirect?g(t.settings.lifecycleData.redirect):k(i,r);h&&(h.resolve(),h=null)}).fail(function(t){n.error(t)})}function ct(t,i,r){var f=u.guardRoute(i,r);f?f.then?f.then(function(u){u?n.isString(u)?g(u):nt(t,i,r):k(i,r)}):n.isString(f)?g(f):nt(t,i,r):k(i,r)}function ft(n,t,i){u.guardRoute?ct(n,t,i):nt(n,t,i)}function lt(n){return p&&p.config.moduleId==n.config.moduleId&&o&&(o.canReuseForRoute&&o.canReuseForRoute.apply(o,n.params)||!o.canReuseForRoute&&o.router&&o.router.loadUrl)}function et(){if(!w()){var t=it.shift();it=[];t&&(w(!0),u.activeInstruction(t),lt(t)?ft(i.create(),o,t):n.acquire(t.config.moduleId).then(function(i){var r=n.resolveObject(i);ft(b,r,t)}).fail(function(i){n.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+i.message)}))}}function tt(n){it.unshift(n);et()}function ot(n,t,i){for(var o,e,r=n.exec(t).slice(1),f=0;f<r.length;f++)o=r[f],r[f]=o?decodeURIComponent(o):null;return e=u.parseQueryString(i),e&&r.push(e),{params:r,queryParams:e}}function st(t){u.trigger("router:route:before-config",t,u);n.isRegExp(t)?t.routePattern=t.route:(t.title=t.title||u.convertRouteToTitle(t.route),t.moduleId=t.moduleId||u.convertRouteToModuleId(t.route),t.hash=t.hash||u.convertRouteToHash(t.route),t.routePattern=c(t.route));t.isActive=t.isActive||e.observable(!1);u.trigger("router:route:after-config",t,u);u.routes.push(t);u.route(t.routePattern,function(n,i){var r=ot(t.routePattern,n,i);tt({fragment:n,queryString:i,config:t,params:r.params,queryParams:r.queryParams})})}function at(t){var i;if(n.isArray(t.route))for(var f=t.isActive||e.observable(!1),r=0,o=t.route.length;o>r;r++)i=n.extend({},t),i.route=t.route[r],i.isActive=f,r>0&&delete i.nav,st(i);else st(t);return u}var o,p,it=[],w=e.observable(!1),b=i.create(),u={handlers:[],routes:[],navigationModel:e.observableArray([]),activeItem:b,isNavigating:e.computed(function(){var n=b(),t=w(),i=n&&n.router&&n.router!=u&&n.router.isNavigating()?!0:!1;return t||i}),activeInstruction:e.observable(null),__router__:!0};return r.includeIn(u),b.settings.areSameItem=function(n,t,i,r){return n==t?y(i,r):!1},u.parseQueryString=function(n){var u,t,i,f,r;if(!n||(t=n.split("&"),0==t.length))return null;for(u={},i=0;i<t.length;i++)f=t[i],""!==f&&(r=f.split("="),u[r[0]]=r[1]&&decodeURIComponent(r[1].replace(/\+/g," ")));return u},u.route=function(n,t){u.handlers.push({routePattern:n,callback:t})},u.loadUrl=function(t){var h=u.handlers,c=null,i=t,e=t.indexOf("?"),l,r,o;for((-1!=e&&(i=t.substring(0,e),c=t.substr(e+1)),u.relativeToParentRouter)&&(l=this.parent.activeInstruction(),i=l.params.join("/"),i&&"/"==i.charAt(0)&&(i=i.substr(1)),i||(i=""),i=i.replace("//","/").replace("//","/")),i=i.replace(d,""),r=0;r<h.length;r++)if(o=h[r],o.routePattern.test(i))return o.callback(i,c),!0;return n.log("Route Not Found"),u.trigger("router:route:not-found",t,u),p&&f.navigate(p.fragment,{trigger:!1,replace:!0}),s.explicitNavigation=!1,s.navigatingBack=!1,!1},u.updateDocumentTitle=function(n,i){i.config.title?document.title=t.title?i.config.title+" | "+t.title:i.config.title:t.title&&(document.title=t.title)},u.navigate=function(n,t){return n&&-1!=n.indexOf("://")?(window.location.href=n,!0):(s.explicitNavigation=!0,f.navigate(n,t))},u.navigateBack=function(){f.navigateBack()},u.attached=function(){u.trigger("router:navigation:attached",o,p,u)},u.compositionComplete=function(){w(!1);u.trigger("router:navigation:composition-complete",o,p,u);et()},u.convertRouteToHash=function(n){if(u.relativeToParentRouter){var i=u.parent.activeInstruction(),t=i.config.hash+"/"+n;return f._hasPushState&&(t="/"+t),t=t.replace("//","/").replace("//","/")}return f._hasPushState?n:"#"+n},u.convertRouteToModuleId=function(n){return l(n)},u.convertRouteToTitle=function(n){var t=l(n);return t.substring(0,1).toUpperCase()+t.substring(1)},u.map=function(t,i){if(n.isArray(t)){for(var r=0;r<t.length;r++)u.map(t[r]);return u}return n.isString(t)||n.isRegExp(t)?(i?n.isString(i)&&(i={moduleId:i}):i={},i.route=t):i=t,at(i)},u.buildNavigationModel=function(t){for(var i,r=[],e=u.routes,o=t||100,f=0;f<e.length;f++)i=e[f],i.nav&&(n.isNumber(i.nav)||(i.nav=++o),r.push(i));return r.sort(function(n,t){return n.nav-t.nav}),u.navigationModel(r),u},u.mapUnknownRoutes=function(t,i){var e="*catchall",r=c(e);return u.route(r,function(o,s){var l=ot(r,o,s),h={fragment:o,queryString:s,config:{route:e,routePattern:r},params:l.params,queryParams:l.queryParams},c;if(t)if(n.isString(t))h.config.moduleId=t,i&&f.navigate(i,{trigger:!1,replace:!0});else if(n.isFunction(t)){if(c=t(h),c&&c.then)return c.then(function(){u.trigger("router:route:before-config",h.config,u);u.trigger("router:route:after-config",h.config,u);tt(h)}),void 0}else h.config=t,h.config.route=e,h.config.routePattern=r;else h.config.moduleId=o;u.trigger("router:route:before-config",h.config,u);u.trigger("router:route:after-config",h.config,u);tt(h)}),u},u.reset=function(){return p=o=void 0,u.handlers=[],u.routes=[],u.off(),delete u.options,u},u.makeRelative=function(t){return n.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!a(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!a(t.route,"/")&&(t.route+="/"),t.fromParent&&(u.relativeToParentRouter=!0),u.on("router:route:before-config").then(function(n){t.moduleId&&(n.moduleId=t.moduleId+n.moduleId);t.route&&(n.route=""===n.route?t.route.substring(0,t.route.length-1):t.route+n.route)}),u},u.createChildRouter=function(){var n=v();return n.parent=u,n},u};return s=v(),s.explicitNavigation=!1,s.navigatingBack=!1,s.targetIsThisWindow=function(n){var t=o(n.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},s.activate=function(t){return n.defer(function(i){var r,u,e;if(h=i,s.options=n.extend({routeHandler:s.loadUrl},s.options,t),f.activate(s.options),f._hasPushState)for(r=s.routes,u=r.length;u--;)e=r[u],e.hash=e.hash.replace("#","");o(document).delegate("a","click",function(n){if(f._hasPushState){if(!n.altKey&&!n.ctrlKey&&!n.metaKey&&!n.shiftKey&&s.targetIsThisWindow(n)){var t=o(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(s.explicitNavigation=!0,n.preventDefault(),f.navigate(t))}}else s.explicitNavigation=!0});f.options.silent&&h&&(h.resolve(),h=null)}).promise()},s.deactivate=function(){f.deactivate()},s.install=function(){e.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,i,r,f){var o=e.utils.unwrapObservable(t())||{},h;o.__router__?o={model:o.activeItem(),attached:o.attached,compositionComplete:o.compositionComplete,activate:!1}:(h=e.utils.unwrapObservable(o.router||r.router)||s,o.model=h.activeItem(),o.attached=h.attached,o.compositionComplete=h.compositionComplete,o.activate=!1);u.compose(n,o,f)}};e.virtualElements.allowedBindings.router=!0},s});n("services/logger",["durandal/system"],function(){function n(){}function t(){}return{log:n,logError:t}}),function(t,i){"use strict";typeof n=="function"&&n.amd?n("scripts/toky.emojirepo",[],i):typeof exports=="object"?module.exports=i():t.emojiRepo=i()}(this,function(){"use strict";return function(n,t){function s(n){return o(n)?(n=n.replace(/\+/g,"plus"),u+"/"+encodeURIComponent(n)+f):null}function o(n){return r[n]}function h(){var o,h,c;u=n;t&&(f="."+t.toLowerCase());for(o in i)if(i.hasOwnProperty(o)){var l=i[o],a=l.name,s=e[a];for(h in s)s.hasOwnProperty(h)&&(c=s[h].shortcode,r[c]=!0)}}var u="",f=".png",r={},i=[{name:"common",shortcode:"grinning"},{name:"emotion",shortcode:"heart"}],e={common:[{shortcode:"smile"},{shortcode:"laughing"},{shortcode:"blush"},{shortcode:"smiley"},{shortcode:"relaxed"},{shortcode:"smirk"},{shortcode:"heart_eyes"},{shortcode:"kissing_heart"},{shortcode:"kissing_closed_eyes"},{shortcode:"flushed"},{shortcode:"relieved"},{shortcode:"grin"},{shortcode:"wink"},{shortcode:"stuck_out_tongue_winking_eye"},{shortcode:"stuck_out_tongue_closed_eyes"},{shortcode:"grinning"},{shortcode:"kissing"},{shortcode:"kissing_smiling_eyes"},{shortcode:"stuck_out_tongue"},{shortcode:"sleeping"},{shortcode:"worried"},{shortcode:"frowning"},{shortcode:"anguished"},{shortcode:"open_mouth"},{shortcode:"grimacing"},{shortcode:"confused"},{shortcode:"hushed"},{shortcode:"expressionless"},{shortcode:"unamused"},{shortcode:"sweat_smile"},{shortcode:"sweat"},{shortcode:"disappointed_relieved"},{shortcode:"weary"},{shortcode:"pensive"},{shortcode:"disappointed"},{shortcode:"confounded"},{shortcode:"fearful"},{shortcode:"cold_sweat"},{shortcode:"persevere"},{shortcode:"cry"},{shortcode:"sob"},{shortcode:"joy"},{shortcode:"astonished"},{shortcode:"scream"},{shortcode:"tired_face"},{shortcode:"angry"},{shortcode:"rage"},{shortcode:"triumph"},{shortcode:"sleepy"},{shortcode:"yum"},{shortcode:"mask"},{shortcode:"sunglasses"},{shortcode:"dizzy_face"},{shortcode:"imp"},{shortcode:"smiling_imp"},{shortcode:"neutral_face"},{shortcode:"no_mouth"},{shortcode:"innocent"},{shortcode:"alien"}],emotion:[{shortcode:"yellow_heart"},{shortcode:"blue_heart"},{shortcode:"purple_heart"},{shortcode:"heart"},{shortcode:"green_heart"},{shortcode:"broken_heart"},{shortcode:"heartbeat"},{shortcode:"heartpulse"},{shortcode:"two_hearts"},{shortcode:"revolving_hearts"},{shortcode:"cupid"},{shortcode:"sparkling_heart"},{shortcode:"sparkles"},{shortcode:"star"},{shortcode:"star2"},{shortcode:"dizzy"},{shortcode:"boom"},{shortcode:"anger"},{shortcode:"exclamation"},{shortcode:"question"},{shortcode:"grey_exclamation"},{shortcode:"grey_question"},{shortcode:"zzz"},{shortcode:"dash"},{shortcode:"sweat_drops"},{shortcode:"notes"},{shortcode:"musical_note"},{shortcode:"fire"},{shortcode:"+1"},{shortcode:"-1"},{shortcode:"ok_hand"},{shortcode:"facepunch"},{shortcode:"fist"},{shortcode:"v"},{shortcode:"wave"},{shortcode:"hand"},{shortcode:"open_hands"},{shortcode:"point_up"},{shortcode:"point_down"},{shortcode:"point_left"},{shortcode:"point_right"},{shortcode:"raised_hands"},{shortcode:"pray"},{shortcode:"point_up_2"},{shortcode:"clap"},{shortcode:"muscle"},{shortcode:"runner"},{shortcode:"couple"},{shortcode:"family"},{shortcode:"two_men_holding_hands"},{shortcode:"two_women_holding_hands"},{shortcode:"dancer"},{shortcode:"dancers"},{shortcode:"ok_woman"},{shortcode:"no_good"},{shortcode:"information_desk_person"},{shortcode:"raising_hand"},{shortcode:"bride_with_veil"},{shortcode:"person_with_pouting_face"},{shortcode:"person_frowning"},{shortcode:"bow"},{shortcode:"couplekiss"},{shortcode:"couple_with_heart"},{shortcode:"massage"},{shortcode:"haircut"},{shortcode:"nail_care"},{shortcode:"boy"},{shortcode:"girl"},{shortcode:"woman"},{shortcode:"man"},{shortcode:"baby"},{shortcode:"older_woman"},{shortcode:"older_man"},{shortcode:"person_with_blond_hair"},{shortcode:"man_with_gua_pi_mao"},{shortcode:"man_with_turban"},{shortcode:"construction_worker"},{shortcode:"cop"},{shortcode:"angel"},{shortcode:"princess"},{shortcode:"smiley_cat"},{shortcode:"smile_cat"},{shortcode:"heart_eyes_cat"},{shortcode:"kissing_cat"},{shortcode:"smirk_cat"},{shortcode:"scream_cat"},{shortcode:"crying_cat_face"},{shortcode:"joy_cat"},{shortcode:"pouting_cat"},{shortcode:"japanese_ogre"},{shortcode:"japanese_goblin"},{shortcode:"see_no_evil"},{shortcode:"hear_no_evil"},{shortcode:"speak_no_evil"},{shortcode:"guardsman"},{shortcode:"skull"},{shortcode:"feet"},{shortcode:"lips"},{shortcode:"kiss"},{shortcode:"droplet"},{shortcode:"ear"},{shortcode:"eyes"},{shortcode:"nose"},{shortcode:"tongue"},{shortcode:"love_letter"},{shortcode:"bust_in_silhouette"},{shortcode:"busts_in_silhouette"},{shortcode:"speech_balloon"},{shortcode:"thought_balloon"}],people:[{shortcode:"bowtie"},{shortcode:"smile"},{shortcode:"laughing"},{shortcode:"blush"},{shortcode:"smiley"},{shortcode:"relaxed"},{shortcode:"smirk"},{shortcode:"heart_eyes"},{shortcode:"kissing_heart"},{shortcode:"kissing_closed_eyes"},{shortcode:"flushed"},{shortcode:"relieved"},{shortcode:"satisfied"},{shortcode:"grin"},{shortcode:"wink"},{shortcode:"stuck_out_tongue_winking_eye"},{shortcode:"stuck_out_tongue_closed_eyes"},{shortcode:"grinning"},{shortcode:"kissing"},{shortcode:"kissing_smiling_eyes"},{shortcode:"stuck_out_tongue"},{shortcode:"sleeping"},{shortcode:"worried"},{shortcode:"frowning"},{shortcode:"anguished"},{shortcode:"open_mouth"},{shortcode:"grimacing"},{shortcode:"confused"},{shortcode:"hushed"},{shortcode:"expressionless"},{shortcode:"unamused"},{shortcode:"sweat_smile"},{shortcode:"sweat"},{shortcode:"disappointed_relieved"},{shortcode:"weary"},{shortcode:"pensive"},{shortcode:"disappointed"},{shortcode:"confounded"},{shortcode:"fearful"},{shortcode:"cold_sweat"},{shortcode:"persevere"},{shortcode:"cry"},{shortcode:"sob"},{shortcode:"joy"},{shortcode:"astonished"},{shortcode:"scream"},{shortcode:"tired_face"},{shortcode:"angry"},{shortcode:"rage"},{shortcode:"triumph"},{shortcode:"sleepy"},{shortcode:"yum"},{shortcode:"mask"},{shortcode:"sunglasses"},{shortcode:"dizzy_face"},{shortcode:"imp"},{shortcode:"smiling_imp"},{shortcode:"neutral_face"},{shortcode:"no_mouth"},{shortcode:"innocent"},{shortcode:"alien"},{shortcode:"yellow_heart"},{shortcode:"blue_heart"},{shortcode:"purple_heart"},{shortcode:"heart"},{shortcode:"green_heart"},{shortcode:"broken_heart"},{shortcode:"heartbeat"},{shortcode:"heartpulse"},{shortcode:"two_hearts"},{shortcode:"revolving_hearts"},{shortcode:"cupid"},{shortcode:"sparkling_heart"},{shortcode:"sparkles"},{shortcode:"star"},{shortcode:"star2"},{shortcode:"dizzy"},{shortcode:"boom"},{shortcode:"collision"},{shortcode:"anger"},{shortcode:"exclamation"},{shortcode:"question"},{shortcode:"grey_exclamation"},{shortcode:"grey_question"},{shortcode:"zzz"},{shortcode:"dash"},{shortcode:"sweat_drops"},{shortcode:"notes"},{shortcode:"musical_note"},{shortcode:"fire"},{shortcode:"+1"},{shortcode:"-1"},{shortcode:"ok_hand"},{shortcode:"facepunch"},{shortcode:"fist"},{shortcode:"v"},{shortcode:"wave"},{shortcode:"hand"},{shortcode:"open_hands"},{shortcode:"point_up"},{shortcode:"point_down"},{shortcode:"point_left"},{shortcode:"point_right"},{shortcode:"raised_hands"},{shortcode:"pray"},{shortcode:"point_up_2"},{shortcode:"clap"},{shortcode:"muscle"},{shortcode:"runner"},{shortcode:"couple"},{shortcode:"family"},{shortcode:"two_men_holding_hands"},{shortcode:"two_women_holding_hands"},{shortcode:"dancer"},{shortcode:"dancers"},{shortcode:"ok_woman"},{shortcode:"no_good"},{shortcode:"information_desk_person"},{shortcode:"raising_hand"},{shortcode:"bride_with_veil"},{shortcode:"person_with_pouting_face"},{shortcode:"person_frowning"},{shortcode:"bow"},{shortcode:"couplekiss"},{shortcode:"couple_with_heart"},{shortcode:"massage"},{shortcode:"haircut"},{shortcode:"nail_care"},{shortcode:"boy"},{shortcode:"girl"},{shortcode:"woman"},{shortcode:"man"},{shortcode:"baby"},{shortcode:"older_woman"},{shortcode:"older_man"},{shortcode:"person_with_blond_hair"},{shortcode:"man_with_gua_pi_mao"},{shortcode:"man_with_turban"},{shortcode:"construction_worker"},{shortcode:"cop"},{shortcode:"angel"},{shortcode:"princess"},{shortcode:"smiley_cat"},{shortcode:"smile_cat"},{shortcode:"heart_eyes_cat"},{shortcode:"kissing_cat"},{shortcode:"smirk_cat"},{shortcode:"scream_cat"},{shortcode:"crying_cat_face"},{shortcode:"joy_cat"},{shortcode:"pouting_cat"},{shortcode:"japanese_ogre"},{shortcode:"japanese_goblin"},{shortcode:"see_no_evil"},{shortcode:"hear_no_evil"},{shortcode:"speak_no_evil"},{shortcode:"guardsman"},{shortcode:"skull"},{shortcode:"feet"},{shortcode:"lips"},{shortcode:"kiss"},{shortcode:"droplet"},{shortcode:"ear"},{shortcode:"eyes"},{shortcode:"nose"},{shortcode:"tongue"},{shortcode:"love_letter"},{shortcode:"bust_in_silhouette"},{shortcode:"busts_in_silhouette"},{shortcode:"speech_balloon"},{shortcode:"thought_balloon"}],nature:[{shortcode:"sunny"},{shortcode:"umbrella"},{shortcode:"cloud"},{shortcode:"snowflake"},{shortcode:"snowman"},{shortcode:"zap"},{shortcode:"cyclone"},{shortcode:"foggy"},{shortcode:"ocean"},{shortcode:"cat"},{shortcode:"dog"},{shortcode:"mouse"},{shortcode:"hamster"},{shortcode:"rabbit"},{shortcode:"wolf"},{shortcode:"frog"},{shortcode:"tiger"},{shortcode:"koala"},{shortcode:"bear"},{shortcode:"pig"},{shortcode:"pig_nose"},{shortcode:"cow"},{shortcode:"boar"},{shortcode:"monkey_face"},{shortcode:"monkey"},{shortcode:"horse"},{shortcode:"racehorse"},{shortcode:"camel"},{shortcode:"sheep"},{shortcode:"elephant"},{shortcode:"panda_face"},{shortcode:"snake"},{shortcode:"bird"},{shortcode:"baby_chick"},{shortcode:"hatched_chick"},{shortcode:"hatching_chick"},{shortcode:"chicken"},{shortcode:"penguin"},{shortcode:"turtle"},{shortcode:"bug"},{shortcode:"honeybee"},{shortcode:"ant"},{shortcode:"beetle"},{shortcode:"snail"},{shortcode:"octopus"},{shortcode:"tropical_fish"},{shortcode:"fish"},{shortcode:"whale"},{shortcode:"whale2"},{shortcode:"dolphin"},{shortcode:"cow2"},{shortcode:"ram"},{shortcode:"rat"},{shortcode:"water_buffalo"},{shortcode:"tiger2"},{shortcode:"rabbit2"},{shortcode:"dragon"},{shortcode:"goat"},{shortcode:"rooster"},{shortcode:"dog2"},{shortcode:"pig2"},{shortcode:"mouse2"},{shortcode:"ox"},{shortcode:"dragon_face"},{shortcode:"blowfish"},{shortcode:"crocodile"},{shortcode:"dromedary_camel"},{shortcode:"leopard"},{shortcode:"cat2"},{shortcode:"poodle"},{shortcode:"paw_prints"},{shortcode:"bouquet"},{shortcode:"cherry_blossom"},{shortcode:"tulip"},{shortcode:"four_leaf_clover"},{shortcode:"rose"},{shortcode:"sunflower"},{shortcode:"hibiscus"},{shortcode:"maple_leaf"},{shortcode:"leaves"},{shortcode:"fallen_leaf"},{shortcode:"herb"},{shortcode:"mushroom"},{shortcode:"cactus"},{shortcode:"palm_tree"},{shortcode:"evergreen_tree"},{shortcode:"deciduous_tree"},{shortcode:"chestnut"},{shortcode:"seedling"},{shortcode:"blossom"},{shortcode:"ear_of_rice"},{shortcode:"shell"},{shortcode:"globe_with_meridians"},{shortcode:"sun_with_face"},{shortcode:"full_moon_with_face"},{shortcode:"new_moon_with_face"},{shortcode:"new_moon"},{shortcode:"waxing_crescent_moon"},{shortcode:"first_quarter_moon"},{shortcode:"waxing_gibbous_moon"},{shortcode:"full_moon"},{shortcode:"waning_gibbous_moon"},{shortcode:"last_quarter_moon"},{shortcode:"waning_crescent_moon"},{shortcode:"last_quarter_moon_with_face"},{shortcode:"first_quarter_moon_with_face"},{shortcode:"crescent_moon"},{shortcode:"earth_africa"},{shortcode:"earth_americas"},{shortcode:"earth_asia"},{shortcode:"volcano"},{shortcode:"milky_way"},{shortcode:"partly_sunny"},{shortcode:"octocat"},{shortcode:"squirrel"}],objects:[{shortcode:"bamboo"},{shortcode:"gift_heart"},{shortcode:"dolls"},{shortcode:"school_satchel"},{shortcode:"mortar_board"},{shortcode:"flags"},{shortcode:"fireworks"},{shortcode:"sparkler"},{shortcode:"wind_chime"},{shortcode:"rice_scene"},{shortcode:"jack_o_lantern"},{shortcode:"ghost"},{shortcode:"santa"},{shortcode:"christmas_tree"},{shortcode:"gift"},{shortcode:"bell"},{shortcode:"no_bell"},{shortcode:"tanabata_tree"},{shortcode:"tada"},{shortcode:"confetti_ball"},{shortcode:"balloon"},{shortcode:"crystal_ball"},{shortcode:"cd"},{shortcode:"dvd"},{shortcode:"floppy_disk"},{shortcode:"camera"},{shortcode:"video_camera"},{shortcode:"movie_camera"},{shortcode:"computer"},{shortcode:"tv"},{shortcode:"iphone"},{shortcode:"phone"},{shortcode:"telephone"},{shortcode:"telephone_receiver"},{shortcode:"pager"},{shortcode:"fax"},{shortcode:"minidisc"},{shortcode:"vhs"},{shortcode:"sound"},{shortcode:"speaker"},{shortcode:"mute"},{shortcode:"loudspeaker"},{shortcode:"mega"},{shortcode:"hourglass"},{shortcode:"hourglass_flowing_sand"},{shortcode:"alarm_clock"},{shortcode:"watch"},{shortcode:"radio"},{shortcode:"satellite"},{shortcode:"loop"},{shortcode:"mag"},{shortcode:"mag_right"},{shortcode:"unlock"},{shortcode:"lock"},{shortcode:"lock_with_ink_pen"},{shortcode:"closed_lock_with_key"},{shortcode:"key"},{shortcode:"bulb"},{shortcode:"flashlight"},{shortcode:"high_brightness"},{shortcode:"low_brightness"},{shortcode:"electric_plug"},{shortcode:"battery"},{shortcode:"calling"},{shortcode:"email"},{shortcode:"mailbox"},{shortcode:"postbox"},{shortcode:"bath"},{shortcode:"bathtub"},{shortcode:"shower"},{shortcode:"toilet"},{shortcode:"wrench"},{shortcode:"nut_and_bolt"},{shortcode:"hammer"},{shortcode:"seat"},{shortcode:"moneybag"},{shortcode:"yen"},{shortcode:"dollar"},{shortcode:"pound"},{shortcode:"euro"},{shortcode:"credit_card"},{shortcode:"money_with_wings"},{shortcode:"e-mail"},{shortcode:"inbox_tray"},{shortcode:"outbox_tray"},{shortcode:"envelope"},{shortcode:"incoming_envelope"},{shortcode:"postal_horn"},{shortcode:"mailbox_closed"},{shortcode:"mailbox_with_mail"},{shortcode:"mailbox_with_no_mail"},{shortcode:"package"},{shortcode:"door"},{shortcode:"smoking"},{shortcode:"bomb"},{shortcode:"gun"},{shortcode:"hocho"},{shortcode:"pill"},{shortcode:"syringe"},{shortcode:"page_facing_up"},{shortcode:"page_with_curl"},{shortcode:"bookmark_tabs"},{shortcode:"bar_chart"},{shortcode:"chart_with_upwards_trend"},{shortcode:"chart_with_downwards_trend"},{shortcode:"scroll"},{shortcode:"clipboard"},{shortcode:"calendar"},{shortcode:"date"},{shortcode:"card_index"},{shortcode:"file_folder"},{shortcode:"open_file_folder"},{shortcode:"scissors"},{shortcode:"pushpin"},{shortcode:"paperclip"},{shortcode:"black_nib"},{shortcode:"pencil2"},{shortcode:"straight_ruler"},{shortcode:"triangular_ruler"},{shortcode:"closed_book"},{shortcode:"green_book"},{shortcode:"blue_book"},{shortcode:"orange_book"},{shortcode:"notebook"},{shortcode:"notebook_with_decorative_cover"},{shortcode:"ledger"},{shortcode:"books"},{shortcode:"bookmark"},{shortcode:"name_badge"},{shortcode:"microscope"},{shortcode:"telescope"},{shortcode:"newspaper"},{shortcode:"football"},{shortcode:"basketball"},{shortcode:"soccer"},{shortcode:"baseball"},{shortcode:"tennis"},{shortcode:"8ball"},{shortcode:"rugby_football"},{shortcode:"bowling"},{shortcode:"golf"},{shortcode:"mountain_bicyclist"},{shortcode:"bicyclist"},{shortcode:"horse_racing"},{shortcode:"snowboarder"},{shortcode:"swimmer"},{shortcode:"surfer"},{shortcode:"ski"},{shortcode:"spades"},{shortcode:"hearts"},{shortcode:"clubs"},{shortcode:"diamonds"},{shortcode:"gem"},{shortcode:"ring"},{shortcode:"trophy"},{shortcode:"musical_score"},{shortcode:"musical_keyboard"},{shortcode:"violin"},{shortcode:"space_invader"},{shortcode:"video_game"},{shortcode:"black_joker"},{shortcode:"flower_playing_cards"},{shortcode:"game_die"},{shortcode:"dart"},{shortcode:"mahjong"},{shortcode:"clapper"},{shortcode:"memo"},{shortcode:"pencil"},{shortcode:"book"},{shortcode:"art"},{shortcode:"microphone"},{shortcode:"headphones"},{shortcode:"trumpet"},{shortcode:"saxophone"},{shortcode:"guitar"},{shortcode:"shoe"},{shortcode:"sandal"},{shortcode:"high_heel"},{shortcode:"lipstick"},{shortcode:"boot"},{shortcode:"shirt"},{shortcode:"tshirt"},{shortcode:"necktie"},{shortcode:"womans_clothes"},{shortcode:"dress"},{shortcode:"running_shirt_with_sash"},{shortcode:"jeans"},{shortcode:"kimono"},{shortcode:"bikini"},{shortcode:"ribbon"},{shortcode:"tophat"},{shortcode:"crown"},{shortcode:"womans_hat"},{shortcode:"mans_shoe"},{shortcode:"closed_umbrella"},{shortcode:"briefcase"},{shortcode:"handbag"},{shortcode:"pouch"},{shortcode:"purse"},{shortcode:"eyeglasses"},{shortcode:"fishing_pole_and_fish"},{shortcode:"coffee"},{shortcode:"tea"},{shortcode:"sake"},{shortcode:"baby_bottle"},{shortcode:"beer"},{shortcode:"beers"},{shortcode:"cocktail"},{shortcode:"tropical_drink"},{shortcode:"wine_glass"},{shortcode:"fork_and_knife"},{shortcode:"pizza"},{shortcode:"hamburger"},{shortcode:"fries"},{shortcode:"poultry_leg"},{shortcode:"meat_on_bone"},{shortcode:"spaghetti"},{shortcode:"curry"},{shortcode:"fried_shrimp"},{shortcode:"bento"},{shortcode:"sushi"},{shortcode:"fish_cake"},{shortcode:"rice_ball"},{shortcode:"rice_cracker"},{shortcode:"rice"},{shortcode:"ramen"},{shortcode:"stew"},{shortcode:"oden"},{shortcode:"dango"},{shortcode:"egg"},{shortcode:"bread"},{shortcode:"doughnut"},{shortcode:"custard"},{shortcode:"icecream"},{shortcode:"ice_cream"},{shortcode:"shaved_ice"},{shortcode:"birthday"},{shortcode:"cake"},{shortcode:"cookie"},{shortcode:"chocolate_bar"},{shortcode:"candy"},{shortcode:"lollipop"},{shortcode:"honey_pot"},{shortcode:"apple"},{shortcode:"green_apple"},{shortcode:"tangerine"},{shortcode:"lemon"},{shortcode:"cherries"},{shortcode:"grapes"},{shortcode:"watermelon"},{shortcode:"strawberry"},{shortcode:"peach"},{shortcode:"melon"},{shortcode:"banana"},{shortcode:"pear"},{shortcode:"pineapple"},{shortcode:"sweet_potato"},{shortcode:"eggplant"},{shortcode:"tomato"},{shortcode:"corn"}],places:[{shortcode:"house"},{shortcode:"house_with_garden"},{shortcode:"school"},{shortcode:"office"},{shortcode:"post_office"},{shortcode:"hospital"},{shortcode:"bank"},{shortcode:"convenience_store"},{shortcode:"love_hotel"},{shortcode:"hotel"},{shortcode:"wedding"},{shortcode:"church"},{shortcode:"department_store"},{shortcode:"european_post_office"},{shortcode:"city_sunrise"},{shortcode:"city_sunset"},{shortcode:"japanese_castle"},{shortcode:"european_castle"},{shortcode:"tent"},{shortcode:"factory"},{shortcode:"tokyo_tower"},{shortcode:"japan"},{shortcode:"mount_fuji"},{shortcode:"sunrise_over_mountains"},{shortcode:"sunrise"},{shortcode:"stars"},{shortcode:"statue_of_liberty"},{shortcode:"bridge_at_night"},{shortcode:"carousel_horse"},{shortcode:"rainbow"},{shortcode:"ferris_wheel"},{shortcode:"fountain"},{shortcode:"roller_coaster"},{shortcode:"ship"},{shortcode:"speedboat"},{shortcode:"boat"},{shortcode:"sailboat"},{shortcode:"rowboat"},{shortcode:"anchor"},{shortcode:"rocket"},{shortcode:"airplane"},{shortcode:"helicopter"},{shortcode:"steam_locomotive"},{shortcode:"tram"},{shortcode:"mountain_railway"},{shortcode:"bike"},{shortcode:"aerial_tramway"},{shortcode:"suspension_railway"},{shortcode:"mountain_cableway"},{shortcode:"tractor"},{shortcode:"blue_car"},{shortcode:"oncoming_automobile"},{shortcode:"car"},{shortcode:"red_car"},{shortcode:"taxi"},{shortcode:"oncoming_taxi"},{shortcode:"articulated_lorry"},{shortcode:"bus"},{shortcode:"oncoming_bus"},{shortcode:"rotating_light"},{shortcode:"police_car"},{shortcode:"oncoming_police_car"},{shortcode:"fire_engine"},{shortcode:"ambulance"},{shortcode:"minibus"},{shortcode:"truck"},{shortcode:"train"},{shortcode:"station"},{shortcode:"train2"},{shortcode:"bullettrain_front"},{shortcode:"bullettrain_side"},{shortcode:"light_rail"},{shortcode:"monorail"},{shortcode:"railway_car"},{shortcode:"trolleybus"},{shortcode:"ticket"},{shortcode:"fuelpump"},{shortcode:"vertical_traffic_light"},{shortcode:"traffic_light"},{shortcode:"warning"},{shortcode:"construction"},{shortcode:"beginner"},{shortcode:"atm"},{shortcode:"slot_machine"},{shortcode:"busstop"},{shortcode:"barber"},{shortcode:"hotsprings"},{shortcode:"checkered_flag"},{shortcode:"crossed_flags"},{shortcode:"izakaya_lantern"},{shortcode:"moyai"},{shortcode:"circus_tent"},{shortcode:"performing_arts"},{shortcode:"round_pushpin"},{shortcode:"triangular_flag_on_post"},{shortcode:"jp"},{shortcode:"kr"},{shortcode:"cn"},{shortcode:"us"},{shortcode:"fr"},{shortcode:"es"},{shortcode:"it"},{shortcode:"ru"},{shortcode:"gb"},{shortcode:"uk"},{shortcode:"de"}],symbols:[{shortcode:"one"},{shortcode:"two"},{shortcode:"three"},{shortcode:"four"},{shortcode:"five"},{shortcode:"six"},{shortcode:"seven"},{shortcode:"eight"},{shortcode:"nine"},{shortcode:"keycap_ten"},{shortcode:"1234"},{shortcode:"zero"},{shortcode:"hash"},{shortcode:"symbols"},{shortcode:"arrow_backward"},{shortcode:"arrow_down"},{shortcode:"arrow_forward"},{shortcode:"arrow_left"},{shortcode:"capital_abcd"},{shortcode:"abcd"},{shortcode:"abc"},{shortcode:"arrow_lower_left"},{shortcode:"arrow_lower_right"},{shortcode:"arrow_right"},{shortcode:"arrow_up"},{shortcode:"arrow_upper_left"},{shortcode:"arrow_upper_right"},{shortcode:"arrow_double_down"},{shortcode:"arrow_double_up"},{shortcode:"arrow_down_small"},{shortcode:"arrow_heading_down"},{shortcode:"arrow_heading_up"},{shortcode:"leftwards_arrow_with_hook"},{shortcode:"arrow_right_hook"},{shortcode:"left_right_arrow"},{shortcode:"arrow_up_down"},{shortcode:"arrow_up_small"},{shortcode:"arrows_clockwise"},{shortcode:"arrows_counterclockwise"},{shortcode:"rewind"},{shortcode:"fast_forward"},{shortcode:"information_source"},{shortcode:"ok"},{shortcode:"twisted_rightwards_arrows"},{shortcode:"repeat"},{shortcode:"repeat_one"},{shortcode:"new"},{shortcode:"top"},{shortcode:"up"},{shortcode:"cool"},{shortcode:"free"},{shortcode:"ng"},{shortcode:"cinema"},{shortcode:"koko"},{shortcode:"signal_strength"},{shortcode:"u5272"},{shortcode:"u5408"},{shortcode:"u55b6"},{shortcode:"u6307"},{shortcode:"u6708"},{shortcode:"u6709"},{shortcode:"u6e80"},{shortcode:"u7121"},{shortcode:"u7533"},{shortcode:"u7a7a"},{shortcode:"u7981"},{shortcode:"sa"},{shortcode:"restroom"},{shortcode:"mens"},{shortcode:"womens"},{shortcode:"baby_symbol"},{shortcode:"no_smoking"},{shortcode:"parking"},{shortcode:"wheelchair"},{shortcode:"metro"},{shortcode:"baggage_claim"},{shortcode:"accept"},{shortcode:"wc"},{shortcode:"potable_water"},{shortcode:"put_litter_in_its_place"},{shortcode:"secret"},{shortcode:"congratulations"},{shortcode:"m"},{shortcode:"passport_control"},{shortcode:"left_luggage"},{shortcode:"customs"},{shortcode:"ideograph_advantage"},{shortcode:"cl"},{shortcode:"sos"},{shortcode:"id"},{shortcode:"no_entry_sign"},{shortcode:"underage"},{shortcode:"no_mobile_phones"},{shortcode:"do_not_litter"},{shortcode:"non-potable_water"},{shortcode:"no_bicycles"},{shortcode:"no_pedestrians"},{shortcode:"children_crossing"},{shortcode:"no_entry"},{shortcode:"eight_spoked_asterisk"},{shortcode:"sparkle"},{shortcode:"eight_pointed_black_star"},{shortcode:"heart_decoration"},{shortcode:"vs"},{shortcode:"vibration_mode"},{shortcode:"mobile_phone_off"},{shortcode:"chart"},{shortcode:"currency_exchange"},{shortcode:"aries"},{shortcode:"taurus"},{shortcode:"gemini"},{shortcode:"cancer"},{shortcode:"leo"},{shortcode:"virgo"},{shortcode:"libra"},{shortcode:"scorpius"},{shortcode:"sagittarius"},{shortcode:"capricorn"},{shortcode:"aquarius"},{shortcode:"pisces"},{shortcode:"ophiuchus"},{shortcode:"six_pointed_star"},{shortcode:"negative_squared_cross_mark"},{shortcode:"a"},{shortcode:"b"},{shortcode:"ab"},{shortcode:"o2"},{shortcode:"diamond_shape_with_a_dot_inside"},{shortcode:"recycle"},{shortcode:"end"},{shortcode:"back"},{shortcode:"on"},{shortcode:"soon"},{shortcode:"clock1"},{shortcode:"clock130"},{shortcode:"clock10"},{shortcode:"clock1030"},{shortcode:"clock11"},{shortcode:"clock1130"},{shortcode:"clock12"},{shortcode:"clock1230"},{shortcode:"clock2"},{shortcode:"clock230"},{shortcode:"clock3"},{shortcode:"clock330"},{shortcode:"clock4"},{shortcode:"clock430"},{shortcode:"clock5"},{shortcode:"clock530"},{shortcode:"clock6"},{shortcode:"clock630"},{shortcode:"clock7"},{shortcode:"clock730"},{shortcode:"clock8"},{shortcode:"clock830"},{shortcode:"clock9"},{shortcode:"clock930"},{shortcode:"heavy_dollar_sign"},{shortcode:"copyright"},{shortcode:"registered"},{shortcode:"tm"},{shortcode:"x"},{shortcode:"heavy_exclamation_mark"},{shortcode:"bangbang"},{shortcode:"interrobang"},{shortcode:"o"},{shortcode:"heavy_multiplication_x"},{shortcode:"heavy_plus_sign"},{shortcode:"heavy_minus_sign"},{shortcode:"heavy_division_sign"},{shortcode:"white_flower"},{shortcode:"100"},{shortcode:"heavy_check_mark"},{shortcode:"ballot_box_with_check"},{shortcode:"radio_button"},{shortcode:"link"},{shortcode:"curly_loop"},{shortcode:"wavy_dash"},{shortcode:"part_alternation_mark"},{shortcode:"trident"},{shortcode:"black_small_square"},{shortcode:"white_small_square"},{shortcode:"black_medium_small_square"},{shortcode:"white_medium_small_square"},{shortcode:"black_medium_square"},{shortcode:"white_medium_square"},{shortcode:"black_large_square"},{shortcode:"white_large_square"},{shortcode:"white_check_mark"},{shortcode:"black_square_button"},{shortcode:"white_square_button"},{shortcode:"black_circle"},{shortcode:"white_circle"},{shortcode:"red_circle"},{shortcode:"large_blue_circle"},{shortcode:"large_blue_diamond"},{shortcode:"large_orange_diamond"},{shortcode:"small_blue_diamond"},{shortcode:"small_orange_diamond"},{shortcode:"small_red_triangle"},{shortcode:"small_red_triangle_down"},{shortcode:"shipit"}],onlyApple:[{shortcode:"feelsgood"},{shortcode:"finnadie"},{shortcode:"fu"},{shortcode:"goberserk"},{shortcode:"godmode"},{shortcode:"hurtrealbad"},{shortcode:"metal"},{shortcode:"neckbeard"},{shortcode:"punch"},{shortcode:"rage1"},{shortcode:"rage2"},{shortcode:"rage3"},{shortcode:"rage4"},{shortcode:"raised_hand"},{shortcode:"running"},{shortcode:"suspect"},{shortcode:"thumbsdown"},{shortcode:"thumbsup"},{shortcode:"trollface"}],hidden:[{shortcode:"hankey"},{shortcode:"poop"},{shortcode:"shit"}]};return h(),{all:r,byCategory:e,categories:i,get:s,exists:o}}}),function(t,i){"use strict";typeof n=="function"&&n.amd?n("scripts/toky.emojifyer",[],i):typeof exports=="object"?module.exports=i():t.emojifyer=i()}(this,function(){"use strict";return function(n){function f(){var n={named:/:([a-z0-9A-Z_-]+):/,smile:/:-?\)/g,open_mouth:/:o/gi,scream:/:-o/gi,smirk:/[:;]-?]/g,grinning:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,frowning:/:-?\(/g,sob:/:['’]-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,"+1":/:\+1:/g,"-1":/:\-1:/g};return t.ignore_emoticons&&(n={named:/:([a-z0-9A-Z_-]+):/,"+1":/:\+1:/g,"-1":/:\-1:/g}),Object.keys(n).map(function(t){return[n[t],t]})}function e(){var n=i.map(function(n){var i=n[0],t=i.source||i;return t=t.replace(/(^|[^\[])\^/g,"$1"),"("+t+")"}).join("|");return new RegExp(n,"gi")}function o(n){return n===" "||n==="\t"||n==="\r"||n==="\n"||n===""||n===String.fromCharCode(160)}function c(i){var r=null,u;i.replacer?r=i.replacer.apply({config:t},[":"+i.emojiName+":",i.emojiName]):(u=t.tag_type||s[t.mode],r=i.win.document.createElement(u),u!=="img"?r.setAttribute("class","emoji emoji-"+i.emojiName):(r.setAttribute("align","absmiddle"),r.setAttribute("alt",":"+i.emojiName+":"),r.setAttribute("class","emoji"),r.setAttribute("src",n.get(i.emojiName))),r.setAttribute("title",":"+i.emojiName+":"));i.node.splitText(i.match.index);i.node.nextSibling.nodeValue=i.node.nextSibling.nodeValue.substr(i.match[0].length,i.node.nextSibling.nodeValue.length);r.appendChild(i.node.splitText(i.match.index));i.node.parentNode.insertBefore(r,i.node.nextSibling)}function h(t){var u,r;if(t[1]&&t[2])return(u=t[2],n.exists(u))?u:null;for(r=3;r<t.length-1;r++)if(t[r])return i[r-2][1]}function l(t,i){var r=this.config.tag_type||s[this.config.mode];return r!=="img"?"<"+r+" class='emoji emoji-"+i+"' title=':"+i+":'><\/"+r+">":"<img align='absmiddle' alt=':"+i+":' class='emoji' src='"+n.get(i)+"' title=':"+i+":' />"}function u(){this.lastEmojiTerminatedAt=-1}function a(n,o){if(!n)return n;o||(o=l);i=f();r=e();var s=new u;return n.replace(r,function(){var i=Array.prototype.slice.call(arguments,0,-2),n=s.validate(i);return n?o.apply({config:t},[arguments[0],n]):arguments[0]})}function v(n,o){var w,b;typeof n=="undefined"&&(n=t.only_crawl_id?document.getElementById(t.only_crawl_id):document.body);var a=n.ownerDocument,s=a.defaultView||a.parentWindow,v=function(n,t){var i;if(n.hasChildNodes())for(i=n.firstChild;i;)t(i)&&v(i,t),i=i.nextSibling},k=function(n){for(var f,t=[],l=new u,i,e;(f=r.exec(n.data))!==null;)l.validate(f)&&t.push(f);for(i=t.length;i-->0;)e=h(t[i]),c({node:n,match:t[i],emojiName:e,replacer:o,win:s})};i=f();r=e();var l=[],y=new RegExp(t.blacklist.elements.join("|"),"i"),p=new RegExp(t.blacklist.classes.join("|"),"i");if(typeof s.document.createTreeWalker!="undefined")for(w=s.document.createTreeWalker(n,s.NodeFilter.SHOW_TEXT|s.NodeFilter.SHOW_ELEMENT,function(n){return n.nodeType!==1?s.NodeFilter.FILTER_ACCEPT:n.tagName.match(y)||n.tagName==="svg"||n.className.match(p)?s.NodeFilter.FILTER_REJECT:s.NodeFilter.FILTER_SKIP},!1);(b=w.nextNode())!==null;)l.push(b);else v(n,function(n){return typeof n.tagName!="undefined"&&n.tagName.match(y)||typeof n.className!="undefined"&&n.className.match(p)?!1:n.nodeType===1?!0:(l.push(n),!0)});l.forEach(k)}var i,r,t={blacklist:{ids:[],classes:["no-emojify"],elements:["script","textarea","a","pre","code"]},tag_type:null,only_crawl_id:null,ignore_emoticons:!1,mode:"img"},s={img:"img",sprite:"span","data-uri":"span"};return u.prototype={validate:function(n){function i(){return(self.lastEmojiTerminatedAt=c+t,!r)?null:r}var r=h(n),e,s;if(r){if(n[1]&&n[2])return i();var u=n[0],c=u.length,t=n.index,f=n.input;return t===0?i():f.length===u.length+t?i():(e=this.lastEmojiTerminatedAt===t,e)?i():o(f.charAt(t-1))?i():(s=o(f.charAt(u.length+t)),s)?i():void 0}}},{defaultConfig:t,setConfig:function(n){Object.keys(t).forEach(function(i){i in n&&(t[i]=n[i])})},replace:a,run:v}}}),function(t,i){"use strict";typeof n=="function"&&n.amd?n("scripts/toky.emojipicker",[],i):typeof exports=="object"?module.exports=i():t.emojiPicker=i()}(this,function(){"use strict";var n=[],t=function(t){function wt(){return f}function bt(){return r}function kt(){return u}function dt(){ii()}function gt(){setTimeout(function(){s()},0)}function et(){b();s()}function ni(n){var t=n.currentTarget.offsetWidth+";"+n.currentTarget.offsetHeight;t!==d&&s()}function ti(n,t,r){i=n;nt=t;e={top:0,right:0,bottom:0,left:0};r&&(r.height&&(p=r.height),r.width&&(w=r.width),r.position&&(y=r.position.toLowerCase()),r.offset&&(r.offset.top&&(e.top=r.offset.top),r.offset.right&&(e.right=r.offset.right),r.offset.bottom&&(e.bottom=r.offset.bottom),r.offset.left&&(e.left=r.offset.left)));ci();i.addEventListener("focus",dt);i.addEventListener("blur",gt);i.addEventListener("mouseup",ni);i.addEventListener("keyup",et);i.addEventListener("keydown",et)}function ii(){s();b();u.style.display="block"}function ri(n){n.stopImmediatePropagation();h||(ot(),r.style.display="block",document.addEventListener("click",c),h=!0)}function c(){h&&(r.style.display="none",document.removeEventListener("click",c),h=!1)}function ui(n){n.stopImmediatePropagation()}function fi(n){var t=a,i=n.currentTarget.getAttribute("category"),o=n.currentTarget,u=rt.split(" ")[0],s=v.split(" ")[0],f=r.querySelector("."+s+"[category='"+t+"']"),h=r.querySelector("."+u+"[category='"+i+"']"),e=r.querySelector("."+u+"[category='"+t+"']");f.className=f.className.replace(" active","");o.className+=" active";e.className=e.className.replace(" shown","");h.className+=" shown";a=i}function ei(n){var r=n.currentTarget,t=r.getAttribute("shortCode");li(i,t);c();nt(t)}function oi(){return"<div class='"+tt+"' style='display: none;'>                     <div class='"+ht+"'><\/div>                 <\/div>"}function si(){var t,i,r,s;h=!1;var u="<div class='"+l+"' style='display: none;'>                     <div class='"+it+"'><\/div>",f="<div class='"+ct+"'>",e="<div class='"+at+"'>";for(t in o.categories)if(o.categories.hasOwnProperty(t)){var y=o.categories[t],n=y.name,b=y.shortcode,k=t==="0"?" "+lt:"",d="<div class='"+v+k+"' style='background-image: url(\""+o.get(b)+"\")' category='"+n+"' title='"+n+"' alt='"+n+"'><\/div>",p="";t==="0"&&(p=" "+vt,a=n);i="<div class='"+rt+p+"' category='"+n+"'>";r=o.byCategory[n];for(s in r)if(r.hasOwnProperty(s)){var c=r[s].shortcode,w=":"+c+":",g="<div class='"+ut+"' style='background-image: url(\""+o.get(c)+"\")' shortCode='"+w+"' title='"+w+"' alt='"+c+" 'align='absmiddle'><\/div>";i+=g}i+="<\/div>";e+=i;f+=d}return f+="<\/div>",e+="<\/div>",u+=f,u+=e,u+"<\/div>"}function hi(){var s=f.getElementsByClassName(it)[0],t=f.getElementsByClassName(v),i=f.getElementsByClassName(ut),n,e,o;for(r.addEventListener("click",ui),u.addEventListener("click",ri),s.addEventListener("click",c),n=0;n<t.length;n++)e=t[n],e.addEventListener("click",fi);for(n=0;n<i.length;n++)o=i[n],o.addEventListener("click",ei)}function ci(){var n=document.createDocumentFragment();f=document.createElement("div");f.className=st;f.innerHTML=oi()+si();u=f.getElementsByClassName(tt)[0];r=f.getElementsByClassName(l)[0];hi();s();b();ot();n.appendChild(f);i.parentNode.insertBefore(n,i.nextSibling);c()}function s(){if(!u||u.style.display!=="none"){var n=i.offsetWidth+";"+i.offsetHeight;f.style.top=i.offsetTop+"px";f.style.left=i.offsetLeft+i.offsetWidth+"px";d=n;i.style.paddingRight=u.offsetWidth+"px"}}function b(){var n=i.offsetHeight;n>ft&&(n=ft);u.style.height=n+"px";u.style.width=n+"px";g=i.clientHeight<i.scrollHeight;u.style.left=g?-n-pt+"px":-n+"px"}function ot(){var t,n,f;y==="above"?r.style.top=-p-yt+(-e.top+e.bottom)+"px":y==="below"&&(r.style.top=i.offsetHeight-(e.top+e.bottom)+"px");r.style.left=-w+(-e.left+e.right)+"px";t=l.split(" ");r.className=t[0];r.style.display="block";n=r.getBoundingClientRect();r.style.display="none";r.className=l;n.bottom<0;n.top<0&&(f=parseInt(u.style.height.replace("px","")),r.style.top=-p-f-n.top+"px");n.left<0&&(r.style.left=-w-n.left+"px");n.right<0}function li(n,t){var r;if(document.selection)n.focus(),r=document.selection.createRange(),r.text=t,n.focus();else if(n.selectionStart||n.selectionStart==="0"){var i=n.selectionStart,u=n.selectionEnd,f=n.scrollTop;n.value=n.value.substring(0,i)+t+n.value.substring(u,n.value.length);n.focus();n.selectionStart=i+t.length;n.selectionEnd=i+t.length;n.scrollTop=f}else n.focus(),n.value+=t}function ai(){o=t}var r,u,f,h=!1,d,g=!1,i={},o={},nt={},a="",st="emojiPickerContain",tt="emojiPickerButtonContain fadeInFast",ht="emojiPickerButton",l="emojiPickerPanel zoomIn",it="close",ct="nav",v="tab",lt="active",at="sections",rt="section fadeInDown",vt="shown",ut="emojiContain",y="above",e={},p=80,w=275,yt=32,ft=32,pt=15,k;return ai(),k={set:ti,getPickerWrapper:wt,getPickerButton:kt,getPickerPanel:bt,doWrapperPositioning:s},n.push(k),k};return setInterval(function(){for(var t=0;t<n.length;t++)n[t].doWrapperPositioning()},1e3),t});n("scripts/toky.emoji",["scripts/toky.emojirepo","scripts/toky.emojifyer","scripts/toky.emojipicker"],function(n,t,i){return function(){function s(s){var h,c,l,a;if(!u)throw"You have to run init() first!";return s||(s={}),s.style=s.style?s.style.toLowerCase():o,h=s.style,c=!0,e[h]||(c=!1),r[h]||(l=new n(f+"/"+h),a=new t(l),r[h]={repo:c?function(){return l}:null,emojifyer:c?function(){return a}:null,emojiPicker:c?function(){return new i(l)}:null}),r[h]}function h(n){f=n;u=!0}var u=!1,f="",r={},e={apple:!0,google:!0,twitter:!0,emojione:!0,none:!1},o="apple";return{init:h,get:s}}()});!function(t,i){if("object"==typeof exports){var r=e("jquery");module.exports=i(r)}else"function"==typeof n&&n.amd&&n("scripts/i18next.amd.withJQuery-1.8.0.min",["jquery"],i)}(this,function(n){function ot(n,t){if(!t||"function"==typeof t)return n;for(var i in t)n[i]=t[i];return n}function nt(n,t){for(var i in t)i in n?nt(n[i],t[i]):n[i]=t[i];return n}function st(n,t,i){var r,u=0,f=n.length,e=void 0===f||"[object Array]"!==Object.prototype.toString.apply(n)||"function"==typeof n;if(i)if(e){for(r in n)if(t.apply(n[r],i)===!1)break}else for(;f>u&&t.apply(n[u++],i)!==!1;);else if(e){for(r in n)if(t.call(n[r],r,n[r])===!1)break}else for(;f>u&&t.call(n[u],u,n[u++])!==!1;);return n}function ht(n){return"string"==typeof n?n.replace(/[&<>"'\/]/g,function(n){return fi[n]}):n}function ct(n){var r=function(n){if(window.XMLHttpRequest)return n(null,new XMLHttpRequest);if(window.ActiveXObject)try{return n(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(t){return n(null,new ActiveXObject("Microsoft.XMLHTTP"))}return n(new Error)},u=function(n){var i,t;if("string"==typeof n)return n;i=[];for(t in n)n.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return i.join("&")},f=function(n){var i,r,t;for(n=n.replace(/\r\n/g,"\n"),i="",r=0;r<n.length;r++)t=n.charCodeAt(r),128>t?i+=String.fromCharCode(t):t>127&&2048>t?(i+=String.fromCharCode(t>>6|192),i+=String.fromCharCode(63&t|128)):(i+=String.fromCharCode(t>>12|224),i+=String.fromCharCode(t>>6&63|128),i+=String.fromCharCode(63&t|128));return i},e=function(n){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o,t,i,h,c,s,r,l,u;n=f(n);l="";u=0;do o=n.charCodeAt(u++),t=n.charCodeAt(u++),i=n.charCodeAt(u++),h=o>>2,c=(3&o)<<4|t>>4,s=(15&t)<<2|i>>6,r=63&i,isNaN(t)?s=r=64:isNaN(i)&&(r=64),l+=e.charAt(h)+e.charAt(c)+e.charAt(s)+e.charAt(r),o=t=i="",h=c=s=r="";while(u<n.length);return l},o=function(){for(var t,i,r=arguments[0],n=1;n<arguments.length;n++){t=arguments[n];for(i in t)t.hasOwnProperty(i)&&(r[i]=t[i])}return r},t=function(n,f,e,s){var c,l,h,v,a;if("function"==typeof e&&(s=e,e={}),e.cache=e.cache||!1,e.data=e.data||{},e.headers=e.headers||{},e.jsonp=e.jsonp||!1,e.async=void 0===e.async?!0:e.async,l=o({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},t.headers,e.headers),(c="application/json"===l["content-type"]?JSON.stringify(e.data):u(e.data),"GET"===n)&&(h=[],c&&(h.push(c),c=null),e.cache||h.push("_="+(new Date).getTime()),e.jsonp&&(h.push("callback="+e.jsonp),h.push("jsonp="+e.jsonp)),h=h.join("&"),h.length>1&&(f+=f.indexOf("?")>-1?"&"+h:"?"+h),e.jsonp))return v=document.getElementsByTagName("head")[0],a=document.createElement("script"),a.type="text/javascript",a.src=f,void v.appendChild(a);r(function(t,r){if(t)return s(t);r.open(n,f,e.async);for(var u in l)l.hasOwnProperty(u)&&r.setRequestHeader(u,l[u]);r.onreadystatechange=function(){if(4===r.readyState){var n=r.responseText||"";if(!s)return;s(r.status,{text:function(){return n},json:function(){try{return JSON.parse(n)}catch(t){return i.error("Can not parse JSON. URL: "+f),{}}}})}};r.send(c)})},s={authBasic:function(n,i){t.headers.Authorization="Basic "+e(n+":"+i)},connect:function(n,i,r){return t("CONNECT",n,i,r)},del:function(n,i,r){return t("DELETE",n,i,r)},get:function(n,i,r){return t("GET",n,i,r)},head:function(n,i,r){return t("HEAD",n,i,r)},headers:function(n){t.headers=n||{}},isAllowed:function(n,t,i){this.options(n,function(n,r){i(-1!==r.text().indexOf(t))})},options:function(n,i,r){return t("OPTIONS",n,i,r)},patch:function(n,i,r){return t("PATCH",n,i,r)},post:function(n,i,r){return t("POST",n,i,r)},put:function(n,i,r){return t("PUT",n,i,r)},trace:function(n,i,r){return t("TRACE",n,i,r)}},h=n.type?n.type.toLowerCase():"get";s[h](n.url,n,function(t,i){200===t||0===t&&i.text()?n.success(i.json(),t,null):n.error(i.text(),t,null)})}function w(e,s){var l,c,a,v,b;if("function"==typeof e&&(s=e,e={}),e=e||{},i.extend(t,e),delete t.fixLng,t.functions&&(delete t.functions,i.extend(i,e.functions)),"string"==typeof t.ns&&(t.ns={namespaces:[t.ns],defaultNs:t.ns}),"string"==typeof t.fallbackNS&&(t.fallbackNS=[t.fallbackNS]),("string"==typeof t.fallbackLng||"boolean"==typeof t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),t.interpolationPrefixEscaped=i.regexEscape(t.interpolationPrefix),t.interpolationSuffixEscaped=i.regexEscape(t.interpolationSuffix),t.lng||(t.lng=i.detectLanguage()),y=i.toLanguages(t.lng),h=y[0],i.log("currentLng set to: "+h),t.useCookie&&i.cookie.read(t.cookieName)!==h&&i.cookie.create(t.cookieName,h,t.cookieExpirationTime,t.cookieDomain),t.detectLngFromLocalStorage&&"undefined"!=typeof document&&window.localStorage&&i.localStorage.setItem("i18next_lng",h),l=o,e.fixLng&&(l=function(n,t){return t=t||{},t.lng=t.lng||l.lng,o(n,t)},l.lng=h),f.setCurrentLng(h),n&&t.setJqueryExt&&ni(),n&&n.Deferred&&(c=n.Deferred()),!t.resStore){for(a=i.toLanguages(t.lng),"string"==typeof t.preload&&(t.preload=[t.preload]),v=0,b=t.preload.length;b>v;v++)for(var w=i.toLanguages(t.preload[v]),p=0,k=w.length;k>p;p++)a.indexOf(w[p])<0&&a.push(w[p]);return u.sync.load(a,t,function(n,t){r=t;g=!0;s&&s(l);c&&c.resolve(l)}),c?c.promise():void 0}return r=t.resStore,g=!0,s&&s(l),c&&c.resolve(l),c?c.promise():void 0}function lt(n,i){"string"==typeof n&&(n=[n]);for(var r=0,u=n.length;u>r;r++)t.preload.indexOf(n[r])<0&&t.preload.push(n[r]);return w(i)}function at(n,u,f,e){"string"!=typeof u?(f=u,u=t.ns.defaultNs):t.ns.namespaces.indexOf(u)<0&&t.ns.namespaces.push(u);r[n]=r[n]||{};r[n][u]=r[n][u]||{};e?i.deepExtend(r[n][u],f):i.extend(r[n][u],f);t.useLocalStorage&&s._storeLocal(r)}function vt(n,i){var u,f,e;"string"!=typeof i&&(i=t.ns.defaultNs);r[n]=r[n]||{};u=r[n][i]||{};f=!1;for(e in u)u.hasOwnProperty(e)&&(f=!0);return f}function yt(n,u){return"string"!=typeof u&&(u=t.ns.defaultNs),r[n]=r[n]||{},i.extend({},r[n][u])}function pt(n,i){"string"!=typeof i&&(i=t.ns.defaultNs);r[n]=r[n]||{};r[n][i]={};t.useLocalStorage&&s._storeLocal(r)}function tt(n,i,u,f){"string"!=typeof i?(resource=i,i=t.ns.defaultNs):t.ns.namespaces.indexOf(i)<0&&t.ns.namespaces.push(i);r[n]=r[n]||{};r[n][i]=r[n][i]||{};for(var o=u.split(t.keyseparator),e=0,h=r[n][i];o[e];)e==o.length-1?h[o[e]]=f:(null==h[o[e]]&&(h[o[e]]={}),h=h[o[e]]),e++;t.useLocalStorage&&s._storeLocal(r)}function wt(n,i,r){"string"!=typeof i?(resource=i,i=t.ns.defaultNs):t.ns.namespaces.indexOf(i)<0&&t.ns.namespaces.push(i);for(var u in r)"string"==typeof r[u]&&tt(n,i,u,r[u])}function bt(n){t.ns.defaultNs=n}function kt(n,t){it([n],t)}function it(n,f){var b={dynamicLoad:t.dynamicLoad,resGetPath:t.resGetPath,getAsync:t.getAsync,customLoad:t.customLoad,ns:{namespaces:n,defaultNs:""}},e=i.toLanguages(t.lng),s,p,l,y,a,w;for("string"==typeof t.preload&&(t.preload=[t.preload]),s=0,p=t.preload.length;p>s;s++)for(var v=i.toLanguages(t.preload[s]),h=0,k=v.length;k>h;h++)e.indexOf(v[h])<0&&e.push(v[h]);for(var o=[],c=0,d=e.length;d>c;c++){if(l=!1,y=r[e[c]],y)for(a=0,w=n.length;w>a;a++)y[n[a]]||(l=!0);else l=!0;l&&o.push(e[c])}o.length?u.sync._fetch(o,b,function(e,s){var h=n.length*o.length;i.each(n,function(n,e){t.ns.namespaces.indexOf(e)<0&&t.ns.namespaces.push(e);i.each(o,function(n,i){r[i]=r[i]||{};r[i][e]=s[i][e];h--;0===h&&f&&(t.useLocalStorage&&u.sync._storeLocal(r),f())})})}):f&&f()}function rt(n,t,i){return"function"==typeof t?(i=t,t={}):t||(t={}),t.lng=n,w(t,i)}function dt(){return h}function gt(n){r={};rt(h,n)}function ni(){function i(i,r,u){var e,o,f,s,h;0!==r.length&&(e="text",0===r.indexOf("[")&&(o=r.split("]"),r=o[1],e=o[0].substr(1,o[0].length-1)),r.indexOf(";")===r.length-1&&(r=r.substr(0,r.length-2)),"html"===e?(f=t.defaultValueFromContent?n.extend({defaultValue:i.html()},u):u,i.html(n.t(r,f))):"text"===e?(f=t.defaultValueFromContent?n.extend({defaultValue:i.text()},u):u,i.text(n.t(r,f))):"prepend"===e?(f=t.defaultValueFromContent?n.extend({defaultValue:i.html()},u):u,i.prepend(n.t(r,f))):"append"===e?(f=t.defaultValueFromContent?n.extend({defaultValue:i.html()},u):u,i.append(n.t(r,f))):0===e.indexOf("data-")?(s=e.substr(5),f=t.defaultValueFromContent?n.extend({defaultValue:i.data(s)},u):u,h=n.t(r,f),i.data(s,h),i.attr(e,h)):(f=t.defaultValueFromContent?n.extend({defaultValue:i.attr(e)},u):u,i.attr(e,n.t(r,f))))}function r(r,u){var f=r.attr(t.selectorAttr),e,o,s;(f||"undefined"==typeof f||f===!1||(f=r.text()||r.val()),f)&&(e=r,o=r.data("i18n-target"),(o&&(e=r.find(o)||r),u||t.useDataAttrOptions!==!0||(u=r.data("i18n-options")),u=u||{},f.indexOf(";")>=0)?(s=f.split(";"),n.each(s,function(n,t){""!==t&&i(e,t,u)})):i(e,f,u),t.useDataAttrOptions===!0&&r.data("i18n-options",u))}n.t=n.t||o;n.fn.i18n=function(i){return this.each(function(){r(n(this),i);var u=n(this).find("["+t.selectorAttr+"]");u.each(function(){r(n(this),i)})})}}function e(n,r,u,f){if(!n||(f=f||r,n.indexOf(f.interpolationPrefix||t.interpolationPrefix)<0))return n;var o=f.interpolationPrefix?i.regexEscape(f.interpolationPrefix):t.interpolationPrefixEscaped,s=f.interpolationSuffix?i.regexEscape(f.interpolationSuffix):t.interpolationSuffixEscaped,h="HTML"+s,c=r.replace&&"object"==typeof r.replace?r.replace:r;return i.each(c,function(r,c){var l=u?u+t.keyseparator+r:r;"object"==typeof c&&null!==c?n=e(n,c,l,f):f.escapeInterpolation||t.escapeInterpolation?(n=n.replace(new RegExp([o,l,h].join(""),"g"),i.regexReplacementEscape(c)),n=n.replace(new RegExp([o,l,s].join(""),"g"),i.regexReplacementEscape(i.escape(c)))):n=n.replace(new RegExp([o,l,s].join(""),"g"),i.regexReplacementEscape(c))}),n}function b(n,r){var c=",",l="{",o="}",e=i.extend({},r),f,h,y,p;for(delete e.postProcess;-1!=n.indexOf(t.reusePrefix)&&(d++,!(d>t.maxRecursion));){var s=n.lastIndexOf(t.reusePrefix),a=n.indexOf(t.reuseSuffix,s)+t.reuseSuffix.length,v=n.substring(s,a),u=v.replace(t.reusePrefix,"").replace(t.reuseSuffix,"");if(s>=a)return i.error("there is an missing closing in following translation value",n),"";if(-1!=u.indexOf(c)&&(f=u.indexOf(c),-1!=u.indexOf(l,f)&&-1!=u.indexOf(o,f))){h=u.indexOf(l,f);y=u.indexOf(o,h)+o.length;try{e=i.extend(e,JSON.parse(u.substring(h,y)));u=u.substring(0,f)}catch(w){}}p=k(u,e);n=n.replace(v,i.regexReplacementEscape(p))}return n}function ti(n){return n.context&&("string"==typeof n.context||"number"==typeof n.context)}function ut(n){return void 0!==n.count&&"string"!=typeof n.count}function ii(n){return void 0!==n.indefinite_article&&"string"!=typeof n.indefinite_article&&n.indefinite_article}function ft(n,t){t=t||{};var r=a(n,t),i=v(n,t);return void 0!==i||i===r}function o(n,t){return t=t||{},g?(d=0,k.apply(null,arguments)):(i.log("i18next not finished initialization. you might have called t function before loading resources finished."),t.defaultValue||"")}function a(n,t){return void 0!==t.defaultValue?t.defaultValue:n}function ri(){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);return{postProcess:"sprintf",sprintf:t}}function k(n,r){var u,c,o,k,d;if(r&&"object"!=typeof r?"sprintf"===t.shortcutFunction?r=ri.apply(null,arguments):"defaultValue"===t.shortcutFunction&&(r={defaultValue:r}):r=r||{},"object"==typeof t.defaultVariables&&(r=i.extend({},t.defaultVariables,r)),void 0===n||null===n||""===n)return"";if("number"==typeof n&&(n=String(n)),"string"==typeof n&&(n=[n]),u=n[0],n.length>1)for(c=0;c<n.length&&(u=n[c],!ft(u,r));c++);var h,f=a(u,r),s=v(u,r),p=r.lng?i.toLanguages(r.lng,r.fallbackLng):y,w=r.ns||t.ns.defaultNs;return u.indexOf(t.nsseparator)>-1&&(h=u.split(t.nsseparator),w=h[0],u=h[1]),void 0===s&&t.sendMissing&&"function"==typeof t.missingKeyHandler&&(r.lng?t.missingKeyHandler(p[0],w,u,f,p):t.missingKeyHandler(t.lng,w,u,f,p)),o="string"==typeof t.postProcess&&""!==t.postProcess?[t.postProcess]:"array"==typeof t.postProcess||"object"==typeof t.postProcess?t.postProcess:[],"string"==typeof r.postProcess&&""!==r.postProcess?o=o.concat([r.postProcess]):("array"==typeof r.postProcess||"object"==typeof r.postProcess)&&(o=o.concat(r.postProcess)),void 0!==s&&o.length&&o.forEach(function(n){l[n]&&(s=l[n](s,u,r))}),k=f,(f.indexOf(t.nsseparator)>-1&&(h=f.split(t.nsseparator),k=h[1]),k===u&&t.parseMissingKey&&(f=t.parseMissingKey(f)),void 0===s&&(f=e(f,r),f=b(f,r),o.length))&&(d=a(u,r),o.forEach(function(n){l[n]&&(s=l[n](d,u,r))})),void 0!==s?s:f}function v(n,s){var c,p,tt,l,at,w,ot,vt,g,it,st,rt,yt,nt,lt,et,wt,bt,kt;if((s=s||{},tt=a(n,s),l=y,!r)||"cimode"===l[0].toLowerCase())return tt;if((s.lngs&&(l=s.lngs),s.lng&&(l=i.toLanguages(s.lng,s.fallbackLng),!r[l[0]]))&&(at=t.getAsync,t.getAsync=!1,u.sync.load(l,t,function(n,u){i.extend(r,u);t.getAsync=at})),w=s.ns||t.ns.defaultNs,n.indexOf(t.nsseparator)>-1&&(ot=n.split(t.nsseparator),w=ot[0],n=ot[1]),ti(s)&&(c=i.extend({},s),delete c.context,c.defaultValue=t.contextNotFound,vt=w+t.nsseparator+n+"_"+s.context,p=o(vt,c),p!=t.contextNotFound))return e(p,{context:s.context});if(ut(s,l[0])){if(c=i.extend({lngs:[l[0]]},s),delete c.count,c._origLng=c._origLng||c.lng||l[0],delete c.lng,c.defaultValue=t.pluralNotFound,f.needsPlural(l[0],s.count)?(g=w+t.nsseparator+n+t.pluralSuffix,it=f.get(l[0],s.count),it>=0?g=g+"_"+it:1===it&&(g=w+t.nsseparator+n)):g=w+t.nsseparator+n,p=o(g,c),p!=t.pluralNotFound)return e(p,{count:s.count,interpolationPrefix:s.interpolationPrefix,interpolationSuffix:s.interpolationSuffix});if(!(l.length>1))return c.lng=c._origLng,delete c._origLng,p=o(w+t.nsseparator+n,c),e(p,{count:s.count,interpolationPrefix:s.interpolationPrefix,interpolationSuffix:s.interpolationSuffix});if(st=l.slice(),st.shift(),s=i.extend(s,{lngs:st}),s._origLng=c._origLng,delete s.lng,p=o(w+t.nsseparator+n,s),p!=t.pluralNotFound)return p}if(ii(s)&&(rt=i.extend({},s),delete rt.indefinite_article,rt.defaultValue=t.indefiniteNotFound,yt=w+t.nsseparator+n+(s.count&&!ut(s,l[0])||!s.count?t.indefiniteSuffix:""),p=o(yt,rt),p!=t.indefiniteNotFound))return p;for(var d,pt=n.split(t.keyseparator),ht=0,dt=l.length;dt>ht&&void 0===d;ht++){for(var ft=l[ht],ct=0,h=r[ft]&&r[ft][w];pt[ct];)h=h&&h[pt[ct]],ct++;void 0!==h&&(nt=Object.prototype.toString.apply(h),"string"==typeof h?(h=e(h,s),h=b(h,s)):"[object Array]"!==nt||t.returnObjectTrees||s.returnObjectTrees?null===h&&t.fallbackOnNull===!0?h=void 0:null!==h&&(t.returnObjectTrees||s.returnObjectTrees?"[object Number]"!==nt&&"[object Function]"!==nt&&"[object RegExp]"!==nt&&(lt="[object Array]"===nt?[]:{},i.each(h,function(i){lt[i]=k(w+t.nsseparator+n+t.keyseparator+i,s)}),h=lt):t.objectTreeKeyHandler&&"function"==typeof t.objectTreeKeyHandler?h=t.objectTreeKeyHandler(n,h,ft,w,s):(h="key '"+w+":"+n+" ("+ft+")' returned an object instead of string.",i.log(h))):(h=h.join("\n"),h=e(h,s),h=b(h,s)),"string"==typeof h&&""===h.trim()&&t.fallbackOnEmpty===!0&&(h=void 0),d=h)}if(void 0===d&&!s.isFallbackLookup&&(t.fallbackToDefaultNS===!0||t.fallbackNS&&t.fallbackNS.length>0)){if(s.isFallbackLookup=!0,t.fallbackNS.length){for(et=0,wt=t.fallbackNS.length;wt>et;et++)if((d=v(t.fallbackNS[et]+t.nsseparator+n,s),d||""===d&&t.fallbackOnEmpty===!1)&&(bt=d.indexOf(t.nsseparator)>-1?d.split(t.nsseparator)[1]:d,kt=tt.indexOf(t.nsseparator)>-1?tt.split(t.nsseparator)[1]:tt,bt!==kt))break}else d=v(n,s);s.isFallbackLookup=!1}return d}function ui(){var r,e=t.lngWhitelist||[],n=[],f,u;if(("undefined"!=typeof window&&!function(){for(var u,f,e=window.location.search.substring(1),r=e.split("&"),i=0;i<r.length;i++)u=r[i].indexOf("="),u>0&&(f=r[i].substring(0,u),f==t.detectLngQS&&n.push(r[i].substring(u+1)))}(),t.useCookie&&"undefined"!=typeof document)&&(f=i.cookie.read(t.cookieName),f&&n.push(f)),t.detectLngFromLocalStorage&&"undefined"!=typeof window&&window.localStorage&&n.push(i.localStorage.getItem("i18next_lng")),"undefined"!=typeof navigator){if(navigator.languages)for(u=0;u<navigator.languages.length;u++)n.push(navigator.languages[u]);navigator.userLanguage&&n.push(navigator.userLanguage);navigator.language&&n.push(navigator.language)}return function(){for(var i,u,f=0;f<n.length;f++)if(i=n[f],i.indexOf("-")>-1&&(u=i.split("-"),i=t.lowerCaseLng?u[0].toLowerCase()+"-"+u[1].toLowerCase():u[0].toLowerCase()+"-"+u[1].toUpperCase()),0===e.length||e.indexOf(i)>-1){r=i;break}}(),r||(r=t.fallbackLng[0]),r}Array.prototype.indexOf||(Array.prototype.indexOf=function(n){"use strict";var u,r,t,i;if(null==this)throw new TypeError;if((u=Object(this),r=u.length>>>0,0===r)||(t=0,arguments.length>0&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),t>=r))return-1;for(i=t>=0?t:Math.max(r-Math.abs(t),0);r>i;i++)if(i in u&&u[i]===n)return i;return-1});Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(n){"use strict";var u,r,t,i;if(null==this)throw new TypeError;if(u=Object(this),r=u.length>>>0,0===r)return-1;for(t=r,arguments.length>1&&(t=Number(arguments[1]),t!=t?t=0:0!=t&&t!=1/0&&t!=-(1/0)&&(t=(t>0||-1)*Math.floor(Math.abs(t)))),i=t>=0?Math.min(t,r-1):r-Math.abs(t);i>=0;i--)if(i in u&&u[i]===n)return i;return-1});"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var h,u={},r={},d=0,y=[],g=!1,s={load:function(n,t,r){t.useLocalStorage?s._loadLocal(n,t,function(u,f){for(var o=[],e=0,h=n.length;h>e;e++)f[n[e]]||o.push(n[e]);o.length>0?s._fetch(o,t,function(n,t){i.extend(f,t);s._storeLocal(t);r(null,f)}):r(null,f)}):s._fetch(n,t,function(n,t){r(null,t)})},_loadLocal:function(n,t,r){var f={},e=(new Date).getTime(),u;window.localStorage&&(u=n.length,i.each(n,function(n,o){var s=i.localStorage.getItem("res_"+o);s&&(s=JSON.parse(s),s.i18nStamp&&s.i18nStamp+t.localStorageExpirationTime>e&&(f[o]=s));u--;0===u&&r(null,f)}))},_storeLocal:function(n){if(window.localStorage)for(var t in n)n[t].i18nStamp=(new Date).getTime(),i.localStorage.setItem("res_"+t,JSON.stringify(n[t]))},_fetch:function(n,t,r){var u=t.ns,f={},o,h,c,l;t.dynamicLoad?(o=function(n,t){r(null,t)},"function"==typeof t.customLoad?t.customLoad(n,u.namespaces,t,o):(h=e(t.resGetPath,{lng:n.join("+"),ns:u.namespaces.join("+")}),i.ajax({url:h,success:function(n){i.log("loaded: "+h);o(null,n)},error:function(n,t,r){i.log("failed loading: "+h);o("failed loading resource.json error: "+r)},dataType:"json",async:t.getAsync}))):(l=u.namespaces.length*n.length,i.each(u.namespaces,function(u,e){i.each(n,function(n,i){var u=function(n,t){n&&(c=c||[],c.push(n));f[i]=f[i]||{};f[i][e]=t;l--;0===l&&r(c,f)};"function"==typeof t.customLoad?t.customLoad(i,e,t,u):s._fetchOne(i,e,t,u)})}))},_fetchOne:function(n,t,r,u){var f=e(r.resGetPath,{lng:n,ns:t});i.ajax({url:f,success:function(n){i.log("loaded: "+f);u(null,n)},error:function(n,t,r){if(t&&200==t||n&&n.status&&200==n.status)i.error("There is a typo in: "+f);else if(t&&404==t||n&&n.status&&404==n.status)i.log("Does not exist: "+f);else{var e=t?t:n&&n.status?n.status:null;i.log(e+" when loading "+f)}u(r,{})},dataType:"json",async:r.getAsync})},postMissing:function(n,u,f,o,s){var v={},c,h,y,a,p,l;if(v[f]=o,c=[],"fallback"===t.sendMissingTo&&t.fallbackLng[0]!==!1)for(h=0;h<t.fallbackLng.length;h++)c.push({lng:t.fallbackLng[h],url:e(t.resPostPath,{lng:t.fallbackLng[h],ns:u})});else if("current"===t.sendMissingTo||"fallback"===t.sendMissingTo&&t.fallbackLng[0]===!1)c.push({lng:n,url:e(t.resPostPath,{lng:n,ns:u})});else if("all"===t.sendMissingTo)for(h=0,y=s.length;y>h;h++)c.push({lng:s[h],url:e(t.resPostPath,{lng:s[h],ns:u})});for(a=0,p=c.length;p>a;a++)l=c[a],i.ajax({url:l.url,type:t.sendType,data:v,success:function(){i.log("posted missing key '"+f+"' to: "+l.url);for(var t=f.split("."),n=0,e=r[l.lng][u];t[n];)e=e[t[n]]=n===t.length-1?o:e[t[n]]||{},n++},error:function(){i.log("failed posting missing key '"+f+"' to: "+l.url)},dataType:"json",async:t.postAsync})},reload:gt};var t={lng:void 0,load:"all",preload:[],lowerCaseLng:!1,returnObjectTrees:!1,fallbackLng:["dev"],fallbackNS:[],detectLngQS:"setLng",detectLngFromLocalStorage:!1,ns:"translation",fallbackOnNull:!0,fallbackOnEmpty:!1,fallbackToDefaultNS:!1,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:!1,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:!0,postAsync:!0,resStore:void 0,useLocalStorage:!1,localStorageExpirationTime:6048e5,dynamicLoad:!1,sendMissing:!1,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",defaultVariables:!1,reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:!1,indefiniteSuffix:"_indefinite",indefiniteNotFound:["indefinite_not_found",Math.random()].join(""),setJqueryExt:!0,defaultValueFromContent:!0,useDataAttrOptions:!1,cookieExpirationTime:void 0,useCookie:!0,cookieName:"i18next",cookieDomain:void 0,objectTreeKeyHandler:void 0,postProcess:void 0,parseMissingKey:void 0,missingKeyHandler:s.postMissing,shortcutFunction:"sprintf"},fi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},ei={create:function(n,t,i,r){var f,u;i?(u=new Date,u.setTime(u.getTime()+6e4*i),f="; expires="+u.toGMTString()):f="";r=r?"domain="+r+";":"";document.cookie=n+"="+t+f+";"+r+"path=/"},read:function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];" "==t.charAt(0);)t=t.substring(1,t.length);if(0===t.indexOf(r))return t.substring(r.length,t.length)}return null},remove:function(n){this.create(n,"",-1)}},oi={create:function(){},read:function(){return null},remove:function(){}},i={extend:n?n.extend:ot,deepExtend:nt,each:n?n.each:st,ajax:n?n.ajax:"undefined"!=typeof document?ct:function(){},cookie:"undefined"!=typeof document?ei:oi,detectLanguage:ui,escape:ht,log:function(n){t.debug&&"undefined"!=typeof console&&console.log(n)},error:function(n){"undefined"!=typeof console&&console.error(n)},getCountyIndexOfLng:function(n){var t=0;return("nb-NO"===n||"nn-NO"===n||"nb-no"===n||"nn-no"===n)&&(t=1),t},toLanguages:function(n){function r(n){var r=n,i;return"string"==typeof n&&n.indexOf("-")>-1?(i=n.split("-"),r=t.lowerCaseLng?i[0].toLowerCase()+"-"+i[1].toLowerCase():i[0].toLowerCase()+"-"+i[1].toUpperCase()):r=t.lowerCaseLng?n.toLowerCase():n,r}var s=this.log,u=[],e=t.lngWhitelist||!1,f=function(n){!e||e.indexOf(n)>-1?u.push(n):s("rejecting non-whitelisted language: "+n)},o,i;for("string"==typeof n&&n.indexOf("-")>-1?(o=n.split("-"),"unspecific"!==t.load&&f(r(n)),"current"!==t.load&&f(r(o[this.getCountyIndexOfLng(n)]))):f(r(n)),i=0;i<t.fallbackLng.length;i++)-1===u.indexOf(t.fallbackLng[i])&&t.fallbackLng[i]&&u.push(r(t.fallbackLng[i]));return u},regexEscape:function(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},regexReplacementEscape:function(n){return"string"==typeof n?n.replace(/\$/g,"$$$$"):n},localStorage:{setItem:function(n,t){if(window.localStorage)try{window.localStorage.setItem(n,t)}catch(r){i.log('failed to set value for key "'+n+'" to localStorage.')}},getItem:function(n,t){if(window.localStorage)try{return window.localStorage.getItem(n,t)}catch(r){return void i.log('failed to get value for key "'+n+'" from localStorage.')}}}};i.applyReplacement=e;var c=[["ach","Acholi",[1,2],1],["af","Afrikaans",[1,2],2],["ak","Akan",[1,2],1],["am","Amharic",[1,2],1],["an","Aragonese",[1,2],2],["ar","Arabic",[0,1,2,3,11,100],5],["arn","Mapudungun",[1,2],1],["ast","Asturian",[1,2],2],["ay","Aymará",[1],3],["az","Azerbaijani",[1,2],2],["be","Belarusian",[1,2,5],4],["bg","Bulgarian",[1,2],2],["bn","Bengali",[1,2],2],["bo","Tibetan",[1],3],["br","Breton",[1,2],1],["bs","Bosnian",[1,2,5],4],["ca","Catalan",[1,2],2],["cgg","Chiga",[1],3],["cs","Czech",[1,2,5],6],["csb","Kashubian",[1,2,5],7],["cy","Welsh",[1,2,3,8],8],["da","Danish",[1,2],2],["de","German",[1,2],2],["dev","Development Fallback",[1,2],2],["dz","Dzongkha",[1],3],["el","Greek",[1,2],2],["en","English",[1,2],2],["eo","Esperanto",[1,2],2],["es","Spanish",[1,2],2],["es_ar","Argentinean Spanish",[1,2],2],["et","Estonian",[1,2],2],["eu","Basque",[1,2],2],["fa","Persian",[1],3],["fi","Finnish",[1,2],2],["fil","Filipino",[1,2],1],["fo","Faroese",[1,2],2],["fr","French",[1,2],9],["fur","Friulian",[1,2],2],["fy","Frisian",[1,2],2],["ga","Irish",[1,2,3,7,11],10],["gd","Scottish Gaelic",[1,2,3,20],11],["gl","Galician",[1,2],2],["gu","Gujarati",[1,2],2],["gun","Gun",[1,2],1],["ha","Hausa",[1,2],2],["he","Hebrew",[1,2],2],["hi","Hindi",[1,2],2],["hr","Croatian",[1,2,5],4],["hu","Hungarian",[1,2],2],["hy","Armenian",[1,2],2],["ia","Interlingua",[1,2],2],["id","Indonesian",[1],3],["is","Icelandic",[1,2],12],["it","Italian",[1,2],2],["ja","Japanese",[1],3],["jbo","Lojban",[1],3],["jv","Javanese",[0,1],13],["ka","Georgian",[1],3],["kk","Kazakh",[1],3],["km","Khmer",[1],3],["kn","Kannada",[1,2],2],["ko","Korean",[1],3],["ku","Kurdish",[1,2],2],["kw","Cornish",[1,2,3,4],14],["ky","Kyrgyz",[1],3],["lb","Letzeburgesch",[1,2],2],["ln","Lingala",[1,2],1],["lo","Lao",[1],3],["lt","Lithuanian",[1,2,10],15],["lv","Latvian",[1,2,0],16],["mai","Maithili",[1,2],2],["mfe","Mauritian Creole",[1,2],1],["mg","Malagasy",[1,2],1],["mi","Maori",[1,2],1],["mk","Macedonian",[1,2],17],["ml","Malayalam",[1,2],2],["mn","Mongolian",[1,2],2],["mnk","Mandinka",[0,1,2],18],["mr","Marathi",[1,2],2],["ms","Malay",[1],3],["mt","Maltese",[1,2,11,20],19],["nah","Nahuatl",[1,2],2],["nap","Neapolitan",[1,2],2],["nb","Norwegian Bokmal",[1,2],2],["ne","Nepali",[1,2],2],["nl","Dutch",[1,2],2],["nn","Norwegian Nynorsk",[1,2],2],["no","Norwegian",[1,2],2],["nso","Northern Sotho",[1,2],2],["oc","Occitan",[1,2],1],["or","Oriya",[2,1],2],["pa","Punjabi",[1,2],2],["pap","Papiamento",[1,2],2],["pl","Polish",[1,2,5],7],["pms","Piemontese",[1,2],2],["ps","Pashto",[1,2],2],["pt","Portuguese",[1,2],2],["pt_br","Brazilian Portuguese",[1,2],2],["rm","Romansh",[1,2],2],["ro","Romanian",[1,2,20],20],["ru","Russian",[1,2,5],4],["sah","Yakut",[1],3],["sco","Scots",[1,2],2],["se","Northern Sami",[1,2],2],["si","Sinhala",[1,2],2],["sk","Slovak",[1,2,5],6],["sl","Slovenian",[5,1,2,3],21],["so","Somali",[1,2],2],["son","Songhay",[1,2],2],["sq","Albanian",[1,2],2],["sr","Serbian",[1,2,5],4],["su","Sundanese",[1],3],["sv","Swedish",[1,2],2],["sw","Swahili",[1,2],2],["ta","Tamil",[1,2],2],["te","Telugu",[1,2],2],["tg","Tajik",[1,2],1],["th","Thai",[1],3],["ti","Tigrinya",[1,2],1],["tk","Turkmen",[1,2],2],["tr","Turkish",[1,2],1],["tt","Tatar",[1],3],["ug","Uyghur",[1],3],["uk","Ukrainian",[1,2,5],4],["ur","Urdu",[1,2],2],["uz","Uzbek",[1,2],1],["vi","Vietnamese",[1],3],["wa","Walloon",[1,2],1],["wo","Wolof",[1],3],["yo","Yoruba",[1,2],2],["zh","Chinese",[1],3]],si={1:function(n){return Number(n>1)},2:function(n){return Number(1!=n)},3:function(){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)},5:function(n){return Number(0===n?0:1==n?1:2==n?2:n%100>=3&&10>=n%100?3:n%100>=11?4:5)},6:function(n){return Number(1==n?0:n>=2&&4>=n?1:2)},7:function(n){return Number(1==n?0:n%10>=2&&4>=n%10&&(10>n%100||n%100>=20)?1:2)},8:function(n){return Number(1==n?0:2==n?1:8!=n&&11!=n?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(1==n?0:2==n?1:7>n?2:11>n?3:4)},11:function(n){return Number(1==n||11==n?0:2==n||12==n?1:n>2&&20>n?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(0!==n)},14:function(n){return Number(1==n?0:2==n?1:3==n?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(10>n%100||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:0!==n?1:2)},17:function(n){return Number(1==n||n%10==1?0:1)},18:function(n){return Number(1==n?1:2)},19:function(n){return Number(1==n?0:0===n||n%100>1&&11>n%100?1:n%100>10&&20>n%100?2:3)},20:function(n){return Number(1==n?0:0===n||n%100>0&&20>n%100?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)}},f={rules:function(){for(var t={},n=c.length;n--;)t[c[n][0]]={name:c[n][1],numbers:c[n][2],plurals:si[c[n][3]]};return t}(),addRule:function(n,t){f.rules[n]=t},setCurrentLng:function(n){if(!f.currentRule||f.currentRule.lng!==n){var t=n.split("-");f.currentRule={lng:n,rule:f.rules[t[0]]}}},needsPlural:function(n,t){var r,u=n.split("-");return r=f.currentRule&&f.currentRule.lng===n?f.currentRule.rule:f.rules[u[i.getCountyIndexOfLng(n)]],r&&r.numbers.length<=1?!1:1!==this.get(n,t)},get:function(n,t){function r(t,i){var r,e,u;return(r=f.currentRule&&f.currentRule.lng===n?f.currentRule.rule:f.rules[t])?(e=r.plurals(r.noAbs?i:Math.abs(i)),u=r.numbers[e],2===r.numbers.length&&1===r.numbers[0]&&(2===u?u=-1:1===u&&(u=1)),u):1===i?"1":"-1"}var u=n.split("-");return r(u[i.getCountyIndexOfLng(n)],t)}},l={},et=function(n,t){l[n]=t},p=function(){function t(n){return Object.prototype.toString.call(n).slice(8,-1).toLowerCase()}function i(n,t){for(var i=[];t>0;i[--t]=n);return i.join("")}var n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){for(var u,o,f,s,l,a,v=1,y=n.length,h="",c=[],e=0;y>e;e++)if(h=t(n[e]),"string"===h)c.push(n[e]);else if("array"===h){if(f=n[e],f[2])for(u=r[v],o=0;o<f[2].length;o++){if(!u.hasOwnProperty(f[2][o]))throw p('[sprintf] property "%s" does not exist',f[2][o]);u=u[f[2][o]]}else u=f[1]?r[f[1]]:r[v++];if(/[^s]/.test(f[8])&&"number"!=t(u))throw p("[sprintf] expecting number but found %s",t(u));switch(f[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=f[7]?u.toExponential(f[7]):u.toExponential();break;case"f":u=f[7]?parseFloat(u).toFixed(f[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&f[7]?u.substring(0,f[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(f[8])&&f[3]&&u>=0?"+"+u:u;l=f[4]?"0"==f[4]?"0":f[4].charAt(1):" ";a=f[6]-String(u).length;s=f[6]?i(l,a):"";c.push(f[5]?u+s:s+u)}return c.join("")},n.cache={},n.parse=function(n){for(var r=n,t=[],f=[],o=0;r;){if(null!==(t=/^[^\x25]+/.exec(r)))f.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(r)))f.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(r)))throw"[sprintf] huh?";if(t[2]){o|=1;var e=[],u=t[2],i=[];if(null===(i=/^([a-z_][a-z_\d]*)/i.exec(u)))throw"[sprintf] huh?";for(e.push(i[1]);""!==(u=u.substring(i[0].length));)if(null!==(i=/^\.([a-z_][a-z_\d]*)/i.exec(u)))e.push(i[1]);else{if(null===(i=/^\[(\d+)\]/.exec(u)))throw"[sprintf] huh?";e.push(i[1])}t[2]=e}else o|=2;if(3===o)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";f.push(t)}r=r.substring(t[0].length)}return f},n}(),hi=function(n,t){return t.unshift(n),p.apply(null,t)};return et("sprintf",function(n,t,i){return i.sprintf?"[object Array]"===Object.prototype.toString.apply(i.sprintf)?hi(n,i.sprintf):"object"==typeof i.sprintf?p(n,i.sprintf):n:n}),u.init=w,u.setLng=rt,u.preload=lt,u.addResourceBundle=at,u.hasResourceBundle=vt,u.getResourceBundle=yt,u.addResource=tt,u.addResources=wt,u.removeResourceBundle=pt,u.loadNamespace=kt,u.loadNamespaces=it,u.setDefaultNamespace=bt,u.t=o,u.translate=o,u.exists=ft,u.detectLanguage=i.detectLanguage,u.pluralExtensions=f,u.sync=s,u.functions=i,u.lng=dt,u.addPostProcessor=et,u.applyReplacement=i.applyReplacement,u.options=t,n.i18n=u,n.t=u.t,u});e.config({paths:{text:"../Scripts/text",durandal:"../Scripts/durandal",plugins:"../Scripts/durandal/plugins",transitions:"../Scripts/durandal/transitions",scripts:"../Scripts",shared:"../SharedViewModels"},waitSeconds:60});n("jquery",[],function(){return jQuery});n("knockout",ko);n("main",["durandal/app","durandal/viewLocator","durandal/system","plugins/router","services/logger","durandal/binder","scripts/toky.emoji","scripts/i18next.amd.withJQuery-1.8.0.min"],function(n,t,i,r,u,f,e,o){var c=!1,s;-1!=navigator.appName.indexOf("Internet Explorer")&&-1!=navigator.appVersion.indexOf("MSIE 9")&&(c=!0);var l="en",a=window.navigator.userLanguage||window.navigator.language||l,v={detectFromHeaders:!1,lngWhitelist:["fr","en","nl","es","it","de","pt","pl","ru"],lng:a,fallbackLng:l,resGetPath:"/Locales/"+my.groupId+"/__lng__/__ns__.json",useCookie:!0,ns:{namespaces:["appv3"],defaultNs:"appv3"}},h={widthOnly:!0,maxFontPixels:13,minFontPixels:1};e.init("/Content/images/emojis");s=e.get({style:my.emojiStyle.toLowerCase()});n.configurePlugins({router:!0,dialog:!0,widget:{kinds:["expander"]}});n.start().then(function(){toastr.options.positionClass="toast-top-right";toastr.options.backgroundpositionClass="toast-bottom-right";toastr.options.timeOut=2e3;n.title="TokyWoky Pro";r.handleInvalidRoute=function(n){u.logError("No Route Found",n,"main",!0)};t.useConvention();ko.bindingHandlers.customhtml={update:function(n,t){var i,r;if(t()){i=ko.utils.unwrapObservable(t());(void 0===i||null===i)&&(i="");r="<strong><a><span>";r=(((r||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var u=i.replace(/<!--[\s\S]*?-->/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(n,t){return r.indexOf("<"+t.toLowerCase()+">")>-1?n:""});return n.innerHTML=u,u}}};ko.bindingHandlers.truncatedText={update:function(n,t,i){var r=ko.bindingHandlers.customhtml.update(n,t),u=ko.utils.unwrapObservable(i().length)||ko.bindingHandlers.truncatedText.defaultLength,f;r=r.replace(/<a\b[^>]*>/i,"").replace(/<\/a>/i,"");f=r.length>u?r.substring(0,Math.min(r.length,u))+"...":r;n.innerHTML=f},defaultLength:15};ko.bindingHandlers.emojify={update:function(n,t,i){i().customhtml&&ko.unwrap(i().customhtml);i().text&&ko.unwrap(i().text);s.emojifyer&&s.emojifyer().run(n)},after:["customhtml"]};ko.bindingHandlers.emojipicker={init:function(n,t,i){var r=t();s.emojiPicker&&s.emojiPicker().set(n,function(){i().value(n.value)},r)}};ko.bindingHandlers.scroll={executingCallback:[],page:[],scrollKoScrollhandler:"scroll.ko.scrollHandler",init:function(n,t,i){ko.bindingHandlers.scroll.executingCallback[n]=!1;ko.utils.domNodeDisposal.addDisposeCallback(n,function(){$(n).off(ko.bindingHandlers.scroll.scrollKoScrollhandler);ko.bindingHandlers.scroll.executingCallback[n]=!1});var u=i().scrollOptions,f=void 0!==u.onWindow?u.onWindow:!1;f&&(n=window);ko.bindingHandlers.scroll.page[n]=r.activeInstruction().fragment},update:function(n,t,i){var u=i().scrollOptions,s=u.offset?u.offset:"0",h=u.loadFunc,f=void 0!==u.onWindow?u.onWindow:!1,e,o;f&&(n=window);e=void 0!==u.onlyScrollOnPage&&null!==u.onlyScrollOnPage?u.onlyScrollOnPage:!0;o=function(){$(n).off(ko.bindingHandlers.scroll.scrollKoScrollhandler)};$(n).off(ko.bindingHandlers.scroll.scrollKoScrollhandler);$(n).on(ko.bindingHandlers.scroll.scrollKoScrollhandler,function(){var t,i,u;if(!ko.bindingHandlers.scroll.executingCallback[n]){if(t=$(n)[0].scrollHeight,(f&&(t=$(document).height()),e)&&(i=r.activeInstruction().fragment,ko.bindingHandlers.scroll.page[n]!==i))return o(),void 0;u=t-s<=$(n).height()+$(n).scrollTop();u&&(ko.bindingHandlers.scroll.executingCallback[n]||(ko.bindingHandlers.scroll.executingCallback[n]=!0,h(),setTimeout(function(){ko.bindingHandlers.scroll.executingCallback[n]=!1},2e3)))}})}};ko.bindingHandlers.textfill={update:function(n,t,i){i().text&&ko.unwrap(i().text);var r=t();(null===r||void 0===r)&&(r=h);r.widthOnly=void 0!==r.widthOnly&&null!==r.widthOnly?r.widthOnly:h.widthOnly;r.maxFontPixels=void 0!==r.maxFontPixels&&null!==r.maxFontPixels?r.maxFontPixels:h.maxFontPixels;r.minFontPixels=void 0!==r.minFontPixels&&null!==r.minFontPixels?r.minFontPixels:h.minFontPixels;setTimeout(function(){var t=n.firstChild,i,u;null!==t&&void 0!==t&&(3===t.nodeType&&0===n.childElementCount&&(i=document.createDocumentFragment(),u=document.createElement("span"),u.innerHTML=t.nodeValue,i.appendChild(u),t=n.replaceChild(i,t)),$(n).textfill(r))},0)}};o.init(v,function(){f.binding=function(n,t){$(t).i18n()};ko.bindingHandlers.i18n={update:function(n,t,i){var r,u,f,e=ko.unwrap(t()),s=ko.toJS(i.get("i18nOptions")||{});e.indexOf(";")?$.each(e.split(";"),function(t,i){0===i.indexOf("[")&&(u=i.split("]"),i=u[1],f=u[0].substr(1,u[0].length-1));r=o.t(i,s);void 0===f?r.match(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/)?n.innerHTML=r:r.match(/&(?:[a-z]+|#x?\d+);/gi)?n.innerHTML=r:document.all?n.innerText=r:n.textContent=r:(n.setAttribute(f,r),"placeholder"==f&&c&&($(n).val(r),$(n).bind("click",function(){$(n).val("")})))}):(0===e.indexOf("[")&&(u=e.split("]"),e=u[1],f=u[0].substr(1,u[0].length-1)),r=o.t(e,s),void 0===f?r.match(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/)?n.innerHTML=r:r.match(/&(?:[a-z]+|#x?\d+);/gi)?n.innerHTML=r:document.all?n.innerText=r:n.textContent=r:n.setAttribute(f,r))}}}).done(function(){n.setRoot("viewmodels/shell")});window.i18n=o;moment.locale("fr-FR",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"il y a %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une année",yy:"%d ans"},ordinal:function(n){return n+(1===n?"er":"ème")},week:{dow:1,doy:4}});moment.locale(a)})});var h=8,c=128,l=1,a=1,v=1,y="NFKC";jQuery.getScriptWithCache=function(n){return jQuery.ajax({dataType:"script",cache:!0,url:n})};e.config({paths:{text:"../Scripts/text",durandal:"../Scripts/durandal",plugins:"../Scripts/durandal/plugins",transitions:"../Scripts/durandal/transitions",scripts:"../Scripts",shared:"../SharedViewModels"}});n("jquery",[],function(){return jQuery});n("knockout",ko);n("main.min",["durandal/app","durandal/viewLocator","durandal/system","plugins/router","services/logger","durandal/binder","scripts/i18next.amd.withJQuery-1.8.0.min"],function(n,t,i,r,u,f,e){i.debug(!0);var o="en",s=window.navigator.userLanguage||window.navigator.language||o,h={detectFromHeaders:!1,lngWhitelist:["fr","en","nl","es","it"],lng:s,fallbackLng:o,ns:"appv3",resGetPath:"/Locales/__lng__/__ns__.json",useCookie:!0};n.configurePlugins({router:!0,dialog:!0,widget:{kinds:["expander"]}});n.start().then(function(){toastr.options.positionClass="toast-top-right";toastr.options.backgroundpositionClass="toast-bottom-right";toastr.options.timeOut=2e3;n.title="TokyWoky Pro";r.handleInvalidRoute=function(n){u.logError("No Route Found",n,"main",!0)};t.useConvention();ko.bindingHandlers.customhtml={init:function(n,t){var r,u,f,i="<strong><a><span>";i=(((i||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");u=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi;f=/<!--[\s\S]*?-->/gi;r=t().replace(f,"").replace(u,function(n,t){return i.indexOf("<"+t.toLowerCase()+">")>-1?n:""});n.innerHTML=r},update:function(){}};e.init(h,function(){f.binding=function(n,t){$(t).i18n()};ko.bindingHandlers.i18n={update:function(n,t,i){var r,u,f,o=ko.unwrap(t()),s=ko.toJS(i.get("i18nOptions")||{});o.indexOf(";")?$.each(o.split(";"),function(t,i){0===i.indexOf("[")&&(u=i.split("]"),i=u[1],f=u[0].substr(1,u[0].length-1));r=e.t(i,s);void 0===f?r.match(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/)?n.innerHTML=r:r.match(/&(?:[a-z]+|#x?\d+);/gi)?n.innerHTML=r:document.all?n.innerText=r:n.textContent=r:n.setAttribute(f,r)}):(0===o.indexOf("[")&&(u=o.split("]"),o=u[1],f=u[0].substr(1,u[0].length-1)),r=e.t(o,s),void 0===f?r.match(/<(\w+)((?:\s+\w+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/)?n.innerHTML=r:r.match(/&(?:[a-z]+|#x?\d+);/gi)?n.innerHTML=r:document.all?n.innerText=r:n.textContent=r:n.setAttribute(f,r))}}}).done(function(){n.setRoot("viewmodels/shell")});window.i18n=e;moment.locale("fr-FR",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"il y a %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"une année",yy:"%d ans"},ordinal:function(n){return n+(1===n?"er":"ème")},week:{dow:1,doy:4}});moment.locale(s)})});n("plugins/http",["jquery","knockout"],function(n,t){return{callbackParam:"callback",get:function(t,i){return n.ajax(t,{data:i})},jsonp:function(t,i,r){return-1==t.indexOf("=?")&&(r=r||this.callbackParam,t+=-1==t.indexOf("?")?"?":"&",t+=r+"=?"),n.ajax({url:t,dataType:"jsonp",data:i})},post:function(i,r){return n.ajax({url:i,data:t.toJSON(r),type:"POST",contentType:"application/json",dataType:"json"})}}});n("viewmodels/shell",["durandal/system","plugins/router","services/logger","plugins/http","durandal/app"],function(n,i,r,u,f){function o(){null!=$.cookie("islogged")?e.loadUserInfo().then(function(){e.isReady(!0)}):(window.parent.postMessage("tokySetUserId-0","*"),e.isReady(!0))}function h(){var r,n;return(e.isReady(!1),e.requiresUserInteractionForLogin(!1),navigator&&"Android"==navigator.userAgent&&"undefined"!=typeof Android||"undefined"!=typeof toky_ios_token)&&(r=toky_ios_token||Android.get_toky_android_token(),r&&$.ajax({type:"POST",url:"/api/v2/token?grantType=check&accessToken="+r,async:!1})),null==$.cookie("thirdPartyCookiesAllowed")&&$.cookie("thirdPartyCookiesAllowed","true"),window.parent.postMessage("tokyGetUserNickname","*"),window.addEventListener&&addEventListener("message",function(n){"string"!=typeof n.data||-1==n.data.indexOf("tokySendUserNickname-")||t(n.data.replace("tokySendUserNickname-",""))||"null"==n.data.replace("tokySendUserNickname-","")||e.userNickname(n.data.replace("tokySendUserNickname-",""))},!1),window.parent.postMessage("tokyGetClientUserId","*"),window.addEventListener&&addEventListener("message",function(n){"string"!=typeof n.data||null!=e.clientUserId||-1==n.data.indexOf("tokySendClientUserId-")||t(n.data.replace("tokySendClientUserId-",""))||"null"==n.data.replace("tokySendClientUserId-","")||(e.clientUserId=n.data.replace("tokySendClientUserId-",""))},!1),window.parent.postMessage("tokyGetCustomVars","*"),window.addEventListener&&addEventListener("message",function(n){if("string"==typeof n.data&&-1!=n.data.indexOf("tokySendCustomVars-")&&!t(n.data.replace("tokySendCustomVars-",""))&&"null"!=n.data.replace("tokySendCustomVars-","")){var r=n.data.replace("tokySendCustomVars-",""),u=JSON.parse(r),i=u.toky_type;"undefined"!=typeof i&&null!=i&&(e.hasCustomerService=i,2==i&&$("body").addClass("customerService"))}},!1),window.parent.postMessage("tokyGetMobileFullscreen","*"),window.addEventListener&&addEventListener("message",function(n){if("string"==typeof n.data&&-1!=n.data.indexOf("tokyGetMobileFullscreen-")&&!t(n.data.replace("tokyGetMobileFullscreen-",""))&&"null"!=n.data.replace("tokyGetMobileFullscreen-","")){var i=n.data.replace("tokyGetMobileFullscreen-","");1==i?e.showMinimizeButton(!1):e.showMinimizeButton(!0)}},!1),window.parent.postMessage("tokyIsCustomerServiceRibbonEnabled","*"),window.addEventListener&&addEventListener("message",function(n){if("string"==typeof n.data&&-1!=n.data.indexOf("tokyIsCustomerServiceRibbonEnabled-")&&!t(n.data.replace("tokyIsCustomerServiceRibbonEnabled-",""))&&"null"!=n.data.replace("tokyIsCustomerServiceRibbonEnabled-","")){var i=n.data.replace("tokyIsCustomerServiceRibbonEnabled-","");"true"==i&&e.ribbonCustomerServiceWidgetEnabled(!0)}},!1),null!=$.cookie("thirdPartyCookiesAllowed")?e.thirdPartyCookiesBlocked(!1):e.thirdPartyCookiesBlocked(!0),e.isSSOEnabled?e.getSSOData().then(function(){return e.ssoDatas()?(e.isMinimized()?o():e.thirdPartyCookiesBlocked()?(e.requiresUserInteractionForLogin(!0),i.navigate("userInteractionLogin",{trigger:!0,replace:!0})):e.connectSso().catch(function(){o()}),void 0):(o(),void 0)}):o(),n=device.noConflict(),e.deviceType(n),e.isMobile(n.mobile()),e.isDesktop(n.desktop()),e.isTablet(n.tablet()),"custompage.content"!==i18n.t("custompage.content")&&"default"!==i18n.t("custompage.content")&&e.isCustomPageEnabled(!0),l()}function c(){e.getWhichMinimized();e.listenForLogout();e.listenForResized();$(document).on("focus","input,textarea",function(n){var t=n.target;(e.isMobile()||e.isTablet())&&setTimeout(function(){e.isTablet()&&$(".feedContain").height("200%");var n=$(t).position().top+$(t).outerHeight();n>100&&$(".feedContainWrapper-home").stop().animate({scrollTop:n},500,"swing",function(){})},1500);window.parent.postMessage("tokyInputFocus","*")});$(document).on("focusout","input,textarea",function(n){n.target;setTimeout(function(){e.isTablet()&&$(".feedContain").height("100%")},1500);window.parent.postMessage("tokyInputLostFocus","*")})}function l(){var n=i.navigate;return i.navigate=function(t,i,r){return"undefined"==typeof r&&(r=!1),f.trigger("menu:question:bubble:close"),!r&&e.currentView&&e.viewHistory.push({fragment:e.currentView.fragment,options:e.currentView.options}),e.currentView={fragment:t,options:i},n(t,i)},i.navigateBack=function(){if(e.viewHistory.length<=0)return!1;var n=e.viewHistory.pop();return n?i.navigate(n.fragment,n.options,!0):!1},i.map([{route:"",moduleId:"viewmodels/index",title:"Index"},{route:"index(/:force)",moduleId:"viewmodels/index",title:"Index"},{route:"anim",moduleId:"viewmodels/anim",title:"Anim"},{route:"home",moduleId:"viewmodels/home",title:"Home"},{route:"minimized",moduleId:"viewmodels/minimized",title:"Minimisé"},{route:"chat(/:id)",moduleId:"viewmodels/chat",title:"Chat"},{route:"login",moduleId:"viewmodels/login",title:"Login"},{route:"register(/:type)",moduleId:"viewmodels/register",title:"Inscription"},{route:"settings",moduleId:"viewmodels/settings",title:"Settings"},{route:"profile/:id",moduleId:"viewmodels/profile",title:"Profile"},{route:"messages",moduleId:"viewmodels/messages",title:"Mes messages"},{route:"faq",moduleId:"viewmodels/faq",title:"FAQ"},{route:"customPage",moduleId:"viewmodels/customPage",title:"Custom Page"},{route:"userInteractionLogin",moduleId:"viewmodels/userInteractionLogin",title:"User Interaction Login"}]).buildNavigationModel().activate()}function s(n){var s=i.activeInstruction().fragment,h=0,u=0,t,a,v,f,o,y,r;if(e.isCustomPageEnabled()&&(u=$(".ribbonContainer").innerHeight()+1),t=$("#contentWrapper").children("[data-active-view='true']")[0],"messages"===s){var p=$(t).find(".miniProfileContain").innerHeight(),c=0,l=$(t).find(".notifPasswordNotChosen:visible");1===l.length&&(c=l.innerHeight());h=p+c}"chat"===s.substring(0,4)&&(a=$(t).find(".chatCmdContainer").innerHeight(),u+=a);v=$(".appProfileMenu").innerHeight();f=0;f=e.isMobile()&&e.deviceType().ios()?window.screen.height:$(window).height();o=0;e.isMobile()&&e.deviceType().ios()&&(o=110);y=f-v-h-u-o;r=$(t).find(".feedContainWrapper-"+n);r.height(y);r.perfectScrollbar({wheelPropagation:!1,swipePropagation:!1,suppressScrollX:!0});r.perfectScrollbar("update")}var e={activate:h,attached:c,router:i,groupId:my.groupId,groupName:decodeURI(my.groupName),zoneId:my.zoneId,zoneName:my.zoneName,isZoneSetByDefault:my.isZoneSetByDefault,gotAltAnalytics:my.gotAltAnalytics,deactivateQuestionToAdminIfAdminsUnavailable:my.deactivateQuestionToAdminIfAdminsUnavailable,logoUrl:my.logoUrl,forceTuto:my.forceTuto,postsCanHaveImages:my.postsCanHaveImages,hasCustomerService:my.hasCustomerService,showAnswersInModule:my.showAnswersInModule,showMinimizeButton:ko.observable(!0),isSSOEnabled:my.isSSOEnabled,registerViewParams:function(){},isAdmin:ko.observable(!1),isCertified:ko.observable(!1),isMinimized:ko.observable(my.isMinimized),click2ChatIntegration:my.click2ChatIntegration,customerServiceUrl:my.customerServiceUrl,getBigMinimizedToky:my.getBigMinimizedToky,isWhiteLabelled:my.isWhiteLabelled,whiteLabelSubdomain:my.whiteLabelSubdomain,postToAdminOnlyIfAdminsNotConnected:my.postToAdminOnlyIfAdminsNotConnected,sendPostToAdminsByDefault:my.sendPostToAdminsByDefault,languageCategory:my.languageCategory,tokyProHub:"",clientUserId:null,userNickname:ko.observable(null),profilePic:ko.observable(null),userId:ko.observable(null),userEmail:ko.observable(null),isPasswordChosen:ko.observable(!0),isLogged:ko.observable(!1),hasTokyWokySso:ko.observable(!1),isRegistered:ko.observable(!1),isReady:ko.observable(!1),userLevels:ko.observable([]),nbPeopleHelped:ko.observable(0),nbPoints:ko.observable(0),nbThanks:ko.observable(0),pageBeforeMinimized:ko.observable(null),thirdPartyCookiesBlocked:ko.observable(!1),requiresUserInteractionForLogin:ko.observable(!1),chatRoomIdCurrent:ko.observable(""),userIdsBlocked:ko.observableArray([]),allNotifsInbox:ko.observableArray([]),nbNotifsInbox:ko.observable(0),nbNotifsTeam:ko.observable(0),gotPostNotif:ko.observable(!1),isMinimizing:!1,nbErrorsLogin:0,isCoach:ko.observable(!1),deviceType:ko.observable(null),isMobile:ko.observable(null),isDesktop:ko.observable(null),isTablet:ko.observable(null),isModule:!0,isCustomPageEnabled:ko.observable(!1),ssoDatas:ko.observable(null),myDiscussionHighlightedTutorial:ko.observable(null),goToDiscussionFromNotifMinimized:!1,chatRoomIdFromMinimized:0,currentView:null,viewHistory:[],ribbonCustomerServiceWidgetEnabled:ko.observable(!1),displayCustomerServiceWidget:ko.observable(!1),canAnswerOnlyWithSso:function(){return e.isSSOEnabled&&my.canAnswerOnlyWithSso},popup:{current:null,isOpened:ko.observable(!1),type:ko.observable(null),data:ko.observable(null),forbidClose:ko.observable(!1),blockedView:function(){for(var r,t=["register","login"],n=0;n<t.length;++n)if(r=t[n],i.activeInstruction().fragment.substring(0,r.length)===r)return!0;return!1},close:function(n){("undefined"==typeof n||n===!1)&&e.popup.forbidClose()||(e.popup.current&&(e.popup.current.closing(),e.popup.current=null),"Thank"===e.popup.type()&&$.cookie("tokyThankPopupClosed","true",{expires:7}),e.popup.isOpened(!1),e.popup.type(null),e.popup.forbidClose(!1))},openThankPopup:function(n){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("Thank"),e.popup.data(n),f.trigger("popupthanks:activate"))},openWelcomePopup:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("Welcome"),e.popup.data())},openFeedbackPopup:function(n){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("Feedback"),e.popup.data(n))},openFaqPopup:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("Faq"))},openMinimizedhelpPopup:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("MinimizedHelp"))},openYouBecameCoachPopup:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("YouBecameCoach"))},openYouNeedToRegisterToAnswer:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("YouNeedToRegisterToAnswer"))},openTutorial:function(){e.isMinimized()||e.popup.blockedView()||(e.popup.isOpened(!0),e.popup.type("Tutorial"))},openRegisterPopup:function(n){e.isMinimized()||(e.popup.data(n),e.popup.isOpened(!0),e.popup.type("Register"))},openLoginPopup:function(){e.isMinimized()||(e.popup.isOpened(!0),e.popup.type("Login"))},openRegisteredPopup:function(n){e.isMinimized()||(e.popup.data(n),e.popup.isOpened(!0),e.popup.type("Registered"))}},analytics:{amplitude:void 0!==window.amplitude&&null!==window.amplitude,track:function(n,t){e.analytics.amplitude&&amplitude.getInstance().logEvent(n,t)},setProperties:function(n){e.analytics.amplitude&&amplitude.getInstance().setUserProperties(n)},setPropertiesOnce:function(n){var t,i;if(e.analytics.amplitude)for(t in n)n.hasOwnProperty(t)&&(i=(new amplitude.Identify).setOnce(t,n[t]),amplitude.getInstance().identify(i))},setGroup:function(n,t){e.analytics.amplitude&&amplitude.getInstance().setGroup(n,t)},increment:function(n,t){if(e.analytics.amplitude){var i=(new amplitude.Identify).add(n,t);amplitude.getInstance().identify(i)}},append:function(n,t){if(e.analytics.amplitude){var i=(new amplitude.Identify).append(n,t);amplitude.getInstance().identify(i)}}},resizeFeedContainWrapper:function(n){if(n){s(n);var t;e.isMobile()||(window.onresize=function(){clearTimeout(t);t=setTimeout(s(n),100)})}},goToAsk:function(){i.navigate("ask",{trigger:!0,replace:!0})},goToIndex:function(){i.navigate("index",{trigger:!0,replace:!0})},goToHome:function(n){"home"===i.activeInstruction().fragment.substring(0,4)&&f.trigger("home:reload");i.navigate("home",{trigger:!0,replace:!0});"undefined"!=n&&null!=n&&(e.popup.close(),e.popup.openWelcomePopup())},goToHomeWithEvent:function(){e.popup.close();e.goToHome();e.gaEvent("tokywokywidgetv3","menu bar","home")},goToHomeNoReload:function(){e.popup.close();i.navigate("home",{trigger:!0,replace:!0})},goToHomeTutoAnswer:function(){i.navigate("home/answer",{trigger:!0,replace:!0});f.trigger("home:tutoAnswer")},goToHomeTutoAsk:function(){i.navigate("home/ask",{trigger:!0,replace:!0})},goToChat:function(n){n=n?n:"";i.navigate("chat/"+n,{trigger:!0,replace:!0})},goToMessages:function(){e.popup.close();"messages"===i.activeInstruction().fragment.substring(0,8)&&f.trigger("discussions:reload");i.navigate("messages",{trigger:!0,replace:!0});e.gaEvent("tokywokywidgetv3","menu bar","messages")},goToLogin:function(){e.popup.openLoginPopup();e.gaEvent("tokywokywidgetv3","menu bar","login")},goToCoachRegister:function(){e.popup.openRegisterPopup("coach")},goToRegister:function(){e.popup.openRegisterPopup("registered")},goToSettings:function(){i.navigate("settings",{trigger:!0,replace:!0})},goToCoachArea:function(){e.isWhiteLabelled?window.open("https://"+e.whiteLabelSubdomain+".tokywoky.com/coach/account/register/"+e.zoneId+"?origin=widget","_blank"):window.open("/coach/account/register/"+e.zoneId+"?origin=widget","_blank")},goToFaq:function(){i.navigate("faq",{trigger:!0,replace:!0})},goToCustomPage:function(){e.ribbonCustomerServiceWidgetEnabled()?e.displayCustomerServiceWidget()?($("#contentWrapper").removeClass("customerService"),e.displayCustomerServiceWidget(!1),f.trigger("ask:switchToCustomerServiceChat",!1)):($("#contentWrapper").addClass("customerService"),e.displayCustomerServiceWidget(!0),f.trigger("ask:switchToCustomerServiceChat",!0)):i.navigate("customPage",{trigger:!0,replace:!0})},goToPreviousView:function(){i.navigateBack()},popupLogFirstOk:function(){e.loadUserInfo().then(function(){f.trigger("home:sendWaitingAnswerIfAvailable");f.trigger("ask:sendWaitingPostIfAvailable")});null!=$.cookie("thirdPartyCookiesAllowed")?e.thirdPartyCookiesBlocked(!1):e.thirdPartyCookiesBlocked(!0)},popupLogin:function(n){n?(e.loadUserInfo(),e.goToHome()):r.logError("Veuillez vérifier que les informations saisies sont correctes",null,"shell",!0);null!=$.cookie("thirdPartyCookiesAllowed")?e.thirdPartyCookiesBlocked(!1):e.thirdPartyCookiesBlocked(!0)},popupLogout:function(){e.loadUserInfo();null!=$.cookie("thirdPartyCookiesAllowed")?e.thirdPartyCookiesBlocked(!1):e.thirdPartyCookiesBlocked(!0)},connect:function(n){var r=Q.defer(),f;if(null!=$.cookie("islogged")&&!n)return e.loadUserInfo().then(function(){r.resolve()}),r.promise;if(e.isSSOEnabled&&e.ssoDatas())return e.connectSso().then(function(){r.resolve()}).catch(function(){e.isSSOEnabled=!1;e.connect().then(function(){r.resolve()})}),r.promise;if(null!=$.cookie("thirdPartyCookiesAllowed")){if(f={GroupId:e.groupId},t(e.userNickname())||(f.nickname=e.userNickname()),e.nbErrorsLogin>5)return r.resolve(),i.navigate("userInteractionLogin",{trigger:!0,replace:!0}),r.promise;u.post("/api/account/visitor",f).success(function(){e.nbErrorsLogin=0;e.isLogged(!0);t(e.clientUserId)||$.ajax({url:"/api/account/me",type:"PUT",data:{HostUserId:e.clientUserId,GroupId:e.groupId}}).success(function(){}).error(function(n){JSON.parse(n.responseText)});e.loadUserInfo().then(function(){r.resolve()})}).error(function(n){JSON.parse(n.responseText);e.nbErrorsLogin=e.nbErrorsLogin+1;r.resolve()})}else window.open("/Popup/FirstLog/"+e.groupId,"TokyWoky","width=0,toolbar=no,resizable=no,scrollbars=no,height=0,top=0,left=0"),window.focus(),setTimeout(function(){null!=$.cookie("islogged")?(e.isReady(!0),e.requiresUserInteractionForLogin(!1)):(e.requiresUserInteractionForLogin(!0),i.navigate("userInteractionLogin",{trigger:!0,replace:!0}));r.resolve()},1e3);return r.promise},getSSOData:function(){var n=Q.defer();return window.parent.postMessage("tokyGetSSODatas","*"),addEventListener("message",function(t){if("string"==typeof t.data&&-1!==t.data.indexOf("tokySetSSODatas-")){if("tokySetSSODatas-null"===t.data)return e.isReady(!0),n.reject(new Error("No SSO data")),void 0;var i=t.data.replace("tokySetSSODatas-","");e.ssoDatas(JSON&&JSON.parse(i)||$.parseJSON(i));n.resolve()}},!1),n.promise},connectSso:function(){var n=Q.defer(),t;return(e.isReady(!1),!e.isSSOEnabled)?(e.isReady(!0),n.reject(new Error("No SSO enabled")),n.promise):window.addEventListener?e.ssoDatas()?(null!=$.cookie("thirdPartyCookiesAllowed")?(t={GroupId:e.groupId,TokyAuthApiKey:e.ssoDatas().tokyAuthApiKey,TokyAuthMessage:e.ssoDatas().tokyAuthMessage,TokyAuthHmac:e.ssoDatas().tokyAuthHmac,TokyAuthTimestamp:e.ssoDatas().tokyAuthTimestamp,Type:"SsoTokyWoky"},u.post("/api/account",t).success(function(){e.isLogged(!0);e.loadUserInfo().then(function(){e.isReady(!0);n.resolve()})}).error(function(t){JSON.parse(t.responseText);e.isReady(!0);n.resolve()})):(window.open("/Popup/FirstLogSSO/"+e.groupId+"?tokyAuthApiKey="+e.ssoDatas().tokyAuthApiKey+"&tokyAuthMessage="+e.ssoDatas().tokyAuthMessage+"&tokyAuthHmac="+e.ssoDatas().tokyAuthHmac+"&tokyAuthTimestamp="+e.ssoDatas().tokyAuthTimestamp,"Toky pro","width=0,toolbar=no,resizable=no,scrollbars=no,height=0,top=0,left=0"),window.focus(),setTimeout(function(){null!=$.cookie("islogged")?(e.isReady(!0),e.requiresUserInteractionForLogin(!1)):(e.requiresUserInteractionForLogin(!0),i.navigate("userInteractionLogin",{trigger:!0,replace:!0}));n.resolve()},1e3)),n.promise):(n.reject(new Error("No SSO data")),n.promise):(e.isReady(!0),n.reject(new Error("No addEventListener")),n.promise)},connectSignalR:function(){my.isDebug||($.connection.hub.url="https://www.tokywoky.com/signalr");e.tokyProHub=$.connection.tokyProHub;e.tokyProHub.client={sendChat:e.receiveChat,closeChat:function(n){f.trigger("chat:reload",n)},sendNotif:function(){e.loadUserInfo()},sendAnswer:e.sendAnswer,sendPost:e.sendPost,newNotification:e.newNotification,isTyping:function(n){f.trigger("chat:otherIsTyping",n)}};$.connection.hub.stop();$.connection.hub.start().done(function(){})},minimize:function(){e.popup.close();e.isMinimizing||(e.isMinimized()?window.parent.postMessage("tokyshow","*"):(e.pageBeforeMinimized("index"),window.parent.postMessage("tokyhide","*")),e.isMinimized(!e.isMinimized()),e.isMinimizing=!0,setTimeout(function(){e.isMinimizing=!1},1500))},getNotifsInbox:function(n){u.get("/api/v3/profile/count",{groupId:e.groupId}).success(function(t){e.allNotifsInbox(t);t.length>0&&e.analytics.track("answer:received",{groupId:e.groupId,groupName:e.groupName,categoryId:e.zoneId,categoryName:e.zoneName,notifsCount:t.length,isRealtime:"undefined"!=n&&n?"true":"false",currentView:e.currentViewName(),minimized:e.isMinimized(),platform:"Widget"})})},getNotifs:function(){u.get("/api/v3/notification/"+e.groupId+"/thanks/last").success(function(n){null==n||"AnswerAcceptedByAdmin"!=n.Type||e.isCoach()?(null!=n||e.nbPoints()>=90&&!e.isCoach()&&null==$.cookie("tokyThankPopupClosed"))&&e.popup.openThankPopup(n):e.popup.openYouBecameCoachPopup();null!=n&&e.nbThanks(n.NbThanks);f.trigger("userdetails:reload",e.userId())})},receiveChat:function(n){n.GroupId==e.groupId&&(n.ChatRoomId==e.chatRoomIdCurrent()?f.trigger("chat:newMessage",n):e.getNotifsInbox(!0))},sendAnswer:function(n){n.GroupId==e.groupId&&f.trigger("home:newAnswer",n)},sendPost:function(n){n.GroupId==e.groupId&&f.trigger("home:newPost",n)},getUnseenFeedbacks:function(){u.get("/api/feedbacks/unseen").success(function(n){n.length>0&&(e.popup.isOpened()||e.popup.openFeedbackPopup(n))})},newNotification:function(n){"Feedback"===n.TypeName&&n.GroupId==e.groupId&&(e.popup.isOpened()||e.popup.openFeedbackPopup([n]))},pageview:function(n){"function"==typeof ga&&ga("send","pageview","/tokywokywidgetv3/"+n)},gaEvent:function(n,t,i,r){if(null==r&&(r=!0),"function"==typeof ga){ga("send","event",n,t,i);var u="event-"+n+"-"+t;null!=i&&(u="/"+u+"-"+i);ga("send","pageview",u);e.gotAltAnalytics&&r&&ga("altAnalytics.send","event",n,t,i)}window.customTracking&&r&&window.customTracking(n,t,i)},currentViewName:function(){var n=i.activeInstruction().fragment,t=n.indexOf("/");return-1===t?n:n.substring(0,t)},loadUserInfo:function(){e.userNickname("");var n=Q.defer();return u.get("/api/account/me?groupId="+e.groupId).success(function(r){e.userEmail(r.UserEmail);e.userId(null);e.userId(r.UserId);e.isPasswordChosen(r.IsPasswordChosen);e.isLogged(!0);e.hasTokyWokySso(r.HasTokyWokySso);window.parent.postMessage("tokySetUserId-"+r.UserId,"*");var f="/api/user/me";null!=e.zoneId&&(f=f+"/?groupCategoryId="+e.zoneId);u.get(f).success(function(i){if(e.isCoach(i.IsCoach),e.profilePic(i.ProfilePicture),e.nbPoints(i.NbPoints),e.userLevels(i.Levels),e.nbPeopleHelped(i.NbPeopleHelped),e.nbThanks(i.NbThanks),e.isAdmin(i.IsAdmin),e.isCertified(i.IsCertified),t(i.Nickname)){e.isRegistered(!1);e.userNickname(i.Nickname);try{"undefined"!=window.parent&&"undefined"!==window.parent.toky_localUserName&&null!=window.parent.toky_localUserName&&e.userNickname(window.parent.toky_localUserName)}catch(r){}}else e.isRegistered(!0),e.userNickname(i.Nickname);n.resolve()}).error(function(t){0!==t.status&&0!==t.readyState&&(e.nbErrorsLogin=e.nbErrorsLogin+1,e.nbErrorsLogin<3?e.connect(!0).then(function(){n.resolve()}):(e.requiresUserInteractionForLogin(!0),i.navigate("userInteractionLogin",{trigger:!0,replace:!0}),n.resolve()))});u.get("/api/userblock").success(function(n){e.userIdsBlocked(n)});e.getNotifsInbox();setTimeout(function(){e.getUnseenFeedbacks()},2e3);e.getNotifs();e.connectSignalR();e.analytics.amplitude&&amplitude.setUserId(e.userId())}).error(function(t){0!==t.status&&0!==t.readyState&&(e.nbErrorsLogin=e.nbErrorsLogin+1,e.nbErrorsLogin<3?e.connect(!0).then(function(){n.resolve()}):(e.requiresUserInteractionForLogin(!0),i.navigate("userInteractionLogin",{trigger:!0,replace:!0}),n.resolve()))}),n.promise},clearUserInfo:function(){e.userNickname("");e.userEmail("");e.userId(null);e.isPasswordChosen(!1);e.isLogged(!1);e.isRegistered(!1);e.isCoach(!1);e.profilePic("");e.nbPoints(0);e.userLevels([]);e.nbPeopleHelped(0);e.nbThanks(0);e.isAdmin(!1);e.isCertified(!1);e.nbErrorsLogin=0},getWhichMinimized:function(){window.addEventListener&&(addEventListener("message",function(n){if("string"==typeof n.data&&-1!==n.data.indexOf("tokyGetWhichImageMinimized-")&&"tokyGetWhichImageMinimized-null"!==n.data){var t=n.data.replace("tokyGetWhichImageMinimized-","");e.analytics.track("minimized:image:click",{groupId:e.groupId,groupName:e.groupName,categoryId:e.zoneId,categoryName:e.zoneName,platform:"Widget",minimizedImage:t})}},!1),window.parent.postMessage("tokyGetWhichImageMinimized","*"))},logout:function(){var n=Q.defer();return e.thirdPartyCookiesBlocked()?(window.open("/Popup/Logout/"+e.groupId,"Toky pro","width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100"),n.resolve()):u.get("/Account/JsonLogout",{GroupId:e.groupId}).success(function(){e.clearUserInfo();e.connect(!1).then(function(){e.loadUserInfo()});e.gaEvent("tokywokywidgetv3","menu bar","logout",!1);n.resolve()}),n.promise},listenForLogout:function(){window.addEventListener&&addEventListener("message",function(n){"string"==typeof n.data&&-1!==n.data.indexOf("tokyLogout")&&e.logout().then(function(){window.parent.postMessage("tokyhide","*");window.parent.postMessage("tokyReloadFrame","*")})})},listenForResized:function(){window.addEventListener&&addEventListener("message",function(n){"string"==typeof n.data&&-1!==n.data.indexOf("tokyResized")&&e.resizeFeedContainWrapper(e.currentViewName())})}};return e.popup.isOpened.subscribe(function(n){if(n){var t=e.popup.forbidClose();e.popup.forbidClose(!0);setTimeout(function(){e.popup.forbidClose(t)},2e3)}}),e.isMinimized.subscribe(function(n){if(n)i.navigate("minimized",{trigger:!0,replace:!0}),e.gaEvent("tokywokywidgetv3","menu bar","close"),e.analytics.track("minimizewidget",{groupId:e.groupId,groupName:e.groupName,categoryId:e.zoneId,categoryName:e.zoneName,platform:"Widget"});else{if(e.isSSOEnabled){if(e.thirdPartyCookiesBlocked())return i.navigate("userInteractionLogin",{trigger:!0,replace:!0}),void 0;e.connectSso().catch(function(){o()})}null==e.pageBeforeMinimized()?i.navigate("index",{trigger:!0,replace:!0}):i.navigate(e.pageBeforeMinimized(),{trigger:!0,replace:!0});e.gaEvent("tokywokywidgetv3","minimized","click open");e.analytics.track("openwidget",{groupId:e.groupId,groupName:e.groupName,categoryId:e.zoneId,categoryName:e.zoneName,platform:"Widget"})}}),e.allNotifsInbox.subscribe(function(n){null!=n&&(e.nbNotifsInbox(n.length),i.activeInstruction()&&"messages"===i.activeInstruction().fragment.substring(0,11)&&f.trigger("discussions:reload"))}),e.userId.subscribe(function(n){$.cookie("Toky_CurrentUserId",n,{expires:390,path:"/"})}),window.shell=e,e});Array.prototype.filter||(Array.prototype.filter=function(n){"use strict";var t,u,r;if(void 0===this||null===this)throw new TypeError;if(t=Object(this),u=t.length>>>0,"function"!=typeof n)throw new TypeError;for(var f=[],e=arguments[1],i=0;u>i;i++)i in t&&(r=t[i],n.call(e,r,i,t)&&f.push(r));return f});ko.observableArray.fn.subscribeArrayChanged=function(n,t){var i=void 0;this.subscribe(function(n){i=n.slice(0)},void 0,"beforeChange");this.subscribe(function(r){for(var f=ko.utils.compareArrays(i,r),u=0,e=f.length;e>u;u++)switch(f[u].status){case"deleted":t&&t(f[u].value);break;case"added":n&&n(f[u].value)}i=void 0})},function(){"use strict";function r(t){return n.lastIndex=0,n.test(t)?'"'+t.replace(n,function(n){var t=u[n];return"string"==typeof t?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function t(n,u,f,e){var h,c,l,a,s,o=u[n];switch(o&&"object"==typeof o&&"function"==typeof o.toPrunedJSON&&(o=o.toPrunedJSON(n)),typeof o){case"string":return r(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(0>=f||-1!==i.indexOf(o))return'"-pruned-"';if(i.push(o),s=[],"[object Array]"===Object.prototype.toString.apply(o)){for(a=Math.min(o.length,e),h=0;a>h;h+=1)s[h]=t(h,o,f-1,e)||"null";return 0===s.length?"[]":"["+s.join(",")+"]"}for(c in o)if(Object.prototype.hasOwnProperty.call(o,c))try{l=t(c,o,f-1,e);l&&s.push(r(c)+":"+l)}catch(v){}return 0===s.length?"{}":"{"+s.join(",")+"}"}}var i,f=6,e=50,n,u;Date.prototype.toPrunedJSON=Date.prototype.toJSON;String.prototype.toPrunedJSON=String.prototype.toJSON;n=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};JSON.pruned=function(n,r,u){return i=[],r=r||f,u=u||e,t("",{"":n},r,u)};ko.extenders.scrollFollow=function(n,t){return n.subscribe(function(){var n=document.querySelector(t);null!==n&&n.scrollTop===n.scrollHeight-n.clientHeight&&setTimeout(function(){n.scrollTop=n.scrollHeight-n.clientHeight},0)}),n};ko.bindingHandlers.enterkey={init:function(n,t,i,r){var u=i();$(n).on("keydown",function(t){var f=t.which||t.keyCode,i;return 13!==f||t.ctrlKey||t.shiftKey?!0:(i=t.target,i.blur(),u.enterkey.call(r,r,i,n),!1)})}}}();n("viewmodels/UserInteractionLogin",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i){function u(){t.pageview("UserInteractionLogin");r.error(!1);r.loginInProgress(!1)}function f(){}var r={activate:u,attached:f,error:ko.observable(!1),loginInProgress:ko.observable(!1),login:function(){r.error(!1);r.loginInProgress(!0);t.connect().then(function(){setTimeout(function(){return r.loginInProgress(!1),null!=$.cookie("islogged")?(t.isReady(!0),t.requiresUserInteractionForLogin(!1),i.navigate("home",{trigger:!0,replace:!0}),r.error(!1),void 0):(r.error(!0),void 0)},1e3)})}};return r});n("viewmodels/_facebookConnect",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,i,r,u){function e(n){n&&(n.userPassword&&(f.userPassword=n.userPassword),n.userMail&&(f.userMail=n.userMail),n.action&&(f.action=n.action),n.successCallback&&(f.successCallback=n.successCallback),f.facebook.isLoading(!1),f.facebook.error(null),f.facebook.subError(null))}function o(){f.action.subscribe(function(n){"normalLogin"===n&&f.facebook.clearError()})}function s(n){if(i.thirdPartyCookiesBlocked()){var t=window.open("/Popup/Login/","Toky pro","width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100");t.onload=function(){t.login(f.userMail(),f.userPassword())}}else f.facebook.subErrorIsLoading(!0),u.post("/Account/JsonLogin",n).success(function(n){n?(f.action("normalLogin"),f.userMail(""),f.userPassword(""),f.successCallback(),i.gaEvent("tokywokywidgetv3","login","success")):(f.userPassword(""),f.facebook.subError(null),setTimeout(function(){f.facebook.subError({code:401})},0));f.facebook.subErrorIsLoading(!1)}).error(function(){f.userPassword("");f.facebook.subError(null);setTimeout(function(){f.facebook.subError({code:401})},0);f.facebook.subErrorIsLoading(!1)})}var f={activate:e,attached:o,userPassword:function(){},userMail:function(){},action:function(){},successCallback:function(){},popupsBlocked:ko.observable(null),shell:i,facebook:{error:ko.observable(null),subError:ko.observable(null),subErrorIsLoading:ko.observable(!1),isLoading:ko.observable(!1),accessToken:ko.observable(null),connect:function(){var n=Q.defer(),t;return f.popupsBlocked()?(n.resolve(),n.promise):"undefined"==typeof FB?(n.resolve(),n.promise):"undefined"==typeof FB.login?(n.resolve(),n.promise):(f.action("facebookConnect"),f.facebook.clearError(),f.facebook.isLoading(!0),t=setTimeout(function(){f.popupsBlocked(!0);f.facebook.isLoading(!1)},1e4),i.analytics.track("login:facebook",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget"}),FB.login(function(r){if("connected"===r.status){var u=new Date,e=r.authResponse.accessToken;f.facebook.accessToken(e);u.setTime(u.getTime()+1e3*r.authResponse.expiresIn);$.cookie("facebookAccessToken",e,{expires:u,path:"/"});i.analytics.track("login:facebook:connected",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget"})}else f.action("normalLogin");f.facebook.isLoading(!1);f.facebook.clearError();clearTimeout(t);n.resolve()},{scope:"public_profile,email",auth_type:"rerequest"}),n.promise)},addLink:function(){f.popupsBlocked()||f.facebook.connect().then(function(){t(f.facebook.accessToken())||(f.facebook.isLoading(!0),u.post("/api/usersocial",{Token:f.facebook.accessToken(),Type:"SsoFacebook",GroupId:i.groupId}).success(function(){f.action("normalLogin");f.facebook.isLoading(!1);f.userMail("");f.userPassword("");f.successCallback();i.gaEvent("tokywokywidgetv3","login","success")}).error(function(n){switch(f.facebook.isLoading(!1),n.status){case 300:f.facebook.error({code:n.status,facebookUserEmail:n.responseText});f.facebook.subError(null);f.userMail(n.responseText);f.userPassword("");break;case 400:f.facebook.error({code:n.status});f.facebook.subError(null);f.userMail("");f.userPassword("");break;default:f.facebook.error({code:n.status})}}))})},clearError:function(){f.userPassword("");f.facebook.error(null);f.facebook.subError(null);f.popupsBlocked(null)}},login:function(){s({Email:f.userMail(),Password:f.userPassword()})}};return f});n("viewmodels/_globalOwnProfile",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t,i){function r(){}function u(){}return{activate:r,attached:u,shell:t,tabChatMoreOpened:ko.observable(!1),groupId:t.groupId,groupName:t.groupName,zoneId:t.zoneId,zoneName:t.zoneName,maxPointsToBecomeCoach:90,nbPoints:ko.computed(function(){return t.nbPoints()}),isCoach:ko.computed(function(){return t.isCoach()}),nbThanks:ko.computed(function(){return t.nbThanks()}),userId:ko.computed(function(){return t.userId()}),minimize:function(){t.minimize()},goToLogin:function(){t.goToLogin()},goToCoachArea:function(){t.goToCoachArea()},goToRegister:function(){t.popup.openRegisterPopup("coach")},logout:function(){t.logout()},isRegistered:ko.computed(function(){return t.isRegistered()}),openOwnProfile:function(){i.navigate("profile/"+t.userId(),{trigger:!0,replace:!0})}}});n("viewmodels/_login",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r){function f(){t.pageview("login");t.resizeFeedContainWrapper("login");t.analytics.track("login:landing",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget"});u.isRegistered()&&i.navigate("messages",{trigger:!0,replace:!0})}function e(){var n=window.navigator.userLanguage||window.navigator.language||"en";$.getScriptWithCache("//connect.facebook.net/"+n+"/sdk.js").done(function(){}).fail(function(){})}function o(){t.resizeFeedContainWrapper("login")}function s(n){if(u.error(!1),$(":input.connectInput").trigger("change"),t.analytics.track("login:submit",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget"}),t.thirdPartyCookiesBlocked()){var i=window.open("/Popup/Login/","Toky pro","width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100");i.onload=function(){i.login(u.userMail(),u.userPassword())}}else r.post("/Account/JsonLogin",n).success(function(n){n?u.successCallback():(u.action("normalLogin"),u.userPassword(""),u.error(!0))}).error(function(n){t.analytics.track("login:submit:error",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",code:n.statusCode})})}var u={activate:f,attached:e,compositionComplete:o,shell:t,userMail:ko.observable(""),userPassword:ko.observable(""),action:ko.observable("normalLogin"),error:ko.observable(!1),isRegistered:ko.computed(function(){return t.isRegistered()}),userName:ko.computed(function(){return t.userNickname()}),goToPreviousView:t.goToPreviousView,goToRegister:function(){t.goToRegister()},send:function(){s({Email:u.userMail(),Password:u.userPassword()})},goBack:function(){u.action("normalLogin")},successCallback:function(){u.action("normalLogin");u.userMail("");u.userPassword("");u.error(!1);t.analytics.track("login:success",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget"});t.loadUserInfo();t.popup.close(!0);t.goToHome();t.gaEvent("tokywokywidgetv3","login","success")}};return u});n("viewmodels/_menu",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r,u){function e(){f.questionSentBubbleInfo({});f.showQuestionSentBubble(!1);f.emailRegisteredMessage(!1);f.userMailInvalidMessage(!1);f.showEmailInput(!1);f.showOrSubmitEmailText(i18n.t("ask.leavemyemail"));u.off("menu:question:sent");u.on("menu:question:sent",function(n){(f.showQuestionSentBubble()||f.isRegistered())&&2!=t.hasCustomerService||(f.questionSentBubbleInfo(n),f.showQuestionSentBubble(!0),f.emailRegisteredMessage(!1),f.userMailInvalidMessage(!1),f.showEmailInput(!1),f.showOrSubmitEmailText(i18n.t("ask.leavemyemail")))});u.off("menu:question:bubble:close");u.on("menu:question:bubble:close",function(){f.closeQuestionSentBubble();f.emailRegisteredMessage(!1);f.userMailInvalidMessage(!1);f.showEmailInput(!1);f.showOrSubmitEmailText(i18n.t("ask.leavemyemail"))})}function s(){}var f={activate:e,attached:s,shell:t,groupName:t.groupName,questionSentBubbleInfo:ko.observable({}),showQuestionSentBubble:ko.observable(!1),showEmailInput:ko.observable(!1),showOrSubmitEmailText:ko.observable(i18n.t("ask.leavemyemail")),notificationBarClosedByUser:ko.observable(!1),userMailHasFocus:ko.observable(!1),userMailHadFocusOnce:ko.observable(!1),userMail:ko.observable(""),userMailInvalidMessage:ko.observable(!1),emailRegisteredMessage:ko.observable(!1),isEmailRegisteringLoading:ko.observable(!1),isRegistered:ko.computed(function(){return t.isRegistered()}),myDiscussionHighlightedTutorial:ko.computed(function(){return t.myDiscussionHighlightedTutorial()}),gotPostNotif:ko.computed(function(){return t.gotPostNotif()}),nbNotifsInbox:ko.computed(function(){return t.nbNotifsInbox()}),showNotificationBar:ko.computed(function(){return t.nbNotifsInbox()>0&&!f.notificationBarClosedByUser()}),showMinimizeButton:ko.computed(function(){return t.showMinimizeButton()}),minimize:function(){t.analytics.track("menu:close",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),platform:"Widget"});t.minimize()},route:ko.computed(function(){return i.activeInstruction().fragment}),goToMessages:function(){f.closeQuestionSentBubble();t.goToMessages()},goToHomeWithEvent:function(){f.closeQuestionSentBubble();t.goToHomeWithEvent()},goToRegister:function(){f.closeQuestionSentBubble();t.goToRegister()},goToPreviousView:function(){t.goToPreviousView()===!1&&t.router.navigate("home",{replace:!0,trigger:!0},!0)},goToFaq:function(){t.analytics.track("menu:help:icon",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.closeQuestionSentBubble();t.goToFaq()},clickMessagesIcon:function(){t.analytics.track("menu:messages",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),type:"icon",notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.goToMessages()},clickMessagesHighlightIcon:function(){t.analytics.track("menu:messages",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),type:"highlightIcon",notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.goToMessages()},clickNotificationBar:function(){t.analytics.track("menu:messages",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),type:"notificationBar",notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.goToMessages()},closeNotificationBar:function(){f.notificationBarClosedByUser(!0)},closeQuestionSentBubble:function(n,i){i&&t.analytics.track("menu:questionsent:bubble:close",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.questionSentBubbleInfo({});f.showQuestionSentBubble(!1)},showOrSubmitEmail:function(){return f.showEmailInput()?(f.submitEmailForQuestion(),void 0):(f.showEmailInput(!0),$(".askLeaveEmailInputContain input").focus(),f.showOrSubmitEmailText(">"),void 0)},submitEmailForQuestion:function(){return t.analytics.track("menu:questionsent:bubble:email:submit",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:f.nbNotifsInbox(),platform:"Widget"}),f.userMailHadFocusOnce()?f.IsEmailValid()?f.questionSentBubbleInfo().Id&&null!==f.questionSentBubbleInfo().Id?(f.isEmailRegisteringLoading(!0),$.ajax({url:"/api/v2/questions/"+f.questionSentBubbleInfo().Id,type:"PUT",data:{id:f.questionSentBubbleInfo().Id,email:f.userMail()}}).success(function(){t.analytics.track("menu:questionsent:bubble:email:success",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:f.nbNotifsInbox(),platform:"Widget"});f.emailRegisteredMessage(!0);f.userMailInvalidMessage(!1);f.isEmailRegisteringLoading(!1)}).error(function(){f.isEmailRegisteringLoading(!1);f.userMailInvalidMessage(!0);t.analytics.track("menu:questionsent:bubble:email:error",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:f.nbNotifsInbox(),platform:"Widget"})}),void 0):(f.emailRegisteredMessage(!0),f.userMailInvalidMessage(!1),void 0):(f.userMailInvalidMessage(!0),void 0):(f.userMailInvalidMessage(!0),void 0)}};return f.IsEmailValid=ko.computed(function(){return f.userMailHadFocusOnce()?o(f.userMail())?(f.userMailInvalidMessage(!1),!0):!1:!0}),f.userMailHasFocus.subscribe(function(n){n&&!f.userMailHadFocusOnce()&&f.userMailHadFocusOnce(!0)}),f.showQuestionSentBubble.subscribe(function(n){t.popup.isOpened(n)}),f});n("viewmodels/_popupFeedback",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function r(){t.pageview("popup/feedback");var n=[];$.each(i.data(),function(t,i){n.push(i.ObjectId)});$.ajax({url:"/api/feedbacks/seen",type:"PUT",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{"":n}}).success(function(){}).error(function(){i.close()})}function u(){}var i={activate:r,attached:u,shell:t,zoneName:t.zoneName,zoneId:t.zoneId,data:ko.computed(function(){return t.popup.data()}),close:function(){t.popup.close()}};return i});n("viewmodels/_popupLogin",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.pageview("popup/login")}function r(){}return{activate:i,attached:r,shell:t,close:t.popup.close}});n("viewmodels/_popupMinimizedHelp",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function r(){i.close();t.goToRegister()}function u(){}function f(){}var i={activate:u,attached:f,shell:t,close:t.popup.close,isRegistered:t.isRegistered,goToRegister:r};return i});n("viewmodels/_popupRegister",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.pageview("popup/register")}function r(){}return{activate:i,attached:r,shell:t,close:t.popup.close,data:ko.computed(function(){return t.popup.data()})}});n("viewmodels/_popupRegistered",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function r(){}function u(){}var i={activate:r,attached:u,shell:t,maxPointsToBecomeCoach:90,maxThanksToBecomeCoach:3,close:t.popup.close,data:ko.computed(function(){return t.popup.data()}),goToHome:function(){i.close();t.goToHome()}};return i});n("viewmodels/_popupThank",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,i,r,u,f){function e(){f.off("popupthanks:activate");f.on("popupthanks:activate",function(){null!=i.popup.data()&&(i.nbThanks(i.popup.data().NbThanks),i.nbPoints(i.popup.data().Points));i.pageview("popup/thank")})}function o(){}return{activate:e,attached:o,shell:i,maxPointsToBecomeCoach:90,maxThanksToBecomeCoach:3,zoneName:i.zoneName,zoneId:i.zoneId,userChoseCredentials:ko.computed({read:function(){return!t(i.userNickname())&&!t(i.userEmail())&&i.isPasswordChosen()},deferEvaluation:!0}),goToCoachArea:function(){i.popup.close();i.goToCoachArea()},goToVisitorRegister:function(){i.popup.close();i.goToRegister()},goToRegister:function(){i.popup.close();i.goToCoachRegister()},goToHome:function(){i.popup.close();i.goToHomeNoReload()},nbPoints:ko.computed(function(){return i.nbPoints()}),nbThanks:ko.computed(function(){return i.nbThanks()}),isCoach:ko.computed(function(){return i.isCoach()}),data:ko.computed(function(){return i.popup.data()}),close:function(){$.cookie("tokyThankPopupClosed","true",{expires:7});i.popup.close()}}});n("viewmodels/_popupTutorial",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function r(){t.pageview("popup/tutorial");i.step(1);t.analytics.track("popup:tutorial:open",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",currentStep:i.step()})}function u(){var n=$(".tutorial");n.perfectScrollbar({wheelPropagation:!1,swipePropagation:!1})}var i={activate:r,attached:u,shell:t,close:function(){t.analytics.track("popup:tutorial:close",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",currentStep:i.step()});t.popup.close()},step:ko.observable(1),canDoNext:ko.computed({read:function(){return i.step()<3},deferEvaluation:!0}),canDoPrevious:ko.computed({read:function(){return i.step()>1},deferEvaluation:!0}),next:function(){i.canDoNext()&&i.step(i.step()+1);t.analytics.track("popup:tutorial:next",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",currentStep:i.step()})},previous:function(){i.canDoPrevious()&&i.step(i.step()-1);t.analytics.track("popup:tutorial:previous",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",currentStep:i.step()})}};return i});n("viewmodels/_popupWelcome",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.pageview("popup/welcome")}function r(){}return{activate:i,attached:r,shell:t,groupName:t.groupName,logoUrl:t.logoUrl,data:ko.computed(function(){return t.popup.data()}),close:function(){t.popup.close()}}});n("viewmodels/_popupYouBecameCoach",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.popup.forbidClose(!0);t.pageview("popup/youBecameCoach")}function r(){}return{activate:i,attached:r,shell:t,goToCoachArea:function(){t.popup.forbidClose(!1);t.popup.close();t.goToCoachArea()}}});n("viewmodels/_popupYouNeedToRegisterToAnswer",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.pageview("popup/youNeedToRegisterToAnswer")}function r(){}return{activate:i,attached:r,shell:t,close:function(){t.popup.close()}}});n("viewmodels/_register",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r,u){function c(n){f.isLoading(!1);f.userMail("");f.userMailHasFocus(!1);f.userPassword("");f.userPasswordHasFocus(!1);f.userNickname("");f.userNicknameHasFocus(!1);f.error("");u.trigger("menu:question:bubble:close");"undefined"!=typeof n&&null!==n?f.registerType(n):f.registerType("registered");t.pageview("register");t.gaEvent("tokywokywidgetv3","register","go to register page");t.resizeFeedContainWrapper("register");t.analytics.track("register:landing",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",type:f.registerType()})}function l(){var n=window.navigator.userLanguage||window.navigator.language||"en";$.getScriptWithCache("//connect.facebook.net/"+n+"/sdk.js").done(function(){}).fail(function(){})}function a(){t.resizeFeedContainWrapper("register")}function h(){var n,i;if("registered"===f.registerType()&&!f.isNicknameValid())return f.userNicknameValid(!1),e("BadNicknameLength"),void 0;if(!o(f.userMail()))return f.userMailValid(!1),e("InvalidEmail"),void 0;if(n=s(f.userPassword()),null!==n)return f.userPasswordValid(!1),e(n),void 0;if(!f.cguAccepted())return e("cguUnchecked"),void 0;t.analytics.track("register:submit",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",type:f.registerType(),marketingEmails:f.enableMarketingMails()});i={Email:f.userMail(),Password:f.userPassword(),Nickname:f.userNickname()};f.isLoading(!0);f.error("");$.ajax({url:"/api/account/me",type:"PUT",data:i}).success(function(){f.successCallback();t.gaEvent("tokywokywidgetv3","register","success")}).error(function(n){f.isLoading(!1);var i=JSON.parse(n.responseText);e(i.Message);t.analytics.track("register:submit:error",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget",type:f.registerType(),code:n.statusCode,reason:i.Message,marketingEmails:f.enableMarketingMails()})});f.enableMarketingMails()&&r.post("/api/MarketingMailsAccepted?id="+t.groupId).success(function(){t.gaEvent("tokywokywidgetv3","register","optin mail")})}function e(n){f.error("");setTimeout(function(){f.error(n)},0)}var f={activate:c,attached:l,compositionComplete:a,shell:t,groupName:t.groupName,userMail:ko.observable(""),userMailValid:ko.observable(!0),userMailHasFocus:ko.observable(!1),userPassword:ko.observable(""),userPasswordValid:ko.observable(!0),userPasswordHasFocus:ko.observable(!1),userNickname:ko.observable(""),userNicknameValid:ko.observable(!0),userNicknameHasFocus:ko.observable(!1),action:ko.observable("normalLogin"),error:ko.observable(""),enableMarketingMails:ko.observable(!1),cguAccepted:ko.observable(!1),isLoading:ko.observable(!1),registerType:ko.observable("registered"),goToPreviousView:t.goToPreviousView,send:function(){t.isLogged()?h():t.connect(!1).then(function(){h()})},goToLogin:function(){t.goToLogin()},goBack:function(){f.action("normalLogin")},successCallback:function(){switch(f.userMail(""),f.userPassword(""),f.userNickname(""),f.enableMarketingMails(!1),f.cguAccepted(!0),f.error(""),t.analytics.track("register:success",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,platform:"Widget"}),t.loadUserInfo(),f.registerType()){case"coach":r.post("/coach/api/categories",{Id:t.zoneId,GroupId:t.groupId}).success(function(){f.isLoading(!1);t.popup.close();t.popup.openYouBecameCoachPopup()}).error(function(){t.popup.close()});break;case"registered":f.isLoading(!1);t.popup.close();t.popup.openRegisteredPopup({NbThanks:t.nbThanks(),Points:t.nbPoints()})}},isNicknameValid:function(){if(void 0===f.userNickname()||null===f.userNickname())return!1;var n=f.userNickname().trim();return n.length<3||n.length>32?!1:!0}};return f.userNicknameHasFocus.subscribe(function(){f.userNicknameValid(!0)}),f.userPasswordHasFocus.subscribe(function(){f.userPasswordValid(!0)}),f.userMailHasFocus.subscribe(function(){f.userMailValid(!0)}),f});n("viewmodels/_ribbon",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t){function i(){}function r(){}return{activate:i,attached:r,shell:t,goToCustomPage:function(){"function"==typeof ribbonCustomAction?window.ribbonCustomAction():t.goToCustomPage()}}}),function(t,i){"use strict";typeof n=="function"&&n.amd?n("scripts/simplestorage",i):t.simpleStorage=i()}(this,function(){"use strict";function c(){window.localStorage.setItem("__simpleStorageInitTest","tmpval");window.localStorage.removeItem("__simpleStorageInitTest");s();r();l();"addEventListener"in window&&window.addEventListener("pageshow",function(n){n.persisted&&e()},!1);f=!0}function l(){"addEventListener"in window?window.addEventListener("storage",e,!1):document.attachEvent("onstorage",e)}function e(){try{s()}catch(n){f=!1;return}r()}function s(){var t=localStorage.simpleStorage;try{n=JSON.parse(t)}catch(i){n={}}u=localStorage.simpleStorage?String(localStorage.simpleStorage).length:0}function i(){try{localStorage.simpleStorage=JSON.stringify(n);u=localStorage.simpleStorage?String(localStorage.simpleStorage).length:0}catch(t){return t}return!0}function r(){var s,u,l,e,f,o=Infinity,c=0;if(clearTimeout(t),n&&n.__simpleStorage_meta&&n.__simpleStorage_meta.TTL){for(s=+new Date,f=n.__simpleStorage_meta.TTL.keys||[],e=n.__simpleStorage_meta.TTL.expire||{},u=0,l=f.length;u<l;u++)if(e[f[u]]<=s)c++,delete n[f[u]],delete e[f[u]];else{e[f[u]]<o&&(o=e[f[u]]);break}o!=Infinity&&(t=setTimeout(r,Math.min(o-s,2147483647)));c&&(f.splice(0,c),h(),i())}}function o(i,u){var o=+new Date,f,e;if(u=Number(u)||0,u!==0)if(n.hasOwnProperty(i)){if(n.__simpleStorage_meta||(n.__simpleStorage_meta={}),n.__simpleStorage_meta.TTL||(n.__simpleStorage_meta.TTL={expire:{},keys:[]}),n.__simpleStorage_meta.TTL.expire[i]=o+u,n.__simpleStorage_meta.TTL.expire.hasOwnProperty(i))for(f=0,e=n.__simpleStorage_meta.TTL.keys.length;f<e;f++)n.__simpleStorage_meta.TTL.keys[f]==i&&n.__simpleStorage_meta.TTL.keys.splice(f);for(f=0,e=n.__simpleStorage_meta.TTL.keys.length;f<e;f++)n.__simpleStorage_meta.TTL.expire[n.__simpleStorage_meta.TTL.keys[f]]>o+u&&n.__simpleStorage_meta.TTL.keys.splice(f,0,i);!1||n.__simpleStorage_meta.TTL.keys.push(i)}else return!1;else if(n&&n.__simpleStorage_meta&&n.__simpleStorage_meta.TTL){if(n.__simpleStorage_meta.TTL.expire.hasOwnProperty(i))for(delete n.__simpleStorage_meta.TTL.expire[i],f=0,e=n.__simpleStorage_meta.TTL.keys.length;f<e;f++)if(n.__simpleStorage_meta.TTL.keys[f]==i){n.__simpleStorage_meta.TTL.keys.splice(f,1);break}h()}return clearTimeout(t),n&&n.__simpleStorage_meta&&n.__simpleStorage_meta.TTL&&n.__simpleStorage_meta.TTL.keys.length&&(t=setTimeout(r,Math.min(Math.max(n.__simpleStorage_meta.TTL.expire[n.__simpleStorage_meta.TTL.keys[0]]-o,0),2147483647))),!0}function h(){var t=!1,i=!1,r;if(!n||!n.__simpleStorage_meta)return t;n.__simpleStorage_meta.TTL&&!n.__simpleStorage_meta.TTL.keys.length&&(delete n.__simpleStorage_meta.TTL,t=!0);for(r in n.__simpleStorage_meta)if(n.__simpleStorage_meta.hasOwnProperty(r)){i=!0;break}return i||(delete n.__simpleStorage_meta,t=!0),t}var n=!1,u=0,f=!1,t=null;try{c()}catch(a){}return{version:"0.1.2",canUse:function(){return!!f},set:function(t,r,u){if(t=="__simpleStorage_meta"||!n)return!1;if(typeof r=="undefined")return this.deleteKey(t);u=u||{};try{r=JSON.parse(JSON.stringify(r))}catch(f){return f}return n[t]=r,o(t,u.TTL||0),i()},get:function(t){return n?n.hasOwnProperty(t)&&t!="__simpleStorage_meta"&&this.getTTL(t)?n[t]:void 0:!1},deleteKey:function(t){return n?t in n?(delete n[t],o(t,0),i()):!1:!1},setTTL:function(t,r){return n?(o(t,r),i()):!1},getTTL:function(t){var i;return n?n.hasOwnProperty(t)?n.__simpleStorage_meta&&n.__simpleStorage_meta.TTL&&n.__simpleStorage_meta.TTL.expire&&n.__simpleStorage_meta.TTL.expire.hasOwnProperty(t)?(i=Math.max(n.__simpleStorage_meta.TTL.expire[t]-+new Date||0,0),i||!1):Infinity:!1:!1},flush:function(){if(!n)return!1;n={};try{return localStorage.removeItem("simpleStorage"),!0}catch(t){return t}},index:function(){if(!n)return!1;var i=[];for(var t in n)n.hasOwnProperty(t)&&t!="__simpleStorage_meta"&&i.push(t);return i},storageSize:function(){return u}}});n("viewmodels/ask",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app","scripts/simplestorage"],function(n,i,r,u,f){function c(){e.email(i.userEmail());f.off("ask:sendWaitingPostIfAvailable");f.on("ask:sendWaitingPostIfAvailable",function(){e.postWaiting()&&null!=$.cookie("islogged")&&e.send()});e.postsCanHaveImages&&(window.parent.postMessage("tokyGetWebSiteImages","*"),window.addEventListener&&addEventListener("message",function(n){if("string"==typeof n.data&&-1!=n.data.indexOf("tokySendWebsiteImages-")){var t=n.data.replace("tokySendWebsiteImages-","").split("|");t.length>0&&""==t[0]&&(t=[]);e.imagesUrl(t)}},!1));window.parent.postMessage("tokyGetCustomVars","*");window.addEventListener&&addEventListener("message",function(n){if("string"==typeof n.data&&-1!=n.data.indexOf("tokySendCustomVars-")&&!t(n.data.replace("tokySendCustomVars-",""))&&"null"!=n.data.replace("tokySendCustomVars-","")){var i=n.data.replace("tokySendCustomVars-","");e.customVars=JSON.parse(i)}},!1);f.off("ask:switchToCustomerServiceChat");f.on("ask:switchToCustomerServiceChat",function(n){n?(e.sendToCommunity(!1),e.sendToAdmins(!0)):(e.sendToCommunity(!0),e.sendToAdmins(!1))})}function l(){}function a(){if(i.isMinimized())r.navigate("/minimized",{trigger:!0,replace:!0});else i.isZoneSetByDefault||({}.zoneId=i.zoneId),u.get("/api/admin/available/"+i.groupId).success(function(n){e.isAdminAvailable(n);e.postToAdminOnlyIfAdminsNotConnected&&!e.isAdminAvailable()&&(e.sendToCommunity(!1),e.sendToAdmins(!0))})}function h(){var h,r;if(t(e.text()))return e.postWaiting(!1),s("noMessage"),void 0;if(!e.sendToCommunity()&&!e.sendToAdmins())return e.postWaiting(!1),s("noRecipient"),void 0;if(e.text().length<4||e.text().length>3e3)return e.postWaiting(!1),e.error("badLength"),void 0;if(e.showEmailInput()&&!o(e.email()))return e.postWaiting(!1),s("noMail"),void 0;if("fr"===e.languageCategory&&e.text().length<30&&"WarningMsgIncomplete"!==e.error()||"fr"!==e.languageCategory&&e.text().length<10&&"WarningMsgIncomplete"!==e.error())return e.error("WarningMsgIncomplete"),void 0;e.closeTooltip();h="None";i.isMobile()?h="Mobile":i.isTablet()?h="Tablet":i.isDesktop()&&(h="Desktop");r={Text:e.text(),GroupId:i.groupId,IsOnlyForAdmins:!e.sendToCommunity(),ZoneId:i.zoneId,UrlPosted:document.referrer,CustomVars:e.customVars,DeviceType:h};e.showEmailInput()&&(r.Email=e.email());e.postsCanHaveImages&&!t(e.imageSelected())&&(r.ImageUrl=e.imageSelected());u.post("/api/Post",r).success(function(t){n.log("Post "+t+" envoyé",null,"post",!0);r.Id=t;f.trigger("home:addSelfPost",r);e.postWaiting(!1);r.IsOnlyForAdmins?i.gaEvent("tokywokywidgetv3","ask","ask to admins"):i.gaEvent("tokywokywidgetv3","menu bar","ask to visitors");"ask"==i.forceTuto?i.gaEvent("tokywokywidgetv3","ask","question sent after tuto ask forced"):i.gaEvent("tokywokywidgetv3","ask","question sent");i.analytics.track("post",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget",isOnlyForAdmins:r.IsOnlyForAdmins});f.trigger("menu:question:sent",{Id:t,isNotOnlyForAdmins:e.sendToCommunity(),isAdminAvailable:e.isAdminAvailable()})}).error(function(){n.logError("Erreur",null,"post",!0);e.postWaiting(!1);f.trigger("menu:question:sent",{Id:null,isNotOnlyForAdmins:e.sendToCommunity()})});e.text("");e.error("");e.imagesVisible(!1);$(".appProfileNotification").removeClass("hatch");$(".appProfileNotification").addClass("hatch");(null==$.cookie("tokyTutorialAskClosed")||0==i.nbPoints())&&$.cookie("tokyTutorialAskClosed","true",{expires:390})}function s(n){e.info("");e.error("");setTimeout(function(){e.error(n)},0)}var e={activate:c,deactivate:l,attached:a,shell:i,tooltipTimeout:null,text:ko.observable(""),postWaiting:ko.observable(!1),sendToCommunity:ko.observable(0==i.hasCustomerService||1==i.hasCustomerService&&!i.sendPostToAdminsByDefault),sendToAdmins:ko.observable(2==i.hasCustomerService||1==i.hasCustomerService&&i.sendPostToAdminsByDefault),groupName:my.groupName,postsCanHaveImages:i.postsCanHaveImages,sendActivated:ko.observable(!0),error:ko.observable(""),info:ko.observable(""),isAdminAvailable:ko.observable(null),email:ko.observable(""),imagesUrl:ko.observableArray([]),imageSelected:ko.observable(null),imagesVisible:ko.observable(!1),displayedImageStartIndex:ko.observable(0),appAskInputHasFocus:ko.observable(!1),tooltipActivated:ko.observable(!0),showTooltip:ko.observable(!1),click2ChatIntegration:i.click2ChatIntegration,customerServiceUrl:i.customerServiceUrl,postToAdminOnlyIfAdminsNotConnected:i.postToAdminOnlyIfAdminsNotConnected,customVars:{},languageCategory:i.languageCategory,zoneName:i.zoneName,profilePic:ko.computed(function(){return i.profilePic()}),questionToAdminVisible:ko.computed({read:function(){return 1!=i.hasCustomerService||i.deactivateQuestionToAdminIfAdminsUnavailable&&!e.isAdminAvailable()?!1:!0},deferEvaluation:!0}),showEmailInput:ko.computed({read:function(){return e.sendToAdmins()&&!e.isAdminAvailable()&&!i.ribbonCustomerServiceWidgetEnabled()},deferEvaluation:!0}),nbPoints:ko.computed(function(){return i.nbPoints()}),userNickname:ko.computed({read:function(){return i.userNickname()},deferEvaluation:!0}),isLogged:ko.computed(function(){return i.isLogged()}),displayedImagesUrl:ko.computed({read:function(){var t=e.displayedImageStartIndex(),i=e.imagesUrl.slice(t,t+5),n;return null!=e.imageSelected()&&(n=!1,$.each(i,function(t,i){if(i==e.imageSelected())return(n=!0,void 0)}),n||e.imageSelected(null)),i},deferEvaluation:!0}),goToRegister:function(){i.goToRegister()},send:function(){var n=this;i.isLogged()?h():(n.postWaiting(!0),i.connect(!1).then(function(){i.thirdPartyCookiesBlocked()||h()}))},goToDiscussions:function(){i.goToDiscussions()},toggleSendToCommunity:function(){e.sendToCommunity(!e.sendToCommunity());e.closeTooltip()},toggleSendToAdmins:function(){e.sendToAdmins(!e.sendToAdmins())},back:function(){e.error("");e.info("")},selectImage:function(n){e.imageSelected()==n?e.imageSelected(null):e.imageSelected(n)},displayImages:function(){e.imagesVisible(!0);e.imagesUrl().length>0&&e.imageSelected(e.imagesUrl()[0])},displayNextImages:function(){var n=e.imagesUrl().length,t=e.displayedImageStartIndex();n>t+5&&e.displayedImageStartIndex(e.displayedImageStartIndex()+1)},displayPreviousImages:function(){e.displayedImageStartIndex()>0&&e.displayedImageStartIndex(e.displayedImageStartIndex()-1)},openTooltip:function(){e.showTooltip(!0)},closeTooltip:function(){e.showTooltip(!1)},disableTooltip:function(){e.closeTooltip();e.tooltipActivated(!1)},click2ChatIntegrationOpen:function(){window.parent.postMessage("tokyIntegrationClick2ChatOpen","*")},customerServiceUrlClick:function(){return i.gaEvent("tokywokywidgetv3","ask","ClickCustomerServiceUrl"),!0},hideErrorMessage:function(){e.error("")}};return e.appAskInputHasFocus.subscribe(function(n){if("fr"===e.languageCategory&&""===e.text()&&n&&e.sendToCommunity()){var t=i18n.t("ask.hieveryone");setTimeout(function(){e.text(t)},0)}n&&e.tooltipActivated()&&e.sendToCommunity()?e.openTooltip():n&&e.tooltipActivated()&&i.displayCustomerServiceWidget()&&!e.isAdminAvailable()?e.openTooltip():setTimeout(function(){e.closeTooltip()},100)}),e});n("viewmodels/chat",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,i,f,e,o){function a(n){var t=this;s.nextBtnVisible(!0);s.page=0;s.skip=0;s.chats([]);s.rating.answerId=0;s.rating.show(!1);s.bottomBarIsCollapsed(!1);n&&(t.chatRoomId()!=n&&s.otherIsTyping(!1),s.isTalkingToAdmin(!1),t.chatRoomId(n),o.off("chat:newMessage"),o.on("chat:newMessage",t.receiveChat),o.off("chat:otherIsTyping"),o.on("chat:otherIsTyping",t.otherTyping),o.off("chat:reload"),o.on("chat:reload",function(t){t==n&&c(n)}),s.otherUserIsFlagged(!1),i.analytics.track("chat:landing",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,notifsCount:i.nbNotifsInbox(),platform:"Widget"}),c(n,!0),i.pageview("chat"))}function v(){i.chatRoomIdCurrent("")}function y(){}function h(n){n||(document.activeElement.blur(),$(".feedContainWrapper-chat").blur());var t=$(".feedContainWrapper-chat"),i=t.prop("scrollHeight");t.scrollTop(i);n||s.inputHasFocus(!0)}function c(n,t){null!=n?(s.loading(!0),e.get("/api/Chat/"+n,{page:s.page,skip:s.skip}).success(function(f){var a;s.otherUserId(f.otherUserId);s.otherUser(f.otherUsersLabel);s.otherUserNickname(f.otherUsersLabel?f.otherUsersLabel:i18n.t("common.visitor"));s.otherUserIsFlagged(f.otherUserIsFlagged);s.chatType(f.type);s.isClosed(f.isClosed);"AnswerComment"===f.type&&e.get("/coach/api/answers/"+f.answerId+"/comments").success(function(n){s.answerComment(n)}).error(function(){s.answerComment(null)});(Math.ceil((f.nbChats-s.skip)/f.nbChatPerPage)==s.page+1||0==f.nbChats)&&s.nextBtnVisible(!1);for(var c=[],y=f.chats.length,o=null,v=!1,l=0;y>l;l++)o=f.chats[l],a={id:o.Id,text:null==o.UserDetails?r(o.Text):u(o.Text,o.UserDetails.Nickname),dateChat:o.DateChat,oddOrEven:null!=o.UserDetails&&o.UserDetails.Id==i.userId()?"even":"odd",className:null!=o.UserDetails&&o.UserDetails.Id==i.userId()?"even":"oddBubble",UserDetails:null==o.UserDetails?{}:{Id:o.UserDetails.Id,Nickname:o.UserDetails.Nickname,IsCertified:o.UserDetails.IsCertified,IsAdmin:o.UserDetails.IsAdmin,NbPeopleHelped:o.UserDetails.NbPeopleHelped,UserLevels:o.UserDetails.UserLevels,Picture:o.UserDetails.Picture},attachements:o.ChatAttachements},"undefined"!=typeof o.UrlPosted&&null!=o.UrlPosted&&(a.urlPosted=o.UrlPosted,s.urlPosted(o.UrlPosted)),c.push(a),o.UserId==s.userId&&o.IsCertified&&(v=!0);0==s.page?(c.reverse(),s.rating.feedbackText=f.feedbackText,s.rating.answerId=f.answerId,s.rating.gotThanks=f.getThanks,s.rating.gotNoThanks(f.getNoThanks),s.rating.pointLevel=f.pointLevel,s.rating.otherUserId=f.otherUserId,s.rating.otherUserIsCoach=f.otherUserIsCoach,s.rating.otherUserFollowerStatus=f.otherUserFollowerStatus,s.rating.show(!0),s.isAsker(f.isAsker),s.isTalkingToAdmin(f.isTalkingToAdmin),s.amICertified(v),s.chats(c),i.getNotifsInbox(),i.chatRoomIdCurrent(n),i.resizeFeedContainWrapper("chat"),h(t&&i.isMobile())):$.each(c,function(n,t){s.chats.unshift(t)});s.rating.feedbackText&&(s.feedbackWasSent(!0),s.bottomBarIsCollapsed(!1));s.loading(!1)}).error(function(){s.loading(!1)})):s.goToDiscussions()}function l(n){var t=n.parentNode,i,r;n.style.height="auto";t.style.height="auto";i=n.scrollHeight+2;$(n).innerHeight(i);r=t.scrollHeight+2;$(t).innerHeight(r)}var s={activate:a,deactivate:v,attached:y,shell:i,groupName:my.groupName,bottomBarIsCollapsed:ko.observable(!1),chatRoomId:ko.observable(null),answerRating:ko.observable(""),chats:ko.observableArray([]),chat:ko.observable(""),isTyping:!1,inputHasFocus:ko.observable(!1),otherIsTyping:ko.observable(!1),ratingSent:ko.observable(!1),isTalkingToAdmin:ko.observable(!1),feedbackWasSent:ko.observable(!1),amICertified:ko.observable(!1),page:0,skip:0,nextBtnVisible:ko.observable(!0),isAsker:ko.observable(!1),loading:ko.observable(!1),otherUser:ko.observable(null),otherUserId:ko.observable(null),otherUserNickname:ko.observable(""),otherUserIsFlagged:ko.observable(!1),chatType:ko.observable(""),answerComment:ko.observable(null),flagVisible:ko.observable(!0),isClosed:ko.observable(!1),urlPosted:ko.observable(null),rating:{show:ko.observable(!1),answerId:0,gotThanks:!1,gotNoThanks:ko.observable(!1),pointLevel:"",feedbackText:"",otherUserId:0,otherUserFollowerStatus:"",otherUserIsCoach:!1},userId:ko.computed(function(){return i.userId()}),userLevels:ko.computed(function(){return i.userLevels()}),nbPeopleHelped:ko.computed(function(){return i.nbPeopleHelped()}),showMobileInputFeedback:ko.computed({read:function(){return!1},deferEvaluation:!0}),send:function(){var n=this;t(n.chat())||(null!==n.chatRoomId()&&e.post("/api/Chat",{ChatRoomId:n.chatRoomId(),Text:n.chat()}).success(function(){s.skip=s.skip+1;i.gaEvent("tokywokywidgetv3","chat","send")}),i.analytics.track("chat:send",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,currentView:i.currentViewName(),platform:"Widget"}),n.chats.push({text:n.chat(),oddOrEven:"even",className:"even new",dateChat:moment(),UserDetails:{Id:i.userId(),Nickname:t(i.userNickname())?i18n.t("common.visitor"):i.userNickname(),Picture:i.profilePic(),IsCertified:s.amICertified(),IsAdmin:i.isAdmin(),NbPoints:i.nbPoints(),NbPeopleHelped:s.nbPeopleHelped(),UserLevels:s.userLevels()}}),n.chat(""),i.resizeFeedContainWrapper("chat"),h());n.inputHasFocus(!0)},receiveChat:function(n){s.chats.push({id:n.Id,text:null==n.UserDetails?r(n.Text):u(n.Text,n.UserDetails.Nickname),dateChat:n.DateChat,oddOrEven:"odd",className:"oddBubble new",isAdmin:n.IsAdmin,UserDetails:null==n.UserDetails?{}:n.UserDetails,attachements:n.ChatAttachements});s.skip=s.skip+1;i.resizeFeedContainWrapper("chat");h();$.ajax({url:"/api/Notification/"+s.chatRoomId(),type:"DELETE"})},otherTyping:function(n){n.chatRoomId==s.chatRoomId()&&s.otherIsTyping(n.isTyping)},thanksSent:function(){s.rating.gotThanks=!0;i.resizeFeedContainWrapper("chat");h();i.gaEvent("tokywokywidgetv3","chat","thanks")},noThanksSent:function(){s.rating.gotNoThanks(!0)},starSent:function(n){s.rating.pointLevel=n},feedbackOpened:function(){i.resizeFeedContainWrapper("chat");h()},feedbackClosed:function(){i.resizeFeedContainWrapper("chat");h()},feedbackSent:function(n){s.rating.feedbackText=n;s.feedbackWasSent(!0);i.resizeFeedContainWrapper("chat");h()},expandBottomBar:function(){s.bottomBarIsCollapsed(!1);i.resizeFeedContainWrapper("chat");h()},collapseBottomBar:function(){s.bottomBarIsCollapsed(!0);i.resizeFeedContainWrapper("chat");h()},next:function(){s.page=s.page+1;c(i.chatRoomIdCurrent())},flag:function(){e.post("/api/ChatRoomFlag",{ChatRoomId:s.chatRoomId(),GroupId:i.groupId}).success(function(){s.otherUserIsFlagged(!0);e.post("/api/userblock/"+s.otherUserId()).success(function(){i.userIdsBlocked.push(s.otherUserId())})})},chatsRendered:function(n,t){var r=s.chats.indexOf(t);-1!==r&&r===s.chats().length-1&&setTimeout(function(){i.resizeFeedContainWrapper("chat");h(!0)},100)},buttonClick:function(n){s.chat(n);s.send()}};return s.chat.subscribe(function(n){if(s.chatRoomId())if(""===n)s.isTyping&&e.get("/api/Chat/"+s.chatRoomId()+"/Typing",{isTyping:!1}).success(function(){s.isTyping=!1});else if(!t(n)&&(!s.isTyping||s.isTalkingToAdmin())){var i={isTyping:!0};s.isTalkingToAdmin()&&(i.text=n);e.get("/api/Chat/"+s.chatRoomId()+"/Typing",i).success(function(){s.isTyping=!0})}}),s.inputHasFocus.subscribe(function(n){i.isMobile()&&setTimeout(function(){var t=$(".feedContainWrapper-chat"),i=t.prop("scrollHeight");n?(window.parent.postMessage("tokyInputFocus","*"),t.scrollTop(i)):(window.parent.postMessage("tokyInputLostFocus","*"),t.scrollTop(0),setTimeout(function(){t.scrollTop(i)},100))},10)}),ko.bindingHandlers.autoExpandTextareaChat={init:function(n){setTimeout(function(){l(n)},10);$(n).on("keydown keyup input paste propertychange click submit mouseenter",function(){setTimeout(function(){l(n)},10)})},update:function(n){setTimeout(function(){l(n)},0)}},s});n("viewmodels/customPage",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t){function i(){t.pageview("custompage")}function r(){}return{activate:i,attached:r}});n("viewmodels/faq",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t){function i(){t.pageview("popup/faq")}function r(){t.resizeFeedContainWrapper("faq")}return{activate:i,compositionComplete:r,shell:t}});n("viewmodels/home",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app","scripts/simplestorage"],function(n,i,u,f,e){function c(n){t(n.answer())||n.answerWaiting()||(n.answerWaiting(!0),i.isLogged()?n.sendResult():i.connect(!1).then(function(){i.thirdPartyCookiesBlocked()||n.sendResult()}))}function s(){0===o.page&&(o.posts([]),o.isLoadingPosts(!1),o.isPostsEnd=!1,i.gotPostNotif(!1),o.posts([]));var n={};null!=i.zoneId&&(n.zoneId=i.zoneId);n.page=o.page;o.isLoadingPosts()||o.isPostsEnd||(o.isLoadingPosts(!0),0===o.page&&(o.skip=0),n.skip=i.skip,f.get("/api/v3/Post/"+i.groupId,n).success(function(n){l(n);o.isLoadingPosts(!1)}).error(function(){o.isLoadingPosts(!1)}))}function l(n){n.length<10&&(o.isPostsEnd=!0);v(n);i.resizeFeedContainWrapper("home");0===o.page&&$(".feedContainWrapper-home").scrollTop(0);o.page=o.page+1}function a(){i.resizeFeedContainWrapper("home")}function v(n){$.each(n,function(n,u){if(!u)return!0;var f=!1;return ko.utils.arrayForEach(i.userIdsBlocked(),function(n){u.UserDetails.Id===n&&(f=!0)}),f?!0:(u.answerInputHasFocus=ko.observable(!1),u.answer=ko.observable(""),u.NbAnswers=ko.observable(u.NbAnswers),u.answers=ko.observableArray([]),u.Text=r(u.Text),u.answerWaiting=ko.observable(!1),u.allAnswersVisible=ko.observable(!1),u.isOpened=ko.observable(!1),u.titleShown=ko.observable(!1),u.showTitle=function(){u.titleShown(!0)},u.hideTitle=function(){u.titleShown(!1)},u.ssoRequiredToAnswer=function(n,t){t.stopPropagation();i.popup.openYouNeedToRegisterToAnswer();window.parent.postMessage("tokySsoRequiredToAnswer","*")},u.answerInputHasFocus.subscribe(function(n){n&&$("#answerInput-"+u.Id).elastic()}),u.FeedAnswers&&$.map(u.FeedAnswers,function(n){n.isOpened=ko.observable(!1);n.isNew=ko.observable(!1)}),u.NbPoints=0,u.answers(u.FeedAnswers),u.allAnswersVisible=ko.observable(!1),u.visibleAnswers=ko.computed({read:function(){return u.answers().length>2&&!u.allAnswersVisible()?(u.answers()[0].Text=r(u.answers()[0].Text),u.answers()[1].Text=r(u.answers()[1].Text),[u.answers()[0],u.answers()[1]]):(1===u.answers().length&&(u.answers()[0].Text=r(u.answers()[0].Text)),u.answers())},deferEvaluation:!0}),u.alreadyAnswered=ko.computed({read:function(){var n=!1;return $.each(u.FeedAnswers,function(t,r){r.UserDetails.Id===i.userId()&&(n=!0)}),n},deferEvaluation:!0}),"First2"==i.showAnswersInModule?u.answersVisible=ko.observable(!0):(u.answersVisible=ko.observable(!1),u.allAnswersVisible(!0)),u.send=function(){c(u)},u.sendResult=function(){o.sendResult(u)},u.imageClick=function(){"undefined"==typeof u.UrlPosted||t(u.UrlPosted)||(i.gaEvent("tokywokywidgetv3","home","clickQuestionLink"),window.parent.postMessage("tokywokyredirect"+u.UrlPosted,"*"))},u.showAnswers=function(){u.answersVisible(!0);i.resizeFeedContainWrapper("home")},u.hideAnswers=function(){u.answersVisible(!1);i.resizeFeedContainWrapper("home")},u.seeAllAnswers=function(){u.allAnswersVisible(!0)},o.posts.push(u),void 0)})}function y(){"undefined"!=typeof window.parent.postMessage&&window.parent.postMessage("tokywokymaximizedfullyloaded","*");i.questionFromMinimized&&(i.questionFromMinimized=!1,i.popup.openMinimizedhelpPopup(null));$.cookie("tokyAcceptedCharte")&&o.isCharteAccepted(!0);e.off("home:sendWaitingAnswerIfAvailable");e.on("home:sendWaitingAnswerIfAvailable",function(){$.each(o.posts(),function(n,t){t.answerWaiting()&&t.sendResult()})});e.off("home:addSelfPost");e.on("home:addSelfPost",function(n){w(n)||(o.posts.unshift({DatePosted:"",Id:0,NbAnswers:ko.observable(0),Text:n.Text,ImageUrl:n.ImageUrl,UrlPosted:"",Type:"Visitor",alreadyAnswered:ko.observable(!1),answersVisible:ko.observable(!1),visibleAnswers:ko.observableArray([]),hideAnswers:function(){},answer:ko.observable(""),answerWaiting:ko.observable(!1),answerInputHasFocus:ko.observable(!1),send:function(){},sendResult:function(){},answers:ko.observable([]),allAnswersVisible:ko.observable(!1),showAnswers:function(){},isOpened:ko.observable(!1),UserDetails:{Id:i.userId(),Nickname:i18n.t("common.me"),NbPeopleHelped:i.nbPeopleHelped(),NbPoints:i.nbPoints(),UserLevels:i.userLevels(),IsCertified:i.isCertified(),IsAdmin:i.isAdmin(),Picture:i.profilePic()}}),i.resizeFeedContainWrapper("home"))});e.off("home:reload");e.on("home:reload",function(){o.page=0;s()});i.userIdsBlocked.subscribe(function(){var n=[];ko.utils.arrayForEach(o.posts(),function(t){ko.utils.arrayForEach(i.userIdsBlocked(),function(i){t.UserDetails.Id===i&&n.push(t)})});$.each(n,function(n,t){o.posts.remove(t)})});o.page=0;s();i.pageview("home")}function p(){var n="home";$(".feedContainWrapper-"+n).scroll(function(){var t=$(".feedContainWrapper-"+n+" .ps-scrollbar-y"),i=$(".feedContainWrapper-"+n+" .ps-scrollbar-y-rail");if(0!==t.length){var r=parseInt(t.css("top").replace("px","")),u=parseInt(t.css("height").replace("px","")),f=parseInt(i.css("height").replace("px","").replace("px",""));r+u===f&&s()}});i.isMobile()&&!i.isMinimized()&&($(".feedContainWrapper-"+n).scrollTop(0),window.devicePixelRatio>=2&&$("body").innerWidth()>=700?$("html").css("zoom",3):2==window.devicePixelRatio&&$("body").innerWidth()>=400&&$("html").css("zoom",2))}function w(n){var t=!1;return ko.utils.arrayForEach(o.posts(),function(i){i.Id===n.Id&&(t=!0)}),t}function h(n){var t;n.style.height="auto";n.style.overflow="scroll";t=Math.max(33,n.scrollHeight);n.style.overflow="auto";$(n).innerHeight(t)}var o={activate:y,attached:p,compositionComplete:a,shell:i,groupName:i.groupName,logoUrl:i.logoUrl,posts:ko.observableArray([]),answerPopupVisible:ko.observable(!1),isPostsEnd:!1,isLoadingPosts:ko.observable(!1),postsCanHaveImages:i.postsCanHaveImages,skip:0,page:0,zoneId:i.zoneId,zoneName:i.zoneName,showViewSwitchButtons:!1,showAnswersInModule:i.showAnswersInModule,isCharteAccepted:ko.observable(!1),isRegistered:ko.computed(function(){return i.isRegistered()}),userId:ko.computed(function(){return i.userId()}),userNickname:ko.computed({read:function(){return i.userNickname()},deferEvaluation:!0}),userLevels:ko.computed(function(){return i.userLevels()}),nbPeopleHelped:ko.computed(function(){return i.nbPeopleHelped()}),thirdPartyCookiesBlocked:ko.computed(function(){return i.thirdPartyCookiesBlocked()}),nbPoints:ko.computed(function(){return i.nbPoints()}),canAnswerOnlyWithSsoAndHasNoSso:ko.computed({read:function(){return i.canAnswerOnlyWithSso()&&!i.hasTokyWokySso()},deferEvaluation:!0}),minimize:function(){i.minimize()},goToLogin:function(){i.goToLogin()},goToQuestions:function(){i.goToQuestions()},logout:function(){i.thirdPartyCookiesBlocked()?window.open("/Popup/Logout/"+i.groupId,"Toky pro","width=400,toolbar=1,resizable=1,scrollbars=yes,height=400,top=100,left=100"):f.get("/Account/JsonLogout",{GroupId:i.groupId}).success(function(){i.isLogged(!1);i.connect().then(function(){i.goToLogin();i.goToHome()});i.gaEvent("tokywokywidgetv3","menu bar","logout",!1)})},goToIndex:i.goToIndex,answerRendered:function(n,t){t.isNew()&&setTimeout(function(){t.isNew(!1)},1500)},sendResult:function(n){return t(n.answer())?(n.answerWaiting(!1),void 0):n.answer().length<1||n.answer().length>3e3?(n.answerWaiting(!1),void 0):(f.post("/api/answer",{Text:n.answer(),PostId:n.Id,PlatformType:"Widget"}).success(function(t){n.answerWaiting(!1);o.posts.remove(n);i.goToChat(t);i.nbPoints()<30?i.analytics.track("answer:first",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget"}):i.analytics.track("answer",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget"});setTimeout(function(){i.nbPoints()<30&&(i.popup.openThankPopup({NbThanks:1,Points:30,AnswerText:n.answer()}),i.nbPoints(30),i.nbThanks(1),$.ajax({url:"/api/Notification/"+t,type:"DELETE",contentType:"application/x-www-form-urlencoded",dataType:"json"}).success(function(){}))},1e4);i.gaEvent("tokywokywidgetv3","home","answer")}).error(function(){n.answerWaiting(!1)}),void 0)},openFaqPopup:function(){i.popup.openFaqPopup();i.analytics.track("openFaqPopup",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,platform:"Widget"})},acceptsCharte:function(){o.isCharteAccepted(!0);$.cookie("tokyAcceptedCharte","true",{expires:365})}};return ko.bindingHandlers.autoExpandTextareaChat={init:function(n){setTimeout(function(){h(n)},10);$(n).on("keydown keyup input paste propertychange click submit mouseenter",function(){setTimeout(function(){h(n)},10)})},update:function(n){setTimeout(function(){h(n)},0)}},o});n("viewmodels/index",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t,i){function r(){t.isMinimized()?i.navigate("minimized",{trigger:!0,replace:!0}):t.chatRoomIdFromMinimized&&0!==t.chatRoomIdFromMinimized?(t.goToChat(t.chatRoomIdFromMinimized),t.chatRoomIdFromMinimized=0):t.goToDiscussionFromNotifMinimized?(t.goToDiscussionFromNotifMinimized=!1,t.goToDiscussions()):t.requiresUserInteractionForLogin()?i.navigate("userInteractionLogin",{trigger:!0,replace:!0}):t.goToHome(t.forceTuto)}function u(){}return{activate:r,attached:u}});n("viewmodels/messages",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r,f){function s(){"undefined"!=typeof window.parent.postMessage&&window.parent.postMessage("tokywokymaximizedfullyloaded","*");e.page=0;t.isLogged()?o():t.connect(!1).then(function(){o()});f.off("discussions:reload");f.on("discussions:reload",function(){e.page=0;o()});t.resizeFeedContainWrapper("discussions");t.pageview("discussions");t.analytics.track("messages:landing",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,notifsCount:t.nbNotifsInbox(),platform:"Widget"})}function h(){}function c(){var n="discussions";$(".feedContainWrapper-"+n).scroll(function(){0!=$(".feedContainWrapper-"+n+" .ps-scrollbar-y").length&&parseInt($(".feedContainWrapper-"+n+" .ps-scrollbar-y").css("top").replace("px",""))+parseInt($(".feedContainWrapper-"+n+" .ps-scrollbar-y").css("height").replace("px",""))==parseInt($(".feedContainWrapper-"+n+" .ps-scrollbar-y-rail").css("height").replace("px","").replace("px",""))&&o()})}function l(){t.resizeFeedContainWrapper("discussions")}function o(){0==e.page&&(e.discussions([]),e.isDiscussionsEnd=!1);e.isLoadingDiscussions()||e.isDiscussionsEnd||(e.isLoadingDiscussions(!0),r.get("/api/v3/profile",{groupId:t.groupId,page:e.page}).success(function(i){var r=null;i.length<10&&(e.isDiscussionsEnd=!0);$.each(i,function(i,f){f.PosterUserId=ko.observable(f.PosterUserId);f.GotNotif=ko.observable(f.GotNotif);f.OtherUser=ko.observable(f.OtherUser);f.Text=u(f.Text,f.OtherUser().Nickname);!r&&f.GotNotif()&&(r=f);f.rating={answerId:f.AnswerId,gotThanks:f.AnswerGotThanks,gotNoThanks:f.AnswerGotNoThanks,pointLevel:f.AnswerPointLevel,feedbackText:f.AnswerFeedbackText,otherUserId:f.AnswerUserId,otherUserIsCoach:f.OtherUser().IsCoach};f.thanksSent=function(){t.analytics.track("messages:thanks",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:t.nbNotifsInbox(),isUnread:f.GotNotif(),platform:"Widget"});f.GotNotif()===!0&&(t.analytics.track("messages:seenchat",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:t.nbNotifsInbox(),method:"thanks",isUnread:!0,platform:"Widget"}),f.GotNotif(!1),t.nbNotifsInbox(t.nbNotifsInbox()-1));f.rating.gotThanks=!0;t.gaEvent("tokywokywidgetv3","discussion","thanks")};f.noThanksSent=function(){f.GotNotif()===!0&&(f.GotNotif(!1),t.nbNotifsInbox(t.nbNotifsInbox()-1));f.rating.gotNoThanks=!0};f.starSent=function(n){f.rating.pointLevel=n};f.feedbackSent=function(n){f.rating.feedbackText=n};f.feedbackOpened=function(){t.resizeFeedContainWrapper("discussions")};f.feedbackClosed=function(){t.resizeFeedContainWrapper("discussions")};f.displayChat=function(n,i){i.preventDefault();i.stopPropagation();i.cancelBubble=!0;t.analytics.track("messages:gochat",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:t.nbNotifsInbox(),isUnread:f.GotNotif(),platform:"Widget"});f.GotNotif()===!0&&(t.analytics.track("messages:seenchat",{groupId:t.groupId,groupName:t.groupName,categoryId:t.zoneId,categoryName:t.zoneName,currentView:t.currentViewName(),notifsCount:t.nbNotifsInbox(),method:"goToChat",isUnread:!0,platform:"Widget"}),f.GotNotif(!1),t.nbNotifsInbox(t.nbNotifsInbox()-1));t.goToChat(f.Id)};f.archive=function(){$.ajax({url:"/api/Chat/"+f.Id,async:!0,type:"DELETE"}).success(function(){f.GotNotif()===!0&&(f.GotNotif(!1),t.nbNotifsInbox(t.nbNotifsInbox()-1));e.discussions.remove(f)}).error(function(){n.logError("Erreur",null,"discussions",!0)})};e.discussions.push(f)});t.resizeFeedContainWrapper("discussions");e.isLoadingDiscussions(!1);e.page=e.page+1;a(r)}).error(function(){e.isLoadingDiscussions(!1)}))}function a(n){if(n){var t=$("#message_"+n.Id);1===t.length&&setTimeout(function(){var n=t.position().top,i=t.closest("div.feedContainWrapper");i.animate({scrollTop:n},"slow")},500)}}var e={activate:s,deactivate:h,attached:c,compositionComplete:l,shell:t,discussions:ko.observableArray([]),page:0,isDiscussionsEnd:!1,zoneName:t.zoneName,zoneId:t.zoneId,maxPointsToBecomeCoach:90,groupName:t.groupName,isLoadingDiscussions:ko.observable(!1),userEmail:ko.computed(function(){return t.userEmail()}),isPasswordChosen:ko.computed(function(){return t.isPasswordChosen()}),userId:ko.computed(function(){return t.userId()}),goToSettings:function(){t.goToSettings()}};return e});n("viewmodels/minimized",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,i,r,u,f){function l(){e.post(null)}function a(){var t,n;e.emailSubscribtion=i.userEmail.subscribe(function(n){e.email()||e.email(n)});t=Math.round(1*Math.random()+0);0==t?(n={},null!=i.zoneId&&(n.zoneId=i.zoneId,n.page="0"),u.get("/api/v3/Post/"+i.groupId+"/last",n).success(function(n){if(null==n||0===n.length||n[0].UserDetails.Id===i.userId())e.post(null);else{var r=$.cookie("tokyUserId"),t=!1;$.each(n[0].FeedAnswers,function(n,u){if(u.UserDetails.Id==i.userId()||u.UserDetails.Id==r)return(t=!0,!1)});t?e.post(null):e.post(n[0])}window.addEventListener&&window.parent.postMessage("tokywokyminimizedfullyloaded","*")})):(e.post(null),window.addEventListener&&window.parent.postMessage("tokywokyminimizedfullyloaded","*"));f.off("home:sendWaitingAnswerIfAvailable");f.on("home:sendWaitingAnswerIfAvailable",function(){e.answerWaiting()&&e.sendAnswerAfterLogin()});f.off("ask:sendWaitingPostIfAvailable");f.on("ask:sendWaitingPostIfAvailable",function(){e.postWaiting()&&null!=$.cookie("islogged")&&e.sendPost()})}function v(){i.goToDiscussionFromNotifMinimized=!0;e.maximize()}function y(){e.email(i.userEmail())}function s(){i.isLogged()?c():(e.postWaiting(!0),i.connect(!1).then(function(){i.thirdPartyCookiesBlocked()||(e.postWaiting(!1),c())}))}function p(){i.isLogged()?h():i.connect(!1).then(function(){i.thirdPartyCookiesBlocked()||h()})}function h(){return t(e.answer())?(e.error("noMessage"),void 0):(u.post("/api/answer",{Text:e.answer(),PostId:e.post().Id,PlatformType:"Widget"}).success(function(n){var t=e.answer();e.answer("");i.chatRoomIdFromMinimized=n;e.maximize();setTimeout(function(){0==i.nbPoints()&&(i.popup.openThankPopup({NbThanks:1,Points:30,AnswerText:t}),i.nbPoints(30),i.nbThanks(1),$.ajax({url:"/api/Notification/"+n,type:"DELETE",contentType:"application/x-www-form-urlencoded",dataType:"json"}).success(function(){}))},1e4);i.gaEvent("tokywokywidgetv3","home","answer")}),i.sendAnswer(e.post),void 0)}function c(){if(e.isOnlyForAdmins()&&!e.isAdminAvailable()&&!o(e.email()))return e.postWaiting(!1),e.error("noMail"),setTimeout(function(){e.error("")},2e3),void 0;if(!e.isOnlyForAdmins()&&!e.isNotOnlyForAdmins())return e.postWaiting(!1),e.error("noRecipient"),setTimeout(function(){e.error("")},2e3),void 0;if(!e.postWaiting()){var t={Text:e.question(),GroupId:i.groupId,ZoneId:i.zoneId,UrlPosted:document.referrer,DeviceType:"Desktop"};null!==e.email()&&""!==e.email()&&(t.Email=e.email());e.postWaiting(!0);u.post("/api/Post",t).success(function(r){e.question("");e.firstTimeFocus=!0;e.step(0);e.maximize();i.questionFromMinimized=!0;n.log("Post "+r+" envoyé",null,"post",!0);t.Id=r;e.postWaiting(!1);i.gaEvent("tokywokywidgetv3","ask","question sent");e.hasAlreadySeenWarningMsgIncomplete=!1}).error(function(){n.logError("Erreur",null,"post",!0);e.postWaiting(!1)});e.error("")}}function w(){u.get("/api/admin/available/"+i.groupId).success(function(n){return e.isAdminAvailable(n),e.questionToAdminVisible()||e.isNotOnlyForAdmins(!0),e.postToAdminOnlyIfAdminsNotConnected&&!e.isAdminAvailable()&&(e.isNotOnlyForAdmins(!1),e.isOnlyForAdmins(!0)),t(e.question())?(e.postWaiting(!1),b("noMessage"),setTimeout(function(){e.error("")},3e3),void 0):e.question().length<4||e.question().length>3e3?(e.postWaiting(!1),e.error("badLength"),setTimeout(function(){e.error("")},3e3),void 0):e.question().length<30&&"WarningMsgIncomplete"!==e.error()&&!e.hasAlreadySeenWarningMsgIncomplete?(e.hasAlreadySeenWarningMsgIncomplete=!0,e.error("WarningMsgIncomplete"),void 0):!i.hasCustomerService||i.hasCustomerService&&!e.questionToAdminVisible()?(s(),void 0):(e.step(1),void 0)})}function b(n){e.error("");setTimeout(function(){e.error(n)},0)}function k(){e.error("");e.appAskInputHasFocus(!0)}function d(){e.emailSubscribtion.dispose()}var e={activate:a,attached:y,deactivate:d,groupName:i.groupName,getBigMinimizedToky:screen.width>1366?i.getBigMinimizedToky:!1,shell:i,emailSubscribtion:null,answerWaiting:ko.observable(!1),postWaiting:ko.observable(!1),answer:ko.observable(""),question:ko.observable(""),error:ko.observable(""),hasAlreadySeenWarningMsgIncomplete:!1,post:ko.observable(null),appAskInputHasFocus:ko.observable(!1),email:ko.observable(null),isAdminAvailable:ko.observable(null),isOnlyForAdmins:ko.observable(i.hasCustomerService&&i.sendPostToAdminsByDefault),isNotOnlyForAdmins:ko.observable(!i.hasCustomerService||!i.sendPostToAdminsByDefault),step:ko.observable(0),sendAnswer:p,postToAdminOnlyIfAdminsNotConnected:i.postToAdminOnlyIfAdminsNotConnected,askAQuestion:l,maximizedAfterClickOnNotif:v,goToStepTwo:w,sendQuestion:s,firstTimeFocus:!0,updateMyQuestion:k,languageCategory:i.languageCategory,userNickname:ko.computed(function(){return i.userNickname()}),questionToAdminVisible:ko.computed({read:function(){return i.deactivateQuestionToAdminIfAdminsUnavailable?e.isAdminAvailable()?!0:!1:!0},deferEvaluation:!0}),showEmailInput:ko.computed({read:function(){return e.isOnlyForAdmins()&&!e.isAdminAvailable()},deferEvaluation:!0}),allNotifsInbox:ko.computed(function(){return i.nbNotifsInbox()}),gotPostNotif:ko.computed(function(){return i.gotPostNotif()}),isMobile:ko.computed(function(){return i.isMobile()}),isTablet:ko.computed(function(){return i.isTablet()}),isMinimized:ko.computed(function(){return i.isMinimized()}),maximize:function(){i.minimize()},maximizeProfile:function(n,t){t.stopImmediatePropagation();i.pageBeforeMinimized("discussions");i.minimize()},toggleIsNotOnlyForAdmins:function(){(!e.postToAdminOnlyIfAdminsNotConnected||e.isAdminAvailable())&&e.isNotOnlyForAdmins(!e.isNotOnlyForAdmins())},toggleIsOnlyForAdmins:function(){(!e.postToAdminOnlyIfAdminsNotConnected||e.isAdminAvailable())&&e.isOnlyForAdmins(!e.isOnlyForAdmins())}};return e.appAskInputHasFocus.subscribe(function(){e.firstTimeFocus&&"fr"===e.languageCategory&&""===e.question()&&(e.question("Bonjour à tous, "),e.firstTimeFocus=!1)}),e});n("viewmodels/profile",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r){var u=function(){var n=this;n.id=ko.observable(null);n.shell=t;n.isLoading=ko.observable(!0);n.userName=ko.observable();n.town=ko.observable();n.birthDate=ko.observable();n.userAge=ko.observable("");n.nbPeopleHelped=ko.observable(0);n.userLevels=ko.observable([]);n.bio=ko.observable();n.nbAnswers=ko.observable();n.feedbacksForThisUser=ko.observableArray([]);n.feedbacksCount=ko.observable(0);n.userProfilePicture=ko.observable(null);n.userCategories=ko.observableArray([]);n.isUserCoach=ko.observable(!1);n.isUserCertified=ko.observable(!1);n.isUserAdmin=ko.observable(!1);n.hostProfileUrl=ko.observable(null);n.hostDatas=ko.observable(null);n.goToCoachArea=function(){t.isWhiteLabelled?window.open("https://"+t.whiteLabelSubdomain+".tokywoky.com/coach/account/register/"+t.zoneId+"?origin=widget","_blank"):window.open("/coach/account/register/"+t.zoneId+"?origin=widget","_blank")};n.goToCoachProfile=function(){window.open("/coach#profile/"+t.userId(),"_blank")};n.isPremium=ko.computed(function(){return"undefined"!=typeof t.isPremium?t.isPremium():!1});n.isAdmin=ko.computed(function(){return"undefined"!=typeof t.adminLevel&&null!==t.adminLevel?!0:!1});n.getUserInfo=function(){n.isLoading(!0);r.get("/api/user/"+n.id()+"/?groupCategoryId="+t.zoneId).success(function(t){null==t.Nickname||""===t.Nickname?n.userName(i18n.t("common.visitor")):n.userName(t.Nickname.charAt(0).toUpperCase()+t.Nickname.slice(1));t.BirthDate?n.userAge(moment.localeData().relativeTime(moment().diff(moment(t.BirthDate,"DD/MM/YYYY"),"years"),!0,"yy",!1)):n.userAge(null);n.town(t.Town);n.birthDate(t.BirthDate);n.bio(t.Bio);n.nbAnswers(t.NbAnswers);"undefined"!=typeof t.ProfilePicture&&null!=t.ProfilePicture&&-1===t.ProfilePicture.indexOf("http://")&&n.userProfilePicture(t.ProfilePicture);n.isUserCoach(t.IsCoach);n.isUserCertified(t.IsCertified);n.isUserAdmin(t.IsAdmin);n.feedbacksForThisUser(t.Feedbacks);n.feedbacksCount(t.NbFeedbacks);n.nbPeopleHelped(t.NbPeopleHelped);n.userLevels(t.Levels);n.hostProfileUrl(t.HostProfileUrl);n.hostDatas(t.HostDatas);n.isLoading(!1)}).error(function(){n.isLoading(!1)})}};return u.prototype.activate=function(n){var i=this;i.id(n);i.getUserInfo();t.pageview("profile")},u.prototype.compositionComplete=function(){t.resizeFeedContainWrapper("profile")},u});n("viewmodels/settings",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t,i,r){function f(){r.get("/api/MarketingMailsAccepted?id="+t.groupId).success(function(n){u.enableMarketingMails(n)});t.pageview("settings")}function e(){}function o(){t.resizeFeedContainWrapper("settings")}var u={activate:f,attached:e,compositionComplete:o,shell:t,groupName:t.groupName,enableMarketingMails:ko.observable(!1),email:ko.observable(t.userEmail()),password:ko.observable(""),isLoading:ko.observable(!1),isError:ko.observable(!1),success:ko.observable(!1),goToHome:function(){t.goToHome()},isPasswordChosen:ko.computed(function(){return t.isPasswordChosen()}),clickEnableMarketingMails:function(){r.post("/api/MarketingMailsAccepted?id="+t.groupId).success(function(){u.enableMarketingMails(!u.enableMarketingMails())})},send:function(){u.isLoading(!0);u.isError(!1);t.isPasswordChosen()||$.ajax({url:"/api/account/me",type:"PUT",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{Email:u.email(),Password:u.password()}}).success(function(){t.isPasswordChosen(!0);u.success(!0);u.isLoading(!1)}).error(function(){u.isError(!0);u.isLoading(!1)})}};return u});n("text",{load:function(n){throw new Error("Dynamic load not allowed: "+n);}});n("text!views/UserInteractionLogin.html",[],function(){return'<div class="userInteractionLogin">\r\n    <div class="header" src="/Content/images/warningDisc.png">\r\n        <div class="warningPicture"><\/div>\r\n        <div class="explanation fontColor clientFont" data-bind="i18n:\'userinteractionlogin.yourbrowserssecurityparameterspreventusfromsigningyouinautomaticallyonthecommunitychat\'"><\/div>\r\n    <\/div>\r\n\r\n    <div class="cta fontColor clientFont" data-bind="i18n:\'userinteractionlogin.pleaseclickonthebuttonbelowtomanuallysignin\'"><\/div>\r\n    <div class="buttonContain">\r\n        <button class="button clientBoldFont flashColor buttonColor" data-bind="visible: !loginInProgress(), click: login, i18n:\'userinteractionlogin.signinmanually\'"><\/button>\r\n        <button class="button clientBoldFont flashColor buttonColor" data-bind="visible: loginInProgress, i18n:\'userinteractionlogin.signingin\'" disabled="disabled"><\/button>\r\n    <\/div>    \r\n    <div class="errorContain slideDownNoBounce" data-bind="visible: error">\r\n        <div class="error clientFont" data-bind="i18n:\'userinteractionlogin.couldnotmanuallyloginyoumayneedtoauthorizepopupandorallowthirdpartiescookiesonyourbrowser\'"><\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/_facebookConnect.html",[],function(){return'<div>\r\n    <div class="button facebook" data-bind="visible: !facebook.isLoading() && facebook.error() === null && !popupsBlocked(), click: facebook.addLink">\r\n        <div class="logoLabelWrapper">\r\n            <div class="logo"><\/div>\r\n            <div class="label" data-bind="i18n:\'register.connectwithfacebook\'"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div id="loaderTop" data-bind="visible: facebook.isLoading()">\r\n        <div class="globalOwnProfileLoading">\r\n            <div class="outer spin-pulse"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <!--ko if: popupsBlocked() -->\r\n    <div class="connectErrorsContain fadeInFast clientFont">\r\n        <div class="errorMessageContain">\r\n            <div class="errorMessage clientBoldFont">\r\n                <span data-i18n="login.youneedtoallowpopupsonyourbrowserinodertousefacebookconnect"><\/span>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="popupUnlockHelpContain">\r\n            <div class="hint" data-bind="i18n:\'login.howtoallowpopupsonyourbrowser\'"><\/div>\r\n            <ul>\r\n                <li><a href="http://help.apple.com/safari/mac/9.0/#/sfri40696" target="_blank">Safari<\/a><\/li>\r\n                <li><a href="https://support.microsoft.com/help/17479/windows-internet-explorer-11-change-security-privacy-settings" target="_blank">Internet Explorer<\/a><\/li>\r\n                <li><a href="https://support.microsoft.com/instantanswers/cbfc3333-c95c-4e49-954e-318d3362623c/block-pop-ups-in-microsoft-edge" target="_blank">Edge<\/a><\/li>\r\n                <li><a href="https://support.mozilla.org/kb/pop-blocker-settings-exceptions-troubleshooting" target="_blank">Firefox<\/a><\/li>\r\n                <li><a href="https://support.google.com/chrome/answer/95472" target="_blank">Chrome<\/a><\/li>\r\n            <\/ul>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if: facebook.error() !== null -->\r\n    <div class="connectErrorsContain fadeInFast clientFont">\r\n\r\n        <!--ko if: facebook.error().code === 300 -->\r\n        <form class="fadeInFast clientFont" data-bind="submit: login">\r\n            <div class="cta clientFont" data-bind="i18n:\'login.asasecuritymeasurepleaseconfirmthatthetokywokyaccountXbelongstoyou\', i18nOptions: {email: facebook.error().facebookUserEmail }"><\/div>\r\n            <div class="inputs">\r\n                <div class="field">\r\n                    <input class="connectInput clientFont" type="email" name="Email" readonly="readonly" disabled="disabled" data-bind="i18n:\'[placeholder]common.youremail\', value: facebook.error().facebookUserEmail" />\r\n                <\/div>\r\n                <div class="field">\r\n                    <input class="connectInput clientFont" type="password" name="Password" data-bind="i18n:\'[placeholder]common.yourpassword\', value: userPassword, valueUpdate: \'afterkeydown\'" />\r\n                <\/div>\r\n            <\/div>\r\n            <div class="errorMessageContain slideUp" data-bind="visible: facebook.subError() && facebook.subError().code === 401">\r\n                <div class="errorMessage clientBoldFont" data-bind="i18n:\'login.wrongemailorpassword\'"><\/div>\r\n            <\/div>\r\n            <button class="submitButton" type="submit" data-bind="visible: !facebook.subErrorIsLoading(), i18n:\'login.linkwithmysocialaccount\', click: login"><\/button>\r\n            <button class="submitButtonLoading" disabled="disabled" type="button" data-bind="visible: facebook.subErrorIsLoading()"><\/button>\r\n        <\/form>\r\n        <!--/ko-->\r\n\r\n        <!--ko if: facebook.error().code === 400 -->\r\n        <div class="errorMessageContain fadeInFast">\r\n            <div class="errorMessage clientBoldFont" data-bind="i18n:\'login.yoursocialaccountmusthaveanemailaddress\'"><\/div>\r\n        <\/div>\r\n        <!--/ko-->\r\n\r\n    <\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("text!views/_globalOwnProfile.html",[],function(){return'<div>\r\n    <div id="loaderTop" class="globalOwnProfileContain" data-bind="visible: userId() === null">\r\n        <div class="globalOwnProfileLoading">\r\n            <div class="outer spin-pulse"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--ko if: userId() !== null -->\r\n    <div class="globalOwnProfileContain" data-bind="">\r\n        <div class="miniProfileContain clientFont">\r\n            <div class="miniProfileUserInfo" data-bind="click: openOwnProfile, compose: {model: \'shared/viewmodels/userDetails\', view: \'shared/views/userDetails.html\', activationData: [userId()], activate: true}"><\/div>\r\n\r\n            <!--ko if: nbPoints() < maxPointsToBecomeCoach -->\r\n            <!--ko if: !isRegistered() -->\r\n            <div class="miniProfileConnectBtn flashColor buttonColor" data-bind="click: goToLogin">\r\n                <span class="miniProfileConnectBtnText" data-bind="i18n:\'miniprofile.connect\', textfill"><\/span>\r\n                <span class="miniProfileConnectBtnTextCustom" data-bind="textfill"><\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--ko if: !isCoach() -->\r\n            <div class="miniProfileProgressBarContainer">\r\n                <span class="miniProfileNbPointsHint" data-bind="i18n:\'miniprofile.Xmorethankstogountilyoubecomecoach\', i18nOptions:{nbThanks: (3-nbThanks())}"><\/span>\r\n                <span class="miniProfileNbPoints" data-bind="i18n:\'miniprofile.Xthanks\', i18nOptions:{nbThanks:nbThanks()}"><\/span>\r\n\r\n                <div class="miniProfileProgressBar">\r\n                    <div class="miniProfileProgressBarInside flashColor" data-bind="style:{width:((nbPoints()/maxPointsToBecomeCoach)*100)+\'%\'}"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--/ko-->\r\n\r\n            <!--ko if: nbPoints() >= maxPointsToBecomeCoach -->\r\n            <!--ko if: !isCoach() && !isRegistered() -->\r\n            <div class="miniprofileBannerGoToCoachButton flashColor clientBoldFont pulse buttonColor" data-bind="click: goToRegister, textfill">\r\n                <span data-bind="i18n:\'miniprofile.becomecoach\'"><\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--ko if: !isCoach() && isRegistered() -->\r\n            <div class="miniprofileBannerGoToCoachButton flashColor clientBoldFont pulse buttonColor" data-bind="click: goToCoachArea, textfill">\r\n                <span data-bind="i18n:\'miniprofile.becomecoach\'"><\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--ko if: isCoach() -->\r\n            <div class="miniprofileBannerGoToCoachButton clientBoldFont buttonColor" data-bind="click: goToCoachArea, textfill">\r\n                <span data-bind="i18n:\'miniprofile.coachaccess\'"><\/span>\r\n                <span>\r\n                    <svg xmlns="http://www.w3.org/2000/svg" width="60" height="64" viewBox="0 0 60.00084 64.000009">\r\n                        <path d="M20.304 32.002h-19.394v-7.774h19.394v-7.774l11.634 11.657-11.634 11.657v-7.774zm38.787-31.093v50.524l-23.273 11.657v-11.657h-23.273v-15.544h3.88v11.657h19.394v-34.975l15.514-7.774h-34.908v15.544h-3.88v-19.431h46.546z" fill="#fff" stroke="#00b0f0" stroke-width="1.82" stroke-linecap="round" stroke-linejoin="round" />\r\n                    <\/svg>\r\n                <\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--/ko-->\r\n\r\n            <!--ko if: isRegistered() -->\r\n            <div class="profileLogout" data-bind="click: logout">\r\n                <svg class="disconnectSvg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" width="100.0px" height="100px" viewBox="0 0 140 140" enable-background="new 0 0 140 140" xml:space="preserve">\r\n                    <path fill="#000000" d="M93.819,25.123v12.344c12.784,7.966,21.297,22.143,21.297,38.313c0,24.918-20.199,45.117-45.116,45.117  S24.884,100.698,24.884,75.78c0-16.171,8.513-30.348,21.297-38.313V25.123c-19,8.949-32.155,28.264-32.155,50.657  c0,30.914,25.061,55.975,55.974,55.975c30.915,0,55.975-25.061,55.975-55.975C125.975,53.387,112.819,34.072,93.819,25.123z"/>\r\n                    <path fill="#000000" d="M85.583,53.079c0,2.761-2.238,5-5,5H59.417c-2.762,0-5-2.239-5-5V9.245c0-2.761,2.238-5,5-5h21.166  c2.762,0,5,2.239,5,5V53.079z"/>\r\n                <\/svg>\r\n            <\/div>\r\n            <!--/ko-->\r\n\r\n            <div class="clearer"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("text!views/_login.html",[],function(){return'<div>\r\n    <!-- ko ifnot: isRegistered() -->\r\n    <div class="connectContain fadeInFast">\r\n        <div class="loginHeader">\r\n            <div class="loginHeaderLogoToky"><\/div>\r\n            <div class="loginHeaderLegend" data-bind="i18n:\'login.jointhelargestcommunityofhelpfulpeople\'"><\/div>\r\n        <\/div>\r\n\r\n        <div class="socialLogins">\r\n            <div class="" data-bind="compose: {\r\n                model: \'viewmodels/_facebookConnect\',\r\n                view: \'views/_facebookConnect.html\',\r\n                activationData: [\r\n                    data = {\r\n                        userPassword: userPassword,\r\n                        userMail: userMail,\r\n                        action: action,\r\n                        successCallback: successCallback\r\n                    }],\r\n                activate: true }">\r\n            <\/div>\r\n            <div class="separator" data-bind="visible: action() === \'normalLogin\'">\r\n                <div class="label" data-bind="i18n:\'register.or\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <!-- ko if: action() === \'normalLogin\'-->\r\n        <div class="connectErrorsContain fadeInFast" data-bind="visible: error()">\r\n            <div class="errorMessageContain">\r\n                <div class="errorMessage clientFont" data-bind="i18n:\'login.wrongemailorpassword\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <form class="registerPanelConnectContain" data-bind="submit:send">\r\n            <div class="connectLegend clientFont" data-bind="i18n:\'login.logintoaccessyourprofile\'"><\/div>\r\n            <input class="connectInput clientFont" type="text" data-bind="value: userMail, i18n:\'[placeholder]common.youremail\'" />\r\n            <input class="connectInput clientFont" type="password" data-bind="value: userPassword, i18n:\'[placeholder]common.yourpassword\'" autofocus="autofocus" />\r\n            <div class="forgotPasswordLink">\r\n                <a class="fontColor clientFont" href="https://www.tokywoky.com/Account/PasswordForgot" target="_blank" data-bind="i18n:\'common.forgotyourpassword\'"><\/a>\r\n            <\/div>\r\n            <div class="clearer"><\/div>\r\n            <div class="connectButtonsContain">\r\n                <button class="connectBtn bgColor flashColor clientBoldFont buttonColor" type="submit" data-bind="click: send, i18n:\'login.connect\'"><\/button>\r\n                <div class="goToRegister clientBoldFont" data-bind="click: goToRegister, i18n:\'login.notregisteredyet\'"><\/div>\r\n            <\/div>\r\n        <\/form>\r\n        <!--/ko-->\r\n    <\/div>\r\n\r\n    <div class="clearer"><\/div>\r\n    <!--/ko-->\r\n<\/div>\r\n'});n("text!views/_menu.html",[],function(){return'<div>\r\n    <div class="appProfileMenu bgColor menuBarColor">\r\n        <div class="appMenuToolbar">\r\n            <!--ko if: route() != \'home\'-->\r\n            <div class="appMenuBack" data-bind="click: goToPreviousView"><\/div>\r\n            <!--/ko-->\r\n            \r\n            <div class="appMenuLogoGroup">\r\n                <img data-bind="attr: {src : shell.logoUrl}" />\r\n            <\/div>\r\n            \r\n            <!--ko if: showMinimizeButton() -->\r\n            <div class="appMenuCloseContain" data-bind="click: minimize">\r\n                <div class="appMenuCloseIcon notSelected"><\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            \r\n            <div class="appMenuHelpContain" data-bind="click: goToFaq">\r\n                <div class="appHelpIcon notSelected" data-bind="css: {selected: shell.popup.isOpened() && shell.popup.type() === \'Faq\'}, i18n:\'[title]menu.whatisthis\'"><\/div>\r\n            <\/div>\r\n\r\n            <div class="appMenuMessagesWrapper">\r\n                <div class="appMenuMessagesContain" data-bind="click: clickMessagesIcon">\r\n                    <div class="appMessagesIcon notSelected" data-bind="css: {selected: route()==\'messages\', appMessagesTutorial: myDiscussionHighlightedTutorial, pulse: myDiscussionHighlightedTutorial}, i18n:\'[title]menu.mymessages\'"><\/div>\r\n                    <div class="appMessagesNotif clientBoldFont flashColor notificationColor" data-bind="visible: nbNotifsInbox()>0, text: nbNotifsInbox()"><\/div>\r\n                <\/div>\r\n\r\n                <!--ko if: showQuestionSentBubble() -->\r\n                <div class="appMenuQuestionSentBubbleContain">\r\n\r\n                    <div class="messagesHighlight expandUp" data-bind="click: clickMessagesHighlightIcon"><\/div>\r\n                    <div class="arrow fadeIn"><\/div>\r\n\r\n                    <div class="bubble expandUp">\r\n                        <div class="closeButton" data-bind="click: closeQuestionSentBubble, i18n:\'[title]common.close\'"><\/div>\r\n                        <div class="askWaitForAnswerTitle clientFont" data-bind="i18n:\'ask.questionsent\'"><\/div>\r\n                        <!--ko if: questionSentBubbleInfo().isNotOnlyForAdmins -->\r\n                        <div class="askWaitForAnswerCta clientFont" data-bind="i18n:\'ask.youranswerswillarriveoverthereinaboutXminute\', i18nOptions:{count: 5}"><\/div>\r\n                        <div class="askWaitForAnswerCtaCustom clientFont"><\/div>\r\n\r\n                        <!--ko if: !emailRegisteredMessage() && !isRegistered() -->\r\n                        <div class="askWaitForAnswerLeaveEmailContain">\r\n                            <div class="askLeaveEmailLegendTitle clientFont" data-bind="i18n:\'ask.gottago\'"><\/div>\r\n                            <div class="askLeaveEmailLegendTitleCustom clientFont"><\/div>\r\n                            <div class="askLeaveEmailLegendCta clientFont" data-bind="i18n:\'ask.getyouranswersbyemail\'"><\/div>\r\n                            <div class="askLeaveEmailLegendCtaCustom clientFont"><\/div>\r\n\r\n                            <button class="showOrSubmitEmail bgColor flashColor buttonColor" data-bind=", text: showOrSubmitEmailText, textfill, click: showOrSubmitEmail, css: {show: !showEmailInput(), submit: showEmailInput()}"><\/button>\r\n\r\n                            <!--ko if: showEmailInput() -->\r\n                            <div class="askLeaveEmailInputContain fadeInFast" data-bind="visible: !isEmailRegisteringLoading()">\r\n                                <input type="email" data-bind="value: userMail, valueUpdate: \'input\', enterkey: submitEmailForQuestion, hasFocus: userMailHasFocus, css: { inputError: !IsEmailValid() }, i18n:\'[placeholder]ask.youremailaddresse\'" />\r\n                            <\/div>\r\n                            <div class="askLeaveEmailInputContain fadeInFast" data-bind="visible: isEmailRegisteringLoading">\r\n                                <div class="loader"><\/div>\r\n                            <\/div>\r\n                            <div class="error slideUp" data-bind="visible: userMailInvalidMessage, i18n:\'register.thisemailisnotvalid\'"><\/div>\r\n                            <!--/ko-->\r\n                        <\/div>\r\n                        <!--/ko-->\r\n\r\n                        <!--/ko-->\r\n                        <!--ko if: !questionSentBubbleInfo().isNotOnlyForAdmins -->\r\n                        <div class="askWaitForAnswerAdmin clientFont" data-bind="i18n:\'ask.yourquestionhasbeensenttotheXteamtheywillansweryouassoonaspossible\', i18nOptions: { GroupName: groupName }"><\/div>\r\n                        <div class="askWaitForAnswerAdminCustom clientFont"><\/div>\r\n                        <!--/ko-->\r\n                        <!--ko if: emailRegisteredMessage()-->\r\n                        <div class="askWaitForAnswerLeaveEmailContain fadeInFast">\r\n                            <div class="emailRegisteredMessage clientBoldFont" data-bind="i18n:\'ask.youwillalsobenotifiedwhensomeoneanswersyou\'"><\/div>\r\n                            <button class="emailRegisteredMessageCloseButton clientFont bgColor flashColor" data-bind="click: closeQuestionSentBubble, i18n:\'common.close\'"><\/button>\r\n                        <\/div>\r\n                        <!--/ko-->\r\n                    <\/div>\r\n                <\/div>\r\n                <!--/ko-->\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="appMenuNotificationsBar" data-bind="css: {shown: showNotificationBar}, click: clickNotificationBar">\r\n            <div class="arrow"><\/div>\r\n            <div class="text clientBoldFont" data-bind="i18n:\'menu.youhaveXnewmessage\', i18nOptions: {count: nbNotifsInbox()}"><\/div>\r\n            <div class="appMenuNotificationsBarClose" data-bind="click: closeNotificationBar, clickBubble: false"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupFeedback.html",[],function(){return'<div>\r\n    <div data-bind="click:close" class="popupClose"><\/div>\r\n    <div class="popupLegend clientBoldFont">\r\n        <span class="popupHighlight clientBoldFont fontColor" data-bind="i18n:\'popupfeedback.someoneisrecommendingyou\'"><\/span>\r\n    <\/div>\r\n\r\n    <div class="popupFeedbacksContain">\r\n        <!--ko foreach:data -->\r\n        <div class="profileReview">\r\n            <span class="profileReviewDateCategoryLabel" data-bind="text:CategoryName"><\/span>&nbsp;─&nbsp;<span class="profileReviewDate" data-bind="text:moment.utc(DateCreated).format(\'YYYY-MM-DD\')"><\/span>\r\n            <div class="profileReviewText">\r\n                <span class="profileReviewQuote">&ldquo;<\/span><span data-bind="customhtml:FeedbackText"><\/span><span class="profileReviewQuote">&rdquo;<\/span>\r\n            <\/div>\r\n            <!--ko if:SenderUserName == null -->\r\n            <span class="profileReviewAuthor clientBoldFont" data-bind="i18n:\'common.visitor\'"><\/span>\r\n            <!-- /ko -->\r\n            <!--ko if:SenderUserName != null -->\r\n            <span class="profileReviewAuthor" data-bind="customhtml:SenderUserName"><\/span>\r\n            <!-- /ko -->\r\n        <\/div>\r\n        <!-- /ko -->\r\n    <\/div>\r\n\r\n    <div class="popupBtn" data-bind="i18n:\'popupfeedback.awesome\', click:close"><\/div>\r\n    <div class="clearer"><\/div>\r\n<\/div>\r\n'});n("text!views/_popupLogin.html",[],function(){return'<div class="popupRegister">\r\n    <div data-bind="click:close" class="popupClose"><\/div>\r\n    <div class="" data-bind="compose: {\r\n                    model: \'viewmodels/_login\',\r\n                    view: \'views/_login.html\',\r\n                    activate: true }">\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupMinimizedHelp.html",[],function(){return'<div class="askWaitForAnswerContain popupQuestion">\r\n\r\n    <div class="absoluteCenter">\r\n        <img src="/Content/images/message-sent.png" />\r\n\r\n        <div class="askWaitForAnswerCtaHelp clientFont" data-bind="i18n:\'ask.yourquestionwassubmittedothervisitorsmayanswersoon\'"><\/div>\r\n        <div class="askWaitForAnswerCtaCustom clientFont"><\/div>\r\n        <!--ko if:!isRegistered()-->\r\n        <div class="askWaitForAnswerLeaveEmailContain">\r\n            <img class="askWaitForAnswerLeaveEmailBtnImg" src="/Content/images/askSendEmailBtn.png" />\r\n            <div class="askLeaveEmailLegend clientFont " data-bind="i18n:\'ask.gottagoleaveanemailbelowyoullbenotifiedwhenyougetananswer\'"><\/div>\r\n            <div class="askLeaveEmailLegendCustom clientFont"><\/div>\r\n        <\/div>\r\n        <div class="clientBoldFont">\r\n            <a class="askGoToRegisterBtn clientBoldFont flashColor buttonColor" data-bind="click: goToRegister, i18n:\'ask.leavemyemail\'"><\/a>\r\n            <a class="askGoToRegisterBtnCustom clientBoldFont flashColor buttonColor" data-bind=""><\/a>\r\n        <\/div>\r\n\r\n        <!--/ko-->\r\n        <div class="clearer"><\/div>\r\n\r\n        <div class="explicationNotif">\r\n        <\/div>\r\n        <div data-bind="click:close, i18n:\'minimized.helpothervisitorswhileyouwaitforananswer\'" class="goTokyPopupQuestion fontColor">\r\n        <\/div>\r\n\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupRegister.html",[],function(){return'<div class="popupRegister">\r\n    <div data-bind="click:close" class="popupClose"><\/div>\r\n    <div class="" data-bind="compose: {\r\n                    model: \'viewmodels/_register\',\r\n                    view: \'views/_register.html\',\r\n                    activationData: data(),\r\n                    activate: true }">\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupRegistered.html",[],function(){return'<div class="popupRegistered">\r\n    <div class="popupCoachContain">\r\n        <div class="popupRegisteredLogo"><\/div>\r\n        <div class="popupThankHighlight popupRegisteredHighlightSuccess clientFont fontColor" data-bind="i18n:\'popupregistered.registersuccessful\'"><\/div>\r\n        <div class="popupThankHighlight popupRegisteredHighlightSuccessCustom clientFont fontColor"><\/div>\r\n        <div class="popupThankHighlightProgressBarContainer">\r\n            <div class="popupThankHighlightProgressBar">\r\n                <div class="popupThankHighlightProgressBarInside flashColor" data-bind="style:{\'width\':((data().NbThanks/maxThanksToBecomeCoach)*100)+\'%\'}"><\/div>\r\n                <div class="popupThankHighlightProgressBarLegendContain">\r\n                    <span class="popupThankHighlightProgressBarLegendUnit" data-bind="css:{thanksReached: data().NbThanks >= 1}">1<\/span>\r\n                    <span class="popupThankHighlightProgressBarLegendUnit" data-bind="css:{thanksReached: data().NbThanks >= 2}">2<\/span>\r\n                    <span class="popupThankHighlightProgressBarLegendLastUnit" data-bind="css:{thanksReached: data().NbThanks >= 3}">3<\/span>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="popupThankProfileInfoText clientFont" data-bind="i18n:\'popupthank.justXmorethanksandyoucanbecomecoach\', i18nOptions: { nbThanks:maxThanksToBecomeCoach - data().NbThanks }"><\/div>\r\n\r\n        <div class="popupThankGottaGoContain">\r\n            <span class="clientBoldFont fontColor" data-bind="i18n:\'popupregistered.keepansweringvisitorsquestionsinordertobecomecoach\'"><\/span>\r\n        <\/div>\r\n        <div class="popupBtn clientBoldFont flashColor buttonColor" data-bind="click: goToHome, i18n:\'popupregistered.ikeepanswering\'"><\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupThank.html",[],function(){return'﻿<div class="popupThanks">\r\n    <div class="popupThanksCustom"><\/div>\r\n\r\n    <div class="popupCoachContain">\r\n        <!--ko if: nbPoints() < maxPointsToBecomeCoach && nbThanks() < maxThanksToBecomeCoach -->\r\n        <div class="popupThankHighlight popupThankHighlightHelped clientFont fontColor" data-bind="i18n:\'popupthank.welldoneyouvehelpedastranger\'"><\/div>\r\n        <div class="popupThankHighlight popupThankHighlightHelpedCustom clientFont fontColor"><\/div>\r\n        <div class="popupThankLegend clientFont" data-bind="i18n:\'popupthank.andtheysentyouathanks\'"><\/div>\r\n        <div class="popupThankHighlightProgressBarContainer">\r\n            <div class="popupThankHighlightProgressBar">\r\n                <div class="popupThankHighlightProgressBarInside flashColor" data-bind="style:{\'width\':((data().NbThanks/maxThanksToBecomeCoach)*100)+\'%\'}"><\/div>\r\n                <div class="popupThankHighlightProgressBarLegendContain">\r\n                    <span class="popupThankHighlightProgressBarLegendUnit" data-bind="css:{thanksReached: data().NbThanks >= 1}">1<\/span>\r\n                    <span class="popupThankHighlightProgressBarLegendUnit" data-bind="css:{thanksReached: data().NbThanks >= 2}">2<\/span>\r\n                    <span class="popupThankHighlightProgressBarLegendLastUnit" data-bind="css:{thanksReached: data().NbThanks >= 3}">3<\/span>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="popupThankProfileInfoText clientFont" data-bind="i18n:\'popupthank.justXmorethanksandyoucanbecomecoach\', i18nOptions: { nbThanks:maxThanksToBecomeCoach - data().NbThanks }"><\/div>\r\n        \r\n        <div class="popupThankNbPoints">\r\n            <div class="title clientFont" data-bind="i18n:\'popupthank.youranswer\'"><\/div>\r\n            <div class="answer" data-bind="customhtml: data().AnswerText, truncatedText: data().AnswerText, length: 128, emojify"><\/div>\r\n        <\/div>\r\n\r\n        <div class="popupBtn clientBoldFont flashColor" data-bind="click: goToHome, i18n:\'popupthank.helptheothervisitors\'"><\/div>\r\n        <!--/ko-->\r\n        <!--ko if: (nbPoints() >= maxPointsToBecomeCoach || nbThanks() >= maxThanksToBecomeCoach) && !isCoach() -->\r\n        <div class="popupThankHighlight popupThankHighlightHelped clientFont fontColor" data-bind="i18n:\'popupthank.welldonewithXthanksyoucanjointheYcommunity\', i18nOptions:{nbThanks: maxThanksToBecomeCoach, websiteName: shell.groupName}"><\/div>\r\n        <div class="popupThankHighlight popupThankHighlightHelpedCustom clientFont fontColor"><\/div>\r\n        <br />\r\n\r\n        <div class="popupThankCoachPlatformBenefits">\r\n            <div class="imageWithCaption">\r\n                <div class="image badges"><\/div>\r\n                <div class="caption" data-bind="i18n:\'popupthank.badges\'"><\/div>\r\n            <\/div>\r\n            <div class="imageWithCaption">\r\n                <div class="image friends"><\/div>\r\n                <div class="caption" data-bind="i18n:\'popupthank.friends\'"><\/div>\r\n            <\/div>\r\n            <div class="imageWithCaption">\r\n                <div class="image leaderboards"><\/div>\r\n                <div class="caption" data-bind="i18n:\'popupthank.leaderboards\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <!--ko if: !userChoseCredentials() -->\r\n        <a class="popupGoToCoachBtn clientBoldFont flashColor buttonColor" data-bind="click: goToRegister">\r\n            <span data-bind="i18n:\'popupthank.createmyprofile\'"><\/span>\r\n        <\/a>\r\n        <!--/ko-->\r\n        <!--ko if: userChoseCredentials() -->\r\n        <a class="popupGoToCoachBtn clientBoldFont flashColor" data-bind="click: goToCoachArea">\r\n            <span data-bind="i18n:\'popupyoubecamecoach.gotoyourcoachspace\'"><\/span>\r\n        <\/a>\r\n        <!--/ko-->\r\n        <!--/ko-->\r\n        <!--ko if: (nbPoints() >= maxPointsToBecomeCoach || nbThanks() >= maxThanksToBecomeCoach) && isCoach() -->\r\n        <div class="popupThankHighlight popupThankHighlightHelped clientFont fontColor" data-bind="i18n:\'popupthank.welldoneyouvehelpedastranger\'"><\/div>\r\n        <div class="popupThankHighlight popupThankHighlightHelpedCustom clientFont fontColor"><\/div>\r\n        <div class="popupThankLegend clientFont" data-bind="i18n:\'popupthank.andtheysentyouathanks\'"><\/div>\r\n        <a class="popupGoToCoachBtn clientBoldFont flashColor" data-bind="click: goToCoachArea">\r\n            <span data-bind="i18n:\'miniprofile.yourcoachareaisoverthere\', i18nOptions:{zoneName: (zoneName!=null && zoneName!=\'\') ? zoneName : \'\'}"><\/span>\r\n        <\/a>\r\n        <!--/ko-->\r\n        <div class="clearer"><\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupTutorial.html",[],function(){return'<div class="popupTutorialContain">\r\n    <div class="close" data-bind="click: close"><\/div>\r\n    \r\n    <div class="tutorialStep fadeInFast" data-bind="visible: step() === 1">\r\n        <div class="title">Bienvenue sur la communauté d\'entraide de <span data-bind="text: shell.groupName"><\/span><\/div>\r\n\r\n        <div class="line">\r\n            <div class="icon question"><\/div>\r\n            <div class="description">Aidez les visiteurs du site en répondant à leurs questions<\/div>\r\n        <\/div>\r\n        <div class="line">\r\n            <div class="icon peopleHelped"><\/div>\r\n            <div class="description">Obtenez 3 mercis et devenez coach<\/div>\r\n        <\/div>\r\n    <\/div>\r\n    \r\n    <div class="tutorialStep fadeInFast" data-bind="visible: step() === 2">\r\n        <div class="title">2/3 – Progressez en tant que coach<\/div>\r\n\r\n        <div class="line">\r\n            <div class="icon peopleHelped"><\/div>\r\n            <div class="description">20 personnes aidées&nbsp;: <strong>coach confirmé<\/strong><\/div>\r\n        <\/div>\r\n        <div class="line">\r\n            <div class="icon goldStar"><\/div>\r\n            <div class="description">100 étoiles d\'or&nbsp;: <strong>coach premium<\/strong><\/div>\r\n        <\/div>\r\n        <div class="line">\r\n            <div class="icon validate"><\/div>\r\n            <div class="description">réponses validées&nbsp;: <strong>coach confirmé<\/strong><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    \r\n    <div class="tutorialStep fadeInFast" data-bind="visible: step() === 3">\r\n        <div class="title">3/3 – Soyez récompensé<\/div>\r\n\r\n        <div class="line">\r\n            <div class="icon brand"><\/div>\r\n            <div class="description">Créez un contact privilégié avec la marque<\/div>\r\n        <\/div>\r\n        <div class="line">\r\n            <div class="icon ranking"><\/div>\r\n            <div class="description">Donnez les meilleures réponses et soyez récompensés<\/div>\r\n        <\/div>\r\n        <div class="line">\r\n            <div class="icon giftbox"><\/div>\r\n            <div class="description">Codes promo, tests produits, évènements... <strong>Devenez un véritable ambassadeur<\/strong>&nbsp;!<\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="buttons">\r\n        <button class="previous" data-bind="visible: canDoPrevious(), click: previous"><\/button>\r\n        <!--ko if: canDoNext-->\r\n        <button class="next" data-bind="click: next"><\/button>   \r\n        <!--/ko-->\r\n        <!--ko ifnot: canDoNext-->\r\n        \r\n        <button class="letsgo" data-bind="click: close">C\'est parti !<\/button>\r\n        <!--/ko-->\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupWelcome.html",[],function(){return'<div class="popupWelcome">\r\n    <div data-bind="click:close" class="popupClose"><\/div>\r\n\r\n    <div class="popupWelcomeCustom"><\/div>\r\n\r\n    <div class="popupLegend clientBoldFont">\r\n        <span class="popupHighlight clientBoldFont fontColor " data-bind="i18n:\'popupwelcome.togetpublishedonourwebsiteanswerthelatestvisitorquestions\'"><\/span>\r\n    <\/div>\r\n\r\n    <div class="popupWelcomeBtn" data-bind="i18n:\'popupwelcome.answer\', click:close"><\/div>\r\n\r\n    <div class="clearer"><\/div>\r\n<\/div>\r\n'});n("text!views/_popupYouBecameCoach.html",[],function(){return'﻿<div class="popupYouBecameCoach">\r\n    <div class="popupLegend clientBoldFont">\r\n        <span class="popupHighlight clientBoldFont fontColor" data-bind="i18n:\'popupyoubecamecoach.greatyouarenowcoachX\', i18nOptions: {zoneName: shell.groupName}"><\/span>\r\n    <\/div>\r\n\r\n    <div class="popupYouBecameCoachContain">\r\n        <div class="popupThankCoachPlatformBenefits">\r\n            <div class="imageWithCaption">\r\n                <div class="image badges"><\/div>\r\n            <\/div>\r\n            <div class="imageWithCaption">\r\n                <div class="image friends"><\/div>\r\n            <\/div>\r\n            <div class="imageWithCaption">\r\n                <div class="image leaderboards"><\/div>\r\n            <\/div>\r\n            <div class="hint clientFont" data-bind="i18n:\'popupyoubecamecoach.todiscoveryourbenefits\'"><\/div>\r\n        <\/div>\r\n\r\n        <button class="popupYouBecameCoachGoPlatform" data-bind="i18n:\'popupyoubecamecoach.gotoyourcoachspace\', click: goToCoachArea"><\/button>\r\n        <div class="clearer"><\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/_popupYouNeedToRegisterToAnswer.html",[],function(){return'﻿<div class="popupYouNeedToRegisterToAnswer">\r\n     <div class="popupLegend clientBoldFont">\r\n         <span class="popupHighlight clientBoldFont fontColor" data-bind="i18n:\'popupyouneedtoregistertoanswer.youneedtoregisteronXinordertobeabletoansweraquestion\', i18nOptions: {zoneName: shell.groupName}"><\/span>\r\n     <\/div>\r\n\r\n     <button class="popupBtn" data-bind="i18n:\'common.close\', click: close"><\/button>\r\n     <div class="clearer"><\/div>\r\n<\/div>'});n("text!views/_register.html",[],function(){return'<div>\r\n    <div class="connectContain fadeInFast">\r\n        <div class="loginHeader">\r\n            <div class="loginHeaderLogoToky"><\/div>\r\n            <div class="loginHeaderLegend" data-bind="i18n:\'login.jointhelargestcommunityofhelpfulpeople\'"><\/div>\r\n        <\/div>\r\n\r\n        <div class="socialLogins">\r\n            <div class="" data-bind="compose: {\r\n                model: \'viewmodels/_facebookConnect\',\r\n                view: \'views/_facebookConnect.html\',\r\n                activationData: [\r\n                    data = {\r\n                        userPassword: userPassword,\r\n                        userMail: userMail,\r\n                        action: action,\r\n                        successCallback: successCallback\r\n                    }],\r\n                activate: true }">\r\n            <\/div>\r\n            <div class="separator" data-bind="visible: action() === \'normalLogin\'">\r\n                <div class="label" data-bind="i18n:\'register.or\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <!-- ko if: action() === \'normalLogin\'-->\r\n        <div class="connectLegend clientFont" data-bind="visible: registerType() === \'visitor\', i18n:\'register.registertocreateyourprofileandkeepyourchats\'"><\/div>\r\n        <div class="connectLegend clientFont" data-bind="visible: registerType() === \'coach\', i18n:\'register.createyourcoachprofilenowtogetyourpersonalspaceandaccumulaterewards\'"><\/div>\r\n        <div class="connectLegendCustom clientFont"><\/div>\r\n        <div class="registerPanelContain">\r\n            <form class="registerPanelConnectContain" data-bind="submit:send">\r\n                <input class="connectInput clientFont" type="text" data-bind="value: userNickname, valueUpdate: \'input\', hasFocus: userNicknameHasFocus, css: { inputError: !userNicknameValid() }, i18n:\'[placeholder]register.yournickname\'"/>\r\n                <input class="connectInput clientFont" type="text" data-bind="value: userMail, valueUpdate: \'input\', hasFocus: userMailHasFocus, css: { inputError: !userMailValid() }, i18n:\'[placeholder]common.youremail\'" />\r\n                <input class="connectInput clientFont" type="password" data-bind="value: userPassword, valueUpdate: \'input\', hasFocus: userPasswordHasFocus, css: { inputError: !userPasswordValid() }, i18n:\'[placeholder]common.yourpassword\'" />\r\n\r\n                <div class="optInContain">\r\n                    <input class="clientFont" type="checkbox" id="cguAccepted" data-bind="checked:cguAccepted, value:cguAccepted()"/>\r\n                    <label class="settingsSubtitle clientFont fontColor" for="cguAccepted" data-bind="i18n:\'register.ihavereadandiacceptthe\'"><\/label>\r\n                    <a class="registerCgu" onclick="window.open(\'/popup/cgu/\' + my.groupId, \'cgu TokyWoky\', \'width = 600, height = 300, scrollbars = yes\'); return false; ">\r\n                        <span class="homeCGUSpan" data-bind="i18n:\'register.tandcs\'"><\/span>\r\n                        <span class="homeCGUSpanHidden"><\/span>\r\n                    <\/a>\r\n                    *\r\n                <\/div>\r\n\r\n                <div class="optInContain">\r\n                    <input class="clientFont" type="checkbox" id="enableMarketingMails" data-bind="checked:enableMarketingMails"/>\r\n                    <label class="settingsSubtitle clientFont fontColor enableMarketingMails" for="enableMarketingMails" data-bind="i18n:\'settings.receiveemailsfromGroupName\', i18nOptions:{groupName:groupName}"><\/label>\r\n                    <label class="settingsSubtitle clientFont fontColor enableMarketingMailsCustom" for="enableMarketingMails"><\/label>\r\n                <\/div>\r\n\r\n                <div id="askError" class="askError slideUp" data-bind="visible: error()!=\'\', css:{slideUp: error()!=\'\'}">\r\n                    <span class="clientFont" data-bind="visible:error()==\'BadNicknameLength\', i18n:\'register.yournicknamemustbebetweenXandYcharacterslong\', i18nOptions:{minLength: 3, maxLength: 32}"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'NicknameUnauthorized\', i18n:\'register.thisnicknameisinvalid\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'EmptyNickname\', i18n:\'register.pleaseenteranickname\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'EmptyPassword\', i18n:\'register.pleaseenterapassword\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'PasswordBadLength\', i18n:\'register.yourpasswordmustbebetweenXandYcharacters\', i18nOptions: { \'minChars\': 8, \'maxChars\': 128 }"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'PasswordInvalidComplexity\', i18n:\'register.yourpasswordmustcontainatleastXuppercaselettersYlowercaselettersZdigits\', i18nOptions: { \'upperCaseCount\': 1, \'lowerCaseCount\': 1, \'digitsCount\': 1 }"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'EmailExists\', i18n:\'register.thisemailisalreadyinusetryloggingin\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'InvalidEmail\', i18n:\'register.thisemailisnotvalid\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'cguUnchecked\', i18n:\'register.youmustacceptthetandcs\'"><\/span>\r\n                    <span class="clientFont" data-bind="visible:error()==\'Unknown\', i18n:\'common.error\'"><\/span>\r\n                <\/div>\r\n\r\n                <div class="connectButtonsContain">\r\n                    <button class="connectBtn bgColor flashColor clientBoldFont buttonColor" data-bind="visible:!isLoading(), click:send, i18n:\'register.register\'" type="submit"><\/button>\r\n                    <span class="connectBtn bgColor flashColor clientBoldFont" data-bind="visible:isLoading()"><img src="/Content/images/loaderbar.gif" /><\/span>\r\n                    <div class="goToLogin clientBoldFont" data-bind="click: goToLogin, i18n: \'register.alreadyregistered\'"><\/div>\r\n                <\/div>\r\n            <\/form>\r\n        <\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n<\/div>\r\n'});n("text!views/_ribbon.html",[],function(){return'<div>\r\n    <div id="myChatLinkContainer">\r\n        <div id="myChatLink">\r\n            <div id="chatBtn" class="ribbonContainer" data-bind="click: goToCustomPage">\r\n                <div class="ribbonContent">\r\n                    <div class="ribbonRightArrow"><\/div>\r\n                    <div class="ribbonText clientFont" data-bind="i18n:\'custompage.needcustomerservice\'"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <div id="myChatLinkInfo"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/ask.html",[],function(){return'<div class="appAskContain bgColor">\r\n    <!--ko if:click2ChatIntegration != \'None\'-->\r\n    <div class="click2ChatIntegrationContainer">\r\n        <div class="click2ChatIntegrationCommunity flashColor" data-bind="i18n: \'ask.asktocommunity\'"><\/div>\r\n        <div class="click2ChatIntegrationCustomerService" data-bind="click:click2ChatIntegrationOpen">\r\n            <span>\r\n                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n                     viewBox="0 0 25.916 25.916" style="enable-background: new 0 0 25.916 25.916;" xml:space="preserve"><g><g>\r\n                <path style="fill: #ffffff;" d="M7.938,8.13c0.09,0.414,0.228,0.682,0.389,0.849c0.383,2.666,2.776,4.938,4.698,4.843\r\n                            c2.445-0.12,4.178-2.755,4.567-4.843c0.161-0.166,0.316-0.521,0.409-0.938c0.104-0.479,0.216-1.201-0.072-1.583\r\n                            c-0.017-0.02-0.127-0.121-0.146-0.138c0.275-0.992,0.879-2.762-0.625-4.353c-0.815-0.862-1.947-1.295-2.97-1.637\r\n                            c-3.02-1.009-5.152,0.406-6.136,2.759C7.981,3.256,7.522,4.313,8.078,6.32C8.024,6.356,7.975,6.402,7.934,6.458\r\n                            C7.645,6.839,7.833,7.651,7.938,8.13z" />\r\n                <path style="fill: #ffffff;" d="M23.557,22.792c-0.084-1.835-0.188-4.743-1.791-7.122c0,0-0.457-0.623-1.541-1.037\r\n                            c0,0-2.354-0.717-3.438-1.492l-0.495,0.339l0.055,3.218l-2.972,7.934c-0.065,0.174-0.231,0.289-0.416,0.289\r\n                            s-0.351-0.115-0.416-0.289l-2.971-7.934c0,0,0.055-3.208,0.054-3.218c0.007,0.027-0.496-0.339-0.496-0.339\r\n                            c-1.082,0.775-3.437,1.492-3.437,1.492c-1.084,0.414-1.541,1.037-1.541,1.037c-1.602,2.379-1.708,5.287-1.792,7.122\r\n                            c-0.058,1.268,0.208,1.741,0.542,1.876c4.146,1.664,15.965,1.664,20.112,0C23.35,24.534,23.614,24.06,23.557,22.792z" />\r\n                <path style="fill: #ffffff;" d="M13.065,14.847l-0.134,0.003c-0.432,0-0.868-0.084-1.296-0.232l1.178,1.803l-1.057,1.02\r\n                            l1.088,6.607c0.009,0.057,0.058,0.098,0.116,0.098c0.057,0,0.106-0.041,0.116-0.098l1.088-6.607l-1.058-1.02l1.161-1.776\r\n                            C13.888,14.756,13.487,14.83,13.065,14.847z" />\r\n                    <\/g><\/g>\r\n                <\/svg>\r\n            <\/span>\r\n            <span data-bind="i18n:\'ask.asktocustomerservice\'"><\/span>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <div class="appMenuHomeContain">\r\n        <div class="appMenuHomeText clientBoldFont notSelected" data-bind="i18n:\'menu.communitychat\'"><\/div>\r\n        <div class="appMenuHomeTextCustom clientFont notSelected"><\/div>\r\n    <\/div>\r\n\r\n    <textarea class="appAskInput clientFont" data-bind="emojipicker: { position: \'below\' }, hasFocus: appAskInputHasFocus, value:text, i18n: \'[placeholder]ask.enteryourquestionhere\'"><\/textarea>\r\n    <!--ko if: postsCanHaveImages && imagesUrl().length > 0-->\r\n    <div class="imageChoiceBar">\r\n        <div data-bind="i18n:\'ask.attachanimagefromthispagetoyourquestion\', click: displayImages, visible:!imagesVisible()" class="appAskInputImageLabel clientFont"><\/div>\r\n        <div class="askAddPicButton" data-bind="click:displayImages, visible: !imagesVisible()">\r\n            <span class="cameraFlash bgColor"><\/span>\r\n            <span class="cameraMain bgColor">\r\n                <span class="cameraZoom"><\/span>\r\n                <span class="cameraPlusContainOuter bgColor">\r\n                    <span class="cameraPlusContainInner">\r\n                        <span class="cameraPlusUp bgColor"><\/span>\r\n                        <span class="cameraPlusSide bgColor"><\/span>\r\n                    <\/span>\r\n                <\/span>\r\n            <\/span>\r\n        <\/div>\r\n\r\n        <div class="appAskInputArrowPrevious" data-bind="click:displayPreviousImages, visible: imagesVisible() && displayedImageStartIndex()>0"><\/div>\r\n\r\n        <div data-bind="foreach:displayedImagesUrl, visible: imagesVisible()" class="appAskInputListImages slideRight">\r\n            <div class="appAskInputImageUnit" data-bind="style:{backgroundImage: \'url(\\\'\' + $data + \'\\\')\' }, click:$root.selectImage, css:{\'appAskInputImageUnitSelected\':$data == $root.imageSelected()}"><\/div>\r\n            <span data-bind="visible:$data == $root.imageSelected()" id="checkmark" class="flashColor flashColorReverse">\r\n                <span id="stem"><\/span>\r\n                <span id="kick"><\/span>\r\n            <\/span>\r\n        <\/div>\r\n\r\n        <div class="appAskInputArrowNext" data-bind="click:displayNextImages, visible:imagesVisible() && imagesUrl().length > displayedImageStartIndex() + 5"><\/div>\r\n        <div data-bind="i18n:\'ask.chooseanimageamongthoseshownabove\', visible:imagesVisible()" class="appAskInputImageExplanationLabel clientFont"><\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if:postsCanHaveImages && imagesUrl().length == 0 -->\r\n    <div class="imageChoiceBar">\r\n        <div data-bind="i18n:\'ask.nosuitablepicturefoundonthispage\'" class="appAskInputImageLabel appAskInputNoImageFoundLabel clientFont"><\/div>\r\n        <div class="askAddPicButton askAddPicButtonDisabled">\r\n            <span class="cameraFlash bgColor"><\/span>\r\n            <span class="cameraMain bgColor">\r\n                <span class="cameraZoom"><\/span>\r\n                <span class="cameraPlusContainOuter bgColor">\r\n                    <span class="cameraPlusContainInner">\r\n                        <span class="cameraPlusUp bgColor"><\/span>\r\n                        <span class="cameraPlusSide bgColor"><\/span>\r\n                    <\/span>\r\n                <\/span>\r\n            <\/span>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <div class="appAskOptionLine">\r\n        <!-- ko if: questionToAdminVisible() -->\r\n            <!-- ko if: !shell.sendPostToAdminsByDefault -->\r\n            <div data-bind="if:!postToAdminOnlyIfAdminsNotConnected || isAdminAvailable()">\r\n                <span id="notOnlyForAdmins" class="askCheckbox" data-bind="click: toggleSendToCommunity">\r\n                    <span data-bind="css:{askCheckDisabled: !sendToCommunity()}" class="askCheck">\r\n                        <div class="askCheckStem flashColor"><\/div>\r\n                        <div class="askCheckKick flashColor"><\/div>\r\n                    <\/span>\r\n                <\/span>\r\n                <label for="notOnlyForAdmins" class="optionText clientFont" data-bind="click: toggleSendToCommunity, i18n:\'ask.asktheconnectedvisitors\'"><\/label>\r\n                <label for="notOnlyForAdmins" class="optionTextCustom clientFont" data-bind="click: toggleSendToCommunity"><\/label>\r\n            <\/div>\r\n            <div>\r\n                <span id="onlyForAdmins" class="askCheckbox" data-bind="click: toggleSendToAdmins">\r\n                    <span data-bind="css:{askCheckDisabled: !sendToAdmins()}" class="askCheck">\r\n                        <div class="askCheckStem flashColor"><\/div>\r\n                        <div class="askCheckKick flashColor"><\/div>\r\n                    <\/span>\r\n                <\/span>\r\n                <label for="onlyForAdmins" class="optionText clientFont" data-bind="click: toggleSendToAdmins, i18n:\'ask.askthethegroupnameteam\',i18nOptions:{groupName:groupName}"><\/label>\r\n                <label for="onlyForAdmins" class="optionTextAdminCustom clientFont" data-bind="click: toggleSendToAdmins"><\/label>\r\n                <span class="connectIcon">\r\n                    <span class="lightOn1" data-bind="css: { lightOff1: !isAdminAvailable()}">\r\n                        <span class="lightOn2" data-bind="css: { lightOff2: !isAdminAvailable()}"><\/span>\r\n                    <\/span>\r\n                <\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!-- ko if: shell.sendPostToAdminsByDefault -->\r\n            <div>\r\n                <span id="onlyForAdmins" class="askCheckbox" data-bind="click: toggleSendToAdmins">\r\n                        <span data-bind="css:{askCheckDisabled: !sendToAdmins()}" class="askCheck">\r\n                            <div class="askCheckStem flashColor"><\/div>\r\n                            <div class="askCheckKick flashColor"><\/div>\r\n                        <\/span>\r\n                    <\/span>\r\n                <label for="onlyForAdmins" class="optionText clientFont" data-bind="click: toggleSendToAdmins, i18n:\'ask.askthethegroupnameteam\',i18nOptions:{groupName:groupName}"><\/label>\r\n                <label for="onlyForAdmins" class="optionTextAdminCustom clientFont" data-bind="click: toggleSendToAdmins"><\/label>\r\n                <span class="connectIcon">\r\n                    <span class="lightOn1" data-bind="css: { lightOff1: !isAdminAvailable()}">\r\n                        <span class="lightOn2" data-bind="css: { lightOff2: !isAdminAvailable()}"><\/span>\r\n                    <\/span>\r\n                <\/span>\r\n            <\/div>\r\n            <div data-bind="if:!postToAdminOnlyIfAdminsNotConnected || isAdminAvailable()">\r\n                <span id="notOnlyForAdmins" class="askCheckbox" data-bind="click: toggleSendToCommunity">\r\n                    <span data-bind="css:{askCheckDisabled: !sendToCommunity()}" class="askCheck">\r\n                        <div class="askCheckStem flashColor"><\/div>\r\n                        <div class="askCheckKick flashColor"><\/div>\r\n                    <\/span>\r\n                <\/span>\r\n                <label for="notOnlyForAdmins" class="optionText clientFont" data-bind="click: toggleSendToCommunity, i18n:\'ask.asktheconnectedvisitors\'"><\/label>\r\n                <label for="notOnlyForAdmins" class="optionTextCustom clientFont" data-bind="click: toggleSendToCommunity"><\/label>\r\n            <\/div>\r\n            <!--/ko-->\r\n        <!--/ko-->\r\n        <!-- ko if: showEmailInput() -->\r\n        <div>\r\n            <input id="emailpost" type="text" class="fullSizeInput askMailInput clientFont" data-bind="value:email, i18n:\'[placeholder]ask.enteryouremailaddresshere\'" />\r\n        <\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n    <div class="askSendBtn flashColor clientBoldFont" data-bind="click:send, visible:!postWaiting(), i18n:\'ask.sendmyquestion\'"><\/div>\r\n    <div class="askSendBtnFullSize flashColor clientBoldFont" data-bind="click:send, visible:!postWaiting(), i18n:\'ask.sendmyquestion\'"><\/div>\r\n    <div class="askSendBtnFullSizeCustom flashColor clientBoldFont" data-bind="click:send, visible:!postWaiting()"><\/div>\r\n\r\n    <div id="askInfo" class="askInfo flashColor slideUp" data-bind="visible:info()!=\'\', css:{slideUp: info()!=\'\'}">\r\n        <span data-bind="visible:info()==\'emailSet\', i18n:\'ask.youremailhasbeenset\'"><\/span>\r\n    <\/div>\r\n\r\n    <div class="tooltipPositionContain" data-bind="visible: showTooltip() && tooltipActivated()">\r\n        <div class="tooltipContain tooltipBePolite clientFont">\r\n            <div class="tooltipContainArrow"><\/div>\r\n            <div class="tooltipTitle clientBoldFont" data-bind="i18n:\'ask.befriendly\'"><\/div>\r\n            <div class="tooltipTitleCustom clientBoldFont"><\/div>\r\n            <div class="tooltipClose" data-bind="click: disableTooltip"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="i18n:\'ask.youarewithothervisitors\'"><\/div>\r\n            <div class="tooltipLegendCustom clientFont"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="tooltipPositionContain" data-bind="visible:error() === \'WarningMsgIncomplete\'">\r\n        <div class="tooltipContain tooltipMsgIncomplete clientFont">\r\n            <div class="tooltipContainArrow"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="i18n:\'ask.yourquestionseemsincomplete\'"><\/div>\r\n            <div class="tooltipClose" data-bind="click: hideErrorMessage"><\/div>\r\n            <div class="tooltipLink clientFont" data-bind="click:send, i18n:\'ask.submitanyway\'"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="tooltipPositionContain" data-bind="visible:error() !== \'\' && error() != \'WarningMsgIncomplete\'">\r\n        <div class="tooltipContain tooltipErrorMessage clientFont">\r\n            <div class="tooltipContainArrow"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'noMessage\', i18n:\'ask.pleaseenteramessage\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'noMail\', i18n:\'ask.pleaseinsertanemailaddress\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'noRecipient\', i18n:\'ask.pleaseselectarecipient\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'emailInUse\', i18n:\'ask.emailalreadyexists\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'emailInvalid\', i18n:\'ask.emailisinvalid\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'error\', i18n:\'common.error\'"><\/div>\r\n            <div class="tooltipLegend clientFont" data-bind="visible:error()==\'badLength\', i18n:\'ask.yourquestionistooshortortoolong\'"><\/div>\r\n            <div class="tooltipClose" data-bind="click: hideErrorMessage"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="clientFont askError slideUp" data-bind="visible:error()==\'noMail\', i18n:\'ask.pleaseinsertanemailaddress\', css:{slideUp: error()!=\'\'}"><\/div>\r\n    <div class="clientFont askError slideUp" data-bind="visible:error()==\'noRecipient\', i18n:\'ask.pleaseselectarecipient\', css:{slideUp: error()!=\'\'}"><\/div>\r\n    <div class="clientFont askError slideUp" data-bind="visible:error()==\'emailInUse\', i18n:\'ask.emailalreadyexists\', css:{slideUp: error()!=\'\'}"><\/div>\r\n    <div class="clientFont askError slideUp" data-bind="visible:error()==\'emailInvalid\', i18n:\'ask.emailisinvalid\', css:{slideUp: error()!=\'\'}"><\/div>\r\n    <div class="clientFont askError slideUp" data-bind="visible:error()==\'error\', i18n:\'common.error\', css:{slideUp: error()!=\'\'}"><\/div>\r\n\r\n    <div class="clientBoldFont askCustomerServiceUrlContainer" data-bind="visible:customerServiceUrl != null && customerServiceUrl != \'\'">\r\n        <a class="clientBoldFont" target="_blank" data-bind="attr:{href:customerServiceUrl}, click:customerServiceUrlClick">\r\n            <span class="clientBoldFont askCustomerServiceUrlLink" data-bind="i18n:\'ask.customerservice\'"><\/span>\r\n            <span class="clientBoldFont askCustomerServiceUrlLinkCustom"><\/span>\r\n        <\/a>\r\n    <\/div>\r\n<\/div>'});n("text!views/chat.html",[],function(){return'<div>\r\n    <div class="feedContainWrapper feedContainWrapper-chat">\r\n        \r\n        <!--<div class="chatMobileInputFeedbackTopContain" data-bind="visible: showMobileInputFeedback(), text: chat"><\/div>-->\r\n\r\n        <!--ko if: chatType() != \'Bot\' -->\r\n            <div class="chatTopContain">\r\n                <!--ko if: !isTalkingToAdmin() -->\r\n                <div class="chatFlagLink clientFont" data-bind="click: flag, visible: !otherUserIsFlagged(), i18n:\'chat.flagandblock\'"><\/div>\r\n                <div class="chatFlagLinkFlagged clientFont" data-bind="visible: otherUserIsFlagged(), i18n:\'chat.flaggedanduserblocked\'"><\/div>\r\n                <!--/ko-->\r\n                <div class="chatUserStarsContain" data-bind="compose: { model: \'shared/viewmodels/userDetails\', view: \'shared/views/userDetails.html\', activationData: [otherUserId(), \'chatWidget\'], activate: true }"><\/div>\r\n            <\/div>\r\n\r\n            <!--ko if: !isTalkingToAdmin() -->\r\n            <div class="chatBanner fadeInFast">\r\n                <div class="chatTitleTextContain">\r\n                    <div class="chatTitleText" data-bind="i18n:\'chat.livechatwithX\', i18nOptions: {userName: otherUserNickname}"><\/div>\r\n                    <!--ko if: isAsker() -->\r\n                    <span class="chatTitleLegend" data-bind="i18n:\'chat.dontforgettosendathankyou\'"><\/span>\r\n                    <!-- /ko -->\r\n                    <!--ko if:typeof urlPosted() != \'undefined\' && urlPosted() != null-->\r\n                    <a class="chatTitleUrlPosted" target="_blank" data-bind="i18n:\'chat.openrelatedpage\', attr:{href:urlPosted}"><\/a>\r\n                    <!--/ko-->\r\n                <\/div>\r\n            <\/div>\r\n            <!--/ko -->\r\n            <!--ko if: isTalkingToAdmin() -->\r\n            <div class="chatBanner fadeInFast">\r\n                <div class="chatTitleTextContain">\r\n                    <div class="chatTitleText" data-bind="i18n:\'chat.youarechattinginprivatewithamemberof\'"><\/div>\r\n                    <div class="adminFontColor">\r\n                        <span data-bind="i18n:\'chat.theXteam\', i18nOptions: {name: groupName}"><\/span>\r\n                    <\/div>\r\n                    <div class="chatAdminCustom"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <!-- /ko -->\r\n            <!--ko if: !isAsker() && chatType() === "AnswerComment" -->\r\n            <div class="chatBanner fadeInFast">\r\n                <div class="chatTitleTextContain">\r\n                    <span class="chatTitleText" data-bind="i18n:\'chat.thispremiumcoachhascorrectedanansweryoureceived\'"><\/span>\r\n                    <!--ko if: answerComment() !== null -->\r\n                    <div class="answerComment" data-bind="text: answerComment().AnswerText, emojify"><\/div>\r\n                    <!-- /ko -->\r\n                <\/div>\r\n            <\/div>\r\n            <!-- /ko -->\r\n        <!--/ko-->\r\n\r\n        <div class="feedContain">\r\n            <div class="displayPreviousMsgs fontColor clientFont" data-bind="visible: !loading() && nextBtnVisible(), click: next, i18n:\'chat.displaypreviousmessages\'"><\/div>\r\n\r\n            <div class="chatContain" data-bind="foreach: {data: chats, afterRender: chatsRendered }">\r\n\r\n                <div class="chatUserProfilPic" data-bind="css: { oddPicture : oddOrEven == \'odd\', evenPicture: oddOrEven == \'even\' }">\r\n                    <div class="chatUserStarsContain" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [\r\n                                 data = {\r\n                                    userId: UserDetails.Id,\r\n                                    nickname: UserDetails.Nickname,\r\n                                    userProfilePicture: UserDetails.Picture\r\n                                 },\r\n                                 options = {\r\n                                    referenceElementSelector: \'.feedContain\',\r\n                                    style: \'miniPicture\'\r\n                                 }],\r\n                                 activate: true \r\n                         }">\r\n                    <\/div>\r\n                <\/div>\r\n\r\n                <div class="chatBubble" data-bind="css: className">\r\n                    <div class="chatText clientFont">\r\n                        <!--ko if: typeof attachements != \'undefined\' && attachements != null-->\r\n                        <!--ko foreach:attachements-->\r\n                        <!--ko if:Type==1-->\r\n                        <div class="chatTextImage">\r\n                            <img data-bind="attr:{src:ImageUrl}"/>\r\n                            <div class="chatTextImageTitle fontColor clientBoldFont" data-bind="text:Title"><\/div>\r\n                        <\/div>\r\n                        <!--/ko-->\r\n                        <!--/ko-->\r\n                        <!--/ko-->\r\n                        <span data-bind="customhtml: text, emojify"><\/span>\r\n                        <!--ko if: typeof attachements != \'undefined\' && attachements != null-->\r\n                        <!--ko foreach:attachements-->\r\n                        <!--ko if:Type==0-->\r\n                        <div class="chatTextButtons">\r\n                            <!--ko foreach:ChatButtons-->\r\n                            <div class="fontColor clientBoldFont" data-bind="text: Title, click: $root.buttonClick.bind($data, Value)"><\/div>\r\n                            <!--/ko-->\r\n                        <\/div>\r\n                        <!--/ko-->\r\n                        <!--/ko-->\r\n                        <!--/ko-->\r\n                    <\/div>\r\n                    <div class="clearer"><\/div>\r\n                <\/div>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n\r\n            <div class="chatContain typing slideLeftNoBounce" data-bind="visible: otherIsTyping()">\r\n                <div class="chatBubble oddBubble">\r\n                    <div class="chatText clientFont">...<\/div>\r\n                <\/div>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n\r\n            <div class="chatContain typing slideUpNoBounce" data-bind="visible: showMobileInputFeedback()">\r\n                <div class="chatUserProfilPic evenPicture">\r\n                    <div class="chatUserStarsContain" data-bind="compose: {\r\n                                     model: \'shared/viewmodels/userDetailsMini\',\r\n                                     view: \'shared/views/userDetailsMini.html\',\r\n                                     activationData: [\r\n                                     data = {\r\n                                        userId: shell.userId(),\r\n                                        nickname: shell.userNickname(),\r\n                                        userProfilePicture: shell.profilePic()\r\n                                     },\r\n                                     options = {\r\n                                        referenceElementSelector: \'.feedContain\',\r\n                                        style: \'miniPicture\'\r\n                                     }],\r\n                                     activate: true\r\n                             }">\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="chatBubble even">\r\n                    <div class="chatText clientFont">\r\n                        <pre data-bind="visible: chat() === null || chat() === \'\'">&nbsp;<\/pre>\r\n                        <pre data-bind="visible: chat() !== null && chat() !== \'\', customhtml: chat, emojify"><\/pre>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n\r\n            <!--ko if: rating.show() && chatType() === "Answer" && isAsker() && !loading() -->\r\n            <!--ko if: !rating.gotNoThanks() -->\r\n            <div class="chatBottomContain">\r\n                <div class="chatBottomOpenOpenCta" data-bind="visible: bottomBarIsCollapsed(), click:expandBottomBar"><\/div>\r\n                <a class="ratingCollapsedText" data-bind="visible: bottomBarIsCollapsed(), click:expandBottomBar, i18n:\'chat.ratethisdiscussion\'"><\/a>\r\n\r\n                <div class="chatBottomOpenCloseButton" data-bind="visible: !bottomBarIsCollapsed() && !feedbackWasSent(), click:collapseBottomBar">✖<\/div>\r\n                <div class="chatRatingBoxContain" data-bind="visible: !bottomBarIsCollapsed(), compose: {\r\n                        model: \'shared/viewmodels/ratingBox\',\r\n                        view: \'shared/views/ratingBox.html\',\r\n                        activationData: [\r\n                            data = {\r\n                                answerId: rating.answerId,\r\n                                thanksGiven: rating.gotThanks,\r\n                                noThanksGiven: rating.gotNoThanks(),\r\n                                selectedStar: rating.pointLevel,\r\n                                feedbackText: rating.feedbackText,\r\n                                followerId: rating.otherUserId,\r\n                                followCoachStatus: rating.otherUserFollowerStatus,\r\n                                isTalkingToAdmin: isTalkingToAdmin()\r\n                            },\r\n                            options = {\r\n                                showFollowCoachOption: rating.otherUserIsCoach && !isTalkingToAdmin()\r\n                            },\r\n                            callbacks = {\r\n                                noThanksSent: noThanksSent,\r\n                                thanksSent: thanksSent,\r\n                                starSent: starSent,\r\n                                feedbackSent: feedbackSent,\r\n                                openFeedback: feedbackOpened,\r\n                                closeFeedback: feedbackClosed\r\n                            }\r\n                        ],\r\n                        activate: true,\r\n                        cacheViews: false\r\n                }">\r\n                <\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--/ko-->\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <form class="chatCmdContainer" action="#" data-bind="submit: send, visible: !isClosed()">\r\n        <!--ko if: shell.isDesktop() -->\r\n        <textarea class="chatUserInput clientFont" rows="1" data-bind="emojipicker, hasFocus: inputHasFocus, autoExpandTextareaChat, value:chat, valueUpdate: \'input\', enterkey: send, i18n: \'[placeholder]chat.typetoreply\'"><\/textarea>\r\n        <!--/ko-->\r\n        <!--ko if: !shell.isDesktop() -->\r\n        <input class="chatUserInput clientFont" rows="1" data-bind="emojipicker, hasFocus: inputHasFocus, value:chat, valueUpdate: \'input\', i18n: \'[placeholder]chat.typetoreply\'" />\r\n        <!--/ko-->\r\n        <button class="chatSendBtn bgColor" type="submit" data-bind="i18n:\'chat.submit\', textfill"><\/button>\r\n        <button class="chatSendBtnCustom bgColor" type="submit"><\/button>\r\n    <\/form>\r\n    <div class="chatCmdContainer chatCmdContainerMessage" data-bind="visible:isClosed()">\r\n        <p data-bind="chat.thisconversationisoverifyouhaveaquestionpleaseclickonhometoaskit"><\/p>\r\n    <\/div>\r\n\r\n<\/div>\r\n\r\n'});n("text!views/customPage.html",[],function(){return'<div class="customPage">\r\n    <div class="customPageTitle" data-bind="i18n:\'custompage.title\'"><\/div>\r\n    <div class="customPageContent" data-bind="i18n:\'custompage.content\'"><\/div>\r\n<\/div>'});n("text!views/faq.html",[],function(){return'<div>\r\n    <div class="feedContainWrapper feedContainWrapper-faq">\r\n        <div class="feedContain faqContain">\r\n            <div class="faqHeader" data-bind="i18n:\'faq.welcometotokywoky\'"><\/div>\r\n            <div class="faqHeaderCustom"><\/div>\r\n\r\n            <div class="faqText faqTokyDescription" data-bind="i18n:\'faq.tokydescription\'"><\/div>\r\n            <div class="faqText faqTokyDescriptionCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleWhoIsAnswering" data-bind="i18n:\'faq.whoisanswering\'"><\/div>\r\n            <div class="faqTitle faqTitleWhoIsAnsweringCustom"><\/div>\r\n\r\n            <div class="faqText faqWhoIsAnsweringAnswer" data-bind="i18n:\'faq.whoisansweringanswer\'"><\/div>\r\n            <div class="faqText faqWhoIsAnsweringAnswerCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleHowToAskQuestion" data-bind="i18n:\'faq.howtoaskaquestion\'"><\/div>\r\n            <div class="faqTitle faqTitleHowToAskQuestionCustom"><\/div>\r\n\r\n            <div class="faqText faqTextHowToAskQuestion" data-bind="i18n:\'faq.howtoaskaquestionanswer\'"><\/div>\r\n            <div class="faqText faqTextHowToAskQuestionCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleHowToAnswerQuestion" data-bind="i18n:\'faq.howtoansweraquestion\'"><\/div>\r\n            <div class="faqTitle faqTitleHowToAnswerQuestionCustom"><\/div>\r\n\r\n            <div class="faqText faqTextHowToAnswerQuestion" data-bind="i18n:\'faq.howtoansweraquestionanswer\'"><\/div>\r\n            <div class="faqText faqTextHowToAnswerQuestionCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleWhatsAThanksAnswer" data-bind="i18n:\'faq.whatsathanks\'"><\/div>\r\n            <div class="faqTitle faqTitleWhatsAThanksAnswerCustom"><\/div>\r\n\r\n            <div class="faqText faqTextWhatsAThanksAnswer" data-bind="i18n:\'faq.whatsathanksanswer\'"><\/div>\r\n            <div class="faqText faqTextWhatsAThanksAnswerCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleWhatsACoach" data-bind="i18n:\'faq.whatsacoach\'"><\/div>\r\n            <div class="faqTitle faqTitleWhatsACoachCustom"><\/div>\r\n\r\n            <div class="faqText faqTextWhatsACoach" data-bind="i18n:\'faq.whatsacoachanswer\'"><\/div>\r\n            <div class="faqText faqTextWhatsACoachCustom"><\/div>\r\n\r\n            <div class="faqTitle faqTitleCanIGetDiscounts" data-bind="i18n:\'faq.canigetdiscountsbyansweringontokywoky\'"><\/div>\r\n            <div class="faqTitle faqTitleCanIGetDiscountsCustom"><\/div>\r\n\r\n            <div class="faqText faqTextCanIGetDiscounts" data-bind="i18n:\'faq.canigetdiscountsbyansweringontokywokyanswer\'"><\/div>\r\n            <div class="faqText faqTextCanIGetDiscountsCustom"><\/div>\r\n\r\n            <div class="faqTitle titleCustomCommunity"><\/div>\r\n\r\n            <div class="faqText textCustomCommunity"><\/div>\r\n\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/home.html",[],function(){return'<div>\r\n    <div class="feedContainWrapper feedContainWrapper-home">\r\n        <!--ko if: !isCharteAccepted()-->\r\n        <div class="homeCharte">\r\n            <div class="homeCharteText" data-bind="i18n:\'home.charte\'"><\/div>\r\n            <div class="homeCharteButton" data-bind="click:acceptsCharte, i18n:\'home.iaccept\'"><\/div>\r\n        <\/div>\r\n        <!--/ko-->\r\n        <div class="feedContain">\r\n            <div class="askContainer">\r\n                <!--ko compose: \'viewmodels/ask\'--><!--/ko-->\r\n            <\/div>\r\n\r\n            <div class="appAskLegendContain">\r\n                <div class="appAskLegend clientBoldFont" data-bind="i18n:\'home.helptheothervisitorsandbecomecoach\'"><\/div>\r\n                <div class="appAskLegendCustom clientBoldFont"><\/div>\r\n                <div class="appAskLegendDetail clientFont" data-bind="i18n:\'home.answerthemandchatinprivate\'"><\/div>\r\n                <div class="appAskLegendDetailCustom clientFont"><\/div>\r\n                <div class="homeCGU">\r\n                    <a onclick="window.open(\'/popup/cgu/\' + my.groupId, \'cgu TokyWoky\', \'width = 600, height = 300, scrollbars = yes\'); return false; "><span class="homeCGUSpan" data-bind="i18n:\'home.tandcs\'"><\/span><span class="homeCGUSpanHidden"><\/span><\/a>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="homeQuestionsWrapper" data-bind="visible: shell.isReady()">\r\n                <div class="homeCustomerServiceInfo" data-bind="i18n:\'custompage.title\'"><\/div>\r\n                <!--ko foreach:posts-->\r\n                <div class="questionBox slideDown" data-bind="attr: {id: \'post-\' + Id}">\r\n                    <span class="questionBoxTime clientFont" data-bind="text:DatePosted == \'\' ? moment.utc(moment(), \'YYYY-MM-DDTHH:mm:ss.SSS\').fromNow() : moment.utc(DatePosted, \'YYYY-MM-DDTHH:mm:ss.SSS\').fromNow()"><\/span>\r\n                    <div class="questionBoxContent" data-bind="css:{\'questionBoxRightImg\':ImageUrl}">\r\n                        <span class="questionBoxUserImage">\r\n                            <!--ko if:$data.hasOwnProperty(\'UserDetails\') && $data.UserDetails.hasOwnProperty(\'Picture\') && $data.UserDetails.Picture != null-->\r\n                            <img data-bind="attr:{src:UserDetails.Picture}"/>\r\n                            <!--/ko-->\r\n                        <\/span>\r\n                        <div class="chatUserStarsContain" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [\r\n                                 data = {\r\n                                    userId: UserDetails.Id,\r\n                                    nickname: UserDetails.Nickname,\r\n                                    countPerLevel: UserDetails.UserLevels,\r\n                                    nbPeopleHelped: UserDetails.NbPeopleHelped\r\n                                 },\r\n                                 options = {\r\n                                    userDetailsPopupStyle: \'goToProfile\',\r\n                                    referenceElementSelector: \'.feedContain\'\r\n                                 }],\r\n                                 activate: true }">\r\n                        <\/div>\r\n                        <div class="clearer"><\/div>\r\n                        <div class="questionBoxText clientFont">\r\n                            <!--ko if:$root.postsCanHaveImages && $data.ImageUrl-->\r\n                            <img class="questionBoxImg" data-bind="attr:{src:ImageUrl}, click:typeof $data.imageClick==\'undefined\' ? null : imageClick"/>\r\n                            <!--/ko-->\r\n\r\n                            <!--ko if:typeof $data.imageClick != \'undefined\' && typeof $data.UrlPosted != \'undefined\'-->\r\n                            <a class="questionBoxEye" data-bind="visible:UrlPosted != null && UrlPosted != \'\', attr:{href:UrlPosted}, event: {mouseover: showTitle, mouseout: hideTitle}" target="_blank"><\/a>\r\n                            <span class="designTitle" data-bind="i18n:\'home.seetherelatedpage\', css: {show: titleShown}"><\/span>\r\n                            <!--/ko-->\r\n\r\n                            <pre class="feedText clientFont" data-bind="visible:Text.length > 512 && !isOpened(), customhtml:Text, truncatedText:Text, length:512, emojify"><\/pre>\r\n                            <pre class="feedText clientFont" data-bind="visible: isOpened() || Text.length <= 512, customhtml:Text, emojify"><\/pre>\r\n                            <div class="feedSeeAnswersLink clientFont" data-bind="visible: !isOpened() && Text.length > 512, click:isOpened, i18n:\'ask.readmore\'"><\/div>\r\n\r\n                            <!--ko if:typeof $data.CustomVarValueSelected != \'undefined\' && $data.CustomVarValueSelected != null-->\r\n                            <div class="questionBoxCustomVarValueSelected clientFont" data-bind="text:CustomVarValueSelected"><\/div>\r\n                            <!--/ko-->\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div class="clearer"><\/div>\r\n\r\n                    <!--ko if:!alreadyAnswered() && $root.userId() != UserDetails.Id-->\r\n                    <div class="homeFeedInputContain">\r\n                        <!--ko if: !$root.canAnswerOnlyWithSsoAndHasNoSso()-->\r\n                        <textarea rows="1" class="feedInput clientFont" data-bind="emojipicker, autoExpandTextareaChat, attr:{id: \'answerInput-\' + Id}, value:answer, valueUpdate: \'afterkeydown\', i18n: \'[placeholder]home.replytothisquestion\'"><\/textarea>\r\n\r\n                        <!--/ko-->\r\n\r\n                        <!--ko if: $root.canAnswerOnlyWithSsoAndHasNoSso()-->\r\n                        <div class="feedInput clientFont" data-bind="click: ssoRequiredToAnswer, attr:{id: \'answerInput-\' + Id}, i18n: \'home.replytothisquestion\'"><\/div>\r\n                        <!--/ko-->\r\n                        <div class="feedInputSend fontColor clientFont">\r\n                            <button class="questionBoxButton clientBoldFont flashColor buttonColor" data-bind="click:send, i18n:\'common.send\', visible:answer().length > 0"><\/button>\r\n                            <button disabled class="questionBoxButton questionBoxButtonDisabled clientBoldFont" data-bind="click:send, i18n:\'common.send\', visible:answer().length == 0"><\/button>\r\n                            <div class="clearer"><\/div>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <div class="clearer"><\/div>\r\n                    <!--/ko-->\r\n\r\n                    <div data-bind="visible:$root.userId() == UserDetails.Id, i18n:\'home.yourquestionwassubmitted\', i18nOptions:{count:NbAnswers()}, click:$root.goToQuestions" class="fontColor clientBoldFont questionBoxHasBeenSent"><\/div>\r\n                    <div data-bind="visible:$root.userId() == UserDetails.Id, click:$root.goToQuestions" class="fontColor clientBoldFont questionBoxHasBeenSentCustom"><\/div>\r\n                    <div class="clearer"><\/div>\r\n\r\n                    <!--ko if:alreadyAnswered()-->\r\n                    <div class="homeAlreadyAnswered" data-bind="i18n:\'home.youalreadyrepliedtothisquestion\'"><\/div>\r\n                    <!--/ko-->\r\n\r\n                    <!--ko if: $root.userId() != UserDetails.Id && !answersVisible()-->\r\n                    <div class="questionBoxNbAnswers fontColor" data-bind="visible: $root.showAnswersInModule == \'None\' && answers().length > 0">\r\n                        <div class="questionBoxAnswerersContain" data-bind="foreach: answers">\r\n                            <div class="chatUserStarsContain" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [\r\n                                 data = {\r\n                                    userId: UserDetails.Id,\r\n                                    nickname: UserDetails.Nickname,\r\n                                    userProfilePicture: UserDetails.Picture\r\n                                 },\r\n                                 options = {\r\n                                    userDetailsPopupStyle: \'goToProfile\',\r\n                                    referenceElementSelector: \'.feedContain\',\r\n                                    style: \'miniPicture\'\r\n                                 }],\r\n                                 activate: true }">\r\n                            <\/div>\r\n                        <\/div>\r\n                        <span data-bind="i18n:\'home.alreadyreplied;[title]home.haveyouananswertoo\'" class="alreadyReplied"><\/span>\r\n                        <span class="alreadyRepliedCustom"><\/span>\r\n                    <\/div>\r\n                    <!--ko if: $root.showAnswersInModule == \'OnClick\' -->\r\n                    <div data-bind="visible:NbAnswers() == 1 && $root.userId() != UserDetails.Id, i18n:\'home.already1answer;[title]home.haveyouananswertoo\', click:showAnswers" class="questionBoxNbAnswersClickable fontColor"><\/div>\r\n                    <div data-bind="visible:NbAnswers() > 1 && $root.userId() != UserDetails.Id, i18n:\'home.alreadyXanswers;[title]home.haveyouananswertoo\', i18nOptions:{nbAnswers:NbAnswers()}, click:showAnswers" class="questionBoxNbAnswersClickable fontColor"><\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <!--ko if: answersVisible() && NbAnswers() > 2 && $root.showAnswersInModule == \'First2\' && $root.userId() != UserDetails.Id -->\r\n                    <div data-bind="i18n:\'home.firstXanswers\', i18nOptions:{nbAnswers:NbAnswers()}" class="questionBoxNbAnswers fontColor"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n\r\n                <!--ko if: answersVisible() && $root.userId() != UserDetails.Id -->\r\n                <div class="answerBoxContain answerBoxContainPublic slideDown">\r\n                    <!--ko foreach:visibleAnswers -->\r\n                    <div class="answerBoxWrapper">\r\n                        <div class="answerBox" data-bind="attr: {id: \'answer-\' + Id}">\r\n                            <div class="answerBoxTime" data-bind="text:moment.utc(DateAnswered).fromNow()"><\/div>\r\n                            <div class="answerBoxContent" data-bind="css: { pullDown: isNew }, template: { afterRender: $root.answerRendered }">\r\n                                <div class="chatUserStarsContain" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [{\r\n                                    userId: UserDetails.Id,\r\n                                    nickname: UserDetails.Nickname,\r\n                                    countPerLevel: UserDetails.UserLevels,\r\n                                    nbPeopleHelped: UserDetails.NbPeopleHelped,\r\n                                    isCertified: UserDetails.IsCertified,\r\n                                    isAdmin: UserDetails.IsAdmin\r\n                                 },\r\n                                 options = {\r\n                                    userDetailsPopupStyle: \'goToProfile\',\r\n                                    referenceElementSelector: \'.feedContain\'\r\n                                 }],\r\n                                 activate: true }">\r\n                                <\/div>\r\n                                <pre class="feedText" data-bind="visible: !isOpened() && Text.length>512, truncatedText:Text, length:512, emojify"><\/pre>\r\n                                <div class="feedSeeAnswersLink" data-bind="visible: !isOpened() && Text.length>512, click:isOpened, i18n:\'ask.readmore\'"><\/div>\r\n                                <pre class="feedText" data-bind="visible: isOpened() || Text.length<=512, customhtml:Text, emojify"><\/pre>\r\n                            <\/div>\r\n\r\n                            <div class="answerBoxTriangle"><\/div>\r\n\r\n                        <\/div>\r\n                        <div class="clearer"><\/div>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: NbAnswers() > 2 && !allAnswersVisible() -->\r\n                    <div class="answerBoxAnswersCount slideDown fontColor" data-bind="attr:{id: \'post-\' + Id + \'-seemoreanswers\'}">\r\n                        <span data-bind="i18n:\'ask.seetheXotheranswers_plural\', i18nOptions:{answersCount: NbAnswers() - 2 }, click: seeAllAnswers"><\/span>\r\n                    <\/div>\r\n                    <!-- /ko -->\r\n                <\/div>\r\n                <!-- /ko -->\r\n                <!--/ko-->\r\n            <\/div>\r\n            <div class="homeLoading" data-bind="visible: posts().length !== 0 && isLoadingPosts()">\r\n                <div class="outer spin-pulse"><\/div>\r\n            <\/div>\r\n\r\n            <div data-bind="visible: (posts().length==0 && isLoadingPosts()) || !shell.isReady()" class="loadingToky"><span class="loadingTokyMessage" data-bind="i18n:\'home.tokywokyislookingforthelastvisitorsquestions\'"><\/span><\/div>\r\n            <div data-bind="visible:posts().length==0 && !isLoadingPosts(), i18n:\'home.therearenoquestionsonXfornowcomebacklater\', i18nOptions:{groupName:groupName}" class="postsEmpty boldFont"><span data-bind="customhtml:groupName"><\/span><\/div>\r\n\r\n            <div data-bind="visible:posts().length==0 && !isLoadingPosts()" class="postsEmptyCustom boldFont"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/index.html",[],function(){return"<div>\r\n    \r\n<\/div>"});n("text!views/messages.html",[],function(){return'<div>\r\n    <!--ko compose: \'viewmodels/_globalOwnProfile\'--><!--/ko-->\r\n    <div data-bind="visible:!isPasswordChosen() && userEmail() != null && userEmail() != \'\', click:goToSettings, i18n:\'discussions.confirmyouraccounthere\'" class="notifPasswordNotChosen"><\/div>\r\n    <div class="clearer"><\/div>\r\n\r\n    <div class="feedContainWrapper feedContainWrapper-discussions">\r\n        <div class="feedContain">\r\n            <!--ko foreach: discussions-->\r\n            <div class="discussionBox" data-bind="css: {unread: GotNotif()}, attr:{id: \'message_\' + Id}, click: displayChat">\r\n\r\n                <div class="discussionProfileRow">\r\n                    <div class="discussionNotif flashColor clientBoldFont" data-bind="visible: GotNotif(), click: displayChat"><\/div>\r\n                    <!--ko if:Type != "Bot"-->\r\n                    <div class="discussionUserProfile" data-bind="compose: {\r\n                             model: \'shared/viewmodels/userDetails\',\r\n                             view: \'shared/views/userDetails.html\',\r\n                             activationData: [OtherUser().Id, null, null, GotNotif()],\r\n                             activate: true\r\n                        }"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if:Type == "Bot"-->\r\n                    <div class="userDetailsBot">\r\n                        <div class="userDetailsPicture">\r\n                            <div class="defaultProfilePicture"><\/div>\r\n                        <\/div>\r\n                        <div class="userDetailsName">\r\n                            <span data-bind="text:$parent.groupName"><\/span>\r\n                        <\/div>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <div class="notificationsChatBtn" data-bind="click: displayChat"><\/div>\r\n                    <div class="clearer"><\/div>\r\n                <\/div>\r\n\r\n                <div class="discussionTextRow">\r\n                    <div class="discussionContent">\r\n                        <div class="discussionText">\r\n                            <pre class="clientFont" data-bind="customhtml: Text, truncatedText:Text, length:61, emojify, css: {unread: GotNotif()}"><\/pre>\r\n                        <\/div>\r\n                    <\/div>\r\n\r\n                    <!--ko if: PosterUserId() == $root.userId() -->\r\n                    <!--ko if: Type === "Answer" -->\r\n                    <div class="notificationRatingBoxContain" data-bind="compose: {\r\n                     model: \'shared/viewmodels/ratingBox\',\r\n                     view: \'shared/views/ratingBox.html\',\r\n                     activationData: [\r\n                         data = {\r\n                            answerId: rating.answerId,\r\n                            thanksGiven: rating.gotThanks,\r\n                            noThanksGiven: rating.gotNoThanks,\r\n                            selectedStar: rating.pointLevel,\r\n                            feedbackText: rating.feedbackText,\r\n                            followerId: rating.otherUserId,\r\n                            followCoachStatus: rating.otherUserFollowerStatus,\r\n                            isTalkingToAdmin: OtherUser().IsAdmin\r\n                         },\r\n                         options = {\r\n                            showFollowCoachOption: rating.otherUserIsCoach,\r\n                            hideNotUseful: true,\r\n                            showRecommandation: false\r\n                         },\r\n                         callbacks = {\r\n                            noThanksSent: noThanksSent,\r\n                            thanksSent: thanksSent,\r\n                            starSent: starSent,\r\n                            feedbackSent: feedbackSent,\r\n                            openFeedback: feedbackOpened,\r\n                            closeFeedback: feedbackClosed\r\n                         }\r\n                     ],\r\n                     activate: true,\r\n                     cacheViews: false }"><\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                <\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <div class="feedContain" data-bind="visible: isLoadingDiscussions()">\r\n                <div class="questionsLoading">\r\n                    <div class="outer spin-pulse"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="discussionEmpty clientBoldFont" data-bind="visible: discussions().length==0 && !isLoadingDiscussions()">\r\n                <div class="discussionEmptyIcon"><\/div>\r\n                <div class="discussionEmptyText" data-bind="i18n:\'discussions.youdonthaveanychatsyet\'"><\/div>\r\n                <div class="discussionEmptySubText" data-bind="i18n:\'discussions.answerquestionstocreatesome\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/minimized.html",[],function(){return'<div style="height: 100%">\r\n    <!--ko if:!isMobile() && !isTablet() && getBigMinimizedToky && step() == 0-->\r\n    <div class="miniWrapper" data-bind="css:{slideLeft:gotPostNotif()}, css:{bigMinimized:getBigMinimizedToky}">\r\n        <div class="minimizedBarImageEmpty"><\/div>\r\n        <div class="minimizedSideBar titleBarColor">\r\n            <div class="miniNotif flashColor floating" data-bind="text:allNotifsInbox(), visible:allNotifsInbox()>0,click:maximizedAfterClickOnNotif, clickBubble: false"><\/div>\r\n        <\/div>\r\n\r\n        <div class="miniContain" data-bind="css:{\'minimizedAskYourQuestion\':post() == null, \'minimizedVisitorsQuestion\':post() != null }">\r\n            <!-- ko if:post() == null -->\r\n            <div class="messenger clientBoldFont" data-bind="click:maximize">\r\n                <div class="messengerAsk clientBoldFont" data-bind="i18n:\'minimized.askaquestion\'"><\/div><div class="messengerEmptyAsk clientBoldFont" data-bind="textfill: { widthOnly: false }"><\/div><span class="miniLogoTitleBar"><\/span>\r\n            <\/div>\r\n            <div class="visitorsAskIconEmpty"><\/div>\r\n            <textarea class="miniQuestionBubble" placeholder="" data-bind="value: question,i18n:\'[placeholder]minimized.enteryourquestionhere\',hasFocus: appAskInputHasFocus"><\/textarea>\r\n            <div class="miniQuestionBubbleTriangle"><\/div>\r\n            <!-- ko if: error() !== \'WarningMsgIncomplete\' -->\r\n            <div class="miniAskBtn flashColor clientFont" data-bind="i18n:\'minimized.sendyourquestiontoothervisitors\', click:goToStepTwo"><\/div>\r\n            <div class="miniAskBtnCustom flashColor clientFont" data-bind="click:goToStepTwo"><\/div>\r\n            <!--/ko-->\r\n\r\n            <div class="warningMsgIncompleteContain" data-bind="visible:error() === \'WarningMsgIncomplete\'">\r\n                <div class="warningMsgIncompleteText" data-bind="i18n:\'ask.yourquestionseemsincomplete\'"><\/div>\r\n                <div class="warningMsgIncompleteSendAnyway" data-bind="click:goToStepTwo,i18n:\'ask.submitanyway\'"><\/div>\r\n                <div class="flashColor warningMsgIncompleteUpdate" data-bind="click:updateMyQuestion,i18n:\'ask.edit\'"><\/div>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n\r\n            <div class="clientFont askError slideUp" data-bind="visible:error()==\'noMessage\', i18n:\'ask.pleaseenteramessage\', css:{slideUp: error()!=\'\'}"><\/div>\r\n            <div class="clientFont askError slideUp" data-bind="visible:error()==\'badLength\', i18n:\'ask.yourquestionistooshortortoolong\', css:{slideUp: error()!=\'\'}"><\/div>\r\n\r\n            <div class="answerOpenTokyWoky" data-bind="click:maximize, i18n:\'minimized.helpotherpeople\'"><\/div>\r\n            <div class="answerOpenTokyWokyCustom" data-bind="click:maximize"><\/div>\r\n            <!--/ko-->\r\n            <!-- ko if:post() != null -->\r\n            <div class="messenger clientBoldFont" data-bind="click:maximize">\r\n                <!-- ko if:!userNickname() || userNickname() === ""-->\r\n                <span class="messengerAnswer" data-bind="i18n:\'minimized.canyouhelp\'"><\/span>\r\n                <!--/ko-->\r\n                <!-- ko if:userNickname() != null && userNickname() !== ""-->\r\n                <span class="messengerAnswer" data-bind="i18n:\'minimized.canyouhelp\'"><\/span>\r\n                <!--/ko-->\r\n                <div class="messengerEmptyAnswer clientBoldFont"><\/div><span class="miniLogoTitleBar"><\/span>\r\n            <\/div>\r\n            <div class="miniQuestionBubbleClickable" data-bind="click:maximize">\r\n                <div class="miniUserName fontColor clientBoldFont" data-bind="i18n:\'minimized.visitorsquestion\'"><\/div>\r\n                <div class="visitorsQuestionIconEmpty"><\/div>\r\n                <div class="miniText clientFont" data-bind="customhtml:post().Text.length > 30 ? post().Text.substring(0,30)+\'...\':post().Text, emojify"><\/div>\r\n                <div class="miniTextFull clientFont" data-bind="customhtml:post().Text, emojify"><\/div>\r\n                <div class="miniTextCustom clientFont"><\/div>\r\n            <\/div>\r\n            <div class="miniQuestionBubbleTriangle"><\/div>\r\n\r\n            <!-- Test : Input and button open widget\r\n            --------------------------------------------------------------\r\n                <input type="text" class="miniInput clientFont" data-bind="i18n:\'[placeholder]minimized.answerhere\', value:answer, valueUpdate: \'afterkeydown\', enterkey: sendAnswer"/>\r\n                <button class="answerButton flashColor" data-bind="click:sendAnswer"><\/button>\r\n            -->\r\n            <input type="text" class="miniInput clientFont" data-bind="i18n:\'[placeholder]minimized.answerhere\', click:maximize" />\r\n            <button class="answerButton flashColor" data-bind="click:maximize"><\/button>\r\n            \r\n            <div class="clientFont askError slideUp" data-bind="visible:error()==\'noMessage\', i18n:\'ask.pleaseenteramessage\', css:{slideUp: error()!=\'\'}"><\/div>\r\n            <!-- Test : Hide below link to see if there are fewer questions in answers\r\n            --------------------------------------------------------------\r\n                <div class="answerOpenTokyWoky" data-bind="click:askAQuestion, i18n:\'minimized.askyourquestion\'"><\/div>\r\n            -->\r\n\r\n            <!--/ko-->\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if:!isMobile() && !isTablet() && getBigMinimizedToky && step() == 1 -->\r\n    <div class="miniWrapper" data-bind="css:{slideLeft:gotPostNotif()}, css:{bigMinimized:getBigMinimizedToky}">\r\n        <div class="minimizedBarImageEmpty"><\/div>\r\n        <div class="minimizedSideBar titleBarColor">\r\n            <div class="miniNotif flashColor floating" data-bind="text:allNotifsInbox(), visible:allNotifsInbox()>0,click:maximizedAfterClickOnNotif, clickBubble: false"><\/div>\r\n        <\/div>\r\n        <div class="miniContain" data-bind="css:{\'minimizedAskYourQuestion\':post() == null, \'minimizedVisitorsQuestion\':post() != null }">\r\n\r\n                <div class="messenger clientBoldFont" data-bind="click:maximize">\r\n                    <span class="messengerAsk clientBoldFont" data-bind="i18n:\'minimized.choosethereceiver\'"><\/span><div class="messengerEmptyAsk clientBoldFont"><\/div><span class="miniLogoTitleBar"><\/span>\r\n                <\/div>\r\n            <div class="absoluteCenterStepTwo">\r\n                <div class="appAskOptionLine">\r\n                    <!-- ko if: !shell.sendPostToAdminsByDefault -->\r\n                    <div data-bind="if:!postToAdminOnlyIfAdminsNotConnected || isAdminAvailable()">\r\n                        <span id="notOnlyForAdmins" class="askCheckbox" data-bind="click: toggleIsNotOnlyForAdmins">\r\n                            <span data-bind="css:{askCheckDisabled: !isNotOnlyForAdmins()}" class="askCheck">\r\n                                <div class="askCheckStem flashColor"><\/div>\r\n                                <div class="askCheckKick flashColor"><\/div>\r\n                            <\/span>\r\n                        <\/span>\r\n                        <label for="notOnlyForAdmins" class="optionText clientFont" data-bind="click: toggleIsNotOnlyForAdmins, i18n:\'ask.asktheconnectedvisitors\'"><\/label>\r\n\r\n                        <label for="notOnlyForAdmins" class="optionTextCustom clientFont" data-bind="click: toggleIsNotOnlyForAdmins"><\/label>\r\n                    <\/div>\r\n                    <div>\r\n                        <span id="onlyForAdmins" class="askCheckbox" data-bind="click: toggleIsOnlyForAdmins">\r\n                            <span data-bind="css:{askCheckDisabled: !isOnlyForAdmins()}" class="askCheck">\r\n                                <div class="askCheckStem flashColor"><\/div>\r\n                                <div class="askCheckKick flashColor"><\/div>\r\n                            <\/span>\r\n                        <\/span>\r\n                        <label for="onlyForAdmins" class="optionText clientFont " data-bind="click: toggleIsOnlyForAdmins, i18n:\'ask.askthethegroupnameteam\',i18nOptions:{groupName:groupName}"><\/label>\r\n\r\n                        <label for="onlyForAdmins" class="optionTextAdminCustom clientFont" data-bind="click: toggleIsOnlyForAdmins"><\/label>\r\n\r\n                        <span class="connectIcon">\r\n                            <span class="lightOn1" data-bind="css: { lightOff1: !isAdminAvailable()}">\r\n                                <span class="lightOn2" data-bind="css: { lightOff2: !isAdminAvailable()}"><\/span>\r\n                            <\/span>\r\n                        <\/span>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!-- ko if: shell.sendPostToAdminsByDefault -->\r\n                    <div>\r\n                        <span id="onlyForAdmins" class="askCheckbox" data-bind="click: toggleIsOnlyForAdmins">\r\n                            <span data-bind="css:{askCheckDisabled: !isOnlyForAdmins()}" class="askCheck">\r\n                                <div class="askCheckStem flashColor"><\/div>\r\n                                <div class="askCheckKick flashColor"><\/div>\r\n                            <\/span>\r\n                        <\/span>\r\n                        <label for="onlyForAdmins" class="optionText clientFont " data-bind="click: toggleIsOnlyForAdmins, i18n:\'ask.askthethegroupnameteam\',i18nOptions:{groupName:groupName}"><\/label>\r\n\r\n                        <label for="onlyForAdmins" class="optionTextAdminCustom clientFont" data-bind="click: toggleIsOnlyForAdmins"><\/label>\r\n\r\n                        <span class="connectIcon">\r\n                            <span class="lightOn1" data-bind="css: { lightOff1: !isAdminAvailable()}">\r\n                                <span class="lightOn2" data-bind="css: { lightOff2: !isAdminAvailable()}"><\/span>\r\n                            <\/span>\r\n                        <\/span>\r\n                    <\/div>\r\n                    <div data-bind="if:!postToAdminOnlyIfAdminsNotConnected || isAdminAvailable()">\r\n                        <span id="notOnlyForAdmins" class="askCheckbox" data-bind="click: toggleIsNotOnlyForAdmins">\r\n                            <span data-bind="css:{askCheckDisabled: !isNotOnlyForAdmins()}" class="askCheck">\r\n                                <div class="askCheckStem flashColor"><\/div>\r\n                                <div class="askCheckKick flashColor"><\/div>\r\n                            <\/span>\r\n                        <\/span>\r\n                        <label for="notOnlyForAdmins" class="optionText clientFont" data-bind="click: toggleIsNotOnlyForAdmins, i18n:\'ask.asktheconnectedvisitors\'"><\/label>\r\n\r\n                        <label for="notOnlyForAdmins" class="optionTextCustom clientFont" data-bind="click: toggleIsNotOnlyForAdmins"><\/label>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n\r\n                    <div class="clientFont askErrorStepTwo slideUp" data-bind="visible:error()==\'noMail\', i18n:\'ask.pleaseinsertanemailaddress\', css:{slideUp: error()!=\'\'}"><\/div>\r\n                    <div class="clientFont askErrorStepTwo slideUp" data-bind="visible:error()==\'noRecipient\', i18n:\'ask.pleaseselectarecipient\', css:{slideUp: error()!=\'\'}"><\/div>\r\n                    <!-- ko if: showEmailInput() -->\r\n                    <div>\r\n                        <div class="askMailLegend" data-bind="i18n:\'ask.getanswerbymail\'"><\/div>\r\n                        <div class="askMailLegendEmpty"><\/div>\r\n                        <input id="emailpost" type="text" class="fullSizeInput askMailInput clientFont" data-bind="value:email, i18n:\'[placeholder]ask.youremailaddresse\'" />\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <div class="miniAskBtn flashColor clientFont stepTwo" data-bind="i18n:\'minimized.validation\', click:sendQuestion"><\/div>\r\n                <div class="miniAskBtnCustom flashColor clientFont stepTwo" data-bind="click:sendQuestion"><\/div>\r\n                <div class="clearer"><\/div>\r\n                <!--<span class="clientFont askError slideUp" data-bind="visible:error()==\'noMail\', i18n:\'ask.pleaseinsertanemailaddress\', css:{slideUp: error()!=\'\'}"><\/span>-->\r\n\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if:!isMobile() && !isTablet() && !getBigMinimizedToky-->\r\n    <div class="miniWrapper" data-bind="click:maximize,css:{slideLeft:gotPostNotif()}, css:{bigMinimized:getBigMinimizedToky}">\r\n        <div class="minimizedBarImageEmpty"><\/div>\r\n        <div class="minimizedSideBar titleBarColor">\r\n            <div class="miniNotif flashColor floating" data-bind="text:allNotifsInbox(), visible:allNotifsInbox()>0"><\/div>\r\n        <\/div>\r\n\r\n        <div class="miniContain" data-bind="css:{\'minimizedAskYourQuestion\':post() == null, \'minimizedVisitorsQuestion\':post() != null }">\r\n            <!-- ko if:post() == null -->\r\n            <div class="messenger clientBoldFont">\r\n                <div class="messengerAsk clientBoldFont" data-bind="i18n:\'minimized.askaquestion\'"><\/div><div class="messengerEmptyAsk clientBoldFont" data-bind="textfill: { widthOnly: false }"><\/div><span class="miniLogoTitleBar"><\/span>\r\n            <\/div>\r\n            <div class="visitorsAskIconEmpty"><\/div>\r\n            <div class="miniQuestionBubble">\r\n                <div class="miniTextPost clientBoldFont fontColor" data-bind="i18n:\'minimized.toallofXsvisitors\', i18nOptions:{groupName: groupName}"><\/div>\r\n                <div class="miniTextPostEmpty">\r\n                    <span class="miniTextPostEmptySpan1"><\/span>\r\n                    <span class="miniTextPostEmptySpan2"><\/span>\r\n                    <span class="miniTextPostEmptySpan3"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="miniQuestionBubbleTriangle"><\/div>\r\n            <div class="miniInput miniAskInput clientFont" data-bind="i18n:\'minimized.askyourquestionhere\'"><\/div>\r\n            <div class="miniAskBtn flashColor clientFont" data-bind="i18n:\'minimized.askyourquestiontoXvisitorsonline\'"><\/div>\r\n            <div class="miniAskBtnCustom flashColor clientFont"><\/div>\r\n            <!--/ko-->\r\n            <!-- ko if:post() != null -->\r\n            <div class="messenger">\r\n                <div class="messengerAnswer clientBoldFont" data-bind="i18n:\'minimized.canyouhelp\'"><\/div><div class="messengerEmptyAnswer clientBoldFont"><\/div><span class="miniLogoTitleBar"><\/span>\r\n            <\/div>\r\n\r\n            <div class="miniQuestionBubble">\r\n                <div class="miniUserName fontColor clientBoldFont" data-bind="i18n:\'minimized.visitorsquestion\'"><\/div>\r\n                <div class="visitorsQuestionIconEmpty"><\/div>\r\n                <div class="miniText clientFont" data-bind="customhtml:post().Text.length > 30 ? post().Text.substring(0,30)+\'...\':post().Text, emojify"><\/div>\r\n                <div class="miniTextFull clientFont" data-bind="customhtml:post().Text, emojify"><\/div>\r\n                <div class="miniTextCustom clientFont"><\/div>\r\n            <\/div>\r\n            <div class="miniQuestionBubbleTriangle"><\/div>\r\n            <div class="miniInput clientFont" data-bind="i18n:\'minimized.answerhere\'"><\/div>\r\n\r\n            <!--/ko-->\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if:isMobile() || isTablet() -->\r\n    <div style="height: 100%; width: 100%;">\r\n        <div class="mobileMinimizedButton" data-bind="click:maximize, visible:isMinimized()">\r\n            <div class="mobileMinimizedBackground">\r\n\r\n            <\/div>\r\n            <div class="miniCloseMobile" data-bind="click:hideMinimized"><\/div>\r\n            <div class="miniNotifMobile flashColor floating" data-bind="text:allNotifsInbox(), visible:allNotifsInbox()>0"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("text!views/profile.html",[],function(){return'<div class="profileStage">\r\n    <div class="profileContain slideLeft feedContainWrapper-profile">\r\n        <div class="profileDataBlock profileDataBlockDark">\r\n            <div class="profileLineContain profileLinePicture">\r\n                <div class="profileUserPicture bigEntrance">\r\n                    <!--ko if: userProfilePicture() !== null && userProfilePicture() !== "" -->\r\n                    <img alt="Picture" data-bind="attr:{src:userProfilePicture}" />\r\n                    <!-- /ko -->\r\n                    <!--ko if: userProfilePicture() === null || userProfilePicture() === "" -->\r\n                    <div class="defaultProfilePictureBig"><\/div>\r\n                    <!-- /ko -->\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="profileLineContain">\r\n                <div class="profileLineContain profileLineName">\r\n                    <div class="profileUserName">\r\n                        <!--ko if: userName() !== null && userName() !== "" -->\r\n                        <span data-bind="customhtml:userName()"><\/span>\r\n                        <!-- /ko -->\r\n                        <!--ko if: userName() === null || userName() === "" -->\r\n                        <span data-bind="i18n:\'common.visitor\'"><\/span>\r\n                        <!-- /ko -->\r\n                    <\/div>\r\n                <\/div>\r\n                \r\n                <div class="profileLineContain profileLineHostData" data-bind="if:hostDatas()">\r\n                    <!--ko if:typeof hostDatas().badges != \'undefined\'-->\r\n                        <div class="profileBadges" data-bind="foreach:hostDatas().badges">\r\n                            <div class="profileBadge">\r\n                                <!--ko if: typeof text != \'undefined\'-->\r\n                                <span data-bind="text: text"><\/span>\r\n                                <!--/ko-->\r\n                                \r\n                                <!--ko if: typeof level != \'undefined\'-->\r\n                                <span data-bind="visible: level, css: \'badgeLevel-\'+level"><\/span>\r\n                                <!--/ko-->\r\n                                \r\n                                <!--ko if: typeof imageUrl != \'undefined\'-->\r\n                                <img class="badgeImage" data-bind="attr:{src: imageUrl }"/>\r\n                                <!--/ko-->\r\n                            <\/div>\r\n                        <\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n\r\n                <div class="profileLineContain profileLineStars" data-bind="">\r\n                    <!--ko if: !isUserAdmin() -->\r\n                    <div class="iconStar iconStarGoldSmall" data-bind="i18n:\'[title]common.Xgoldstar\', i18nOptions:{count: userLevels().Gold}"><\/div>\r\n                    <span class="clientFont starCountGold profileStarCount" data-bind="text:userLevels().Gold, i18n:\'[title]common.Xgoldstar\', i18nOptions:{count: userLevels().Gold}"><\/span>\r\n                    <div class="iconStar iconStarSilverSmall" data-bind="i18n:\'[title]common.Xsilverstar\', i18nOptions:{count: userLevels().Silver}"><\/div>\r\n                    <span class="clientFont starCountSilver profileStarCount" data-bind="text:userLevels().Silver, i18n:\'[title]common.Xsilverstar\', i18nOptions:{count: userLevels().Silver}"><\/span>\r\n                    <div class="iconStar iconStarBronzeSmall" data-bind="i18n:\'[title]common.Xbronzestar\', i18nOptions:{count: userLevels().Bronze}"><\/div>\r\n                    <span class="clientFont starCountBronze profileStarCount" data-bind="text:userLevels().Bronze, i18n:\'[title]common.Xbronzestar\', i18nOptions:{count: userLevels().Bronze}"><\/span>\r\n                    <!--/ko-->\r\n                    <!--ko if: isUserAdmin() -->\r\n                    <div class="iconStar iconStarGoldSmall adminStarGold" data-bind="i18n:\'[title]common.Xgoldstaradmin\', i18nOptions:{count: userLevels().Gold}"><\/div>\r\n                    <span class="clientFont starCountGold profileStarCount" data-bind="text:userLevels().Gold, i18n:\'[title]common.Xgoldstaradmin\', i18nOptions:{count: userLevels().Gold}"><\/span>\r\n                    <div class="iconStar iconStarSilverSmall adminStarSilver" data-bind="i18n:\'[title]common.Xsilverstaradmin\', i18nOptions:{count: userLevels().Silver}"><\/div>\r\n                    <span class="clientFont starCountSilver profileStarCount" data-bind="text:userLevels().Silver, i18n:\'[title]common.Xsilverstaradmin\', i18nOptions:{count: userLevels().Silver}"><\/span>\r\n                    <div class="iconStar iconStarBronzeSmall adminStarBronze" data-bind="i18n:\'[title]common.Xbronzestaradmin\', i18nOptions:{count: userLevels().Bronze}"><\/div>\r\n                    <span class="clientFont starCountBronze profileStarCount" data-bind="text:userLevels().Bronze, i18n:\'[title]common.Xbronzestaradmin\', i18nOptions:{count: userLevels().Bronze}"><\/span>\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <!--ko if: isUserCertified() -->\r\n                <div class="profileLineContain profileLineIsCertified">\r\n                    <span class="profileLineIsCertifiedContent" data-bind="i18n:\'common.certifiedcoach\'"><\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n                <div class="profileLineContain profileLinePeopleHelped">\r\n                    <span class="clientFont profileNbPeopleHelped" data-bind="i18n:\'common.Xpeoplehelped\', i18nOptions:{count: nbPeopleHelped()}"><\/span>\r\n                <\/div>\r\n                <!--ko if: feedbacksCount() > 0 -->\r\n                <div class="profileLineContain profileLineFeedbacksCount">\r\n                    <span data-bind="i18n:\'common.Xrecommendation\', i18nOptions:{count: feedbacksCount()}"><\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n                \r\n                <!--ko if: typeof hostProfileUrl() !== "undefined" && hostProfileUrl() !== null -->\r\n                <div class="profileLineContain profileLineHostProfileUrl">\r\n                    <a data-bind="i18n:\'profile.viewfullprofile\', attr:{href:hostProfileUrl()}" target="blank" class="bgColor profileViewFull"><\/a>\r\n                <\/div>\r\n                <!-- /ko -->\r\n\r\n                <!--ko if: typeof hostProfileUrl() === "undefined" || hostProfileUrl() === null -->\r\n                <!--ko if: $root.shell.groupId == 312 -->\r\n                <div class="profileLineContain profileLineHostProfileUrl">\r\n                    <a data-bind="i18n:\'profile.viewfullprofile\', attr:{href: \'https://qa.sephora.com/users/\' + userName()}" target="blank" class="bgColor profileViewFull"><\/a>\r\n                <\/div>\r\n                <!-- /ko -->\r\n                <!-- /ko -->\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <!--ko if: id() == shell.userId() && isUserCoach() -->\r\n        <div class="profileDataBlock profileGoToCoachAreaContain" data-bind="click: goToCoachProfile">\r\n            <span class="profileGoToCoachArea" data-bind="i18n:\'profile.fillyourprofileinformationsonthecoacharea\'"><\/span>\r\n        <\/div>\r\n        <!-- /ko -->\r\n\r\n        <!--ko if: userAge() !== null || town() !== null || bio() !== null -->\r\n        <div class="profileDataBlock profileDataBlockUserInfo">\r\n            <div class="profileRow">\r\n                <!--ko if: userAge() !== null -->\r\n                <div class="profileRowLeft">\r\n                    <span class="profileDataLabel" data-bind="i18n:\'profile.age\'"><\/span>\r\n                    <span class="profileDataValue" data-bind="text:userAge()"><\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n                <!--ko if: town() !== null -->\r\n                <div class="profileRowLeft">\r\n                    <span class="profileDataLabel" data-bind="i18n:\'profile.city\'"><\/span>\r\n                    <span class="profileDataValue" data-bind="customhtml:town()"><\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n            <\/div>\r\n            <!--ko if: bio() !== null -->\r\n            <div class="profileRow">\r\n                <span class="profileDataLabel" data-bind="i18n:\'profile.bio\'"><\/span>\r\n                <pre class="profileBioText" data-bind="customhtml:bio(), emojify"><\/pre>\r\n            <\/div>\r\n            <!-- /ko -->\r\n        <\/div>\r\n        <!-- /ko -->\r\n\r\n        <!--ko if: feedbacksForThisUser().length > 0 -->\r\n        <div class="profileDataBlock profileDataBlockFeedbacks">\r\n            <div class="profileRow">\r\n                <span class="profileDataLabel" data-bind="i18n:\'profile.recommendations\'"><\/span>\r\n            <\/div>\r\n            <div class="profileRow">\r\n                <!--ko foreach:feedbacksForThisUser -->\r\n                <div class="profileReviewText">\r\n                    <span class="profileReviewQuote">&ldquo;<\/span><span data-bind="customhtml:$data"><\/span><span class="profileReviewQuote">&rdquo;<\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n            <\/div>\r\n        <\/div>\r\n        <!-- /ko -->\r\n    <\/div>\r\n<\/div>'});n("text!views/settings.html",[],function(){return'<div>\r\n    <div class="feedContainWrapper feedContainWrapper-settings">\r\n        <div class="feedContain">\r\n            <div class="settingsContain">\r\n                <div class="logInReturnButton clientFont" data-bind="click: goToHome, i18n:\'common.back\', textfill"><\/div>\r\n                <div class="settingsTitle" data-bind="i18n:\'settings.mysettings\'"><\/div>\r\n\r\n                <!-- ko if: !success() && isError()-->\r\n                <div class="settingsErrorContain slideUp">\r\n                    <div class="title" data-bind="i18n:\'common.error\'"><\/div>\r\n\r\n                    <div data-bind="visible: isPasswordChosen()">\r\n                        <span data-bind="i18n:\'settings.passwordalreadyset\'"><\/span>\r\n                    <\/div>\r\n                <\/div>\r\n                <!-- /ko -->\r\n\r\n                <form data-bind="visible:!isPasswordChosen(), submit:send" class="settingsPasswordChangeContainer">\r\n                    <span data-bind="i18n:\'settings.enteratokywokypassword\'"><\/span>\r\n                    <input type="text" data-bind="value:email, i18n:\'[placeholder]common.youremail\'"/><br/>\r\n                    <input type="password" data-bind="value:password, i18n:\'[placeholder]common.yourpassword\'"/><br/>\r\n\r\n                    <button class="connectBtn bgColor clientBoldFont" data-bind="visible:!isLoading(), click: send, i18n:\'register.register\'" type="submit"><\/button>\r\n                    <span class="connectBtn bgColor clientBoldFont" data-bind="visible:isLoading()"><img src="/Content/images/loaderbar.gif" alt="loading..." /><\/span>\r\n                <\/form>\r\n\r\n                <div class="clearer"><\/div>\r\n\r\n                <!-- ko if: success() -->\r\n                <div class="settingsSuccessContain fadeInFast">\r\n                    <span data-bind="i18n:\'settings.yourpasswordhasbeenset\'"><\/span>\r\n                <\/div>\r\n                <!-- /ko -->\r\n\r\n                <!-- ko if: !success() -->\r\n                <input type="checkbox" id="enableMarketingMails" data-bind="checked: enableMarketingMails(), click: clickEnableMarketingMails"/>\r\n                <label class="settingsSubtitle" for="enableMarketingMails" data-bind="i18n:\'settings.receiveemailsfromGroupName\', i18nOptions:{groupName:groupName}"><\/label>\r\n                <!-- /ko -->\r\n            <\/div>\r\n\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!views/shell.html",[],function(){return'<div id="contentWrapper" data-bind="css:{\'contentWrapperMobile\': isMobile() || isTablet(), \'contentWrapperMinimized\': isMinimized(), \'contentWrapperMaximized\': !isMinimized()}, attr:{\'data-zoneid\':zoneId}">\r\n\r\n    <div data-bind="compose: \'viewmodels/_menu\', visible: !isMinimized()"><\/div>\r\n\r\n    <!--ko router: { cacheViews:true }--><!--/ko-->\r\n    <div data-bind="visible:popup.isOpened() && popup.type() != \'MinimizedHelp\', click:popup.close" class="backgroundDark slideUpNoBounce"><\/div>\r\n    <div data-bind="visible:popup.isOpened()">\r\n        <!--ko if:popup.type() != null-->\r\n        <div data-bind="compose: \'viewmodels/_popup\' + popup.type(), attr:{class: \'popup popup\'+ popup.type() }"><\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n    <!--ko if: shell.isCustomPageEnabled -->\r\n    <!--ko if: router.activeInstruction().fragment.substring(0, 10) != "customPage"-->\r\n    <div data-bind="compose: \'viewmodels/_ribbon\', visible: !isMinimized()"><\/div>\r\n    <!--/ko-->\r\n    <!--/ko-->\r\n\r\n    <!--ko if: shell.ribbonCustomerServiceWidgetEnabled() && router.activeInstruction().fragment.substring(0, 4) == "home" -->\r\n    <div data-bind="compose: \'viewmodels/_ribbon\', visible: !isMinimized()"><\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("shared/viewmodels/_publishedAnswers",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,i,r){function f(n){u.targetUserId(n);u.getAnswers();e()}function e(){r.get("/coach/api/ugc/published/answers/"+u.targetUserId()+"/count").success(function(n){u.publicationCount(n.PublishedCount);u.brandCount(n.UniqueBrandCount)}).error(function(){})}var u={activate:f,shell:t,categories:ko.observableArray([]),answers:ko.observableArray([]),answerDetailed:ko.observable(null),isLoading:ko.observable(!1),showDetails:ko.observable(!1),targetUserId:ko.observable(-1),publicationCount:ko.observable(0),brandCount:ko.observable(0),getAnswers:function(){u.isLoading(!0);r.get("/coach/api/ugc/published/answers/"+u.targetUserId()).success(function(n){$.each(n,function(n,t){t.openDetails=function(n,i){i.stopImmediatePropagation();u.answerDetailed(t);u.showDetails(!0)};t.closeDetails=function(n,t){t.stopImmediatePropagation();u.showDetails(!1)}});u.answers(n);u.isLoading(!1)}).error(function(){u.isLoading(!1)})}};return u});n("shared/viewmodels/achievement",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t){function r(n,t,r,u,f){i.label=n.charAt(0).toUpperCase()+n.slice(1);i.type=t;i.owned=r;i.level=u;i.size=f;i.cleanName=removeDiacritics(i.label.toLowerCase()).replace("'","")}function u(){}var i={activate:r,attached:u,shell:t,label:null,type:null,level:null,owned:!1,size:"small",color:"green",cleanName:null};return i});n("shared/viewmodels/chats",["plugins/http","durandal/app","viewmodels/shell","plugins/router"],function(n,i,f,e){function a(n){var r,u;n&&o.options(n);r="openedChats-"+o.currentUserId;null!=$.cookie(r)&&$.cookie(r).length>0&&(u=[],$.each($.cookie(r).split(","),function(n,i){i&&!t(i)&&u.push(i)}),s(u));o.windowWidth($(window).width());window.onresize=function(){o.windowWidth($(window).width())};i.off("chats:add");i.on("chats:add",function(n){p(n)});i.off("chats:addRoom");i.on("chats:addRoom",function(n){n&&s([n])});i.off("chats:removeRoom");i.on("chats:removeRoom",function(n){h(n)});i.off("chats:minimizeAll");i.on("chats:minimizeAll",function(){y()});i.off("chats:otherIsTyping");i.on("chats:otherIsTyping",o.otherTyping);i.off("chats:checkNbChats");i.on("chats:checkNbChats",function(){"undefined"!=typeof f.adminLevel&&"Agent"==f.adminLevel&&"undefined"!=typeof f.maxAgentConcurrentChatsBeforeAutomaticUnavailable&&i.trigger("sidebar:nbChatsOpened",o.openedChatList().length)})}function v(){}function s(r,u){var f=[];$.each(r,function(i,r){var s=!1,e;if(ko.utils.arrayForEach(o.openedChatList(),function(n){n.id==r&&(s=!0)}),s)return!0;"undefined"!==u&&null!=u&&u||(u=!1);e={id:r,chat:ko.observable(),isMinimized:ko.observable(!1),scrollOptions:{selector:"#chatContent"+r,disabled:ko.observable(!1),forceForNext:ko.observable(!1)},isLoading:ko.observable(!1),gotNotif:ko.observable(u),otherIsTyping:ko.observable(!1),otherTypingText:ko.observable(""),inputHasFocus:ko.observable(!1),isTyping:!1,title:ko.observable(""),page:0,skip:0,nextBtnVisible:ko.observable(!0),otherUsersLabel:ko.observable("")};e.chats=ko.observableArray([]).extend({scrollFollow:e.scrollOptions});e.chat.subscribe(function(i){""==i?n.get("/api/Chat/"+r+"/Typing",{isTyping:!1}).success(function(){e.isTyping=!1}):t(i)||e.isTyping||n.get("/api/Chat/"+r+"/Typing",{isTyping:!0}).success(function(){e.isTyping=!0})});e.next=function(){e.page=e.page+1;e.scrollOptions.disabled(!0);l(e).done(function(){e.scrollOptions.disabled(!1)})};e.inputHasFocus.subscribe(function(n){n&&o.clearNotifChat(e)});l(e);f.push(e)});o.openedChatList(o.openedChatList().concat(f));i.trigger("inbox:reload")}function h(n){ko.utils.arrayForEach(o.openedChatList(),function(t){if(t&&t.id==n)return(o.closeChat(t),void 0)})}function y(){ko.utils.arrayForEach(o.openedChatList(),function(n){n.isMinimized(!0)})}function p(n){var h=!1,t;(ko.utils.arrayForEach(o.openedChatList(),function(t){var f,e,i,s;t.id==n.ChatRoomId&&(e=t.chats().length,0===e?f=!0:(i=t.chats()[e-1],f=null!=i&&null!=i.UserDetails&&i.UserDetails.Id!==n.UserDetails.Id,i.endChain(f)),s={Text:null==n.UserDetails?r(n.Text):u(n.Text,n.UserDetails.Nickname),ChatRoomId:n.ChatRoomId,UserDetails:{Id:n.UserDetails.Id,Nickname:n.UserDetails.Nickname,UserLevels:n.UserDetails.UserLevels,NbPeopleHelped:n.UserDetails.NbPeopleHelped},beginChain:ko.observable(f),endChain:ko.observable(!0)},t.chats.push(s),t.skip=t.skip+1,h=!0,t.inputHasFocus()||n.UserDetails.Id===o.currentUserId||t.gotNotif(!0))}),"inbox"==e.activeInstruction().fragment&&i.trigger("inbox:refresh",n),h)||(t=!0,f.currentChatRoomId()==n.ChatRoomId&&(t=!1),n.ChatRoomId&&s([n.ChatRoomId],t))}function l(i){var r=Q.defer();return i.isLoading(!0),i.isClosed=ko.observable(!1),i.close=function(){$.ajax({url:"/api/Chat/"+i.id,type:"DELETE"}).success(function(){i.isClosed(!0);h(i.id)})},n.get("/api/Chat/"+i.id,{skip:i.skip,page:i.page}).success(function(n){return i.isClosed(n.isClosed),i.isClosed()?(h(i.id),void 0):(t(n.otherUsersLabel)?i.otherUsersLabel(i18n.t("common.visitor")):n.otherUsersLabel.indexOf("{multiple:")>-1?i.otherUsersLabel(i18n.t("common.Xusers",{nbUsers:n.otherUsersLabel.replace("{multiple:","").replace("}","")})):i.otherUsersLabel(n.otherUsersLabel),0==i.page?(i.nextBtnVisible(!0),$.each(n.chats,function(t,r){if(r.Text=null==r.UserDetails?r.Text:u(r.Text,r.UserDetails.Nickname),r.beginChain=ko.observable(!0),r.endChain=ko.observable(!0),null!=r.UserDetails){var e=n.chats[t+1],f=n.chats[t-1];void 0!=e&&null!=e.UserDetails&&e.UserDetails.Id===r.UserDetails.Id&&r.beginChain(!1);void 0!=f&&null!=f.UserDetails&&f.UserDetails.Id===r.UserDetails.Id&&(r.endChain(!1),r.next=f)}i.chats.unshift(r)}),i.title(null==n.title||0==n.chats.length?"":u(n.title,null==n.chats[0].UserDetails?"":n.chats[0].UserDetails.Nickname))):$.each(n.chats,function(t,r){r.Text=null==r.UserDetails?r.Text:u(r.Text,r.UserDetails.Nickname);r.beginChain=ko.observable(!0);r.endChain=ko.observable(!0);var e=n.chats[t+1],f=n.chats[t-1];void 0!=e&&void 0!=f&&null!=f.UserDetails&&null!=e.UserDetails&&e.UserDetails.Id===r.UserDetails.Id&&r.beginChain(!1);void 0!=f&&null!=f.UserDetails&&f.UserDetails.Id===r.UserDetails.Id&&(r.endChain(!1),r.next=f);i.chats.unshift(r)}),(Math.ceil((n.nbChats-i.skip)/n.nbChatPerPage)==i.page+1||0==n.nbChats)&&i.nextBtnVisible(!1),i.gotNotif(n.hasUnreadMessage),i.isLoading(!1),r.resolve(i),void 0)}).error(function(){i.isLoading(!1);r.resolve(i)}),r.promise}function c(n){var t;n.style.height="auto";t=Math.max(43,n.scrollHeight);$(n).innerHeight(t)}var o={activate:a,attached:v,shell:f,currentUserId:f.currentUserId,openedChatList:ko.observableArray([]),openedChatListDisplayedMax:ko.observable(),hiddenChatListDisplayed:ko.observable(!1),windowWidth:ko.observable(null),options:ko.observable({isAdmin:!1,adminLevel:null}),isTutorialRunning:ko.computed({read:function(){return f.tutorial&&f.tutorial.running()?!0:!1},deferEvaluation:!0}),hiddenChatList:ko.computed({read:function(){return o.openedChatList.slice(o.openedChatListDisplayedMax(),o.openedChatList().length)},deferEvaluation:!0}),displayedChatList:ko.computed({read:function(){return o.openedChatList.slice(0,o.openedChatListDisplayedMax())},deferEvaluation:!0}),isInInbox:ko.computed(function(){var n=e.activeInstruction().fragment;return"inbox"===n||"social/messages"===n}),toggleMinimizeChat:function(n){n.isMinimized(!n.isMinimized());"function"==typeof f.analytics.track&&(n.isMinimized()?(f.analytics.track("chat:minimize"),f.analytics.increment("chat:minimize:count",1)):(f.analytics.track("chat:maximize"),f.analytics.increment("chat:maximize:count",1)))},closeChat:function(n){o.clearNotifChat(n);o.openedChatList.remove(n);"function"==typeof f.analytics.track&&(f.analytics.track("chat:close"),f.analytics.increment("chat:close:count",1))},clearNotifChat:function(n){return n.gotNotif()?$.ajax({url:"/api/chat",type:"PUT",data:"="+n.id}).success(function(){n.gotNotif(!1);f.notifMessages.remove(parseInt(n.id))}).error(function(){}):f.notifMessages.remove(parseInt(n.id)),!0},sendChat:function(i){var e=i.chat(),s,h,u,c;(i.chat(""),t(e))||(i.scrollOptions.forceForNext(!0),h=i.chats().length,0===h?s=!0:(u=i.chats()[h-1],s=null!=u&&null!=u.UserDetails&&u.UserDetails.Id!==o.currentUserId,u.endChain(s)),c={Text:r(e),ChatRoomId:i.id,UserDetails:{Id:o.currentUserId,Nickname:f.currentUserName(),UserLevels:f.userLevels(),NbPeopleHelped:f.nbPeopleHelped()},beginChain:ko.observable(s),endChain:ko.observable(!0)},i.chats.push(c),n.post("/api/chat",{ChatRoomId:i.id,Text:e}).success(function(){"function"==typeof f.analytics.track&&(f.analytics.track("chat:send"),f.analytics.setPropertiesOnce({"chat:send:first":new Date}),f.analytics.increment("chat:send:count",1));i.skip=i.skip+1;""===i.title()&&i.title(e);i.inputHasFocus(!0)}).error(function(){i.inputHasFocus(!0)}))},openHiddenChat:function(n){var t=o.openedChatList()[0];o.openedChatList.remove(n);o.openedChatList()[0]=n;o.openedChatList.push(t);o.hiddenChatListDisplayed(!1)},hiddenChatListDisplayedToggle:function(){o.hiddenChatListDisplayed(!o.hiddenChatListDisplayed())},otherTyping:function(n){ko.utils.arrayForEach(o.openedChatList(),function(t){t.id==n.chatRoomId&&(t.otherIsTyping(n.isTyping),null==n.text&&(n.text=""),t.otherTypingText(n.text))})},buttonClick:function(n,t){t.chat(n);o.sendChat(t)}};return o.openedChatList.subscribe(function(n){var t=[];ko.utils.arrayForEach(n,function(n){t.push(n.id)});$.cookie("openedChats-"+o.currentUserId,t,{path:"/",expires:7});f.refreshNotifs();"undefined"!=typeof f.adminLevel&&"Agent"==f.adminLevel&&"undefined"!=typeof f.maxAgentConcurrentChatsBeforeAutomaticUnavailable&&i.trigger("sidebar:nbChatsOpened",n.length)}),o.windowWidth.subscribe(function(n){o.openedChatListDisplayedMax(Math.floor((n-50)/280))}),ko.bindingHandlers.autoExpandTextareaChat={init:function(n){setTimeout(function(){c(n)},10);$(n).on("keydown keyup input paste propertychange click submit mouseenter",function(){setTimeout(function(){c(n)},10)})},update:function(n){setTimeout(function(){c(n)},0)}},o});n("shared/viewmodels/inbox",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,i,f,e,o){function a(n){n&&s.options(n);o.off("inbox:refresh");o.on("inbox:refresh",function(n){var r,f,t,e;n&&n.ChatRoomId&&i.currentChatRoomId()===n.ChatRoomId&&n.UserDetails.Id!==s.currentUserId?(f=s.currentChat().length,0===f?r=!0:(t=s.currentChat()[f-1],r=null!=t&&null!=t.UserDetails&&t.UserDetails.Id!==n.UserDetails.Id,t.endChain(r)),e={Text:u(n.Text,n.UserDetails.Nickname),ChatRoomId:n.ChatRoomId,UserDetails:{Id:n.UserDetails.Id,Nickname:n.UserDetails.Nickname,UserLevels:n.UserDetails.UserLevels,NbPeopleHelped:n.UserDetails.NbPeopleHelped},beginChain:ko.observable(r),endChain:ko.observable(!0)},s.currentChat.push(e),s.skip=s.skip+1):(s.page(0),h(0,!1))});o.off("chats:otherIsTyping");o.on("chats:otherIsTyping",function(n){s.otherTyping(n)});o.trigger("chats:minimizeAll");o.off("inbox:reload");o.on("inbox:reload",function(){s.page(0);h(0,!0)});s.page(0);h(0,!0)}function v(){}function y(){i.currentChatRoomId(null)}function h(n,t){s.isLoading()||(s.isLoading(!0),e.get("/api/v3/Profile",{page:n,filter:s.selectedMessageFilter()}).success(function(i){i.length<10&&s.noMoreMessage(!0);0==n&&s.messages([]);$.each(i,function(n,t){t.GotNotif=ko.observable(t.GotNotif);t.OtherUser=ko.observable(t.OtherUser);t.Text=t.Text?u(t.Text,t.OtherUser().Nickname):"";t.TextPost=t.TextPost?u(t.TextPost,t.OtherUser().Nickname):"";t.isSelected=ko.observable(!1);t.isActiveDiscussion=ko.computed(function(){return s.currentChatRoomId()==t.Id});s.messages.push(t)});t&&0==n&&i.length>0&&s.selectChat(i[0]);s.isLoading(!1);0==n&&10==i.length&&$(".inboxMessageList").height()>=600&&(s.page(s.page()+1),h(s.page()))}).error(function(){s.isLoading(!1)}))}function l(n){var t=Q.defer(),r;return s.isLoadingChat()?(t.resolve(null),t.promise):(s.isLoadingChat(!0),r=setTimeout(function(){s.isLoadingChatLoader(!0)},500),e.get("/api/chat/"+n,{page:s.pageChat,skip:s.skip}).success(function(f){s.isClosed(f.isClosed);s.rating.answerId=f.answerId;s.rating.getThanks=f.getThanks;s.rating.getNoThanks=f.getNoThanks;s.rating.pointLevel=f.pointLevel;s.rating.feedbackText=f.feedbackText;s.rating.otherUserId=f.otherUserId;s.rating.otherUserFollowerStatus=f.otherUserFollowerStatus;s.rating.otherUserIsCoach=f.otherUserIsCoach;s.rating.show(!0);s.rating.collapsed(!0);s.rating.type(f.type);s.rating.isAsker(f.isAsker);$.map(f.chats,function(n,t){if(n.Text=null==n.UserDetails?n.Text:u(n.Text,n.UserDetails.Nickname),n.beginChain=ko.observable(!0),n.endChain=ko.observable(!0),null!=n.UserDetails){var r=f.chats[t+1],i=f.chats[t-1];void 0!=r&&null!=r.UserDetails&&r.UserDetails.Id===n.UserDetails.Id&&n.beginChain(!1);void 0!=i&&null!=i.UserDetails&&i.UserDetails.Id===n.UserDetails.Id&&(n.endChain(!1),n.next=i)}});s.isTalkingToAdmin(f.isTalkingToAdmin?!0:!1);Math.ceil((f.nbChats-s.skip)/f.nbChatPerPage)==s.pageChat+1||0==f.nbChats?s.nextBtnVisible(!1):s.nextBtnVisible(!0);0==s.pageChat?(s.currentChat([]),f.chats.reverse(),s.currentChat(f.chats),ko.utils.arrayForEach(s.messages(),function(n){n.Id==s.currentChatRoomId()&&n.GotNotif(!1)}),i.refreshNotifs()):$.each(f.chats,function(n,t){s.currentChat.unshift(t)});clearTimeout(r);s.isLoadingChat(!1);s.isLoadingChatLoader(!1);t.resolve(n)}).error(function(){s.currentChat([]);clearTimeout(r);s.isLoadingChat(!1);s.isLoadingChatLoader(!1);t.resolve(n)}),t.promise)}function c(n){var t;n.style.height="auto";t=Math.max(20,n.scrollHeight);$(n).innerHeight(t)}var s={activate:a,deactivate:y,attached:v,options:ko.observable({isAdmin:!1,adminLevel:null}),scrollOptions:{selector:".inboxChatBox",disabled:ko.observable(!1),forceForNext:ko.observable(!1)},rating:{collapsed:ko.observable(!0),show:ko.observable(!1),type:ko.observable(""),isAsker:ko.observable(!1),answerId:0,getThanks:!1,getNoThanks:!1,pointLevel:"",feedbackText:"",otherUserId:0,otherUserFollowerStatus:"",otherUserIsCoach:!1,noThanksSent:function(){s.rating.getNoThanks=!0;i.analytics.track("inbox:nothanks")},thanksSent:function(){s.rating.getThanks=!0;i.analytics.track("inbox:thanks")},starSent:function(n){s.rating.pointLevel=n;i.analytics.track("inbox:star:"+n)},feedbackSent:function(n){s.rating.feedbackText=n;i.analytics.track("inbox:review")},feedbackOpened:function(){},feedbackClosed:function(){},expandBottomBar:function(){s.rating.collapsed(!1)},collapseBottomBar:function(){s.rating.collapsed(!0)}},currentChatRoomId:ko.observable(null),selectedMessageFilter:ko.observable("None"),chat:ko.observable(null),messages:ko.observableArray([]),page:ko.observable(0),shell:i,currentUserId:i.currentUserId,noMoreMessage:ko.observable(!1),isLoading:ko.observable(!1),isLoadingChat:ko.observable(!1),isLoadingChatLoader:ko.observable(!1),isTalkingToAdmin:ko.observable(!1),otherIsTyping:ko.observable(!1),otherTypingText:ko.observable(""),selectAll:ko.observable(!1),isTyping:!1,pageChat:0,skip:0,nextBtnVisible:ko.observable(!0),isClosed:ko.observable(!1),selectedMessages:ko.computed({read:function(){var n=[];return ko.utils.arrayForEach(s.messages(),function(t){t.isSelected()&&n.push(t.Id)}),n},deferEvaluation:!0}),send:function(){var u,f,n,h,c;s.isLoadingChat()||(t(s.chat())||(s.scrollOptions.forceForNext(!0),f=s.currentChat().length,0===f?u=!0:(n=s.currentChat()[f-1],u=null!=n&&null!=n.UserDetails&&n.UserDetails.Id!==s.currentUserId,n.endChain(u)),h={Text:r(s.chat()),ChatRoomId:s.currentChatRoomId(),UserDetails:{Id:s.currentUserId,Nickname:i.currentUserName(),UserLevels:i.userLevels(),NbPeopleHelped:i.nbPeopleHelped()},beginChain:ko.observable(u),endChain:ko.observable(!0)},s.currentChat.push(h),o.trigger("chats:add",h),c=s.chat(),s.chat(""),e.post("/api/chat",{ChatRoomId:s.currentChatRoomId(),Text:c}).success(function(){i.analytics.track("inbox:chat:send");i.analytics.setPropertiesOnce({"inbox:chat:send:first":new Date});i.analytics.increment("inbox:chat:send:count",1);s.skip=s.skip+1}).error(function(){})),$(".inboxChatInput").focus())},selectChat:function(n){s.isLoadingChat()||(s.currentChatRoomId()!=n.Id&&s.chat(""),s.currentChatRoomId(n.Id),s.pageChat=0,s.skip=0,l(n.Id))},archive:function(t){$.ajax({url:"/api/Chat/"+t.Id,type:"DELETE"}).success(function(){"Archived"===s.selectedMessageFilter()?(n.logError(i18n.t("inbox.thismessagehasbeenpermanentlydeleted"),"",null,"inbox",!0),i.analytics.track("inbox:chat:delete"),i.analytics.setPropertiesOnce({"inbox:chat:delete:first":new Date}),i.analytics.increment("inbox:chat:delete:count",1)):(i.analytics.track("inbox:chat:archive"),i.analytics.setPropertiesOnce({"inbox:chat:archive:first":new Date}),i.analytics.increment("inbox:chat:archive:count",1));s.messages.remove(t);s.currentChatRoomId()==t.Id&&(s.currentChat([]),s.currentChatRoomId(null));$(".inboxMessageList").scroll()}).error(function(){})},otherTyping:function(n){null!=s.currentChatRoomId()&&n.chatRoomId==s.currentChatRoomId()&&(s.otherIsTyping(n.isTyping),s.otherTypingText(n.text?n.text:""))},next:function(){s.pageChat=s.pageChat+1;s.scrollOptions.disabled(!0);l(s.currentChatRoomId()).done(function(){s.scrollOptions.disabled(!1)})},markSelectedAsRead:function(){var n=s.selectedMessages();$.ajax({url:"/api/Chat",type:"PUT",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{"":n}}).done(function(){ko.utils.arrayForEach(s.messages(),function(n){n.isSelected()&&(n.GotNotif(!1),n.isSelected(!1))})}).error(function(){})},deleteSelected:function(){var t=s.selectedMessages();$.ajax({url:"/api/Chat",type:"DELETE",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{"":t}}).done(function(){"Archived"===s.selectedMessageFilter()?(n.logError(i18n.t("inbox.Xmessageshavebeenpermanentlydeleted",{count:t.length}),"",null,"inbox",!0),i.analytics.track("inbox:chat:delete"),i.analytics.setPropertiesOnce({"inbox:chat:delete:first":new Date}),i.analytics.increment("inbox:chat:delete:count",t.length)):(i.analytics.track("inbox:chat:archive"),i.analytics.setPropertiesOnce({"inbox:chat:archive:first":new Date}),i.analytics.increment("inbox:chat:archive:count",t.length));$.each(t,function(n,t){s.messages.remove(function(n){return n.Id==t});s.currentChatRoomId()==t&&(s.currentChat([]),s.currentChatRoomId(null));s.selectAll(!1)});$(".inboxMessageList").scroll()}).error(function(){})},nextListMessages:function(){s.noMoreMessage()||(s.page(s.page()+1),h(s.page(),!1))},clearFilter:function(){s.selectedMessageFilter("None")},setFilterUnread:function(){s.selectedMessageFilter("Unread")},setFilterArchived:function(){s.selectedMessageFilter("Archived")},buttonClick:function(n){s.chat(n);s.send()},close:function(){$.ajax({url:"/api/Chat/"+s.currentChatRoomId(),type:"DELETE"}).success(function(){s.isClosed(!0);o.trigger("chats:removeRoom",s.currentChatRoomId())})}};return s.currentChat=ko.observableArray([]).extend({scrollFollow:s.scrollOptions}),s.selectedMessageFilter.subscribe(function(){s.messages([]);s.noMoreMessage(!1);h(0,!0)}),s.selectAll.subscribe(function(n){ko.utils.arrayForEach(s.messages(),function(t){t.isSelected(n)})}),s.currentChatRoomId.subscribe(function(n){s.scrollOptions.disabled(!1);s.scrollOptions.forceForNext(!1);i.currentChatRoomId(n);s.rating.show(!1);s.rating.collapsed(!0)}),s.chat.subscribe(function(n){var r,i;s.currentChatRoomId()&&(""==n?e.get("/api/Chat/"+s.currentChatRoomId()+"/Typing",{isTyping:!1}).success(function(){s.isTyping=!1}):t(n)||(r=n.length%15,s.isTyping&&0!==r||(i={isTyping:!0},s.isTalkingToAdmin()&&(i.text=n),e.get("/api/Chat/"+s.currentChatRoomId()+"/Typing",i).success(function(){s.isTyping=!0}))))}),ko.bindingHandlers.autoExpandTextareaInbox={init:function(n){setTimeout(function(){c(n)},10);$(n).on("keydown keyup input paste propertychange click submit mouseenter",function(){setTimeout(function(){c(n);var t=$(n).outerHeight()+37;$(".inboxChatBox").css("height","calc(100% - "+t+"px)");$(".inboxChatBox").scrollTop=$(".inboxChatBox").scrollHeight},10)})},update:function(n){setTimeout(function(){c(n)},0)}},s});n("shared/viewmodels/preferences",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,i,r,u){function h(n){void 0!==n&&null!==n&&f.targetUserId(n);f.getPreferences();l();var t=$.cookie("facebookAccessToken");t&&f.facebook.accessToken(t);f.facebook.getInfos()}function c(){}function l(){u.get("/coach/api/ugc/brandagreement").success(function(n){f.answersPublishedOnBrandWebsiteAgreement(n)})}function a(){$.ajax({type:"PUT",url:"/coach/api/ugc/brandagreement",data:{"":f.answersPublishedOnBrandWebsiteAgreement()},success:function(){n.log(i18n.t("preferences.saved"),"","","preferences",!0)}})}function e(t){switch(t){case"EmptyPassword":n.logError(i18n.t("preferences.invalidpassword"),i18n.t("preferences.youmustprovideapassword"),"","preferences",!0);break;case"PasswordBadLength":n.logError(i18n.t("preferences.invalidpassword"),i18n.t("preferences.yourpasswordmustbebetweenXandYcharacters",{minChars:8,maxChars:128}),"","preferences",!0);break;case"PasswordInvalidComplexity":n.logError(i18n.t("preferences.invalidpassword"),i18n.t("preferences.yourpasswordmustcontainatleastXuppercaselettersYlowercaselettersZdigits",{upperCaseCount:1,lowerCaseCount:1,digitsCount:1}),"","preferences",!0);break;default:n.logError(i18n.t("common.error"),i18n.t("preferences.invalidpassword"),"","preferences",!0)}}var f={activate:h,attached:c,shell:i,currentTab:ko.observable(""),currentUserId:i.currentUserId,isLoading:ko.observable(!1),targetUserId:ko.observable(null),userId:ko.observable(""),userName:ko.observable(""),userPicture:ko.observable(""),userEmail:{newEmailAddress:ko.observable(""),newEmailAddressRetyped:ko.observable(""),email:ko.observable(""),isLoading:ko.observable(!1)},facebook:{accountLinked:ko.observable(!1),linkId:ko.observable(null),userId:ko.observable(""),accessToken:ko.observable(""),isLoading:ko.observable(!1),error:ko.observable(null),otherTokyAccountPassword:ko.observable(null),connect:function(){var n=Q.defer();return FB.login(function(t){if("connected"===t.status){var i=new Date;f.facebook.accessToken(t.authResponse.accessToken);i.setTime(i.getTime()+1e3*t.authResponse.expiresIn);$.cookie("facebookAccessToken",f.facebook.accessToken(),{expires:i,path:"/"})}n.resolve()},{scope:"public_profile,email",auth_type:"rerequest"}),n.promise},getInfos:function(){u.get("/api/usersocial/SsoFacebook").success(function(n){n&&(f.facebook.accountLinked(!0),f.facebook.linkId(n.Id),f.facebook.userId(n.UserId))})},addLink:function(){f.facebook.connect().then(function(){t(f.facebook.accessToken())||(f.facebook.isLoading(!0),u.post("/api/usersocial",{Token:f.facebook.accessToken(),Type:"SsoFacebook"}).success(function(){f.facebook.getInfos();f.facebook.isLoading(!1);n.log(i18n.t("preferences.facebookaccountlinked"),"","","preferences",!0)}).error(function(t){switch(t.status){case 400:f.facebook.accessToken("");f.facebook.error({code:t.status,facebookErrorMessage:t.responseText});case 401:f.facebook.accessToken("");$.removeCookie("facebookAccessToken",{path:"/"});break;case 300:f.facebook.error({code:t.status,facebookUserEmail:t.responseText});break;default:f.facebook.error({code:t.status,facebookErrorMessage:t.responseText});n.logError(i18n.t("common.error"),t.responseText,"","preferences",!0)}f.facebook.isLoading(!1)}))})},removeLink:function(){return f.password.notSet()?(alert(i18n.t("preferences.youcannotunlinkthisaccountbecauseyouhavenotsetapasswordforyourtokywokyaccountyet")+"\n"+i18n.t("preferences.whichwouldmakethistokywokyaccountinaccessible")),f.currentTab("account"),void 0):(f.facebook.isLoading(!0),f.facebook.connect().then(function(){return t(f.facebook.accessToken())?(f.facebook.isLoading(!1),void 0):($.ajax({type:"DELETE",url:"/api/usersocial/SsoFacebook",data:{"":f.facebook.accessToken()},success:function(){f.facebook.accountLinked(!1);f.facebook.linkId(null);f.facebook.userId(null);f.facebook.accessToken("");$.removeCookie("facebookAccessToken",{path:"/"});n.log(i18n.t("preferences.unlinked"),"","","preferences",!0);f.facebook.isLoading(!1)},error:function(){f.facebook.isLoading(!1)}}),void 0)}),void 0)},switchLink:function(){f.facebook.isLoading(!0);$.ajax({type:"PUT",url:"/api/usersocial",data:{email:f.facebook.error().tokykUserEmail,password:f.facebook.otherTokyAccountPassword(),token:f.facebook.accessToken(),type:"SsoFacebook"},success:function(){f.facebook.error(null);f.facebook.getInfos();n.log(i18n.t("preferences.facebookaccountlinked"),"","","preferences",!0);f.facebook.isLoading(!1)},error:function(t){switch(t.status){case 400:n.logError(i18n.t("common.error"),i18n.t("preferences.invalidpassword"),"","preferences",!0);break;case 401:n.logError(i18n.t("common.error"),i18n.t("login.bademailorlogin"),"","preferences",!0);break;case 403:n.logError(i18n.t("common.error"),i18n.t("preferences.bademailorlogin"),"","preferences",!0);break;default:n.logError(t.statusText,"","","preferences",!0)}f.facebook.isLoading(!1)}})},closeError:function(){f.facebook.error(null)}},accountCreationDate:ko.observable(""),answersPublishedOnBrandWebsiteAgreement:ko.observable(!0),saveAgreement:a,isAdminGodEditing:ko.computed({read:function(){return"undefined"!=typeof i.adminLevel&&null!==i.adminLevel&&"God"===i.adminLevel&&void 0!==f.targetUserId()&&null!==f.targetUserId()?!0:!1},deferEvaluation:!0}),changeTab:function(n){f.currentTab(n)},setNewEmailAddress:function(){if(f.userEmail.newEmailAddress()!==f.userEmail.newEmailAddressRetyped())return n.logError(i18n.t("common.error"),i18n.t("preferences.emailsnotidentical"),"","preferences",!0),void 0;if(!o(f.userEmail.newEmailAddress())||f.userEmail.newEmailAddress()===f.userEmail.email())return n.logError(i18n.t("common.error"),i18n.t("preferences.invalidemail"),"","preferences",!0),void 0;var t="/api/account/me";f.isAdminGodEditing()&&(t="/admin/api/account");f.userEmail.isLoading(!0);$.ajax({url:t,type:"PUT",contentType:"application/x-www-form-urlencoded",data:{email:f.userEmail.newEmailAddress(),userId:f.targetUserId()}}).success(function(){f.userEmail.email(f.userEmail.newEmailAddress());f.userEmail.newEmailAddress("");f.userEmail.newEmailAddressRetyped("");n.log(i18n.t("preferences.emailupdated"),"","","preferences",!0);f.userEmail.isLoading(!1)}).error(function(t){switch(t.status){case 400:n.logError(i18n.t("common.error"),i18n.t("preferences.invalidemail"),"","preferences",!0);break;case 300:n.logError(i18n.t("common.error"),i18n.t("preferences.emailisalreadyinuse"),"","preferences",!0);break;default:n.logError(t.statusText,"","","preferences",!0)}f.userEmail.isLoading(!1)})},getPreferences:function(){f.isLoading(!0);var t="/api/account/me";f.isAdminGodEditing()&&(t="/admin/api/account/"+f.targetUserId());u.get(t).success(function(n){f.userId(n.UserId);f.userName(n.UserName);f.userPicture(n.UserPicture);f.userEmail.email(n.UserEmail);f.accountCreationDate(moment.utc(n.AccountCreationDate).format("LLLL"));f.password.failuresSinceLastSuccess(n.PasswordFailuresSinceLastSuccess);f.password.notSet(!n.IsPasswordChosen);f.password.lastFailureDate(null===n.LastPasswordFailureDate?"":moment.utc(n.LastPasswordFailureDate).format("LLLL"));f.password.changedDate(moment.utc(n.PasswordChangedDate).format("LLLL"));f.currentTab("account");f.isLoading(!1);f.password.notSet()&&f.password.showChangeForm()}).error(function(){f.isLoading(!1);n.logError(i18n.t("common.error"),i18n.t("common.error"),"","preferences",!0)})},password:{notSet:ko.observable(!0),lastFailureDate:ko.observable(""),failuresSinceLastSuccess:ko.observable(""),changedDate:ko.observable(""),changeFormVisible:ko.observable(!1),isLoading:ko.observable(!1),password:ko.observable(""),passwordRetyped:ko.observable(""),currentPassword:ko.observable(""),showChangeForm:function(){f.password.changeFormVisible(!0)},hideChangeForm:function(){f.password.changeFormVisible(!1)},submitChange:function(){var t,r;if(f.password.password()!==f.password.passwordRetyped())return n.logError(i18n.t("common.error"),i18n.t("preferences.passwordsarenotthesame"),"","preferences",!0),void 0;if(t=s(f.password.password()),null!==t)return e(t),void 0;f.password.isLoading(!0);r="/api/account/me";f.isAdminGodEditing()&&(r="/admin/api/account");$.ajax({url:r,type:"PUT",contentType:"application/x-www-form-urlencoded",data:{Password:f.password.password(),CurrentPassword:f.password.currentPassword(),UserId:f.targetUserId()}}).success(function(){f.password.password("");f.password.passwordRetyped("");f.password.notSet()?n.log(i18n.t("preferences.passwordsaved"),"","","preferences",!0):n.log(i18n.t("preferences.passwordchanged"),"","","preferences",!0);f.password.notSet(!1);"coach"===i.area&&i.isPasswordChosen(!0);f.password.hideChangeForm();f.password.isLoading(!1)}).error(function(t){var i,r;switch(t.status){case 400:if(i="Unknown",""!==t.responseText)try{r=JSON.parse(t.responseText);i=r.Message}catch(u){}e(i);break;default:n.logError(t.statusText,"","","preferences",!0)}f.password.isLoading(!1)})}}};return f});n("shared/viewmodels/profile",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t,r,u,f){var e=function(){var e=this;e.id=ko.observable(null);e.userName=ko.observable("");e.currentUserId=t.currentUserId;e.town=ko.observable();e.birthDate=ko.observable();e.age=ko.observable("");e.isTutoDisplayed=ko.observable(!1);e.nbPeopleHelped=ko.observable(0);e.nbFeedbacks=ko.observable(0);e.userLevels=ko.observable([]);e.bio=ko.observable("");e.memberSince=ko.observable();e.nbAnswers=ko.observable();e.moreResultsAvailableForSelectedCategory=ko.observable(!1);e.categories=ko.observableArray([]);e.shell=t;e.page=ko.observable(0);e.feed=ko.observableArray([]);e.feedPage=0;e.selectedReviewCategoryId=ko.observable(-1);e.reviews=ko.observableArray([]);e.reviewsForSelectedCategory=ko.observableArray([]);e.reviewCategories=ko.observableArray([]);e.isUpdatingUserInfo=ko.observable(!1);e.isProfileFlagged=ko.observable(!1);e.profilePicture=ko.observable();e.achievements=ko.observableArray([]);e.nextButtonVisible=ko.observable(!0);e.isLoading=ko.observable(!0);e.friendStatus=ko.observable(null);e.isUserPremium=ko.observable(!1);e.isUserCoach=ko.observable(!1);e.isUserAdmin=ko.observable(!1);e.isUploadingPicture=ko.observable(!1);e.groupId=null;e.groupCategoryId=null;e.getNotif=ko.observable(!1);e.isBlocked=ko.observable(!1);e.hasBeenLoadedOnce=ko.observable(!1);e.hasPublishedAnswers=ko.observable(!1);e.lastInteraction=ko.observable();e.hostUserId=ko.observable(null);e.isFieldEditable=ko.computed(function(){return e.currentUserId==e.id()&&!e.isUpdatingUserInfo()});e.fromAdminArea=ko.computed({read:function(){return null!==e.groupId},deferEvaluation:!0});e.canFlagProfile=ko.computed({read:function(){return!e.isProfileFlagged()&&t.nbPeopleHelped()>=20&&e.currentUserId!=e.id()},deferEvaluation:!0});e.currentUserIsPremium=ko.computed(function(){return"undefined"!=typeof t.isPremium?"Premium"===t.isPremium():!1});e.currentUserIsCoach=ko.computed(function(){return"undefined"!=typeof t.categoriesCoach?t.categoriesCoach().length>0:!1});e.isAdmin=ko.computed(function(){return"undefined"!=typeof t.adminLevel&&null!==t.adminLevel?!0:!1});e.isAdminGod=ko.computed(function(){return"undefined"!=typeof t.adminLevel&&null!==t.adminLevel&&"God"===t.adminLevel?!0:!1});e.isBioEmpty=ko.computed({read:function(){return e.currentUserId==e.id()?!1:!e.bio()||e.bio().length<=0?!0:!1},deferEvaluation:!0});e.blockUser=function(){u.post("/api/userblock/"+e.id()).success(function(){t.loadBlockedUsers();e.isBlocked(!0)})};e.unblockUser=function(){$.ajax({url:"api/userblock/"+e.id(),type:"DELETE",contentType:"application/x-www-form-urlencoded",dataType:"json"}).success(function(){t.loadBlockedUsers();e.isBlocked(!1)})};e.next=function(){e.loadFeed()};e.displayTuto=function(){e.isTutoDisplayed(!e.isTutoDisplayed())};e.updateUserInfo=function(){e.isFieldEditable()&&e.isUpdatingUserInfo(!0)};e.cancelUserInfoUpdate=function(){e.getUserInfo();e.isUpdatingUserInfo(!1)};e.changeCategories=function(){r.navigate("categories",{trigger:!0,replace:!0})};e.sendUserInfoUpdate=function(){u.post("/coach/api/profiles",{UserName:e.userName(),BirthDate:e.birthDate(),Town:e.town(),Bio:e.bio()}).success(function(t){""!==t?(t=t.replace(/nickname/g,i18n.t("profile.nickname")),t=t.replace(/bio/g,i18n.t("profile.bio")),t=t.replace(/town/g,i18n.t("profile.city")),t=t.replace(/birthdate/g,i18n.t("profile.age")),t=t.replace(/\}\{/g,", ").replace(/\{/g,"").replace(/\}/g,""),n.logError(i18n.t("profile.errorduringtheprofileupdate"),t,"","profile.js",!0),e.getUserInfo()):n.log(i18n.t("profile.profileupdated"),"","","profile.js",!0)}).error(function(){e.getUserInfo()});e.isUpdatingUserInfo(!1)};e.uploadPic=function(){var r=$("#inputFile").get(0).files,u;if(r.length>0)if(void 0!==window.FormData){for(u=new FormData,i=0;i<r.length;i++)u.append("file"+i,r[i]);t.isLoading(!0);e.isUploadingPicture(!0);$.ajax({type:"POST",url:"/Coach/api/Profiles/Picture",contentType:!1,processData:!1,data:u,success:function(n){t.userProfilePic(n);e.profilePicture(n);t.analytics.track("update_photo")},error:function(){n.logError("Erreur","Choisissez une autre image",null,"profile",!0)}});e.isUploadingPicture(!1);t.isLoading(!1)}else n.logError("Erreur","Navigateur trop vieux, veuillez utiliser Google Chrome ou Firefox (dernières versions)",null,"profile",!0)};e.addFriend=function(){u.post("/Coach/api/friends/"+e.id()).success(function(){"NotFriend"==e.friendStatus()&&(n.log(i18n.t("common.friendinvitesent"),"",null,"profile",!0),e.friendStatus("Asked"),t.analytics.track("friend:request"));"Answering"==e.friendStatus()&&(e.friendStatus("AreFriend"),n.log(i18n.t("common.youarefriends"),"",null,"profile",!0),t.analytics.track("friend:accept"));f.trigger("friends:refresh")})};e.deleteFriend=function(){$.ajax({url:"/Coach/api/friends/"+e.id(),type:"DELETE"}).done(function(){"AreFriend"==e.friendStatus()&&e.friendStatus("NotFriend");"Asked"==e.friendStatus()&&e.friendStatus("NotFriend");"Answering"==e.friendStatus()&&e.friendStatus("NotFriend");t.analytics.track("friend:remove");f.trigger("friends:refresh")})};e.chat=function(){e.isAdmin()?u.post("/Admin/api/ChatRoom/"+e.id()).success(function(n){f.trigger("chats:addRoom",n)}):u.post("/Coach/api/ChatRoom/"+e.id()).success(function(n){f.trigger("chats:addRoom",n)})};e.categoryClick=function(n){n.CategoryId!==e.selectedReviewCategoryId()&&(n.CategoryId!==e.selectedReviewCategoryId()&&(e.reviewsForSelectedCategory([]),e.page(0)),e.getReviews(n))};e.getReviews=function(n){if(null!=n&&"undefined"!=typeof n.CategoryId){var t={page:e.page(),categoryId:null};e.selectedReviewCategoryId(n.CategoryId);-1!==n.CategoryId&&(t.categoryId=n.CategoryId);u.get("/api/feedbacks/user/"+e.id(),t).success(function(n){0===n.length||n.length<10?e.moreResultsAvailableForSelectedCategory(!1):e.moreResultsAvailableForSelectedCategory(!0);var t=[];$.each(n,function(n,i){i.Date=moment.utc(i.Date).format("YYYY-MM-DD");i.IsDeleted=ko.observable(i.IsDeleted);e.reviewsForSelectedCategory.push(i);i.IsSeen||t.push(i.Id)});e.currentUserId==e.id()&&t.length>0&&$.ajax({url:"/api/feedbacks/seen",type:"PUT",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{"":t}})}).error(function(){})}};e.showNextFeedbacks=function(){e.page(e.page()+1);e.getReviews({CategoryId:e.selectedReviewCategoryId()})};e.removeReview=function(t){confirm(i18n.t("profile.areyousureyouwanttodeletethisrecommendationthisoperationcannotbeundone"))&&$.ajax({url:"/api/feedbacks/"+t.Id,type:"DELETE",contentType:"application/json; charset=utf-8",dataType:"json"}).success(function(){n.log(i18n.t("premium.deleted"),"","","profile.js",!0);e.reviewsForSelectedCategory.remove(t)}).error(function(t){n.logError(i18n.t("profile.errorduringtherecommendationdeletion"),t,"","profile.js",!0)})};e.loadFeed=function(){0==e.feedPage&&e.feed.removeAll();e.nextButtonVisible(!1);var n={page:e.feedPage};e.groupId&&"God"!==t.adminLevel&&(n.groupId=e.groupId);u.get("/coach/api/Profiles/Feed/"+e.id(),n).success(function(n){$.each(n,function(n,t){e.feed.push(t)});e.feedPage=e.feedPage+1;10==n.length&&e.nextButtonVisible(!0)}).error(function(){})};e.getUserInfo=function(){e.isLoading(!0);u.get("/api/user/"+e.id()+"?groupCategoryId="+e.groupCategoryId+"&groupId="+e.groupId).success(function(n){null==n.Nickname||""===n.Nickname?e.userName(i18n.t("common.visitor")):(e.userName(n.Nickname.charAt(0).toUpperCase()+n.Nickname.slice(1)),t.currentUserId==e.id()&&t.currentUserName(e.userName()));n.BirthDate?e.age(moment.localeData().relativeTime(moment().diff(moment(n.BirthDate,"DD/MM/YYYY"),"years"),!0,"yy",!1)):e.age(null);e.town(n.Town);e.birthDate(n.BirthDate);e.bio(n.Bio);e.memberSince(n.MemberSince);e.nbAnswers(n.NbAnswers);e.profilePicture(n.ProfilePicture);e.isUserCoach(n.IsCoach);e.isUserAdmin(n.IsAdmin);e.isUserPremium(n.IsPremium);e.nbPeopleHelped(n.NbPeopleHelped);e.nbFeedbacks(n.NbFeedbacks);e.userLevels(n.Levels);e.isLoading(!1);setTimeout(function(){e.hasBeenLoadedOnce(!0)},1e3)}).error(function(){e.isLoading(!1)})};e.getAnswerPublishedCount=function(){u.get("/coach/api/ugc/published/answers/"+e.id()+"/count").success(function(n){e.hasPublishedAnswers(n.PublishedCount>0)}).error(function(){})};e.getUserFeedbacks=function(){u.get("/api/feedbacks/user/"+e.id()+"/categories").success(function(n){if(n.length>0){var t=!1;$.each(n,function(i,r){n.HasNewFeedback=ko.observable(r.HasNewFeedback);e.reviewCategories.push(r);r.HasNewFeedback&&(t=!0)});e.reviewCategories.unshift({CategoryId:-1,CategoryName:i18n.t("common.all"),HasNewFeedback:t})}}).error(function(t){n.logError("Error",t,"","profile.js",!0)})};e.getFriendStatus=function(){e.friendStatus(null);e.id()!=t.userId&&u.get("/Coach/api/friends/"+e.id()).success(function(n){e.friendStatus(n)})};e.getAchievements=function(){var n=[];u.get("/coach/api/achievements/"+e.id()).success(function(t){t&&($.map(t,function(t){t.Owned&&n.push(t)}),e.achievements(n))}).error(function(){})};e.getCategories=function(){u.get("/api/user/"+e.id()+"/categories").success(function(n){var t={};$.each(n,function(n,i){void 0===t[i.CategoryId]?t[i.CategoryId]={categoryName:i.CategoryName,categoryLanguage:i.CategoryLanguage,groups:[i.GroupName],collapsed:ko.observable(!0),toggleCollapse:function(){t[i.CategoryId].collapsed(!t[i.CategoryId].collapsed())}}:t[i.CategoryId].groups.push(i.GroupName)});e.categories(t)}).error(function(){})};e.getUserBlocked=function(){u.get("/api/userblock/"+e.id()).success(function(n){e.isBlocked(n)}).error(function(){})};e.getAccountInfo=function(){e.isAdminGod()&&u.get("/admin/api/account/"+e.id()).success(function(n){e.lastInteraction(n.LastInteractionDate);e.memberSince(n.AccountCreationDate)}).error(function(){})};e.flagProfile=function(){confirm(i18n.t("profile.areyousureyouwanttoflagthisprofile"))&&u.post("/Coach/api/Profiles/"+e.id()+"/flag").success(function(){e.isProfileFlagged(!0);n.log(i18n.t("profile.thisprofilehasbeenflagged"),"","","profile.js",!0)}).error(function(t){switch(t.status){case 403:n.logError(i18n.t("profile.couldnotflagthisprofile"),t.message,"","profile.js",!0);break;case 409:e.isProfileFlagged(!0);n.logError(i18n.t("profile.thisprofilehasalreadybeenflagged"),"","","profile.js",!0);break;default:n.logError(i18n.t("profile.couldnotflagthisprofile"),t.message,"","profile.js",!0)}})};e.openPublicationHelp=function(){t.popup.openHelpPopup("publication")};e.isHelpHighlighted=function(n){return t.isHelpHighlighted(n)};e.openAdminGodPreferences=function(){e.isAdminGod()?window.location="#preferences/"+e.id():"admin"===t.area&&e.currentUserId==e.id()&&(window.location="#preferences");t.popup.close()}};return e.prototype.activate=function(n){var t=this;"undefined"!=typeof n.groupId&&(t.groupId=n.groupId);"undefined"!=typeof n.groupCategoryId&&(t.groupCategoryId=n.groupCategoryId);"undefined"!=typeof n.hostUserId&&t.hostUserId(n.hostUserId);t.isUpdatingUserInfo(!1);"undefined"!=typeof n.id&&(n.id!==t.id()&&(t.feedPage=0,t.nextButtonVisible(!0)),t.id(n.id));"undefined"!=typeof ga&&ga("send","pageview","/coach/profile");t.getUserInfo();t.loadFeed();t.getReviews({CategoryId:-1});t.getAnswerPublishedCount();t.getUserFeedbacks();t.getFriendStatus();t.getAchievements();t.getCategories();t.getUserBlocked();t.getAccountInfo()},e});n("shared/viewmodels/publishedAnswers",["services/logger","viewmodels/shell","plugins/router","plugins/http","durandal/app"],function(n,t){function r(n){i.targetUserId(n)}var i={activate:r,shell:t,targetUserId:ko.observable(-1),openPublicationHelp:function(){t.popup.openHelpPopup("publication")},isHelpHighlighted:function(n){return t.isHelpHighlighted(n)}};return i});n("shared/viewmodels/ratingBox",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,i,r,u){function f(n){return void 0!==n&&null!==n}var e=function(){var n=this;n.activated=!1;n.shell=i;n.answerId=0;n.noThanksCallback=function(){};n.thanksCallback=function(){};n.starCallback=function(){};n.feedbackCallback=function(){};n.openFeedbackCallback=function(){};n.closeFeedbackCallback=function(){};n.gotThanks=ko.observable(!1);n.gotNoThanks=ko.observable(!1);n.thanksJustSent=ko.observable(!1);n.starSelected=ko.observable(!1);n.feedbackIsOpen=ko.observable(!1);n.feedbackText=ko.observable("");n.feedbackWasSent=ko.observable(!1);n.starGoldBalloonShow=ko.observable(!1);n.starSilverBalloonShow=ko.observable(!1);n.starBronzeBalloonShow=ko.observable(!1);n.starSentHintShown=ko.observable(!1);n.hideNotUseful=ko.observable(!1);n.showRecommandation=ko.observable(!0);n.followerId=0;n.followCoachStatus=ko.observable("None");n.lastFeedbackDate=ko.observable(null);n.sendingFeedback=ko.observable(!1);n.sendingStar=ko.observable(!1);n.sendingThanks=ko.observable(!1);n.isTalkingToAdmin=ko.observable(!1);n.sendingFeedbackError=ko.observable(!1);n.clickArea=function(n,t){t.preventDefault();t.stopPropagation();t.cancelBubble=!0};n.showStarSentHint=function(){n.starSentHintShown(!0)};n.hideStarSentHint=function(){n.starSentHintShown(!1)};n.starMouseOver=function(t,i){var r=i.currentTarget.lastElementChild.getAttribute("starType");switch(r){case"Gold":n.starGoldBalloonShow(!0);break;case"Silver":n.starSilverBalloonShow(!0);break;case"Bronze":n.starBronzeBalloonShow(!0)}};n.starMouseOut=function(t,i){var r=i.currentTarget.lastElementChild.getAttribute("starType");switch(r){case"Gold":n.starGoldBalloonShow(!1);break;case"Silver":n.starSilverBalloonShow(!1);break;case"Bronze":n.starBronzeBalloonShow(!1)}};n.openFeedback=function(t,i){i.preventDefault();i.stopPropagation();i.cancelBubble=!0;n.feedbackWasSent()||(n.feedbackIsOpen(!0),n.openFeedbackCallback())};n.closeFeedback=function(){n.feedbackIsOpen(!1);n.closeFeedbackCallback()};n.sendThanks=function(t,r){r.preventDefault();r.stopPropagation();r.cancelBubble=!0;n.sendingThanks()||(n.sendingThanks(!0),u.post("/api/v3/Point",{AnswerId:n.answerId,Type:"Thanks"}).success(function(){"function"==typeof i.analytics.track&&i.analytics.track("ratingbox:thanks",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,currentView:i.currentViewName(),platform:"Widget"});n.thanksJustSent(!0);n.gotThanks(!0);n.thanksCallback();n.sendingThanks(!1)}).error(function(){n.sendingThanks(!1)}))};n.sendNoThanks=function(t,r){r.preventDefault();r.stopPropagation();r.cancelBubble=!0;n.sendingThanks()||(n.sendingThanks(!0),u.post("/api/v3/Point",{AnswerId:n.answerId,Type:"NoThanks"}).success(function(){"function"==typeof i.analytics.track&&i.analytics.track("ratingbox:nothanks",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,currentView:i.currentViewName(),platform:"Widget"});n.gotNoThanks(!0);n.noThanksCallback();n.sendingThanks(!1)}).error(function(){n.sendingThanks(!1)}))};n.sendStar=function(t,r){r.preventDefault();r.stopPropagation();r.cancelBubble=!0;n.sendingStar()||(n.sendingStar(!0),$.ajax({url:"/api/v3/Point",type:"PUT",contentType:"application/x-www-form-urlencoded",dataType:"json",data:{AnswerId:n.answerId,Level:t}}).success(function(){"function"==typeof i.analytics.track&&i.analytics.track("ratingbox:star",{star:t,groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,currentView:i.currentViewName(),platform:"Widget"});n.starSelected(t);n.openFeedback(t,r);n.starCallback(t);n.sendingStar(!1)}).error(function(){n.sendingStar(!1)}))};n.sendFeedback=function(r,f){if(f.preventDefault(),f.stopPropagation(),f.cancelBubble=!0,!n.sendingFeedback()){if(t(n.feedbackText()))return n.sendingFeedbackError(!0),void 0;if(n.feedbackText().length<10)return n.sendingFeedbackError(!1),setTimeout(function(){n.sendingFeedbackError(!0)},0),void 0;var e=moment.utc(n.lastFeedbackDate()).add(10,"s");n.lastFeedbackDate()&&e>moment.utc()||(n.sendingFeedbackError(!1),n.sendingFeedback(!0),u.post("/api/feedbacks",{AnswerId:n.answerId,Text:n.feedbackText()}).success(function(){"function"==typeof i.analytics.track&&i.analytics.track("ratingbox:feedback:send",{groupId:i.groupId,groupName:i.groupName,categoryId:i.zoneId,categoryName:i.zoneName,currentView:i.currentViewName(),platform:"Widget"});n.feedbackWasSent(!0);n.feedbackCallback(n.feedbackText());n.closeFeedback();n.sendingFeedback(!1);n.lastFeedbackDate(moment.utc());n.sendingFeedbackError(!1)}).error(function(){n.sendingFeedback(!1);n.sendingFeedbackError(!0)}))}}};return e.prototype.activate=function(n,t,i){f(n)&&(this.answerId=n.answerId,this.gotThanks(n.thanksGiven),this.gotNoThanks(n.noThanksGiven),this.feedbackText(n.feedbackText),f(n.selectedStar)&&this.starSelected(n.selectedStar.toLowerCase()),f(n.followerId)&&(this.followerId=n.followerId),f(n.followCoachStatus)&&this.followCoachStatus(n.followCoachStatus),f(n.isTalkingToAdmin)&&this.isTalkingToAdmin(n.isTalkingToAdmin));f(i)&&(f(i.noThanksSent)&&(this.noThanksCallback=i.noThanksSent),f(i.thanksSent)&&(this.thanksCallback=i.thanksSent),f(i.starSent)&&(this.starCallback=i.starSent),f(i.feedbackSent)&&(this.feedbackCallback=i.feedbackSent),f(i.openFeedback)&&(this.openFeedbackCallback=i.openFeedback),f(i.closeFeedback)&&(this.closeFeedbackCallback=i.closeFeedback));f(t)&&(f(t.hideNotUseful)&&this.hideNotUseful(t.hideNotUseful),f(t.showRecommandation)&&this.showRecommandation(t.showRecommandation));this.activated=!0;n.feedbackText&&this.feedbackWasSent(!0)},e.prototype.attached=function(){},e});n("shared/viewmodels/userDetails",["services/logger","viewmodels/shell","plugins/router","durandal/app","plugins/http"],function(n,t,i,r,u){function f(n){return void 0!==n&&null!==n}var e=function(){var n=this;n.shell=t;n.style=ko.observable("default");n.className=ko.observable("");n.gotNotif=ko.observable(null);n.groupId=t.groupId;n.groupName=t.groupName;n.zoneId=t.zoneId;n.zoneName=t.zoneName;n.userName=ko.observable("");n.userId=ko.observable(-1);n.profilePicture=ko.observable("");n.isCoach=ko.observable(!1);n.isCertified=ko.observable(!1);n.isAdmin=ko.observable(!1);n.nbPeopleHelped=ko.observable(0);n.levels=ko.observable([]);n.hostDatas=ko.observable(null);n.currentUserId=ko.computed({read:function(){return t.currentUserId||t.userId()},deferEvaluation:!0});n.getProfile=function(){void 0!==n.userId()&&null!==n.userId()&&-1!==n.userId()&&u.get("/api/user/"+n.userId()+"/?groupCategoryId="+n.shell.zoneId).success(function(i){n.userName(i.Nickname);n.profilePicture(i.ProfilePicture);n.nbPeopleHelped(i.NbPeopleHelped);n.levels(i.Levels);n.isCoach(i.IsCoach);n.isCertified(i.IsCertified);n.isAdmin(i.IsAdmin);n.hostDatas(i.HostDatas);"undefined"!=typeof t.isModule&&null!=t.isModule&&t.isModule&&"undefined"!=typeof i.ProfilePicture&&null!=i.ProfilePicture&&-1!=i.ProfilePicture.indexOf("http://")&&n.profilePicture("/Content/images/ProfilePic.jpg")}).error(function(){})};n.goToProfile=function(t,r){r.stopPropagation();i.navigate("profile/"+n.userId(),{trigger:!0,replace:!0})}};return e.prototype.activate=function(n,t,i,u){var e=this;f(t)&&e.className(t);f(i)&&e.style(i);f(u)&&e.gotNotif(u);e.userId(n);e.getProfile();r.on("userdetails:reload",function(t){n==t&&e.getProfile()})},e.prototype.attached=function(){},e});n("shared/viewmodels/userDetailsMini",["services/logger","viewmodels/shell","plugins/router","plugins/http"],function(n,t,i){function r(n){return void 0!==n&&null!==n}function f(n){var t={x:n.offsetLeft,y:n.offsetTop},i;return n.offsetParent&&(i=f(n.offsetParent),t.x+=i.x,t.y+=i.y),t}function o(n,t){var e,u,r,i;if(n=n||window.event,e=n.target||n.srcElement,u={x:n.pageX,y:n.pageY},window.opera||"undefined"==typeof n.offsetX)u=f(t),u.x=n.pageX-u.x,u.y=n.pageY-u.y;else{for(r={x:n.offsetX,y:n.offsetY},i=e;i;)i.mouseX=r.x,i.mouseY=r.y,r.x+=i.offsetLeft,r.y+=i.offsetTop,i=i.offsetParent;for(i=t,r={x:0,y:0};i;){if("undefined"!=typeof i.mouseX){u.x=i.mouseX-r.x;u.y=i.mouseY-r.y;break}r.x+=i.offsetLeft;r.y+=i.offsetTop;i=i.offsetParent}for(i=e;i;)i.mouseX=void 0,i.mouseY=void 0,i=i.offsetParent}return u}function s(n,t){var u,o,f;if(t){var e=20,r=n.getBoundingClientRect(),i=t.getBoundingClientRect();i={bottom:i.bottom-e,right:i.right-e,height:i.height,left:i.left,top:i.top,width:i.width};u=parseInt(n.style.top.replace("px",""));o=parseInt(n.style.left.replace("px",""));(i.top>r.top&&(n.style.top="0px"),i.top>r.bottom&&(n.style.top="0px"),r.bottom>i.bottom&&(n.style.top=u-(r.bottom-i.bottom)+"px"),r.top>i.bottom&&(n.style.top=u-(r.bottom-i.bottom)+"px"),i.left>r.left&&(n.style.left="0px"),i.left>r.right&&(n.style.left="0px"),r.right>i.right)&&(f=o-(r.right-i.right),n.style.left=0>f?"0px":f+"px");r.left>i.right&&(n.style.left=i.right-n.offsetWidth+"px")}}var e=[],u=function(){var n=this;n.shell=t;n.groupId=t.groupId;n.groupName=t.groupName;n.zoneId=t.zoneId;n.zoneName=t.zoneName;n.currentUserId=t.currentUserId;n.style="default";n.left=null;n.top=null;n.referenceElementSelector=null;n.whereAreWe="widget";n.userId=ko.observable(-1);n.nbPeopleHelped=ko.observable(0);n.nickname=ko.observable("");n.userProfilePicture=ko.observable("");n.isCertified=ko.observable(!1);n.isAdmin=ko.observable(!1);n.isVisitor=ko.observable(!1);n.countPerLevel=ko.observable([]);n.userFullDetailsShown=ko.observable(!1);n.userMiniDetailsShown=ko.observable(!1);n.userMiniDetailsWasLoadedOnce=ko.observable(!1);n.disableArrow=!1;n.maxWidth="145px";n.userDetailsPopupStyle="gotoprofile";n.userDetailsPopupCallback=function(){};n.router=ko.computed({read:function(){return t.router},deferEvaluation:!0});n.adminUserNameSpecialStyle=ko.computed({read:function(){return n.isAdmin()&&"home"===n.router().activeInstruction().fragment},deferEvaluation:!0});n.cleanNickname=ko.computed({read:function(){return n.nickname()?n.nickname():i18n.t("common.visitor")},deferEvaluation:!0});n.cleanUserPicture=ko.computed({read:function(){return"undefined"!=typeof t.isModule&&null!=t.isModule&&t.isModule&&-1!=n.userProfilePicture().indexOf("http://")&&n.userProfilePicture(""),n.userProfilePicture()?n.userProfilePicture():"/Content/images/miniProfilePic.jpg"},deferEvaluation:!0});n.openUserMiniDetailsPopup=function(t,i){var r,u,f;"none"!==n.userDetailsPopupStyle&&-1!==n.userId&&($.each(e,function(n,r){r&&r.closeUserMiniDetailsPopup(t,i)}),n.userMiniDetailsShown(!0),n.userMiniDetailsWasLoadedOnce(!0),r=$(i.currentTarget).children(".userDetailsMiniPopup")[0],u=null,u=n.referenceElementSelector?$(r).closest(n.referenceElementSelector).get(0):$("body").get(0),f=o(i,u),r.style.left=f.x+15+"px",r.style.top=f.y-20+"px",s(r,u),n.left&&(r.style.left=parseInt(r.style.left.replace("px",""))+n.left+"px"),n.top&&(r.style.top=parseInt(r.style.top.replace("px",""))+n.top+"px"),i.stopImmediatePropagation(),$(document).bind("click.popupUserMiniDetails_"+n.userId(),function(r){n.closeUserMiniDetailsPopup(t,i);$(this).unbind(r)}))};n.closeUserMiniDetailsPopup=function(t,i){i.stopImmediatePropagation();n.userMiniDetailsShown(!1)};n.openUserFullDetailsPopup=function(){"none"!==n.userDetailsPopupStyle&&-1!==n.userId&&n.userFullDetailsShown(!0)};n.closeUserFullDetailsPopup=function(){n.userFullDetailsShown(!1)};n.click=function(t,i){switch(n.userDetailsPopupStyle){case"gotoprofile":n.goToProfile(t,i);break;case"userminidetails":n.openUserMiniDetailsPopup(t,i);break;case"callback":n.userDetailsPopupCallback(t,i)}};n.goToProfile=function(t,r){r.stopImmediatePropagation();-1!==n.userId()&&i.navigate("profile/"+n.userId(),{trigger:!0,replace:!0})};n.currentUserId=ko.computed({read:function(){return t.currentUserId||t.userId()},deferEvaluation:!0})};return u.prototype.activate=function(n,t){r(n)&&(r(n.userId)&&this.userId(n.userId),r(n.nickname)&&this.nickname(n.nickname),r(n.userProfilePicture)&&this.userProfilePicture(n.userProfilePicture),r(n.nbPeopleHelped)&&this.nbPeopleHelped(n.nbPeopleHelped),r(n.countPerLevel)&&(this.countPerLevel(n.countPerLevel),r(this.countPerLevel().none)||(this.countPerLevel().none=n.countPerLevel.None),r(this.countPerLevel().silver)||(this.countPerLevel().silver=n.countPerLevel.Silver),r(this.countPerLevel().bronze)||(this.countPerLevel().bronze=n.countPerLevel.Bronze),r(this.countPerLevel().gold)||(this.countPerLevel().gold=n.countPerLevel.Gold)),r(n.isCertified)&&this.isCertified(n.isCertified),r(n.isAdmin)&&this.isAdmin(n.isAdmin),this.isVisitor(void 0==n.isAdmin?!1:!n.isAdmin));r(t)&&(r(t.style)&&(this.style=t.style),r(t.left)&&(this.left=t.left),r(t.top)&&(this.top=t.top),r(t.referenceElementSelector)&&(this.referenceElementSelector=t.referenceElementSelector),r(t.disableArrow)&&(this.disableArrow=t.disableArrow),r(t.maxWidth)&&(this.maxWidth=t.maxWidth),r(t.userDetailsPopupStyle)&&(this.userDetailsPopupStyle=t.userDetailsPopupStyle.toLowerCase()),r(t.userDetailsPopupCallback)&&(this.userDetailsPopupCallback=t.userDetailsPopupCallback));e.push(this)},u.prototype.attached=function(){},u});n("text!shared/views/_publishedAnswers.html",[],function(){return'<div>\r\n    <!--ko if: isLoading -->\r\n    <div class="publishedAnswersLoading">\r\n        <div class="outer spin-pulse"><\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n\r\n    <!--ko if: !isLoading() -->\r\n    <div class="profileBoxHeaderContain">\r\n        <div class="profileBoxHeaderItem">\r\n            <div class="iconPublication"><\/div>\r\n            <span data-bind="i18n:\'profile.Xpublications\', i18nOptions:{count: publicationCount}"><\/span>\r\n        <\/div>\r\n        <div class="profileBoxHeaderItem">\r\n            <div class="iconBrandWebsite"><\/div>\r\n            <span data-bind="i18n:\'profile.Xsponsoredbrands\', i18nOptions:{count: brandCount}"><\/span>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="fadeInDown" data-bind="foreach: answers">\r\n        <div class="publishedAnswerContain">\r\n\r\n            <div class="pictureContain">\r\n                <!--ko if: UserDetails.Picture == null || UserDetails.Picture == \'\' -->\r\n                <div class="picture" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/XLProfilePic.jpg\\\');\', href:\'/coach#profile/\' + UserDetails.Id}"><\/div>\r\n                <!--/ko-->\r\n                <!--ko if: UserDetails.Picture != \'\' && UserDetails.Picture != null -->\r\n                <div class="picture" data-bind="attr: {style:\'background-image: url(\\\'\' + UserDetails.Picture + \'\\\');\', href:\'coach#profile/\' + UserDetails.Id}"><\/div>\r\n                <!--/ko-->\r\n            <\/div>\r\n            <div class="brandLogo">\r\n                <img data-bind="attr:{src: GroupLogo, alt: GroupName + \' (\' + CategoryName + \')\', title: GroupName + \' (\' + CategoryName + \')\'}" />\r\n            <\/div>\r\n\r\n            <div class="answerText">\r\n                <span class="profileReviewQuote">&ldquo;<\/span>\r\n                <span data-bind="customhtml: AnswerText, truncatedText: AnswerText, length:128, emojify"><\/span>\r\n                <span class="profileReviewQuote">&rdquo;<\/span>\r\n            <\/div>\r\n\r\n            <div class="answerFooter">\r\n                <span class="detailsLink" data-bind="i18n:\'profile.details\', click: openDetails"><\/span>\r\n                <a class="seePublishedLink" target="_blank" data-bind="i18n:\'profile.seeonthewebsite\', attr: {href: UrlPublished}"><\/a>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <!--ko if: showDetails() && answerDetailed() !== null -->\r\n    <!--ko with: answerDetailed -->\r\n    <div class="answerDetailsLayer" data-bind="click: closeDetails"><\/div>\r\n\r\n    <div class="answerDetailsContain fadeInFast">\r\n        <div class="publishedAnswerContain">\r\n            <div class="closeButton" data-bind="click: closeDetails"><\/div>\r\n\r\n            <div class="answerDetailsBrandLogoContain">\r\n                <div class="answerDetailsBrandLogo">\r\n                    <img data-bind="attr:{src: GroupLogo, alt: CategoryName, title: CategoryName}" />\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="postText">\r\n                <div class="pictureContain">\r\n                    <!--ko if: PostUserDetails.Picture == null || PostUserDetails.Picture == \'\' -->\r\n                    <div class="picture" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/XLProfilePic.jpg\\\');\', href:\'/coach#profile/\' + PostUserDetails.Id}"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: PostUserDetails.Picture != \'\' && PostUserDetails.Picture != null -->\r\n                    <div class="picture" data-bind="attr: {style:\'background-image: url(\\\'\' + PostUserDetails.Picture + \'\\\');\', href:\'coach#profile/\' + PostUserDetails.Id}"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n\r\n                <span data-bind="customhtml: PostText, emojify"><\/span>\r\n            <\/div>\r\n\r\n            <div class="answerText">\r\n                <div class="pictureContain">\r\n                    <!--ko if: UserDetails.Picture == null || UserDetails.Picture == \'\' -->\r\n                    <div class="picture" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/XLProfilePic.jpg\\\');\', href:\'/coach#profile/\' + UserDetails.Id}"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: UserDetails.Picture != \'\' && UserDetails.Picture != null -->\r\n                    <div class="picture" data-bind="attr: {style:\'background-image: url(\\\'\' + UserDetails.Picture + \'\\\');\', href:\'coach#profile/\' + UserDetails.Id}"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <span data-bind="customhtml: AnswerText, emojify"><\/span>\r\n            <\/div>\r\n\r\n            <div class="answerDate" data-bind="text: moment(AnswerDate).format(\'LLL\')"><\/div>\r\n\r\n            <div class="answerFooter">\r\n                <span class="urlPublishedCta" data-bind="i18n:\'profile.youanswerispublishedon\'"><\/span>\r\n                <a class="urlPublished" target="_blank" data-bind="text: UrlPublished, attr: {href: UrlPublished}"><\/a>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--/ko-->\r\n    <!--/ko-->\r\n<\/div>\r\n'});n("text!shared/views/achievement.html",[],function(){return'<div>\r\n    <div data-bind="attr:{\'class\':owned?\'badgeContainer coachBadgeContainer-\'+type + \' coachBadgeContainerSize-\'+size:\'badgeContainer badgeContainerNotOwned coachBadgeContainerSize-\'+size}">\r\n        <div class="outerCircle"><\/div>\r\n        <div class="innerCircle"><\/div>\r\n        <div class="badgePic"><img data-bind="attr:{src:\'/Content/images/achievements/\' + cleanName + \'.png\'}" /><\/div>\r\n        <div class="badgeNotOwned">?<\/div>\r\n        <div class="badgeStrap"><span class="badgeName" data-bind="i18n:\'common:badge.\' + cleanName"><\/span><\/div>\r\n        <div class="badgeLeftStrap"><\/div>\r\n        <div class="badgeRightStrap"><\/div>\r\n        <div class="badgeLeftWhiteTriangle"><\/div>\r\n        <div class="badgeRightWhiteTriangle"><\/div>\r\n        <div class="badgeLeftDarkTriangle"><\/div>\r\n        <div class="badgeRightDarkTriangle"><\/div>\r\n        <div class="badgeLevel" data-bind="visible:owned && level != null">\r\n            <img src="/Content/images/achievements/BadgeLevel1.png" data-bind="visible:level == \'Bronze\'"/>\r\n            <img src="/Content/images/achievements/BadgeLevel2.png" data-bind="visible:level == \'Silver\'" />\r\n            <img src="/Content/images/achievements/BadgeLevel3.png" data-bind="visible:level == \'Gold\'" />\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!shared/views/chats.html",[],function(){return'<div class="chatStage" data-bind="if: !isTutorialRunning() && !isInInbox()">\r\n    <!--ko if:hiddenChatList().length > 0-->\r\n    <div class="numberHiddenChats" data-bind="text:hiddenChatList().length, click:hiddenChatListDisplayedToggle"><\/div>\r\n    <div class="hiddenChatsList" data-bind="visible: hiddenChatListDisplayed()">\r\n        <!--ko foreach:hiddenChatList-->\r\n        <!--ko if: chats().length > 0-->\r\n        <div data-bind="customhtml: chats()[0].Text, click:$root.openHiddenChat, emojify" class="hiddenChatItem"><\/div>\r\n        <!--/ko-->\r\n        <!--ko if: chats().length === 0-->\r\n        <div data-bind="customhtml: \'empty\', click:$root.openHiddenChat, emojify" class="hiddenChatItem"><\/div>\r\n        <!--/ko-->\r\n        <!--/ko-->\r\n    <\/div>\r\n    <!--/ko-->\r\n\r\n    <div class="chatDisplayedChatList">\r\n        <!--ko foreach:displayedChatList-->\r\n        <div class="chatWindow slideUpNoBounce" data-bind="click: $root.clearNotifChat">\r\n            <div class="chatHeader" data-bind="css:{minimizedHeader: isMinimized, blink: gotNotif}">\r\n                <div class="titleContain" data-bind="click:$root.toggleMinimizeChat">\r\n                    <div class="title">\r\n                        <span data-bind="customhtml:otherUsersLabel()"><\/span><span data-bind="visible:title().length>0, customhtml:\' | \' + title(), emojify"><\/span>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="buttonsContain">\r\n                    <div class="minimize" data-bind="click:$root.toggleMinimizeChat, css:{close: $root.options().adminLevel == \'Agent\'}"><\/div>\r\n                    <div class="close" data-bind="click:$root.closeChat, visible: !$root.options().isAdmin || $root.options().adminLevel != \'Agent\'"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="minimizedClearer" data-bind="visible: isMinimized"><\/div>\r\n            <div class="chatContentWrapper" data-bind="visible: !isMinimized()">\r\n                <div class="chatContent" data-bind="visible: isLoading();">\r\n                    <div class="loader">\r\n                        <div class="outer spin-pulse"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="chatContent" data-bind="attr:{id:\'chatContent\' + id}, visible: !isLoading();">\r\n                    <div class="displayPreviousMsgs" data-bind="visible:nextBtnVisible, click:next, i18n:\'chats.displaypreviousmessages\'"><\/div>\r\n                    <!--ko foreach:chats()-->\r\n                    <div data-bind="css:{shellChatBubbleOwn: UserDetails != null && UserDetails.Id == $root.currentUserId, shellChatBubbleOther: UserDetails == null || UserDetails.Id != $root.currentUserId, \'chatBeginChain\': beginChain, \'chatEndChain\': endChain}">\r\n                        <!--ko if: UserDetails != null && UserDetails.Id == $root.currentUserId-->\r\n                        <div class="feedUserStars" data-bind="visible: beginChain, compose: {\r\n                            model: \'shared/viewmodels/userDetailsMini\',\r\n                            view: \'shared/views/userDetailsMini.html\',\r\n                            activationData: [\r\n                                data = {\r\n                                    userId: UserDetails.Id,\r\n                                    nickname: UserDetails.Nickname,\r\n                                    countPerLevel: UserDetails.UserLevels,\r\n                                    nbPeopleHelped: UserDetails.NbPeopleHelped\r\n                                },\r\n                                options = {\r\n                                    userDetailsPopupStyle: \'callback\',\r\n                                    userDetailsPopupCallback: function() { $root.shell.popup.openUserProfile(UserDetails.Id, $root.shell.groupId) },\r\n                                    referenceElementSelector: \'.chatContent\',\r\n                                    style: \'nicknameOnly\',\r\n                                    disableArrow: true\r\n                                }],\r\n                                activate: true }">\r\n                        <\/div>\r\n                        <pre data-bind="customhtml:Text, emojify"><\/pre>\r\n                        <!--/ko-->\r\n                        <!--ko if: UserDetails != null && UserDetails.Id != $root.currentUserId -->\r\n                        <div class="feedUserStars" data-bind="visible: beginChain, compose: {\r\n                        model: \'shared/viewmodels/userDetailsMini\',\r\n                        view: \'shared/views/userDetailsMini.html\',\r\n                        activationData: [\r\n                            data = {\r\n                                userId: UserDetails.Id,\r\n                                nickname: UserDetails.Nickname,\r\n                                countPerLevel: UserDetails.UserLevels,\r\n                                nbPeopleHelped: UserDetails.NbPeopleHelped\r\n                            },\r\n                            options = {\r\n                                userDetailsPopupStyle: \'callback\',\r\n                                userDetailsPopupCallback: function() { $root.shell.popup.openUserProfile(UserDetails.Id, $root.shell.groupId) },\r\n                                referenceElementSelector: \'.chatContent\',\r\n                                style: \'nicknameOnly\',\r\n                                disableArrow: true\r\n                            }],\r\n                            activate: true }">\r\n                        <\/div>\r\n                        <pre data-bind="customhtml:Text, emojify"><\/pre>\r\n                        <!--/ko-->\r\n                        <!--ko if: UserDetails== null || UserDetails.Id != $root.currentUserId -->\r\n                        <!--ko if: UserDetails == null-->\r\n                        <div class="shellChatBubbleOther">\r\n                            <div class="feedUserStars" data-bind="visible: beginChain, compose: {\r\n                            model: \'shared/viewmodels/userDetailsMini\',\r\n                            view: \'shared/views/userDetailsMini.html\',\r\n                            activationData: [\r\n                                data = {\r\n                                    userId: -1,\r\n                                    nickname: \'Communauté\'\r\n                                },\r\n                                options = {\r\n                                    style: \'nicknameOnly\',\r\n                                    userDetailsPopupStyle: \'none\',\r\n                                    maxWidth: \'250px\'\r\n                                }],\r\n                             activate: true }">\r\n                            <\/div>\r\n                            <!--ko if: typeof ChatAttachements != \'undefined\' && ChatAttachements != null-->\r\n                            <!--ko foreach:ChatAttachements-->\r\n                            <!--ko if:Type==1-->\r\n                            <div class="chatTextImage">\r\n                                <img data-bind="attr:{src:ImageUrl}" />\r\n                                <div class="chatTextImageTitle fontColor clientBoldFont" data-bind="text:Title"><\/div>\r\n                            <\/div>\r\n                            <!--/ko-->\r\n                            <!--/ko-->\r\n                            <!--/ko-->\r\n                            <pre data-bind="customhtml:Text, emojify"><\/pre>\r\n                            <!--ko if: typeof ChatAttachements != \'undefined\' && ChatAttachements != null-->\r\n                            <!--ko foreach:ChatAttachements-->\r\n                            <!--ko if:Type==0-->\r\n                            <div class="inboxButtons">\r\n                                <!--ko foreach:ChatButtons-->\r\n                                <div data-bind="text:Title, click: $root.buttonClick.bind($data, Value, $parents[2])"><\/div>\r\n                                <!--/ko-->\r\n                            <\/div>\r\n                            <!--/ko-->\r\n                            <!--/ko-->\r\n                            <!--/ko-->\r\n                        <\/div>\r\n                        <!--/ko-->\r\n                        <div class="clearer"><\/div>\r\n\r\n                        <!--/ko-->\r\n                    <\/div>\r\n                    <!--ko if: endChain-->\r\n                    <div data-bind="css:{\'shellChatBubbleTriangleOwn\': UserDetails != null && UserDetails.Id == $root.currentUserId, \'shellChatBubbleTriangleOther\': UserDetails == null || UserDetails.Id != $root.currentUserId}"><\/div>\r\n                    <div class="clearer"><\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <div class="isTypingChats" data-bind="visible:otherIsTyping, customhtml:otherTypingText()+\'...\'"><\/div>\r\n                    <div class="chatCloseBtn" data-bind="visible: !isClosed() && $root.options().isAdmin && $root.options().adminLevel == \'Agent\', click: close, i18n: \'chats.close\'"><\/div>\r\n                <\/div>\r\n                <textarea class="chatInput" data-bind="visible: !isClosed(),emojipicker, hasFocus: inputHasFocus, value:chat, enterkey: $root.sendChat, autoExpandTextareaChat: true, , valueUpdate:\'afterkeydown\', i18n:\'[placeholder]chats.typeyourmessagehere\'"><\/textarea>\r\n            <\/div>\r\n        <\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n<\/div>'});n("text!shared/views/inbox.html",[],function(){return'<div class="inboxContain">\r\n    <div class="inboxColumn">\r\n        <div class="inboxTitle" data-bind="i18n:\'inbox.inbox\'"><\/div>\r\n        <div class="inboxToolbarContain pullDown">\r\n            <div class="inboxToolbarFilterContain">\r\n                <div class="inboxFilterCta" data-bind="i18n:\'inbox.filter\'"><\/div>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'None\' && !isLoading(), i18n:\'inbox.none\', click: clearFilter"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'None\' && isLoading(), i18n:\'inbox.none\'" class="disabled" disabled="disabled"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() === \'None\', i18n:\'inbox.none\'" class="selected" disabled="disabled"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'Unread\' && !isLoading(), i18n:\'inbox.unread\', click: setFilterUnread"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'Unread\' && isLoading(), i18n:\'inbox.unread\'" class="disabled" disabled="disabled"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() === \'Unread\', i18n:\'inbox.unread\'" class="selected" disabled="disabled"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'Archived\' && !isLoading(), i18n:\'inbox.trash\', click: setFilterArchived"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() !== \'Archived\' && isLoading(), i18n:\'inbox.trash\'" class="disabled" disabled="disabled"><\/button>\r\n                <button data-bind="visible: selectedMessageFilter() === \'Archived\', i18n:\'inbox.trash\'" class="selected" disabled="disabled"><\/button>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="inboxToolbarContain">\r\n            <div class="inboxToolbarSelectAll">\r\n                <input class="inboxMessageInputSelect" type="checkbox" data-bind="checked: selectAll, i18n:\'[title]inbox.selectunselectall\'" />\r\n            <\/div>\r\n            <div class="inboxToolbarButtonsContain">\r\n                <!--<button data-bind="visible: selectedMessages().length > 0,  click: markSelectedAsRead, i18n:\'inbox.markselectedasread\'"><\/button>\r\n                <button data-bind="visible: selectedMessages().length == 0, i18n:\'inbox.markselectedasread\'" class="disabled"><\/button>-->\r\n                <!--ko if: selectedMessageFilter() !== \'Archived\' -->\r\n                <button class="archive" data-bind="visible: selectedMessages().length > 0,  click: deleteSelected, i18n:\'inbox.deleteselected\'"><\/button>\r\n                <button class="archive disabled" data-bind="visible: selectedMessages().length == 0, i18n:\'inbox.deleteselected\'" disabled="disabled"><\/button>\r\n                <!--/ko-->\r\n                <!--ko if: selectedMessageFilter() === "Archived" -->\r\n                <button class="permaDelete" data-bind="visible: selectedMessages().length > 0, click: deleteSelected, i18n:\'inbox.permanentlydelete\'"><\/button>\r\n                <button class="permaDelete disabled" data-bind="visible: selectedMessages().length == 0, i18n:\'inbox.permanentlydelete\'" disabled="disabled"><\/button>\r\n                <!--/ko-->\r\n            <\/div>\r\n        <\/div>\r\n        <div class="emptyInbox" data-bind="visible: messages().length == 0">\r\n            <span data-bind="visible: !isLoading() && selectedMessageFilter() === \'None\', i18n:\'inbox.inboxisemptyanswerquestionsonthehomepagetofillit\'"><\/span>\r\n            <span data-bind="visible: !isLoading() && selectedMessageFilter() === \'Unread\', i18n:\'inbox.youhavenounreadmessages\'"><\/span>\r\n            <span data-bind="visible: !isLoading() && selectedMessageFilter() === \'Archived\', i18n:\'inbox.youhavenodeletedmessages\'"><\/span>\r\n            <div class="inboxLoading fadeInFast" data-bind="visible: isLoading"><\/div>\r\n        <\/div>\r\n        <div class="inboxMessageList" data-bind="foreach: messages, scroll: !isLoading(), scrollOptions: { loadFunc: nextListMessages, offset: 500 }">\r\n            <div class="inboxMessageContain" data-bind="css:{inboxMessageRead: !GotNotif() && !isActiveDiscussion(), inboxMessageUnread: GotNotif(), inboxMessageActive: isActiveDiscussion(), inboxMessageSelected: isSelected()}">\r\n                <div class="inboxMessageSelect">\r\n                    <input class="inboxMessageInputSelect" type="checkbox" data-bind="checked: isSelected" />\r\n                <\/div>\r\n                <div class="inboxMessage">\r\n                    <div class="messageDelete" data-bind="visible: $root.selectedMessageFilter() !== \'Archived\', click: $root.archive, i18n:\'[title]inbox.deleteselected\'">&#10006<\/div>\r\n                    <div class="messageDelete" data-bind="visible: $root.selectedMessageFilter() === \'Archived\', click:$root.archive, i18n:\'[title]inbox.permanentlydelete\'">&#10006<\/div>\r\n                    <div data-bind="click: $root.selectChat">\r\n                        <!--ko if: Type != "CoachChannel" -->\r\n                        <div class="inboxUserName">\r\n                            <div class="feedUserStars" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [\r\n                                 data = {\r\n                                    userId: OtherUser().Id,\r\n                                    nickname: OtherUser().Nickname,\r\n                                    countPerLevel: OtherUser().UserLevels,\r\n                                    nbPeopleHelped: OtherUser().NbPeopleHelped\r\n                                 },\r\n                                 options = {\r\n                                    userDetailsPopupStyle: \'callback\',\r\n                                    userDetailsPopupCallback: function() { $root.shell.popup.openUserProfile(OtherUser().Id, $root.shell.groupId) },\r\n                                    referenceElementSelector: \'.inboxMessageList\'\r\n                                 }],\r\n                                 activate: true }">\r\n                            <\/div>\r\n                            <span class="inboxUserId" data-bind="visible:OtherUser().Nickname == null, text: OtherUser().Id"><\/span>\r\n                        <\/div>\r\n\r\n                        <!--ko if: moment(LastInteractionDate).format(\'DD/MM/YYYY\') != moment().format(\'DD/MM/YYYY\') -->\r\n                        <div class="lastMessageDate" data-bind="text:moment.utc(LastInteractionDate).format(\'DD/MM/YYYY\')"><\/div>\r\n                        <!--/ko-->\r\n                        <!--ko if: moment(LastInteractionDate).format(\'DD/MM/YYYY\') == moment().format(\'DD/MM/YYYY\') -->\r\n                        <div class="lastMessageDate" data-bind="text:moment.utc(LastInteractionDate).fromNow()"><\/div>\r\n                        <!--/ko-->\r\n\r\n                        <div class="userQuestion" data-bind="customhtml:TextPost, emojify"><\/div>\r\n\r\n                        <!--<div class="userQuestion" data-bind="customhtml:TextPost, emojify"><\/div>-->\r\n                        <div class="lastMessage" data-bind="customhtml:Text, emojify"><\/div>\r\n                        <!--/ko-->\r\n                        <!--ko if: Type == "CoachChannel" -->\r\n                        <div class="inboxUserName">\r\n                            <div class="chatUserId" data-bind="customhtml:TextPost, emojify"><\/div>\r\n                            <div class="lastMessage" data-bind="customhtml:Text, emojify"><\/div>\r\n                        <\/div>\r\n                        <!--/ko-->\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n            <!--ko if: $index() === $root.messages().length-1 -->\r\n            <div class="inboxNoMoreMessageContain">\r\n                <div class="inboxLoading fadeInFast" data-bind="visible: $root.isLoading()"><\/div>\r\n                <button class="inboxNoMoreMessageButton" data-bind="visible: !$root.noMoreMessage() && !$root.isLoading(), i18n:\'common.next\', click: $root.nextListMessages"><\/button>\r\n                <div class="inboxNoMoreMessage" data-bind="visible: $root.noMoreMessage(), i18n:\'inbox.nomoremessagesinyourinbox\'"><\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n        <\/div>\r\n    <\/div>\r\n    <div class="inboxChatColumn">\r\n        <div class="inboxChatBoxLoading slideDown" data-bind="visible: isLoadingChatLoader()">\r\n            <div class="outer spin-pulse"><\/div>\r\n        <\/div>\r\n        <div class="inboxChatBox" data-bind="visible: !isLoadingChatLoader()">\r\n            <!--ko if: currentChat().length === 0 -->\r\n            <div class="emptyChatBox" data-bind="i18n:\'inbox.selectaconversationintheleftcolumntoviewit\'"><\/div>\r\n            <!--/ko-->\r\n            <!--ko if: currentChat().length > 0 -->\r\n            <div class="displayPreviousMsgs" data-bind="visible: nextBtnVisible, click: next, i18n:\'inbox.displaypreviousmessages\'"><\/div>\r\n            <div class="chatBubbleContain fadeInFast">\r\n                <!--ko foreach: currentChat-->\r\n                <div data-bind="css:{\'inboxChatBubbleOwn\': UserDetails != null && UserDetails.Id == $root.currentUserId, \'inboxChatBubbleOther\': UserDetails == null || UserDetails.Id != $root.currentUserId, \'inboxBeginChain\': beginChain, \'inboxEndChain\': endChain}">\r\n                    <!--ko if:beginChain-->\r\n                    <!--ko if:UserDetails != null-->\r\n                    <div class="feedUserStars" data-bind="compose: {\r\n                                 model: \'shared/viewmodels/userDetailsMini\',\r\n                                 view: \'shared/views/userDetailsMini.html\',\r\n                                 activationData: [\r\n                                    data = {\r\n                                        userId: UserDetails.Id,\r\n                                        nickname: UserDetails.Nickname,\r\n                                        countPerLevel: UserDetails.UserLevels,\r\n                                        nbPeopleHelped: UserDetails.NbPeopleHelped\r\n                                    },\r\n                                    options = {\r\n                                        userDetailsPopupStyle: \'callback\',\r\n                                        userDetailsPopupCallback: function() { $root.shell.popup.openUserProfile(UserDetails.Id, $root.shell.groupId) },\r\n                                        referenceElementSelector: \'.inboxChatColumn\'\r\n                                    }],\r\n                                 activate: true }">\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if:UserDetails == null-->\r\n                    <div class="feedUserStars" data-bind="compose: {\r\n                                model: \'shared/viewmodels/userDetailsMini\',\r\n                                view: \'shared/views/userDetailsMini.html\',\r\n                                activationData: [\r\n                                data = {\r\n                                    userId: -1,\r\n                                    nickname: \'Communauté\'\r\n                                },\r\n                                options = {\r\n                                    style: \'nicknameOnly\',\r\n                                    clickable: false,\r\n                                    maxWidth: \'250px\'\r\n                                }],\r\n                                activate: true }">\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <span class="inboxDate" data-bind="text:typeof $data.DateChat == \'undefined\' ? \'\' :moment.utc(DateChat, \'YYYY-MM-DDTHH:mm:ss.SSS\').fromNow()"><\/span>\r\n                    <!--ko if: typeof ChatAttachements != \'undefined\' && ChatAttachements != null-->\r\n                    <!--ko foreach:ChatAttachements-->\r\n                    <!--ko if:Type==1-->\r\n                    <div class="chatTextImage">\r\n                        <img data-bind="attr:{src:ImageUrl}"/>\r\n                        <div class="chatTextImageTitle fontColor clientBoldFont" data-bind="text:Title"><\/div>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <div data-bind="customhtml:Text, emojify" class="inboxText"><\/div>\r\n                    <!--ko if: typeof ChatAttachements != \'undefined\' && ChatAttachements != null-->\r\n                    <!--ko foreach:ChatAttachements-->\r\n                    <!--ko if:Type==0-->\r\n                    <div class="inboxButtons">\r\n                        <!--ko foreach:ChatButtons-->\r\n                        <div class="" data-bind="text:Title, click: $root.buttonClick.bind($data, Value)"><\/div>\r\n                        <!--/ko-->\r\n                    <\/div>\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <div class="clearer"><\/div>\r\n\r\n                <!--ko if: endChain-->\r\n                <div data-bind="css:{\'inboxChatBubbleTriangleOwn\': UserDetails != null && UserDetails.Id == $root.currentUserId, \'inboxChatBubbleTriangleOther\': UserDetails == null || UserDetails.Id != $root.currentUserId}"><\/div>\r\n                <div class="clearer"><\/div>\r\n                <!--/ko-->\r\n                <!--/ko-->\r\n            <\/div>\r\n            <!--ko if: rating.show() && rating.isAsker() && (rating.type() === "Answer" || rating.type() === "CoachToCoach") -->\r\n            <div class="inboxRatingBoxCollapsible" data-bind="css: {collapsed: rating.collapsed()}">\r\n                <div class="ratingCollapsedText" data-bind="visible: rating.collapsed(), click: rating.expandBottomBar, i18n:\'inbox.ratethisanswer\'"><\/div>\r\n                <div class="ratingCollapsedButton" data-bind="visible: !rating.collapsed(), click: rating.collapseBottomBar">✖<\/div>\r\n                <div class="inboxRatingBoxContain pullDown" data-bind="visible: !rating.collapsed(), compose: {\r\n                     model: \'shared/viewmodels/ratingBox\',\r\n                     view: \'shared/views/ratingBox.html\',\r\n                     activationData: [\r\n                         data = {\r\n                            answerId: rating.answerId,\r\n                            thanksGiven: rating.getThanks,\r\n                            noThanksGiven: rating.getNoThanks,\r\n                            selectedStar: rating.pointLevel,\r\n                            feedbackText: rating.feedbackText,\r\n                            followerId: rating.otherUserId,\r\n                            followCoachStatus: rating.otherUserFollowerStatus\r\n                         },\r\n                         options = {\r\n                            showFollowCoachOption: rating.otherUserIsCoach\r\n                         },\r\n                         callbacks = {\r\n                            noThanksSent: rating.noThanksSent,\r\n                            thanksSent: rating.thanksSent,\r\n                            starSent: rating.starSent,\r\n                            feedbackSent: rating.feedbackSent,\r\n                            openFeedback: rating.feedbackOpened,\r\n                            closeFeedback: rating.feedbackClosed\r\n                         }\r\n                     ],\r\n                     activate: true,\r\n                     cacheViews: false }"><\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <div class="isTypingInbox" data-bind="visible:otherIsTyping, customhtml:otherTypingText()+\'...\'">...<\/div>\r\n            <!--/ko-->\r\n            <div data-bind="visible: !isClosed() && $root.options().isAdmin && $root.options().adminLevel == \'Agent\', click: close">Fermer<\/div>\r\n        <\/div>\r\n        <form class="inboxChatInputBar" data-bind="submit:send, visible: !isClosed()">\r\n            <textarea rows="1" class="inboxChatInput" data-bind="emojipicker, value: chat, enterkey: $root.send, autoExpandTextareaInbox: true, valueUpdate: \'afterkeydown\'"><\/textarea><!--Whitespace\r\n            --><button type="submit" class="button inboxChatButton" data-i18n="[title]inbox.clickheretosendyourmessage;common.send"><\/button>\r\n            <div class="inboxChatInputLegend" data-bind="i18n:\'inbox.shiftplusenterequalnewline\'"><\/div>\r\n        <\/form>\r\n    <\/div>\r\n<\/div>'});n("text!shared/views/preferences.html",[],function(){return'<div class="preferencesContain">\r\n\r\n    <div class="preferencesSidebarContain">\r\n        <div class="preferencesSidebarTab" data-bind="click: $root.changeTab.bind($data, \'account\'), css: {preferencesSidebarTabSelected: currentTab() === \'account\'}">\r\n            <span data-bind="i18n:\'preferences.account\'"><\/span>\r\n        <\/div>\r\n        <!--ko if: shell.area === "coach" -->\r\n        <div class="preferencesSidebarTab" data-bind="click: $root.changeTab.bind($data, \'coach\'), css: {preferencesSidebarTabSelected: currentTab() === \'coach\'}">\r\n            <span data-bind="i18n:\'preferences.coach\'"><\/span>\r\n        <\/div>\r\n        <div class="preferencesSidebarTab" data-bind="click: $root.changeTab.bind($data, \'social\'), css: {preferencesSidebarTabSelected: currentTab() === \'social\'}">\r\n            <span data-bind="i18n:\'preferences.social\'"><\/span>\r\n        <\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n\r\n    <div class="preferencesContentContain" data-bind="visible: isLoading()">\r\n        <div class="loader">\r\n            <div class="outer spin-pulse"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="preferencesContentContain fadeInFast" data-bind="visible: !isLoading() && currentTab() === \'account\'">\r\n        <div class="preferencesContentSection">\r\n            <div class="preferencesContentSectionTitle" data-bind="i18n:\'preferences.account\'"><\/div>\r\n\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.userid\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: userId()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.username\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: userName()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.accountcreationdate\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: accountCreationDate()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <!--ko if: userPicture() == null || userPicture() == \'\' -->\r\n            <div class="preferencesProfilePicture" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/XLProfilePic.jpg\\\');\'}"><\/div>\r\n            <!--/ko-->\r\n            <!--ko if: userPicture() != \'\' && userPicture() != null -->\r\n            <div class="preferencesProfilePicture" data-bind="attr: {style: \'background-image: url(\\\'\' + userPicture() + \'\\\');\'}"><\/div>\r\n            <!--/ko-->\r\n        <\/div>\r\n\r\n        <div class="preferencesContentSection" data-bind="css: {important: password.notSet()}">\r\n\r\n            <div data-bind="visible: password.isLoading()">\r\n                <div class="loaderLayer"><\/div>\r\n                <div class="loader loaderEmail">\r\n                    <div class="outer spin-pulse"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="preferencesContentSectionTitle" data-bind="i18n:\'preferences.password\'"><\/div>\r\n\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.lastchangeddate\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: password.changedDate()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.lastfaileddate\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: password.lastFailureDate()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.failuressincelastconnection\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <span data-bind="text: password.failuresSinceLastSuccess()"><\/span>\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="preferencesContentOption fadeInFast">\r\n                <!--ko if: password.notSet() -->\r\n                <div class="preferencesContentOption error fadeInFast">\r\n                    <div data-bind="i18n:\'preferences.youareconnectedusingasocialaccount\'"><\/div>\r\n                    <div data-bind="i18n:\'preferences.setapasswordsoyoucanloginwithyouremailaddress\'"><\/div>\r\n                <\/div>\r\n                <!--/ko-->\r\n\r\n                <div class="fadeInFast" data-bind="visible: password.changeFormVisible()">\r\n                    <div class="preferencesContentTitle" data-bind="visible: !password.notSet(), i18n:\'preferences.changeyourpassword\'"><\/div>\r\n                    <div class="preferencesContentTitle smoothBlink" data-bind="visible: password.notSet(), i18n:\'preferences.setapasswordtoyourtokywokyaccount\'"><\/div>\r\n                    \r\n                    <!--ko if: !password.notSet() -->\r\n                    <div class="preferencesContentOption">\r\n                        <div class="preferencesContentOptionTitle">\r\n                            <span data-bind="i18n:\'preferences.currentpassword\'"><\/span>\r\n                        <\/div>\r\n                        <div class="preferencesContentOptionInput">\r\n                            <input type="password" data-bind="value: password.currentPassword, valueUpdate: \'afterkeydown\'" />\r\n                        <\/div>\r\n                    <\/div>\r\n                    <!--/ko-->\r\n\r\n                    <div class="preferencesContentOption">\r\n                        <div class="preferencesContentOptionTitle">\r\n                            <span data-bind="i18n:\'preferences.newpassword\'"><\/span>\r\n                        <\/div>\r\n                        <div class="preferencesContentOptionInput">\r\n                            <input type="password" data-bind="value: password.password, valueUpdate: \'afterkeydown\'" />\r\n                        <\/div>\r\n                    <\/div>\r\n\r\n                    <div class="preferencesContentOption">\r\n                        <div class="preferencesContentOptionTitle">\r\n                            <span data-bind="i18n:\'preferences.retypepassword\'"><\/span>\r\n                        <\/div>\r\n                        <div class="preferencesContentOptionInput">\r\n                            <input type="password" data-bind="value: password.passwordRetyped, valueUpdate: \'afterkeydown\'" />\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <button class="preferencesContentOptionAction" data-bind="visible: password.changeFormVisible(),click: password.submitChange, i18n:\'preferences.savepassword\'"><\/button>\r\n                <button class="preferencesContentOptionAction" data-bind="visible: !password.changeFormVisible(), click: password.showChangeForm, i18n:\'preferences.changepassword\'"><\/button>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="preferencesContentSection">\r\n\r\n            <div data-bind="visible: userEmail.isLoading()">\r\n                <div class="loaderLayer"><\/div>\r\n                <div class="loader loaderEmail">\r\n                    <div class="outer spin-pulse"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="preferencesContentSectionTitle" data-bind="i18n:\'preferences.email\'"><\/div>\r\n\r\n            <div class="preferencesContentTitle" data-bind="i18n:\'preferences.changeyouremailaddress\'"><\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.yourcurrentemailaddressis\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <input type="email" data-bind="value: userEmail.email()" readonly="readonly" />\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.newemailaddress\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <input type="email" id="NewEmailAddress" data-bind="value: userEmail.newEmailAddress, valueUpdate: \'afterkeydown\'" />\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <div class="preferencesContentOptionTitle">\r\n                    <span data-bind="i18n:\'preferences.confirmnewemailaddress\'"><\/span>\r\n                <\/div>\r\n                <div class="preferencesContentOptionInput">\r\n                    <input type="email" id="NewEmailAddressRetyped" data-bind="value: userEmail.newEmailAddressRetyped, valueUpdate: \'afterkeydown\'" />\r\n                <\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption">\r\n                <button class="preferencesContentOptionSave" data-bind="click: setNewEmailAddress, i18n:\'preferences.update\'"><\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <!--ko if: shell.area === "coach" -->\r\n    <div class="preferencesContentContain fadeInFast" data-bind="visible: !isLoading() && currentTab() === \'coach\'">\r\n        <div class="preferencesContentSection">\r\n            <div class="preferencesContentSectionTitle" data-bind="i18n:\'preferences.publication\'"><\/div>\r\n            <input class="agreementCheckbox" id="answersAgreement" type="checkbox" data-bind="checked: answersPublishedOnBrandWebsiteAgreement" />\r\n            <label class="agreementCheckboxCta" for="answersAgreement" data-bind="i18n:\'preferences.iagreetoletmynicknamebeusedonthebrandswebsitewhenmyanswersarechoosentobepublished\'"><\/label>\r\n            <div class="clearer"><\/div>\r\n            <div class="preferencesContentOption">\r\n                <button class="preferencesContentOptionSave" data-bind="click: saveAgreement, i18n:\'preferences.update\'"><\/button>\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n\r\n    <div class="preferencesContentContain fadeInFast" data-bind="visible: !isLoading() && currentTab() === \'social\'">\r\n        <div class="preferencesContentSection">\r\n\r\n            <div data-bind="visible: facebook.isLoading()">\r\n                <div class="loaderLayer"><\/div>\r\n                <div class="loader loaderEmail">\r\n                    <div class="outer spin-pulse"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n\r\n            <div class="preferencesContentSectionTitle" data-bind="i18n:\'preferences.facebookaccount\'"><\/div>\r\n\r\n            <!--ko if: facebook.error() !== null -->\r\n            <!--ko if: facebook.error().code === 401 -->\r\n            <div class="loginRegisterOverlayMessageBox fadeInFast">\r\n                <div class="content full">\r\n                    <div class="close" data-bind="click: facebook.closeError"><\/div>\r\n                    <div class="errorMessageContain">\r\n                        <div class="errorMessage" data-bind="text: facebook.error().facebookErrorMessage"><\/div>\r\n                    <\/div>\r\n                    <button class="submitButton" type="submit" data-bind="i18n:\'common.close\', click: facebook.closeError"><\/button>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="loginRegisterOverlay"><\/div>\r\n            <!--/ko-->\r\n            <!--ko if: facebook.error().code === 300 -->\r\n            <div class="loginRegisterOverlayMessageBox fadeInFast">\r\n                <div class="content full">\r\n                    <div class="close" data-bind="click: facebook.closeError"><\/div>\r\n                    <div class="errorMessageContain">\r\n                        <div class="errorMessage" data-bind="i18n:\'preferences.yoursocialaccountisalreadyinusewithtanothertokywokyaccountX\', i18nOptions: {email: facebook.error().tokykUserEmail }"><\/div>\r\n                    <\/div>\r\n                    <div class="cta" data-bind="i18n:\'login.asasecuritymeasurepleaseconfirmthatthetokywokyaccountXbelongstoyou\', i18nOptions: {email: facebook.error().tokykUserEmail }"><\/div>\r\n                    <div class="inputs">\r\n                        <div class="field">\r\n                            <input class="input" type="email" name="Email" id="inputSsoLinkEmail" readonly="readonly" disabled="disabled" data-bind="i18n:\'[placeholder]login.enteryouremailaddress\', value: facebook.error().tokykUserEmail" />\r\n                        <\/div>\r\n                        <div class="field">\r\n                            <input class="input" type="password" name="Password" id="inputSsoLinkPassword" data-bind="i18n:\'[placeholder]login.enterapassword\', value: facebook.otherTokyAccountPassword, valueUpdate: \'afterkeydown\'" />\r\n                        <\/div>\r\n                    <\/div>\r\n                    <button class="submitButton" type="submit" data-bind="visible: !facebook.isLoading(), i18n:\'preferences.unlinkmysocialaccountfromXandlinkitwithmycurrentaccount\', i18nOptions: {email: facebook.error().tokykUserEmail }, click: facebook.switchLink"><\/button>\r\n                    <button class="submitButtonLoading" disabled="disabled" type="button" data-bind="visible: facebook.isLoading()"><\/button>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="loginRegisterOverlay"><\/div>\r\n            <!--/ko-->\r\n            <!--ko if: facebook.error().code === 403 -->\r\n            <div class="loginRegisterOverlayMessageBox fadeInFast">\r\n                <div class="content full">\r\n                    <div class="close" data-bind="click: facebook.closeError"><\/div>\r\n                    <div class="errorMessageContain">\r\n                        <div class="errorMessage" data-bind="i18n:\'preferences.yoursocialaccountisalreadyinusewithtanothertokywokyaccountX\', i18nOptions: {email: facebook.error().tokykUserEmail }"><\/div>\r\n                    <\/div>\r\n                    <div class="cta" data-bind="i18n:\'preferences.howeverbecausethisaccountdoesnothaveapasswordsetyoucannottransfertthesocialaccountfromXtoyourcurrentaccountY\', i18nOptions: {email: facebook.error().tokykUserEmail, emailCurrent: userEmail.email() }"><\/div>\r\n                    <div class="cta" data-bind="i18n:\'preferences.youneedtologintoXandeitherunlinkitssocialaccountorsetitspassword\', i18nOptions: {email: facebook.error().tokykUserEmail }"><\/div>\r\n                    <button class="submitButton" type="submit" data-bind="i18n:\'common.close\', click: facebook.closeError"><\/button>\r\n                <\/div>\r\n            <\/div>\r\n            <div class="loginRegisterOverlay"><\/div>\r\n            <!--/ko-->\r\n            <!--ko if: facebook.error().code === 400 -->\r\n            <div class="errorMessageContain">\r\n                <div class="errorMessage" data-bind="i18n:\'login.yoursocialaccountmusthaveanemailaddress\'"><\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <!--/ko-->\r\n\r\n            <div class="preferencesContentOption fadeInFast" data-bind="visible: facebook.accountLinked()">\r\n                <div class="preferencesContentOptionTitleStrong large" data-bind="i18n:\'preferences.yourtokywokyaccountiscurrentlylinkedwithyourfacebookaccount\'"><\/div>\r\n                <button class="preferencesContentOptionRemove" data-bind="click: facebook.removeLink, i18n:\'preferences.unlinkmyfacebookaccount\'"><\/button>\r\n                <div class="clearer"><\/div>\r\n\r\n                <div class="preferencesContentOptionTitle" data-bind="i18n:\'preferences.facebookuserid\'"><\/div>\r\n                <div class="preferencesContentOptionTitle">\r\n                    <a class="preferencesContentOptionTitle" target="_blank" data-bind="attr: {href: \'https://www.facebook.com/app_scoped_user_id/\' + facebook.userId()}, text: facebook.userId()"><\/a>\r\n                <\/div>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n            <div class="preferencesContentOption fadeInFast" data-bind="visible: !facebook.accountLinked()">\r\n                <div class="preferencesContentOptionTitleStrong large" data-bind="i18n:\'preferences.yourtokywokyaccountisnotlinkedwithyourfacebookaccount\'"><\/div>\r\n                <button class="preferencesContentOptionAction" data-bind="click: facebook.addLink, i18n:\'preferences.linkwithmyfacebookaccount\'"><\/button>\r\n                <div class="clearer"><\/div>\r\n            <\/div>\r\n            <div class="clearer"><\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("text!shared/views/profile.html",[],function(){return'﻿<div>\r\n    <div data-bind="visible:!isLoading(), css:{fadeInFast: !hasBeenLoadedOnce()}">\r\n    <div class="profileMainContain">\r\n        <!--ko if: isAdminGod() || (!isAdminGod() && shell.area === "admin" && currentUserId == id()) -->\r\n        <div class="profileMainAdminGodIcon bounce" title="AdminGod edit" data-bind="click: openAdminGodPreferences"><\/div>\r\n        <!--/ko-->\r\n        <div class="profileInfoContain">\r\n            <div class="profileName" data-bind="css:{profileEditButtonClickable: isFieldEditable()}, click: updateUserInfo">\r\n                <span data-bind="customhtml: userName, visible:!isUpdatingUserInfo()"><\/span>\r\n                <input class="editProfileInput" data-bind="value: userName, visible:isUpdatingUserInfo(), i18n:\'[placeholder]profile.typehere\'" maxlength="32"/>\r\n            <\/div>\r\n\r\n            <!--ko if: shell.area === "admin" && hostUserId() != null-->\r\n            <div class="profileIdSso">\r\n                <span class="profileIdSsoLabel" data-bind="i18n:\'profile.ssoid\'"><\/span>\r\n                <span class="profileIdSsoValue" data-bind="text: hostUserId()"><\/span>\r\n            <\/div>\r\n            <!--/ko-->\r\n\r\n            <div class="profileAvatar">\r\n                <!--ko if:isUploadingPicture()-->\r\n                <img class="profileImgUploadingContain" src="/Content/images/ajax-loader.gif"/>\r\n                <!--/ko-->\r\n                <!--ko if:!isUploadingPicture()-->\r\n                <div data-bind="css:{profileEditButtonClickable: isFieldEditable()}, click: updateUserInfo">\r\n                    <!--ko if: profilePicture() == null || profilePicture() == \'\' -->\r\n                    <div class="profileImgContain" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/XLProfilePic.jpg\\\');\'}"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: profilePicture() != \'\' && profilePicture() != null -->\r\n                    <div class="profileImgContain" data-bind="attr: {style: \'background-image: url(\\\'\' + profilePicture() + \'\\\');\'}"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <input class="inputProfilePic" size="1" type="file" accept="image/x-png, image/gif, image/jpeg" id="inputFile" data-bind="visible: window.FormData !== undefined && isUpdatingUserInfo(), event: { change: uploadPic }"/>\r\n                <!--/ko-->\r\n            <\/div>\r\n            <div class="profileColumnInfo">\r\n                <table>\r\n                    <tr>\r\n                        <th data-bind="i18n:\'profile.bio\'"><\/th>\r\n                        <td data-bind="i18n:\'profile.city\'"><\/td>\r\n                        <td data-bind="text:town, visible:!isUpdatingUserInfo()"><\/td>\r\n                        <td data-bind="visible:isUpdatingUserInfo()"><input class="editProfileInput" data-bind="value:town, i18n:\'[placeholder]profile.typehere\'"/><\/td>\r\n                    <\/tr>\r\n                    <tr>\r\n                        <th><\/th>\r\n                        <td data-bind="i18n:\'profile.age\'"><\/td>\r\n                        <td data-bind="text:birthDate() == null ? \'\' : age, visible:!isUpdatingUserInfo()"><\/td>\r\n                        <td data-bind="visible:isUpdatingUserInfo()"><input class="editProfileInput" data-bind="value:birthDate, i18n:\'[placeholder]profile.ddmmyyyy\'"><\/td>\r\n                    <\/tr>\r\n                    <tr class="spacer"><\/tr>\r\n                    <tr data-bind="if: memberSince() != null">\r\n                        <th data-bind="i18n:\'profile.activity\'"><\/th>\r\n                        <td data-bind="i18n:\'profile.memberfor\'"><\/td>\r\n                        <td data-bind="text:moment.utc(memberSince(), \'YYYY-MM-DDTHH:mm:ss.SSS\').fromNow(true)"><\/td>\r\n                    <\/tr>\r\n                    <!--ko if: isAdminGod()-->\r\n                    <tr>\r\n                        <th><\/th>\r\n                        <td data-bind="i18n:\'profile.interaction\'"><\/td>\r\n                        <!--ko if: lastInteraction()-->\r\n                        <td data-bind="text:moment.utc(lastInteraction(), \'YYYY-MM-DDTHH:mm:ss.SSS\').fromNow(false), attr:{title: moment.utc(lastInteraction())}"><\/td>\r\n                        <!--/ko-->\r\n                        <!--ko if: !lastInteraction()-->\r\n                        <td data-bind="attr:{title: moment.utc(lastInteraction())}">n/a<\/td>\r\n                        <!--/ko-->\r\n                    <\/tr>\r\n                    <!--/ko-->\r\n                    <tr>\r\n                        <th><\/th>\r\n                        <td data-bind="i18n:\'profile.hasanswered\'"><\/td>\r\n                        <td data-bind="text: nbAnswers() + \' questions\'"><\/td>\r\n                    <\/tr>\r\n                    <tr class="spacer"><\/tr>\r\n                    <tr data-bind="visible: !isUpdatingUserInfo() || fromAdminArea()">\r\n                        <th class="profileCoachingTh" data-bind="i18n:\'profile.coaching\'"><\/th>\r\n                        <td colspan="2" data-bind="foreach: {data: Object.keys(categories()), as: \'id\'}">\r\n                            <!--ko with: $root.categories()[id] -->\r\n                            <div class="categoryContain" data-bind="click: toggleCollapse">\r\n                                <span class="categoryLanguage" data-bind="attr: {style: \'background-image: url(\\\'/Content/images/flags/\' + categoryLanguage + \'.png\\\')\'}"><\/span>\r\n                                <span class="categoryName" data-bind="text: categoryName"><\/span>\r\n                                <span class="brandCount" data-bind="text: groups.length"><\/span>\r\n                                <span class="expand" data-bind="visible: collapsed()"><\/span>\r\n                                <span class="collapse" data-bind="visible: !collapsed()"><\/span>\r\n                            <\/div>\r\n\r\n                            <ul class="groups fadeInFast" data-bind="visible: !collapsed(), foreach: groups">\r\n                                <li class="groupName"><span data-bind="text: $data"><\/span><\/li>\r\n                            <\/ul>\r\n                            <!--/ko-->\r\n                        <\/td>\r\n                    <\/tr>\r\n                    <tr data-bind="visible: isUpdatingUserInfo() && !fromAdminArea()">\r\n                        <th class="profileCoachingTh" data-bind="i18n:\'profile.coaching\'"><\/th>\r\n                        <td colspan="2">\r\n                            <div class="profileCoachingButton" data-bind="i18n:\'profile.changemycategories\', click: changeCategories"><\/div>\r\n                        <\/td>\r\n                    <\/tr>\r\n                    <tr class="spacer"><\/tr>\r\n                <\/table>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="profileBioContain" data-bind="css: { emptyBio: isBioEmpty() }">\r\n            <div class="profileBio" data-bind="visible:!isUpdatingUserInfo()">\r\n                <pre data-bind="customhtml:bio, emojify"><\/pre>\r\n            <\/div>\r\n            <div class="profileBioEdit" data-bind="visible:isUpdatingUserInfo()">\r\n                <textarea class="profileTextarea" data-bind="emojipicker, value:bio, i18n:\'[placeholder]profile.howwouldyoudescribeyourself\'"><\/textarea>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="profileMainBottomToolbarContain">\r\n            <!--ko if:currentUserId != id() && friendStatus() != null-->\r\n            <div class="profileButtonsContain" data-bind="css:{profileEditButtonClickable: isFieldEditable()}">\r\n\r\n                <!--ko if: (isUserCoach() || isUserAdmin()) && (currentUserIsCoach() || isAdmin()) -->\r\n                <div class="profileAddFriend" data-bind="i18n:\'common.addfriend\', visible: friendStatus() == \'NotFriend\', click:addFriend"><\/div>\r\n                <div class="profileAddFriend profileAddFriendDelete" data-bind="i18n:\'common.unfriend\', visible:friendStatus() == \'AreFriend\', click:deleteFriend"><\/div>\r\n\r\n                <div class="profileRequestSentButton" data-bind="i18n:\'common.friendinvitesent\', visible:friendStatus() == \'Asked\'"><\/div>\r\n                <div class="profileAddFriend profileAddFriendDelete" data-bind="i18n:\'common.cancelinvite\', visible:friendStatus() == \'Asked\', click:deleteFriend"><\/div>\r\n\r\n                <div class="profileAddFriend" data-bind="i18n:\'common.confirminvite\', visible:friendStatus() == \'Answering\', click:addFriend"><\/div>\r\n                <div class="profileAddFriend profileAddFriendIgnore" data-bind="i18n:\'common.ignoreinvite\', visible:friendStatus() == \'Answering\', click:addFriend, click:deleteFriend"><\/div>\r\n                <!--/ko-->\r\n\r\n                <!--ko if: isUserCoach() || isUserAdmin() -->\r\n                <div class="profileChat" data-bind="visible:friendStatus() == \'AreFriend\' || currentUserIsPremium() || isUserPremium() || isAdmin(), i18n:\'common.beginchat\', click:chat"><\/div>\r\n                <!--/ko-->\r\n                <div class="profileBlock" data-bind="visible:currentUserId != id() && !isAdmin() && isBlocked() != null && !isBlocked(), click:blockUser, i18n:\'common.block\'"><\/div>\r\n                <div class="profileBlock" data-bind="visible:currentUserId != id() && !isAdmin() && isBlocked() != null && isBlocked(), click:unblockUser, i18n:\'common.unblock\'"><\/div>\r\n                <div class="profileFlagButton" data-bind="visible: canFlagProfile(), css:{profileFlaggedButton: isProfileFlagged()}, click: flagProfile, i18n:\'[title]profile.flagthisprofile\'"><\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n            <div class="profileEditButtonContain">\r\n                <div class="editProfileLink" data-bind="click:updateUserInfo, visible:isFieldEditable(), i18n:\'profile.updateprofile\'"><\/div>\r\n                <div class="editProfileLinkSave" data-bind="click:sendUserInfoUpdate, visible:isUpdatingUserInfo(), i18n:\'common.save\'"><\/div>\r\n                <div class="editProfileLinkCancel" data-bind="click:cancelUserInfoUpdate, visible:isUpdatingUserInfo(), i18n:\'profile.cancel\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n    <\/span>\r\n\r\n        <div class="profileBoxReputation">\r\n            <div class="profileBoxTitle" data-bind="i18n:\'profile.reputation\'"><\/div>\r\n            <div class="profileBoxContent">\r\n\r\n                <div class="profileLevelContain">\r\n                    <div data-bind="text:userLevels().Bronze" class="profileLevelBronze"><\/div>\r\n                    <div data-bind="text:userLevels().Silver" class="profileLevelSilver"><\/div>\r\n                    <div data-bind="text:userLevels().Gold" class="profileLevelGold"><\/div>\r\n                <\/div>\r\n\r\n                <div class="profileBoxColumn">\r\n                    <div class="profileReputationContain">\r\n                        <div class="profileReputationPeopleHelpedIcon"><\/div>\r\n                        <div class="profileReputationTitle" data-bind="i18n:\'profile.Xpeoplehelped\', i18nOptions: {count: nbPeopleHelped()}"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="profileBoxColumn">\r\n                    <div class="profileReputationContain">\r\n                        <div class="profileReputationRecommendationsIcon"><\/div>\r\n                        <div class="profileReputationTitle" data-bind="i18n:\'profile.Xrecommendation\', i18nOptions: {count: nbFeedbacks()}"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="profileBoxColumn">\r\n                    <div class="profileReputationContain">\r\n                        <div class="profileReputationAnswersIcon"><\/div>\r\n                        <div class="profileReputationTitle" data-bind="i18n:\'profile.Xquestionanswered\', i18nOptions: {count: nbAnswers()}"><\/div>\r\n                    <\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="profileBoxBadges" data-bind="visible: achievements().length > 0">\r\n            <div class="profileBoxTitle" data-bind="i18n:\'profile.badges\'"><\/div>\r\n            <div class="profileBoxContent">\r\n                <div class="profileBoxContentBadges" data-bind="foreach:achievements">\r\n                    <div class="profileBoxBadgesBadge" data-bind="compose: {model: \'shared/viewmodels/achievement\', view: \'shared/views/achievement.html\', activationData: [Label, Type, Owned, Level, \'small\'], activate: true }"><\/div>\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <div class="profileBoxReviews" data-bind="visible:reviewCategories() != null && reviewCategories().length > 0">\r\n            <div class="profileBoxTitle" data-bind="i18n:\'profile.recommendations\'"><\/div>\r\n            <div class="profileBoxReviewContent">\r\n                <div class="profileReviewCategoriesContain" data-bind="foreach:reviewCategories">\r\n                    <div class="profileReviewCategoryRow" data-bind="click:$root.categoryClick, css:{profileReviewCategoryRowSelected: CategoryId === $root.selectedReviewCategoryId(), profileReviewCategoryRowNew: HasNewFeedback}">\r\n                        <span class="ProfileReviewCategory" data-bind="text:CategoryName"><\/span>\r\n                        <!--ko if: HasNewFeedback -->\r\n                        <span class="profileReviewCategoryNew pulse">!<\/span>\r\n                        <!-- /ko -->\r\n                    <\/div>\r\n                <\/div>\r\n                <div class="profileReviewsContain" data-bind="foreach:reviewsForSelectedCategory">\r\n                    <div class="profileReview" data-bind="css:{profileReviewDeleted: IsDeleted(), profileReviewIsNew: !IsSeen}">\r\n                        <span class="profileReviewDateCategoryLabel" data-bind="text:CategoryName"><\/span>&nbsp;─&nbsp;<span class="profileReviewDate" data-bind="text:Date"><\/span>\r\n                        <!--ko if: $root.currentUserId == $root.id() && !IsDeleted() -->\r\n                        <div class="profileReviewDeleteButton" data-bind="click: $root.removeReview, i18n:\'[title]profile.deletethisrecommendation\'">\r\n                            <img src="/Content/images/iconTrash.png" alt="Delete" />\r\n                        <\/div>\r\n                        <!-- /ko -->\r\n                        <!--ko if: IsDeleted() -->\r\n                        <span class="profileReviewDeletedHint" data-bind="i18n:\'profile.thisrecommendationwasdeleted\'"><\/span>\r\n                        <!-- /ko -->\r\n                        <div class="profileReviewText">\r\n                            <span class="profileReviewQuote">&ldquo;<\/span><span data-bind="customhtml:Text"><\/span><span class="profileReviewQuote">&rdquo;<\/span>\r\n                        <\/div>\r\n                        <!--ko if:GiverUserNickname == null -->\r\n                        <span class="profileReviewAuthor clientBoldFont" data-bind="i18n:\'common.visitor\'"><\/span>\r\n                        <!-- /ko -->\r\n                        <!--ko if:GiverUserNickname != null -->\r\n                        <span class="profileReviewAuthor" data-bind="customhtml:GiverUserNickname"><\/span>\r\n                        <!-- /ko -->\r\n                    <\/div>\r\n\r\n                    <!--ko if: $root.moreResultsAvailableForSelectedCategory() && $index() === $root.reviewsForSelectedCategory().length-1 -->\r\n                    <div class="profileReviewSeeMore" data-bind="click: $root.showNextFeedbacks">...<\/div>\r\n                    <!-- /ko -->\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n\r\n        <!--ko if: hasPublishedAnswers -->\r\n        <div class="profileBoxPublishedAnswers">\r\n            <div class="profileTutoButton" data-bind="click: openPublicationHelp, i18n:\'[title]sidebar.whatisthis\', css: {profileTutoHighlightButton: isHelpHighlighted(\'publication\')}">?<\/div>\r\n            <div class="profileBoxTitle" data-bind="i18n:\'profile.publishedanswers\'"><\/div>\r\n            <div class="profileBoxPublishedAnswersContain" data-bind="compose: {\r\n                                model: \'shared/viewmodels/_publishedAnswers\',\r\n                                view: \'shared/views/_publishedAnswers.html\',\r\n                                activationData: [id()],\r\n                                activate: true }">\r\n            <\/div>\r\n        <\/div>\r\n        <!-- /ko -->\r\n\r\n        <div class="profileBoxAnswers">\r\n            <!--<div class="profileTutoButton" data-bind="help:\'Vos dernières réponses avec le score des votes de coachs\'">?<\/div>-->\r\n            <div class="profileBoxTitle" data-bind="i18n:\'profile.lastanswers\'"><\/div>\r\n            <div class="profileFeed">\r\n                <!--ko if: feed().length > 0 -->\r\n                <div data-bind="foreach:feed">\r\n                    <div class="profileFeedItem">\r\n                        <div class="profileFeedItemTextContain">\r\n                            <div class="profileFeedTextPost">\r\n                                <span data-bind="i18n:\'profile.question\'"><\/span>\r\n                                <span data-bind="customhtml: TextPost, emojify"><\/span>\r\n                            <\/div>\r\n                            <div class="profileFeedDatePost"data-bind="text:moment.utc(DatePost).format(\'DD MMMM YYYY\')"><\/div>\r\n                            <div class="profileFeedText" data-bind="customhtml:$root.userName() + \' : \' + Text, emojify"><\/div>\r\n                        <\/div>\r\n\r\n                        <div class="profileFeedGotThanksDisabled" data-bind="visible:!GotThanks"><\/div>\r\n                        <div class="profileFeedGotThanks" data-bind="visible:GotThanks"><\/div>\r\n\r\n                        <div class="profileFeedItemStar">\r\n                            <img data-bind="visible: AnswerLevel == \'Bronze\'" src="/Content/images/iconStarBronzeSmall.png" alt="Bronze" />\r\n                            <img data-bind="visible: AnswerLevel == \'Silver\'" src="/Content/images/iconStarSilverSmall.png" alt="Silver" />\r\n                            <img data-bind="visible: AnswerLevel == \'Gold\'" src="/Content/images/iconStarGoldSmall.png" alt="Gold" />\r\n                        <\/div>\r\n                    <\/div>\r\n                <\/div>\r\n                <div data-bind="visible:nextButtonVisible, click:next, i18n:\'profile.loadmore\'" class="profileFeedNext"><\/div>\r\n                <!-- /ko -->\r\n                <!--ko if: feed().length === 0 -->\r\n                <div class="profileFeedItem" data-bind="i18n:\'profile.noanswerfound\'"><\/div>\r\n                <!-- /ko -->\r\n            <\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <div class="profileLoading" data-bind="visible: isLoading">\r\n        <img class="tossing" src="/Content/images/LogoMin.png" />\r\n    <\/div>\r\n<\/div>'});n("text!shared/views/publishedAnswers.html",[],function(){return'﻿<div>\r\n    <div class="profileBoxPublishedAnswers">\r\n        <div class="profileBoxTitle" data-bind="i18n:\'profile.publishedanswers\'"><\/div>\r\n\r\n        <!--ko if: shell.area === "coach" -->\r\n        <div class="profileTutoButton" data-bind="click: openPublicationHelp, i18n:\'[title]sidebar.whatisthis\', css: {profileTutoHighlightButton: isHelpHighlighted(\'publication\')}">?<\/div>\r\n        <!--/ko-->\r\n\r\n        <div class="profileBoxPublishedAnswersContain" data-bind="compose: {\r\n                            model: \'shared/viewmodels/_publishedAnswers\',\r\n                            view: \'shared/views/_publishedAnswers.html\',\r\n                            activationData: [targetUserId()],\r\n                            activate: true }">\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n'});n("text!shared/views/ratingBox.html",[],function(){return'<div class="ratingBoxContain" data-bind="click: clickArea">\r\n    <!--ko if: !gotThanks() && !gotNoThanks() -->\r\n    <div class="ratingBoxThanksContain">\r\n        <!--ko if: !isTalkingToAdmin() -->\r\n        <div class="ratingBoxNoThanksBtn" data-bind="visible: !hideNotUseful(), click:sendNoThanks, i18n:\'common.notuseful\', textfill"><\/div><div class="ratingBoxThanksBtn" data-bind="click:sendThanks, i18n:\'common.thanks\', textfill"><\/div>\r\n        <!--/ko-->\r\n        <!--ko if: isTalkingToAdmin() -->\r\n        <div class="ratingBoxNoThanksBtn" data-bind="visible: !hideNotUseful(), click:sendNoThanks, i18n:\'common.notusefuladmin\', textfill"><\/div><div class="ratingBoxThanksBtn" data-bind="click:sendThanks, i18n:\'common.thanksadmin\', textfill"><\/div>\r\n        <!--/ko-->\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if: gotThanks() -->\r\n    <div class="ratingBoxThanksContain">\r\n        <div class="thanksSent" data-bind="i18n:\'common.thankssent\'"><\/div>\r\n    <\/div>\r\n    <div class="ratingBoxStarsContain" data-bind="css: {ratingAdmin: isTalkingToAdmin}">\r\n        <!-- ko if: !starSelected() || starSelected() === "none" -->\r\n        <div class="ratingBoxStarsSelectorContain fontNormalColor fadeInFast" data-bind="css:{expandUp: thanksJustSent()}">\r\n            <div class="ratingBoxStarsSelectorCta">\r\n                <!--ko if: !isTalkingToAdmin() -->\r\n                <span data-bind="i18n:\'common.note\'"><\/span>\r\n                <!--/ko-->\r\n                <!--ko if: isTalkingToAdmin() -->\r\n                <span data-bind="i18n:\'common.noteadmin\'"><\/span>\r\n                <!--/ko-->\r\n            <\/div>\r\n            <div class="ratingBoxStarsSelectorWrapper">\r\n                <div class="ratingStar" data-bind="event: { mouseover: starMouseOver, mouseout: starMouseOut }, click: function(data, event) { sendStar(\'bronze\', event) }, css:{ratingStarSelected: starSelected() == \'Bronze\'}">\r\n                    <div class="bronze" data-bind="visible: starSelected() != \'bronze\'"><\/div>\r\n                    <!--ko if: !isTalkingToAdmin() -->\r\n                    <div class="starBalloonBronze" starType="Bronze" data-bind="css: {shown: starBronzeBalloonShow}, i18n:\'common.bronze\'"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: isTalkingToAdmin() -->\r\n                    <div class="starBalloonBronze" starType="Bronze" data-bind="css: {shown: starBronzeBalloonShow}, i18n:\'common.bronzeadmin\'"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <div class="ratingStar" data-bind="event: { mouseover: starMouseOver, mouseout: starMouseOut }, click: function(data, event) { sendStar(\'silver\', event) }, css:{ratingStarSelected: starSelected() == \'Silver\'}">\r\n                    <div class="silver" data-bind="visible: starSelected() != \'silver\'"><\/div>\r\n                    <!--ko if: !isTalkingToAdmin() -->\r\n                    <div class="starBalloonSilver" starType="Silver" data-bind="css: {shown: starSilverBalloonShow}, i18n:\'common.silver\'"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: isTalkingToAdmin() -->\r\n                    <div class="starBalloonSilver" starType="Silver" data-bind="css: {shown: starSilverBalloonShow}, i18n:\'common.silveradmin\'"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n                <div class="ratingStar" data-bind="event: { mouseover: starMouseOver, mouseout: starMouseOut }, click: function(data, event) { sendStar(\'gold\', event) }, css:{ratingStarSelected: starSelected() == \'Gold\'}">\r\n                    <div class="gold" data-bind="visible: starSelected() != \'gold\'"><\/div>\r\n                    <!--ko if: !isTalkingToAdmin() -->\r\n                    <div class="starBalloonGold" starType="Gold" data-bind="css: {shown: starGoldBalloonShow}, i18n:\'common.gold\'"><\/div>\r\n                    <!--/ko-->\r\n                    <!--ko if: isTalkingToAdmin() -->\r\n                    <div class="starBalloonGold" starType="Gold" data-bind="css: {shown: starGoldBalloonShow}, i18n:\'common.goldadmin\'"><\/div>\r\n                    <!--/ko-->\r\n                <\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <!--/ko-->\r\n        <!-- ko if: showRecommandation() -->\r\n        <!-- ko if: starSelected() && starSelected() !== "none" -->\r\n        <div class="ratingBoxStarsSelectedContain fontNormalColor fadeInFast" data-bind="">\r\n            <div class="ratingStarLocked" data-bind="event: { mouseover: showStarSentHint, mouseout: hideStarSentHint }">\r\n                <div class="bronze" data-bind="visible: starSelected() == \'bronze\'"><\/div>\r\n                <div class="silver" data-bind="visible: starSelected() == \'silver\'"><\/div>\r\n                <div class="gold" data-bind="visible: starSelected() == \'gold\'"><\/div>\r\n                <div class="ratingStarLockedHint bgColor clientBoldFont" data-bind="css: {starSentHintShown: starSentHintShown}, i18n:\'common.starsent\'"><\/div>\r\n            <\/div>\r\n        <\/div>\r\n        <div class="ratingBoxStarsSelectedContain fontNormalColor fadeInFast">\r\n            <!--ko if: !isTalkingToAdmin() -->\r\n            <span class="ratingBoxFeedbackCta clientFont fontColor" data-bind="visible: !feedbackIsOpen() && !feedbackWasSent(), click:openFeedback, i18n:\'common.recommendthiscoach\'"><\/span>\r\n            <span class="ratingBoxFeedbackText clientFont" data-bind="visible: feedbackIsOpen() && !feedbackWasSent(), i18n:\'common.recommendthiscoach\'"><\/span>\r\n            <span class="ratingBoxFeedbackText clientFont" data-bind="visible: !feedbackIsOpen() && feedbackWasSent(), i18n:\'common.recommendationsent\'"><\/span>\r\n            <!--/ko-->\r\n            <!--ko if: isTalkingToAdmin() -->\r\n            <span class="ratingBoxFeedbackCta clientFont fontColor" data-bind="visible: !feedbackIsOpen() && !feedbackWasSent(), click:openFeedback, i18n:\'common.recommendthisadmin\'"><\/span>\r\n            <span class="ratingBoxFeedbackText clientFont" data-bind="visible: feedbackIsOpen() && !feedbackWasSent(), i18n:\'common.recommendthisadmin\'"><\/span>\r\n            <span class="ratingBoxFeedbackText clientFont" data-bind="visible: !feedbackIsOpen() && feedbackWasSent(), i18n:\'common.recommendationsentadmin\'"><\/span>\r\n            <!--/ko-->\r\n        <\/div>\r\n        <!--/ko-->\r\n        <!--/ko-->\r\n    <\/div>\r\n    <!--/ko-->\r\n    <!--ko if: gotThanks() && feedbackIsOpen() && showRecommandation() -->\r\n    <div class="ratingBoxFeedbackContain fadeInFast">\r\n        <!--ko if: !isTalkingToAdmin() -->\r\n        <textarea class="ratingBoxFeedbackTextarea" data-bind="visible: !sendingFeedback(), value:feedbackText, valueUpdate: \'afterkeydown\', i18n:\'[placeholder]common.typeyourrecommendationforthiscoachhere\'"><\/textarea>\r\n        <!--/ko-->\r\n        <!--ko if: isTalkingToAdmin() -->\r\n        <textarea class="ratingBoxFeedbackTextarea" data-bind="visible: !sendingFeedback(), value:feedbackText, valueUpdate: \'afterkeydown\', i18n:\'[placeholder]common.typeyourrecommendationforthisadminhere\'"><\/textarea>\r\n        <!--/ko-->\r\n        <textarea class="ratingBoxFeedbackTextarea" data-bind="visible: sendingFeedback(), value:feedbackText" readonly="readonly"><\/textarea>\r\n    <\/div>\r\n    <div class="ratingBoxFeedbackError slideDownNoBounce" data-bind="visible: sendingFeedbackError(), i18n:\'common.yourreviewmustbeatleastXcharacterslong\', i18nOptions: { count: 10 }"><\/div>\r\n    <div class="ratingBoxFeedbackSendBtnContain">\r\n        <!--ko if: !isTalkingToAdmin() -->\r\n        <div class="ratingBoxFeedbackSendBtn bgColor clientBoldFont" data-bind="visible: !sendingFeedback(), click:sendFeedback, i18n:\'common.sendreview\', textfill"><\/div>\r\n        <!--/ko-->\r\n        <!--ko if: isTalkingToAdmin() -->\r\n        <div class="ratingBoxFeedbackSendBtn bgColor clientBoldFont" data-bind="visible: !sendingFeedback(), click:sendFeedback, i18n:\'common.sendreviewadmin\', textfill"><\/div>\r\n        <!--/ko-->\r\n        <div class="ratingBoxFeedbackSendBtnLoading bgColor clientBoldFont" data-bind="i18n:\'common.sendingfeedback\', visible: sendingFeedback()"><\/div>\r\n    <\/div>\r\n    <!--/ko-->\r\n<\/div>'});n("text!shared/views/userDetails.html",[],function(){return'<div class="userDetailsContain" data-bind="css:className, click:goToProfile">\r\n    <div class="userDetailsLeftContain">\r\n        <div class="userDetailsPicture">\r\n            <img alt="Picture" data-bind="visible: profilePicture(), attr:{src:profilePicture}" />\r\n            <div class="defaultProfilePicture" data-bind="visible: !profilePicture()"><\/div>\r\n        <\/div>\r\n        <div class="certifiedCoach" data-bind="visible: isCertified(), i18n:\'[title]common.certifiedcoach\'"><\/div>\r\n    <\/div>\r\n\r\n    <div class="userDetailsRightContain" data-bind="css:{userDetailsRightContainOneLine: hostDatas() == null || typeof hostDatas().badges == \'undefined\'}">\r\n        <div class="userDetailsLineContain userDetailsName clientBoldFont" data-bind="css: {clientBoldFont: gotNotif() === null || gotNotif() === true, clientFont: gotNotif() === false}">\r\n            <span data-bind="visible: userId() === currentUserId() && userName() == null, i18n:\'common.me\'"><\/span>\r\n            <span data-bind="visible: userId() === currentUserId() && userName() != null, text: userName"><\/span>\r\n            <span class="userDetailsNameVisitor" data-bind="visible: userId() !== currentUserId() && !userName(), i18n:\'common.visitor\'"><\/span>\r\n            <span class="userDetailsNameVisitorCustom" data-bind="visible: userId() !== currentUserId() && !userName()"><\/span>\r\n            <span data-bind="visible: userId() !== currentUserId() && userName(), customhtml:userName"><\/span>\r\n        <\/div>\r\n        <div class="userDetailsLineContain userDetailsGamif">\r\n            <span class="clientFont userDetailsRank userDetailsRankCoach" data-bind="visible: isCoach() && !isAdmin(), i18n:\'common.coach\'"><\/span>\r\n            <span class="clientFont userDetailsRank userDetailsRankCoachCustom" data-bind="visible: isCoach() && !isAdmin()"><\/span>\r\n            <span class="clientFont userDetailsRank" data-bind="visible: isAdmin(), i18n:\'common.admin\'"><\/span>\r\n            \r\n            <!--ko if: nbPeopleHelped() > 0 -->\r\n            <span class="userDetailIcon userDetailPeopleHelped" data-bind="text:nbPeopleHelped(), i18n:\'[title]common.Xpeoplehelped\', i18nOptions:{count: nbPeopleHelped()}"><\/span>\r\n            <span class="userDetailIcon iconGoldStar" data-bind="text:levels().Gold, i18n:\'[title]common.Xgoldstar\', i18nOptions:{count: levels().Gold}"><\/span>\r\n            <!--/ko-->\r\n        <\/div>\r\n        <div class="userDetailsHostDatas">\r\n            <!--ko if:hostDatas() != null && typeof hostDatas().badges != \'undefined\'-->\r\n            <div class="userDetailsBadges" data-bind="foreach:hostDatas().badges">\r\n                <div class="userDetailsBadge">\r\n                    <!--ko if: typeof text != \'undefined\'-->\r\n                    <span data-bind="text: text"><\/span>\r\n                    <!--/ko-->\r\n                                \r\n                    <!--ko if: typeof level != \'undefined\'-->\r\n                    <span data-bind="visible: level, css: \'badgeLevel-\'+level"><\/span>\r\n                    <!--/ko-->\r\n                                \r\n                    <!--ko if: typeof imageUrl != \'undefined\'-->\r\n                    <img class="badgeImage" data-bind="attr:{src: imageUrl }"/>\r\n                    <!--/ko-->\r\n                <\/div>\r\n            <\/div>\r\n            <!--/ko-->\r\n        <\/div>\r\n    <\/div>\r\n<\/div>'});n("text!shared/views/userDetailsMini.html",[],function(){return'<div>\r\n    <div class="userDetailsMiniContain" data-bind="click: click">\r\n        <!--ko if: style === "miniPicture" -->\r\n        <div class="userDetailsMiniPicture" data-bind="css: {userDetailsMiniPictureDefault: !userProfilePicture()}, attr: {style: \'background-image: url(\\\'\' + cleanUserPicture() + \'\\\');\', title: cleanNickname()}"><\/div>\r\n        <!-- /ko -->\r\n\r\n        <!--ko if: style === "default"-->\r\n        <div class="userDetailsMiniNameContain" data-bind="css:{userDetailsMiniNotClickable: userDetailsPopupStyle === \'none\'}">\r\n            <span class="chatUserId fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle(), adminFontColor: isAdmin(), fontColor: !isAdmin()}, visible: userId() === currentUserId(), i18n:\'common.me\', style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId chatUserIdVisitor fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle(), adminFontColor: isAdmin(), fontColor: !isAdmin()}, visible: userId() !== currentUserId() && !nickname(), i18n:\'common.visitor\', style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId chatUserIdVisitorCustom fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle(), adminFontColor: isAdmin(), fontColor: !isAdmin()}, visible: userId() !== currentUserId() && !nickname(), style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle(), adminFontColor: isAdmin(), fontColor: !isAdmin()}, visible: userId() !== currentUserId() && nickname(), customhtml:nickname(), style:{maxWidth:maxWidth}"><\/span>\r\n        <\/div>\r\n\r\n        <div class="userDetailsMiniAdminIcon" data-bind="visible: isAdmin(), i18n:\'[title]common.administrator\'"><\/div>\r\n        <div class="userDetailsMiniVisitorIcon" data-bind="visible: isVisitor(), i18n:\'[title]common.visitor\'"><\/div>\r\n        <span class="isCertifiedIcon" data-bind="visible: isCertified(), i18n:\'[title]common.certifiedcoach\'"><\/span>\r\n\r\n        <div class="userDetailsMini" data-bind="visible: !(nbPeopleHelped() === 0 && countPerLevel().gold === 0), css:{userDetailsMiniNotClickable: userDetailsPopupStyle === \'none\'}">\r\n            <!--ko if: nbPeopleHelped() !== 0 -->\r\n            <div class="userDetailMiniIcon iconSmiley" data-bind="i18n:\'[title]common.Xpeoplehelped\', i18nOptions:{count: nbPeopleHelped()}"><\/div>\r\n            <span class="clientFont peopleHelpedCount" data-bind="text:nbPeopleHelped(), i18n:\'[title]common.Xpeoplehelped\', i18nOptions:{count: nbPeopleHelped()}"><\/span>\r\n            <!-- /ko -->\r\n\r\n            <!--ko if: countPerLevel().gold !== 0 -->\r\n            <!--ko if: !isAdmin() -->\r\n            <div class="userDetailMiniIcon iconStarGoldSmall" data-bind="i18n:\'[title]common.Xgoldstar\', i18nOptions:{count: countPerLevel().gold}"><\/div>\r\n            <span class="clientFont starCountGold" data-bind="text:countPerLevel().gold, i18n:\'[title]common.Xgoldstar\', i18nOptions:{count: countPerLevel().gold}"><\/span>\r\n            <!--/ko-->\r\n            <!--ko if: isAdmin() -->\r\n            <div class="userDetailMiniIcon iconStarGoldSmall iconStarGoldSmallAdmin" data-bind="i18n:\'[title]common.Xgoldstaradmin\', i18nOptions:{count: countPerLevel().gold}"><\/div>\r\n            <span class="clientFont starCountGold" data-bind="text:countPerLevel().gold, i18n:\'[title]common.Xgoldstaradmin\', i18nOptions:{count: countPerLevel().gold}"><\/span>\r\n            <!--/ko-->\r\n            <!-- /ko -->\r\n        <\/div>\r\n        <!-- /ko -->\r\n\r\n        <!--ko if: style === "nicknameOnly" -->\r\n        <div class="userDetailsMiniNameContain" data-bind="css:{userDetailsMiniNotClickable: userDetailsPopupStyle === \'none\'}">\r\n            <span class="chatUserId fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle()}, visible: userId() === currentUserId(), i18n:\'common.me\', style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId chatUserIdVisitor fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle()}, visible: userId() !== currentUserId() && !nickname(), i18n:\'common.visitor\', style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId chatUserIdVisitorCustom fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle()}, visible: userId() !== currentUserId() && !nickname(), style:{maxWidth:maxWidth}"><\/span>\r\n            <span class="chatUserId fontColor clientBoldFont" data-bind="css:{adminUserName: adminUserNameSpecialStyle()}, visible: userId() !== currentUserId() && nickname(), customhtml:nickname(), style:{maxWidth:maxWidth}"><\/span>\r\n        <\/div>\r\n\r\n        <span class="userDetailsMiniAdminIcon" data-bind="visible: isAdmin(), i18n:\'[title]common.administrator\'"><\/span>\r\n        <span class="userDetailsMiniVisitorIcon" data-bind="visible: isVisitor(), i18n:\'[title]common.visitor\'"><\/span>\r\n        <span class="isCertifiedIcon" data-bind="visible: isCertified(), i18n:\'[title]common.certifiedcoach\'"><\/span>\r\n        <!-- /ko -->\r\n\r\n        <!--ko if: userDetailsPopupStyle === "userminidetails" && userMiniDetailsWasLoadedOnce() -->\r\n        <div class="userDetailsMiniPopup fadeInFast" data-bind="visible: userMiniDetailsShown()">\r\n            <!--ko if: disableArrow != true-->\r\n            <div class="userDetailsMiniPopupTriangleOutline"><\/div>\r\n            <div class="userDetailsMiniPopupTriangle"><\/div>\r\n            <!-- /ko -->\r\n            <div class="userDetailsMiniPopupClose" data-bind="click: closeUserMiniDetailsPopup"><\/div>\r\n            <div class="userDetailsMiniPopupContain" data-bind="visible: userId() != -1, click: goToProfile, compose: {model: \'shared/viewmodels/userDetails\', view: \'shared/views/userDetails.html\', activationData: [userId()], activate: true}"><\/div>\r\n        <\/div>\r\n        <!-- /ko -->\r\n    <\/div>\r\n<\/div>'});n("plugins/dialog",["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(n,t,i,r,u,f,e){function l(t){return n.defer(function(i){n.isString(t)?n.acquire(t).then(function(t){i.resolve(n.resolveObject(t))}).fail(function(i){n.error("Failed to load dialog module ("+t+"). Details: "+i.message)}):i.resolve(t)}).promise()}var o,h={},c=0,s=function(n,t,i){this.message=n;this.title=t||s.defaultTitle;this.options=i||s.defaultOptions};return s.prototype.selectOption=function(n){o.close(this,n)},s.prototype.getView=function(){return u.processMarkup(s.defaultViewMarkup)},s.setViewUrl=function(n){delete s.prototype.getView;s.prototype.viewUrl=n},s.defaultTitle=t.title||"Application",s.defaultOptions=["Ok"],s.defaultViewMarkup='<div data-view="plugins/messageBox" class="messageBox">\n<div class="modal-header">\n<h3 data-bind="text: title"><\/h3>\n<\/div>\n<div class="modal-body">\n<p class="message" data-bind="text: message"><\/p>\n<\/div>\n<div class="modal-footer" data-bind="foreach: options">\n<button class="btn" data-bind="click: function () { $parent.selectOption($data); }, text: $data, css: { \'btn-primary\': $index() == 0, autofocus: $index() == 0 }"><\/button>\n<\/div>\n<\/div>',o={MessageBox:s,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:function(){return c>0},getContext:function(n){return h[n||"default"]},addContext:function(n,t){t.name=n;h[n]=t;var i="show"+n.substr(0,1).toUpperCase()+n.substr(1);this[i]=function(t,i){return this.show(t,i,n)}},createCompositionSettings:function(n,t){var i={model:n,activate:!1,transition:!1};return t.attached&&(i.attached=t.attached),t.compositionComplete&&(i.compositionComplete=t.compositionComplete),i},getDialog:function(n){if(n)return n.__dialog__},close:function(n){var t=this.getDialog(n),i;t&&(i=Array.prototype.slice.call(arguments,1),t.close.apply(t,i))},show:function(t,u,f){var o=this,e=h[f||"default"];return n.defer(function(n){l(t).then(function(t){var f=r.create();f.activateItem(t,u).then(function(r){if(r){var u=t.__dialog__={owner:t,context:e,activator:f,close:function(){var i=arguments;f.deactivateItem(t,!0).then(function(r){r&&(c--,e.removeHost(u),delete t.__dialog__,0===i.length?n.resolve():1===i.length?n.resolve(i[0]):n.resolve.apply(n,i))})}};u.settings=o.createCompositionSettings(t,e);e.addHost(u);c++;i.compose(u.host,u.settings)}else n.resolve(!1)})})}).promise()},showMessage:function(t,i,r){return n.isString(this.MessageBox)?o.show(this.MessageBox,[t,i||s.defaultTitle,r||s.defaultOptions]):o.show(new this.MessageBox(t,i,r))},install:function(n){t.showDialog=function(n,t,i){return o.show(n,t,i)};t.showMessage=function(n,t,i){return o.showMessage(n,t,i)};n.messageBox&&(o.MessageBox=n.messageBox);n.messageBoxView&&(o.MessageBox.prototype.getView=function(){return n.messageBoxView})}},o.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(n){var t=f("body"),u=f('<div class="modalBlockout"><\/div>').css({"z-index":o.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),e=f('<div class="modalHost"><\/div>').css({"z-index":o.getNextZIndex()}).appendTo(t),r;if(n.host=e.get(0),n.blockout=u.get(0),!o.isOpen()){n.oldBodyMarginRight=t.css("margin-right");n.oldInlineMarginRight=t.get(0).style.marginRight;var i=f("html"),s=t.outerWidth(!0),h=i.scrollTop();f("html").css("overflow-y","hidden");r=f("body").outerWidth(!0);t.css("margin-right",r-s+parseInt(n.oldBodyMarginRight,10)+"px");i.scrollTop(h)}},removeHost:function(n){if(f(n.host).css("opacity",0),f(n.blockout).css("opacity",0),setTimeout(function(){e.removeNode(n.host);e.removeNode(n.blockout)},this.removeDelay),!o.isOpen()){var t=f("html"),i=t.scrollTop();t.css("overflow-y","").scrollTop(i);n.oldInlineMarginRight?f("body").css("margin-right",n.oldBodyMarginRight):f("body").css("margin-right","")}},attached:function(n){f(n).css("visibility","hidden")},compositionComplete:function(n,t,i){var u=o.getDialog(i.model),r=f(n),s=r.find("img").filter(function(){var n=f(this);return!(this.style.width&&this.style.height||n.attr("width")&&n.attr("height"))}),e;r.data("predefinedWidth",r.get(0).style.width);e=function(){setTimeout(function(){r.data("predefinedWidth")||r.css({width:""});var n=r.outerWidth(!1),t=r.outerHeight(!1),i=f(window).height(),e=Math.min(t,i);r.css({"margin-top":(-e/2).toString()+"px","margin-left":(-n/2).toString()+"px"});r.data("predefinedWidth")||r.outerWidth(n);t>i?r.css("overflow-y","auto"):r.css("overflow-y","");f(u.host).css("opacity",1);r.css("visibility","visible");r.find(".autofocus").first().focus()},1)};e();s.load(e);r.hasClass("autoclose")&&f(u.blockout).click(function(){u.close()})}}),o});n("plugins/observable",["durandal/system","durandal/binder","knockout"],function(n,t,i){function c(n){var t=n[0];return"_"===t||"$"===t}function l(t){return!(!t||void 0===t.nodeType||!n.isNumber(t.nodeType))}function a(n){if(!n||l(n)||n.ko===i||n.jquery)return!1;var t=y.call(n);return-1==p.indexOf(t)&&!(n===!0||n===!1)}function f(n,t){var u=n.__observable__,i=!0,f,e;if(!u||!u.__full__)for(u=u||(n.__observable__={}),u.__full__=!0,w.forEach(function(r){n[r]=function(){i=!1;var n=d[r].apply(t,arguments);return i=!0,n}}),b.forEach(function(r){n[r]=function(){i&&t.valueWillMutate();var u=o[r].apply(n,arguments);return i&&t.valueHasMutated(),u}}),k.forEach(function(u){n[u]=function(){for(var s,f=0,e=arguments.length;e>f;f++)r(arguments[f]);return i&&t.valueWillMutate(),s=o[u].apply(n,arguments),i&&t.valueHasMutated(),s}}),n.splice=function(){for(var e,u=2,f=arguments.length;f>u;u++)r(arguments[u]);return i&&t.valueWillMutate(),e=o.splice.apply(n,arguments),i&&t.valueHasMutated(),e},f=0,e=n.length;e>f;f++)r(n[f])}function r(t){var r,o,s,u;if(a(t)&&(r=t.__observable__,!r||!r.__full__)){if(r=r||(t.__observable__={}),r.__full__=!0,n.isArray(t))s=i.observableArray(t),f(t,s);else for(u in t)c(u)||r[u]||(o=t[u],n.isFunction(o)||e(t,u,o));h&&n.log("Converted",t)}}function s(n,t,i){var u;n(t);u=n.peek();i?u?u.destroyAll||f(u,n):(u=[],n(u),f(u,n)):r(u)}function e(t,u,e){var o,h,c=t.__observable__||(t.__observable__={});if(void 0===e&&(e=t[u]),n.isArray(e))o=i.observableArray(e),f(e,o),h=!0;else if("function"==typeof e){if(!i.isObservable(e))return null;o=e}else n.isPromise(e)?(o=i.observable(),e.then(function(t){if(n.isArray(t)){var r=i.observableArray(t);f(t,r);t=r}o(t)})):(o=i.observable(e),r(e));return Object.defineProperty(t,u,{configurable:!0,enumerable:!0,get:o,set:i.isWriteableObservable(o)?function(t){t&&n.isPromise(t)?t.then(function(t){s(o,t,n.isArray(t))}):s(o,t,h)}:void 0}),c[u]=o,o}function v(t,r,u){var o,f={owner:t,deferEvaluation:!0};return"function"==typeof u?f.read=u:("value"in u&&n.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof u.get&&n.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),f.read=u.get,f.write=u.set),o=i.computed(f),t[r]=o,e(t,r,o)}var u,y=Object.prototype.toString,p=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],w=["remove","removeAll","destroy","destroyAll","replace"],b=["pop","reverse","sort","shift","splice"],k=["push","unshift"],o=Array.prototype,d=i.observableArray.fn,h=!1;return u=function(n,t){var u,f,r;return n?(u=n.__observable__,u&&(f=u[t])?f:(r=n[t],i.isObservable(r)?r:e(n,t,r))):null},u.defineProperty=v,u.convertProperty=e,u.convertObject=r,u.install=function(n){var i=t.binding;t.binding=function(n,t,u){u.applyBindings&&!u.skipConversion&&r(n);i(n,t)};h=n.logConversion},u});n("plugins/serializer",["durandal/system"],function(n){return{typeAttribute:"type",space:void 0,replacer:function(n,t){if(n){var i=n[0];if("_"===i||"$"===i)return void 0}return t},serialize:function(t,i){return i=void 0===i?{}:i,(n.isString(i)||n.isNumber(i))&&(i={space:i}),JSON.stringify(t,i.replacer||this.replacer,i.space||this.space)},getTypeId:function(n){if(n)return n[this.typeAttribute]},typeMap:{},registerType:function(){var t=arguments[0],i;1==arguments.length?(i=t[this.typeAttribute]||n.getModuleId(t),this.typeMap[i]=t):this.typeMap[t]=arguments[1]},reviver:function(n,t,i,r){var f=i(t),u;return f&&(u=r(f),u)?u.fromJSON?u.fromJSON(t):new u(t):t},deserialize:function(n,t){var i=this;t=t||{};var r=t.getTypeId||function(n){return i.getTypeId(n)},u=t.getConstructor||function(n){return i.typeMap[n]},f=t.reviver||function(n,t){return i.reviver(n,t,r,u)};return JSON.parse(n,f)}}});n("plugins/widget",["durandal/system","durandal/composition","jquery","knockout"],function(n,t,i,r){function f(n,i){var u=r.utils.domData.get(n,s);u||(u={parts:t.cloneNodes(r.virtualElements.childNodes(n))},r.virtualElements.emptyNode(n),r.utils.domData.set(n,s,u));i.parts=u.parts}var e={},o={},h=["model","view","kind"],s="durandal-widget-data",u={getSettings:function(t){var i=r.utils.unwrapObservable(t())||{},u;if(n.isString(i))return{kind:i};for(u in i)i[u]=-1!=r.utils.arrayIndexOf(h,u)?r.utils.unwrapObservable(i[u]):i[u];return i},registerKind:function(n){r.bindingHandlers[n]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,i,r,e,o){var s=u.getSettings(i);s.kind=n;f(t,s);u.create(t,s,o,!0)}};r.virtualElements.allowedBindings[n]=!0;t.composeBindings.push(n+":")},mapKind:function(n,t,i){t&&(o[n]=t);i&&(e[n]=i)},mapKindToModuleId:function(n){return e[n]||u.convertKindToModulePath(n)},convertKindToModulePath:function(n){return"widgets/"+n+"/viewmodel"},mapKindToViewId:function(n){return o[n]||u.convertKindToViewPath(n)},convertKindToViewPath:function(n){return"widgets/"+n+"/view"},createCompositionSettings:function(n,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(n,i,r,f){f||(i=u.getSettings(function(){return i},n));var e=u.createCompositionSettings(n,i);t.compose(n,e,r)},install:function(n){if(n.bindingName=n.bindingName||"widget",n.kinds)for(var e=n.kinds,i=0;i<e.length;i++)u.registerKind(e[i]);r.bindingHandlers[n.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(n,t,i,r,e){var o=u.getSettings(t);f(n,o);u.create(n,o,e,!0)}};t.composeBindings.push(n.bindingName+":");r.virtualElements.allowedBindings[n.bindingName]=!0}};return u});n("transitions/entrance",["durandal/system","durandal/composition","jquery"],function(n,t,i){var r=100,u={marginRight:0,marginLeft:0,opacity:1},f={marginLeft:"",marginRight:"",opacity:"",display:""};return function(t){return n.defer(function(n){function e(){n.resolve()}function h(){t.keepScrollPosition||i(document).scrollTop(0)}function o(){h();t.triggerAttach();var r={marginLeft:s?"0":"20px",marginRight:s?"0":"-20px",opacity:0,display:"block"},n=i(t.child);n.css(r);n.animate(u,{duration:c,easing:"swing",always:function(){n.css(f);e()}})}if(t.child){var c=t.duration||500,s=!!t.fadeOnly;t.activeView?i(t.activeView).fadeOut({duration:r,always:o}):o()}else i(t.activeView).fadeOut(r,e)}).promise()}});e(["main"])})()