$(document).ready(function(){var s=function(){function s(){window.gtla=window.gtla||[];var s=this;this.goodSKU={md:[],mr:[],mp:[]},s.pageBrowser(),s.lazyonload(),$(document).on("click",".logsss_event",function(){var e=$(this).data("logsss-event-value");e=$.trim(e);var t=s.optLogssDataValue(e,"trackEvent"),a=$(this).data("logsss-const-value");s.optLogssConstValue(a,t),s.saveFmdInfo(t),window.gtla.push(t)}),$(document).on("click",".logsss_event_cl",function(){var e=$(this).data("logsss-const-value"),t=$.trim($(this).closest(".logsss_event_ps").data("logsss-event-value")),a=s.optLogssDataValue(t,"trackEvent");s.optLogssConstValue(e,a),s.saveFmdInfo(a),window.gtla.push(a)}),$("#js_searchTips").on("click","a",function(){var s=$(this),e={trackType:"trackEventNext"},t=$("#js_keyBtn").data("siws");sessionStorage&&sessionStorage.setItem("searchType","L"),t=void 0===t?$.trim($("#js_topSeachInput").data("realVal")):t,e.siws=t,e.sk="L",e.sl=s.parent("li").index()+1,e.sc=$("#js_searchDropdownBox").val(),e.x="search",e.trackNextType="search",window.gtla.push(e)}),$(".word-list").on("click",".word-list p",function(){var s=$(this),e="H"===s.data("type")?"H":"T",t={trackType:"trackEventNext"};sessionStorage&&sessionStorage.setItem("searchType",e),t.sk=e,t.sl=s.index()+1,t.sc=$("#js_searchDropdownBox").val(),t.x="search",t.trackNextType="search",window.gtla.push(t)}),$("#js_keyBtn,#js_seachPage_seachBtn").click(function(s){setTimeout(function(){var s=$(this).data("siws"),e=$("#js_searchDropdownBox").val();if(s=void 0===s?$.trim($("#js_topSeachInput").val()):s,sessionStorage&&!sessionStorage.getItem("searchType")){var t={trackType:"trackEventNext"};$(".nav-search-label").text();t.siws=s,t.sc=e,t.x="search",t.trackNextType="search",window.gtla.push(t)}sessionStorage&&(sessionStorage.setItem("logsss-search-sc",e),sessionStorage.setItem("logsss-search-sckw",s),sessionStorage.removeItem("searchType"))},0)}),$(document).on("click",".logsss_event_jc",function(){var e=$(this),t=e.data("logsss-event-value");t=$.trim(t);var a=s.optLogssDataValue(t,"trackEventNext");a.x="search",a.trackNextType="search",window.gtla.push(a)})}s.prototype={constructor:s,MAX_BRO_NUM:8,lazyonload:function(s){var e=this;s||(s=$(".js_gbexp_lazy,.js_lazy")),s.length&&s.lazyload({threshold:200,effect:"show",failure_limit:5,load:function(s,t){e.getsku($(this)),e.sendsku()}})},pageBrowser:function(){var s=this.getSkuInfo(),e={trackType:"trackBrowser"};e.skuinfo=s,window.gtla.push(e)},getSkuInfo:function(){var s=$('meta[name="GLOBEL:skuinfo"]').attr("content");return s&&/'/.test(s)&&(s=s.replace(/'/g,'"'),s=JSON.parse(s)),s},optLogssDataValue:function(s,e){if(!s&&e)return s={},s.trackType=e,s;s=s.replace(/'/g,'"');var t=JSON.parse(s);return e&&(t.trackType=e),t},optLogssConstValue:function(s,e){if(!s)return e;s=s.replace(/'/g,'"');var t=JSON.parse(s);for(var a in t)if(/^var/.test(a)){var o=t[a].split("|");window[o[0]]&&(e[o[1]]=window[o[0]])}else if("isFromSearch"===a){var n=$("#js_searchDropdownBox").val(),r=$.trim($("#js_topSeachInput").val());window.filterInfo&&(e.filter=window.filterInfo),r&&(e.sc=n,sessionStorage&&(sessionStorage.setItem("logsss-search-sc",n),sessionStorage.setItem("logsss-search-sckw",r)))}else if("channel"===a){var i=this.getGoodsUbcta();i&&Object.keys(i).length>0&&(e.ubcta=i),e.ubcta||(e.ubcta={}),e.ubcta[a]=t[a],e.skuinfo&&(e.skuinfo.pam=0)}else if("ub"===a){var i=this.getGoodsUbcta();i&&Object.keys(i).length>0&&(e.ubcta=i),e.skuinfo&&"ADT"===e.x?e.skuinfo.pam=$("#js_input_quantity").val():e.skuinfo&&(e.skuinfo.pam=0)}else if("x"===a&&"ADT"===t[a])e[a]=t[a],e.skuinfo&&(e.skuinfo.pam=1);else if("x"===a&&"BTS"===t[a]){var c=$("#ul-peijian");e.skuinfo=[],e[a]=t[a];var l=$(".master").children("a").data("logsss-event-value");l=l.replace(/'/g,'"');var u=JSON.parse(l);u.skuinfo.pam=1,e.skuinfo.push(u.skuinfo),c.length>0&&c.find("input:checked").each(function(s,t){var a=$(this),o=a.closest("li"),n=o.data("logsss-event-value");n=n.replace(/'/g,'"');var r=JSON.parse(n);r.skuinfo.pam=1,e.skuinfo.push(r.skuinfo)})}else if("ubcta"===a&&"orderID"===t[a]){var g={};g.orderID=$("#lg_order_id").text(),e[a]=g}else if("x"!==a||"checkout"!==t[a]&&"CWP"!==t[a])e[a]=t[a];else{e[a]=t[a];var p=$("#js_cartForm");if(p){var f=$(".js_gd_item").children("dl").children("dd");e.skuinfo=[],f&&f.length>0&&f.find("input:checked").each(function(s,t){var a=$(this),o=a.closest(".logsss_event_ps"),n=o.data("logsss-event-value"),r=JSON.parse(n.replace(/'/g,'"'));e.skuinfo.push(r.skuinfo)})}}},getSpcb:function(){var s=$('meta[name="GLOBEL:spcb"]').attr("content");return s},saveFmdInfo:function(s){if(sessionStorage)if("mp"===s.pm)sessionStorage.setItem("logsss-search-fmd","mp");else if("md"===s.pm){var e=s.ubcta?s.ubcta.mdlc:"_";sessionStorage.setItem("logsss-search-fmd","md_"+e)}else if("mr"===s.pm){var t=s.x;sessionStorage.setItem("logsss-search-fmd","mr_"+t)}},getGoodsUbcta:function(){if(sessionStorage&&"c"===this.getSpcb()){var s={},e=sessionStorage.getItem("logsss-search-sc");e&&(s.sc=e);var t=sessionStorage.getItem("logsss-search-sckw");t&&(s.sckw=t);var a=sessionStorage.getItem("logsss-search-fmd");return a&&(s.fmd=a),s}},getsku:function(s){var e=$.trim(s.data("logsss-browser-value")),t=this.optLogssDataValue(e,"trackBrowser");if(t){var a=t.pm;a&&this.goodSKU[a]&&this.goodSKU[a].push(t.bv)}},sendsku:function(){var s=this;setTimeout(function(){for(var e in s.goodSKU){var t=s.goodSKU[e],a={trackType:"trackBrowser"};if(t.length>0)if("md"===e?a.pm="md":"mr"===e?a.pm="mr":"mp"===e&&(a.pm="mp"),t.length>0&&t.length<=s.MAX_BRO_NUM)a.ubcta=t,window.gtla.push(a);else if(t.length>s.MAX_BRO_NUM)for(;t.length>0;){var o=s.MAX_BRO_NUM;t.length<s.MAX_BRO_NUM&&(o=t.length);var n=t.splice(0,o),r={trackType:"trackBrowser"};r.pm=a.pm,r.ubcta=n,window.gtla.push(r)}s.goodSKU[e].length=0}},500)},optRcmdLogsssData:function(s,e){$(s).each(function(s,t){var a={};a.x=e,a.skuinfo={},a.skuinfo.sku=t.sku,a.skuinfo.pam=0,a.skuinfo.pc=0,a.skuinfo.k=0,a.ubcta={},a.ubcta.rank=s+1,t.lg_eve_rcmd_value=JSON.stringify(a).replace(/\"/g,"'");var o={};o.pm="mr",o.bv={},o.bv.mrlc=e,o.bv.sku=t.sku,t.lg_bro_rcmd_value=JSON.stringify(o).replace(/\"/g,"'")})}};var e,t={getInstance:function(){return void 0===e&&(e=new s),e}};return t}();window.gbLogsss=s.getInstance()});