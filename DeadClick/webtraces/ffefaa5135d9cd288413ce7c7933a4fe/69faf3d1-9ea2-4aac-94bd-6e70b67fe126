define(["jquery","domReady","pubsub"],function(c,b){var a=false;var d=function(){if(!(this instanceof d)){return new d()}};d.prototype={init:function(){if(a){console.log("ProductFormUtilities.prototype.init")}var e=this;e._initPubSubEvents();return e},_initPubSubEvents:function(){if(a){console.log("ProductFormUtilities.prototype._initPubSubEvents")}var e=this;c.pubsub("subscribe","product-form.attr.swatch.click",function(g,f){e.mobileScrollToTopViewAfterSwatchSelection(f)})},convert:function(e){if(a){console.log("ProductFormUtilities.prototype.convert")}return c("<span />",{html:e}).text()},updateBadgeHTML:function(f){if(a){console.log("ProductFormUtilities.prototype.updateBadgeHTML")}var g=c("<span />").html(this.convert(f)),e=g.find(".tooltip-js").length>0;if(g.find(".promo-badge-js").length>0&&!e){c(".promo-badge-js").html(c(g.find(".promo-badge-js")[0]).html())}},getScrollbarSize:function(){if(a){console.log("ProductFormUtilities.prototype.getScrollbarSize")}var e=c('<div style="width: 50px; height: 50px; overflow: auto; position: absolute; top: -200px; left: -200px;"><div></div></div>').appendTo("body");var f=e.children().first();_scrollbarSize=c(f).innerWidth()-c(f).height(100).innerWidth();c(e).remove();return _scrollbarSize},displayErrorMessage:function(f,e){if(a){console.log("ProductFormUtilities.prototype.displayErrorMessage")}this.clearAddTOCartErrorMessage(e);c("#ecom-product-actions",e).prepend('<div class="add-to-cart-error-js error"><p>'+f+"</p></div>")},getProductGridProductHeights:function(){if(a){console.log("ProductFormUtilities.prototype.getProductGridProductHeights")}var e=c(".stl-product-grid-product-js");if(e.length){$productGridProductHeights=[];c.each(e,function(f,g){$thisHeight=c(this).outerHeight();$productGridProductHeights.push($thisHeight)});return $productGridProductHeights}},setProductGridProductHeights:function(){if(a){console.log("ProductFormUtilities.prototype.setProductGridProductHeights")}var g=this.getProductGridProductHeights(),h=c(".stl-product-grid-product-js"),f=Math.max.apply(null,g),e=f+c(".add-to-cart-error-js").height();if(!c(".stl-product-grid-product-js").hasClass("error-msg-displayed")){c.each(h,function(i,j){c(this).css("height",e+"px").addClass("error-msg-displayed")})}},clearAddTOCartErrorMessage:function(e){if(a){console.log("ProductFormUtilities.prototype.clearAddTOCartErrorMessage")}c("#ecom-product-actions .add-to-cart-error-js",e).remove()},attributeName:function(e){if(a){console.log("ProductFormUtilities.prototype.attributeName")}return e.attr("data-attribute-id")},attributeValue:function(e){if(a){console.log("ProductFormUtilities.prototype.attributeValue")}return e.attr("data-color-identifier")||e.attr("data-attribute-value")},mobileScrollToTopViewAfterSwatchSelection:function(i){if(a){console.log("ProductFormUtilities.prototype.mobileScrollToTopViewAfterSwatchSelection")}var h=c(i.target),g=h.parents(".product-form-js"),f=c(".product-form-js").index(g);h=h.attr("data-role")?h.parent():h;if(h.parents(".color-swatches-js").length>0&&(/small|medium/.test(main.screen.size()))){c("html, body").animate({scrollTop:c("div.product-img-js").eq(f).offset().top},"slow")}},unmarkSelectedAttrContainer:function(e){if(a){console.log("ProductFormUtilities.prototype.unmarkSelectedAttrContainer")}e.parents(".selection-js").removeClass("attribute-value-selected")},resetButtons:function(e){if(a){console.log("ProductFormUtilities.prototype.resetButtons")}e.closest(".product-form-container").find(".step-content .attr-container-js:not(.color-swatches-js) .selected").removeClass("selected").end().end().toggleClass("selected",true).closest(".product-form-container").find(".add-to-bag-js").addClass("disabled").end().find(".shopcart-update-js, .find-brand-store-js, .notify-me-js, .customize-button-js").hide()},resetSizeOptions:function(g,e){if(a){console.log("resetSizeOptions")}var f=e||g.closest(".product-form-js").index();this.unmarkSelectedAttrContainer(g);this.resetButtons(g);c.pubsub("publish","WCS.PRODUCTFORM.RESOLVEQUANTITY",f)},showHideQuantityErrorMessage:function(e){if(a){console.log("ProductFormUtilities.prototype.showHideQuantityErrorMessage")}if(c("#quantity-item").length<1){return}if(c("#quantity-item:visible",e).length>0&&this.isValidQuantity(e)){c(".select-quantity-error-js",e).addClass("hide");c("#qty-step-container",e).removeClass("error")}else{c(".select-quantity-error-js",e).removeClass("hide");c("#qty-step-container",e).addClass("error")}},isValidQuantity:function(e){if(a){console.log("ProductFormUtilities.prototype.isValidQuantity")}var f=this.getQuantity(e);return(isNaN(f)===false)&&(f>0)&&(parseInt(f)==f)},getQuantity:function(e){if(a){console.log("ProductFormUtilities.prototype.getQuantity")}if(e.find(".quantity-text-js").length>0){return e.find(".quantity-text-js").val()}return e.find(".quantity-js").val()},generateQuantityOptions:function(h,g){var e="";g=h>g?g:h;if(h>0){for(var f=1;f<=g;f++){e+='<option value="'+f+'">'+f+"</option>"}}else{e+='<option value="0">0</option>'}return e}};b(function(){if(typeof c.productFormUtil==="undefined"){c.productFormUtil=new d().init()}})});