define(["jquery","pubsub","shared.main.screen"],function(d,c){var b="mainresize";var a=function(f,e){this.element=f;this.options=e};a.prototype={defaults:{currentSize:"small",rateLimit:150},init:function(){var e=this;e.config=d.extend({},e.defaults,e.options);e.config.currentSize=main.screen.size();e.events();return e},events:function(){var e=this;e.initResizeEvents()},debounce:function(f,h,e){var g;return function(){var l=this,k=arguments;var j=function(){g=null;if(!e){f.apply(l,k)}};var i=e&&!g;clearTimeout(g);g=setTimeout(j,h);if(i){f.apply(l,k)}}},initResizeEvents:function(){var e=this;var f=e.debounce(function(){var g=main.screen.size(),h={was:e.config.currentSize,now:g};if(h.was===h.now){d.pubsub("publish","window.resize")}else{d.pubsub("publish","window.resize.breakpoint."+g,h);e.config.currentSize=g}},e.config.rateLimit);window.addEventListener("resize",f)},};a.defaults=a.prototype.defaults;d.fn.mainresize=function(e){return this.each(function(){var f=d(this).data(b);if(!f){f=new a(this,e).init();d(this).data(b,f);window.main=window.main||{};window.main.resize=window.main.resize||f}})};d(window).mainresize()});