define(["jquery",],function(d){var b=false,c="AJAXHopupModal";var a=function(f,e){this.element=f;this.options=e||{};this.defaults={event:"click",hopupSize:"medium",addCloseButton:true,animation:"fade",animationSpeed:250,closeOnBackgroundClick:true,modalClass:"",openOnMobile:false,dismissModalClass:"close-reveal-modal",data:{isHopup:"true"},opened:function(){}};this.metadata=d(this.element).data("options")};a.prototype={init:function(){if(b&&console){console.log("AJAXHopupModal init")}this.config=d.extend({},this.defaults,this.options,this.metadata);this.hopup=d('<div data-reveal class="reveal-modal '+this.config.hopupSize+" "+this.config.modalClass+'">').appendTo("body");var e=this;d(this.element).on(this.config.event,function(g){var f=d(this).data("url");if(b&&console){console.log("AJAXHopupModal url",f)}if(!f||(main.screen.size()=="small"&&!e.config.openOnMobile)){return}g.preventDefault();e.hopup.on("opened",function(){e.addCloseButton();e.config.opened()});e.hopup.foundation("reveal","open",{animation:e.config.animation,animationSpeed:e.config.animationSpeed,closeOnBackgroundClick:e.config.closeOnBackgroundClick,dismissModalClass:e.config.dismissModalClass,data:e.config.data,css:e.config.css,url:f})});return this},addCloseButton:function(){if(b&&console){console.log("AJAXHopupModal addCloseButton")}this.hopup.append('<a class="'+this.config.dismissModalClass+'"><span class="icon-close"></span></a>')}};a.defaults=a.prototype.defaults;d.fn.AJAXHopupModal=function(e){if(b&&console){console.log("$.fn.AJAXHopupModal",e)}return this.each(function(){var f=d(this).data(c);if(!f){f=new a(this,e).init();d(this).data(c,f)}})}});