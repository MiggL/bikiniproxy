String.prototype.Trim=new Function("return this.replace(/^\\s+|\\s+$/g,'')");String.prototype.equalsIgnoreCase=function(a){if(a===null){return false}try{if(this.toUpperCase()===a.toUpperCase()){return true}}catch(b){return false}};String.prototype.replaceAll=function(a,b){if(GrahamTechnology.Base.isUndefinedOrNull(b)){return this.toString()}return this.split(a).join(b)};GrahamTechnology.util.addRadioButtonToGroup=function(e,a,b,d){var c=GrahamTechnology.util.findRadioButtonGroup(e);if(GrahamTechnology.Base.isUndefinedOrNull(c)){GrahamTechnology.util.addRadioGroupToRegistry(e,d);c=GrahamTechnology.util.findRadioButtonGroup(e)}c[a]=b};GrahamTechnology.util.findRadioButtonGroup=function(a){return GrahamTechnology.ui.Form.getRegisteredComponent(a)};GrahamTechnology.util.addRadioGroupToRegistry=function(c,b){GrahamTechnology.ui.Form.register(b,c,GrahamTechnology.grasp.ComponentType.RadioGroup);var a=GrahamTechnology.ui.Form.getRegisteredComponent(c,b);a.ComponentType=GrahamTechnology.grasp.ComponentType.RadioGroup;a.FormID=b};GrahamTechnology.util.setInterval=function(c,e,g,d,f,b){var a=(function(h,j){return function(){if(GrahamTechnology.Base.isUndefinedOrNull(j)||j-->0){setTimeout(a,h);try{var k=c.call(b);if((!GrahamTechnology.Base.isUndefinedOrNull(k))&&(GrahamTechnology.util.AJAXConstants.PollInterval.BREAK_POLL===k)){j=0}}catch(l){j=0;var m="setInterval for '"+e+"' failed with an error";if(!GrahamTechnology.Base.isUndefinedOrNull(g)){logger.log(m,"error","GrahamTechnology.util.setInterval");logger.log(l);g.call(b,l)}else{logger.log(m,"error","GrahamTechnology.util.setInterval");logger.log(l)}}}}}(d,f));setTimeout(a,d)};GrahamTechnology.util.Queue=function(){this.queue=new Array();this.queueSpace=0;this.push=function(a){this.queue[this.queue.length++]=a;logger.log("Pushed item in queue. Current size is "+this.getLength(),"info","Queue.push")};this.pop=function(){var b=null;if((this.queue).length>0){b=this.queue[this.queueSpace];if((++this.queueSpace)*2>=this.queue.length){for(var a=this.queueSpace;a<this.queue.length;a++){this.queue[a-this.queueSpace]=this.queue[a]}this.queue.length-=this.queueSpace;this.queueSpace=0}}logger.log("Popped item from queue. Current size is "+this.getLength(),"info","Queue.pop");return b};this.peek=function(){return this.queue[this.queueSpace]};this.getLength=function(){return this.queue.length-this.queueSpace}};GrahamTechnology.util.Stack=function(){this.stack=new Array();this.stackHeight=0;this.push=function(a){this.stack[this.stackHeight]=a;this.stackHeight++;logger.log("Pushed item in stack. Current size is "+this.getHeight(),"info","Stack.push")};this.pop=function(){this.stackHeight--;var a=this.stack[this.getHeight()];this.stack[this.getHeight()]=null;logger.log("Popped item from stack. Current size is "+this.getHeight(),"info","Stack.pop");return a};this.peek=function(){return this.stack[this.getHeight()-1]};this.getHeight=function(){return this.stackHeight}};GrahamTechnology.util.Bool={valueOf:function(a){if(a.toString().toUpperCase()=="TRUE"){return true}return false}};GrahamTechnology.util.ServerLogger={logMessageCreator:null,postInitialLogs:function(){var b=new Date();var a=this.logMessageCreator.createLogMessage("logger.init","info",b.getTime(),"Logger initialised: "+b);clientAPI.postLogTransportable(a)},log:function(b,d,c){if(!this.logMessageCreator){this.logMessageCreator=new GrahamTechnology.grasp.LogMessageCreator();this.postInitialLogs()}var a=this.logMessageCreator.createLogMessage(c,d,new Date().getTime(),b);clientAPI.postLogTransportable(a)}};GrahamTechnology.util.Logger={log:function(a,c,b){return this._logGeneral(GrahamTechnology.util.AJAXProperties.logGeneral,a,c,b)},logP:function(a,c,b){return this._logGeneral(GrahamTechnology.util.AJAXProperties.logProfiler,a,c,b)},logRP:function(a,c,b){return this._logGeneral(GrahamTechnology.util.AJAXProperties.logRequestProfiler,a,c,b)},logRPV:function(a,c,b){if(GrahamTechnology.util.AJAXProperties.enableVerboseRequestProfiler){return this._logGeneral(GrahamTechnology.util.AJAXProperties.logRequestProfiler,a,c,b)}return false},_logGeneral:function(b,c,e,d){var a=false;if(b==="Browser Console"||b==="Both"){a=YAHOO.log(c,e,d)}if(b==="Server"||b==="Both"){a=GrahamTechnology.util.ServerLogger.log(c,e,d)}return a}};GrahamTechnology.util.ComponentInfo={getComponentInfo:function(a){return a+"_info"},getComponentInfoValues:function(a){var d=GrahamTechnology.DOM.getElementById(this.getComponentInfo(a));var c=d.value.split(",");var e=c[0].split("=")[1];var b=c[1].split("=")[1];var g=c[2].split("=")[1];var f={formID:e,objectID:b,compType:g};return f}};GrahamTechnology.util.TransportableSkeleton={getEmptyTransportableSkeleton:function(){var a={eventType:"",formID:"",objectID:"",subObjectID:"",param1:"",param2:""};return a}};GrahamTechnology.util.ParserFormListTextValue={parse:function(a){if(GrahamTechnology.Base.isUndefinedOrNull(a)){return null}return a.split(String.fromCharCode(28))}};GrahamTechnology.util.RenderingEngines={Constants:{Gecko_1_8:"Gecko_1_8",IE_6:"IE_6",IE_7:"IE_7",IE_8:"IE_8",IE_9:"IE_9",IE_10:"IE_10",IE_11:"IE_11",Opera_9:"Opera",AppleWebKit:"AppleWebKit"},isIE:function(){return agentType.indexOf("IE_")!==-1},isIE_6:function(){return agentType===this.Constants.IE_6},isIE_7:function(){return agentType===this.Constants.IE_7},isIE_8:function(){return agentType===this.Constants.IE_8},isIE_9:function(){return agentType===this.Constants.IE_9},isOpera:function(){return agentType===this.Constants.Opera},isAppleWebKit:function(){return agentType===this.Constants.AppleWebKit}};GrahamTechnology.util.Browsers={Constants:{FIREFOX:"firefox",MSIE:"msie",OPERA:"opera",SAFARI:"safari"},isMultipartXHR:function(){return false},isSafari:function(){return(getBrowser()[0]===this.Constants.SAFARI)},isFirefox:function(){return(getBrowser()[0]===this.Constants.FIREFOX)},isIE:function(){return(getBrowser()[0]===this.Constants.MSIE)},isOpera:function(){return(getBrowser()[0]===this.Constants.OPERA)}};GrahamTechnology.util.Date={DateWidgetType:{COMBO:"Combo",WINDOW:"Window",TEXT_FIELD:"TextField"},dateTimeObject:"",threeLetterDateFormat:"dmy",dateSeparator:"/",createDateObject:function(a,b){this.dateTimeObject={date:a,time:b};return this.dateTimeObject},setThreeLetterDateFormat:function(a){this.threeLetterDateFormat=a},getThreeLetterDateFormat:function(){return this.threeLetterDateFormat},setDateSeparator:function(a){this.dateSeparator=a},getDateSeparator:function(){return this.dateSeparator},validate:function(f,e,d,h){var g=document.getElementById(f).value;if(h&&g==""){return true}var l=g.split(d);if(l.length!=3){return false}else{var k=new Array(0,0,0);k[0]=new Number(l[0]);k[1]=new Number(l[1]);k[2]=new Number(l[2]);if(isNaN(k[0])||isNaN(k[1])||isNaN(k[2])){return false}else{var j=e.indexOf("d");var c=e.indexOf("m");var b=e.indexOf("y");if(k[j]<1||k[c]<1||k[b]<0){return false}else{if(l[b].length!=4){return false}else{var a=new Date(k[b],k[c]-1,k[j]);if(a.getDate()!=k[j]||a.getMonth()!=(k[c]-1)){return false}else{return true}}}}}}};GrahamTechnology.util.constructFullLoadingImageURL=function(b){var a=GrahamTechnology.util.AJAXConstants.URI.RESOURCES_IMAGE_URI+GrahamTechnology.util.AJAXConstants.Glass.SERVER_RESPONSE_IMAGE_PATH+"/"+b;return GrahamTechnology.util.constructFullResourceURL(a)};GrahamTechnology.util.constructFullImageURL=function(c){if(!c){return""}var b=GrahamTechnology.util.AJAXSessionProperties.logicalSessionID;var d=GrahamTechnology.util.AJAXConstants.URI.RESOURCE_SERVICE_URI;if(!GrahamTechnology.Base.isUndefinedOrNull(b)&&!GrahamTechnology.util.AJAXProperties.webServerImages){d=GrahamTechnology.util.AJAXConstants.URI.UNIFIED_SERVLET}var a=d+c;return GrahamTechnology.util.constructFullResourceURL(a)};GrahamTechnology.util.constructFullResourceURL=function(c){var a="";var e="";var b="";if(!c){return""}if(GrahamTechnology.util.AJAXProperties.ajaxOn){a=GrahamTechnology.util.AJAXProperties.resourceRequestURLPrefix;if(a==""&&GrahamTechnology.util.AJAXProperties.clientResources.enabled&&GrahamTechnology.util.AJAXProperties.webServerImages){a+=GrahamTechnology.util.AJAXProperties.clientResources.domain;a+=GrahamTechnology.util.AJAXProperties.clientResources.resourcePath}}var d=GrahamTechnology.util.getUnifiedAcceptorParameters(unescape(c));if(d.indexOf(a)==-1){d=a+d}return d};GrahamTechnology.util.constructFullUploadURL=function(b){var a="";var c="";if(GrahamTechnology.util.AJAXProperties.ajaxOn){a=GrahamTechnology.util.AJAXProperties.uploadResourceURL;if(a!=""){c=GrahamTechnology.util.AJAXSessionProperties.jsessionIDString}}return a+b+c};GrahamTechnology.util.AcceptorURIBuilder={ajaxAcceptorURI:GrahamTechnology.util.AJAXConstants.URI.AJAX_ACCEPTOR_URI,pushConnectURI:GrahamTechnology.util.AJAXConstants.URI.SERVER_PUSH_URI,ajaxAcceptorQuery:GrahamTechnology.util.AJAXConstants.URI.AJAX_ACCEPTOR_QUERY,pushConnectQuery:GrahamTechnology.util.AJAXConstants.URI.SERVER_PUSH_QUERY,processWindow:null,buildURI:function(b,a){if(b){return this.buildDebugURI(this.pushConnectURI,clientAPI.onCorruptedPushRequestCounter.currentValue(),this.pushConnectQuery,a)}return this.buildDebugURI(this.ajaxAcceptorURI,clientAPI.onCorruptedAJAXRequestCounter.currentValue(),this.ajaxAcceptorQuery,a)},buildDebugURI:function(f,d,e,b){var a=GrahamTechnology.util.AJAXSessionProperties.logicalSessionID;if(GrahamTechnology.Base.isUndefinedOrNull(a)){e=null}else{f=GrahamTechnology.util.AJAXConstants.URI.UNIFIED_SERVLET}var g=this.getProcessWindow();if(GrahamTechnology.util.AJAXProperties.debugRequestURIs){f+="/?"+this.extractSessionIDFromAJAXProperties();f+="&attempt="+d;if(!GrahamTechnology.Base.isUndefinedOrNull(e)){f+="&"+e;f+="&logicalSessionID="+GrahamTechnology.util.AJAXSessionProperties.logicalSessionID}f+="&window="+b;var c=new Date();f+="&timestamp="+Date.UTC(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds());if(g.length>0){f+="&gtxInitialProcess="+g}}else{if(g.length>0){f+="?gtxInitialProcess="+g}else{if(!GrahamTechnology.Base.isUndefinedOrNull(e)){f+="/?"+e;f+="&logicalSessionID="+GrahamTechnology.util.AJAXSessionProperties.logicalSessionID;f+="&window="+b}}}return f},extractSessionIDFromAJAXProperties:function(){var b="cppSessionID";var c=GrahamTechnology.util.AJAXSessionProperties.jsessionIDString;var a=c.indexOf("=");c=c.substring(a+1);return b+"="+c},getProcessWindow:function(){if(this.processWindow==null){var b=document.location.search;var a="gtxInitialProcess=";var d=b.indexOf(a);var c=null;if(d!=-1){d+=a.length;endPoint=b.indexOf("&",d);if(endPoint==-1){c=b.substring(d)}else{c=b.substring(d,endPoint)}}if(c==null){this.processWindow=""}else{this.processWindow=c}}return this.processWindow}};GrahamTechnology.util.ResourceURIBuilder={resourceServiceURI:GrahamTechnology.util.AJAXConstants.URI.RESOURCE_SERVICE_URI,resourceServiceURIUnifiedServlet:GrahamTechnology.util.AJAXConstants.URI.UNIFIED_SERVLET,resourceConnectQuery:GrahamTechnology.util.AJAXConstants.URI.RESOURCE_SERVICE_QUERY,buildURI:function(b){var a=GrahamTechnology.util.AJAXSessionProperties.logicalSessionID;if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&!GrahamTechnology.util.AJAXProperties.webServerImages){return this.resourceServiceURIUnifiedServlet+unescape(b)}return this.resourceServiceURI+unescape(b)}};GrahamTechnology.util.ErrorConstants={NONE:0,EXCEPTION_ERROR_MESSAGE:1,ERROR_MESSAGE:2};GrahamTechnology.util.ErrorMessage=function(b,a,c){this.errorMessage=b;this.componentID=a;this.formID=c;this.commandID="";this.actionType="";this.value="";this.parentFormID="";this.childFormID="";this.getMessage=function(){var d=this.errorMessage+"\nError details:\ncomponentID:"+this.componentID+"\nFormID:"+this.formID+"\nAction Type:"+this.actionType+"\nValue:"+this.value+"\nCommandID:"+this.commandID+"\nParentFormID:"+this.parentFormID+"\nchildFormID:"+this.childFormID+"\n";return d},this.getType=function(){return GrahamTechnology.util.ErrorConstants.ERROR_MESSAGE}};GrahamTechnology.util.ExceptionErrorMessage=function(){this.exceptionName="";this.stackTrace="Not available in your browser";this.getMessage=function(){return"Exception occured : "+this.exceptionName+" : "+this.errorMessage+" : \nStacktrace: "+this.stackTrace};this.getType=function(){return GrahamTechnology.util.ErrorConstants.EXCEPTION_ERROR_MESSAGE}};GrahamTechnology.util.ExceptionErrorMessage.prototype=new GrahamTechnology.util.ErrorMessage();GrahamTechnology.util.setDefaultValue=function(a,c,b){if(GrahamTechnology.Base.isUndefinedOrNull(a[c])){a[c]=b}};GrahamTechnology.util.getUnifiedAcceptorParameters=function(b){var a=GrahamTechnology.util.AJAXSessionProperties.logicalSessionID;var c="";var d="";if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&!GrahamTechnology.util.AJAXProperties.webServerImages){c="?"+GrahamTechnology.util.AJAXConstants.URI.RESOURCE_SERVICE_QUERY+"&logicalSessionID="+a;c+="&window="+GrahamTechnology.util.AJAXProperties.windowID}if(GrahamTechnology.util.AJAXProperties.resourceRequestURLPrefix&&!GrahamTechnology.util.AJAXProperties.webServerImages){d=GrahamTechnology.util.AJAXSessionProperties.jsessionIDString}return b+d+c};GrahamTechnology.util.parseImageURL=function(d){var e=unescape(d);e=e.replaceAll("][","&");e=e.replaceAll("[","?");e=e.replaceAll("]","");e=e.replaceAll("@","%40");var c=e.indexOf("?");var b=e;var a={};if(c>0){a=GrahamTechnology.util.parseQueryString(e);b=e.substring(0,e.indexOf("?"))}this.setDefaultValue(a,"bg","");this.setDefaultValue(a,"fn","");this.setDefaultValue(a,"fsi","");this.setDefaultValue(a,"fst","0");this.setDefaultValue(a,"lbl","");this.setDefaultValue(a,"pad","0");this.setDefaultValue(a,"ta","1");this.setDefaultValue(a,"vta","1");this.setDefaultValue(a,"tc","");if(a.fsi!=""){a.fsi=a.fsi+"pt"}return{path:b,param:a}};GrahamTechnology.util.toggleFocus=function(b,a){if(a){GrahamTechnology.DOM.Element.setStylesById(b,{"text-decoration":"underline"})}else{GrahamTechnology.DOM.Element.setStylesById(b,{"text-decoration":"none"})}};GrahamTechnology.util.isComponentFocusable=function(a){return a.visible&&a.enabled};GrahamTechnology.util.unEscapeCtrlCharacters=function(d){if(d){var b=/(&#\d+;)/gi;var c=d.match(b);if(c){for(var a=0;a<c.length;a++){d=d.replaceAll(c[a],String.fromCharCode(parseInt(c[a].substring(2,c[a].length))))}}}return d};GrahamTechnology.util.escapeCtrlCharacters=function(d){var e="";for(var c=0;c<d.length;c++){var b=d.charAt(c);var a=d.charCodeAt(c);switch(a){case 34:case 60:case 62:case 38:case 9:case 10:case 13:e+="&#"+a+";";break;default:e+=b}}return e};GrahamTechnology.util.Timer=function(){this.start=new Date()};GrahamTechnology.util.Timer.prototype={end:function(){var a=new Date();return a-this.start}};GrahamTechnology.util.browserSupportsAnimatedPNG=function(){return YAHOO.env.ua.gecko>=1.9||YAHOO.env.ua.opera>=9.5};GrahamTechnology.util.getAbsolutePos=function(c,b){var e=c.offsetParent;var g=c;var l=0,j=0;while(e&&g!=e){var k=/^div$/i.test(g.tagName);if(k&&g.scrollLeft){l+=g.scrollLeft}if(k&&g.scrollTop){j+=g.scrollTop}g=g.parentNode}var h=c.offsetLeft-l;var d=c.offsetTop-j;if(b&&!(YAHOO.env.ua.ie>7)){h+=GrahamTechnology.ui.getStyleValue(c,"borderLeftWidth");d+=GrahamTechnology.ui.getStyleValue(c,"borderTopWidth")}var a={x:h,y:d};if(GrahamTechnology.util.RenderingEngines.isIE_6()||GrahamTechnology.util.RenderingEngines.isIE_7()){if(!c.currentStyle.hasLayout){a.x=0}}if(c.offsetParent){var f=this.getAbsolutePos(c.offsetParent,true);a.x+=f.x;a.y+=f.y}return a};GrahamTechnology.util.tryConfirm=function(k,a){var l;if(window.event){l=window.event.keyCode}else{if(k){l=k.which}}var k=k||window.event;if(l==13){var b=GrahamTechnology.Base.isUndefinedOrNull(a)?this.id:a;var j=GrahamTechnology.ui.Form.getRegisteredComponent(b);var d=j.FormID;var f=j.TopLevelFormID;var o=false;while(true){var h=GrahamTechnology.ui.Form.getRegisteredFormComponentsForForm(d);for(var n in h){if(h[n].ComponentType==GrahamTechnology.grasp.ComponentType.Button&&!GrahamTechnology.Base.isUndefinedOrNull(h[n].confirmButton)&&h[n].confirmButton){var g=YAHOO.util.Dom.get(h[n].id);try{o=true;g.focus();g.click()}catch(k){}break}}if(o){break}if(d==f){break}var m=GrahamTechnology.ui.Form.getFormHolderWithInnerFormID(d);if(GrahamTechnology.Base.isUndefinedOrNull(m)){break}else{d=m.FormID}}if(GrahamTechnology.util.Browsers.isIE()){var c=k.srcElement;if(c&&c==document.activeElement){if((j.Value!=c.value||j.Value!=j.getDOMValue())&&(c.type=="text")){c.onchange()}}}}};GrahamTechnology.util.constraintRow=function(b,d){var c=YAHOO.util.Dom.get(b);var f="\n";if(GrahamTechnology.util.Browsers.isIE()||GrahamTechnology.util.Browsers.isOpera()){f="\r\n"}var a=c.value;if(GrahamTechnology.util.Browsers.isSafari()){if(a.length>2&&a.substring(a.length-2)=="\n\n"){a=a.substring(0,a.length-1)}}var g=a.split(f);var h=GrahamTechnology.ui.Form.getRegisteredComponent(b);if(d<g.length){var k="";if(!GrahamTechnology.Base.isUndefinedOrNull(h.previousValue)){k=h.previousValue}else{if(!GrahamTechnology.Base.isUndefinedOrNull(h.Value)){k=GrahamTechnology.util.unEscapeCtrlCharacters(h.Value)}else{for(var e=0;e<g.length;e++){if(e!=0&&e<d){k+=f}k+=g[e]}}}var j=c.selectionStart-1;c.value=k;c.selectionStart=j;c.selectionEnd=j;logger.log("row constrained","info","GrahamTechnology.util.constraintRow")}h.previousValue=c.value};GrahamTechnology.util.correctIfNan=function(a,b){if(isNaN(a)){return b}return a};GrahamTechnology.util.isComponentValueValid=function(a){var b=GrahamTechnology.ui.Form.getRegisteredComponent(a);if(!GrahamTechnology.Base.isUndefinedOrNull(b)){var d=b.TestRegExpFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(d)){var c=window[d]();if(c==""){return true}}else{return true}}return false};GrahamTechnology.util.iframeCache={};GrahamTechnology.util.iframeHelperCallback=function(a){return GrahamTechnology.util.iframeCache[a]};GrahamTechnology.util.TabOrderExecResolver=function(){this._updateMainFormTabOrder=false;this._mainFormID=GrahamTechnology.ui.Form.getFirstFormID();this._mainForm=GrahamTechnology.ui.Form.getForm(this._mainFormID);this._modalPopupForms=new Array();this._nonModalPopupForms=new Array();this.updateTabOrder=function(){var d=1;if(this._modalPopupForms.length<=0){if(this._updateMainFormTabOrder){d=GrahamTechnology.ui.Form.updateTabOrderOnForm(this._mainFormID,this._mainFormID,d);this._mainForm.currentTabIndex=d}for(var b=0;b<this._nonModalPopupForms.length;b++){var e=this._nonModalPopupForms[b];d=GrahamTechnology.ui.Form.updateTabOrderOnForm(e.formID,e.formID,d);e.focusFirstTabbableElement()}}else{var a=this._modalPopupForms[this._modalPopupForms.length-1];var c=a.formID;if(d==1){d=2000+(GrahamTechnology.ui.Form.getNumModalPopupForms()*1000)}a.popupform.innerElement.tabIndex=d++;GrahamTechnology.ui.Form.updateTabOrderOnForm(c,c,d);if(!a.isNoNeedFocus){a.focusFirstTabbableElement()}}};this._addPopupFormID=function(b,a){var c=GrahamTechnology.ui.Form.Form[b];if(c.modal){c.isNoNeedFocus=a;this._modalPopupForms.push(c)}else{this._nonModalPopupForms.push(c)}};this.addCandidates=function(a,b){if(a==GrahamTechnology.grasp.TransportType.COMMAND_Transportable){this._addCandidateCommands(b)}else{this._addCandidateTransports(a,b)}};this._isPopupFormID=function(a){return a!=GrahamTechnology.ui.Form.getFirstFormID()};this._setUpdateMainFormTabOrder=function(a){this._updateMainFormTabOrder=a};this._addCandidateCommands=function(a){for(var e=0;e<a.length;e++){var g=a[e];if((g.commandID==GrahamTechnology.grasp.CommandType.RUN_FORM_IN_HOLDER)||(g.commandID==GrahamTechnology.grasp.CommandType.SET_ACTIVE_TAB)){var c=g.commandArg;var d=g.commandArg2;var b=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(d,c);var f=GrahamTechnology.ui.Form.getRegisteredComponent(b,c);if(GrahamTechnology.Base.isUndefinedOrNull(f)){continue}if(this._isPopupFormID(f.TopLevelFormID)){this._addPopupFormID(f.TopLevelFormID)}else{this._setUpdateMainFormTabOrder(true)}}}};this._addCandidateTransports=function(e,c){for(var d=0;d<c.length;d++){var a=c[d];if(e==GrahamTechnology.grasp.TransportType.INNER_FORM_Transportable){var b=a.formHolderName;var f=GrahamTechnology.ui.Form.getRegisteredComponent(b);if(GrahamTechnology.Base.isUndefinedOrNull(f)){continue}if(this._isPopupFormID(f.TopLevelFormID)){this._addPopupFormID(f.TopLevelFormID,true)}else{this._setUpdateMainFormTabOrder(true)}}else{if(e==GrahamTechnology.grasp.TransportType.POPUP_FORM_Transportable){var g=a.formID;this._addPopupFormID(g)}}}}};GrahamTechnology.util.RenderUtil={_parentTypes:{DIV:""},isParentType:function(a){var b=!(this._parentTypes[a.nodeName]===void 0);return b}};GrahamTechnology.util.escapeDollars=function(a){return a.replace(/\$/g,"\\$")};GrahamTechnology.util.fixWidth=function(b){var a=document.getElementById(b);a.style.width=a.offsetWidth+"px"};GrahamTechnology.util.FixWidthSnS=function(a){this.id=a;this.fixWidthImpl=function(){var b=document.getElementById(this.id);if(b.offsetWidth>0){b.style.width=b.offsetWidth+"px"}GrahamTechnology.ui.getSnSResizeEvent().unsubscribe(this.fixWidthImpl,this,true)};this.callFixWidthAfterSnS=function(){GrahamTechnology.ui.getSnSResizeEvent().subscribe(this.fixWidthImpl,this,true)}};GrahamTechnology.util.AddDisableBackSpaceForHistoryListener=function(){if(window.addEventListener){window.addEventListener("keydown",GrahamTechnology.util.DisableBackSpaceForHistory,true)}else{if(window.attachEvent){window.attachEvent("keydown",GrahamTechnology.util.DisableBackSpaceForHistory,true)}}logger.log("Registering BackSpace History Listener","info","GrahamTechnology.util.AddDisableBackSpaceForHistoryListener")};GrahamTechnology.util.RemoveDisableBackSpaceForHistoryListener=function(){if(window.removeEventListener){window.removeEventListener("keydown",GrahamTechnology.util.DisableBackSpaceForHistory,true)}else{if(window.removeEvent){window.removeEvent("keydown",GrahamTechnology.util.DisableBackSpaceForHistory,true)}}logger.log("Unregistering BackSpace History Listener","info","GrahamTechnology.util.RemoveDisableBackSpaceForHistoryListener")};GrahamTechnology.util.DisableBackSpaceForHistory=function(a){if(a.keyIdentifier=="U+0008"||a.keyIdentifier=="Backspace"||a.keyCode==8){if(a.target&&($(a.target).hasClass("spellCheckerText")||$(a.target).hasClass("spellCheckerTextArea"))){return}if(!((a.target instanceof HTMLInputElement&&(a.target.type=="text"||a.target.type=="password"||a.target.type=="number"||a.target.type=="email"||a.target.type=="url"||a.target.type=="tel")&&!a.target.readOnly)||a.target instanceof HTMLTextAreaElement)){a.preventDefault();a.preventDefault()}}};GrahamTechnology.util.Print=function(){if(GrahamTechnology.util.RenderingEngines.isAppleWebKit()){clientAPI.pushConnection.callback.failure=function(a){if(a.status==-1){window.print();GrahamTechnology.action.refresh(true)}};clientAPI.pushConnection.Connection.abort(clientAPI.pushConnection,clientAPI.pushConnection.callback,false)}else{window.print()}};function isDocumentSelected(){if(GrahamTechnology.util.Browsers.isFirefox()){return window.getSelection()!=""}if(document.selection){return document.selection.type=="Text"}return false}function isGeckoBreed(){return agentType.indexOf("Gecko")>=0}function constrainText(b,a,c){if(c){if(c.keyCode==37||c.keyCode==38||c.keyCode==39||c.keyCode==40||c.keyCode==16){return}}if(b.value.length>a){b.value=b.value.slice(0,a)}}function getValidElements(){var d=new Array();var e=document.forms[0].elements;var c,b=0;for(b=0;b<e.length;b++){c=e[b];if(c.type=="hidden"||c.type=="HIDDEN"){continue}var a=c.getAttribute("disabled");if(a!=null&&a!=void 0&&(a=="disabled"||a)){continue}d[d.length]=c}return d}function getFirstElement(){var b=getValidElements();var a=0;for(a=0;a<b.length;a++){comp=b[a];if(comp.getAttribute("tabIndex")==1){return comp}}return b[0]}function containsElement(a,d){var c=false,b=0;while(!c&&b<a.length){if(a[b]==d){c=true}else{b++}}return c}function getNaturalOrderIndex(a){var b=-1,c=0,e=false;var d=getValidElements();while(c<d.length&&b==-1){if(d[c]==a){b=c}else{c++}}return b}function jsFormInstance(a){return GrahamTechnology.ui.Form.getForm(a)}function jsField(a,c){var b=null;if(!GrahamTechnology.Base.isUndefinedOrNull(c)){b=GrahamTechnology.ui.Form.getForm(c).components[a]}if(GrahamTechnology.Base.isUndefinedOrNull(b)){b=GrahamTechnology.ui.Form.getRegisteredComponent(a)}return b}function jsInformation(){return GrahamTechnology.ui.Form.getInfo()}function jsAffirmation(){return GrahamTechnology.ui.Form.getAffi()}GrahamTechnology.util.formatNumber=function(a,b){return $.format.number(a,b)};GrahamTechnology.util.getViewportDimensions=function(){var a=$(window);var b={w:a.width(),h:a.height()};logger.log("Browser Viewport Dimensions w: "+b.w+" h: "+b.h,"debug","GrahamTechnology.util.getViewportDimensions");return b};GrahamTechnology.util.getViewportPosition=function(){var b=$(window);var a=$(document);if(a&&(a.scrollLeft()||a.scrollTop())){return{left:a.scrollLeft(),top:a.scrollTop()}}else{if(window){return{left:b.scrollLeft(),top:b.scrollTop()}}}};GrahamTechnology.util.parseQueryString=function(a){logger.log("Parsing queryString for url: "+a,"debug","GrahamTechnology.util.parseQueryString");return $.url(a).param()};GrahamTechnology.util.stripLeadingAndTrailingSpaces=function(a){logger.log("Trimming string: "+a,"debug","GrahamTechnology.util.stripLeadingAndTrailingSpaces");return $.trim(a)};GrahamTechnology.Base={};GrahamTechnology.Base.isUndefinedOrNull=function(){for(var a=0;a<arguments.length;a++){if(!(arguments[a]===null||arguments[a]===undefined)){arguments=null;return false}}arguments=null;return true};var logger=GrahamTechnology.util.Logger;GrahamTechnology.util.doCookieCheck=function(){var b,a;if(navigator.cookieEnabled){b=true}else{document.cookie="cookietest=value";b=document.cookie.indexOf("cookietest=")!==-1}if(!b){a=document.location.search;if(a&&a!==""){a+="&"}else{if(a!=="?"){a+="?"}}a+="cookiesDisabled=true";document.location.search=a}};GrahamTechnology.util.createComponent=function(d,a,c){var b=GrahamTechnology.grasp.ComponentType;switch(d){case b.Button:return new GrahamTechnology.ui.Button(a);case b.Checkbox:return new GrahamTechnology.ui.Checkbox(a);case b.Combo:return new GrahamTechnology.ui.Combo(a);case b.Listbox:return new GrahamTechnology.ui.ListboxComponent(a);case b.OptionMenu:return new GrahamTechnology.ui.OptionMenu(a);case b.PopdownCombo:return new GrahamTechnology.ui.PopdownCombo(a);case b.Spinner:return new GrahamTechnology.ui.Spinner(a);case b.RadioButton:return new GrahamTechnology.ui.RadioButton(a);case b.Textfield:return new GrahamTechnology.ui.TextField(a);case b.ActiveXControl:return new GrahamTechnology.ui.ActiveXControl(a);case b.TextLabel:return new GrahamTechnology.ui.TextLabel(a);case b.ImageLabel:return new GrahamTechnology.ui.ImageLabel(a);case b.Tree:return new GrahamTechnology.ui.Tree(a);case b.FormParagraph:return new GrahamTechnology.ui.FormParagraph(a);case b.WebLink:return new GrahamTechnology.ui.WebLink(a);case b.Date:return new GrahamTechnology.ui.Date(a,c);case b.TabbedFormHolder:return new GrahamTechnology.ui.TabbedFormHolder(a);case b.AccordionFormHolder:return new GrahamTechnology.ui.AccordionFormHolder(a);case b.FormHolder:return new GrahamTechnology.ui.FormHolder(a);case b.GraphicBox:return new GrahamTechnology.ui.GraphicBox(a);case b.RadioGroup:return new GrahamTechnology.ui.RadioGroup(a);case b.Timer:return new GrahamTechnology.ui.Timer(a);case b.MenuButton:return new GrahamTechnology.ui.MenuButton(a);case b.TimeInputField:return new GrahamTechnology.ui.TimeInputField(a,c);case b.ScriptTextComponent:return new GrahamTechnology.ui.ScriptTextComponent(a);case b.GraphicLine:return new GrahamTechnology.ui.GraphicLine(a);case b.CustomComponent:return new GrahamTechnology.ui.CustomComponent(a);case b.CustomContainer:return new GrahamTechnology.ui.CustomContainer(a);case b.UNIDENTIFIED:logger.log("Request for creating unidentified component with id :"+a,"error","Form.register")}};GrahamTechnology.util.unEncodeHtmlCharacters=function(a){if(a){a=a.replaceAll("&lt;","<").replaceAll("&gt;",">").replaceAll("&quot;",'"').replaceAll("&amp;","&")}return a};GrahamTechnology.DOMImpl=function(){};GrahamTechnology.ElementImpl=function(){};GrahamTechnology.DOM=new GrahamTechnology.DOMImpl();GrahamTechnology.DOM.Element=new GrahamTechnology.ElementImpl();GrahamTechnology.DOMImpl.prototype.appendChildElements=function(a,d){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Appending child elements","debug","GrahamTechnology.DOM.appendChildElements")}var c=a;if(typeof(c)==="string"){c=$("#"+c)}var b;for(b=1;b<arguments.length;b++){$(c).append(arguments[b])}return c};GrahamTechnology.DOMImpl.prototype.createElement=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Creating element: "+b,"debug","GrahamTechnology.DOM.createElement")}var c=document.createElement(b);GrahamTechnology.DOM.Element.updateAttributes(c,a);return c};GrahamTechnology.DOMImpl.prototype.getElementById=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting element: "+a,"debug","GrahamTechnology.DOM.getElementById")}return $("#"+a).get(0)};GrahamTechnology.DOMImpl.prototype.getElementsByTagAndClass=function(a,c,d){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting Elements with tag: "+c+" class: "+d+" and parentElement: "+a,"debug","GrahamTechnology.DOM.getElementsByTagAndClass")}var b=c;if(d!==null){b=b+"."+d}if(a!==null){return $(a).find(b).get()}return $(b).get()};GrahamTechnology.DOMImpl.prototype.getElementsByIdTagAndClass=function(d,b,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting Elements with tag: "+b+" class: "+c+" and parentId: "+d,"debug","GrahamTechnology.DOM.getElementsByIdTagAndClass")}var a=b;if(c!==null){a=a+"."+c}if(d!==null){return $("#"+d).find(a).get()}return $(a).get()};GrahamTechnology.DOMImpl.prototype.getFirstElementByTagAndClass=function(a,c,d){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting first Element with tag: "+c+" class: "+d+" and parentElement: "+a,"debug","GrahamTechnology.DOM.getFirstElementByTagAndClass")}var b=c;if(d!==null){b=b+"."+d}if(a!==null){return $(a).find(b).get(0)}return $(b).get(0)};GrahamTechnology.DOMImpl.prototype.getFirstElementByIdTagAndClass=function(d,b,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting first Element with tag: "+b+" class: "+c+" and parentId: "+d,"debug","GrahamTechnology.DOM.getFirstElementByIdTagAndClass")}var a=b;if(c!==null){a=a+"."+c}if(d!==null){return $("#"+d).find(a).get(0)}return $(a).get(0)};GrahamTechnology.DOMImpl.prototype.replaceElement=function(a,b){return $(a).replaceWith(b)};GrahamTechnology.DOMImpl.prototype.replaceChildElements=function(b,a){var c=$(b);c.empty();if(a){this.appendChildElements(b,a)}};GrahamTechnology.ElementImpl.prototype.insertSiblingElementsAfter=function(a,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Insert siblings after element: "+a.id,"debug","GrahamTechnology.DOM.Element.insertSiblingElementsAfter")}var b=$(a);b.after(c);return b.get(0)};GrahamTechnology.ElementImpl.prototype.insertSiblingElementsBefore=function(a,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Insert siblings before element: "+a.id,"debug","GrahamTechnology.DOM.Element.insertSiblingElementsBefore")}var b=$(a);b.before(c);return b.get(0)};GrahamTechnology.ElementImpl.prototype.addClass=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Adding class: "+a+" to "+b.id,"debug","GrahamTechnology.DOM.Element.addClass")}$(b).addClass(a);return b};GrahamTechnology.ElementImpl.prototype.addClassById=function(c,a){var b=GrahamTechnology.DOM.getElementById(c);if(b){this.addClass(b,a)}return b};GrahamTechnology.ElementImpl.prototype.getAttribute=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting attribute "+a+" for element: "+b.id,"debug","GrahamTechnology.DOM.Element.getAttribute")}return $(b).attr(a)};GrahamTechnology.ElementImpl.prototype.getAttributeById=function(a,b){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting attribute "+b+" for element: "+a,"debug","GrahamTechnology.DOM.Element.getAttributeById")}return $("#"+a).attr(b)};GrahamTechnology.ElementImpl.prototype.getComputedStyle=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting computed style: "+a+" for element: "+b.id,"debug","GrahamTechnology.DOM.Element.getComputedStyle")}return $(b).css(a)};GrahamTechnology.ElementImpl.prototype.getComputedStyleById=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting computed style: "+a+" for element: "+b,"debug","GrahamTechnology.DOM.Element.getComputedStyleById")}return $("#"+b).css(a)};GrahamTechnology.ElementImpl.prototype.getDimensions=function(c){var b=$(c);var d=b.outerWidth();var a=b.outerHeight();if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting dimensions for element: "+c.id+" w: "+d+" h: "+a,"debug","GrahamTechnology.DOM.Element.getDimensions")}return{w:d,h:a}};GrahamTechnology.ElementImpl.prototype.getDimensionsById=function(c){var b=$("#"+c);var d=b.outerWidth();var a=b.outerHeight();if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Getting dimensions for element: "+c+" w: "+d+" h: "+a,"debug","GrahamTechnology.DOM.Element.getDimensionsById")}return{w:d,h:a}};GrahamTechnology.ElementImpl.prototype.getPosition=function(c,a){var b=$(c).offset();var d=$(a).offset();return{left:(b.left-d.left),top:(b.top-d.top)}};GrahamTechnology.ElementImpl.prototype.getPositionById=function(a,c){var b=$("#"+a).offset();var d=$("#"+c).offset();return{left:(b.left-d.left),top:(b.top-d.top)}};GrahamTechnology.ElementImpl.prototype.hasClass=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Element: "+(b?b.id:b)+" has class: "+a,"debug","GrahamTechnology.DOM.Element.hasClass")}return $(b).hasClass(a)};GrahamTechnology.ElementImpl.prototype.hasClassById=function(c,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Element: "+c+" has class: "+a,"debug","GrahamTechnology.DOM.Element.hasClassById")}var b=GrahamTechnology.DOM.getElementById(c);if(b){return this.hasClass(b,a)}return false};GrahamTechnology.ElementImpl.prototype.hide=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Hiding Element: "+a.id,"debug","GrahamTechnology.DOM.Element.hide")}return $(a).css({display:"none"})};GrahamTechnology.ElementImpl.prototype.hideById=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Hiding Element: "+a,"debug","GrahamTechnology.DOM.Element.hideById")}return $("#"+a).css({display:"none"})};GrahamTechnology.ElementImpl.prototype.isChildElement=function(c,b){var a=$("#"+c).find(b).length>0;if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Is Element "+b.id+" Child Of "+c+": "+a,"debug","GrahamTechnology.DOM.Element.isChildElement")}return a};GrahamTechnology.ElementImpl.prototype.isChildElementById=function(c,b){var a=$("#"+c).find("#"+b).length>0;if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Is Element "+b+" Child Of "+c+": "+a,"debug","GrahamTechnology.DOM.Element.isChildElementById")}return a};GrahamTechnology.ElementImpl.prototype.remove=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Removing "+a+" from DOM","debug","GrahamTechnology.DOM.Element.remove")}if(a&&a.parentNode){a.parentNode.removeChild(a)}};GrahamTechnology.ElementImpl.prototype.removeById=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Removing "+a+" from DOM","debug","GrahamTechnology.DOM.Element.removeById")}return $("#"+a).remove()};GrahamTechnology.ElementImpl.prototype.removeClass=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Removing class: "+a+" from element: "+b.id,"debug","GrahamTechnology.DOM.Element.removeClass")}$(b).removeClass(a);return b};GrahamTechnology.ElementImpl.prototype.removeClassById=function(c,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Removing class: "+a+" from element: "+c,"debug","GrahamTechnology.DOM.Element.removeClassById")}var b=GrahamTechnology.DOM.getElementById(c);if(b){this.removeClass(b,a)}return b};GrahamTechnology.ElementImpl.prototype.setAttribute=function(b,a,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Set attribute: "+a+" with value: "+c+"on element: "+b.id,"debug","GrahamTechnology.DOM.Element.setAttribute")}$(b).attr(a,c)};GrahamTechnology.ElementImpl.prototype.setAttributeById=function(a,b,c){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Set attribute: "+b+" with value: "+c+"on element: "+a,"debug","GrahamTechnology.DOM.Element.setAttributeById")}$("#"+a).attr(b,c)};GrahamTechnology.ElementImpl.prototype.setPosition=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Setting position top: "+a.top+" left: "+a.left+" on: "+b.id,"debug","GrahamTechnology.DOM.Element.setPosition")}$(b).offset(a)};GrahamTechnology.ElementImpl.prototype.setPositionById=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Setting position top: "+a.top+" left: "+a.left+" on: "+b,"debug","GrahamTechnology.DOM.Element.setPositionById")}$("#"+b).offset(a)};GrahamTechnology.ElementImpl.prototype.setClass=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Setting class: "+a+" on element: "+b.id,"debug","GrahamTechnology.DOM.Element.setClass")}$(b).attr("class",a);return b};GrahamTechnology.ElementImpl.prototype.setClassById=function(c,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Setting class: "+a+" on element: "+c,"debug","GrahamTechnology.DOM.Element.setClassById")}var b=GrahamTechnology.DOM.getElementById(c);if(b){this.setClass(b,a)}return b};GrahamTechnology.ElementImpl.prototype.setStyles=function(a,b){this.updateAttributes(a,{style:b})};GrahamTechnology.ElementImpl.prototype.setStylesById=function(a,b){this.updateAttributes($("#"+a),{style:b})};GrahamTechnology.ElementImpl.prototype.show=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Showing: "+a.id,"debug","GrahamTechnology.DOM.Element.show")}return $(a).css({display:"block"})};GrahamTechnology.ElementImpl.prototype.showById=function(a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Showing: "+a,"debug","GrahamTechnology.DOM.Element.showById")}return $("#"+a).css({display:"block"})};GrahamTechnology.ElementImpl.prototype.updateAttributes=function(f,d){var a=$(f);var c;for(c in d){var b=c;var e=d[c];if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Adding attribute: "+b+" with value: "+e+" to element: "+f.id,"debug","GrahamTechnology.DOM.Element.updateAttributes")}if(b==="style"){a.css(e)}else{if(b.indexOf("on")!==0){a.attr(b,e)}else{f[b]=e}}}return f};GrahamTechnology.ElementImpl.prototype.attachEventHandler=function(d,c,b){var a=$(d);if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Adding event handler for event: '"+c+"' to element: "+d.id,"debug","GrahamTechnology.DOM.Element.attachEventHandler")}a.on(c,b)};delete GrahamTechnology.DOMImpl;delete GrahamTechnology.ElementImpl;var timerID="";function form_Submit(b,a){var c=document.getElementById(b);var d=c.gtxReserved_actionString.value;c.gtxReserved_actionString.value=d+","+a;doTheSubmit(c)}function form_PreSubmit(b,a){var c=document.getElementById(b);var d=c.gtxReserved_actionString.value;c.gtxReserved_actionString.value=d+","+a;doTheSubmit(c)}function form_IndexedSubmit(c,a,b){var d=document.getElementById(c);var e=d.gtxReserved_actionString.value;d.gtxReserved_actionString.value=a+",subObjectID="+b+","+e;doTheSubmit(d)}function form_ListSelectSortSubmit(c,a,b){var d=document.getElementById(c);var e=d.gtxReserved_actionString.value;d.gtxReserved_actionString.value=a+",colID="+b+","+e;doTheSubmit(d)}function form_ListSelectViewRefreshSubmit(a){var b=document.forms[0].gtxReserved_actionString.value;document.forms[0].gtxReserved_actionString.value=b+","+a;doTheSubmit()}function form_ListSelectViewRefreshSubmit(a,b){var c=document.forms[0].gtxReserved_actionString.value;document.forms[0].gtxReserved_actionString.value=a+",_gtxReserved_refreshViewActionPageNumber="+b+","+c;doTheSubmit()}function form_IndexedPreSubmit(c,a,b){var d=document.getElementById(c);var e=d.gtxReserved_actionString.value;d.gtxReserved_actionString.value=a+",subObjectID="+b+","+e;doTheSubmit(d)}function form_CellSelectPreSubmit(c,f,b,a){var d=document.getElementById(c);var e=d.gtxReserved_actionString.value;d.gtxReserved_actionString.value=a+",rowID="+f+",colID="+b+","+e;doTheSubmit(d)}function form_CellSelectSubmit(c,f,b,a){var d=document.getElementById(c);var e=d.gtxReserved_actionString.value;d.gtxReserved_actionString.value=a+",rowID="+f+",colID="+b+","+e;doTheSubmit(d)}function form_ValueChangedSubmit(b,e,a){var c=document.getElementById(b);var d=c.gtxReserved_actionString.value;c.gtxReserved_actionString.value=a+",parameter="+e+","+d;doTheSubmit(c)}function form_TreeSelectSubmit(b,a,d){var c=document.getElementById(b);var e=c.gtxReserved_actionString.value;c.gtxReserved_actionString.value=a+",nodeID="+d+", "+e;doTheSubmit(c)}GrahamTechnology.ui.BrowserWindow={WAIT_TIME_FOR_RESIZE:500,windowDimensions:void 0,waitForMoreWindowResizeTimeout:void 0,waitForConfirm:false,enableFormSubmission:true,isResingAllowed:function(){return this.windowDimensions!==void 0},enableResize:function(){this.windowDimensions=new GrahamTechnology.ui.BrowserWindowDimensions()},haveDimensionsChanged:function(a){return !this.windowDimensions.equals(a)},setDimensions:function(a){this.windowDimensions=a},waitingForResize:function(){return this.waitForMoreWindowResizeTimeout!==void 0},clearWaitForResize:function(){clearTimeout(this.waitForMoreWindowResizeTimeout)},waitForResize:function(a){this.waitForMoreWindowResizeTimeout=setTimeout("form_SumbitNewSize('"+a+"')",this.WAIT_TIME_FOR_RESIZE)},confirmResize:function(){this.waitForConfirm=true;var a=confirm("A page resize was detected.\nRefresh page? ");this.waitForConfirm=false;return a},waitingForConfirm:function(){return this.waitForConfirm}};GrahamTechnology.ui.BrowserWindowDimensions=function(){this._sizeObject={width:(GrahamTechnology.util.Browsers.isIE())?self.innerWidth||(document.documentElement.offsetWidth||document.body.offsetWidth):self.outerWidth,height:(GrahamTechnology.util.Browsers.isIE())?self.innerHeight||(document.documentElement.offsetHeight||document.body.offsetHeight):self.outerHeight}};GrahamTechnology.ui.BrowserWindowDimensions.prototype.equals=function(a){return a._sizeObject.width==this._sizeObject.width&&a._sizeObject.height==this._sizeObject.height};function form_resizeTimeout(b){var a=GrahamTechnology.ui.BrowserWindow;if(a.waitingForConfirm()){return}if(a.isResingAllowed()){window.setTimeout('form_haveDimensionsChanged("'+b+'");',100)}}function form_haveDimensionsChanged(b){var c=new GrahamTechnology.ui.BrowserWindowDimensions();var a=GrahamTechnology.ui.BrowserWindow;if(a.haveDimensionsChanged(c)){a.setDimensions(c);if(a.waitingForResize()){a.clearWaitForResize()}a.waitForResize(b)}}function form_SumbitNewSize(a){var b=true;if(GrahamTechnology.util.AJAXProperties.alertOnBrowserResize){b=GrahamTechnology.ui.BrowserWindow.confirmResize()}if(b){GrahamTechnology.ui.Form.sendUnsentComponentValues();form_SetSubmitTimeout(a)}}function form_SetSubmitTimeout(a){clearTimeout(timerID);timerID=window.setTimeout('form_resizeSubmit("'+a+'");',100)}function form_resizeSubmit(a){if(GrahamTechnology.multiwindow.currentWindowIsPrimary()&&GrahamTechnology.util.AJAXProperties.ajaxOn&&clientAPI.eventQueueSize()>0){form_SetSubmitTimeout(a);return}var b=document.forms[0].gtxReserved_actionString.value;document.forms[0].formHeight.value=self.innerHeight||(document.documentElement.offsetHeight||document.body.offsetHeight);document.forms[0].formWidth.value=self.innerWidth||(document.documentElement.offsetWidth||document.body.offsetWidth);document.forms[0].hasResized.value="true";document.forms[0].gtxReserved_actionString.value=a+",eventType=10,"+b;if(GrahamTechnology.ui.BrowserWindow.enableFormSubmission){doTheSubmit()}}function form_PopupWindow(c,e,b,a){var d=-1;var f=-1;if(window.screen){d=(screen.width/2)-(e/2);f=(screen.height/2)-(b/2)}else{d=1;f=1}window.open(c,"_blank","toolbar=0,scrollbars="+a+",location=0,status=0,menubar=0,resizable=0,width="+e+",height="+b+",left="+d+",top="+f)}function block(){if(!GrahamTechnology.util.AJAXProperties.ajaxOn&&!isGeckoBreed()){var c=getValidElements();for(var b=0;b<c.length;b++){var a=c[b];a.disabled=true}}GrahamTechnology.ui.Form.disableAllForms()}function doTheSubmit(a){if(GrahamTechnology.util.AJAXProperties.ajaxOn){block()}if(a==null){a=document.forms[0]}a.gtx_JavaScript_Check.value="true";a.submit();if(!GrahamTechnology.util.AJAXProperties.ajaxOn){block()}}function iEBackSpaceRule(a,b){var c=b.keyCode;if(c===8){b.keyCode=0}}function autoTab(c,g){var b=c.getAttribute("maxLength");if(!b){return}var f=g.keyCode;var d=[0,8,9,16,17,18,37,38,39,40,46];var a=c.getAttribute("tabIndex");if(a&&a!=-1&&(c.value.length>=b)&&(!containsElement(d,f))&&(!isDocumentSelected())&&(!isTextSelectedInField(c))){c.value=c.value.slice(0,b);if(YAHOO.env.ua.ie>=8){c.onchange()}c=getNextTabbedElement(a,c);if(c){try{c.focus();if(c.className&&c.className.indexOf("autoselect")!=-1){c.select()}}catch(g){}}}}function addAllChildren(c,b){for(var a=0;a<b.length;a++){c.push(b[a]);if(b[a].hasChildNodes()){addAllChildren(c,b[a].children)}}}function getNextTabbedElement(f,p,c){var m=parseInt(f+"",10);if(!isNaN(m)){f=m}if(p.form==null){var d=new Array();addAllChildren(d,p.parentElement.parentElement.parentElement.children)}else{var d=p.form.elements}if(c){var j=Number.MAX_VALUE}else{var j=-1}var h=null;var b=-1;for(k=0;k<d.length;k++){var e=d[k];if(e==p){b=k}var o=e.getAttribute("tabIndex");var q=parseInt(o+"",10);if(!isNaN(q)){o=q}if(c){var g=o<f&&(j==Number.MAX_VALUE||j<o)}else{var g=o>f&&(j==-1||j>o)}if(g&&e.style.visibility!="hidden"&&e.style.display!="none"&&!e.disabled){h=new Array();j=o;h[0]={index:k,elem:e}}else{if(j==o){if(h==null){h=new Array()}h[h.length]={index:k,elem:e}}}}if(h==null){return null}var a=h[0].elem;var l=getDistance(h[0].index,b);for(var k=1;k<h.length;k++){var n=getDistance(h[k].index,b);if(l>n){l=n;a=h[k].elem}}return a}function getDistance(d,c){return d>c?d-c:c-d}function forceTextareaMaxlength(f,c){var g=parseInt(c,10);if(g<=0){return true}var a=f.srcElement;var b=f.keyCode;if(!a){a=f.currentTarget;b=f.which}var e=isTextSelectedInField(a);if((b>=32&&b<=36)||b>=41||b==13){var d=a.value.length;if(d>=g){if(!e){if(f.ctrlKey&&(b==65||b==97)){return true}if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}}return true}function isTextSelectedInField(a){if(!GrahamTechnology.Base.isUndefinedOrNull(a.selectionStart)&&!GrahamTechnology.Base.isUndefinedOrNull(a.selectionEnd)){return(a.selectionEnd-a.selectionStart)>0}if(a.document.selection){return a.document.selection.createRange().text!=""}return false}GrahamTechnology.ui.DisplayMessage={};GrahamTechnology.DisplayMessage={};GrahamTechnology.DisplayMessage.Handler={};GrahamTechnology.ui.DisplayMessage._manager=null;GrahamTechnology.ui.DisplayMessage.setManager=function(a){GrahamTechnology.ui.DisplayMessage._manager=a};GrahamTechnology.ui.DisplayMessage.initialize=function(){GrahamTechnology.ui.DisplayMessage.setManager(new GrahamTechnology.ui.DisplayMessage.Manager())};GrahamTechnology.ui.DisplayMessage.initializePageHandler=function(){var a=GrahamTechnology.ui.DisplayMessage.Handler.Page.createHandler();GrahamTechnology.ui.DisplayMessage.registerHandler(GrahamTechnology.ui.DisplayMessage.getPageHandlerId(),a)};GrahamTechnology.ui.DisplayMessage.addMessage=function(b,d,a,c){GrahamTechnology.ui.DisplayMessage._manager.addMessage(b,d,a,c)};GrahamTechnology.ui.DisplayMessage.clear=function(a){GrahamTechnology.ui.DisplayMessage._manager.clear(a)};GrahamTechnology.ui.DisplayMessage.acknowledgePageMessages=function(){var a=GrahamTechnology.ui.DisplayMessage.getPageHandlerId();GrahamTechnology.ui.DisplayMessage._manager._callClearHandler(a);var b=GrahamTechnology.ui.DisplayMessage._manager._getGroupIdForHandler(a);clientAPI.postClearDisplayMessage(b,-1,-1)};GrahamTechnology.ui.DisplayMessage.clearSingleComponentMessage=function(b,c,a){GrahamTechnology.ui.DisplayMessage._manager.clearSingleComponentMessage(b,c,a)};GrahamTechnology.ui.DisplayMessage.runAllHandlers=function(){GrahamTechnology.ui.DisplayMessage._manager.runAllHandlers()};GrahamTechnology.ui.DisplayMessage.registerHandler=function(b,a){GrahamTechnology.ui.DisplayMessage._manager.registerHandler(b,a)};GrahamTechnology.ui.DisplayMessage.unregisterHandler=function(a){GrahamTechnology.ui.DisplayMessage._manager.unregisterHandler(a)};GrahamTechnology.ui.DisplayMessage.getPageHandlerId=function(){return GrahamTechnology.ui.DisplayMessage._manager.getPageHandlerId()};GrahamTechnology.ui.DisplayMessage.getFormHandlerId=function(a){return GrahamTechnology.ui.DisplayMessage._manager.getFormHandlerId(a)};GrahamTechnology.ui.DisplayMessage.AbstractManager=function(){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.addMessage=function(b,d,a,c){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.clear=function(a){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.runHandlers=function(b,d,a,c){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.registerHandler=function(b,a){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.unregisterHandler=function(a){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.getPageHandlerId=function(){};GrahamTechnology.ui.DisplayMessage.AbstractManager.prototype.getFormHandlerId=function(a){};GrahamTechnology.ui.DisplayMessage.Manager=function(){this._handlers={};this._groupIdToHandlerIds={};this._displayHandlersWithAddedMessages={}};GrahamTechnology.ui.DisplayMessage.Manager.prototype=new GrahamTechnology.ui.DisplayMessage.AbstractManager();GrahamTechnology.ui.DisplayMessage.Manager.PAGE_HANDLER_ID="$$PAGE";GrahamTechnology.ui.DisplayMessage.Manager.FORM_HANDLER_PREFIX="$$FORM";GrahamTechnology.ui.DisplayMessage.Manager.COMPONENT_NOT_FOUND="Component not found";GrahamTechnology.ui.DisplayMessage.Manager.GROUP_NOT_FOUND="Display group not found";GrahamTechnology.ui.DisplayMessage.Manager.HANDLER_NOT_FOUND="Hander not found";GrahamTechnology.ui.DisplayMessage.Manager.prototype.addMessage=function(b,e,a,c){var d=this.getHandlerId(e,a);if(!d){this._logComponentNotFoundError(b,e,a,c,"DisplayMessage.Manager.addMessage")}else{this._addHandlerToGroup(b,d);this._addMessageToHandler(d,c)}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._logComponentNotFoundError=function(b,d,a,c,e){logger.log(GrahamTechnology.ui.DisplayMessage.Manager.COMPONENT_NOT_FOUND+" groupId="+b+", formId="+d+", formControlId="+a+", message="+c,"error",e)};GrahamTechnology.ui.DisplayMessage.Manager.prototype._addHandlerToGroup=function(b,c){var a=this._groupIdToHandlerIds[b];if(!a){a={};this._groupIdToHandlerIds[b]=a}a[c]={}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._getGroupIdForHandler=function(d){var c,b,a;for(c in this._groupIdToHandlerIds){a=this._groupIdToHandlerIds[c];for(b in a){if(b===d){return c}}}return null};GrahamTechnology.ui.DisplayMessage.Manager.prototype._addMessageToHandler=function(c,b){this._markHandlerAsMessagesAdded(c);var a=this._getHandler(c);if(a){a.addMessage(b)}else{this._logHandlerNotFoundError(c,b,"DisplayMessage.Manager._addMessageToHandler")}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._logHandlerNotFoundError=function(b,a,c){logger.log(GrahamTechnology.ui.DisplayMessage.Manager.HANDLER_NOT_FOUND+" handlerId="+b+", message="+a,"warning",c)};GrahamTechnology.ui.DisplayMessage.Manager.prototype._markHandlerAsMessagesAdded=function(a){this._displayHandlersWithAddedMessages[a]={}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._unmarkAllHandlerAsMessagesAdded=function(a){this._displayHandlersWithAddedMessages={}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._runHandlersForHandlersWithMessagesAdded=function(){var a;for(a in this._displayHandlersWithAddedMessages){var b=this._getHandler(a);if(b){b.flush()}}this._unmarkAllHandlerAsMessagesAdded()};GrahamTechnology.ui.DisplayMessage.Manager.prototype.clear=function(a){if(a===-1){this._clearAllGroups()}else{this._clearGroup(a)}};GrahamTechnology.ui.DisplayMessage.Manager.prototype.clearSingleComponentMessage=function(d,e,a){var b=this._groupIdToHandlerIds[d];if(!b){this._logGroupNotFoundError(d,"DisplayMessage.Manager._removeGroup")}else{var c;for(c in b){if(c===this.getHandlerId(e,a)){this._callClearHandler(c);delete this._groupIdToHandlerIds[d][c]}}}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._clearAllGroups=function(){var a;for(a in this._groupIdToHandlerIds){this._clearGroup(a)}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._clearGroup=function(c){var a=this._groupIdToHandlerIds[c];if(!a){this._logGroupNotFoundError(c,"DisplayMessage.Manager._removeGroup")}else{var b;for(b in a){this._callClearHandler(b)}delete this._groupIdToHandlerIds[c]}};GrahamTechnology.ui.DisplayMessage.Manager.prototype._logGroupNotFoundError=function(a,b){logger.log(GrahamTechnology.ui.DisplayMessage.Manager.GROUP_NOT_FOUND+" groupId="+a,"error",b)};GrahamTechnology.ui.DisplayMessage.Manager.prototype._callClearHandler=function(b){var a=this._getHandler(b);if(a){a.clear()}};GrahamTechnology.ui.DisplayMessage.Manager.prototype.runAllHandlers=function(){this._runHandlersForHandlersWithMessagesAdded()};GrahamTechnology.ui.DisplayMessage.Manager.prototype.registerHandler=function(b,a){if(a){this._handlers[b]=a}};GrahamTechnology.ui.DisplayMessage.Manager.prototype.unregisterHandler=function(a){delete this._handlers[a]};GrahamTechnology.ui.DisplayMessage.Manager.prototype.getHandlerId=function(b,a){if(b===-1){return this.getPageHandlerId()}if(a===-1){return this.getFormHandlerId(b)}var c=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(a,b);return c};GrahamTechnology.ui.DisplayMessage.Manager.prototype.getPageHandlerId=function(){return GrahamTechnology.ui.DisplayMessage.Manager.PAGE_HANDLER_ID};GrahamTechnology.ui.DisplayMessage.Manager.prototype.getFormHandlerId=function(a){return GrahamTechnology.ui.DisplayMessage.Manager.FORM_HANDLER_PREFIX+a};GrahamTechnology.ui.DisplayMessage.Manager.prototype._getHandler=function(a){return this._handlers[a]};GrahamTechnology.ui.DisplayMessage.Handler={};GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler=function(a){this.id=a};GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.prototype.addMessage=function(a){};GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.prototype.clear=function(){};GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.prototype.flush=function(){};GrahamTechnology.ui.DisplayMessage.Handler.Form={};GrahamTechnology.ui.DisplayMessage.Handler.Form.createHandler=function(b,a){return null};GrahamTechnology.ui.DisplayMessage.Handler.Form.AbstractHandler=function(b){if(b){this.formId=b;var a=GrahamTechnology.ui.DisplayMessage.getFormHandlerId(b);GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.call(this,a)}};GrahamTechnology.ui.DisplayMessage.Handler.Form.AbstractHandler.prototype=new GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler();GrahamTechnology.ui.DisplayMessage.Handler.Page={};GrahamTechnology.ui.DisplayMessage.Handler.Page.createHandler=function(){return null};GrahamTechnology.ui.DisplayMessage.Handler.Form.createHandler=function(c,b){var a=new GrahamTechnology.DisplayMessage.Handler.Form(c);a.appendDisplayMessageArea(b);return a};GrahamTechnology.DisplayMessage.Handler.Form=function(a){GrahamTechnology.ui.DisplayMessage.Handler.Form.AbstractHandler.call(this,a)};GrahamTechnology.DisplayMessage.Handler.Form.prototype=new GrahamTechnology.ui.DisplayMessage.Handler.Form.AbstractHandler();GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_ELEMENT_ID_PREFIX="displayMessageArea";GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_LIST_ELEMENT_ID_PREFIX="displayMessageList";GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_ELEMENT_CLASS="displayMessageArea";GrahamTechnology.DisplayMessage.Handler.Form.prototype.addMessage=function(c){var a=$("<li class='displayMessage'>");a.append(c);var b=this.getListElement();$(b).append(a);var d=this.getElement();d.style.display="";if(!this.isElementInViewport(b)){$("html, body").animate({scrollTop:$(d).offset().top},500)}};GrahamTechnology.DisplayMessage.Handler.Form.prototype.isElementInViewport=function(b){var a;if(b.getBoundingClientRect){a=b.getBoundingClientRect();return(a.top>0)}return true};GrahamTechnology.DisplayMessage.Handler.Form.prototype.clear=function(){var b=this.getElement();b.style.display="none";var a=this.getListElement();a.innerHTML=""};GrahamTechnology.DisplayMessage.Handler.Form.prototype.appendDisplayMessageArea=function(c){var b=this.createDisplayMessageArea();var a=document.getElementById(c);if(a){a.insertBefore(b,a.firstChild);a.style.display=""}else{logger.log("Could not find parent element '"+c+"'","error","GrahamTechnology.DisplayMessage.Handler.Form.prototype.appendDisplayMessageArea")}return b};GrahamTechnology.DisplayMessage.Handler.Form.prototype.createDisplayMessageArea=function(){var a=document.createElement("DIV");a.id=this.getElementId();a.className=GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_ELEMENT_CLASS;a.style.display="none";var b=document.createElement("UL");b.id=this.getListElementId();$(a).append(b);return a};GrahamTechnology.DisplayMessage.Handler.Form.prototype.getElementId=function(){return"f"+this.formId+"_"+GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_ELEMENT_ID_PREFIX};GrahamTechnology.DisplayMessage.Handler.Form.prototype.getListElementId=function(){return"f"+this.formId+"_"+GrahamTechnology.DisplayMessage.Handler.Form.DISPLAYMESSAGE_LIST_ELEMENT_ID_PREFIX};GrahamTechnology.DisplayMessage.Handler.Form.prototype.getElement=function(){return document.getElementById(this.getElementId())};GrahamTechnology.DisplayMessage.Handler.Form.prototype.getListElement=function(){return document.getElementById(this.getListElementId())};GrahamTechnology.ui.DisplayMessage.Handler.FormControl={};GrahamTechnology.ui.DisplayMessage.Handler.FormControl.createHandler=function(a){return new GrahamTechnology.DisplayMessage.Handler.FormControl(a)};GrahamTechnology.DisplayMessage.Handler.FormControl=function(a){GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.call(this,a);this.componentElement=null;this.parentElement=null};GrahamTechnology.DisplayMessage.Handler.FormControl.prototype=new GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler();GrahamTechnology.DisplayMessage.Handler.FormControl.HAS_MESSAGE_CLASSNAME="hasDisplayMessage";GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_CONTAINER_CLASSNAME="validationContainer";GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_ERROR_CLASSNAME="validationError";GrahamTechnology.DisplayMessage.Handler.FormControl.prototype.addMessage=function(b){YAHOO.util.Dom.addClass(this.getComponentElement(),GrahamTechnology.DisplayMessage.Handler.FormControl.HAS_MESSAGE_CLASSNAME);var c=null;var a=$('<li class="'+GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_ERROR_CLASSNAME+'">');a.html(b);if(this.getParentElement().has("."+GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_CONTAINER_CLASSNAME).length>0){c=this.getParentElement().children("."+GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_CONTAINER_CLASSNAME)}else{c=$('<ul class="'+GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_CONTAINER_CLASSNAME+'">')}c.append(a);this.getParentElement().append(c)};GrahamTechnology.DisplayMessage.Handler.FormControl.prototype.clear=function(){YAHOO.util.Dom.removeClass(this.getComponentElement(),GrahamTechnology.DisplayMessage.Handler.FormControl.HAS_MESSAGE_CLASSNAME);this.getParentElement().children("."+GrahamTechnology.DisplayMessage.Handler.FormControl.VALIDATION_CONTAINER_CLASSNAME).remove()};GrahamTechnology.DisplayMessage.Handler.FormControl.prototype.getElementId=function(){return this.id};GrahamTechnology.DisplayMessage.Handler.FormControl.prototype.getComponentElement=function(){if(!this.componentElement){this.componentElement=$("#"+this.getElementId())}return this.componentElement};GrahamTechnology.DisplayMessage.Handler.FormControl.prototype.getParentElement=function(){if(!this.parentElement){this.parentElement=$("#"+this.getElementId()).parent()}return this.parentElement};GrahamTechnology.ui.DisplayMessage.Handler.DateControl={};GrahamTechnology.ui.DisplayMessage.Handler.DateControl.createHandler=function(a){return new GrahamTechnology.DisplayMessage.Handler.DateControl(a)};GrahamTechnology.DisplayMessage.Handler.DateControl=function(a){GrahamTechnology.DisplayMessage.Handler.FormControl.call(this,a);this.componentElement=null;this.parentElement=null};GrahamTechnology.DisplayMessage.Handler.DateControl.prototype=new GrahamTechnology.DisplayMessage.Handler.FormControl();GrahamTechnology.DisplayMessage.Handler.DateControl.prototype.getParentElement=function(){if(!this.parentElement){this.parentElement=$("#"+this.getElementId()).parent().parent()}return this.parentElement};GrahamTechnology.ui.DisplayMessage.Handler.Page.createHandler=function(){return new GrahamTechnology.DisplayMessage.Handler.Page()};GrahamTechnology.DisplayMessage.Handler.Page=function(){GrahamTechnology.DisplayMessage.Handler.Page.prototype.constructor.call(this);this.reset()};GrahamTechnology.DisplayMessage.Handler.Page.prototype=new GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler();GrahamTechnology.DisplayMessage.Handler.Page.prototype.addMessage=function(b){var a;if(typeof b==="string"||b instanceof String){a=b}else{a=b.messageText;if(b.acknowledgeText){a+='<button class="GTTextButton, AcknowledgeMessageButton" onClick="GrahamTechnology.ui.DisplayMessage.acknowledgePageMessages()">'+b.acknowledgeText+"</button>"}}this.messages.push(a)};GrahamTechnology.DisplayMessage.Handler.Page.prototype.clear=function(){this.reset();this.flush()};GrahamTechnology.DisplayMessage.Handler.Page.prototype.flush=function(){if(!this.panel){this.panel=$('<div class="pageMessageDisplayArea"></div>');this.panel.hide();$("body").prepend(this.panel)}if(this.messages.length>0){this.panel.html("<ul><li>"+this.messages.join("</li><li>")+"</li></ul>");this.panel.slideDown(500)}else{this.panel.slideUp(500)}};GrahamTechnology.DisplayMessage.Handler.Page.prototype.reset=function(){this.messages=[]};GrahamTechnology.ui.DisplayMessage.Handler.DataTable={};GrahamTechnology.ui.DisplayMessage.Handler.DataTable.createHandler=function(a){return new GrahamTechnology.DisplayMessage.Handler.DataTable(a)};GrahamTechnology.DisplayMessage.Handler.DataTable=function(a){GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler.call(this,a);this.messages=[];this.listbox=GrahamTechnology.ui.Form.getRegisteredComponent(a)};GrahamTechnology.DisplayMessage.Handler.DataTable.HAS_MESSAGE_CLASSNAME="hasDisplayMessage";GrahamTechnology.DisplayMessage.Handler.DataTable.prototype=new GrahamTechnology.ui.DisplayMessage.Handler.AbstractHandler();GrahamTechnology.DisplayMessage.Handler.DataTable.prototype.addMessage=function(a){if(!a.row){logger.log("Row number cannot be undefined/null","error","GrahamTechnology.DisplayMessage.Handler.DataTable.prototype.addMessage");return}this.messages.push(a);YAHOO.widget.DataTable.CLASS_HIGHLIGHTED=GrahamTechnology.DisplayMessage.Handler.DataTable.HAS_MESSAGE_CLASSNAME;if(this.listbox.getSelectedRows().indexOf(String(a.row))>-1){this.listbox.myDataTable.unselectRow(a.row)}this.listbox.myDataTable.highlightRow(a.row)};GrahamTechnology.DisplayMessage.Handler.DataTable.prototype.clear=function(){var a;for(a in this.messages){this.listbox.myDataTable.unhighlightRow(a.row)}this.reset()};GrahamTechnology.DisplayMessage.Handler.DataTable.prototype.reset=function(){this.messages=[]};var idWithFocus=null;var gtDisabled="gtDisabled";function getElement(c,b){var a=document.getElementById(c);if(a==null||a.id!=c){alert("could not getElementById: *"+c+"* got "+a.id);alert(debug(a))}return a}function getElements(b){var a=[];var c=getElement(b);return getNodes(a,c)}function getNodes(a,d){a[a.length]=d;var c=d.childNodes;for(var b=0;b<c.length;b++){if(c[b]==null){alert("adding null")}getNodes(a,c[b])}return a}function addEvent(a,d,b){var e=getElement(a);if(e.addEventListener){e.addEventListener(d,b,false);return true}else{if(e.attachEvent){var c=e.attachEvent("on"+d,b);return c}else{alert("Handler could not be attached")}}}function isLink(a){return a.tagName=="A"||a.onclick!=null}function map(functionString,idString){var elements=getElements(idString);for(var i=0;i<elements.length;i++){alert("FunctionString: "+elements[i].id);eval(functionString+"("+elements[i]+");")}}function debug(b){var a="";a+="\nid: *"+b.id+"*";a+="\ntype: *"+b.type+"*";a+="\ndata: *"+b.data+"*";a+="\nvalue: *"+b.value+"*";a+="\ntagName: *"+b.tagName+"*";a+="\ndisabled: *"+b.disabled+"*";if(b.getAttribute){a+="\ngtDisabled: *"+b.getAttribute(gtDisabled)+"*"}a+="\nanchor: *"+b.anchor+"*";a+="\nhref: *"+b.href+"*";a+="\nonclick: *"+b.onclick+"*";if(b.disabled==null){a+="\ndisabled was null"}return a}function isVisible(a){var b=getElement(a);if(document.layers){return(b.visibility==null||b.visibility==""||b.visibilty=="show")}else{return(b.style==null||b.style.visibility==null||b.style.visibility==""||b.style.visibility=="visible")}}function setVisible(b,a){if(a){show(b)}else{hide(b)}}function show(a){var b=getElements(a);for(var a=0;a<b.length;a++){if(document.layers){b[a].visibility="show"}else{if(b[a].style){b[a].style.visibility="visible"}}}}function hide(a){var b=getElements(a);for(var a=0;a<b.length;a++){if(document.layers){b[a].visibility="hide"}else{if(b[a].style){b[a].style.visibility="hidden"}}}}function hasFocus(a){return a==idWithFocus}function gainFocus(a){idWithFocus=a}function loseFocus(){idWithFocus=null}function looseFocus(){loseFocus()}function getComponentWithFocus(){return idWithFocus}function isEditable(a){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].readOnly!=null){return !c[b].readOnly}}return true}function setTextFieldEditable(b,a){var d=getElements(b);for(var c=0;c<d.length;c++){if(d[c].readOnly!=null){d[c].readOnly=!a}}}function isEnabled(a){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].disabled!=null){return !c[b].disabled}else{if(c[b].getAttribute&&c[b].getAttribute(gtDisabled)==true){return false}}}return true}function enableTextField(b,a){enable(b,a)}function enableButton(b,a){enable(b,a)}function enableToggleBox(b,a){enable(b,a)}function enableCombo(b,a){var d=getElements(b);for(var c=0;c<d.length;c++){if(d[c].disabled!=null){d[c].disabled=!a;return}}}function disabledLinkAlert(){alert("this link is disabled");return false}function functionWrap(functionText){alert("functionWrap "+functionText);eval("javascript://"+functionText)}function enableMouseDown(b,a){var d=getElements(b);for(var c=0;c<d.length;c++){if(d[c].disabled!=null){d[c].disabled=!a}if(d[c].onclick!=null||d[c].href!=null){if(!a){}else{d[c].onmousedown=null}}}}function enable(d,c){var g=getElements(d);for(var f=0;f<g.length;f++){if(g[f].disabled!=null){g[f].disabled=!c}if(isLink(g[f])&&document.all){var e=g[f].getAttribute("oldonclick");var b=(g[f].getAttribute(gtDisabled)==true);if(!c){if(!b){var a=g[f].onclick;g[f].setAttribute(gtDisabled,true);g[f].setAttribute("oldonclick",a)}g[f].style.cursor="default";g[f].linkColor="grey"}else{if(b){g[f].onclick=e;g[f].setAttribute(gtDisabled,false);g[f].setAttribute("oldonclick",null)}g[f].style.cursor=""}}}}function setTextLabel(a,b){setData(a,b)}function setTextButtonValue(a,b){if(setValue(a,b)){return}setData(a,b)}function setImageButtonValue(b,c){if(c!=""){var a=YAHOO.util.Dom.get(b);YAHOO.util.Dom.setStyle(a,"background-image","url("+c+")")}setImageLabel(b,c)}function setTextFieldValue(a,b){setValue(a,b)}function setToggle(b,a){var d=getElements(b);for(var c=0;c<d.length;c++){if(d[c].checked!=null){d[c].checked=a}}}function setImageLabel(b,a){var d=getElements(b);for(var c=0;c<d.length;c++){if(d[c].src!=null){d[c].src=a}}}function setData(a,d){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].data!=null){if(a=="button"){}c[b].data=d}}}function setValue(a,d){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].value!=null){if(a=="button"){}c[b].value=d;return true}}}function getTextLabel(a){return getData(a)}function getImageLabel(a){return getImageButtonValue(a)}function getTextButtonValue(a){var b=getValue(a);if(b!=""){return b}else{return getData(a)}}function getComboValue(a){var d=getElements(a);for(var c=0;c<d.length;c++){if(d[c].selectedIndex!=null){var b=d[c].selectedIndex;return d[c].options[b].text}}}function getComboValueSize(a){var b=getComboValue(a);return b.length}function getTextFieldValue(a){return getValue(a)}function getTextFieldValueSize(a){var b=getTextFieldValue(a);return b.length}function getToggle(a){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].checked!=null){return c[b].checked}}}function getImageButtonValue(a){var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].src!=null){return c[b].src}}}function getData(a){var d="";var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].data!=null){d+=c[b].data}}return d}function getValue(a){var d="";var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].value!=null){d+=c[b].value}}return d}function hasAnItemSelected(a){var d=getElement(a);if(d.changed){return true}var c=getElements(a);for(var b=0;b<c.length;b++){if(c[b].defaultSelected){return true}}return false}GrahamTechnology.profile.loggingCounter=0;GrahamTechnology.profile.delayTimeout=2000;GrahamTechnology.profile.eventTimeout=1000;GrahamTechnology.profile.lastProfilerID=0;GrahamTechnology.profile.nextProfilerID=function(){this.lastProfilerID=this.lastProfilerID+1;return this.lastProfilerID};GrahamTechnology.profile.setProfilingTimeout=function(a,c,e,d){var g=-1;if(!GrahamTechnology.util.AJAXProperties.enableRequestProfiler){g=setTimeout(function(){a.call(c)},e);return g}var b=GrahamTechnology.profile.RequestProfilerManager.get();var f=b.getResponseProfiler();g=setTimeout(function(){f.setDescription(d);f.setTimeoutWaste(e);f.start();a.call(c);f.stop();logger.logRPV("Thread '"+d+"' took : Total:"+f.getTime()+",Processing:"+f.getProcessingTime()+",TimeoutWaste:"+f.getTimeoutWaste()+" - "+b.myName(),"info","profile.setProfilingTimeout");var h={};h.type="thread";h.description=d;h.totalTime=f.getTime();h.processingTime=f.getProcessingTime();h.timeoutWaste=f.getTimeoutWaste();GrahamTechnology.profile.RequestProfilerLogger.addData(h)},e);return g};GrahamTechnology.profile.RequestProfilerManager={_requestProfiler:null,clear:function(){this._requestProfiler=null},get:function(){var a=null;if(GrahamTechnology.util.Browsers.isFirefox()&&YAHOO.env.ua.gecko<7){a=this._getRequestProfilerForFirefox()}else{a=this._getRequestProfiler();this._set(a)}logger.log("Requested 'RequestProfiler' "+a.myName(),"info","RequestProfilerManager.get");return a},_set:function(a){this._requestProfiler=a},_getRequestProfiler:function(){var a=this._requestProfiler;if(GrahamTechnology.Base.isUndefinedOrNull(a)){a=new GrahamTechnology.profile.RequestProfiler();logger.log("Created new 'RequestProfiler' "+a.myName(),"info","RequestProfilerManager._getRequestProfiler")}return a},_getRequestProfilerForFirefox:function(){var a=this._getRequestProfilerFromStack();if(GrahamTechnology.Base.isUndefinedOrNull(a)){logger.log("NOT FOUND 'RequestProfiler' from execution stack","info","RequestProfilerManager._getRequestProfilerForFirefox");a=this._getRequestProfiler()}else{logger.log("FOUND 'RequestProfiler' from execution stack","info","RequestProfilerManager._getRequestProfilerForFirefox")}return a},_getRequestProfilerFromStack:function(){var d=null;var e=0;for(var c=arguments.callee.caller;c!=null;c=c.caller,e++){if(e>=20){break}var b=c.arguments;if(b.length<4){continue}if(!GrahamTechnology.Base.isUndefinedOrNull(b[3])&&(!GrahamTechnology.Base.isUndefinedOrNull(b[3]._RP_))){d=b[3];break}else{}}return d}};GrahamTechnology.profile.RequestProfiler=function(){this.roundtripProfiler=new GrahamTechnology.profile.StopWatch(GrahamTechnology.profile.nextProfilerID());this.serverTime=0;this.interactionID=0;this.responseProfilers={};this.componentIdMap={};this._RP_="__RP__";this.RP_ID=parseInt(GrahamTechnology.profile.nextProfilerID(),10);this.myName=function(){var a="ReqPro_"+this.RP_ID;return a};this.getResponseProfiler=function(b){if(GrahamTechnology.Base.isUndefinedOrNull(b)){b=GrahamTechnology.profile.nextProfilerID()}var a=this.responseProfilers[b];if(GrahamTechnology.Base.isUndefinedOrNull(a)){a=new GrahamTechnology.profile.StopWatch(b);this.responseProfilers[b]=a}return a};this.startRTT=function(){this.roundtripProfiler.start()};this.stopRTT=function(){this.roundtripProfiler.stop()};this.startRPT=function(){var a=this.getResponseProfiler(GrahamTechnology.profile.nextProfilerID());a.start();return a};this.stopRPT=function(b){var a=this.getResponseProfiler(b);a.stop()};this.setServerTime=function(a){this.serverTime=a};this.getServerTime=function(){return parseInt(this.serverTime,10)};this.setInteractionID=function(a){this.interactionID=a};this.getInteractionID=function(){return this.interactionID};this.getRoundTripTime=function(){return this.roundtripProfiler.getTime()-this.getServerTime()};this.getResponseProcessingTime=function(){var a=0;for(var b in this.responseProfilers){a=a+this.responseProfilers[b].getTime()}return a};this.getTotalTime=function(){return this.getServerTime()+this.getRoundTripTime()+this.getResponseProcessingTime()};this.hasFinished=function(){var a=true;for(var c in this.responseProfilers){var b=this.responseProfilers[c];if(!b.hasFinished()){a=false;break}}return a};this.logProfilingTimings=function(b){if(!GrahamTechnology.util.AJAXProperties.enableRequestProfiler){return}GrahamTechnology.profile.RequestProfilerManager.clear();logger.logRPV("Initiating....(Unaccounted Client time lost between this and the next log message indicates thread activity by third party libraries. The next log message is triggered with an approximately "+GrahamTechnology.profile.delayTimeout+" milisecond delay.If first party threads are still active by this time, attempts will be made every second thereafter). - "+this.myName(),"info","RequestProfiler.logProfilingTimings");GrahamTechnology.profile.loggingCounter++;var a=this;setTimeout(function(){a._logEventsWithTimeout(b)},GrahamTechnology.profile.delayTimeout)};this._logEventsWithTimeout=function(b){if(this.hasFinished()){this._logEvents(b)}else{logger.logRPV("Not ready for this._logEvents","info","RequestProfiler._logEventsWithTimeout");var a=this;setTimeout(function(){a._logEventsWithTimeout(b)},GrahamTechnology.profile.eventTimeout)}};this._logEvents=function(c){var b=c.code;var a=c.transportables;this.data={};if(b==GrahamTechnology.grasp.TransportType.COMMAND_Transportable){this.data.type="command";this._logCommands(a)}else{this.data.type="event";this._logClientEvents(a)}this._logTimings();GrahamTechnology.profile.RequestProfilerLogger.addData(this.data);GrahamTechnology.profile.loggingCounter--};this.storeComponentIdsToMap=function(e){var d=e.code;var c=e.transportables;if(d==GrahamTechnology.grasp.TransportType.CLIENT_EVENT_Transportable){for(var b=0;b<c.length;b++){var f=c[b].parentID;var g=c[b].objectID;var a=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(g,f);this.componentIdMap[g+"-"+f]=a}}};this._logClientEvents=function(d){var g="Events posted -> ";for(var c=0;c<d.length;c++){if(d[c].transportCode==GrahamTechnology.grasp.TransportType.CLIENT_EVENT_Transportable){var b=d[c].eventType;var e=d[c].parentID;var f=d[c].objectID;var a=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(f,e);if(!a){a=this.componentIdMap[f+"-"+e]}g+="| Component: '"+a+"', Form: '"+e+"'";g+=" posted event '"+GrahamTechnology.grasp.EvtType.eventNames[b]+"'";if(c==0){this.data.componentID=a;this.data.eventType=b}else{this.data.componentID+=" - "+a;this.data.eventType+=" -  "+b}}else{g=g+"Unknown command registered with transportCode : "+d[c].transportCode}}logger.logRP(g,"info","RequestProfiler.logClientEvents()");this.componentIdMap={}};this._logCommands=function(a){var d="Commands posted -> ";for(var b=0;b<a.length;b++){var c=a[b].commandID;d=d+"| Command: '"+c+"' posted";if(b==0){this.data.command=c}else{this.data.command+=" - "+c}}logger.logRP(d,"info","RequestProfiler.logCommands()")};this._logTimings=function(){this.data.totalTime=this.getTotalTime();this.data.serverTime=this.getServerTime();this.data.roundTripTime=this.getRoundTripTime();this.data.responseProcessingTime=this.getResponseProcessingTime();logger.logRP("TotalTime: "+this.getTotalTime()+" ,ServerTime: "+this.getServerTime()+" ,RoundtripTime: "+this.getRoundTripTime()+" ,ClientTime: "+this.getResponseProcessingTime()+" - '"+this.myName()+"' - InteractionID: "+this.getInteractionID(),"info","RequestProfiler.logTimings()");var a=GrahamTechnology.DOM.getElementById("pagerendertime");if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&a.innerHTML===""){a.innerHTML="Page Rendering: TotalTime: "+this.getTotalTime()+"ms ,ServerTime: "+this.getServerTime()+"ms ,RoundtripTime: "+this.getRoundTripTime()+"ms ,ClientTime: "+this.getResponseProcessingTime()+"ms"}}};GrahamTechnology.profile.StopWatch=function(a){this.id=a;this.startTime=0;this.stopTime=0;this.timeoutWaste=0;this.description="";this.myName=function(){return"ResPro_"+a+": "+this.description};this.setDescription=function(b){this.description=b};this.start=function(){this.startTime=new Date()};this.stop=function(){this.stopTime=new Date()};this.getTimeoutWaste=function(){return this.timeoutWaste};this.getProcessingTime=function(){return(this.stopTime-this.startTime)};this.getTime=function(){return this.getProcessingTime()+this.getTimeoutWaste()};this.setTimeoutWaste=function(b){this.timeoutWaste=b};this.hasFinished=function(){return(this.stopTime!=0)||(this.startTime==0)}};GrahamTechnology.profile.RequestProfilerLogger={logs:new Array(),printMessagesIndex:0,logWindow:null,MAX_LOG_SIZE:50,isEnabled:function(){return GrahamTechnology.util.AJAXProperties.enableRequestProfiler},getDocumentBase:function(){var a=document.getElementsByTagName("base");if(a&&a.length&&a[0].href){return a[0].href}return""},openLogWindow:function(){if(!GrahamTechnology.util.AJAXProperties.enableRequestProfiler){return}GrahamTechnology.profile.delayTimeout=0;GrahamTechnology.profile.eventTimeout=0;this.logWindow=window.open(this.getDocumentBase()+"/webclient/html/profilerlog.html","TestResult","width=770,height=800,top=0,left=0,status=yes,scrollbars=yes,resizable=yes");return this.logWindow},addMessage:function(a,b,d){var c={type:a,message:b,timestamp:d};this.addData(c)},addData:function(a){this.logs.push(a);if(this.logs.length>this.MAX_LOG_SIZE){this.logs.shift()}this.printMessages()},clearLog:function(){this.logs=new Array();this.printMessagesIndex=0},printMessages:function(){if(!this.logWindow||this.logWindow.closed||!this.logWindow.append){return}while(this.printMessagesIndex<this.logs.length){var c=new Array();var b=this.logs[this.printMessagesIndex];switch(b.type){case ("event"):c.push(b.componentID);c.push(b.eventType);c.push(b.serverTime);c.push(b.roundTripTime);c.push(b.responseProcessingTime);c.push(b.totalTime);break;case ("command"):c.push(b.command);c.push("");c.push(b.serverTime);c.push(b.roundTripTime);c.push(b.responseProcessingTime);c.push(b.totalTime);break;case ("thread"):c.push(b.description);c.push("");c.push(b.timeoutWaste);c.push("");c.push(b.processingTime);c.push(b.totalTime);break;case ("seleniumAction"):case ("selenium"):case ("others"):case ("startMessage"):c.push(b.message);c.push(b.timestamp);break}var a=this.logWindow.append(c,b.type);this.printMessagesIndex++}this.clearLog()}};GrahamTechnology.ui.PaneConstants={HORIZONTAL:0,VERTICAL:1,TOP_LEVEL:0,UNASSIGNED:-1,TOP:0,RIGHT:1,LEFT:3,BOTTOM:2,FIRST_SIDE:0,LAST_SIDE:3,STRUTTYPE_FIXED:0,STRUTTYPE_NATURAL:1,SPRING_YES:0,SPRING_NO:1,STARTEDGE_TOP:0,STARTEDGE_BOTTOM:1,STARTEDGE_LEFT:2,STARTEDGE_RIGHT:3,FINISHEDGE_TOP:0,FINISHEDGE_BOTTOM:1,FINISHEDGE_LEFT:2,FINISHEDGE_RIGHT:3,SHARED_YES:0,SHARED_NO:1,OWNER_1:0,OWNER_2:1,calculateSide:function(a){switch(a){case this.STARTEDGE_TOP:return this.TOP;case this.STARTEDGE_BOTTOM:return this.BOTTOM;case this.STARTEDGE_LEFT:return this.LEFT;case this.STARTEDGE_RIGHT:return this.RIGHT;default:return this.BOTTOM}},getOppositeSide:function(a){switch(a){case this.TOP:return this.BOTTOM;case this.BOTTOM:return this.TOP;case this.LEFT:return this.RIGHT;case this.RIGHT:return this.LEFT}return -1},SCROLL_WIDTH:-1,getScrollerWidth:function(){if(this.SCROLL_WIDTH==-1){var d=null;var c=null;var a=0;var b=0;d=document.createElement("div");d.style.position="absolute";d.style.top="100px";d.style.left="100px";d.style.width="200px";d.style.height="150px";c=document.createElement("div");c.style.width="100%";c.style.height="200px";d.appendChild(c);document.body.appendChild(d);d.style.overflow="hidden";a=c.offsetWidth;d.style.overflow="scroll";b=c.offsetWidth;if(a==b){b=d.clientWidth}document.body.removeChild(document.body.lastChild);this.SCROLL_WIDTH=a-b}return this.SCROLL_WIDTH}};GrahamTechnology.ui.Pane=function(f,b,a,e,g,c,h,d){this.parentPaneID=f;this.paneID=b;this.formID=b.substring(3,this.paneID.indexOf("_"));this.siblingID=0;this.x=0;this.y=0;this.width=0;this.height=0;this.initialWidth=0;this.initialHeight=0;this.isVerticalChild=a;this.prevCursor=-1;this.splitter=null;this.minWidth=e;this.minHeight=g;this.enforceMinWidth=c;this.enforceMinHeight=h;this.heightSpan=0;this.widthSpan=0;this.resizable=d;this.noOfTriesToResize=0;this.tempChains;this.manualResize=null;this.isCollapse=function(){return amount=this.isVertical()?this.height<=this.heightSpan:this.width<=this.widthSpan};this.getStatus=function(){if(this.isCollapse()){return"collapse"}else{if(GrahamTechnology.ui.Form.allPanes[this.siblingID]&&GrahamTechnology.ui.Form.allPanes[this.siblingID].isCollapse()){return"expand"}else{return"normal"}}};this.isVertical=function(){if(!this.parentPaneID){return false}return GrahamTechnology.ui.Form.allPanes[this.parentPaneID].isVerticalChild};this.isManualResize=function(){if(!this.parentPaneID){return false}return GrahamTechnology.ui.Form.allPanes[this.parentPaneID].manualResize==this.paneID||GrahamTechnology.ui.Form.allPanes[this.parentPaneID].manualResize==this.siblingID};this.getParentHeight=function(){if(!this.parentPaneID){return -1}return GrahamTechnology.ui.Form.allPanes[this.parentPaneID].height};this.getParentWidth=function(){if(!this.parentPaneID){return -1}return GrahamTechnology.ui.Form.allPanes[this.parentPaneID].width};this.setManualResize=function(j){if(this.parentPaneID){GrahamTechnology.ui.Form.allPanes[this.parentPaneID].manualResize=j}};this.getActualHeight=function(){return this.height-this.heightSpan};this.getActualWidth=function(){return this.width-this.widthSpan};this.isFixedWidth=function(){return(!this.isManualResize()&&!this.resizable&&!this.isVertical()&&!(this.width>this.getParentWidth())&&(this.width==this.initialWidth))};this.reduceWidth=function(o,p){if(this.isFixedWidth()){o=0}if(o>this.getActualWidth()){o=this.getActualWidth()}this.width-=o;var m=YAHOO.util.Dom.get(this.paneID);if(!m){logger.log("Unable to find pane "+this.paneID+".","info","GrahamTechnology.ui.Pane.reduceWidth");return o}m.style.width=this.width+"px";if(GrahamTechnology.Base.isUndefinedOrNull(p)){this.x+=o}else{this.x=p}if(this.getAncestorPanes(this.formID).length>0&&this.getStatus()=="collapse"&&this.width==5&&this.siblingID==0){m.style.left=this.x+5+"px"}else{m.style.left=this.x+"px"}if(o==0){return o}var q=GrahamTechnology.ui.Form.getChildPanes(this.paneID);if(this.isVerticalChild){for(var n in q){var j=q[n];j.reduceWidth(j.width-this.width,0)}}else{var k=0;var l=0;var u=0;for(var n in q){var j=q[n];if(!j.isFixedWidth()){k++}if(j.minWidth>0&&j.minWidth>j.width){j.width=j.minWidth}else{if(!j.isFixedWidth()){j.adjustWidth=true;u+=j.getActualWidth()}}l+=j.width}var t=l-this.width;var r=0;if(l==0){for(var n in q){var j=q[n];var s=(1/k);j.reduceWidth(Math.round(t*s),r);r+=j.width}}else{for(var n in q){var j=q[n];if(j.adjustWidth){if(u==0){if(j.siblingID!="0"&&k>1){var s=(j.initialWidth-j.widthSpan)/this.width}else{if(j.siblingID=="0"&&k>1&&s>0){var s=1-s}else{var s=(1/k)}}}else{var s=j.getActualWidth()/u}j.reduceWidth(Math.round(t*s),r)}else{j.reduceWidth(0,r);j.updateScrollableDiv();this.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.VERTICAL,this.getContentHeight())}r+=j.width}}}this.updateScrollableDiv();this.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.HORIZONTAL,this.getContentWidth());m=null;return o};this.setWidth=function(n,p){var s=n-this.offsetWidth;this.offsetWidth=n;var m=YAHOO.util.Dom.get(this.paneID);if(!m){logger.log("Unable to find pane "+this.paneID+".","info","GrahamTechnology.ui.Pane.reduceWidth");return s}m.style.width=this.offsetWidth+"px";if(s==0){return s}var q=GrahamTechnology.ui.Form.getChildPanes(this.paneID);if(this.isVerticalChild){for(var o in q){var j=q[o];j.reduceWidth(j.offsetWidth-this.offsetWidth,0)}}else{var k=0;var l=0;var v=0;for(var o in q){k++;l+=q[o].offsetWidth;v+=q[o].getActualWidth()}var u=l-this.offsetWidth;var r=0;for(var o in q){var t=(v==0)?(1/k):(q[o].getActualWidth()/v);q[o].reduceWidth(Math.round(u*t),r);r+=q[o].width}}this.updateScrollableDiv();this.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.HORIZONTAL,this.getContenOffsetWidth());m=null;return s};this.setHeight=function(o,p){var t=o-this.offsetHeight;this.offsetHeight=o;var m=YAHOO.util.Dom.get(this.paneID);if(!m){logger.log("Unable to find pane "+this.paneID+".","info","GrahamTechnology.ui.Pane.reduceHeight");return t}m.style.height=this.offsetHeight+"px";if(t==0){return t}var r=GrahamTechnology.ui.Form.getChildPanes(this.paneID);if(this.isVerticalChild){var l=0;var u=0;var q=0;for(var n in r){l++;u+=r[n].offsetHeight;q+=r[n].getActualHeight()}var j=u-this.offsetHeight;var s=0;for(var n in r){var v=(q==0)?(1/l):(r[n].getActualHeight()/q);r[n].reduceHeight(Math.round(j*v),s);s+=r[n].height}}else{for(var n in r){var k=r[n];k.reduceHeight(k.height-this.offsetHeight,0)}}this.updateScrollableDiv();this.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.VERTICAL,this.getContentOffsetHeight());m=null;return t};this.isFixedHeight=function(){return(!this.isManualResize()&&!this.resizable&&this.isVertical()&&!(this.height>this.getParentHeight())&&(this.height==this.initialHeight))};this.reduceHeight=function(o,p){if(this.isFixedHeight()){o=0}if(isNaN(o)||o==Infinity||o==-Infinity){o=0}if(o>this.getActualHeight()){o=this.getActualHeight()}this.height-=o;var m=YAHOO.util.Dom.get(this.paneID);if(!m){logger.log("Unable to find pane "+this.paneID+".","info","GrahamTechnology.ui.Pane.reduceHeight");return o}if(this.height>=0){m.style.height=this.height+"px"}if(GrahamTechnology.Base.isUndefinedOrNull(p)){this.y+=o}else{if(!isNaN(p)){this.y=p}}m.style.top=this.y+"px";if(o==0){return o}var r=GrahamTechnology.ui.Form.getChildPanes(this.paneID);if(this.isVerticalChild){var l=0;var t=0;var q=0;for(var n in r){var k=r[n];if(!k.isFixedHeight()){l++}if(k.minHeight>0&&k.minHeight>k.height){k.height=k.minHeight}else{if(!k.isFixedHeight()){k.adjustHeight=true;q+=k.getActualHeight()}}t+=k.height}var j=t-this.height;var s=0;if(t==0){for(var n in r){var k=r[n];var u=(1/l);k.reduceHeight(Math.round(j*u),s);s+=k.height}}else{for(var n in r){var k=r[n];if(k.adjustHeight){if(q==0){var u=(1/l)}else{var u=k.getActualHeight()/q}k.reduceHeight(Math.round(j*u),s)}else{k.reduceHeight(0,s);k.updateScrollableDiv();k.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.HORIZONTAL,k.getContentWidth())}s+=k.height}}}else{for(var n in r){var k=r[n];k.reduceHeight(k.height-this.height,0)}}this.updateScrollableDiv();this.layoutContainer.layoutChains(GrahamTechnology.ui.PaneConstants.VERTICAL,this.getContentHeight());m=null;return o};this.reduceAdjustHeight=function(m){var k=GrahamTechnology.ui.Form.allPanes[this.siblingID].reduceHeight(m);this.reduceHeight(0-k,this.y);var l=YAHOO.util.Dom.get(this.paneID);var j=YAHOO.util.Dom.get(this.siblingID);GrahamTechnology.ui.invokeTraverseDOM(l);GrahamTechnology.ui.SnSResize(j);l=null;j=null};this.reduceAdjustWidth=function(k){var j=GrahamTechnology.ui.Form.allPanes[this.siblingID].reduceWidth(k);this.reduceWidth(0-j,this.x)};this.getCurrentCursor=function(){if(this.isVertical()){var j=GrahamTechnology.ui.Form.allPanes[this.siblingID].getActualHeight();return(this.getActualHeight()>0&&j>0)?this.getActualHeight():0}else{var k=GrahamTechnology.ui.Form.allPanes[this.siblingID].getActualWidth();return(this.getActualWidth()>0&&k>0)?this.getActualWidth():0}};this.closeClick=function(l){this.setManualResize(this.siblingID);var j=this.getAncestorPanes(parseInt(this.formID));j.sort();if(this.isVertical()){if(this.getStatus()=="expand"&&l.type=="collapse"){if(this.prevCursor==-1){var m=0-this.getActualHeight()/2;this.reduceAdjustHeight(m)}else{var m=this.prevCursor-(this.y+this.getActualHeight());this.reduceAdjustHeight(m);this.prevCursor=-1}}else{if(this.getStatus()=="collapse"&&l.type=="expand"){if(this.prevCursor==-1){var m=GrahamTechnology.ui.Form.allPanes[this.siblingID].getActualHeight()/2;this.reduceAdjustHeight(m)}else{var m=this.prevCursor-(this.y+this.getActualHeight());this.reduceAdjustHeight(m);this.prevCursor=-1}}else{if(this.getStatus()=="normal"){this.prevCursor=this.y+this.getActualHeight();if(l.type=="collapse"){this.reduceAdjustHeight(0-this.getActualHeight())}else{if(l.type=="expand"){this.reduceAdjustHeight(GrahamTechnology.ui.Form.allPanes[this.siblingID].getActualHeight())}}}}}}else{if(this.getStatus()=="expand"&&l.type=="collapse"){if(this.prevCursor==-1){var m=0-this.getActualWidth()/2;this.reduceAdjustWidth(m)}else{var m=this.prevCursor-(this.y+this.getActualWidth());this.reduceAdjustWidth(m);this.prevCursor=-1}}else{if(this.getStatus()=="collapse"&&l.type=="expand"){if(this.prevCursor==-1){var m=this.initialWidth-this.widthSpan;this.reduceAdjustWidth(m)}else{var m=this.prevCursor-(this.y+this.getActualWidth());this.reduceAdjustWidth(m);this.prevCursor=-1}}else{if(this.getStatus()=="normal"){this.prevCursor=this.y+this.getActualWidth();if(l.type=="collapse"){this.reduceAdjustWidth(0-this.getActualWidth())}else{if(l.type=="expand"){if(j.length>0&&GrahamTechnology.ui.Form.allPanes[j[0]].width>=this.getParentWidth()){GrahamTechnology.ui.Form.allPanes[this.siblingID].widthSpan=this.widthSpan}this.reduceAdjustWidth(GrahamTechnology.ui.Form.allPanes[this.siblingID].getActualWidth())}}}}}}var k=YAHOO.util.Dom.get(this.paneID);GrahamTechnology.ui.SnSResize(k);this.setManualResize(null);k=null};this.validateMaxDimension=function(m){var j=GrahamTechnology.ui.Form.allPanes[this.siblingID];if(m.evt=="width"){var l=this.width+j.getActualWidth();if(j.enforceMinWidth){l=l-(j.minWidth-j.widthSpan)}this.splitter.set("maxWidth",l)}else{if(m.evt=="height"){var k=this.height+j.getActualHeight();if(j.enforceMinHeight){k=k-(j.minHeight-j.heightSpan)}this.splitter.set("maxHeight",k)}}};this.onResize=function(k){this.setManualResize(this.siblingID);if(this.isVertical()){this.reduceAdjustHeight(k.height-this.height)}else{this.reduceAdjustWidth(k.width-this.width)}var j=YAHOO.util.Dom.get(this.paneID);GrahamTechnology.ui.SnSResize(j);this.prevCursor=-1;this.setManualResize(null);j=null};this.createPaneSplitter=function(m){var l=m?["b"]:["r"];var k=5;var j=5;if(this.enforceMinWidth){k=Math.max(5,this.minWidth)}if(this.enforceMinHeight){j=Math.max(5,this.minHeight)}this.splitter=new GrahamTechnology.ui.Splitter(this.paneID,{handles:l,minWidth:k,minHeight:j,proxy:true});this.splitter.on("resize",this.onResize,this,true);this.splitter.on("closeClick",this.closeClick,this,true);this.splitter.on("validateMaxDimension",this.validateMaxDimension,this,true)};this.initialize=function(){var j=YAHOO.util.Dom.get(this.paneID);this.width=parseInt(j.style.width);this.initialWidth=parseInt(j.style.width);this.offsetWidth=parseInt(j.offsetWidth);this.offsetHeight=parseInt(j.offsetHeight);this.height=parseInt(j.style.height);this.initialHeight=parseInt(j.style.height);this.x=parseInt(j.style.left);this.y=parseInt(j.style.top);if((this.minWidth>0&&!this.enforceMinWidth)||(this.minHeight>0&&!this.enforceMinHeight)){this.createScrollableDiv()}this.layoutContainer=new GrahamTechnology.ui.LayoutContainer(this.formID,this.offsetWidth,this.height);j=null};this.destroy=function(){if(this.splitter){this.splitter.destroy();this.splitter=null}};this.fixScrollableDiv=function(j,n){var m=GrahamTechnology.ui.Form.getChildPanes(this.paneID);if(this.splitter){if(this.isVertical()){j=5}else{n=5}}var l=0;for(var k in m){var o=m[k];if(l!=0){if(this.isVerticalChild){l.fixScrollableDiv(0,n)}else{l.fixScrollableDiv(j,0)}}l=o}this.heightSpan=j;this.widthSpan=n;if(l==0){if(this.minWidth>this.width||this.minHeight>this.height){this.updateScrollableDiv()}}else{l.fixScrollableDiv(j,n)}};this.scroll=GrahamTechnology.ui.PaneConstants.getScrollerWidth();this.getContentWidth=function(){if(this.minWidth>this.width||(this.minHeight>this.height&&this.minWidth>this.width-this.scroll)){return this.minWidth}else{if(this.minHeight>this.height){return this.width-this.scroll}else{return this.width}}};this.getContenOffsetWidth=function(){if(this.minWidth>this.width||(this.minHeight>this.height&&this.minWidth>this.offsetWidth-this.scroll)){return this.minWidth}else{if(this.minHeight>this.height){return this.offsetWidth-this.scroll}else{return this.offsetWidth}}};this.getContentOffsetHeight=function(){if(this.minHeight>this.height||(this.minWidth>this.width&&this.minHeight>this.offsetHeight-this.scroll)){return this.minHeight}else{if(this.minWidth>this.width){return this.offsetHeight-this.scroll}else{return this.offsetHeight}}};this.getContentHeight=function(){if(this.minHeight>this.height||(this.minWidth>this.width&&this.minHeight>this.height-this.scroll)){return this.minHeight}else{if(this.minWidth>this.width){return this.height-this.scroll}else{return this.height}}};this.createScrollableDiv=function(){var o=YAHOO.util.Dom.get(this.paneID+"_1");if(!o){var m=YAHOO.util.Dom.get(this.paneID);var p=m.style.position;var q=m.style.top;var l=m.style.left;var k=m.style.width;var r=m.style.height;var j=GrahamTechnology.DOM.Element.getAttribute(m,"class");o=GrahamTechnology.DOM.createElement("div",{style:{position:"absolute",overflow:"hidden",width:k,height:r}});o.id=this.paneID+"_1";var n=GrahamTechnology.DOM.createElement("div",{"class":"",style:{top:"0px",left:"0px",position:"absolute",overflow:"hidden"}});n.id=this.paneID+"_2";$("#"+this.paneID+" .GTPositional").wrapAll(n);$("#"+n.id).wrapAll(o);GrahamTechnology.DOM.Element.updateAttributes(m,{style:{position:p,overflow:"hidden",width:k,height:r,top:q,left:l}});n=null}o=null};this.updateScrollableDiv=function(){var k=YAHOO.util.Dom.get(this.paneID+"_1");if(k){var j=YAHOO.util.Dom.get(this.paneID+"_2");k.style.width=this.getActualWidth()+"px";k.style.height=this.getActualHeight()+"px";j.style.width=(this.getContentWidth()-this.widthSpan)+"px";j.style.height=(this.getContentHeight()-this.heightSpan)+"px";j=null}k=null};this.setTempChains=function(j){this.tempChains=j};this.getTempChains=function(){return this.tempChains};this.removeTempChains=function(){this.tempChains=null};this.buildAllChains=function(){this.layoutContainer.buildAllChains(GrahamTechnology.ui.PaneConstants.HORIZONTAL);this.layoutContainer.buildAllChains(GrahamTechnology.ui.PaneConstants.VERTICAL)};this.createLayoutChains=function(o){for(var n=0;n<o.length;n++){var t=o[n];var l=o[n][0];for(var m=1;m<t.length;m++){var q=t[m];var s={strutType:q[0],spring:q[1],fixed:q[2],natural:q[3],shared:q[8],startId:q[4],startEdge:q[5],finishId:q[6],finishEdge:q[7],owner:q[9]};var r=new GrahamTechnology.ui.LayoutLink(s,this.layoutContainer);var k=r.end1.terminal;if(k!=null){if(r.isInternal()){k.setInternalLink(l,r)}else{k.setExternalLink(r.end1.side,r);if(r.isShared){var p=r.end2.terminal;if(p.isComponent()){p.setExternalLink(r.end2.side,r)}}}}}}};this.getAncestorPanes=function(m){var l=[];var k=0;for(i=0;i<GrahamTechnology.ui.Form.allPaneIDsArray.length;i++){var j=GrahamTechnology.ui.Form.allPaneIDsArray[i];if(j.indexOf(m-2)>-1){l[k]=j;k++}}return l}};GrahamTechnology.ui.LayoutComponent=function(a){this.component=a;this.origin=new GrahamTechnology.ui.Point(a.left(),a.top());this.externalLinks=new Array(null,null,null,null);this.internalLinks=new Array(null,null);this.chain=new Array(null,null);this.updateComponentLayout=function(b){if(b==GrahamTechnology.ui.PaneConstants.HORIZONTAL){this.component.setLeft(this.origin.x);this.component.setWidth(this.getWidth())}else{if(b==GrahamTechnology.ui.PaneConstants.VERTICAL){this.component.setTop(this.origin.y);this.component.setHeight(this.getHeight())}}this.component.updateInnerLayout()};this.setInternalLink=function(b,c){this.internalLinks[b]=c};this.setExternalLink=function(b,c){this.externalLinks[b]=c};this.setChain=function(c,b){this.chain[c]=b};this.getFormID=function(){return this.component.FormID};this.getID=function(){return this.component.id};this.getNaturalSize=function(b){var c=null;if(b==GrahamTechnology.ui.PaneConstants.HORIZONTAL&&!GrahamTechnology.Base.isUndefinedOrNull(this.component.naturalWidth)){c=this.component.naturalWidth}else{if(b==GrahamTechnology.ui.PaneConstants.VERTICAL&&!GrahamTechnology.Base.isUndefinedOrNull(this.component.naturalHeight)){c=this.component.naturalHeight}}return c};this.getSpringCount=function(b){var c=0;if(b==GrahamTechnology.ui.PaneConstants.HORIZONTAL){if(this.internalLinks[GrahamTechnology.ui.PaneConstants.HORIZONTAL].hasSpring){c++}if(this.externalLinks[GrahamTechnology.ui.PaneConstants.RIGHT].hasSpring){c++}}else{if(this.internalLinks[GrahamTechnology.ui.PaneConstants.VERTICAL].hasSpring){c++}if(this.externalLinks[GrahamTechnology.ui.PaneConstants.BOTTOM].hasSpring){c++}}return c};this.getTotalLength=function(b){var c=0;if(b==GrahamTechnology.ui.PaneConstants.HORIZONTAL){c+=this.internalLinks[GrahamTechnology.ui.PaneConstants.HORIZONTAL].getLength();c+=this.externalLinks[GrahamTechnology.ui.PaneConstants.RIGHT].getLength()}else{c+=this.internalLinks[GrahamTechnology.ui.PaneConstants.VERTICAL].getLength();c+=this.externalLinks[GrahamTechnology.ui.PaneConstants.BOTTOM].getLength()}return c};this.getTotalFixedLength=function(b){var c=0;if(b==GrahamTechnology.ui.PaneConstants.HORIZONTAL){c+=this.internalLinks[GrahamTechnology.ui.PaneConstants.HORIZONTAL].getFixedLength();c+=this.externalLinks[GrahamTechnology.ui.PaneConstants.RIGHT].getFixedLength()}else{c+=this.internalLinks[GrahamTechnology.ui.PaneConstants.VERTICAL].getFixedLength();c+=this.externalLinks[GrahamTechnology.ui.PaneConstants.BOTTOM].getFixedLength()}return c};this.setSpringLength=function(c,b){if(c==GrahamTechnology.ui.PaneConstants.HORIZONTAL){this.internalLinks[GrahamTechnology.ui.PaneConstants.HORIZONTAL].setSpringLength(b);this.externalLinks[GrahamTechnology.ui.PaneConstants.RIGHT].setSpringLength(b)}else{this.internalLinks[GrahamTechnology.ui.PaneConstants.VERTICAL].setSpringLength(b);this.externalLinks[GrahamTechnology.ui.PaneConstants.BOTTOM].setSpringLength(b)}};this.getHeight=function(){return this.internalLinks[GrahamTechnology.ui.PaneConstants.VERTICAL].getLength()};this.getWidth=function(){return this.internalLinks[GrahamTechnology.ui.PaneConstants.HORIZONTAL].getLength()};this.setBoundary=function(c,b){if(c){this.origin.y=b}else{this.origin.x=b}};this.getBounds=function(){return new GrahamTechnology.ui.Rectangle(this.origin.x,this.origin.y,this.getWidth(),this.getHeight())};this.isComponent=function(){return true}};GrahamTechnology.ui.LayoutLink=function(f,a){this.end1=null;this.end2=null;this.fixedLength=0;this.hasSpring=false;this.isNatural=false;this.isShared=false;this.springLength=0;this.setSpringLength=function(h){if(this.hasSpring){this.springLength=h}};this.isInternal=function(){if(this.end1.onBoundary){return false}if(this.end2.onBoundary){return false}return(this.end1.terminal==this.end2.terminal)};this.getLength=function(){var h=this.getFixedLength();if(this.hasSpring){h+=this.springLength}return h};this.getFixedLength=function(){if(this.isNatural&&this.end1!=null){var h=this.end1.terminal.getNaturalSize(this.getAxis());return h==null?this.naturalLength:h}else{return this.fixedLength}};this.getAxis=function(){var h=this.end1.side;if((h==GrahamTechnology.ui.PaneConstants.LEFT)||(h==GrahamTechnology.ui.PaneConstants.RIGHT)){return GrahamTechnology.ui.PaneConstants.HORIZONTAL}return GrahamTechnology.ui.PaneConstants.VERTICAL};this.getEndOpposite=function(h){if(this.end1.terminal==h){return this.end2}return this.end1};this.hasSpring=f.spring==GrahamTechnology.ui.PaneConstants.SPRING_YES;this.isNatural=f.strutType==GrahamTechnology.ui.PaneConstants.STRUTTYPE_NATURAL;this.isShared=f.shared==GrahamTechnology.ui.PaneConstants.SHARED_YES;this.fixedLength=parseInt(f.fixed);this.naturalLength=f.natural;if(isNaN(this.fixedLength)){fixedLength=0}var g=null;var e=null;var d=false;var c=0;g=f.startId;d=g=="";e=d?a:a.getComponentForName(g);c=GrahamTechnology.ui.PaneConstants.calculateSide(f.startEdge);this.end1=new GrahamTechnology.ui.EndPoint(e,c,d);g=f.finishId;d=g=="";e=d?a:a.getComponentForName(g);c=GrahamTechnology.ui.PaneConstants.calculateSide(f.finishEdge);this.end2=new GrahamTechnology.ui.EndPoint(e,c,d);if(f.owner==GrahamTechnology.ui.PaneConstants.OWNER_2){var b=this.end1;this.end1=this.end2;this.end2=b}};GrahamTechnology.ui.EndPoint=function(c,b,a){this.terminal=c;this.side=b;this.onBoundary=a;this.getLocation=function(){if(this.terminal==null){return null}var d=this.terminal.getBounds();switch(b){case GrahamTechnology.ui.PaneConstants.TOP:return new GrahamTechnology.ui.Point(d.x+(d.width/2),d.y);case GrahamTechnology.ui.PaneConstants.BOTTOM:return new GrahamTechnology.ui.Point(d.x+(d.width/2),d.y+d.height);case GrahamTechnology.ui.PaneConstants.RIGHT:return new GrahamTechnology.ui.Point(d.x+d.width,d.y+(d.height/2));case GrahamTechnology.ui.PaneConstants.LEFT:return new GrahamTechnology.ui.Point(d.x,d.y+(d.height/2))}return null}};GrahamTechnology.ui.Point=function(a,b){this.x=a;this.y=b};GrahamTechnology.ui.Rectangle=function(b,d,c,a){this.x=b;this.y=d;this.width=c;this.height=a};GrahamTechnology.ui.LayoutContainer=function(c,b,a){this.formID=c;this.layoutComponents={};this.axisChains=new Array(null,null);this.width=b;this.height=a;this.isComponent=function(){return false};this.updateComponentsLayout=function(e){for(var d in this.layoutComponents){var f=this.layoutComponents[d];f.updateComponentLayout(e)}};this.getComponentForName=function(d){if(!this.layoutComponents[d]){var e=GrahamTechnology.ui.Form.getRegisteredComponent(d);if(!e){e={left:function(){return 0},top:function(){return 0},setLeft:function(){},setTop:function(){},setHeight:function(){},setWidth:function(){},updateInnerLayout:function(){},FormID:this.formID,id:d}}var f=new GrahamTechnology.ui.LayoutComponent(e);this.layoutComponents[d]=f}return this.layoutComponents[d]};this.layoutChains=function(g,e){if(g==GrahamTechnology.ui.PaneConstants.VERTICAL){if(this.height==e){return}else{this.height=e}}else{if(this.width==e){return}else{this.width=e}}var n=0;var k=this.axisChains[g];if(k==null){return}var j=k[GrahamTechnology.ui.PaneConstants.TOP_LEVEL];if(j!=null){for(var h in j){var m=j[h];var l=m.getTotalFixedLength();if(l>n){n=l}m.layout(0,e)}}for(var d=1;d<k.length;d++){j=k[d];for(var h in j){var m=j[h];m.layoutWithinParent(e);var f=m.getFirst();var p=0;if(g==GrahamTechnology.ui.PaneConstants.HORIZONTAL){p=f.origin.x}if(g==GrahamTechnology.ui.PaneConstants.VERTICAL){p=f.origin.y}var o=m.getTotalLengthMinusFirstLinkLength();o+=p;if(o>n){n=o}}}this.updateComponentsLayout(g)};this.buildAllChains=function(h){var g=(h==GrahamTechnology.ui.PaneConstants.VERTICAL)?GrahamTechnology.ui.PaneConstants.TOP:GrahamTechnology.ui.PaneConstants.LEFT;var l=GrahamTechnology.ui.PaneConstants.getOppositeSide(g);this.axisChains[h]=null;var e=this.getAllComponentsAtStartOfChains(g);var k=new Array();for(var d in e){var f=e[d];var j=new GrahamTechnology.ui.LayoutChain(h,this);this.buildChain(f,j,g,l);k.push(j)}this.assignLevelsToChains(k,h)};this.assignLevelsToChains=function(q,h){var s=(h==GrahamTechnology.ui.PaneConstants.HORIZONTAL)?GrahamTechnology.ui.PaneConstants.LEFT:GrahamTechnology.ui.PaneConstants.TOP;var n=GrahamTechnology.ui.PaneConstants.getOppositeSide(s);var p=0;for(var l=0;l<q.length;l++){var d=q[l];if(d.level==GrahamTechnology.ui.PaneConstants.TOP_LEVEL){var k=this.getChainsForLevelAndAxis(GrahamTechnology.ui.PaneConstants.TOP_LEVEL,h);k[d.getID()]=d}}do{p=0;for(var l=0;l<q.length;l++){var d=q[l];if(d.level==GrahamTechnology.ui.PaneConstants.UNASSIGNED){var f=null;var g=null;var m=d.getFirst();var r=m.externalLinks[s];var j=r.getEndOpposite(m);if(!j.onBoundary){var o=j.terminal;f=o.chain[h];if((f==null)||(f.level==GrahamTechnology.ui.PaneConstants.UNASSIGNED)){continue}}var t=d.getLast();var u=t.externalLinks[n];j=u.getEndOpposite(t);if(!j.onBoundary){var o=j.terminal;g=o.chain[h];if((g==null)||(g.level==GrahamTechnology.ui.PaneConstants.UNASSIGNED)){continue}}var e=GrahamTechnology.ui.PaneConstants.UNASSIGNED;if(f!=null){e=this.max(e,f.level)}if(g!=null){e=this.max(e,g.level)}e++;d.level=e;var k=this.getChainsForLevelAndAxis(e,h);k[d.getID()]=d;p++}}}while(p>0)};this.getChainsForLevelAndAxis=function(g,f){var d=this.axisChains[f];if(!d){d=new Array();this.axisChains[f]=d}for(var e=d.length;e<=g;e++){d.push({})}return d[g]};this.buildChain=function(d,f,e,k){f.add(d);var h=d.externalLinks[k];var j=h.getEndOpposite(d);if(j.onBoundary||(j.side==k)){f.finished();return}var g=j.terminal;var l=g.externalLinks[e];if(h!=l){f.finished();return}this.buildChain(g,f,e,k)};this.getAllComponentsAtStartOfChains=function(k){var e={};for(var g in this.layoutComponents){var m=this.layoutComponents[g];var l=m.externalLinks[k];if(!l){continue}var f=l.getEndOpposite(m);if(f.onBoundary){e[m.getID()]=m}else{var j=f.terminal;if(f.side==k){e[m.getID()]=m}else{var h=GrahamTechnology.ui.PaneConstants.getOppositeSide(k);if(j!=null){var d=j.externalLinks[h];if(l!=d){e[m.getID()]=m}}}}}return e};this.getBounds=function(){return GrahamTechnology.ui.Rectangle(0,0,this.width,this.height)};this.max=function(e,d){return e>d?e:d}};GrahamTechnology.ui.LayoutChain=function(a,b){this.isVertical=(a==GrahamTechnology.ui.PaneConstants.VERTICAL);this.components=new Array();this.level=GrahamTechnology.ui.PaneConstants.UNASSIGNED;this.chainID=null;this.parent=b;this.add=function(c){this.components.push(c);c.setChain(this.getAxis(),this)};this.layout=function(c,j){var d=j-c;var l=this.getSpringCount();if(l==0){return}var k=this.getTotalFixedLength();if(k>d){d=k}var g=parseInt(((d-k)/l),10);this.getFirstLink().setSpringLength(g);var f=this.getFirstLink().getLength()+c;for(var e=0;e<this.components.length;e++){var h=this.components[e];h.setSpringLength(this.getAxis(),g);if(this.isVertical){f=this.min(f,this.parent.height-h.getHeight())}else{f=this.min(f,this.parent.width-h.getWidth())}if(f<0){continue}h.setBoundary(this.isVertical,f);f+=h.getTotalLength(this.getAxis())}};this.layoutWithinParent=function(h){var k=0;var e=h;var j=this.getFirst();var f=this.getFirstLink().getEndOpposite(j);if(!f.onBoundary){var c=f.getLocation();k=this.isVertical?c.y:c.x}var g=this.getLast();var d=this.getLastLink().getEndOpposite(g);if(!d.onBoundary){var c=d.getLocation();e=this.isVertical?c.y:c.x}this.layout(k,e)};this.getSpringCount=function(){var d=0;for(var c=0;c<this.components.length;c++){var e=this.components[c];d+=e.getSpringCount(this.getAxis())}if(this.getFirstLink().hasSpring){d++}return d};this.getAxis=function(){return this.isVertical?GrahamTechnology.ui.PaneConstants.VERTICAL:GrahamTechnology.ui.PaneConstants.HORIZONTAL};this.finished=function(){var h=this.getFirst();var f=this.isVertical?GrahamTechnology.ui.PaneConstants.TOP:GrahamTechnology.ui.PaneConstants.LEFT;var c=h.externalLinks[f].getEndOpposite(h);if(c.onBoundary){var g=this.getLast();f=this.isVertical?GrahamTechnology.ui.PaneConstants.BOTTOM:GrahamTechnology.ui.PaneConstants.RIGHT;c=g.externalLinks[f].getEndOpposite(g);if(c.onBoundary){this.level=GrahamTechnology.ui.PaneConstants.TOP_LEVEL}}var d="";for(var e=0;e<this.components.length;e++){d+=this.components[e].getID()+"_"}d+=f+"_"+this.level;this.chainID=d};this.getTotalFixedLength=function(){var d=0;for(var c=0;c<this.components.length;c++){var e=this.components[c];d+=e.getTotalFixedLength(this.getAxis())}var f=this.getFirstLink();d+=f.fixedLength;return d};this.getTotalLengthMinusFirstLinkLength=function(){var d=0;var f=this.getFirst();var k=0;if(this.isVertical){k=f.origin.y}else{k=f.origin.x}var c=this.getLast();var h=0;if(this.isVertical){h=c.origin.y}else{h=c.origin.x}h+=c.internalLinks[this.getAxis()].getLength();if(this.getLastLink().getEndOpposite(c).onBoundary){d+=this.getLastLink().getFixedLength()}else{var e=this.getLastLink().getLength();if(e>0){var j=this.getLastLink().getEndOpposite(c);var g=0;if(this.isVertical){g=j.getLocation().y}else{g=j.getLocation().x}if(g>h){h=g}}}d=h-k;return d};this.getLastLink=function(){var c=this.isVertical?GrahamTechnology.ui.PaneConstants.BOTTOM:GrahamTechnology.ui.PaneConstants.RIGHT;return this.getLast().externalLinks[c]};this.getFirstLink=function(){var c=this.isVertical?GrahamTechnology.ui.PaneConstants.TOP:GrahamTechnology.ui.PaneConstants.LEFT;return this.getFirst().externalLinks[c]};this.getFirst=function(){return this.components[0]};this.getLast=function(){return this.components[this.components.length-1]};this.getID=function(){return this.chainID};this.min=function(d,c){return d<c?d:c}};GrahamTechnology.ui.Splitter=function(b,a){GrahamTechnology.ui.Splitter.prototype.constructor.call(this,b,a);this._proxyShadow=GrahamTechnology.DOM.createElement("div",{"class":"100HeightFix",style:{position:"absolute",visibility:"hidden","z-index":"-1",height:this.get("element").parentNode.clientHeight+"px",width:this.get("element").parentNode.clientWidth+"px"}});this._wrap.parentNode.appendChild(this._proxyShadow);GrahamTechnology.DOM.Element.addClass(this._proxy,"100HeightFix");this.showProxyShadow=function(){if(GrahamTechnology.util.RenderingEngines.isIE()){GrahamTechnology.DOM.Element.setStyles(this._proxyShadow,{visibility:"visible","z-index":"999","background-color":"#fff",opacity:"0",height:this.get("element").parentNode.clientHeight+"px",width:this.get("element").parentNode.clientWidth+"px"})}else{GrahamTechnology.DOM.Element.setStyles(this._proxyShadow,{visibility:"visible","z-index":"999",height:this.get("element").parentNode.clientHeight+"px",width:this.get("element").parentNode.clientWidth+"px"})}};this.hideProxyShadow=function(){GrahamTechnology.DOM.Element.setStyles(this._proxyShadow,{visibility:"hidden","z-index":"-1","background-color":"transparent",opacity:"1"})};this.on("startResize",this.showProxyShadow);this.on("endResize",this.hideProxyShadow);this.destroy=function(){this._destroyHandles();this.unsubscribeAll();this._proxyShadow.parentNode.removeChild(this._proxyShadow);this._proxyShadow=null;GrahamTechnology.ui.Splitter.prototype.destroy.call(this)}};GrahamTechnology.ui.Splitter.prototype=YAHOO.util.Resize.prototype;GrahamTechnology.ui.Splitter.prototype._createHandles=function(){this._handles={};this._dds={};this._cols={};this._exps={};var c=this.get("handles");for(var b=0;b<c.length;b++){this._handles[c[b]]=document.createElement("div");this._handles[c[b]].id=YAHOO.util.Dom.generateId(this._handles[c[b]]);this._handles[c[b]].className=this.CSS_HANDLE+" "+this.CSS_HANDLE+"-"+c[b];var a=document.createElement("div");a.className=this.CSS_HANDLE+"-inner-"+c[b];this._handles[c[b]].appendChild(a);this._cols[c[b]]=document.createElement("div");this._cols[c[b]].className=this.CSS_HANDLE+"-inner-"+c[b]+"-col";this._handles[c[b]].appendChild(this._cols[c[b]]);this._exps[c[b]]=document.createElement("div");this._exps[c[b]].className=this.CSS_HANDLE+"-inner-"+c[b]+"-exp";this._handles[c[b]].appendChild(this._exps[c[b]]);this._wrap.appendChild(this._handles[c[b]]);YAHOO.util.Event.on(this._handles[c[b]],"mouseover",this._handleMouseOver,this,true);YAHOO.util.Event.on(this._handles[c[b]],"mouseout",this._handleMouseOut,this,true);YAHOO.util.Event.on(this._cols[c[b]],"click",this._collapseHandle,this,true);YAHOO.util.Event.on(this._exps[c[b]],"click",this._expandHandle,this,true);this._dds[c[b]]=new YAHOO.util.DragDrop(this._handles[c[b]],this.get("id")+"-handle-"+c);this._dds[c[b]].setPadding(15,15,15,15);this._dds[c[b]].on("startDragEvent",this._handleStartDrag,this._dds[c[b]],this);this._dds[c[b]].on("mouseDownEvent",this._handleMouseDown,this._dds[c[b]],this);a=null}};GrahamTechnology.ui.Splitter.prototype._destroyHandles=function(){if(this._dds){var b=this.get("handles");for(var a=0;a<b.length;a++){YAHOO.util.Event.removeListener(this._cols[b[a]],"click");YAHOO.util.Event.removeListener(this._exps[b[a]],"click");this._cols[b[a]]=null;this._exps[b[a]]=null;this._dds[b[a]].unsubscribeAll();this._dds[b[a]].unreg();this._dds[b[a]]=null;this._handles[b[a]]=null}this._cols=null;this._exps=null;this._dds=null;this._handles=null}};GrahamTechnology.ui.Splitter.prototype._collapseHandle=function(){this.fireEvent("closeClick",{type:"collapse",target:this})};GrahamTechnology.ui.Splitter.prototype._expandHandle=function(){this.fireEvent("closeClick",{type:"expand",target:this})};GrahamTechnology.ui.Splitter.prototype._checkWidth=function(a){if(this.get("minWidth")){if(a<=this.get("minWidth")){a=this.get("minWidth")}}if(this.get("maxWidth")){this.fireEvent("validateMaxDimension",{evt:"width",target:this});if(a>=this.get("maxWidth")){a=this.get("maxWidth")}}return a};GrahamTechnology.ui.Splitter.prototype._checkHeight=function(a){if(this.get("minHeight")){if(a<=this.get("minHeight")){a=this.get("minHeight")}}if(this.get("maxHeight")){this.fireEvent("validateMaxDimension",{evt:"height",target:this});if(a>=this.get("maxHeight")){a=this.get("maxHeight")}}return a};GrahamTechnology.ui.springAndStrutsPanes=null;GrahamTechnology.ui.heightCalculation=function(c){var d=c;if(!c){var b=YAHOO.util.Dom.getElementBy(function(){return true},"form",null);var a=GrahamTechnology.ui.getBoxModelsTotalHeight(b);b.style.height=(GrahamTechnology.ui.getViewport()-a)+"px";d=b;GrahamTechnology.ui.BrowserWindow.enableResize();b=null}GrahamTechnology.ui.invokeTraverseDOM(d);if(GrahamTechnology.ui.AccordionFormHolder){GrahamTechnology.ui.AccordionFormHolder.applyFillStrategy(d)}};GrahamTechnology.ui.temporaryChildrensArray=new Array();GrahamTechnology.ui.noRetries=0;GrahamTechnology.ui.getStyleHeightQuirksModeAdjustment=function(c){switch(YAHOO.env.ua.ie){case 5:case 6:case 7:break;default:return 0}var d=GrahamTechnology.ui;var b=0;var a=d.getComputedStyle(c);b+=d.removePXEnding(a.paddingTop);b+=d.removePXEnding(a.paddingBottom);b+=d.removePXEnding(a.borderTopWidth);b+=d.removePXEnding(a.borderBottomWidth);return b};GrahamTechnology.ui.getInnerHeight=function(b){var d=b.clientHeight;var c=GrahamTechnology.ui;var a=c.getComputedStyle(b);d-=c.removePXEnding(a.paddingTop);d-=c.removePXEnding(a.paddingBottom);return d};GrahamTechnology.ui.setInnerHeight=function(b,a){a+=GrahamTechnology.ui.getStyleHeightQuirksModeAdjustment(b);b.style.height=Math.round(a)+"px"};GrahamTechnology.ui.getChildren=function(a){var e=GrahamTechnology.ui;var d=a.childNodes;var b=new Array();for(var c=0;c<d.length;c++){var f=d[c];if(e.shouldSkipChild(f)){continue}b.push(f)}return b};var traverseDOMCounter=0;GrahamTechnology.ui.clearCounters=function(){logger.logRPV("traverseDOMCounter: "+traverseDOMCounter);traverseDOMCounter=0};var traverseDOMisIE;GrahamTechnology.ui.invokeTraverseDOM=function(a){traverseDOMisIE=GrahamTechnology.util.RenderingEngines.isIE();GrahamTechnology.ui.traverseDOM(a,-1)};GrahamTechnology.ui.traverseDOM=function(f,s){var g=GrahamTechnology.ui;var r=g.getChildren(f);var m=r.length;if(m==0){return}var a=s;var q=0;var e=0;var p;var b;var j=[];var n;var l;var c;for(var o=0;o<m;o++){var d=r[o];traverseDOMCounter++;g.registerSnSResizeEvent(d);var k=d.className;if(k.indexOf("GTInvisibleGlass")!=-1){n=f.scrollHeight;if(!GrahamTechnology.Base.isUndefinedOrNull(n)){g.setInnerHeight(d,n);j.push(n)}else{if(a<0){a=g.getInnerHeight(f);if(a==0){break}}g.setInnerHeight(d,a);j.push(a)}}else{if(k.indexOf("100HeightFix")!=-1){if(a<0){a=g.getInnerHeight(f);if(a==0){break}}l=g.getBoxModelsTotalHeight(d);n=a-l;g.setInnerHeight(d,n);q+=a;j.push(n)}else{if(k.indexOf("percentageHeight")!=-1){if(a<0){a=g.getInnerHeight(f);if(a==0){break}}l=g.getBoxModelsTotalHeight(d);n=parseInt(d.attributes.getNamedItem("percentageattribute").nodeValue)/100*a-l;n=n>0?n:0;g.setInnerHeight(d,n);q+=n+l;j.push(n)}else{if(k.indexOf("fixedHeight")!=-1){n=g.removePXEnding(d.style.height);if(n<=0){n=g.getInnerHeight(d)}else{n-=g.getStyleHeightQuirksModeAdjustment(d)}l=g.getBoxModelsTotalHeight(d);q+=n+l;j.push(n)}else{if(k.indexOf("fillHeight")!=-1){if(e++==0){p=[];b=[]}p.push(d);b.push(o);j.push(-1)}else{if(k.indexOf("SnSinLM")!=-1&&f.className.indexOf("auto")==-1){g.SnSResizePaneElement(d.id,d);j.push(-1)}else{n=-1;if(m>1){c=g.getComputedStyle(d);l=g.removePXEnding(c.paddingTop);l+=g.removePXEnding(c.paddingBottom);n=d.clientHeight-l;l+=g.removePXEnding(c.borderTopWidth);l+=g.removePXEnding(c.borderBottomWidth);l+=g.removePXEnding(c.marginTop);l+=g.removePXEnding(c.marginBottom);q+=n+l;c=null}j.push(n)}}}}}}d=null}if(a==0){r=null;j=null;p=null;return}if(e>0){if(a<0){a=g.getInnerHeight(f);if(a==0){p=null;return}}var h=a-q;if(h<0){h=0}g.applyFillHeight(h,e,p,b,j);p=null}g.processTraverseChildren(r,j);r=null;j=null};GrahamTechnology.ui.registerSnSResizeEvent=function(c){var b=c.className;if(b.indexOf("GTListBoxDataTable")!=-1){var a=GrahamTechnology.ui.Form.getRegisteredComponent(c.id);if(a&&a.myDataTable){a.registerSnSResizeListener()}}else{if(b.indexOf("tinymce")!=-1){var a=GrahamTechnology.ui.Form.getRegisteredComponent(c.id);if(a){a.registerSnSResizeListener()}}}};GrahamTechnology.ui.shouldSkipChild=function(c){if(c.nodeType==1){var a=c.tagName;if(a&&!((a=="DIV"||a=="BUTTON"||a=="TABLE"||a=="TBODY"||a=="TR"||a=="TD"||a=="IFRAME"||(a=="INPUT"&&c.type!="hidden")))){return true}if(c.style&&c.style.display=="none"){return true}var b=c.className;if(b.indexOf("StopHeightFix")!=-1||b.indexOf("yui-dt")!=-1||b.indexOf("VerticalLayoutEmptyDiv")!=-1||b.indexOf("GTTextLabel")!=-1||b.indexOf("ygtvitem")!=-1){return true}}else{return true}return false};GrahamTechnology.ui.applyFillHeight=function(n,l,g,a,e){var b=n/l;var j=parseInt(b);var f=0;var d=g.length;for(var h=0;h<d;h++){var c=g[h];if(c.className&&c.className.indexOf("fillHeight")!=-1){var k=GrahamTechnology.ui.getBoxModelsTotalHeight(c);var m=j-k;f+=(b-j);if(f>=1){m++;f--}if(traverseDOMisIE&&c.className.indexOf("fillHeightIE9")!=-1){--m}if(m>0){GrahamTechnology.ui.setInnerHeight(c,m);e[a[h]]=m}c=null}}};GrahamTechnology.ui.processTraverseChildren=function(e,a){var d=e.length;for(var c=0;c<d;c++){var g=e[c];var f=a[c];if(g.childNodes.length>0){if(g.className.indexOf("GTTabbedFormHolder")!=-1){var b=GrahamTechnology.ui.Form.getRegisteredComponent(g.id);if(b){b.updateInnerLayout()}}if(f!=0){GrahamTechnology.ui.traverseDOM(g,f)}}g=null}};GrahamTechnology.ui.getBoxModelsTotalHeight=function(c){var d=GrahamTechnology.ui;var b=0;var a=d.getComputedStyle(c);b+=d.removePXEnding(a.paddingTop);b+=d.removePXEnding(a.paddingBottom);b+=d.removePXEnding(a.borderTopWidth);b+=d.removePXEnding(a.borderBottomWidth);b+=d.removePXEnding(a.marginTop);b+=d.removePXEnding(a.marginBottom);return b};GrahamTechnology.ui.getComputedStyle=function(c,b){if(b){return GrahamTechnology.DOM.Element.getComputedStyle(c,b)}var a;if(typeof c.currentStyle!="undefined"){a=c.currentStyle}else{a=document.defaultView.getComputedStyle(c,null)}return a};GrahamTechnology.ui.getStyleValue=function(b,a){return GrahamTechnology.ui.removePXEnding(GrahamTechnology.ui.getComputedStyle(b,a))};GrahamTechnology.ui.removePXEnding=function(b){var a=parseInt(b);if(isNaN(a)){return 0}return a};GrahamTechnology.ui.getViewport=function(){var a=YAHOO.util.Dom;return a.getViewportHeight()};GrahamTechnology.ui.SnSResize=function(a){var b=profiler.start("SnSResize");if(!GrahamTechnology.util.AJAXProperties.removeLayoutHeightCalculation){if(!a){GrahamTechnology.ui.startVisibleFormTimeout()}GrahamTechnology.ui.HideScrollbars(a,true);GrahamTechnology.ui.heightCalculation(a);GrahamTechnology.ui.getSnSResizeEvent().fire(a);GrahamTechnology.ui.HideScrollbars(a,false)}if(!a){if(!GrahamTechnology.util.AJAXProperties.removeLayoutHeightCalculation){GrahamTechnology.ui.setFormVisible()}if(GrahamTechnology.ui.focusedComponentID!=null){GrahamTechnology.ui.setFocus(GrahamTechnology.ui.focusedComponentID);GrahamTechnology.ui.focusedComponentID=null}}else{a.style.visibility="visible"}GrahamTechnology.ui.clearCounters()};GrahamTechnology.ui.HideScrollbars=function(a,c){if(agentType==="AppleWebKit"){var d=GrahamTechnology.DOM.getElementsByTagAndClass(a,"div","tab-contents");var b=0;for(b=0;b<d.length;b++){if(c){d[b].style.overflow="hidden"}else{d[b].style.overflow="auto"}}}};GrahamTechnology.ui.focusedComponentID=null;GrahamTechnology.ui.setFocus=function(a){if(document.body.style.visibility=="hidden"){GrahamTechnology.ui.focusedComponentID=a;return}try{GrahamTechnology.DOM.getElementById(a).focus()}catch(c){try{getFirstElement().focus()}catch(c){var b=new GrahamTechnology.util.ExceptionErrorMessage();b.exceptionName=c.name;b.errorMessage=c.message;if(!GrahamTechnology.util.Browsers.isIE()){b.stackTrace=c.stack}logger.log(b.getMessage())}}};GrahamTechnology.ui.startVisibleFormTimeout=function(){clearTimeout(GrahamTechnology.ui.visibleFormTimeout);GrahamTechnology.ui.visibleFormTimeout=GrahamTechnology.profile.setProfilingTimeout(function(){GrahamTechnology.ui.setFormVisible()},GrahamTechnology.ui,1000,"GrahamTechnology.ui.setFormVisible()")};GrahamTechnology.ui.setFormVisible=function(){clearTimeout(GrahamTechnology.util.visibleFormTimeout);document.body.style.visibility="visible";document.body.style.overflow="auto"};GrahamTechnology.ui.SnSResizeEvent=null;GrahamTechnology.ui.getSnSResizeEvent=function(){if(GrahamTechnology.ui.SnSResizeEvent==null){GrahamTechnology.ui.SnSResizeEvent=new YAHOO.util.CustomEvent("SnS Resize")}return GrahamTechnology.ui.SnSResizeEvent};GrahamTechnology.ui.SnSResizePane=function(a){GrahamTechnology.ui.SnSResizePaneElement(a,YAHOO.util.Dom.get(a))};GrahamTechnology.ui.SnSResizePaneElement=function(b,d){var e=GrahamTechnology.ui.Form.allPanes[b];if(!e){return}var c=d.parentNode.offsetWidth;var a=d.parentNode.offsetHeight-GrahamTechnology.ui.getBoxModelsTotalHeight(d.parentNode);if(c==0||a==0){return}if(d.parentNode.tagName.toLowerCase()=="form"&&!GrahamTechnology.DOM.Element.isChildElement("popups",d)&&GrahamTechnology.util.AJAXProperties.serverSideResizing){if(GrahamTechnology.util.AJAXProperties.minimumFormWidth>c){c=GrahamTechnology.util.AJAXProperties.minimumFormWidth}if(GrahamTechnology.util.AJAXProperties.minimumFormHeight>GrahamTechnology.ui.removePXEnding(a)){a=GrahamTechnology.util.AJAXProperties.minimumFormHeight+"px"}}if(c!=null){e.reduceWidth(e.width-c,0)}if(a!=null){d.style.height=a;e.reduceHeight(e.height-GrahamTechnology.ui.removePXEnding(a),0)}else{alert(d.id+" was "+e)}e=null};GrahamTechnology.ui.RenderCache=function(){this.emptyList=new Array();this._dirty=false;this.setDirty=function(a){this._dirty=a};this.isDirty=function(){return this._dirty};this.put=function(a,b){this.setDirty(true);GrahamTechnology.ui.RenderCache.prototype.put.call(this,a,b);return this};this.remove=function(a){this.setDirty(true);GrahamTechnology.ui.RenderCache.prototype.remove.call(this,a);return this};this.removeAll=function(){this.setDirty(true);GrahamTechnology.ui.RenderCache.prototype.removeAll.call(this);return this};this.listValues=function(){if(!this.isDirty()){return this._emptyList}var b=[];for(var a=this.size;a--;this.next()){b.push(this.value())}return b};this.hash=function(a){var b=null;if(GrahamTechnology.util.RenderingEngines.isIE()){b=a.uniqueID}else{if(a.uniqueID===void 0||a.uniqueID===null){a.uniqueID=this._generateID()}b=a.uniqueID}return b};this._lastID=-1;this._generateID=function(){this._lastID=this._lastID+1;return this._lastID}};GrahamTechnology.ui.RenderCache.prototype=new GrahamTechnology.util.Map();GrahamTechnology.ui.Renderable=function(a){this._RNDRBL="_RNDRBL_";this._element=a;this._id=a.uniqueID;this.height=-1;this.setHeight=function(b){this.height=b};this.getHeight=function(){return this.height}};GrahamTechnology.ui.RenderManager=function(){this._cache=new GrahamTechnology.ui.RenderCache(true);this.isCached=function(a){var b=this._cache.get(a);return !(b===void 0)};this.get=function(a){var b=this._cache.get(a);if(b===void 0){b=this.register(a)}return b};this.register=function(a){rendereable=new GrahamTechnology.ui.Renderable(a);this._cache.put(a,rendereable);return rendereable};this.remove=function(c){if(!c){return}this._cache.remove(c);var b=$(c).find("div");for(var a=0;a<b.length;a++){this._cache.remove(b[a])}logger.logRPV("Current cache size: "+this._cache.size)};this.isDirty=function(){return this._cache.isDirty()},this.setDirty=function(a){this._cache.setDirty(a)}};var RNDR=new GrahamTechnology.ui.RenderManager();var RNDRUtil=GrahamTechnology.util.RenderUtil;GrahamTechnology.ui.ResizeHolder=function(d,e){var j,k,h=false,f=false,g=e,c=false,a=0,b=50;checkRun=function(m,p){var l=false;j=m;k=p;if(f){try{if(j&&k){if(g){var n=j,q=k;setTimeout(function(){q.call(n)},b)}else{k.call(j)}}}catch(o){}l=true}else{h=true}return l};removeCustom=function(){c=false};setAlreadySns=function(){f=true};setCustom=function(){c=true};getCurrentTime=function(){return a};isCustom=function(){return c};checkReadyToRun=function(m){var l=false;if(h){try{if(j&&k){if(m&&m.length>0&&isCustomComponentOrListBox(j)){var p=$(m[0]);if(!p.find("#"+getObjectID(j)).length>0){return}}if(g){var o=j,r=k;setTimeout(function(){r.call(o)},b)}else{k.call(j)}}}catch(q){var n=new GrahamTechnology.util.ExceptionErrorMessage();n.exceptionName=q.name;n.errorMessage=q.message;if(!GrahamTechnology.util.Browsers.isIE()){n.stackTrace=q.stack}logger.log(n.getMessage())}l=true}else{f=true}return l};getObjectID=function(l){id="";if(isListBox(l)){id=getListBoxID(l)}else{id=getCustomComponentID(l)}return id};getListBoxID=function(l){return l.id};getCustomComponentID=function(l){return l.context.id};isCustomComponentOrListBox=function(l){return isListBox(l)||isCustomComponent(l)};isCustomComponent=function(l){return l.context&&l.context.ComponentType&&l.context.ComponentType==GrahamTechnology.grasp.ComponentType.CustomComponent};isListBox=function(l){return l.ComponentType==GrahamTechnology.grasp.ComponentType.Listbox};forceRun=function(){try{var l=j,n=k;setTimeout(function(){n.call(l)},b)}catch(m){}};setForce=function(l,m){j=l;k=m};remove=function(){j=null;k=null};_init=function(){a=new Date().getTime()};_init();publicObj={checkRun:checkRun,checkReadyToRun:checkReadyToRun,getCurrentTime:getCurrentTime,isCustom:isCustom,remove:remove,removeCustom:removeCustom,setAlreadySns:setAlreadySns,setCustom:setCustom};return publicObj};GrahamTechnology.ui.resize=function(){var d=false,c=0,h,f=false,e,a,b=[],g=true;queuedObjects=[],resizeObjects=[],lastSns=0,allObjects=[],defaultTimeout=50,noTimeout=0,tabTimeout=500,firstList=true,components=[],registerTabHolder=[],_customComponentTimer=[],firstDraw=true,accordian=[];runPaneInit=function(){if(GrahamTechnology.util.AJAXProperties.useincrementalLoading&&g){_checkFinishLoad()}else{if(!GrahamTechnology.util.AJAXProperties.useincrementalLoading){d=true;g=false;firstList=false;initQueue();GrahamTechnology.profile.setProfilingTimeout(function(){GrahamTechnology.ui.SnSResize();_checkComponents()},this,defaultTimeout,"clientAPI.setPageRendered SnSResize")}}};_checkFinishLoad=function(){if(registerTabHolder.length===0){for(i in b){try{var l=b[i];if(l){var k=l.getTempChains();if(k&&!GrahamTechnology.Base.isUndefinedOrNull(k)){l.createLayoutChains(k);l.buildAllChains();l.removeTempChains()}l=null}}catch(j){}}for(i in b){b[i]=null}b=[];GrahamTechnology.profile.setProfilingTimeout(function(){GrahamTechnology.ui.SnSResize();g=false;d=true;_checkComponents();initQueue()},this,defaultTimeout,"clientAPI.setPageRendered SnSResize")}else{setTimeout(function(){_checkFinishLoad()},defaultTimeout)}};checkPaneInit=function(k,j){k.initialize();if(g&&GrahamTechnology.util.AJAXProperties.useincrementalLoading){if(j&&j!=null&&!GrahamTechnology.Base.isUndefinedOrNull(j)){k.setTempChains(j)}b.push(k)}else{if(!GrahamTechnology.Base.isUndefinedOrNull(j)){k.createLayoutChains(j);k.buildAllChains()}}};initQueue=function(){_handleSnsResize()};_handleSnsResize=function(){GrahamTechnology.ui.getSnSResizeEvent().subscribe(this._captureSnsResize,this,true)};_captureSnsResize=function(l,j,k){lastSns=new Date().getTime();_checkComponents(j);resizeDrag();runAccordianUpdate()};addResizeObject=function(j){if(_isSNS()){addComponentResize(j,firstList);components[j].removeCustom();if(allObjects&&!allObjects[j]){allObjects.push(j)}}};addComponentResize=function(j,k){if(_isSNS()){components[j]=new GrahamTechnology.ui.ResizeHolder(j,k);components[j].setCustom()}};checkComponentResize=function(l,j,n,m){if(components[j]){var k=components[j];if(m){checkForFirstLoad(j)}if(k.checkRun(l,n)){_removeObjectSet(components,j)}else{if((k.isCustom()||l.isInPopupForm())&&_customComponentTimer==null){_customComponentTimer=setTimeout(function(){_checkComponents()},250)}}}};_checkComponents=function(k){clearTimeout(_customComponentTimer);_customComponentTimer=null;var j=[];for(i in components){var l=components[i];if(l){if(l.checkReadyToRun(k)){l.remove();j.push(i)}}else{j.push(i)}}for(i in j){_removeObjectSet(components,j[i])}};resizeDrag=function(){try{if(!g){if(!d){return}for(i in allObjects){var j=allObjects[i];if((resizeObjects&&!resizeObjects[j])&&!components[j]){j=GrahamTechnology.ui.Form.getRegisteredComponent(j);if(j){try{j.handleResizeEvent()}catch(k){_removeObjectArray(allObjects,j)}}}}}}catch(k){}};checkForResize=function(){if(g&&!e){e=setTimeout(function(){checkForResize()},defaultTimeout)}else{clearTimeout(resizeTimer);for(i in resizeObjects){var j=resizeObjects[i];j=GrahamTechnology.ui.Form.getRegisteredComponent(j);if(j){GrahamTechnology.profile.setProfilingTimeout(function(){checkForFirstLoad(componentID);j.handleResizeEvent()},this,noTimeout,"GrahamTechnology.ui.resize.resize()")}}}resizeObjects=[]};removeObject=function(j){_removeObjectArray(allObjects,j);if(accordian[j]){var k=accordian[j];GrahamTechnology.ui.getSnSResizeEvent().unsubscribe(k.onSnSResize,k,true);_removeObjectSet(accordian,j)}};_checkQueuedObjects=function(){clearTimeout(h);if(!g){for(i in queuedObjects){var j=queuedObjects[i];_checkForIndividualResize(j)}queuedObjects=[];h=null}else{h=setTimeout(function(){_checkQueuedObjects()},defaultTimeout)}};checkForIndividualResize=function(j){if(_isSNS()){if(g){queuedObjects.push(j);if(!h){h=setTimeout(function(){_checkQueuedObjects()},defaultTimeout)}}else{var k=GrahamTechnology.ui.Form.getRegisteredComponent(j);if(k){checkComponentResize(k,j,k.handleResizeEvent,true)}else{_checkForIndividualResize(j)}}}};_checkForIndividualResize=function(j){var k=GrahamTechnology.ui.Form.getRegisteredComponent(j);if(k){GrahamTechnology.profile.setProfilingTimeout(function(){checkForFirstLoad(j);k.handleResizeEvent();_removeObjectArray(resizeObjects,j);_removeObjectSet(components,j);k=null},this,defaultTimeout,"GrahamTechnology.ui.resize.IndividualResize("+j+")")}};_checkTabUpdate=function(){clearTimeout(a);if(registerTabHolder.length==0&&!g){setTimeout(function(){GrahamTechnology.ui.Form.updateTabOrder()},tabTimeout);a=null}else{a=setTimeout(function(){_checkTabUpdate()},tabTimeout)}};registerTabStart=function(j){registerTabHolder.push(j);if(!a){a=setTimeout(function(){_checkTabUpdate()},tabTimeout)}};registerTabFinish=function(j){_removeObjectArray(registerTabHolder,j);if(this.finishedIncrementalLoading()&&GrahamTechnology.util.AJAXProperties.useincrementalLoading){GrahamTechnology.ui.Form.checkActionPerformed("snsresize")}};this.finishedIncrementalLoading=function(){return registerTabHolder.length==0};checkForFirstLoad=function(j){if(!_isSNS()){firstList=false}else{if(firstList&&GrahamTechnology.util.AJAXProperties.useincrementalLoading){firstDraw=false;if(firstDraw){var l=$("#"+j).closest(".GTPositional");var k=$(l).parent();l.css({height:$(k).height(),width:$(k).width()});$("#"+j).css({width:"100%",height:"100%"})}firstList=false}else{firstList=false}}};_removeObjectArray=function(l,j){if(l&&j){var k=_inArray(j,l);if(k>=0){l.splice(k,1)}}};_removeObjectSet=function(l,k){var j=l[k];if(j&&j.remove){j.remove()}j=null;delete l[k];l[k]=null};_inArray=function(l,m){if(m.indexOf){return m.indexOf(l)}for(var j=0,k=m.length;j<k;j++){if(m[j]===l){return j}}return -1};isLoading=function(){if(GrahamTechnology.util.AJAXProperties.useincrementalLoading){return g}else{return false}};registerResize=function(j,l,m,k){if(_isSNS()){if(k){_addAccordianUpdate(l,j);_removeObjectSet(components,j)}else{checkComponentResize(l,j,m)}}};_isSNS=function(){return !GrahamTechnology.util.AJAXProperties.removeLayoutHeightCalculation};_addAccordianUpdate=function(k,j){accordian[j]=k};runAccordianUpdate=function(){for(var k in accordian){var j=accordian[k];if(j){j.onSnSResize()}}};publicObj={addResizeObject:addResizeObject,addComponentResize:addComponentResize,checkComponentResize:checkComponentResize,checkForIndividualResize:checkForIndividualResize,checkForResize:checkForResize,checkPaneInit:checkPaneInit,finishedIncrementalLoading:finishedIncrementalLoading,initQueue:initQueue,isLoading:isLoading,registerResize:registerResize,registerTabStart:registerTabStart,registerTabFinish:registerTabFinish,removeObject:removeObject,resizeDrag:resizeDrag,runAccordianUpdate:runAccordianUpdate,runPaneInit:runPaneInit};return publicObj}();var gtResize=GrahamTechnology.ui.resize;GrahamTechnology.action=function(){};GrahamTechnology.action.CommandTranslator=function(){};GrahamTechnology.action.CommandTranslator.prototype={};GrahamTechnology.action={Page:function(){},showConfirm:function(){if(confirm(this.ErrorMessage.getMessage()+".\nRefresh page?")){return true}else{GrahamTechnology.action.Refresh=false;return false}},reportError:function(a){if(GrahamTechnology.util.AJAXProperties.alertOnError===GrahamTechnology.util.ErrorConstants.ERROR_MESSAGE){a=this.showConfirm()}else{if(GrahamTechnology.util.AJAXProperties.alertOnError===GrahamTechnology.util.ErrorConstants.EXCEPTION_ERROR_MESSAGE){if(this.ErrorMessage.getType()===GrahamTechnology.util.ErrorConstants.EXCEPTION_ERROR_MESSAGE){a=this.showConfirm()}}}this.ErrorMessage=null;return a},refresh:function(a){if(GrahamTechnology.util.AJAXProperties.alertOnError!=GrahamTechnology.util.ErrorConstants.NONE){if(!GrahamTechnology.Base.isUndefinedOrNull(this.ErrorMessage)){a=this.reportError(a)}}if(a){this.refreshImpl()}else{if(GrahamTechnology.action.Refresh){this.refreshImpl()}}},setRefresh:function(b,a){this.Refresh=b;this.ErrorMessage=a},refreshImpl:function(){if(this.RefreshPending){return}this.RefreshPending=true;logger.log("Initiating page refresh","info","action.refreshImpl");clientAPI.expirePushConnection();if(clientAPI.isSafSession()||clientAPI.isSessionSuspended()){window.location.reload()}else{var a=window.location;if(a.href.indexOf("#")!==-1){a.href=a.href.substring(0,a.href.indexOf("#"))}window.location=a}},componentIsActive:function(b,f,c,d,a){if((GrahamTechnology.Base.isUndefinedOrNull(b)||b===false)&&GrahamTechnology.util.AJAXProperties.useincrementalLoading){var e={id:f,context:c,callee:d,args:a};GrahamTechnology.ui.Form.ComponentsNotReady.push(e);return false}return true},Refresh:false,ErrorMessage:null,RefreshPending:false};GrahamTechnology.action.EventType={Envelope:"envelope",Label:"label"};GrahamTechnology.action.ComponentTypeResolver={getComponentInfoID:function(a){return a+"_info"},getComponentID:function(b,a){return a},radioGroupExists:function(a){var d=a.fieldname;var b=GrahamTechnology.ui.Form.getRegisteredComponent(d);var c=GrahamTechnology.Base.isUndefinedOrNull(b);if(!c&&b.ComponentType==GrahamTechnology.grasp.ComponentType.RadioGroup){return true}return false},getElement:function(a){var b=YAHOO.util.Dom.get(a);if(b!=null&&b.id!=a){b=null}return b},getComponent:function(a){return GrahamTechnology.ui.Form.getRegisteredComponent(a)},getComponentType:function(b){var c=null;var a=this.getComponent(b);if(a){c=a.ComponentType}else{c=this.getComponentTypeFromInfo(this.getElement(this.getComponentInfoID(b)))}return c},getComponentTypeFromInfo:function(c){if(c==null){return null}var b=$(c).attr("value");var a=(b.split(",")[2]).split("=")[1];return a},getTransportCode:function(b){var a=b.transportCode;return parseInt(a,10)},resolveComponentType:function(b){var c=null;var e=null;switch(this.getTransportCode(b)){case (GrahamTechnology.grasp.TransportType.COMMAND_Transportable):case (GrahamTechnology.grasp.TransportType.CONTROL_SETTING_Transportable):var a=b.name;if(a==""){e=GrahamTechnology.grasp.ComponentType.Form}else{c=this.getComponentID(b,a);e=this.getComponentType(c)}break;case (GrahamTechnology.grasp.TransportType.FORM_TEXT_VALUE_Transportable):case (GrahamTechnology.grasp.TransportType.FORM_TEXT_UPDATE_Transportable):var a=b.fieldname;c=this.getComponentID(b,a);var d=this.getComponent(c);if(d==null){if(this.radioGroupExists(b)){e=GrahamTechnology.grasp.ComponentType.RadioGroup}}else{e=d.ComponentType}break;case (GrahamTechnology.grasp.TransportType.FORM_LIST_VALUE_Transportable):var a=b.value;c=this.getComponentID(b,a);var d=GrahamTechnology.ui.Form.getRegisteredComponent(c,null);e=d.ComponentType;break;case (GrahamTechnology.grasp.TransportType.FORM_LIST_UPDATE_Transportable):var a=b.value;c=this.getComponentID(b,a);var d=GrahamTechnology.ui.Form.getRegisteredComponent(c,null);e=d.ComponentType;break}if(e==null){e=GrahamTechnology.grasp.ComponentType.UNIDENTIFIED}return e}};GrahamTechnology.action.Page.prototype={JSONCode:-1,performAction:function(a,g,j,e,b){if(!GrahamTechnology.action.Refresh){this.JSONCode=parseInt(a.code,10);switch(this.JSONCode){case (GrahamTechnology.grasp.TransportType.CONTROL_SETTING_Transportable):logger.log("CONTROL_SETTING_Transportable","info","Page.performAction");this.callControlSettingAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_TEXT_VALUE_Transportable):logger.log("FORM_TEXT_VALUE_Transportable","info","Page.performAction");this.callFormTextValueAction(a.transportables,g,b);break;case (GrahamTechnology.grasp.TransportType.COMMAND_Transportable):logger.log("COMMAND_Transportable","info","Page.performAction");this.callCommandAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.MESSAGE_Transportable):logger.log("MESSAGE_Transportable","info","Page.performAction");break;case (GrahamTechnology.grasp.TransportType.AFFIRMATION_Transportable):logger.log("AFFIRMATION_Transportable","info","Page.performAction");if(j){logger.log("Enable form","info","Page.performAction");GrahamTechnology.ui.Form.enable()}else{clientAPI.updateProgressIndicator("end");GrahamTechnology.ui.Form.setServerIdleImage()}clientAPI.enableOnlyWithSTR=false;clientAPI.affirmationShowed=true;this.callAffirmationAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.INFORMATION_Transportable):logger.log("INFORMATION_Transportable","info","Page.performAction");this.callInformationAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_LIST_VALUE_Transportable):logger.log("FORM_LIST_VALUE_Transportable","info","Page.performAction");this.callFormListValueAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_LIST_UPDATE_Transportable):logger.log("FORM_LIST_UPDATE_Transportable","info","Page.performAction");this.callFormListUpdateAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_DATETIME_VALUE_Transportable):logger.log("FORM_DATETIME_VALUE_Transportable","info","Page.performAction");this.callFormDateTimeValueAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_TREE_VALUE_Transportable):logger.log("FORM_TREE_VALUE_Transportable","info","Page.performAction");this.callFormTreeValueAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_TREE_IMAGE_LIST_Transportable):logger.log("FORM_TREE_IMAGE_LIST_Transportable","info","Page.performAction");this.callFormTreeImageListAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.WEB_SO_MESSAGE_Transportable):logger.log("WEB_SO_Message_Transportable","info","Page.performAction");clientAPI.enableOnlyWithSTR=true;this.callActiveXAction(a.transportables,g);break;case GrahamTechnology.grasp.TransportType.STR_RESPONSE_Transportable:logger.log("STR Transportable","info","Page.performAction");if(!GrahamTechnology.action.Refresh){var c=a.transportables[0];var d=c.messageType;var f=c.commandID;if(!(d==GrahamTechnology.grasp.TransportType.COMMAND_Transportable&&(f==GrahamTechnology.grasp.CommandType.AFFIRMATION_POSITIVE||f==GrahamTechnology.grasp.CommandType.AFFIRMATION_NEGATIVE))){if(g){var h=new GrahamTechnology.action.DisplayMessageAction();h.flush()}if(clientAPI.enableOnlyWithSTR&&g){if(j){logger.log("Enable form","info","Page.performAction");GrahamTechnology.ui.Form.enable()}else{clientAPI.updateProgressIndicator("end");GrahamTechnology.ui.Form.setServerIdleImage()}clientAPI.enableOnlyWithSTR=false}}}break;case (GrahamTechnology.grasp.TransportType.INNER_FORM_Transportable):logger.log("INNER_FORM_Transportable","info","Page.performAction");this.callInnerFormAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.POPUP_FORM_Transportable):logger.log("POPUP_FORM_Transportable","info","Page.performAction");this.callPopupFormAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_CUSTOM_COMPONENT_VALUE_Transportable):logger.log("FORM_CUSTOM_COMPONENT_VALUE_Transportable","info","Page.performAction");this.callCustomComponentValueAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_CUSTOM_COMPONENT_MESSAGE_Transportable):logger.log("FORM_CUSTOM_COMPONENT_MESSAGE_Transportable","info","Page.performAction");this.callCustomComponentMessage(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.SPELL_CHECK_Transportable):logger.log("SPELL_CHECK_Transportable","info","Page.performAction");this.callSpellCheckAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.COOKIE_Transportable):logger.log("COOKIE_Transportable","info","Page.performAction");this.callCreateCookieAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.DISPLAY_MESSAGE_Transportable):logger.log("DISPLAY_MESSAGE_Transportable","info","Page.performAction");this.callDisplayMessageAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.DISPLAY_MESSAGE_CLEAR_Transportable):logger.log("DISPLAY_MESSAGE_CLEAR_Transportable","info","Page.performAction");this.callDisplayMessageClearAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.FORM_TEXT_UPDATE_Transportable):logger.log("FORM_TEXT_UPDATE_Transportable","info","Page.performAction");this.callFormTextUpdateAction(a.transportables,g);break;case (GrahamTechnology.grasp.TransportType.VIEW_OPTION_LIST_Transportable):logger.log("VIEW_OPTION_LIST_Transportable","info","Page.performAction");this.callViewOptionListAction(a.transportables,g);break;default:logger.log("No handler found for command with CommandID :"+f,"info","CommandAction.performAction");break}}if(GrahamTechnology.action.Refresh){logger.log(" Refresh:"+GrahamTechnology.action.Refresh+" lastPacket:"+g,"info","Page.performAction");GrahamTechnology.action.refresh(true)}if(g){var h=new GrahamTechnology.action.DisplayMessageAction();h.flush()}},callControlSettingAction:function(b,a){var c=new GrahamTechnology.action.ControlSettingAction();c.performAction(b,a)},callFormTextValueAction:function(c,b,d){var a=new GrahamTechnology.action.FormTextValueAction();a.performAction(c,b,d)},callCommandAction:function(b,a){var c=new GrahamTechnology.action.CommandAction();c.performAction(b,a)},callFormListValueAction:function(b,a){var c=new GrahamTechnology.action.FormListValueAction();c.performAction(b)},callFormListUpdateAction:function(c,b){var a=new GrahamTechnology.action.FormListUpdateAction();a.performAction(c)},callFormDateTimeValueAction:function(b,a){GrahamTechnology.action.setRefresh(true,null)},callFormTreeValueAction:function(b,a){var c=new GrahamTechnology.action.FormTreeValueAction();c.performAction(b,a)},callFormTreeImageListAction:function(b,a){var c=new GrahamTechnology.action.FormTreeImageListAction();c.performAction(b,a)},callActiveXAction:function(b,a){var c=new GrahamTechnology.action.ActiveXAction();c.processMethodCall(b[0])},callInnerFormAction:function(b,a){var c=new GrahamTechnology.action.InnerFormAction();c.performAction(b,a)},callPopupFormAction:function(b,a){var c=new GrahamTechnology.action.PopupFormAction();c.performAction(b,a)},callAffirmationAction:function(c,b){var a=new GrahamTechnology.action.AffirmationAction();a.performAction(c,b)},callInformationAction:function(c,b){var a=new GrahamTechnology.action.InformationAction();a.performAction(c,b)},callCustomComponentValueAction:function(b,a){var c=new GrahamTechnology.action.CustomComponentValueAction();c.performAction(b,a)},callCustomComponentMessage:function(b,a){var c=new GrahamTechnology.action.CustomComponentFunctionCallAction();c.performAction(b,a)},callSpellCheckAction:function(b,a){var c=new GrahamTechnology.action.SpellCheckAction();c.performAction(b,a)},callCreateCookieAction:function(c,b){var a=new GrahamTechnology.action.CreateCookieAction();a.performAction(c,b)},callDisplayMessageAction:function(b,a){var c=new GrahamTechnology.action.DisplayMessageAction();c.performAction(b,a)},callDisplayMessageClearAction:function(b,a){var c=new GrahamTechnology.action.DisplayMessageClearAction();c.performAction(b,a)},callFormTextUpdateAction:function(c,b){var a=new GrahamTechnology.action.FormTextUpdateAction();a.performAction(c,b)},callViewOptionListAction:function(b,a){var c=new GrahamTechnology.action.ViewOptionListAction();c.performAction(b,a)}};GrahamTechnology.action.CommandAction=function(){};GrahamTechnology.action.CommandAction.prototype={performAction:function(f,x){for(i=0;i<f.length&&(!GrahamTechnology.action.Refresh);i++){var j=parseInt(f[i].commandID,10);logger.log("CommandID :"+j,"info","CommandAction.performAction");switch(j){case (GrahamTechnology.grasp.CommandType.EXIT):if(f[i].commandArg===1){clientAPI.safSession()}else{GrahamTechnology.action.setRefresh(true,null);GrahamTechnology.multiwindow.closeAllWindows()}break;case (GrahamTechnology.grasp.CommandType.RUN_FORM):logger.log("Refresh CommandID :"+j,"info","CommandAction.performAction");GrahamTechnology.action.setRefresh(true,null);break;case (GrahamTechnology.grasp.CommandType.RUN_FORM_IN_HOLDER):var p=new GrahamTechnology.action.RunFormInHolderAction();p.performAction(f,x);break;case (GrahamTechnology.grasp.CommandType.SET_ACTIVE_TAB):var k=new GrahamTechnology.action.SetActiveTabAction();k.performAction(f,x);break;case (GrahamTechnology.grasp.CommandType.POPDOWN_FORM):var w=new GrahamTechnology.action.PopdownFormAction();w.performAction(f,x);break;case (GrahamTechnology.grasp.CommandType.LOWER_WINDOW):var d=new GrahamTechnology.action.LowerWindowAction();d.performAction(f,x);break;case (GrahamTechnology.grasp.CommandType.RAISE_WINDOW):var v=new GrahamTechnology.action.RaiseWindowAction();v.performAction(f,x);break;case (GrahamTechnology.grasp.CommandType.AJAX_REDIRECT):var l=new GrahamTechnology.action.RedirectAction();l.redirect(f[i]);break;case (GrahamTechnology.grasp.CommandType.SELECT_TREE_NODE):var t=new GrahamTechnology.action.SelectTreeNodeAction();t.performAction(f[i]);break;case (GrahamTechnology.grasp.CommandType.DESELECT_TREE_NODE):var t=new GrahamTechnology.action.DeSelectTreeNodeAction();t.performAction(f[i]);break;case (GrahamTechnology.grasp.CommandType.CLIENT_EXPAND_TREENODE):var e=new GrahamTechnology.action.ExpandCollapseTreeNodeAction();e.performAction(f[i],true);break;case (GrahamTechnology.grasp.CommandType.CLIENT_COLLAPSE_TREENODE):var e=new GrahamTechnology.action.ExpandCollapseTreeNodeAction();e.performAction(f[i],false);break;case (GrahamTechnology.grasp.CommandType.EXPAND_TAB_Transportable):case (GrahamTechnology.grasp.CommandType.COLLAPSE_TAB_Transportable):var m=new GrahamTechnology.action.ExpandCollapseTabAction();m.performAction(f);break;case (GrahamTechnology.grasp.CommandType.INFORMATION_POPDOWN):var u=new GrahamTechnology.action.InformationPopdownAction();u.performAction(f);break;case (GrahamTechnology.grasp.CommandType.CLEAR_FORM):var s=new GrahamTechnology.action.ClearFormAction();s.performAction(f);break;case (GrahamTechnology.grasp.CommandType.SET_FILL_STRATEGY):var c=new GrahamTechnology.action.AccordionSetFillStrategyAction();c.performAction(f);break;case (GrahamTechnology.grasp.CommandType.UPDATE_CUSTOM_CONTAINER_DATA):var z=new GrahamTechnology.action.UpdateCustomContainerAction();z.performAction(f);break;case (GrahamTechnology.grasp.CommandType.COOKIE):var A=new GrahamTechnology.action.CreateCookieAction();A.performAction(f);break;case (GrahamTechnology.grasp.CommandType.AJAX_SESSION_EXPIRED):case (GrahamTechnology.grasp.CommandType.AJAX_PAGE_UNLOAD_EXPIRY):GrahamTechnology.action.refresh(true);case (GrahamTechnology.grasp.CommandType.PLAY_SOUND):GrahamTechnology.ui.Form.enableSounds();var h=f[0];var q=h.commandCharArg;GrahamTechnology.ui.Form.playSound(q);GrahamTechnology.ui.Form.disableSounds();break;case (GrahamTechnology.grasp.CommandType.TURN_OFF_SOUNDS):GrahamTechnology.ui.Form.disableSounds();break;case (GrahamTechnology.grasp.CommandType.TURN_ON_SOUNDS):setTimeout("GrahamTechnology.ui.Form.enableSounds()",1000);break;case (GrahamTechnology.grasp.CommandType.DEFERRED_LOGGING):var h=f[0];var o=h.commandArg;GrahamTechnology.util.AJAXProperties.deferredServerLogging=(o==1);break;case (GrahamTechnology.grasp.CommandType.LOAD_RESOURCE):var h=f[0];var r=h.commandCharArg;require([r]);break;case (GrahamTechnology.grasp.CommandType.NAVIGATE_FORWARD):browserHistory.forward();break;case (GrahamTechnology.grasp.CommandType.NAVIGATE_BACK):browserHistory.back();break;case (GrahamTechnology.grasp.CommandType.PUSH_STATE):var h=f[0];browserHistory.pushState(h.commandCharArg,h.commandCharArg2);break;case (GrahamTechnology.grasp.CommandType.SUSPEND_SESSION):clientAPI.suspendSession();break;case (GrahamTechnology.grasp.CommandType.SET_PLATFORM_CONFIGURATION):var C=new GrahamTechnology.action.PlatformConfigurationAction();C.performAction(f);break;case (GrahamTechnology.grasp.CommandType.OPEN_WINDOW):var B=f[0];var g=window.location.search;var y=window.location.href;if(g&&g.length>0){var b=y.indexOf("?");y=y.substring(0,b)}var n=GrahamTechnology.multiwindow.stripTrailingSlashes(y);var a=window.open(n+"/window/"+B.commandCharArg+g,B.commandCharArg);GrahamTechnology.multiwindow.windowHandleIDMap.put(B.commandCharArg,{handle:a,formID:B.commandArg});setTimeout(function(){if(a===null||typeof a==="undefined"){var D=GrahamTechnology.grasp.TransportableFactory.CLIENT_EVENT_Transportable();D.eventType=GrahamTechnology.grasp.EvtType.WINDOW_CLOSED;D.parentID=B.commandArg;D.param1=B.commandCharArg;D.windowID=GrahamTechnology.util.AJAXConstants.MultiMonitor.PRIMARY_WINDOW;clientAPI.postTransportable(D,null);alert("The new window is being blocked by the browser's popup blocker, please add the domain to your browser's popup blocker allowed list and try again")}},250);break}}}};GrahamTechnology.action.ControlSettingAction=function(){};GrahamTechnology.action.ControlSettingAction.prototype={performAction:function(c){for(var b=0;b<c.length;b++){var a=GrahamTechnology.action.ComponentTypeResolver.resolveComponentType(c[b]);this.performComponentAction(c[b],a)}},performComponentAction:function(j,d){switch(parseInt(d,10)){case (GrahamTechnology.grasp.ComponentType.Textfield):this.actionTextField(j);break;case (GrahamTechnology.grasp.ComponentType.Checkbox):this.actionCheckbox(j);break;case (GrahamTechnology.grasp.ComponentType.RadioButton):this.actionRadioButton(j);break;case (GrahamTechnology.grasp.ComponentType.Combo):this.actionCombo(j);break;case (GrahamTechnology.grasp.ComponentType.OptionMenu):this.actionOptionMenu(j);break;case (GrahamTechnology.grasp.ComponentType.PopdownCombo):this.actionPopdownCombo(j);break;case (GrahamTechnology.grasp.ComponentType.Button):this.actionButton(j);break;case (GrahamTechnology.grasp.ComponentType.Listbox):this.actionListbox(j);break;case (GrahamTechnology.grasp.ComponentType.Date):this.actionDate(j);break;case (GrahamTechnology.grasp.ComponentType.TextLabel):this.actionTextLabel(j);break;case (GrahamTechnology.grasp.ComponentType.ImageLabel):this.actionImageLabel(j);break;case (GrahamTechnology.grasp.ComponentType.WebLink):this.actionWebLink(j);break;case (GrahamTechnology.grasp.ComponentType.FormParagraph):this.actionParagraph(j);break;case (GrahamTechnology.grasp.ComponentType.Tree):this.actionTree(j);break;case (GrahamTechnology.grasp.ComponentType.ActiveXControl):this.actionActiveXControl(j);break;case (GrahamTechnology.grasp.ComponentType.GraphicBox):this.actionGraphicBox(j);break;case (GrahamTechnology.grasp.ComponentType.Form):this.actionForm(j);break;case (GrahamTechnology.grasp.ComponentType.FormHolder):this.actionFormHolder(j);break;case (GrahamTechnology.grasp.ComponentType.TabbedFormHolder):this.actionTabbedFormHolder(j);break;case (GrahamTechnology.grasp.ComponentType.AccordionFormHolder):this.actionAccordionFormHolder(j);break;case (GrahamTechnology.grasp.ComponentType.Spinner):this.actionSpinner(j);break;case (GrahamTechnology.grasp.ComponentType.Timer):this.actionTimer(j);break;case (GrahamTechnology.grasp.ComponentType.MenuButton):this.actionMenuButton(j);break;case (GrahamTechnology.grasp.ComponentType.TimeInputField):this.actionTimeInputField(j);break;case (GrahamTechnology.grasp.ComponentType.ScriptTextComponent):this.actionScriptTextComponent(j);break;case (GrahamTechnology.grasp.ComponentType.GraphicLine):this.actionGraphicLine(j);break;case (GrahamTechnology.grasp.ComponentType.CustomComponent):this.actionCustomComponent(j);break;case (GrahamTechnology.grasp.ComponentType.UNIDENTIFIED):var c=j.formID;var e=j.type;var b=j.value;var g=j.name;var a=GrahamTechnology.action.ComponentTypeResolver.getComponentID(j,g);if(GrahamTechnology.ui.Form.isUnfetchedTab(c)){logger.log("Detected an attempt to operate on a component living in an unfetched tab, will not refresh page.","info","ControlSettingAction.performComponentAction")}else{if(e==GrahamTechnology.grasp.AttributeNames.VISIBLE&&b=="FALSE"&&GrahamTechnology.Base.isUndefinedOrNull(YAHOO.util.Dom.get(a))){logger.log("Detected an attempt to hide an unidentified component. Assuming it is already invisible, will not refresh page.","info","ControlSettingAction.performComponentAction")}else{if(GrahamTechnology.grasp.TimerAttributes.contains(e)){logger.log("Detected an attempt to change the value of timer '"+g+"' not present on the screen. Ignore and don't page refresh","info","ControlSettingAction.performComponentAction")}else{var h=GrahamTechnology.ui.Form.getRegisteredComponent(a,c);if(!GrahamTechnology.action.componentIsActive(h,a,this,this.repeatPerformComponentAction,[j])){return}var f=new GrahamTechnology.util.ErrorMessage("An unidentified component was detected",g,c);f.actionType=e;f.value=b;GrahamTechnology.action.setRefresh(true,f)}}}break}},repeatPerformComponentAction:function(a){var b=GrahamTechnology.action.ComponentTypeResolver.resolveComponentType(a);this.performComponentAction(a,b)},actionTextField:function(a){var b=new GrahamTechnology.action.TextFieldAction();b.performAction(a)},actionCheckbox:function(a){var b=new GrahamTechnology.action.CheckBoxAction();b.performAction(a)},actionRadioButton:function(b){var a=new GrahamTechnology.action.RadioButtonAction();a.performAction(b)},actionCombo:function(b){var a=new GrahamTechnology.action.ComboAction();a.performAction(b)},actionOptionMenu:function(a){var b=new GrahamTechnology.action.OptionMenuAction();b.performAction(a)},actionPopdownCombo:function(a){var b=new GrahamTechnology.action.PopDownComboAction();b.performAction(a)},actionButton:function(a){var b=new GrahamTechnology.action.ButtonAction();b.performAction(a)},actionListbox:function(b){var a=new GrahamTechnology.action.ListboxAction();a.performAction(b)},actionDate:function(a){var b=new GrahamTechnology.action.DateAction();b.performAction(a)},actionTextLabel:function(a){var b=new GrahamTechnology.action.TextLabelAction();b.performAction(a)},actionImageLabel:function(a){var b=new GrahamTechnology.action.ImageLabelAction();b.performAction(a)},actionWebLink:function(a){var b=new GrahamTechnology.action.WebLinkAction();b.performAction(a)},actionParagraph:function(a){var b=new GrahamTechnology.action.ParagraphAction();b.performAction(a)},actionTree:function(a){var b=new GrahamTechnology.action.TreeAction();b.performAction(a)},actionActiveXControl:function(b){var a=new GrahamTechnology.action.ActiveXAction();a.performAction(b)},actionFormHolder:function(a){var b=new GrahamTechnology.action.FormHolderAction();b.performAction(a)},actionTabbedFormHolder:function(a){var b=new GrahamTechnology.action.TabbedFormHolderAction();b.performAction(a)},actionGraphicBox:function(a){var b=new GrahamTechnology.action.GraphicBoxAction();b.performAction(a)},actionForm:function(a){var b=new GrahamTechnology.action.FormAction();b.performAction(a)},actionSpinner:function(a){var b=new GrahamTechnology.action.SpinnerAction();b.performAction(a)},actionTimer:function(a){var b=new GrahamTechnology.action.TimerAction();b.performAction(a)},actionMenuButton:function(a){var b=new GrahamTechnology.action.MenuButtonAction();b.performAction(a)},actionTimeInputField:function(b){var a=new GrahamTechnology.action.TimeInputFieldAction();a.performAction(b)},actionScriptTextComponent:function(a){var b=new GrahamTechnology.action.ScriptTextComponentAction();b.performAction(a)},actionGraphicLine:function(a){var b=new GrahamTechnology.action.GraphicLineAction();b.performAction(a)},actionAccordionFormHolder:function(b){var a=new GrahamTechnology.action.AccordionFormHolderAction();a.performAction(b)},actionCustomComponent:function(a){var b=new GrahamTechnology.action.CustomComponentAction();b.performAction(a)}};GrahamTechnology.action.ComponentAction=function(){};GrahamTechnology.action.ComponentAction.prototype={formID:"",componentID:"",actionType:"",value:"",focusComponent:null,initComponentAction:function(a){this.formID=a.formID;this.componentID=a.name;this.actionType=a.type;this.value=a.value},performAction:function(a){var b=a.name;var c=GrahamTechnology.ui.Form.getRegisteredComponent(b);var d=GrahamTechnology.action.componentIsActive(c,b,this,this.performAction,[a]);if(!d){return}this.initComponentAction(a);this.performSpecificAction(a)},performSpecificAction:function(a){switch(this.actionType.toUpperCase()){case ("ENABLED"):this.performEnabledAction();break;case ("EDITABLE"):this.performEditableAction();break;case ("VISIBLE"):this.performVisibleAction();break;case ("FG_COLOUR"):this.performFG_ColourAction();break;case ("BG_COLOUR"):this.performBG_ColourAction();break;case ("FOCUS"):this.focusComponent=this;if(this.value.equalsIgnoreCase("TRUE")){if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.delayedFocusAction)){GrahamTechnology.ui.delayedFocusAction=this}YAHOO.util.Event.onDOMReady(this.performDelayedFocusAction,null,this)}else{this.performBlurAction()}break;case ("HINT_TEXT"):this.performHintTextAction();break;case ("LABEL"):this.performLabelAction();break;case ("PICTURE"):this.performPictureAction();break;case ("URL"):this.performURLAction();break;case ("TEXT"):this.performTextAction();break;case ("PARAGRAPH_CONTENT"):this.performParagraphContentAction();break;case ("INSERT_STRING"):this.performInsertStringAction();break;case ("ADDITIONAL_STYLING"):this.performAdditionalStylingAction();break;case ("HREF"):this.performHrefAction();break;case ("REL"):this.performRelAction();break;case ("TARGET"):this.performTargetAction();break;case ("DESCRIPTION"):this.performDescriptionAction();break;case ("ONCLICK"):this.performOnClickAction();break;case ("REQUIRED"):this.performRequiredAction();break}},performDelayedFocusAction:function(){YAHOO.util.Event.onDOMReady(this.focusComponent.performFocusAction,null,this)},performEnabledAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.enable()}else{a.disable()}},performEditableAction:function(){},performVisibleAction:function(){if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID)}else{GrahamTechnology.DOM.Element.hideById(this.componentID)}},performFG_ColourAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.setFG_Color(this.value)},performBG_ColourAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.setBG_Color(this.value)},performFocusAction:function(){var b=this.isComponentFocusable();if(b==true){try{var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}catch(c){logger.log("Could not set focus on component "+this.componentID+". Perhaps because it is hidden or disabled.","error","GrahamTechnology.action.ComponentAction.performFocusAction")}}},performHintTextAction:function(){(YAHOO.util.Dom.get(this.componentID)).title=this.value},performLabelAction:function(){logger.log("empty performLabelAction","info","ComponentAction.performLabelAction")},performPictureAction:function(){logger.log("empty performPictureAction","info","ComponentAction.performPictureAction")},performURLAction:function(){logger.log("empty performURLAction","info","ComponentAction.performURLAction")},performTextAction:function(){logger.log("empty performTextAction","info","ComponentAction.performTextAction")},performWebLinkContentAction:function(){logger.log("empty performWebLinkContentAction","info","ComponentAction.performWebLinkContentAction")},performParagraphContentAction:function(){logger.log("empty performParagraphContentAction","info","ComponentAction.performParagraphContentAction")},performInsertStringAction:function(){logger.log("empty performInsertStringAction","info","ComponentAction.performInsertStringAction")},performBlurAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performBlur()},isComponentFocusable:function(){var b=YAHOO.util.Dom.get(this.componentID);if(b.type=="hidden"||b.type=="HIDDEN"){return false}var a=b.getAttribute("disabled");if(a!=null&&a!=void 0&&(a=="disabled"||a)){return false}return GrahamTechnology.ui.Form.isVisibleFormID(this.formID)},performAdditionalStylingAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.performStyleAction(this.value)}},performHrefAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.performHrefAction(this.value)}},performRelAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.performRelAction(this.value)}},performTargetAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.performTargetAction(this.value)}},performRequiredAction:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!==null){var b=$("label[for='"+this.componentID+"']");if(b){if(this.value.equalsIgnoreCase("TRUE")){$("label[for='"+this.componentID+"']").addClass("requiredField")}else{$("label[for='"+this.componentID+"']").removeClass("requiredField")}}}}};GrahamTechnology.action.ComponentActionVSP=function(){};GrahamTechnology.action.ComponentActionVSP.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ComponentActionVSP.prototype.performVisibleAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.show()}else{a.hide()}};GrahamTechnology.action.InnerFormAction=function(){this.performAction=function(e,m){if(GrahamTechnology.util.AJAXProperties.accessibilityOn){GrahamTechnology.ui.Form.isLargeUpdate=true}var n=e[0];var o=n.parentFormID;var j=n.childFormID;var a=n.formHolderName;var f=n.innerFormHTML;var k=n.tabIndex;var c=GrahamTechnology.ui.Form.getRegisteredComponent(a);var l=GrahamTechnology.action.componentIsActive(c,a,this,this.performAction,[e]);if(!l){return}if(c!=null&&c.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){c.PreviousInnerFormID=c.InnerFormID;c.InnerFormID=j;if(j=="-1"){GrahamTechnology.ui.Form.onVisibilityChange.fire(a);c.replaceContents("",k,n)}else{if(c.contains(j)){GrahamTechnology.ui.Form.onVisibilityChange.fire(a);c.replaceContents(f,k,n);f=null}else{logger.log("Unable to find form holder "+a+". Refreshing page...","info","InnerFormAction.performAction");var h=new GrahamTechnology.util.ErrorMessage("Unable to find form holder",a,"");h.parentFormID=o;h.childFormID=j;GrahamTechnology.action.setRefresh(true,h)}}}else{if(!GrahamTechnology.Base.isUndefinedOrNull(c)&&((c.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder)||c.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder)){var b=false;if(!c.contains(j)){b=true;c.formIDs[c.formIDs.length]=j;var g=n.formHead_Transportables[0];GrahamTechnology.ui.Form.onVisibilityChange.fire(a,b);k=c.addTab(g.shortTitle,g.shortTitleClass,g.tabSelectedImage,g.tabImage,g.tabDisabledImage,g.tabButtonName,g.tabButtonImage,g.tabButtonRolloverImage,g.tabButtonCSSClass,g.tabButtonHintText,g.tabButtonMnemonic,n)}else{if(k===-1){k=c.getTabIndex(j)}}if(c.ComponentType===GrahamTechnology.grasp.ComponentType.AccordionFormHolder){var d=n.formHead_Transportables[0];c.changeTabTitle(j,d.shortTitle);c.changeTabTitleClass(j,d.shortTitleClass)}if(k>=0){c.replaceContents(f,k,n,b)}}else{if(c==null||!c.contains(j)){logger.log("Unable to find form holder "+a+". Refreshing page...","info","InnerFormAction.performAction");var h=new GrahamTechnology.util.ErrorMessage("Unable to find form holder",a,"");h.parentFormID=o;h.childFormID=j;GrahamTechnology.action.setRefresh(true,h)}}}}};GrahamTechnology.action.InnerFormAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.SetActiveTabAction=function(){this.performAction=function(c,f){var g=c[0];var e=g.commandID;var h=g.commandArg;var j=g.commandArg2;var a=g.commandCharArg;var d=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(j,h);var b=GrahamTechnology.ui.Form.getRegisteredComponent(d,h);GrahamTechnology.ui.Form.onVisibilityChange.fire(d,a);if(b!=null){GrahamTechnology.ui.Form.visibleFormIDs=null;if(b.ComponentType!=GrahamTechnology.grasp.ComponentType.AccordionFormHolder){b.tabSelectEvent(a)}else{logger.log("SetActiveTab not supported on AccordionFormHolder, please use Expand and Collapse methods")}}else{logger.log("Attempted to call SetActiveTab on a form that is not currently displayed or does not exist","warn","SetActiveTabAction.performAction")}}};GrahamTechnology.action.LowerWindowAction=function(){this.performAction=function(d,c){var a=d[0];var f=a.commandID;var e=a.commandArg;if(GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.Form[e])){logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");var b=new GrahamTechnology.util.ErrorMessage("Form doesn't exist.","",e);b.commandID=f;GrahamTechnology.action.setRefresh(true,b)}else{if(GrahamTechnology.ui.Form.Form[e].isPopup){logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");GrahamTechnology.action.setRefresh(true,null)}}}};GrahamTechnology.action.RaiseWindowAction=function(){this.performAction=function(d,c){var a=d[0];var f=a.commandID;var e=a.commandArg;if(GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.Form[e])){logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");var b=new GrahamTechnology.util.ErrorMessage("Form doesn't exist.","",e);b.commandID=f;GrahamTechnology.action.setRefresh(true,b)}else{if(!GrahamTechnology.ui.Form.Form[e].isPopup&&this.checkForAnyPopupForms()){logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");GrahamTechnology.action.setRefresh(true,null)}else{GrahamTechnology.ui.Form.Form[e].raise()}}};this.checkForAnyPopupForms=function(){for(var a in GrahamTechnology.ui.Form.Form){if(GrahamTechnology.ui.Form.Form[a].isPopup){return true}}return false}};GrahamTechnology.action.PopupFormAction=function(){this.performAction=function(f,h){var k=f[0];var b=k.formID;var d=k.popupFormHTML;if(!GrahamTechnology.ui.Form.Form[b]){logger.log("Popup new form "+b,"info","PopupFormAction.performAction");var l=-1;for(var j in GrahamTechnology.ui.Form.Form){l=j}var m=YAHOO.util.Dom.getElementsByClassName("mask","div",document.body);var c=new Array();for(var e=0;e<m.length;e++){if(m[e].style.display!="none"){c.push(m[e]);m[e].style.display="none"}}var g=GrahamTechnology.ui.Form.replacePopupFormContent(b,d);g=GrahamTechnology.ui.Form.evaluatePopupFormInitialisationScript(g);var a=GrahamTechnology.ui.Form.Form[b];a.dynamic=true;a.popup();GrahamTechnology.ui.Form.evaluatePopupFormContent(g);for(var e=0;e<c.length;e++){c[e].style.display="block"}if(GrahamTechnology.ui.FormParagraph){GrahamTechnology.ui.FormParagraph.initialiseParagraphs()}}else{logger.log("Popup existing form "+b+", do nothing","info","PopupFormAction.performAction")}}};GrahamTechnology.action.PopupFormAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.AffirmationAction=function(){this.performAction=function(f,l){clientAPI.expirePushConnection();var m=f[0];var a=m.affirmationText;var b=m.affirmationQuestion;var c=m.background;var h=m.foreground;var n=m.positiveText;var g=m.positiveBackground;var e=m.positiveForeground;var k=m.negativeText;var d=m.negativeBackground;var j=m.negativeForeground;GrahamTechnology.ui.Form.closeAffi();GrahamTechnology.ui.Form.getAffi().text=a;GrahamTechnology.ui.Form.getAffi().title=b;GrahamTechnology.ui.Form.getAffi().background=c;GrahamTechnology.ui.Form.getAffi().foreground=h;GrahamTechnology.ui.Form.getAffi().posText=n;GrahamTechnology.ui.Form.getAffi().posBackground=g;GrahamTechnology.ui.Form.getAffi().posForeground=e;GrahamTechnology.ui.Form.getAffi().negText=k;GrahamTechnology.ui.Form.getAffi().negBackground=d;GrahamTechnology.ui.Form.getAffi().negForeground=j;GrahamTechnology.ui.Form.popupAffi();clientAPI.startPing()}};GrahamTechnology.action.InformationAction=function(){this.performAction=function(e,d){var b=e[0];var g=b.informationText;var a=b.informationPrompt;var c=b.background;var f=b.foreground;if(GrahamTechnology.Base.isUndefinedOrNull(g)){g=""}if(GrahamTechnology.Base.isUndefinedOrNull(a)){a=""}if(GrahamTechnology.Base.isUndefinedOrNull(c)){c=""}if(GrahamTechnology.Base.isUndefinedOrNull(f)){f=""}GrahamTechnology.ui.Form.closeInfo();GrahamTechnology.ui.Form.getInfo().text=a+": "+g;GrahamTechnology.ui.Form.getInfo().background=c;GrahamTechnology.ui.Form.getInfo().foreground=f;GrahamTechnology.ui.Form.popupInfo()}};GrahamTechnology.action.PopdownFormAction=function(){this.performAction=function(d,j){var k=d[0];var g=k.commandID;var b=k.commandArg;var m=k.commandArg2;var h=k.commandCharArg;var c=k.commandCharArg2;var f;if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.Form[b])&&(h=="0")&&(m==0)){if(!GrahamTechnology.multiwindow.currentWindowIsPrimary()){var l=GrahamTechnology.multiwindow.getWindowHandle();if(!GrahamTechnology.Base.isUndefinedOrNull(l)&&l.formID===b){window.close()}else{GrahamTechnology.ui.Form.Form[b].popdown()}}else{GrahamTechnology.ui.Form.Form[b].popdown()}}else{var a=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(m,h);f=GrahamTechnology.ui.Form.getRegisteredComponent(a);if(GrahamTechnology.Base.isUndefinedOrNull(f)){logger.log("Attempting to popdown a form which does not exist","error","PopdownFormAction.performAction");return}else{if((f.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder)||(f.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder)){f.removeTab(b)}else{if(f.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){f.popdownForm(b)}else{logger.log("Refresh CommandID :"+g,"info","CommandAction.performAction");var e=new GrahamTechnology.util.ErrorMessage("Popping down a form containing in a formholder. not yet supported","",b);e.commandID=g;e.componentID=m;e.parentFormID=h;GrahamTechnology.action.setRefresh(true,e)}}}}$(document).trigger("formPopdown")}};GrahamTechnology.action.PopdownFormAction.prototype={};GrahamTechnology.action.RunFormInHolderAction=function(){this.performAction=function(b,g){var h=b[0];var f=h.commandID;var j=h.commandArg;var k=h.commandArg2;var d=h.commandCharArg;var e=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(k,j);var a=GrahamTechnology.ui.Form.getRegisteredComponent(e,j);if(a!=null){GrahamTechnology.ui.Form.onVisibilityChange.fire(e);a.PreviousInnerFormID=a.InnerFormID;a.InnerFormID=d;a.runForm(d,h);$(document).trigger("runFormInHolder")}else{logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");var c=new GrahamTechnology.util.ErrorMessage("FormHolder doesn't exist","",k);c.commandID=f;GrahamTechnology.action.setRefresh(true,c)}}};GrahamTechnology.action.RunFormInHolderAction.prototype={};GrahamTechnology.action.FormTreeValueAction=function(){this.performAction=function(f,x){var g=new Object();var b=new Object();var r=new Object();var c=[];var B=true;for(var A=0;A<f.length;A++){var h=f[A];var u=h.formID;var o=h.objectName;var d=h.nodeID;var t;g[A]=o;if(GrahamTechnology.Base.isUndefinedOrNull(r[o])){r[o]=[]}if(d==-1){var y=h.objectID;o=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(y,u);var D=GrahamTechnology.ui.Form.getRegisteredComponent(o);logger.log("Clearing tree..."+o,"info","FormTreeValueAction.performAction");D.removeAll();D.redraw();return}var n=h.parentID;var s=h.imageID;var k=parseInt(h.flags,10);var l=false;var a=false;if((k&GrahamTechnology.grasp.FormTreeValueFlags.ISSELECTED_BIT)!=0){var C=r[o];C[C.length]=d}if((k&GrahamTechnology.grasp.FormTreeValueFlags.ISEXPANDED_BIT)!=0){a=true}var D=GrahamTechnology.ui.Form.getRegisteredComponent(o);if(D==null||GrahamTechnology.ui.Form.isUnfetchedTab(u)){logger.log("Unable to find tree "+o,"info","FormTreeValueAction.performAction");return}else{var w=h.value;if(n==GrahamTechnology.util.AJAXConstants.FormTreeNodeModifyConstants.MODIFY_SINGLE_VALUE){var v=D.treeView.getYUITreeView().getNodeByProperty("id",d);v.label=w}else{if(A==0){logger.log("Rebuilding tree..."+o,"info","FormTreeValueAction.performAction");var q=D.treeView.getYUITreeView().currentFocus;if(q!=null){D.focusedNodeID=q.data.id;setTimeout(function(){document.body.focus()},0)}D.removeChildren(D.treeView.getYUITreeView().getRoot(),D)}if(d==0&&!D.showRoot){continue}else{if(n==0&&!D.showRoot){n=-1}}D.addNode(d,n,w,s,a)}}}var p=new Object();for(var z in g){var e=g[z];if(!GrahamTechnology.Base.isUndefinedOrNull(p[e])){continue}p[e]=e;var D=GrahamTechnology.ui.Form.getRegisteredComponent(e);if(D!=null){D.redraw();if(!GrahamTechnology.Base.isUndefinedOrNull(r[e])){D.selectNodes(r[e])}}if(!GrahamTechnology.Base.isUndefinedOrNull(D.focusedNodeID)){var m=D.treeView.getYUITreeView().getNodeByProperty("id",D.focusedNodeID);if(m!=null){setTimeout(function(){try{m.focus()}catch(j){}D.focusedNodeID=null},0)}}}}};GrahamTechnology.action.FormTreeValueAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.FormTreeImageListAction=function(){this.performAction=function(d,j){for(i=0;i<d.length;i++){var k=d[i];var c=k.formID;var a=k.objectID;var f=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(a,c);var b=GrahamTechnology.ui.Form.getRegisteredComponent(f,c);if(b==null){logger.log("Unable to find tree "+b,"info","FormTreeImageListAction.performAction");break}else{var g=k.imageID;var e=k.imageName;var h=parseInt(k.imageWidth,10);b.addImagePath(g,e,h)}}}};GrahamTechnology.action.FormTreeImageListAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.TextFieldAction=function(){};GrahamTechnology.action.ActiveXAction=function(){this.processMethodCall=function(b){var a=b;this.componentID=a.objectName;var d=(a.hasResult=="T");var c=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);c.callMethod(a.methodName,a.parameters,d)}};GrahamTechnology.action.ActiveXAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TextLabelAction=function(){};GrahamTechnology.action.TextFieldAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TextFieldAction.prototype.performDelayedFocusAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);var c=YAHOO.util.Dom.get(this.componentID);var b=YAHOO.util.Dom.hasClass(c,"tinymce");if(!b){YAHOO.util.Event.onDOMReady(this.focusComponent.performFocusAction,null,this)}else{a.doFocus()}};GrahamTechnology.action.TextFieldAction.prototype.performEditableAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);var c=YAHOO.util.Dom.get(this.componentID);var b=YAHOO.util.Dom.hasClass(c,"tinymce");var d=(a?a.spellCheck:false);if(this.value.equalsIgnoreCase("TRUE")){if(GrahamTechnology.Base.isUndefinedOrNull(a.yahooEditor)&&!b){c.readOnly=false;if(d&&a.spell){a.spell.removeReadOnly()}}else{a.enable()}}else{if(GrahamTechnology.Base.isUndefinedOrNull(a.yahooEditor)&&!b){c.readOnly=true;if(d&&a.spell){a.spell.setReadOnly()}}else{a.disable()}}};GrahamTechnology.action.TextFieldAction.prototype.performVisibleAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){if(a.yahooEditor){GrahamTechnology.DOM.Element.showById(this.componentID+"_envelope");a.adjustEditorHeight()}else{GrahamTechnology.DOM.Element.showById(this.componentID);if(a&&a.spell){a.spell.show()}}}else{if(a.yahooEditor){GrahamTechnology.DOM.Element.hideById(this.componentID+"_envelope")}else{GrahamTechnology.DOM.Element.hideById(this.componentID);if(a&&a.spell){a.spell.hide()}}}};GrahamTechnology.action.TextFieldAction.prototype.performHintTextAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(GrahamTechnology.Base.isUndefinedOrNull(a.yahooEditor)){(YAHOO.util.Dom.get(this.componentID)).title=this.value;if(a&&a.spell){a.spell.updateHint(this.value)}}else{(YAHOO.util.Dom.get(this.componentID+"_envelope")).title=this.value}};GrahamTechnology.action.TextFieldAction.prototype.performInsertStringAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.insertString(this.value)}};GrahamTechnology.action.TextFieldAction.prototype.performRequiredAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){var b=$("label[for='"+this.componentID+"']");if(b){if(this.value.equalsIgnoreCase("TRUE")){$("label[for='"+this.componentID+"']").addClass("requiredField")}else{$("label[for='"+this.componentID+"']").removeClass("requiredField")}}}};GrahamTechnology.action.TextLabelAction=function(){};GrahamTechnology.action.TextLabelAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TextLabelAction.prototype.performLabelAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){this.value=GrahamTechnology.util.unEncodeHtmlCharacters(this.value);a.changeLabelText(GrahamTechnology.util.escapeCtrlCharacters(this.value))}};GrahamTechnology.action.GraphicBoxAction=function(){};GrahamTechnology.action.GraphicBoxAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.GraphicBoxAction.prototype.performLabelAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.changeLabelText(this.value)}};GrahamTechnology.action.ImageLabelAction=function(){};GrahamTechnology.action.ImageLabelAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.ImageLabelAction.prototype.performPictureAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.replacePicture(this.value)}};GrahamTechnology.action.ImageLabelAction.prototype.performHintTextAction=function(){var a=YAHOO.util.Dom.get(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.title=this.value}var b=YAHOO.util.Dom.get(this.componentID+"_img");if(!GrahamTechnology.Base.isUndefinedOrNull(b)){b.title=this.value;b.alt=this.value}};GrahamTechnology.action.CheckBoxAction=function(){};GrahamTechnology.action.CheckBoxAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.CheckBoxAction.prototype.performVisibleAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.show()}else{a.hide()}};GrahamTechnology.action.CheckBoxAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.CheckBoxAction.prototype.performFG_ColourAction=function(){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)).style.color=this.value};GrahamTechnology.action.CheckBoxAction.prototype.performBG_ColourAction=function(){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)).style.background=this.value};GrahamTechnology.action.CheckBoxAction.prototype.performLabelAction=function(){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Label)).innerHTML=this.value};GrahamTechnology.action.RadioButtonAction=function(){};GrahamTechnology.action.RadioButtonAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.RadioButtonAction.prototype.performVisibleAction=function(){if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)}else{GrahamTechnology.DOM.Element.hideById(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)}};GrahamTechnology.action.RadioButtonAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.RadioButtonAction.prototype.performHintTextAction=function(){if(!GrahamTechnology.util.AJAXProperties.accessibilityOn){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)).title=this.value}(YAHOO.util.Dom.get(this.componentID)).title=this.value};GrahamTechnology.action.RadioButtonAction.prototype.performFG_ColourAction=function(){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)).style.color=this.value};GrahamTechnology.action.RadioButtonAction.prototype.performBG_ColourAction=function(){(YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Envelope)).style.background=this.value};GrahamTechnology.action.RadioButtonAction.prototype.performLabelAction=function(){YAHOO.util.Dom.get(this.componentID+"_"+GrahamTechnology.action.EventType.Label).innerHTML=this.value};GrahamTechnology.action.ComboAction=function(){};GrahamTechnology.action.ComboAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.ComboAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.OptionMenuAction=function(){};GrahamTechnology.action.OptionMenuAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.OptionMenuAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.PopDownComboAction=function(){this.performFocusAction=function(){var b=this.isComponentFocusable();if(b==true){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}}};GrahamTechnology.action.PopDownComboAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.PopDownComboAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.RedirectAction=function(){this.redirect=function(a){var b=a.commandCharArg;if(b==""){var c=window.location;window.location=c}else{if(a.commandArg&&a.commandArg===1){GrahamTechnology.iframecomms.navigateParentPage(b)}else{window.location=a.commandCharArg}}}};GrahamTechnology.action.RedirectAction.prototype=new GrahamTechnology.action.RedirectAction();GrahamTechnology.action.TreeAction=function(){this.objectID=-1;this.treeName="";this.treeComponent="";this.nodeID=-1;this.initAction=function(a){if(a.transportCode=="85"){this.componentID=a.name;this.actionType=a.type;this.value=a.value}else{var b=a.commandArg;this.objectID=a.commandArg2;this.treeName=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(this.objectID,b);this.treeComponent=GrahamTechnology.ui.Form.getRegisteredComponent(this.treeName,b);this.nodeID=parseInt(a.commandCharArg,10)}};this.performAction=function(a,b){this.initAction(a);this.performSpecificAction(a,b)};this.performSpecificAction=function(a){switch(this.actionType.toUpperCase()){case ("VISIBLE"):this.performVisibleAction();break;case ("ENABLED"):this.performEnabledAction(a.formID);break;case ("BG_COLOUR"):this.performBackgroundColourAction(a.formID);break;case ("FG_COLOUR"):this.performForegroundColourAction(a.formID);break;case ("HINT_TEXT"):this.performHintTextAction(a.formID);break;case ("FOCUS"):this.performFocusAction();break;case ("ADDITIONAL_STYLING"):this.performAdditionalStylingAction(a.formID);break;default:logger.log("No handler for tree action "+this.actionType.toUpperCase(),"info","TreeAction.performSpecificAction");break}};this.performVisibleAction=function(){var a=YAHOO.util.Dom.get(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.style.visibility="visible"}else{a.style.visibility="hidden"}};this.performEnabledAction=function(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,b);if(this.value.equalsIgnoreCase("TRUE")){a.enable()}else{a.disable()}};this.performBackgroundColourAction=function(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,b);a.setBackgroundColour(this.value)};this.performForegroundColourAction=function(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,b);a.setForegroundColour(this.value)};this.performHintTextAction=function(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,b);a.setHintText(this.value)};this.performFocusAction=function(){var a=YAHOO.widget.TreeView.getTree(this.componentID);if(a){setTimeout(function(){a.root.children[0].focus()},20)}};this.performAdditionalStylingAction=function(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,b);if(a){a.performStyleAction(this.value)}}};GrahamTechnology.action.TreeAction.prototype.performVisibleAction=function(){var a=YAHOO.util.Dom.get(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.style.visibility="visible"}else{a.style.visibility="hidden"}};GrahamTechnology.action.TreeAction.prototype={};GrahamTechnology.action.SelectTreeNodeAction=function(){this.performSpecificAction=function(a){if(this.treeComponent==null){logger.log("Unable to find tree "+this.treeName,"info","SelectTreeNodeAction.performAction");return}else{if(this.nodeID==-1){this.treeComponent.selectAllNodes()}else{var b=[];b[0]=this.nodeID;this.treeComponent.selectNodes(b)}}}};GrahamTechnology.action.SelectTreeNodeAction.prototype=new GrahamTechnology.action.TreeAction();GrahamTechnology.action.DeSelectTreeNodeAction=function(){this.performSpecificAction=function(b){if(this.treeComponent==null){logger.log("Unable to find tree "+this.treeName,"info","DeSelectTreeNodeAction.performAction");return}else{if(this.nodeID==-1){this.treeComponent.deselectAllNodes()}else{var a=[];a[0]=this.nodeID;this.treeComponent.deselectNodes(a)}}}};GrahamTechnology.action.DeSelectTreeNodeAction.prototype=new GrahamTechnology.action.TreeAction();GrahamTechnology.action.ExpandCollapseTreeNodeAction=function(){this.performSpecificAction=function(a,b){if(this.treeComponent==null){logger.log("Unable to find tree "+this.treeName,"info","ExpandCollapseTreeNodeAction.performAction");return}else{if(b){this.treeComponent.expandNode(this.nodeID)}else{this.treeComponent.collapseNode(this.nodeID)}}}};GrahamTechnology.action.ExpandCollapseTreeNodeAction.prototype=new GrahamTechnology.action.TreeAction();GrahamTechnology.action.ExpandCollapseTabAction=function(){this.performAction=function(b){var h=b[0];var f=h.commandID;var j=h.commandArg;var d=h.commandArg2;var a=h.commandCharArg;var e=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(d,j);var k=GrahamTechnology.ui.Form.getRegisteredComponent(e,j);if(GrahamTechnology.Base.isUndefinedOrNull(k)){logger.log("Stacked form holder does not exist yet...")}else{if(k.isStackedFormHolder()){if(!GrahamTechnology.Base.isUndefinedOrNull(k)){var g=f==GrahamTechnology.grasp.CommandType.EXPAND_TAB_Transportable;k.expandTab(a,g)}else{logger.log("Refresh CommandID :"+f,"info","CommandAction.performAction");var c=new GrahamTechnology.util.ErrorMessage("Form doesn't exist or it's a popup form","",formID);c.commandID=f;GrahamTechnology.action.setRefresh(true,c)}}}}};GrahamTechnology.action.ExpandCollapseTabAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.AccordionSetFillStrategyAction=function(){this.performAction=function(c){var h=c[0];var g=h.commandID;var j=h.commandArg;var e=h.commandArg2;var f=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(e,j);var b=GrahamTechnology.ui.Form.getRegisteredComponent(f,j);if(!b){logger.log("Accordion form holder ("+e+") does not exist yet.");return}var d=h.commandCharArg;var a=h.commandCharArg2;if(!GrahamTechnology.ui.AccordionFormHolder.prototype.isValidFillStrategy(a)){logger.log(a+" is not a valid fillStrategy for accordion.");return}b.setFillStrategy(d,a)}};GrahamTechnology.action.AccordionSetFillStrategyAction.prototype=new GrahamTechnology.action.CommandAction();GrahamTechnology.action.InformationPopdownAction=function(){this.performAction=function(a){GrahamTechnology.ui.Form.closeInfo()}};GrahamTechnology.action.InformationPopdownAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ClearFormAction=function(){this.performAction=function(b){var a=b[0];var c=a.commandArg;GrahamTechnology.ui.Form.clearForm(c)}};GrahamTechnology.action.ClearFormAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ButtonAction=function(){this.Button=GrahamTechnology.ui.Button;this.performSpecificAction=function(a){switch(this.actionType.toUpperCase()){case ("PICTURE"):logger.log("PICTURE","info","ButtonAction.performSpecificAction");this.performPictureAction();break;case ("ROLLOVER_IMAGE"):logger.log("ROLLOVER","info","ButtonAction.performSpecificAction");this.performRolloverAction();break;case ("CLICKED_IMAGE"):logger.log("CLICKED_IMAGE","info","ButtonAction.performSpecificAction");this.performClickedImageAction();break;case ("DISABLED_IMAGE"):logger.log("DISABLED_IMAGE","info","ButtonAction.performSpecificAction");this.performDisabledImageAction();break;case ("HINT_TEXT"):logger.log("HINT_TEXT","info","ButtonAction.performSpecificAction");var b=YAHOO.util.Dom.get(this.componentID);var c=b.getElementsByTagName("img");if(c.length==1){c[0].alt=this.value}GrahamTechnology.action.ButtonAction.prototype.performSpecificAction.call(this,a);break;case ("ACCEL"):logger.log("ACCEL","info","ButtonAction.performAccelAction");this.performAccelAction();break;default:GrahamTechnology.action.ButtonAction.prototype.performSpecificAction.call(this,a)}};this.performLabelAction=function(){logger.log("performLabelAction","info","ButtonAction.performLabelAction");var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.changeLabelText(this.value)}};this.performEnabledAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performEnabledAction(this.value)};this.performVisibleAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performVisibleAction(this.value)};this.performPictureAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performPictureAction(this.value)};this.performRolloverAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performRolloverAction(this.value)};this.performClickedImageAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performClickedImageAction(this.value)};this.performDisabledImageAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performDisabledImageAction(this.value)};this.performAccelAction=function(){logger.log("performAccelAction","info","ButtonAction.performAccelAction");var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.changeAccessKey(this.value)}}};GrahamTechnology.action.ButtonAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ListboxAction=function(){this.performSpecificAction=function(a){switch(this.actionType.toUpperCase()){case ("CELL_BG_COLOUR"):this.performCellBG_ColourAction();break;case ("CELL_FG_COLOUR"):this.performCellFG_ColourAction();break;default:GrahamTechnology.action.ListboxAction.prototype.performSpecificAction.call(this,a)}};this.getCellColourInfo=function(){var d={};var e=parseInt(this.value.substring(0,this.value.indexOf(":")),10);d.row=e-1;var a=parseInt(this.value.substring(this.value.indexOf(":")+1,this.value.lastIndexOf(":")),10);d.col=a-1;if(!YAHOO.lang.isNumber(d.col)||!YAHOO.lang.isNumber(d.row)){return null}var c=this.value.substring(this.value.lastIndexOf(":")+1);var b=this.value.lastIndexOf("#");if(b!=-1||c==""){d.colour=c;return d}return null};this.performCellBG_ColourAction=function(){var b=this.getCellColourInfo();if(b==null){return}var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.setCellBGColour(b.row,b.col,b.colour)};this.performCellFG_ColourAction=function(){var b=this.getCellColourInfo();if(b==null){return}var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.setCellFGColour(b.row,b.col,b.colour)};this.performFocusAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}};GrahamTechnology.action.ListboxAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ListboxAction.prototype.performBG_ColourAction=function(){var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);var a=YAHOO.util.Dom.get(this.componentID);if(b.myDataTable){b.setBG_Color(this.value)}else{var d="t"+this.componentID;var e=YAHOO.util.Dom.get(d);if(e){for(var c=0;c<e.rows[0].cells.length;c++){e.rows[0].cells[c].style.backgroundColor=this.value}e.style.backgroundColor=this.value}a.style.backgroundColor=this.value}};GrahamTechnology.action.ListboxAction.prototype.performFG_ColourAction=function(){var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);var a=YAHOO.util.Dom.get(this.componentID);if(b.myDataTable){b.setFG_Color(this.value)}else{var d="t"+this.componentID;var e=YAHOO.util.Dom.get(d);if(e){for(var c=0;c<e.rows[0].cells.length;c++){e.rows[0].cells[c].style.color=this.value;if(YAHOO.env.ua.ie==7){var f=GrahamTechnology.DOM.getElementsByTagAndClass(e.rows[0].cells[c],"TH","headRow");if(f&&f[0]){f[0].style.color=this.value}}}}a.style.color=this.value}};GrahamTechnology.action.ListboxAction.prototype.performVisibleAction=function(){if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID);var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.updateInnerLayout()}else{GrahamTechnology.DOM.Element.hideById(this.componentID)}};GrahamTechnology.action.DateAction=function(){};GrahamTechnology.action.DateAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.DateAction.prototype.performEditableAction=function(){this.performEnabledAction()};GrahamTechnology.action.DateAction.prototype.performFG_ColourAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.foregroundColour=this.value;a.performFG_ColourAction()};GrahamTechnology.action.DateAction.prototype.performBG_ColourAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.backgroundColour=this.value;a.performBG_ColourAction()};GrahamTechnology.action.DateAction.prototype.performFocusAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()};GrahamTechnology.action.DateAction.prototype.performHintTextAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.hintText=this.value;a.performHintTextAction()};GrahamTechnology.action.DateAction.prototype.performVisibleAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a.dateWidgetType==GrahamTechnology.util.Date.DateWidgetType.COMBO){if(this.value.equalsIgnoreCase("TRUE")){a.show()}else{a.hide()}}else{if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID+"_wrapper")}else{GrahamTechnology.DOM.Element.hideById(this.componentID+"_wrapper")}}};GrahamTechnology.action.ParagraphAction=function(){};GrahamTechnology.action.ParagraphAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.ParagraphAction.prototype.performURLAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.displayURL(this.value)}};GrahamTechnology.action.ParagraphAction.prototype.performTextAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.update(this.value)}};GrahamTechnology.action.ParagraphAction.prototype.performParagraphContentAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setText(this.value)}};GrahamTechnology.action.ParagraphAction.prototype.performFocusAction=function(){var b=this.isComponentFocusable();if(b==true){var f=YAHOO.util.Dom.getElementsBy(new Function("return true;"),"a",this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(f)&&f.length>0){try{f[0].focus()}catch(d){logger.log("Could not set focus on component "+f[0].id+". Perhaps because it is hidden or disabled.","error","GrahamTechnology.action.ParagraphAction.performFocusAction")}}var c=YAHOO.util.Dom.get("iFrame_"+this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){try{c.contentWindow.focus()}catch(d){logger.log("Could not set focus on component "+c.id+". Perhaps because it is hidden or disabled.","error","GrahamTechnology.action.ParagraphAction.performFocusAction")}}var a=YAHOO.util.Dom.get(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){try{a.focus()}catch(d){logger.log("Could not set focus on component "+a.id+". Perhaps because it is hidden or disabled.","error","GrahamTechnology.action.ParagraphAction.performFocusAction")}}}};GrahamTechnology.action.WebLinkAction=function(){};GrahamTechnology.action.WebLinkAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.WebLinkAction.prototype.performTextAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setText(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performHrefAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setHref(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performRelAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setRel(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performTargetAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setTarget(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performDescriptionAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setDescription(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performOnClickAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(a!=null){a.setOnClick(this.value)}};GrahamTechnology.action.WebLinkAction.prototype.performFocusAction=function(){var a=this.isComponentFocusable();if(a==true){var b=YAHOO.util.Dom.getElementsBy(new Function("return true;"),"a",this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(b)&&b.length>0){try{b[0].focus()}catch(c){logger.log("Could not set focus on component "+b[0].id+". Perhaps because it is hidden or disabled.","error","GrahamTechnology.action.WebLinkAction.performFocusAction")}}}};GrahamTechnology.action.FormListValueAction=function(){};GrahamTechnology.action.FormListValueAction.prototype={performAction:function(d){if(d.length>0){var h=d[0].objectID;var g=d[0].formID;var a=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(h,g);var b=GrahamTechnology.ui.Form.getRegisteredComponent(a,g);var e=GrahamTechnology.action.componentIsActive(b,g,this,this.performAction,[d]);if(!e){return}if(b==null){logger.log("Could not find component "+h+" on form with id "+g,"info","FormListValueAction.performAction");return}if(b.ComponentType==GrahamTechnology.grasp.ComponentType.Listbox){this.performListboxAction(d,b);return}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.MenuButton){return}}b.clearChildNodes();for(var c=0;c<d.length;c++){if(d[c].value==null){b.clearChildNodes();continue}this.performComponentAction(d[c],b,c,d)}var f=parseInt(b.ComponentType,10);switch(f){case (GrahamTechnology.grasp.ComponentType.FormParagraph):case (GrahamTechnology.grasp.ComponentType.WebLink):b.endUpdate();GrahamTechnology.ui.Form.updateTabOrder();break;case (GrahamTechnology.grasp.ComponentType.PopdownCombo):case (GrahamTechnology.grasp.ComponentType.Combo):case (GrahamTechnology.grasp.ComponentType.OptionMenu):b.selectPreviousRow();break}}},performListboxAction:function(b,a){this.setOptionListIDs(b,a);a.startUpdate();this.constructContents(b,a);a.endUpdate();this.restorePreviousState(a);if(a.paginatedList){this.setPage(b,a)}},setPage:function(e,c){var a=-1;var b;for(var d=0;d<e.length;d++){if(e[d].selected){a=d;break}}if(a<0){b=1}else{var f=c.paginator.getRowsPerPage();if(f){b=(a-(a%f))/f+1}else{b=1}}c.setPage(b)},setOptionListIDs:function(c,a){for(var b=0;b<c.length;b++){var d=c[b].optionListIDs;if(d!=null){var e=d;if(e!=null&&e!=""){a.setOptionListIDs(b,e)}}}},constructContents:function(c,a){a.clearChildNodes();for(var b=0;b<c.length;b++){if(c[b].value==null){continue}this.performComponentAction(c[b],a,b,c)}},restorePreviousState:function(b){var a=YAHOO.util.Dom.get(b.id+"_filter");if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&a.value!=""){b.lastFilterValue="";b.doFilter(a,"t"+b.id)}var c=b.sortedColumn;if(c!=-1&&!GrahamTechnology.Base.isUndefinedOrNull(c)){b.sortedColumn=-1;b.previousSelectedRow=-1;b.previouslyEdited=true;b.sortList(c)}},performComponentAction:function(j,e,f,c){var a=e.ComponentType;switch(parseInt(a,10)){case (GrahamTechnology.grasp.ComponentType.PopdownCombo):case (GrahamTechnology.grasp.ComponentType.Combo):case (GrahamTechnology.grasp.ComponentType.OptionMenu):var g=j.value+"";var b=j.selected+"";e.add(g,b);break;case (GrahamTechnology.grasp.ComponentType.FormParagraph):case (GrahamTechnology.grasp.ComponentType.WebLink):var g=j.value+"";e.update(g,f);break;case (GrahamTechnology.grasp.ComponentType.Listbox):var h=GrahamTechnology.util.AJAXProperties.listBoxMaxRowsBeforeIE6PageRefresh;if(c.length>h&&GrahamTechnology.util.RenderingEngines.isIE_6()){var d=new GrahamTechnology.util.ErrorMessage("Dynamic list generation too slow. Over 20 list items.",e.id,e.formID);GrahamTechnology.action.setRefresh(true,d);return}if(f==0){e.originalContents=new Array();e.updateColourArrays(c);e.addRows(c)}break;default:var d=new GrahamTechnology.util.ErrorMessage("Unknown Component.",e.id,e.formID);GrahamTechnology.action.setRefresh(true,d);break}}};GrahamTechnology.action.FormListUpdateAction=function(){};GrahamTechnology.action.FormListUpdateAction.prototype={performAction:function(j){if(j.length>0){var d=j[0].objectID;var e=j[0].formID;var b=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(d,e);var k=GrahamTechnology.ui.Form.getRegisteredComponent(b,e);var m=GrahamTechnology.action.componentIsActive(k,e,this,this.performAction,[j]);if(!m){return}var g=k.ComponentType==GrahamTechnology.grasp.ComponentType.Listbox;var a=true;var f=j.length;for(var h=0;h<f;h++){var n=j[h];var o=parseInt(n.updateType,10);var l=parseInt(n.linePos,10);switch(o){case (GrahamTechnology.grasp.ListUpdateTypes.ADD_END):if(g||k.ComponentType==GrahamTechnology.grasp.ComponentType.FormParagraph||k.ComponentType==GrahamTechnology.grasp.ComponentType.WebLink){this.updateOptionListIDs(n,k,l);if(a){k.startUpdate();a=false}k.addRow(n,l);if(h==j.length-1||parseInt(j[h+1].updateType,10)!=GrahamTechnology.grasp.ListUpdateTypes.ADD_END){if(GrahamTechnology.grasp.ComponentType.FormParagraph){this.endComponentUpdate(k)}else{setTimeout(this.endComponentUpdate(k),0)}}}else{k.addRowAndUpdate(n,l)}break;case (GrahamTechnology.grasp.ListUpdateTypes.SELECT):if(!g||k.rowSelect){k.selectRow(n,l)}break;case (GrahamTechnology.grasp.ListUpdateTypes.EDIT):this.updateOptionListIDs(n,k,l);k.editRow(n,l);break;case (GrahamTechnology.grasp.ListUpdateTypes.DESELECT):k.deselectRow(l);break;case (GrahamTechnology.grasp.ListUpdateTypes.REMOVE):if(g){k.removeOptionListIDs(l)}if(g&&h==0){k.startUpdate()}var c=GrahamTechnology.ui.Form.getForm(e);c.renderedOptionLists={};k.removeRow(l);if(g&&h==f-1){k.endUpdate()}break}}}},endComponentUpdate:function(a){a.endUpdate();firstAddCommand=true},updateOptionListIDs:function(a,b,e){var c=a.optionListIDs;if(c!=null){var d=c;if(d!=null&&d!=""){b.setOptionListIDs(e,d)}}}};GrahamTechnology.action.FormTextValueAction=function(){};GrahamTechnology.action.FormTextValueAction.prototype={performAction:function(d,c,e){for(var b=0;b<d.length;b++){var a=GrahamTechnology.action.ComponentTypeResolver.resolveComponentType(d[b]);this.performComponentAction(d[b],a,e)}},performComponentAction:function(a,c,d){switch(parseInt(c,10)){case (GrahamTechnology.grasp.ComponentType.Textfield):this.textFieldValueAction(a,d);break;case (GrahamTechnology.grasp.ComponentType.Checkbox):this.checkboxValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.RadioGroup):this.radioValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.Combo):this.comboValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.OptionMenu):this.optionMenuValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.PopdownCombo):this.popdownComboValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.Date):this.dateValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.FormParagraph):this.paragraphValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.TimeInputField):this.timeValueAction(a);break;case (GrahamTechnology.grasp.ComponentType.UNIDENTIFIED):var b=GrahamTechnology.ui.Form.getRegisteredComponent(a.fieldname,a.formID);if(!GrahamTechnology.action.componentIsActive(b,a.fieldname,this,this.repeatPerformComponentAction,[a])){return}GrahamTechnology.action.FormTextAction.handleUnidentifiedComponentType(a);break}},repeatPerformComponentAction:function(a){var b=GrahamTechnology.action.ComponentTypeResolver.resolveComponentType(a);this.performComponentAction(a,b)},textFieldValueAction:function(a,c){var b=new GrahamTechnology.action.TextFieldValueAction();b.performAction(a,c)},checkboxValueAction:function(a){var b=new GrahamTechnology.action.CheckboxValueAction();b.performAction(a)},radioValueAction:function(a){var b=new GrahamTechnology.action.RadioButtonValueAction();b.performAction(a)},comboValueAction:function(b){var a=new GrahamTechnology.action.ComboValueAction();a.performAction(b)},optionMenuValueAction:function(a){var b=new GrahamTechnology.action.OptionMenuValueAction();b.performAction(a)},popdownComboValueAction:function(a){var b=new GrahamTechnology.action.PopDownComboValueAction();b.performAction(a)},dateValueAction:function(a){var b=new GrahamTechnology.action.DateValueAction();b.performAction(a)},paragraphValueAction:function(a){var b=new GrahamTechnology.action.ParagraphValueAction();b.performAction(a)},timeValueAction:function(a){var b=new GrahamTechnology.action.TimeValueAction();b.performAction(a)}};GrahamTechnology.action.ComponentValueAction=function(){};GrahamTechnology.action.ComponentValueAction.prototype={formID:"",componentID:"",value:"",selected:"",retrieveAttributes:function(a){this.formID=a.formID;this.componentID=a.fieldname;this.value=a.value},performAction:function(a){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.update(this.value)}};GrahamTechnology.action.TextFieldValueAction=function(){};GrahamTechnology.action.TextFieldValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.TextFieldValueAction.prototype.performAction=function(a,c){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.setValue(this.value,c);b.removeDirty()};GrahamTechnology.action.CheckboxValueAction=function(){};GrahamTechnology.action.CheckboxValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.CheckboxValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);if(this.value.equalsIgnoreCase("TRUE")){(YAHOO.util.Dom.get(this.componentID)).checked=true}else{(YAHOO.util.Dom.get(this.componentID)).checked=false}};GrahamTechnology.action.RadioButtonValueAction=function(){};GrahamTechnology.action.RadioButtonValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.RadioButtonValueAction.prototype.performAction=function(b){this.retrieveAttributes(b);var a=this.value;var e=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,this.formID);if(GrahamTechnology.Base.isUndefinedOrNull(e[a])){var d=null;for(var c in e){d=YAHOO.util.Dom.get(e[c].toString());if(d!=null){d.checked=false}}}else{YAHOO.util.Dom.get(e[a].toString()).checked=true}};GrahamTechnology.action.RadioComponentAction=function(){this.initComponentAction=function(b){var a;var d=false;var e=GrahamTechnology.ui.Form.getForm(this.formID);var c=e[b.fieldname];for(a in c){if(a==b.value){d=true;break}}this.actionType=b.type;this.componentID=c[a].toString()}};GrahamTechnology.action.RadioComponentAction.prototype=new GrahamTechnology.action.ComponentAction();GrahamTechnology.action.ComboValueAction=function(){};GrahamTechnology.action.ComboValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.ComboValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);(YAHOO.util.Dom.get(this.componentID)).selectedIndex=this.value};GrahamTechnology.action.OptionMenuValueAction=function(){};GrahamTechnology.action.OptionMenuValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.OptionMenuValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);for(var b=0;b<(YAHOO.util.Dom.get(this.componentID)).length;b++){if(((YAHOO.util.Dom.get(this.componentID))[b].text)==this.value){(YAHOO.util.Dom.get(this.componentID)).selectedIndex=b;break}}};GrahamTechnology.action.PopDownComboValueAction=function(){this.performFocusAction=function(){var b=this.isComponentFocusable();if(b==true){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}}};GrahamTechnology.action.PopDownComboValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.PopDownComboValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);(YAHOO.util.Dom.get(this.componentID)).value=this.value};GrahamTechnology.action.DateValueAction=function(){};GrahamTechnology.action.DateValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.DateValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value==""){b.date="";b.time=""}else{var c=GrahamTechnology.grasp.DateParser.convertFromGrasp(this.value,b.getDatePattern(),b.getDateSeparator());b.date=c.date;b.time=c.time}b.performValueAction(b.date)};GrahamTechnology.action.CustomComponentValueAction=function(){};GrahamTechnology.action.CustomComponentValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.CustomComponentValueAction.prototype.performAction=function(c){var a=c[0];this.objectID=a.objectID;this.formID=a.formID;this.componentID=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(this.objectID,this.formID);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(b){b.updateCustomComponent(a)}};GrahamTechnology.action.CustomComponentFunctionCallAction=function(){};GrahamTechnology.action.CustomComponentFunctionCallAction.prototype=new GrahamTechnology.action.CustomComponentFunctionCallAction();GrahamTechnology.action.CustomComponentFunctionCallAction.prototype.performAction=function(c){var a=c[0];this.objectID=a.objectID;this.formID=a.formID;this.componentID=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(this.objectID,this.formID);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.callMethod(a)};GrahamTechnology.action.SpellCheckAction=function(){};GrahamTechnology.action.SpellCheckAction.prototype=new GrahamTechnology.action.SpellCheckAction();GrahamTechnology.action.SpellCheckAction.prototype.performAction=function(c){var a=c[0];this.objectID=a.objectID;this.formID=a.parentID;this.componentID=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(this.objectID,this.formID);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.updateSpellChecker(a)};GrahamTechnology.action.ParagraphValueAction=function(){};GrahamTechnology.action.ParagraphValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.ParagraphValueAction.prototype.performAction=function(a){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.setText(this.value)};GrahamTechnology.action.TimeValueAction=function(){};GrahamTechnology.action.TimeValueAction.prototype=new GrahamTechnology.action.ComponentValueAction();GrahamTechnology.action.TimeValueAction.prototype.performAction=function(k){this.retrieveAttributes(k);var h=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);var a=GrahamTechnology.util.Date.getThreeLetterDateFormat();var m=GrahamTechnology.util.Date.getDateSeparator();var e=GrahamTechnology.grasp.DateParser.convertFromGrasp(this.value,a,m);var n=e.time.split(":");var g=h.fields[h.hourId].field.value;var b=n[0];var f=h.fields[h.minId].field.value;var c=n[1];var j=0;if(!h.isHideSeconds){j=h.fields[h.secId].field.value}var d=n[2];if(g!==b){g=b;if(h.isTwelveHourFormat&&b>12){var l=n[0]-12;if(l<10){h.fields[h.hourId].field.value="0"+(l)}}else{h.fields[h.hourId].field.value=b}}if(f!==c){f=c;h.fields[h.minId].field.value=c}if(j!==d){j=d;if(!h.isHideSeconds){h.fields[h.secId].field.value=d}}};GrahamTechnology.action.FormHolderAction=function(){this.performEditableAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(this.value.equalsIgnoreCase("TRUE")){a.enable()}else{a.disable()}};this.performFocusAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}};GrahamTechnology.action.FormHolderAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.AccordionFormHolderAction=function(){};GrahamTechnology.action.AccordionFormHolderAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TabbedFormHolderAction=function(){};GrahamTechnology.action.TabbedFormHolderAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TabbedFormHolderAction.prototype.performFocusAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);logger.log("*** performFocusAction ["+this.componentID+"] ***","info","TabbedFormHolderAction.performFocusAction")};GrahamTechnology.action.MenuButtonAction=function(){};GrahamTechnology.action.MenuButtonAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.MenuButtonAction.prototype.performVisibleAction=function(){if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID+"_span")}else{GrahamTechnology.DOM.Element.hideById(this.componentID+"_span")}};GrahamTechnology.action.MenuButtonAction.prototype.performLabelAction=function(){logger.log("performLabelAction","info","MenuButtonAction.performLabelAction");var a=YAHOO.util.Dom.get(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.innerHTML=this.value}};GrahamTechnology.action.MenuButtonAction.prototype.performPictureAction=function(){logger.log("performLabelAction","info","MenuButtonAction.performPictureAction");var a=YAHOO.util.Dom.get(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){if(!GrahamTechnology.Base.isUndefinedOrNull(this.value)){YAHOO.util.Dom.setStyle(a,"background-image","url("+GrahamTechnology.util.constructFullImageURL(this.value)+")")}}};GrahamTechnology.action.SpinnerAction=function(){};GrahamTechnology.action.SpinnerAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.SpinnerAction.prototype.performVisibleAction=function(){if(this.value.equalsIgnoreCase("TRUE")){GrahamTechnology.DOM.Element.showById(this.componentID+"_envelope")}else{GrahamTechnology.DOM.Element.hideById(this.componentID+"_envelope")}};GrahamTechnology.action.FormAction=function(){this.performAction=function(b){this.formID=b.formID;this.actionType=b.type;this.value=b.value;var a=GrahamTechnology.ui.Form.getFormHolderWithInnerFormID(this.formID);var d=GrahamTechnology.ui.Form.Form[this.formID];if(!(GrahamTechnology.Base.isUndefinedOrNull(a))){this.performInnerFormAction(a)}else{if(!GrahamTechnology.Base.isUndefinedOrNull(d)){this.performFormAction(d)}else{logger.log("Cannot found form","info","FormAction.performAction");var c=new GrahamTechnology.util.ErrorMessage("An unidentified component was detected.",b.fieldname,b.formID);c.value=b.value;GrahamTechnology.action.setRefresh(true,c)}}};this.performInnerFormAction=function(a){switch(this.actionType.toUpperCase()){case"TAB_SELECTED_IMAGE":a.changeTabImage(this.formID,this.value,a.TAB_SELECTED_IMAGE_INDEX);break;case"TAB_IMAGE":a.changeTabImage(this.formID,this.value,a.TAB_IMAGE_INDEX);break;case"BG_COLOUR":a.changeTabBGColor(this.formID,this.value);break;case"ENABLETAB":a.changeTabEnableState(this.formID,this.value);break;case"NATURAL_SIZE_TAB_WIDTH":a.changeNaturalSizeTabWidth(this.formID,this.value);break;case"SHORT_TITLE":a.changeTabTitle(this.formID,this.value);break;case"SHORT_TITLE_CLASS":a.changeTabTitleClass(this.formID,this.value);break}};this.performFormAction=function(a){switch(this.actionType.toUpperCase()){case ("BG_COLOUR"):this.performBGColourAction(a);break;case ("FG_COLOUR"):this.performFGColourAction(a);break;case ("LABEL"):this.performLabelAction(a);break}};this.performBGColourAction=function(a){a.setBG_Color(this.value)};this.performFGColourAction=function(a){a.setFG_Color(this.value)};this.performLabelAction=function(a){a.setTitle(this.value)}};GrahamTechnology.action.TimerAction=function(){this.performSpecificAction=function(a){switch(this.actionType.toUpperCase()){case ("TIMER_LIMIT"):logger.log("TIMER_LIMIT","info","TimerAction.performSpecificAction");this.performTimerLimitAction();break;case ("TIMER_VALUE"):logger.log("TIMER_VALUE","info","TimerAction.performSpecificAction");this.performTimerValueAction();break;default:GrahamTechnology.action.TimerAction.prototype.performSpecificAction.call(this,a)}};this.performTimerLimitAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&a.ComponentType==GrahamTechnology.grasp.ComponentType.Timer){a.stopTimer();a.setTimerTimeout(parseInt(this.value,10));a.startTimer()}};this.performTimerValueAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&a.ComponentType==GrahamTechnology.grasp.ComponentType.Timer){a.stopTimer();a.setTimerValue(parseInt(this.value,10));a.startTimer()}}};GrahamTechnology.action.TimerAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.TimeInputFieldAction=function(){this.performHintTextAction=function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.setHintText(this.value)};this.performFocusAction=function(){var b=this.isComponentFocusable();if(b==true){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);a.performFocus()}};this.performEditableAction=function(){this.performEnabledAction()}};GrahamTechnology.action.TimeInputFieldAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.ScriptTextComponentAction=function(){};GrahamTechnology.action.ScriptTextComponentAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.GraphicLineAction=function(){};GrahamTechnology.action.GraphicLineAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.UpdateCustomContainerAction=function(){this.performAction=function(d,c){var a=d[0];var g=a.commandArg;var b=a.commandCharArg;var e=a.commandCharArg2;var f=jsField(b,g);if(f!=null){f.updateFromServer(e)}}};GrahamTechnology.action.CreateCookieAction=function(){this.performAction=function(c){var a=c[0];var d=this.getValue(a);var e=a.name;var b=new Object();b.path=a.path;b.domain=this.getDomain(a);b.expires=this.getExpires(a);b.secure=(a.secure==="true");YAHOO.util.Cookie.set(e,d,b)};this.getValue=function(a){var b=a.value;if(GrahamTechnology.Base.isUndefinedOrNull(b)){b=""}return b};this.getDomain=function(a){var b=a.domain;if(b=="localhost"){b=""}return b};this.getExpires=function(b){var a=b.expires;if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&a.length>0&&parseInt(a,10)>=0){var c=new Date();a=new Date(c.valueOf()+a*1000)}return a}};GrahamTechnology.action.DisplayMessageAction=function(){this.performAction=function(e){for(var d=0;d<e.length;d++){var b=e[d];var g=this.getFormId(b);var a=this.getObjectId(b);var f=this.getValue(b);var c=this.getGroupId(b);GrahamTechnology.ui.DisplayMessage.addMessage(c,g,a,f)}};this.flush=function(){GrahamTechnology.ui.DisplayMessage.runAllHandlers()};this.getGroupId=function(a){return a.groupID};this.getFormId=function(a){return a.formID};this.getObjectId=function(a){return a.objectID};this.getValue=function(a){return JSON.parse(a.value)}};GrahamTechnology.action.DisplayMessageClearAction=function(){this.performAction=function(d){var b=d[0];var c=this.getGroupId(b);var a=this.getObjectId(b);var e=this.getFormId(b);if(a!=-1){GrahamTechnology.ui.DisplayMessage.clearSingleComponentMessage(c,e,a)}else{GrahamTechnology.ui.DisplayMessage.clear(c)}};this.getGroupId=function(a){return a.groupID};this.getFormId=function(a){return a.formID};this.getObjectId=function(a){return a.objectID}};GrahamTechnology.action.FormTextUpdateAction=function(){};GrahamTechnology.action.FormTextUpdateAction.prototype={performAction:function(c){for(var b=0;b<c.length;b++){var a=GrahamTechnology.action.ComponentTypeResolver.resolveComponentType(c[b]);this.performComponentAction(c[b],a)}},performComponentAction:function(a,b){switch(parseInt(b,10)){case (GrahamTechnology.grasp.ComponentType.FormParagraph):this.paragraphUpdateAction(a);break;case (GrahamTechnology.grasp.ComponentType.WebLink):this.webLinkUpdateAction(a);break;case (GrahamTechnology.grasp.ComponentType.UNIDENTIFIED):GrahamTechnology.action.FormTextAction.handleUnidentifiedComponentType(a);break}},paragraphUpdateAction:function(a){var b=new GrahamTechnology.action.ParagraphUpdateAction();b.performAction(a)}};GrahamTechnology.action.ComponentUpdateAction=function(){};GrahamTechnology.action.ComponentUpdateAction.prototype={formID:"",componentID:"",value:"",selected:"",updateType:-1,retrieveAttributes:function(a){this.formID=a.formID;this.componentID=a.fieldname;this.value=a.value;this.updateType=parseInt(a.updateType,10)},performAction:function(a){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);b.update(this.value)}};GrahamTechnology.action.ParagraphUpdateAction=function(){};GrahamTechnology.action.ParagraphUpdateAction.prototype=new GrahamTechnology.action.ComponentUpdateAction();GrahamTechnology.action.ParagraphUpdateAction.prototype.performAction=function(a){this.retrieveAttributes(a);var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID);switch(this.updateType){case GrahamTechnology.grasp.ComponentValueUpdateTypes.ADD_END:b.updateTextAddEnd(this.value);break}};GrahamTechnology.action.FormTextAction={};GrahamTechnology.action.FormTextAction.handleUnidentifiedComponentType=function(a){var c=a.formID;if(GrahamTechnology.ui.Form.isUnfetchedTab(c)){logger.log("Component in non fetched tab detected. Will not refresh page.","info","FormTextValueAction.performComponentAction")}else{var b=new GrahamTechnology.util.ErrorMessage("An unidentified component was detected.",a.fieldname,a.formID);b.value=a.value;GrahamTechnology.action.setRefresh(true,b)}};GrahamTechnology.action.CustomComponentAction=function(){};GrahamTechnology.action.CustomComponentAction.prototype=new GrahamTechnology.action.ComponentActionVSP();GrahamTechnology.action.ViewOptionListAction=function(){};GrahamTechnology.action.ViewOptionListAction.prototype={performAction:function(a){if(a.length>0){GrahamTechnology.ui.Form.registerOptionList(a[0])}}};GrahamTechnology.action.PlatformConfigurationAction=function(){};GrahamTechnology.action.PlatformConfigurationAction.prototype={performAction:function(b){var a=b[0];var c=parseInt(a.commandArg,10);switch(c){case (GrahamTechnology.grasp.PlatformConfigurationAttributes.SET_CLIENT_IDLE_TIMEOUT):clientAPI.idleTimeoutHandler.updateTimeout(parseInt(a.commandCharArg2,10));break;case (GrahamTechnology.grasp.PlatformConfigurationAttributes.SET_CLIENT_WARNING_TIMEOUT):clientAPI.idleTimeoutHandler.updateWarningPeriod(parseInt(a.commandCharArg2,10));break}}};GrahamTechnology.connection.Connection=function(){this.timers={};this.setPollingInterval(10);this.initHeaders=function(){this.initHeader(GrahamTechnology.util.AJAXConstants.HttpHeaders.CONTENT_TYPE,GrahamTechnology.util.AJAXConstants.HttpHeaders.CONTENT_TYPE_VALUE);this.initHeader(GrahamTechnology.util.AJAXConstants.HttpHeaders.CONNECTION,GrahamTechnology.util.AJAXConstants.HttpHeaders.CONNECTION_VALUE);this.initHeader(GrahamTechnology.util.AJAXConstants.HttpHeaders.KEEP_ALIVE,GrahamTechnology.util.AJAXConstants.HttpHeaders.KEEP_ALIVE_VALUE)};this.initHeaders();this.pauseTimeouts=function(){for(var c in this.timers){var b=this.timers[c];window.clearTimeout(b.timerId)}};this.resumeTimeouts=function(){for(var c in this.timers){var b=this.timers[c];this.setTimeout(b.o,b.callback,b.callback.timeout)}};this.handleReadyState=function(b,c){if(GrahamTechnology.util.Browsers.isMultipartXHR()){this.handleReadyStateMultipartXHR(b,c)}else{this.handleReadyStateXHR(b,c)}};this.setTimeout=function a(g,h,c){var f=this;var b=function(){if(h.handlesAbort){h.abort(f,g)}else{f.abort(g,h,true)}delete f._timeOut[g.tId];delete f.timers[g.tId]};var e=window.setTimeout(b,c);this._timeOut[g.tId]=e;var d={};d.callback=h;d.o=g;d.timerId=e;this.timers[g.tId]=d};this.handleReadyStateXHR=function(c,d){var b=this;if(d&&d.timeout){this.setTimeout(c,d,d.timeout)}c.conn.onreadystatechange=function(){if(c.conn.readyState==4){if(d&&d.timeout){delete b._timeOut[c.tId];delete b.timers[c.tId]}b.handleTransactionResponse(c,d)}}};this.handleReadyStateMultipartXHR=function(c,d){var b=this;c.Connection=this;c.conn.onload=function(){d.success(c)};if(d&&d.timeout){this._timeOut[c.tId]=window.setTimeout(function(){if(d.handlesAbort){d.abort(b,c)}else{b.abort(c,d,true)}},d.timeout)}};this.createIEObject=function(d){for(var b=0;b<this._msxml_progid.length;++b){try{http=new ActiveXObject(this._msxml_progid[b]);obj={conn:http,tId:d};break}catch(c){}finally{return obj}}};this.createXhrObject=function(f){var d,b;try{b=new XMLHttpRequest();if(b){if(GrahamTechnology.util.Browsers.isMultipartXHR()){b.multipart=true}else{b.multipart=false}d={Connection:this,conn:b,tId:f}}}catch(c){d=this.createIEObject(f)}finally{return d}};this.handleTransactionResponse=function(d,f,b){try{GrahamTechnology.connection.Connection.prototype.handleTransactionResponse.call(this,d,f,b)}catch(c){this.logException(c,true)}};this.logException=function(d,c){if((d.message.indexOf("NS_ERROR_NOT_AVAILABLE")!=-1)&&(GrahamTechnology.util.Browsers.isFirefox())){return}var b=new GrahamTechnology.util.ExceptionErrorMessage();b.exceptionName=d.name;b.errorMessage=d.message;if(d.stack){b.stackTrace=d.stack}else{if(d.sourceURL){b.stackTrace=d.sourceURL+":"+d.line}}logger.log(b.getMessage());if(c){GrahamTechnology.action.setRefresh(true,b);GrahamTechnology.action.refresh(true)}}};GrahamTechnology.connection.Connection.prototype=YAHOO.util.Connect;GrahamTechnology.connection.multipart.JSONParser=function(){};GrahamTechnology.connection.multipart.JSONParser.prototype={jsonPartsArray:[],parseJSON:function(a){this.jsonPartsArray=this.jsonParts(a)},size:function(){return this.jsonPartsArray.length},jsonParts:function(d){var b=d.split("--rn9012");var c=[];var a;for(a=1;a<b.length-1;a++){if(this.isJSONArray(b[a])){c[a-1]={type:"JSONArray",contents:this.removeHeader(b[a])}}else{c[a-1]={type:"HTMLData",contents:this.trim(b[a],"<",">")}}}return c},removeHeader:function(a){return this.trim(a,"{","}")},trim:function(d,e,c){var a=d.indexOf(e);var b=d.lastIndexOf(c);if(b===-1){logger.log("endOfData is -1")}return d.substr(a,b-a+1)},isJSONArray:function(d){var e=false;var b=d.lastIndexOf("[");var a=d.lastIndexOf("]");var c=d.substr(b+1,a-b-1);if(c==="JSONArray"){e=true}return e}};GrahamTechnology.grasp.TransportableFactory=function(){};GrahamTechnology.grasp.TransportableFactory={defineValue:function(b,a){return'{"clazz":"'+b+'",'+a+"}"},definePrimitiveValue:function(b,a){return this.defineValue(b,'"'+a+'"')},defineFieldValue:function(b,a){return'"'+b+'":"'+a+'"'},defineObject:function(g,f,d,b){var h="";var a=1;var c;for(c=0;c<f.length;++c){var e=f[c];if(c>0){h+=","}h+=this.defineFieldValue(e[0],e[1])}return this.defineValue(g,h)},JSONArray:function(){var a=JSON.parse('{"clazz":"com.gtnet.common.client.json.JSONArray","transportables":[],"code":"","lastPacket":false}');a.code=null;a.transportables=[];return a},CLIENT_EVENT_Transportable:function(){var a=JSON.parse('{"clazz":"com.gtnet.common.client.grasp.CLIENT_EVENT_Transportable","eventType":"","objectID":"","param1":"","param2":"","parentID":"","subObjectID":"","windowID":"'+GrahamTechnology.util.AJAXProperties.windowID+'","transportCode":128}');a.equals=function(b){try{if((a.transportCode===b.transportCode)&&(a.parentID===b.parentID)&&(a.objectID===b.objectID)&&(a.subObjectID===b.subObjectID)&&(a.param1===b.param1)&&(a.param2===b.param2)&&(a.eventType===b.eventType)&&(a.windowID===b.windowID)){return true}else{return false}}catch(c){return false}};return a},COMMAND_Transportable:function(){var a=JSON.parse('{"clazz":"com.gtnet.common.client.grasp.COMMAND_Transportable","commandCharArg":"","commandArg":"","commandID":"","transportCode":14,"commandArg2":"","commandCharArg2":"","windowID":"'+GrahamTechnology.util.AJAXProperties.windowID+'"}');a.equals=function(c){try{if((a.transportCode===c.transportCode)&&(a.commandID===c.commandID)&&(a.commandArg===c.commandArg)&&(a.commandArg2===c.commandArg2)&&(a.commandCharArg===c.commandCharArg)&&(a.commandCharArg2===c.commandCharArg2)&&(a.windowID===c.windowID)){return true}else{return false}}catch(b){return false}};return a},WEB_SO_MESSAGE_REPLY:function(c,g,f,d){var b=[["transportCode",GrahamTechnology.grasp.TransportType.WEB_SO_MESSAGE_REPLY_Transportable],["formID",g],["objectName",f],["methodName",d],["result",c],["windowID",GrahamTechnology.util.AJAXProperties.windowID]];var e=this.defineObject("com.gtnet.common.client.grasp.WEB_SO_MESSAGE_REPLY_Transportable",b);var a=JSON.parse(e);a.equals=function(j){try{if((a.transportCode===j.transportCode)&&(a.formID===j.formID)&&(a.objectName===j.objectName)&&(a.methodName===j.methodName)&&(a.result===j.result)){return true}else{return false}}catch(h){return false}};return a},ActiveXEvent:function(f,g,b,e){var a=[["transportCode",GrahamTechnology.grasp.TransportType.WEB_SO_MESSAGE_Transportable],["formID",f],["objectName",g],["methodName",b],["hasResult",""],["parameters",e],["windowID",GrahamTechnology.util.AJAXProperties.windowID]];var d=this.defineObject("com.gtnet.common.client.grasp.WEB_SO_MESSAGE_Transportable",a);var c=JSON.parse(d);c.equals=function(h){try{if((c.transportCode===h.transportCode)&&(c.formID===h.formID)&&(c.objectName===h.objectName)&&(c.methodName===h.methodName)&&(c.hasResult===h.hasResult)&&(c.parameters===h.parameters)&&(c.windowID===h.windowID)){return true}else{return false}}catch(j){return false}};return c},KEY_PRESS_Transportable:function(e,g,c,f){var a=[["transportCode",GrahamTechnology.grasp.TransportType.KEY_PRESS_Transportable],["alt",e],["ctrl",g],["shift",c],["keyCode",f],["windowID",GrahamTechnology.util.AJAXProperties.windowID]];var b=this.defineObject("com.gtnet.common.client.grasp.KEY_PRESS_Transportable",a);var d=JSON.parse(b);d.equals=function(h){try{if((d.transportCode===h.transportCode)&&(d.alt===h.alt)&&(d.ctrl===h.ctrl)&&(d.shift===h.shift)&&(d.keyCode===h.keyCode)&&(d.windowID===h.windowID)){return true}else{return false}}catch(j){return false}};return d},CLIENT_LOG_MESSAGE_Transportable:function(e,g,f,d){if(!e){e=""}if(!g){g=""}if(!f){f=""}if(!d){d=""}var a=[["transportCode",GrahamTechnology.grasp.TransportType.CLIENT_LOG_MESSAGE_Transportable],["sourceDetail",""],["source",e],["level",g],["time",f],["message",d],["windowID",GrahamTechnology.util.AJAXProperties.windowID]];var c=this.defineObject("com.gtnet.common.client.grasp.CLIENT_LOG_MESSAGE_Transportable",a);var b=JSON.parse(c);b.equals=function(h){try{if((b.transportCode===h.transportCode)&&(b.source===h.source)&&(b.level===h.level)&&(b.time===h.time)&&(b.message===h.message)&&(b.windowID===h.windowID)){return true}else{return false}}catch(j){return false}};return b},DISPLAY_MESSAGE_CLEAR_Transportable:function(c,e,f){var a=[["transportCode",GrahamTechnology.grasp.TransportType.DISPLAY_MESSAGE_CLEAR_Transportable],["groupID",c],["formID",e],["objectID",f],["windowID",GrahamTechnology.util.AJAXProperties.windowID]];var d=this.defineObject("com.gtnet.common.client.grasp.DISPLAY_MESSAGE_CLEAR_Transportable",a);var b=JSON.parse(d);b.equals=function(g){try{if((b.transportCode===g.transportCode)&&(b.groupID===g.groupID)&&(b.formID===g.formID)&&(b.objectID===g.objectID)&&(b.windowID===g.windowID)){return true}else{return false}}catch(h){return false}};return b}};GrahamTechnology.grasp.TransportType={COMMAND_Transportable:14,CLIENT_EVENT_Transportable:128,CONTROL_SETTING_Transportable:85,FORM_TEXT_VALUE_Transportable:49,MESSAGE_Transportable:40,AFFIRMATION_Transportable:29,INFORMATION_Transportable:39,FORM_LIST_VALUE_Transportable:50,FORM_LIST_UPDATE_Transportable:173,FORM_DATETIME_VALUE_Transportable:127,FORM_TREE_VALUE_Transportable:133,FORM_TREE_IMAGE_LIST_Transportable:134,INNER_FORM_Transportable:150,WEB_SO_MESSAGE_Transportable:151,FORM_TREE_NODE_MODIFY_Transportable:152,WEB_SO_MESSAGE_REPLY_Transportable:153,STR_RESPONSE_Transportable:71,POPUP_FORM_Transportable:159,FORM_CUSTOM_COMPONENT_VALUE_Transportable:167,FORM_CUSTOM_COMPONENT_MESSAGE_PARAMETER_Transportable:168,FORM_CUSTOM_COMPONENT_MESSAGE_Transportable:169,SPELL_CHECK_WORD_Transportable:170,SPELL_CHECK_ENTRY_Transportable:171,SPELL_CHECK_Transportable:172,DISPLAY_MESSAGE_Transportable:174,DISPLAY_MESSAGE_CLEAR_Transportable:175,COOKIE_Transportable:155,FORM_TEXT_UPDATE_Transportable:176,KEY_PRESS_Transportable:177,CLIENT_LOG_MESSAGE_Transportable:178,VIEW_OPTION_LIST_Transportable:180};GrahamTechnology.grasp.CommandType={RUN_FORM:300,RUN_FORM_IN_HOLDER:692,EXIT:203,AJAX_PUSH_LISTENER:713,POPDOWN_FORM:68,AJAX_SESSION_EXPIRED:714,AJAX_PAGE_UNLOAD_EXPIRY:732,AJAX_REDIRECT:715,SELECT_TREE_NODE:708,DESELECT_TREE_NODE:709,CLIENT_EXPAND_TREENODE:704,CLIENT_COLLAPSE_TREENODE:705,LOWER_WINDOW:482,RAISE_WINDOW:480,SET_ACTIVE_TAB:695,EXPAND_TAB_Transportable:724,COLLAPSE_TAB_Transportable:725,AFFIRMATION_POSITIVE:130,AFFIRMATION_NEGATIVE:131,MESSAGE_POPDOWN:404,INFORMATION_POPDOWN:112,CLEAR_FORM:67,PING:670,SET_PLATFORM_CONFIGURATION:723,UPDATE_CUSTOM_CONTAINER_DATA:730,SET_FILL_STRATEGY:731,PLAY_SOUND:733,TURN_OFF_SOUNDS:734,TURN_ON_SOUNDS:735,DEFERRED_LOGGING:736,LOAD_RESOURCE:737,NAVIGATE_FORWARD:738,NAVIGATE_BACK:739,PUSH_STATE:740,AJAX_SESSION_EXPIRED_NO_REFRESH:743,SUSPEND_SESSION:744,SESSION_EXPIRY_WARNING:745,PAGE_REFRESH_REQUEST_RECEIVED:748,OPEN_WINDOW:746,SET_CURSOR_POSITION:749};GrahamTechnology.grasp.EvtType={NO_EVENT:-1,EVENT_VALUE_CHANGED:1,EVENT_KEY:2,EVENT_GAIN_FOCUS:3,EVENT_ACTION:4,TIMER:5,LIST_SELECT:6,CELL_SELECT:7,DATE_SELECT:12,EVENT_HISTORY_JUMP:14,EVENT_LOSE_FOCUS:15,TREE_SELECT:16,TREE_EXPAND:21,TAB_SELECT:17,MENU_SELECT:19,CUSTOM:30,SPELL_CHECK:31,WINDOW_CLOSED:32,ENTER_KEY_TINYMCE:33,eventNames:{"-1":"No event","1":"Value changed","3":"Gain focus","4":"Action","5":"Timer","6":"List select","7":"Cell select","12":"Date select","15":"Lose focus","16":"Tree select","21":"Tree expand","17":"Tab select","19":"Menu select","30":"Custom","31":"Spell check","14":"History Jump","32":"Window Closed","33":"Enter Key TinyMCE"}};GrahamTechnology.grasp.ComponentType={UNIDENTIFIED:-1,Textfield:1,Checkbox:2,RadioButton:3,Combo:4,OptionMenu:5,PopdownCombo:6,Button:7,Listbox:8,TextLabel:9,ImageLabel:10,Tree:11,FormParagraph:12,Date:13,TabbedFormHolder:14,ActiveXControl:15,FormHolder:16,Spinner:17,GraphicBox:18,RadioGroup:19,Form:20,AccordionFormHolder:21,Timer:22,MenuButton:23,TimeInputField:24,ScriptTextComponent:25,GraphicLine:26,CustomComponent:27,CustomContainer:28,WebLink:29};GrahamTechnology.grasp.FormTreeValueFlags={ISSELECTED_BIT:1,ISEXPANDED_BIT:2};GrahamTechnology.grasp.AttributeNames={VISIBLE:"VISIBLE",ENABLED:"ENABLED"};GrahamTechnology.grasp.TimerAttributes={attrs:["TIMER_VALUE","TIMER_CHANGED_TIME","TIMER_LIMIT"],contains:function(a){return this.attrs.indexOf(a)!=-1}};GrahamTechnology.grasp.ListUpdateTypes={ADD:1,REMOVE:2,EDIT:3,SELECT:4,ADD_END:5,DESELECT:6};GrahamTechnology.grasp.ListDataTypes={TEXT:0,DUMMY:1,INTEGER:2,LONG:3,FLOAT:4,DOUBLE:5,DUMMY2:6,DECIMAL:7,DATE:8,MONEY:9};GrahamTechnology.grasp.ComponentValueUpdateTypes={ADD_END:1};GrahamTechnology.grasp.PlatformConfigurationAttributes={SET_CLIENT_IDLE_TIMEOUT:66,SET_CLIENT_WARNING_TIMEOUT:67};GrahamTechnology.grasp.CommandCreator=function(){};GrahamTechnology.grasp.CommandCreator.prototype={createCommand:function(f,c,d,b,a){var e;e=GrahamTechnology.grasp.TransportableFactory.COMMAND_Transportable();e.commandID=f;if(!GrahamTechnology.Base.isUndefinedOrNull(c)){e.commandArg=c}if(!GrahamTechnology.Base.isUndefinedOrNull(d)){e.commandArg2=d}if(!GrahamTechnology.Base.isUndefinedOrNull(b)){e.commandCharArg=b}if(!GrahamTechnology.Base.isUndefinedOrNull(a)){e.commandCharArg2=a}return e}};GrahamTechnology.grasp.LogMessageCreator=function(){};GrahamTechnology.grasp.LogMessageCreator.prototype={createLogMessage:function(c,e,d,a){if(!c){c=""}if(!e){e=""}if(!d){d=""}if(!a){a=""}var b=GrahamTechnology.grasp.TransportableFactory.CLIENT_LOG_MESSAGE_Transportable();b.sourceDetail="";b.source=c;b.level=e;b.time=d;b.message=a;return b}};GrahamTechnology.grasp.CIAEventCreator=function(){};GrahamTechnology.grasp.CIAEventCreator.prototype={formID:-1,objectID:-1,componentType:-1,componentID:-1,subObjectID:-1,param1:"",param2:"",windowID:"",eventType:"",eventTransportable:"",createEvent:function(d,c,e,b){this.setComponentInfo(e);this.componentID=c;switch(parseInt(d,10)){case (GrahamTechnology.grasp.EvtType.EVENT_ACTION):this.eventTransportable=this.createActionEvent();break;case (GrahamTechnology.grasp.EvtType.EVENT_LOSE_FOCUS):this.eventTransportable=this.createLostFocusEvent();break;case (GrahamTechnology.grasp.EvtType.EVENT_GAIN_FOCUS):this.eventTransportable=this.createGainFocusEvent();break;case (GrahamTechnology.grasp.EvtType.LIST_SELECT):this.eventTransportable=this.createListSelectEvent();break;case (GrahamTechnology.grasp.EvtType.CELL_SELECT):this.eventTransportable=this.createCellSelectEvent();break;case (GrahamTechnology.grasp.EvtType.EVENT_VALUE_CHANGED):var a=new GrahamTechnology.grasp.ValueChangedEventCreator();this.eventTransportable=a.createEvent(this.componentID,e,b);break;case (GrahamTechnology.grasp.EvtType.EVENT_KEY):this.eventTransportable=this.createKeyEvent(b);break;case (GrahamTechnology.grasp.EvtType.TIMER):this.eventTransportable=this.createTimerEvent();break;case (GrahamTechnology.grasp.EvtType.CUSTOM):this.eventTransportable=this.createCustomEvent(b);break;case (GrahamTechnology.grasp.EvtType.SPELL_CHECK):this.eventTransportable=this.createSpellCheckEvent(b);break;case (GrahamTechnology.grasp.EvtType.EVENT_HISTORY_JUMP):this.eventTransportable=this.createHistoryJumpEvent(b);break;case (GrahamTechnology.grasp.EvtType.ENTER_KEY_TINYMCE):this.eventTransportable=this.createEnterKeyTinyMCEEvent();break}return this.eventTransportable},createEnterKeyTinyMCEEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.ENTER_KEY_TINYMCE;return this.updateTransportable()},createActionEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.EVENT_ACTION;return this.updateTransportable()},createLostFocusEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.EVENT_LOSE_FOCUS;return this.updateTransportable()},createGainFocusEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.EVENT_GAIN_FOCUS;return this.updateTransportable()},createCustomEvent:function(a){this.eventType=GrahamTechnology.grasp.EvtType.CUSTOM;var b;for(b in a){this[b]=a[b]}return this.updateTransportable()},createKeyEvent:function(a){this.eventType=GrahamTechnology.grasp.EvtType.EVENT_KEY;this.param1=a;return this.updateTransportable()},createSpellCheckEvent:function(a){this.eventType=GrahamTechnology.grasp.EvtType.SPELL_CHECK;this.param1=a;return this.updateTransportable()},createTabSelectEvent:function(b,a,c){this.setComponentInfo(c);this.componentID=b.toString();this.eventType=GrahamTechnology.grasp.EvtType.TAB_SELECT;this.subObjectID=a;return this.updateTransportable()},createListSelectEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.LIST_SELECT;if(GrahamTechnology.ui.Listbox.canPreviousSelectedRowBeSend()&&!GrahamTechnology.ui.Listbox.hasPreviousSelectedRowBeenSend){this.subObjectID=GrahamTechnology.ui.Listbox.getPreviousSelectedRow();this.param1="0"}else{this.subObjectID=GrahamTechnology.ui.Listbox.getRow();this.param1="1"}this.param2=GrahamTechnology.ui.Listbox.clicks;return this.updateTransportable()},createCellSelectEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.CELL_SELECT;this.subObjectID=GrahamTechnology.ui.Listbox.getRow();this.param1=GrahamTechnology.ui.Listbox.getKernelColumn();this.param2="";return this.updateTransportable()},createSubcomponentEvent:function(b,e,c,d){this.setComponentInfo(d);this.componentID=b.toString();switch(parseInt(c,10)){case (GrahamTechnology.grasp.EvtType.EVENT_VALUE_CHANGED):var a=new GrahamTechnology.grasp.ValueChangedEventCreator();this.eventTransportable=a.createSubcomponentEvent(this.componentID,e,d);break}return this.eventTransportable},createHistoryJumpEvent:function(a){this.eventType=GrahamTechnology.grasp.EvtType.EVENT_HISTORY_JUMP;this.param1=a;return this.updateTransportable()},setComponentInfo:function(a){if(a){this.formID=parseInt(a[0].split("=")[1],10);this.objectID=parseInt(a[1].split("=")[1],10);this.componentType=parseInt(a[2].split("=")[1],10)}},updateTransportable:function(){var b=GrahamTechnology.grasp.TransportableFactory;var a=b.CLIENT_EVENT_Transportable();a.subObjectID=this.subObjectID;a.param2=this.param2;a.param1=this.param1;a.objectID=this.objectID;a.parentID=this.formID;a.eventType=this.eventType;return a},createTimerEvent:function(){this.eventType=GrahamTechnology.grasp.EvtType.TIMER;return this.updateTransportable()}};GrahamTechnology.grasp.ValueChangedEventCreator=function(){};GrahamTechnology.grasp.ValueChangedEventCreator.prototype={formID:-1,objectID:-1,componentType:-1,componentID:-1,subObjectID:-1,param1:"",param2:"",windowID:"",eventType:GrahamTechnology.grasp.EvtType.EVENT_VALUE_CHANGED,createEvent:function(b,c,a){this.setComponentInfo(c);this.componentID=b.toString();switch(parseInt(this.componentType,10)){case (GrahamTechnology.grasp.ComponentType.Textfield):this.createTextFieldEvent(a);break;case (GrahamTechnology.grasp.ComponentType.Checkbox):this.createCheckboxEvent();break;case GrahamTechnology.grasp.ComponentType.RadioButton:this.createRadioButtonEvent();break;case GrahamTechnology.grasp.ComponentType.Combo:this.createComboEvent();break;case GrahamTechnology.grasp.ComponentType.OptionMenu:this.createOptionMenuEvent();break;case GrahamTechnology.grasp.ComponentType.PopdownCombo:this.createPopdownComboEvent();break;case GrahamTechnology.grasp.ComponentType.CustomComponent:this.createCustomComponentEvent();break}if(!GrahamTechnology.Base.isUndefinedOrNull(this.param1)){this.param1=encodeURIComponent(this.param1)}return this.updateTransportable()},createTextFieldEvent:function(a){var b=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,this.formID);this.param1=b.getDOMValue();this.param2=a},createCustomComponentEvent:function(){var a=GrahamTechnology.ui.Form.getRegisteredComponent(this.componentID,this.formID);this.param1=a.getJsonSerializedValue();logger.log("Custom component["+this.componentID+"] sending VALUE_CHANGE event with value["+this.param1+"] ")},createComboEvent:function(){this.param1=(YAHOO.util.Dom.get(this.componentID)).value;this.subObjectID=(YAHOO.util.Dom.get(this.componentID)).selectedIndex},createCheckboxEvent:function(){var a=YAHOO.util.Dom.get(this.componentID);if(a.checked){this.param1="true"}else{this.param1=""}},createRadioButtonEvent:function(){this.param1=(YAHOO.util.Dom.get(this.componentID)).value},createOptionMenuEvent:function(){this.param1=(YAHOO.util.Dom.get(this.componentID)).value;this.subObjectID=(YAHOO.util.Dom.get(this.componentID)).selectedIndex},createPopdownComboEvent:function(){this.param1=(YAHOO.util.Dom.get(this.componentID)).value;this.subObjectID=(YAHOO.util.Dom.get(this.componentID)).selectedIndex;if(GrahamTechnology.Base.isUndefinedOrNull(this.subObjectID)){this.subObjectID=-1}},createSubcomponentEvent:function(a,c,b){this.setComponentInfo(b);this.componentID=a.toString();switch(parseInt(c,10)){case (GrahamTechnology.grasp.ComponentType.Textfield):this.createSubTextFieldEvent();break;case (GrahamTechnology.grasp.ComponentType.Checkbox):this.createSubCheckboxEvent();break;case (GrahamTechnology.grasp.ComponentType.OptionMenu):this.createSubOptionMenuEvent();break}return this.updateTransportable()},createSubCheckboxEvent:function(){this.subObjectID=GrahamTechnology.ui.Listbox.Cell.Component.row;this.param1=GrahamTechnology.ui.Listbox.Cell.Component.value;this.param2=GrahamTechnology.ui.Listbox.Cell.Component.column},createSubTextFieldEvent:function(){this.subObjectID=GrahamTechnology.ui.Listbox.Cell.row;this.param1=GrahamTechnology.ui.Listbox.Cell.value;this.param2=GrahamTechnology.ui.Listbox.getKernelColumn()},createSubOptionMenuEvent:function(){this.subObjectID=GrahamTechnology.ui.Listbox.Cell.Component.row;this.param1=GrahamTechnology.ui.Listbox.Cell.Component.value;this.param2=GrahamTechnology.ui.Listbox.Cell.Component.column},setComponentInfo:function(a){this.formID=parseInt(a[0].split("=")[1],10);this.objectID=parseInt(a[1].split("=")[1],10);this.componentType=parseInt(a[2].split("=")[1],10)},updateTransportable:function(){var b=GrahamTechnology.grasp.TransportableFactory;var a=b.CLIENT_EVENT_Transportable();a.subObjectID=this.subObjectID;a.param2=this.param2;a.param1=this.param1;a.objectID=this.objectID;a.parentID=this.formID;a.eventType=this.eventType;return a}};GrahamTechnology.grasp.EventCreator={createEvent:function(b){var c=GrahamTechnology.grasp.TransportableFactory;var a=c.CLIENT_EVENT_Transportable();a.subObjectID=b.subObjectID;a.param2=b.param2;a.param1=b.param1;a.objectID=b.objectID;a.parentID=b.formID;a.eventType=b.eventType;return a}};GrahamTechnology.grasp.EventActionQueue={eventActionQueue:new GrahamTechnology.util.Queue(),putEvent:function(b,a){var c={};c.transportable=b;c.pageToken=a;this.eventActionQueue.push(c)},getEvent:function(){return this.eventActionQueue.pop()},getEventCount:function(){return(this.eventActionQueue).getLength()}};GrahamTechnology.grasp.DateParser={convertFromGrasp:function(q,b,r){if(GrahamTechnology.Base.isUndefinedOrNull(q)||q===""){var n=new Date();var l=n.getDate();var g=n.getMonth()+1;var o=n.getFullYear();q=o+"-"+g+"-"+l+" 00:00:00"}var p=q.split(" ");var f=p[1];var a=p[0].split("-");var k=b.indexOf("d");var h=b.indexOf("m");var c=b.indexOf("y");var e="";var j;for(j=0;j<3;j++){if(j===k){e+=a[2]}else{if(j===h){e+=a[1]}else{if(j===c){e+=a[0]}}}if(j<2){e+=r}}return GrahamTechnology.util.Date.createDateObject(e,f)},convertToGrasp:function(c,b,f){var e=(c).split(f);var d=b.indexOf("d");var a=b.indexOf("m");var g=b.indexOf("y");return e[g]+"-"+e[a]+"-"+e[d]}};GrahamTechnology.MultiWindow=function(){this.windowHandleIDMap=new GrahamTechnology.util.Map();this.queuedTransportables=[];this.CLIENT_EVENT="clientEvent";this.INCOMING_TRANSPORTABLE="incomingTransportable";this.OUTGOING_TRANSPORTABLE="outgoingTransportable";this.setup=function(){if(window.addEventListener){window.addEventListener("message",GrahamTechnology.multiwindow.receiveMessage,false)}if(document.attachEvent){document.attachEvent("message",GrahamTechnology.multiwindow.receiveMessage)}};this.handleTransportableRouting=function(d,a){if(this.currentWindowIsPrimary()){var c={type:this.INCOMING_TRANSPORTABLE,content:d};var b=this.windowHandleIDMap.get(a);if(b&&!this.isWindowClosed(b)){if(this.shouldRouteMessageToCorrectWindow(b)){this.routeMessageToCorrectWindow(c,b.handle)}else{logger.log("Transportable intended for windowID: "+a+" is being queued as window has not rendered yet");this.queueTransportables(d,a)}}else{logger.log("Transportable intended for windowID: "+a+" but window has been closed")}}else{logger.log("Transportable intended for windowID: "+a+" was received by windowID: "+this.getCurrentWindowID())}};this.queueTransportables=function(c,a){var b={};b.jsonArray=c;b.windowID=a;this.queuedTransportables[this.queuedTransportables.length]=b};this.processQueuedTransportables=function(){var c;var b;for(b=0;b<this.queuedTransportables.length;b++){var f=this.queuedTransportables[b].jsonArray;var a=this.queuedTransportables[b].windowID;var e=this.windowHandleIDMap.get(a);if(e&&this.shouldRouteMessageToCorrectWindow(e)){var d={type:this.INCOMING_TRANSPORTABLE,content:f};this.queuedTransportables.splice(b,1);this.routeMessageToCorrectWindow(d,e.handle);logger.log("Size of Queue: "+this.queuedTransportables.length,"info","MultiWindow.processQueuedTransportables")}}};this.isWindowClosed=function(a){if(a){if(a.handle&&a.handle.closed){return true}}return false};this.shouldRouteMessageToCorrectWindow=function(a){if(a.handle&&a.handle.clientAPI&&a.handle.clientAPI.hasPageRendered()){return true}return false};this.routeClientEventToPrimaryWindow=function(a,c){var e={transportable:a,eventType:c};var d={type:this.CLIENT_EVENT,content:e};var b=this.getPrimaryScreenWindowHandle();this.routeMessageToCorrectWindow(d,b)};this.routeTransportableToPrimaryWindow=function(a){var d={transportable:a};var c={type:this.OUTGOING_TRANSPORTABLE,content:d};var b=this.getPrimaryScreenWindowHandle();this.routeMessageToCorrectWindow(c,b)};this.getPrimaryScreenWindowHandle=function(){var c=window;while(!GrahamTechnology.Base.isUndefinedOrNull(c.opener)){var b=c.location.pathname;var a=c.opener.location.pathname;if(a!==b.substr(0,a.length)){return c}c=c.opener}return c};this.routeMessageToCorrectWindow=function(c,b){var a={type:c.type,content:c.content,origin:window.location.origin,source:window};b.GrahamTechnology.multiwindow.postProxyMessage(a)};this.postProxyMessage=function(a){setTimeout(function(){window.GrahamTechnology.multiwindow.receiveMessage(a)},0)};this.receiveMessage=function(a){if(GrahamTechnology.multiwindow.isMessageTrusted(a)){if(a.type===GrahamTechnology.multiwindow.INCOMING_TRANSPORTABLE){GrahamTechnology.multiwindow.receiveTransportable(a.content)}else{if(a.type===GrahamTechnology.multiwindow.CLIENT_EVENT){GrahamTechnology.multiwindow.sendClientEventToServer(a.content)}else{if(a.type===GrahamTechnology.multiwindow.OUTGOING_TRANSPORTABLE){GrahamTechnology.multiwindow.sendTransportableToServer(a.content)}else{logger.log("A message was received that was not an inbound transportable, outbound transportable or client event. Therefore the message was ignored.")}}}}};this.isMessageTrusted=function(a){return this.isOriginTrusted(a.origin)&&this.isMessageSourceTrusted(a.source)&&this.isMessageFormatTrusted(a)};this.isOriginTrusted=function(a){if(window.location.origin===a){return true}logger.log("A message has been received from an untrusted origin via the multi window postMessage function. This message will be ignored. Origin: "+a);return false};this.isMessageSourceTrusted=function(a){if(this.isSourceTrusted(a)){return true}logger.log("A message has been received from an untrusted source via the multi window postMessage function. This message will be ignored.");return false};this.isSourceTrusted=function(b){var a=false;if(this.currentWindowIsPrimary()){a=this.messageSourceIsValidChildWindow(b)}else{a=this.openerWindowMatchesSourceWindow(b)}return a};this.messageSourceIsValidChildWindow=function(e){var c=this.getWindowHandleMap();var f=c.listKeys();var b;for(b=0;b<f.length;b++){var a=f[b];var d=c.get(a).handle;if(d===e){return true}}return false};this.openerWindowMatchesSourceWindow=function(a){return window.opener===a};this.isMessageFormatTrusted=function(a){if(a.type&&a.content){return true}logger.log("A message has been received via the multi window postMessage function that does not contain the correct attributes. This message will be ignored.");return false};this.receiveTransportable=function(b){var a=new GrahamTechnology.util.TabOrderExecResolver();var c=new GrahamTechnology.Callback();c.handleTransportable(b,a);a.updateTabOrder();a=null};this.sendTransportableToServer=function(a){window.clientAPI.postTransportable(a.transportable)};this.sendClientEventToServer=function(a){window.clientAPI.sendToServer(a.transportable,a.eventType)};this.currentWindowIsPrimary=function(){return this.getCurrentWindowID()===GrahamTechnology.util.AJAXConstants.MultiMonitor.PRIMARY_WINDOW};this.transportableIntendedForCurrentWindow=function(a){return this.getCurrentWindowID()===a};this.getCurrentWindowID=function(){return GrahamTechnology.util.AJAXProperties.windowID};this.checkForClosedWindows=function(){var d=this.getWindowHandleMap();var f=d.listKeys();var c;for(c=0;c<f.length;c++){var b=f[c];var e=d.get(b).handle;if(e&&e.closed){var a=GrahamTechnology.grasp.TransportableFactory.CLIENT_EVENT_Transportable();a.eventType=GrahamTechnology.grasp.EvtType.WINDOW_CLOSED;a.parentID=d.get(b).formID;a.param1=b;a.windowID=GrahamTechnology.util.AJAXConstants.MultiMonitor.PRIMARY_WINDOW;clientAPI.postTransportable(a,null);d.remove(b)}}};this.closeAllWindows=function(){var e=this.getWindowHandleMap();var d=e.listKeys();var b;for(b=0;b<d.length;b++){var a=d[b];var c=e.get(a).handle;c.close();e.remove(a)}};this.disable=function(){var e=this.getWindowHandleMap();var d=e.listKeys();var b;for(b=0;b<d.length;b++){var a=d[b];var c=e.get(a).handle;if(c.GrahamTechnology){c.GrahamTechnology.ui.Form.disable()}}};this.enable=function(){var e=this.getWindowHandleMap();var d=e.listKeys();var b;for(b=0;b<d.length;b++){var a=d[b];var c=e.get(a).handle;if(c.GrahamTechnology){c.GrahamTechnology.ui.Form.enable()}}};this.showLoadingImage=function(){var e=this.getWindowHandleMap();var d=e.listKeys();var b;for(b=0;b<d.length;b++){var a=d[b];var c=e.get(a).handle;if(c.GrahamTechnology){c.GrahamTechnology.ui.Form.showLoadingImage(true)}}};this.showLoadingImageParentWindow=function(){var b={};b.pageToken=clientAPI.getPageToken();var a=window;while(!GrahamTechnology.Base.isUndefinedOrNull(a.opener)){a=a.opener;if(a.GrahamTechnology){a.GrahamTechnology.ui.Form.showLoadingImage(true)}}};this.getWindowHandle=function(){var a=this.getPrimaryScreenWindowHandle()?this.getPrimaryScreenWindowHandle().GrahamTechnology.multiwindow.getWindowHandleMap():this.getWindowHandleMap();return a.get(GrahamTechnology.util.AJAXProperties.windowID)};this.getWindowHandleMap=function(){return this.windowHandleIDMap};this.updatePageToken=function(e){var c=this.getWindowHandleMap();var f=c.listKeys();var b;for(b=0;b<f.length;b++){var a=f[b];var d=c.get(a).handle;if(d&&d.clientAPI){d.clientAPI.updatePageToken(e)}}};this.updateParentWindowPageToken=function(){var b={};b.pageToken=clientAPI.getPageToken();var a=window;while(!GrahamTechnology.Base.isUndefinedOrNull(a.opener)){a=a.opener;logger.log("Updating parent page token with new token ["+b.pageToken+"]");if(a.clientAPI){a.clientAPI.updatePageToken(b)}}};this.stripTrailingSlashes=function(a){var b=a;while(b.lastIndexOf("/")===b.length-1){b=b.slice(0,b.lastIndexOf("/"))}return b}};GrahamTechnology.ClientAPI=function(){this.logBuffer=new GrahamTechnology.LogBuffer(GrahamTechnology.util.AJAXProperties.serverLogMaxBufferSize);GrahamTechnology.multiwindow=new GrahamTechnology.MultiWindow();if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){this.eventQueue=new GrahamTechnology.EventQueue()}this.onCorruptedAJAXRequestCounter=new GrahamTechnology.OnCorruptedAJAXRequestCounter();this.onCorruptedPushRequestCounter=new GrahamTechnology.OnCorruptedAJAXRequestCounter();this.affirmationCounter=new GrahamTechnology.AffirmationCounter();this.idleTimeoutHandler=new GrahamTechnology.IdleTimeoutHandler();this.logMessageCallback=new GrahamTechnology.SendLogMessageCallback(this.logBuffer)};GrahamTechnology.ClientAPI.prototype={connectionCompleted:false,concurrentConnections:0,serverPushConnected:false,pushConnection:null,pageRendered:false,conn:[],pingTimerId:null,connection:null,progressIndicator:null,tabButtonClicked:false,messageReceived:new Date(),sessionSuspended:false,sessionSafed:false,expireUnloadSentAlready:false,getConnection:function(){if(this.connection===null){this.connection=new GrahamTechnology.connection.Connection()}return this.connection},incConnUse:function(){this.concurrentConnections++;logger.log("Increased AJAX connection use to "+this.concurrentConnections,"info","ClientAPI.incConnUse")},decConnUse:function(){this.concurrentConnections--;logger.log("Decreased AJAX connection use to "+this.concurrentConnections,"info","ClientAPI.decConnUse")},listboxPostEvent:function(b,e,c,a,d){GrahamTechnology.ui.Listbox.handleClick(b,e,c,a)},listboxComponentPostEvent:function(g,d,a,c,f,b,e){GrahamTechnology.ui.Listbox.Cell.Component.componentAction(g,d,a,c,f,b,e);this.postSubcomponentEvent(a,b,c)},listboxSortPostEvent:function(b,a){var c=GrahamTechnology.ui.Form.getRegisteredComponent(a);c.sortList(b)},paragraphPostEvent:function(b,e,c,a,d){GrahamTechnology.ui.Listbox.handleClick(b,e,c,a)},startPing:function(){var a=this.getConnection();a.pauseTimeouts();this.pingTimerId=window.setInterval("clientAPI.postPingCommand();",GrahamTechnology.util.AJAXConstants.Comms.SERVER_PING_PERIOD)},stopPing:function(){window.clearInterval(this.pingTimerId);var a=this.getConnection();a.resumeTimeouts()},tabExpandCommand:function(b,a){this.tabExpandCollapseTabImpl(b,a,true)},tabCollapseCommand:function(b,a){this.tabExpandCollapseTabImpl(b,a,false)},tabExpandCollapseTabImpl:function(c,b,g){var a=GrahamTechnology.ui.Form.getRegisteredComponent(c);var e=new GrahamTechnology.grasp.CommandCreator();var d=-1;if(g){d=GrahamTechnology.grasp.CommandType.EXPAND_TAB_Transportable}else{d=GrahamTechnology.grasp.CommandType.COLLAPSE_TAB_Transportable}var f=e.createCommand(d,a.FormID,a.ObjectID,b);this.postTransportable(f,new GrahamTechnology.Callback())},tabSelectEvent:function(a,b,d,c){if(this.tabButtonClicked){this.tabButtonClicked=false;return}var e=GrahamTechnology.ui.Form.getRegisteredComponent(a);if(!e.EnabledTabs[d]){return}var g=this.getComponentInfoArray(a);if(GrahamTechnology.Base.isUndefinedOrNull(g)){if(!this.pageRendered){alert("The page has not loaded yet. Please wait...");return}var l="The component with componentID:"+a+" was not registered.";var h=GrahamTechnology.util.ErrorMessage(l,a,"unknown");GrahamTechnology.action.setRefresh(true,h);GrahamTechnology.action.refresh(true)}if((GrahamTechnology.Base.isUndefinedOrNull(c)||!c)&&this.alertIfContentNotValid(e.getInnerFormID())){return}var f=new GrahamTechnology.grasp.CIAEventCreator();var k=f.createTabSelectEvent(a,d,g);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){var j=this.postOrderedEvent(k,null);this.enableServerFeedback(k,b,j)}else{GrahamTechnology.multiwindow.routeClientEventToPrimaryWindow(k,b)}},tabButtonEvent:function(a){this.tabButtonClicked=true;this.postEvent(a,GrahamTechnology.grasp.EvtType.EVENT_ACTION)},getComponentInfoArray:function(a){var c=null;var b=GrahamTechnology.ui.Form.retrieveComponentInfo(a);if(!GrahamTechnology.Base.isUndefinedOrNull(b)){c=this.composeCIA(b)}return c},composeCIA:function(b){var a={};a.value="formID="+b.FormID+",objectID="+b.ObjectID+",componentType="+b.ComponentType;return a.value.split(",")},enableServerFeedback:function(a,d,e){if(!clientAPI.hasPageRendered()){logger.log("Page has not been rendered yet. Do not place glass. Event will be queued","warn","ClientAPI.enableServerFeedback");return}GrahamTechnology.ui.Form.setServerActiveImage();switch(d){case GrahamTechnology.grasp.EvtType.TREE_SELECT:case GrahamTechnology.grasp.EvtType.EVENT_ACTION:logger.log("Disabling all forms","info","ClientAPI.enableServerFeedback");GrahamTechnology.ui.Form.disable();if(!GrahamTechnology.Base.isUndefinedOrNull(e)){e.showGlass=true}clientAPI.enableOnlyWithSTR=true;break;case GrahamTechnology.grasp.EvtType.CUSTOM:var b=GrahamTechnology.ui.Form.getRegisteredComponentIDByObjectId(a.objectID,a.parentID);var c=GrahamTechnology.ui.Form.getRegisteredComponent(b);if(c&&c.showGlassOnEvent){logger.log("Disabling all forms","info","ClientAPI.enableServerFeedback");GrahamTechnology.ui.Form.disable();if(!GrahamTechnology.Base.isUndefinedOrNull(e)){e.showGlass=true}clientAPI.enableOnlyWithSTR=true}break}},actionPostEvent:function(){var a=GrahamTechnology.grasp.EventActionQueue.getEvent();while(!GrahamTechnology.Base.isUndefinedOrNull(a)){logger.log("Posting ActionEvent","info","ClientAPI.actionPostEvent");var b=GrahamTechnology.ui.Form.dirtyTextField;if((!GrahamTechnology.Base.isUndefinedOrNull(b))&&(b.shouldFireValueChangedEvent())){this.postEvent(b.id,GrahamTechnology.grasp.EvtType.EVENT_VALUE_CHANGED);b.setDirty(false)}this.postTransportable(a.transportable,null);a=GrahamTechnology.grasp.EventActionQueue.getEvent()}},postOrderedEvent:function(a,b){if(a.eventType===GrahamTechnology.grasp.EvtType.EVENT_ACTION){logger.log("ActionEvent identified and put in the EventActionQueue","info","ClientAPI.orderEvent");GrahamTechnology.grasp.EventActionQueue.putEvent(a);setTimeout("clientAPI.actionPostEvent()",200)}else{logger.log("Attempt to post event of type '"+a.eventType+"'");return this.postTransportable(a,b)}},expirePushConnection:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.pushConnection)){this.pushConnection.callback.expire()}},setPageRendered:function(a){if(a){gtResize.runPaneInit();if(GrahamTechnology.iframecomms&&GrahamTechnology.iframecomms.resizeIFrame){GrahamTechnology.iframecomms.resizeIFrame()}}this.pageRendered=a},abortPushConnection:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.pushConnection)){this.pushConnection.callback.failure=function(a){logger.log("Aborting push connection","info","ClientAPI.abortPushConnection")};this.getConnection().abort(this.pushConnection,this.pushConnection.callback,false)}},hasPageRendered:function(){return this.pageRendered},onInit:function(){GrahamTechnology.ui.DisplayMessage.initialize()},beforePageRendered:function(){GrahamTechnology.ui.DisplayMessage.initializePageHandler()},pushToQueue:function(a,c){var b={};b.transportable=a;b.callback=c;this.eventQueue.push(b)},isInteractiveEvent:function(a,b){var c=true;if(b===GrahamTechnology.CallbackHandlerNames.CALLBACK){if(a.clazz==="com.gtnet.common.client.grasp.CLIENT_EVENT_Transportable"){if(a.eventType===GrahamTechnology.grasp.EvtType.TIMER){c=false}}}else{c=false}return c},postTransportable:function(a,e){var c=a.clazz;var b=a.eventType||"";var d=a.commandID||"";logger.log("Pushing transportable of type "+c.substring(c.lastIndexOf(".")+1)+" to event queue of type "+b+" "+d,"info","ClientAPI.postTransportable");if(GrahamTechnology.Base.isUndefinedOrNull(e)){e=new GrahamTechnology.Callback()}if(this.isInteractiveEvent(a,e.getName())){clientAPI.idleTimeoutHandler.reset()}e.showGlass=GrahamTechnology.ui.Form.disableFlag;if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){this.pushToQueue(a,e)}else{GrahamTechnology.multiwindow.routeTransportableToPrimaryWindow(a)}return e},updateCallbackWithJSONArray:function(a,b){b.jsonArray=a},affirmationShowed:false,getPageToken:function(){return $("#_gtxReserved_pageToken").attr("value")},getPushToken:function(){return $("#_gtxReserved_pushToken").attr("value")},postJSONArray:function(m,r){var c=null;var b=m.code;var o=m.transportables;var l=o.length;var f=this.getConnection();if(this.isSafSession()||this.isSessionSuspended()){GrahamTechnology.action.refresh(true);return}var p=m.transportables[0].clazz;var e=m.transportables[0].windowID;m.pageToken=this.getPageToken();m.pushToken=this.getPushToken();delete m.transportables[0].windowID;var a=m.transportables[0].eventType||"";var q=m.transportables[0].commandID||"";logger.log("Attempt to post "+l+" transportables of type "+p.substring(p.lastIndexOf(".")+1)+" "+a+" "+q,"info","ClientAPI.postJSONArray");if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){logger.log("EventQueue is of size "+clientAPI.eventQueue.getLength(),"info","ClientAPI.postJSONArray")}var n=!(r.getName()===GrahamTechnology.CallbackHandlerNames.SERVER_PUSH_CALLBACK||r.getName()===GrahamTechnology.CallbackHandlerNames.PING_CALLBACK);var h=GrahamTechnology.util.AcceptorURIBuilder.buildURI(!n,e);this.updateCallbackWithJSONArray(m,r);var d=JSON.stringify(m);if(n){this.updateProgressIndicator("start");if(!(b===GrahamTechnology.grasp.TransportType.COMMAND_Transportable&&(o[0].commandID===GrahamTechnology.grasp.CommandType.AFFIRMATION_POSITIVE||o[0].commandID===GrahamTechnology.grasp.CommandType.AFFIRMATION_NEGATIVE))){this.affirmationShowed=false}r.abort=function k(v,u){var s=new Date();var t=clientAPI.messageReceived.getTime()+this.timeout;if(t>s.getTime()){v.setTimeout(u,this,t-s.getTime())}else{v.abort(u,this,true)}};r.handlesAbort=true}else{r.showGlass=true}this.profileRequest(r);c=f.asyncRequest("POST",h,r,d);if(b===GrahamTechnology.grasp.TransportType.COMMAND_Transportable){var j;for(j=0;j<o.length;j++){var g=o[j];if(g.commandID===GrahamTechnology.grasp.CommandType.AJAX_PUSH_LISTENER){c.callback=r;this.pushConnection=c;break}}}},postSyncCommand:function(b){var f=GrahamTechnology.grasp.TransportableFactory.JSONArray();var e={};var c=this.getConnection();var d=c.getConnectionObject();var a=b.windowID;f.code=b.transportCode;f.pageToken=this.getPageToken();f.transportables[0]=b;e.jsonArray=f;var g=GrahamTechnology.util.AcceptorURIBuilder.buildURI(true,a);var h=JSON.stringify(f);d.conn.open("POST",g,false);d.conn.send(h)},postLogTransportable:function(b){var a={};a.transportable=b;this.logBuffer.push(a)},postLogMessages:function(){var a=this.logBuffer.startSending();this.postJSONArray(a,this.logMessageCallback)},profileRequest:function(a){if(GrahamTechnology.util.AJAXProperties.enableRequestProfiler){GrahamTechnology.profile.RequestProfilerManager.clear();a.requestProfiler=GrahamTechnology.profile.RequestProfilerManager.get();a.requestProfiler.startRTT()}},getProgressIndicator:function(){if(GrahamTechnology.Base.isUndefinedOrNull(this.progressIndicator)){this.progressIndicator=YAHOO.util.Dom.get("progress_indicator")}return this.progressIndicator},updateProgressIndicator:function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(this.getProgressIndicator())){if(a==="start"){this.progressIndicator.value="true"}else{if(a==="end"){this.progressIndicator.value="false"}}}},purgeEventQueue:function(){var c=this.hasPageRendered();var b=this.concurrentConnections<GrahamTechnology.util.AJAXConstants.Comms.MAX_CONCURRENT_CONNECTIONS;if(c&&b&&!gtResize.isLoading()){if(this.eventQueue.getLength()>0){var a=this.eventQueue.popEvents();this.incConnUse();this.postJSONArray(a.jsonArray,a.callback)}else{if(!GrahamTechnology.util.AJAXProperties.deferredServerLogging&&this.logBuffer.hasPendingMessages()&&this.hasServerSession()){this.incConnUse();this.postLogMessages()}}}GrahamTechnology.multiwindow.checkForClosedWindows();GrahamTechnology.multiwindow.processQueuedTransportables()},_purgeEventQueueErrorHandler:function(a){var b=(GrahamTechnology.Base.isUndefinedOrNull(a))?"Unknown error":a.toString();if(confirm("The error attached was detected while trying to communicate with the server.\nAttempt page refresh to recover?\n\n"+b)){GrahamTechnology.action.refresh(true)}else{logger.log("Attempting to restart event queue","info","_purgeEventQueueErrorHandler");this.startEventQueue()}},startEventQueue:function(){GrahamTechnology.util.setInterval(this.purgeEventQueue,"purgeEventQueue",this._purgeEventQueueErrorHandler,GrahamTechnology.util.AJAXConstants.Comms.TRANSPORTABLE_QUEUE_DELAY,null,this)},postCommand:function(c,e){var a=null;if(GrahamTechnology.Base.isUndefinedOrNull(c)){logger.log("No command available for commandType "+c,"error","ClientAPI.postCommand")}else{var b=new GrahamTechnology.grasp.CommandCreator();var d=b.createCommand(c);a=this.postTransportable(d,e)}return a},postPushCommand:function(){if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){logger.log("post push listener","info","ClientAPI.postPushCommand");var c=new GrahamTechnology.ServerPushCallback();this.pushConnection=c;var b=new GrahamTechnology.grasp.CommandCreator();var a=b.createCommand(GrahamTechnology.grasp.CommandType.AJAX_PUSH_LISTENER);if(!GrahamTechnology.Base.isUndefinedOrNull(this.pushConnection)){this.pushConnection.callback=c;if(this.serverPushConnected===false){this.serverPushConnected=true;this.incConnUse()}this.postPushCommandImmediately(a,c)}}},postPushCommandImmediately:function(a,d){var c=GrahamTechnology.grasp.TransportableFactory.JSONArray();c.code=a.transportCode;var b={};b.callback=d;c.transportables[0]=a;c.windowID=a.windowID;b.jsonArray=c;this.postJSONArray(b.jsonArray,b.callback)},postIdleTimeoutCommand:function(){logger.log("posting idle timeout command","info","ClientAPI.postIdleTimeoutCommand");this.expirePushConnection();this.postCommand(GrahamTechnology.grasp.CommandType.AJAX_SESSION_EXPIRED,new GrahamTechnology.IdleCallback())},postIdleWarningCommand:function(a){logger.log("posting idle warning command","info","ClientAPI.postIdleWarningCommand");var b=new GrahamTechnology.grasp.CommandCreator();var c=b.createCommand(GrahamTechnology.grasp.CommandType.SESSION_EXPIRY_WARNING,a?1:0);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){this.pushToQueue(c,new GrahamTechnology.Callback())}else{GrahamTechnology.multiwindow.routeTransportableToPrimaryWindow(c)}},postIdleWarningCancelledCommand:function(){this.postIdleWarningCommand(true)},postBrowserHistoryEvent:function(c,e,b){var f=null;var d=new GrahamTechnology.grasp.CIAEventCreator();var a=d.createEvent(e,c,f,b);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){this.sendToServer(a,e)}else{GrahamTechnology.multiwindow.routeClientEventToPrimaryWindow(a,e)}},postEvent:function(c,f,b){if(f===GrahamTechnology.grasp.EvtType.EVENT_ACTION){var d=GrahamTechnology.ui.Form.getRegisteredComponent(c,null);if(d){if(this.alertIfContentNotValid(d.FormID)){return}}else{if(this.alertIfContentNotValid()){return}}}if(f===GrahamTechnology.grasp.EvtType.EVENT_VALUE_CHANGED){if(!GrahamTechnology.util.isComponentValueValid(c)){return}var h=GrahamTechnology.ui.Form.dirtyTextField;if(!GrahamTechnology.Base.isUndefinedOrNull(h)){h.setDirty(false)}}var g=this.getComponentInfoArray(c);var e=new GrahamTechnology.grasp.CIAEventCreator();var a=e.createEvent(f,c,g,b);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){this.sendToServer(a,f)}else{GrahamTechnology.multiwindow.routeClientEventToPrimaryWindow(a,f)}},sendToServer:function(a,b){var c=this.postOrderedEvent(a,null);this.enableServerFeedback(a,b,c)},alertIfContentNotValid:function(d){var c=GrahamTechnology.ui.Form.isContentsValid();if(c!==""){var b=GrahamTechnology.ui.Form.getRegisteredComponent(c[1],null);if(b){if(!GrahamTechnology.Base.isUndefinedOrNull(d)&&b.FormID!==d){return false}var a=b.CustomErrorMessage;if(!a.equalsIgnoreCase("")){alert(b.CustomErrorMessage);return true}var e=$("label[for='"+c[1]+"']");if(e){c[0]=e.html()}}alert('The value "'+c[2]+'" in text box "'+c[0]+'" is not valid.\nPlease try again.');return true}return false},postKeyPressEvent:function(c,e,b,d){var a=GrahamTechnology.grasp.TransportableFactory.KEY_PRESS_Transportable(c,e,b,d);this.postTransportable(a,null)},postActiveXEvent:function(f,b,c,e){var d=this.convertActiveXParameterArrayToString(e);var a=GrahamTechnology.grasp.TransportableFactory.ActiveXEvent(f,b,c,d);this.postTransportable(a,null);this.enableServerFeedback(a,GrahamTechnology.grasp.EvtType.NO_EVENT)},convertActiveXParameterArrayToString:function(c){var b="";var a;for(a=0;a<c.length;a++){b=b+this.getEscapedParameter(c[a]);if(a<c.length-1){b=b+","}}return b},getEscapedParameter:function(a){if(a===null){return"?null"}else{if(typeof(a)==="undefined"){return"?undefined"}else{if((a+1).toString()==="NaN"){return"?NaN"}}}return this.escape(a)},escape:function(b){var a=[];a[0]=[];a[0][0]="?";a[0][1]="??";a[1]=[];a[1][0]="\\";a[1][1]="\\\\";a[2]=[];a[2][0]=",";a[2][1]="\\,";return this.replaceAll(b.toString(),a)},replaceAll:function(f,d){var c;var e;var b;var a;for(b=0;b<d.length;b++){c="";e=f.split(d[b][0]);for(a=0;a<e.length;a++){if(a>0){c+=d[b][1]}c+=e[a]}f=c}return f},postSubcomponentEvent:function(b,g,d){var e=this.getComponentInfoArray(b);var c=new GrahamTechnology.grasp.CIAEventCreator();var a=c.createSubcomponentEvent(b,g,d,e);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){var f=this.postOrderedEvent(a,null);this.enableServerFeedback(a,d,f)}else{GrahamTechnology.multiwindow.routeClientEventToPrimaryWindow(a,d)}},postRegisteredComponentEvent:function(b,d,f,g,h){var c=GrahamTechnology.ui.Form.getRegisteredComponent(b);if(GrahamTechnology.Base.isUndefinedOrNull(c)){return}c.value=f;c.refresh();var e=c.createEventData(f,d,g);var a=GrahamTechnology.grasp.EventCreator.createEvent(e);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){if(GrahamTechnology.Base.isUndefinedOrNull(h)){h=this.postOrderedEvent(a,null)}else{if(h==="multiWindow"){h=new GrahamTechnology.MultiWindowCallback();this.postOrderedEvent(a,h)}}this.enableServerFeedback(a,d,h)}else{GrahamTechnology.multiwindow.routeClientEventToPrimaryWindow(a,d)}},postWEB_SO_MESSAGE_REPLY:function(a,e,d,c){var b=GrahamTechnology.grasp.TransportableFactory.WEB_SO_MESSAGE_REPLY(a,e,d,c);this.postTransportable(b,null)},postMessagePopdownCommand:function(){this.postCommand(GrahamTechnology.grasp.CommandType.MESSAGE_POPDOWN)},postAffirmationCommand:function(a){this.affirmationCounter.decrementCounter();this.stopPing();if(a){clientAPI.postCommand(GrahamTechnology.grasp.CommandType.AFFIRMATION_POSITIVE)}else{clientAPI.postCommand(GrahamTechnology.grasp.CommandType.AFFIRMATION_NEGATIVE)}if(clientAPI.hasPageRendered()){GrahamTechnology.ui.Form.setServerActiveImage();logger.log("Disabling all forms","info","ClientAPI.postAffirmationCommand");GrahamTechnology.ui.Form.disable();clientAPI.enableOnlyWithSTR=true}GrahamTechnology.ui.Form.closeAffi();this.postPushCommand()},postPageUnloadExpiryCommand:function(a){var b=new GrahamTechnology.grasp.CommandCreator();if(GrahamTechnology.Base.isUndefinedOrNull(a)){a=true}if(a&&this.expireUnloadSentAlready){return}var c=b.createCommand(GrahamTechnology.grasp.CommandType.AJAX_PAGE_UNLOAD_EXPIRY,null,null,null,a);if(a&&GrahamTechnology.util.Browsers.isIE()){this.postSyncCommand(c);this.expireUnloadSentAlready=true}else{connection=this.postTransportable(c,new GrahamTechnology.Callback());this.purgeEventQueue();this.expireUnloadSentAlready=this.expireUnloadSentAlready||this.expire}},postPopdownFormCommand:function(b){var a=new GrahamTechnology.grasp.CommandCreator();var c=a.createCommand(GrahamTechnology.grasp.CommandType.POPDOWN_FORM,b,0,0,0);connection=this.postTransportable(c,null)},postPingCommand:function(){this.postCommand(GrahamTechnology.grasp.CommandType.PING,new GrahamTechnology.PingCallback())},postSpellCheckCommand:function(){this.postCommand(GrahamTechnology.grasp.CommandType.SPELL_CHECK,null)},postClearDisplayMessage:function(c,d,a){var b=GrahamTechnology.grasp.TransportableFactory.DISPLAY_MESSAGE_CLEAR_Transportable(c,d,a);this.postTransportable(b,null)},eventQueueSize:function(){return this.eventQueue.size()},suspendSession:function(){this.sessionSuspended=true;GrahamTechnology.ui.Form.addSessionResumeListeners()},isSessionSuspended:function(){return this.sessionSuspended},safSession:function(){this.sessionSafed=true},isSafSession:function(){return this.sessionSafed},hasServerSession:function(){return(!this.isSafSession()&&!this.isSessionSuspended())},updatePageToken:function(b){var a=b.pageToken;logger.log("Updating original page token: ["+this.getPageToken()+"] with new page token: ["+a+"] on window ["+GrahamTechnology.util.AJAXProperties.windowID+"]","info","Callback.updatePageToken");if(a&&a!==""){$("#_gtxReserved_pageToken").attr("value",a)}if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){GrahamTechnology.multiwindow.updatePageToken(b)}}};GrahamTechnology.Callback=function(){this.timeout=GrahamTechnology.util.AJAXProperties.clientTimeout;this.jsonArray=null;this.showGlass=true;this.requestProfiler=null};GrahamTechnology.Callback.prototype={packetCounter:0,isServerPushResponse:function(){return(this.getName()===GrahamTechnology.CallbackHandlerNames.SERVER_PUSH_CALLBACK)},getName:function(){return GrahamTechnology.CallbackHandlerNames.CALLBACK},releaseConnection:function(){clientAPI.decConnUse()},success:function(a){logger.log("","info","ClientAPI.success - start");if(a.status===205){GrahamTechnology.action.refresh(true)}else{if(GrahamTechnology.util.Browsers.isMultipartXHR()){this.successMultipartXHR(a)}else{this.successXHR(a)}}logger.log("","info","ClientAPI.success - end")},hasSessionExpired:function(d){var a=false;var b=parseInt(d.code,10);if(b===GrahamTechnology.grasp.TransportType.COMMAND_Transportable){var c=parseInt(d.transportables[0].commandID,10);if(c===GrahamTechnology.grasp.CommandType.AJAX_SESSION_EXPIRED||c===GrahamTechnology.grasp.CommandType.AJAX_SESSION_EXPIRED_NO_REFRESH){a=true}}return a},successXHR:function(e){var c=null;if(GrahamTechnology.util.AJAXProperties.enableRequestProfiler){this.requestProfiler.setServerTime(e.getResponseHeader.WebClientTimeTaken);this.requestProfiler.setInteractionID(e.getResponseHeader.EventInteractionID);this.requestProfiler.stopRTT();c=this.requestProfiler.startRPT();this.requestProfiler.storeComponentIdsToMap(this.jsonArray)}this.releaseConnection();clientAPI.onCorruptedAJAXRequestCounter.resetCounter();clientAPI.messageReceived=new Date();logger.log("successXHR","info","Callback.successXHR");var a=new GrahamTechnology.connection.multipart.JSONParser();a.parseJSON(e.responseText);var d=a.jsonPartsArray;if((d.length===1)&&(d[0].contents===GrahamTechnology.util.AJAXConstants.Multipart.ZERO_COMMAND_DESCRIPTORS)){logger.log("No data received. No page action required.","info","Callback.successXHR");if(GrahamTechnology.util.AJAXProperties.enableRequestProfiler){this.requestProfiler.stopRPT(c.id);this.requestProfiler.logProfilingTimings(this.jsonArray)}return}var b=new GrahamTechnology.util.TabOrderExecResolver();this.handleTransportable(d,b);b.updateTabOrder();b=null;this.enableForm();if(GrahamTechnology.util.AJAXProperties.enableRequestProfiler){this.requestProfiler.stopRPT(c.id);this.requestProfiler.logProfilingTimings(this.jsonArray)}},handleTransportable:function(j,h){var c;for(c=0;c<j.length;c++){if(j[c].type!=="HTMLData"){var e=JSON.parse(j[c].contents);var d=parseInt(e.code,10);var g=GrahamTechnology.util.Bool.valueOf(e.lastPacket);var k=e.transportables[0].windowID;if(g&&this.getName()===GrahamTechnology.CallbackHandlerNames.CALLBACK&&e){clientAPI.updatePageToken(e)}if(!k||GrahamTechnology.multiwindow.transportableIntendedForCurrentWindow(k)){if(this.hasSessionExpired(e)){logger.log("Session has expired...","info","Callback.successXHR");this.sessionExpired=true;if(d===GrahamTechnology.grasp.TransportType.COMMAND_Transportable){var a=parseInt(e.transportables[0].commandID,10);if(a!==GrahamTechnology.grasp.CommandType.AJAX_SESSION_EXPIRED_NO_REFRESH){GrahamTechnology.action.refresh(true)}break}}if(d===GrahamTechnology.grasp.TransportType.INNER_FORM_Transportable){e.transportables[0].innerFormHTML=j[c+1].contents}else{if(d===GrahamTechnology.grasp.TransportType.POPUP_FORM_Transportable){e.transportables[0].popupFormHTML=j[c+1].contents}}if(d===GrahamTechnology.grasp.TransportType.AFFIRMATION_Transportable){clientAPI.affirmationCounter.incrementCounter()}var f=new GrahamTechnology.action.Page();f.performAction(e,g,this.showGlass||clientAPI.affirmationShowed,this.requestProfiler,this.isServerPushResponse());if(GrahamTechnology.action.Refresh){break}h.addCandidates(d,e.transportables)}else{var b=null;if(d===GrahamTechnology.grasp.TransportType.INNER_FORM_Transportable||d===GrahamTechnology.grasp.TransportType.POPUP_FORM_Transportable){b=[{type:j[c].type,contents:j[c].contents},{type:j[c+1].type,contents:j[c+1].contents}]}else{b=[{type:j[c].type,contents:j[c].contents}]}GrahamTechnology.multiwindow.handleTransportableRouting(b,k)}}}},checkForTabOrderUpdate:function(b){var a=false;switch(b){case (GrahamTechnology.grasp.TransportType.INNER_FORM_Transportable):a=true;break}return a},enableForm:function(){if(GrahamTechnology.iframecomms&&GrahamTechnology.iframecomms.resizeIFrame){GrahamTechnology.iframecomms.resizeIFrame()}if(!GrahamTechnology.action.Refresh&&!clientAPI.enableOnlyWithSTR){if(this.getName()===GrahamTechnology.CallbackHandlerNames.SERVER_PUSH_CALLBACK){if(clientAPI.concurrentConnections===0){logger.log("Enable all forms","info","Callback.enableForm");if(this.showGlass){GrahamTechnology.ui.Form.enable()}else{clientAPI.updateProgressIndicator("end");GrahamTechnology.ui.Form.setServerIdleImage()}}else{if(GrahamTechnology.util.AJAXProperties.accessibilityOn){GrahamTechnology.ui.Form.playSound(GrahamTechnology.util.AJAXConstants.AccesibleConstants.LOADED,GrahamTechnology.ui.Form.isLargeUpdate)}}}else{logger.log("Enable all forms","info","Callback.enableForm");if(this.showGlass){GrahamTechnology.ui.Form.enable()}else{clientAPI.updateProgressIndicator("end");GrahamTechnology.ui.Form.setServerIdleImage()}}}},successMultipartXHR:function(e){this.releaseConnection();logger.log("JSONArray counter is "+this.packetCounter++,"info","Callback.successMultipartXHR");if(e.conn.responseText===GrahamTechnology.util.AJAXConstants.Multipart.ZERO_COMMAND_DESCRIPTORS){logger.log("No data received. No page action required.","info","Callback.successMultipartXHR");return}var d=JSON.parse(e.conn.responseText);var b=parseInt(d.code,10);var a=GrahamTechnology.util.Bool.valueOf(d.lastPacket);if(a){clientAPI.updatePageToken(d)}if(!a){window.clearTimeout(e.Connection._timeOut[e.tId]);e.Connection._timeOut[e.tId]=window.setTimeout(function(){e.Connection.abort(e,this,true)},this.timeout)}else{window.clearTimeout(e.Connection._timeOut[e.tId]);delete e.Connection._timeOut[e.tId]}if(this.hasSessionExpired(d)){logger.log("Session has expired...","info","Callback.successMultipartXHR");this.sessionExpired=true;if(confirm("Server session has expired. Attempt to reconnect?")){GrahamTechnology.action.refresh(true)}}var c=new GrahamTechnology.action.Page();c.performAction(d,a,this.showGlass||clientAPI.affirmationShowed);if((a)&&(!GrahamTechnology.action.Refresh&&!clientAPI.enableOnlyWithSTR)){logger.log("Enable forms","info","Callback.successMultipartXHR");if(this.showGlass){GrahamTechnology.ui.Form.enable()}else{clientAPI.updateProgressIndicator("end");GrahamTechnology.ui.Form.setServerIdleImage()}}},renderTiming:function(a){setTimeout(function(){profiler.stop(a)},10)},failure:function(c){var b=parseInt(GrahamTechnology.util.AJAXProperties.connectionFailureTimeout,10);if(isNaN(b)){b=500}var a=this;setTimeout(function(){a.failureImpl.call(a,c)},b)},failureImpl:function(a){logger.log("Server failed to respond with status '"+a.status+"'","error","Callback.failure");switch(a.status){case GrahamTechnology.util.AJAXConstants.HttpStatus.CORRUPTED_AJAX_REQUEST:logger.log("Encountered issue "+GrahamTechnology.util.AJAXConstants.HttpStatus.CORRUPTED_AJAX_REQUEST,"info","Callback.failure");if(clientAPI.onCorruptedAJAXRequestCounter.currentValue()<GrahamTechnology.util.AJAXProperties.retryOnCorruptedAJAXRequest){logger.log("Attempting again....","info","Callback.failure");clientAPI.onCorruptedAJAXRequestCounter.incrementCounter();logger.log("Client request retry "+clientAPI.onCorruptedAJAXRequestCounter.currentValue(),"info","Callback.failure");if(!GrahamTechnology.Base.isUndefinedOrNull(this.jsonArray)){clientAPI.postJSONArray(this.jsonArray,this);return}logger.log("jsonArray should never be null. Cannot re-attempt request","info","Callback.failure")}else{logger.log("Max attempt number reached. Aborting...","info","Callback.failure")}break;case GrahamTechnology.util.AJAXConstants.HttpStatus.CONFLICT:if(GrahamTechnology.util.AJAXProperties.invalidPageTokenAction==="STALE_DATA_WARNING"){confirm("Stale data was submitted to the server. The data submitted could not be used.")}GrahamTechnology.action.refresh(true);return}this.releaseConnection();if(clientAPI.affirmationCounter.currentValue()===0){this.alertOnServerError(a);return}clientAPI.onCorruptedAJAXRequestCounter.resetCounter();GrahamTechnology.ui.Form.enable()},alertOnServerError:function(c){var a=new GrahamTechnology.grasp.CommandCreator();var b=a.createCommand(GrahamTechnology.grasp.CommandType.PING,null,null,c.status);clientAPI.postTransportable(b,new GrahamTechnology.ConnectivityCheckCallback())}};GrahamTechnology.MultiWindowCallback=function(){clientAPI.connectionCompleted=false;this.getName=function(){return GrahamTechnology.CallbackHandlerNames.MULTI_WINDOW_CALLBACK};this.success=function(a){if(GrahamTechnology.util.Browsers.isMultipartXHR()){this.successMultipartXHR(a)}else{this.successXHR(a)}clientAPI.connectionCompleted=true}};GrahamTechnology.MultiWindowCallback.prototype=new GrahamTechnology.Callback();GrahamTechnology.ServerPushCallback=function(){this.sessionExpired=false;this.connectionExpired=false;this.getTimeout=function(){var a=GrahamTechnology.util.AJAXProperties.serverPushTimeout;var b=a+60000;return b};this.timeout=this.getTimeout();this.getName=function(){return GrahamTechnology.CallbackHandlerNames.SERVER_PUSH_CALLBACK};this.expire=function(){this.connectionExpired=true};this.releaseConnection=function(){};this.successXHR=function(a){logger.log("Server pushed data...","info","ServerPushCallback.successXHR");clientAPI.onCorruptedPushRequestCounter.resetCounter();GrahamTechnology.ServerPushCallback.prototype.successXHR.call(this,a,"SP");if((!this.sessionExpired)&&(!this.connectionExpired)){clientAPI.postPushCommand()}else{if(this.sessionExpired){logger.log("Session connection has expired. Do not re-attach push listener","info","ServerPushCallback,successXHR")}else{logger.log("Push connection has expired. Do not re-attach push listener","info","ServerPushCallback,successXHR")}GrahamTechnology.ServerPushCallback.prototype.releaseConnection.call(this,a,"SP")}};this.successMultipartXHR=function(a){logger.log("Server pushed data...","info","ServerPushCallback.successMultipartXHR");GrahamTechnology.ServerPushCallback.prototype.successMultipartXHR.call(this,a);if((!this.sessionExpired)&&(!this.connectionExpired)){clientAPI.postPushCommand()}else{if(this.sessionExpired){logger.log("Session has expired. Do not re-attach push listener","info","ServerPushCallback,successMultipartXHR")}else{logger.log("Push connection has expired. Do not re-attach push listener","info","ServerPushCallback,successMultipartXHR")}}};this.failureImpl=function(a){logger.log("Server failed to respond....","info","ServerPushCallback.failure");switch(a.status){case GrahamTechnology.util.AJAXConstants.HttpStatus.CORRUPTED_AJAX_REQUEST:logger.log("Encountered issue "+GrahamTechnology.util.AJAXConstants.HttpStatus.CORRUPTED_AJAX_REQUEST,"info","ServerPushCallback.failure");if(clientAPI.onCorruptedPushRequestCounter.currentValue()<GrahamTechnology.util.AJAXProperties.retryOnCorruptedAJAXRequest){logger.log("Attempting again....","info","ServerPushCallback.failure");clientAPI.onCorruptedPushRequestCounter.incrementCounter();logger.log("Push connect retry "+clientAPI.onCorruptedPushRequestCounter.currentValue(),"info","ServerPushCallback.failure");if(!GrahamTechnology.Base.isUndefinedOrNull(this.jsonArray)){clientAPI.postJSONArray(this.jsonArray,this);return}logger.log("jsonArray should never be null. Cannot re-attempt request","info","ServerPushCallback.failure")}else{logger.log("Max attempt number reached. Aborting...","info","ServerPushCallback.failure")}break}clientAPI.decConnUse();this.serverPushConnected=false;this.alertOnServerError(a)}};GrahamTechnology.ServerPushCallback.prototype=new GrahamTechnology.Callback();GrahamTechnology.PingCallback=function(){this.timeout=300000;this.sessionExpired=false;this.connectionExpired=false;this.getName=function(){return GrahamTechnology.CallbackHandlerNames.PING_CALLBACK};this.expire=function(){this.connectionExpired=true};this.successXHR=function(a){clientAPI.decConnUse();logger.log("PING SUCCESS","info","PingCallback")};this.successMultipartXHR=function(a){clientAPI.decConnUse();logger.log("PING Multi SUCCESS","info","PingCallback")};this.failure=function(a){clientAPI.decConnUse();logger.log("PING FAILURE","error","PingCallback")}};GrahamTechnology.PingCallback.prototype=new GrahamTechnology.Callback();GrahamTechnology.ConnectivityCheckCallback=function(){this.timeout=10000;this.sessionExpired=false;this.connectionExpired=false;this.getName=function(){return GrahamTechnology.CallbackHandlerNames.SERVER_CONNECTIVITY_CHECK_CALLBACK};this.successXHR=function(a){clientAPI.decConnUse();logger.log("CONNECTIVITY CHECK SUCCESS","info","ConnectivityCheckCallback");GrahamTechnology.action.refresh(true)};this.failure=function(a){clientAPI.decConnUse();logger.log("CONNECTIVITY CHECK FAILURE","error","ConnectivityCheckCallback");switch(a.status){case GrahamTechnology.util.AJAXConstants.HttpStatus.CORRUPTED_AJAX_REQUEST:if(clientAPI.onCorruptedPushRequestCounter.currentValue()===GrahamTechnology.util.AJAXProperties.retryOnCorruptedAJAXRequest){GrahamTechnology.action.refresh(true);return}clientAPI.onCorruptedPushRequestCounter.resetCounter();break}if(confirm("Server failed to respond with status '"+a.status+"'. Attempt to reconnect?")){GrahamTechnology.action.refresh(true)}GrahamTechnology.ui.Form.enable()}};GrahamTechnology.ConnectivityCheckCallback.prototype=new GrahamTechnology.PingCallback();GrahamTechnology.IdleCallback=function(){this.getName=function(){return GrahamTechnology.CallbackHandlerNames.IDLE_CALLBACK};this.successXHR=function(a){logger.log("Idle Success","info","IdleCallback");GrahamTechnology.IdleCallback.prototype.successXHR.call(this,a);if(!clientAPI.isSessionSuspended()&&!clientAPI.isSafSession()){GrahamTechnology.action.refresh(true)}};this.successMultipartXHR=function(a){logger.log("Idle Success MultipartXHR","info","IdleCallback");GrahamTechnology.IdleCallback.prototype.successMultipartXHR.call(this,a);if(!clientAPI.isSessionSuspended()&&!clientAPI.isSafSession()){GrahamTechnology.action.refresh(true)}};this.failure=function(a){logger.log("Idle Failure","info","IdleCallback");if(!clientAPI.isSessionSuspended()&&!clientAPI.isSafSession()){GrahamTechnology.action.refresh(true)}}};GrahamTechnology.IdleCallback.prototype=new GrahamTechnology.Callback();GrahamTechnology.SendLogMessageCallback=function(a){this.logBuffer=a;this.getName=function(){return GrahamTechnology.CallbackHandlerNames.LOG_MESSAGE_CALLBACK};this.sendComplete=function(){clientAPI.decConnUse();if(!GrahamTechnology.Base.isUndefinedOrNull(this.logBuffer)){this.logBuffer.sendComplete()}};this.success=function(b){logger.log("","info","ClientAPI.success - start");if(GrahamTechnology.util.Browsers.isMultipartXHR()){this.successMultipartXHR(b)}else{this.successXHR(b)}};this.successXHR=function(b){this.sendComplete()};this.successMultipartXHR=function(b){this.sendComplete()};this.failure=function(b){this.sendComplete()};this.enableForm=function(){if(!GrahamTechnology.action.Refresh&&!clientAPI.enableOnlyWithSTR){GrahamTechnology.ui.Form.enable()}};this.renderTiming=function(b){}};GrahamTechnology.SendLogMessageCallback.prototype=new GrahamTechnology.Callback();GrahamTechnology.AffirmationCounter=function(){this.counter=0;this.decrementCounter=function(){if(this.counter>0){this.counter--}};this.incrementCounter=function(){this.counter++};this.currentValue=function(){return this.counter}};GrahamTechnology.IdleTimeoutHandler=function(){this.timeout=null;this.timeoutValue=0;this.warningPeriod=0;this.inWarningPeriod=false;this.start=function(b,c){this.timeoutValue=b;this.inWarningPeriod=false;if(c>0&&b>0){this.warningPeriod=c;var a=b-c;if(a<=0){this.inWarningPeriod=true;this.timeout=window.setTimeout("clientAPI.idleTimeoutHandler.handleIdleTimeout()",b)}else{this.timeout=window.setTimeout("clientAPI.idleTimeoutHandler.handleIdleWarningTimeout()",a)}}else{if(b>0){this.timeout=window.setTimeout("clientAPI.idleTimeoutHandler.handleIdleTimeout()",b)}}};this.handleIdleTimeout=function(){this.inWarningPeriod=false;clientAPI.postIdleTimeoutCommand()};this.handleIdleWarningTimeout=function(){this.inWarningPeriod=true;clientAPI.postIdleWarningCommand();this.timeout=window.setTimeout("clientAPI.idleTimeoutHandler.handleIdleTimeout()",this.warningPeriod)};this.updateTimeout=function(a){this.timeoutValue=a;this.reset()};this.updateWarningPeriod=function(a){this.warningPeriod=a};this.reset=function(){if(this.inWarningPeriod){clientAPI.postIdleWarningCancelledCommand()}logger.log("Resetting idle timeout","info","IdleTimeoutHandler");window.clearTimeout(this.timeout);this.start(this.timeoutValue,this.warningPeriod)}};GrahamTechnology.OnCorruptedAJAXRequestCounter=function(){this.counter=1;this.resetCounter=function(){this.counter=1};this.incrementCounter=function(){this.counter++};this.currentValue=function(){return this.counter}};GrahamTechnology.EventQueue=function(){this.queue=new GrahamTechnology.util.Queue();this.eventFilter=new GrahamTechnology.EventFilter();this.push=function(a){this.queue.push(a)};this.getLength=function(){return this.queue.getLength()};this.updateJSONArray=function(c,b,a){c.code=b.transportCode;c.transportables[a]=b};this.createJSONArray=function(a){var b=GrahamTechnology.grasp.TransportableFactory.JSONArray();if(!GrahamTechnology.Base.isUndefinedOrNull(a)){b.code=a}return b};this.popEvents=function(){var d=this.createJSONArray();var e={};e.jsonArray=d;var a=this.getLength();var c;for(c=0;c<a;c++){var f=this.queue.peek();var h=f.transportable;d.windowID=h.windowID;var g=f.callback;var b=h.transportCode;var j=d.code;if(GrahamTechnology.Base.isUndefinedOrNull(j)){j=b;e.callback=g}if((b===j)&&(e.callback.getName()===f.callback.getName())){if(g.showGlass){e.callback.showGlass=true}this.queue.pop();this.updateJSONArray(d,h,c)}else{break}}e.jsonArray=this.eventFilter.filter(d);return e};this.size=function(){return this.queue.getLength()}};GrahamTechnology.EventFilter=function(){this.markDuplicateEntries=function(d){var a=[];var e=0;var g=d.transportables;var c,b;for(c=0;c<g.length;c++){var k=g[c];for(b=c+1;b<g.length;b++){var h=g[b];if(k.equals(h)){if(h.eventType===GrahamTechnology.grasp.EvtType.ENTER_KEY_TINYMCE){var f=g[b-1];if(f.eventType===GrahamTechnology.grasp.EvtType.ENTER_KEY_TINYMCE){a[e]=b;e++}break}a[e]=c;e++;break}}}return a};this.containsIndex=function(b,a){var c;for(c=0;c<a.length;c++){if(b===a[c]){return true}}return false};this.removeMarkedEntries=function(f,b){var d=[];var g=f.transportables;var e=0;var c;for(c=0;c<g.length;c++){var a=g[c];if(!this.containsIndex(c,b)){d[e]=a;e++}}f.transportables=d};this.filter=function(b){var a=this.markDuplicateEntries(b);this.removeMarkedEntries(b,a);return b}};GrahamTechnology.LogBuffer=function(a){this.maxSize=a;this.buffer=[];this.hasMessagesToSend=false;this.waitingOnSendComplete=false;this.push=function(b){if(this.maxSize>0&&this.buffer.length>=this.maxSize){this.buffer.shift(b)}this.buffer.push(b);if(!this.waitingOnSendComplete){this.hasMessagesToSend=true}};this.getLength=function(){return this.buffer.length};this.startSending=function(){this.waitingOnSendComplete=true;this.hasMessagesToSend=false;var c=this.buffer.length;var d=GrahamTechnology.grasp.TransportableFactory.JSONArray();d.code=GrahamTechnology.grasp.TransportType.CLIENT_LOG_MESSAGE_Transportable;while(this.buffer.length>0){var b=this.buffer.shift();d.transportables.push(b.transportable)}logger.log("Sending "+c+" log messages to server","info","LogBuffer.startSending()");return d};this.sendComplete=function(){this.waitingOnSendComplete=false};this.hasPendingMessages=function(){return(this.getLength()>0&&this.hasMessagesToSend)}};GrahamTechnology.CallbackHandlerNames={CALLBACK:"Callback",MULTI_WINDOW_CALLBACK:"MultiWindowCallback",SERVER_PUSH_CALLBACK:"ServerPushCallback",PING_CALLBACK:"PingCallback",IDLE_CALLBACK:"IdleCallback",LOG_MESSAGE_CALLBACK:"LogMessageCallback",CONNECTIVITY_CHECK_CALLBACK:"ConnectivityCheckCallback"};YAHOO.util.Event.POLL_INTERVAL=100;YAHOO.util.Event.POLL_RETRYS=20;GrahamTechnology.EventImpl=function(){};GrahamTechnology.Event=new GrahamTechnology.EventImpl();GrahamTechnology.EventImpl.prototype.bind=function(c,b,a){logger.log("Binding event: "+b+" to element: "+c.id,"debug","GrahamTechnology.Event.bind");return $(c).on(b,a)};GrahamTechnology.EventImpl.prototype.unbind=function(b,a){logger.log("Unbinding events: "+a+" from element: "+b.id,"debug","GrahamTechnology.Event.unbind");$(b).off(a)};GrahamTechnology.KeyboardEventManagerClass=function(){};GrahamTechnology.KeyboardEventManagerClass.prototype.handleKeyboardEvent=function(b){var a=GrahamTechnology.HotKeyEventManager.handleHotKeyEvent(b);if(a){a=GrahamTechnology.AccessKeyEventManager.handleAccessKeyEvent(b)}return a};GrahamTechnology.KeyboardEventManager=new GrahamTechnology.KeyboardEventManagerClass();GrahamTechnology.HotKeyEventManagerClass=function(){};GrahamTechnology.HotKeyEventManagerClass.prototype.configuredHotKeys=new Array();GrahamTechnology.HotKeyEventManagerClass.prototype.hotKeysEnabled=true;GrahamTechnology.HotKeyEventManagerClass.prototype.disableHotKeys=function(){this.hotKeysEnabled=false};GrahamTechnology.HotKeyEventManagerClass.prototype.enableHotKeys=function(){this.hotKeysEnabled=true};GrahamTechnology.HotKeyEventManagerClass.prototype.areHotKeysEnabled=function(){return this.hotKeysEnabled};GrahamTechnology.HotKeyEventManagerClass.prototype.isConfiguredHotKey=function(c,e,b,d){for(var a=0;a<this.configuredHotKeys.length;a++){var f=this.configuredHotKeys[a];if(f[0]==c&&f[1]==e&&f[2]==b&&f[3]==d){return true}}return false};GrahamTechnology.HotKeyEventManagerClass.prototype.handleHotKey=function(b,a,c){if(GrahamTechnology.HotKeyEventManager.areHotKeysEnabled()){this.handleHotKeyEvent(a[1])}};GrahamTechnology.HotKeyEventManagerClass.prototype.handleHotKeyEvent=function(b){var d=b.keyCode;if(!GrahamTechnology.Base.isUndefinedOrNull(d)&&b.type=="keydown"){if(this.isConfiguredHotKey(b.altKey,b.ctrlKey,b.shiftKey,d)){var c=this.booleanToInt(b.altKey);var e=this.booleanToInt(b.ctrlKey);var a=this.booleanToInt(b.shiftKey);clientAPI.postKeyPressEvent(c,e,a,d);return false}}return true};GrahamTechnology.HotKeyEventManagerClass.prototype.booleanToInt=function(a){if(YAHOO.lang.isBoolean(a)&&a){return 1}return 0};GrahamTechnology.HotKeyEventManagerClass.prototype.instantiateKeyListener=function(c,f,a,d){var e=this;var b=new YAHOO.util.KeyListener(document,{alt:c,ctrl:f,shift:a,keys:d},{fn:this.handleHotKey,scope:e,correctScope:true});b.enable()};GrahamTechnology.HotKeyEventManagerClass.prototype.instantiateKeyListeners=function(){var c=GrahamTechnology.util.AJAXProperties.hotKeyConfigurationDelimiter;var l=GrahamTechnology.util.AJAXProperties.hotKeyConfiguration;var b=l.split(c);for(var g=0;g<b.length;g++){var k=b[g].split(" ");var a=false;var d=false;var m=false;var o=-1;for(var f=0;f<k.length;f++){var n=k[f].split("=");if(n.length==2){var h=n[0];var e=n[1];if(h=="altKey"&&e=="true"){a=true}else{if(h=="ctrlKey"&&e=="true"){d=true}else{if(h=="shiftKey"&&e=="true"){m=true}else{if(h=="keyCode"){o=e}}}}}}if(o!=-1){this.instantiateKeyListener(a,d,m,o);this.configuredHotKeys.push(new Array(a,d,m,o))}}};GrahamTechnology.HotKeyEventManager=new GrahamTechnology.HotKeyEventManagerClass();GrahamTechnology.AccessKeyEventManagerClass=function(){};GrahamTechnology.AccessKeyEventManagerClass.prototype.modifier="";GrahamTechnology.AccessKeyEventManagerClass.prototype.accessKeyList=new GrahamTechnology.util.Map();GrahamTechnology.AccessKeyEventManagerClass.prototype.initialise=function(){var a=this;if(GrahamTechnology.util.Browsers.isFirefox()){a.modifier="alt_key+shift_key"}else{a.modifier="alt_key"}$("button[accesskey], a[accesskey]").each(function(c){var b=this;a.setAccessKey(a.modifier+"+"+b.accessKey.toUpperCase().charCodeAt(0),function(){b.focus();b.click()})})};GrahamTechnology.AccessKeyEventManagerClass.prototype.handleAccessKeyEvent=function(b){if(b.altKey||b.ctrlKey||b.metaKey){var a=this.getAccessKey(b);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.call(this);return false}}return true};GrahamTechnology.AccessKeyEventManagerClass.prototype.setAccessKey=function(a,b){this.accessKeyList.put(a,b)};GrahamTechnology.AccessKeyEventManagerClass.prototype.getAccessKey=function(c){var a=null;var b=(c.ctrlKey?"ctrl_key+":"")+(c.altKey?"alt_key+":"")+(c.metaKey?"shift_key+":"")+c.keyCode;if(this.accessKeyList.contains(b)){a=this.accessKeyList.get(b)}return a};GrahamTechnology.AccessKeyEventManager=new GrahamTechnology.AccessKeyEventManagerClass();GrahamTechnology.util.Profiler=function(){this.functionsMap={};this.index=1};GrahamTechnology.util.Profiler.prototype.start=function(b){var a=new GrahamTechnology.util.ProfilerContents(b);var c=this.index++;this.functionsMap[c]=a;a.start();return c};GrahamTechnology.util.Profiler.prototype.stop=function(a){if(this.isFunctionNIdIsValidToStop(a)){this.functionsMap[a].stop();this.write("Profiler["+a+"]:"+this.functionsMap[a].getMessage()+":took(ms):"+this.functionsMap[a].getExecutionTime());this.clearProfile(a)}};GrahamTechnology.util.Profiler.prototype.clearProfile=function(a){delete this.functionsMap[a]};GrahamTechnology.util.Profiler.prototype.isFunctionNIdIsValidToStop=function(b){var a=true;if(typeof(b)!="number"){this.write("'The ID which was entered was null or undefined","warn");a=false}else{if(!this.functionsMap[b]){this.write("'Could not find profiler with ID["+b+"]","warn");a=false}}return a};GrahamTechnology.util.Profiler.prototype.write=function(a,b){if(!b){b="info"}logger.logP(a,b,this.PROFILE)};GrahamTechnology.util.Profiler.prototype.getAllProfilers=function(a){return this.functionsMap};GrahamTechnology.util.Profiler.prototype.PROFILE="Profile";GrahamTechnology.util.ProfilerContents=function(a){if(!a){a=""}this.msg=a;this.state=null;this.startTime=null;this.endTime=null};GrahamTechnology.util.ProfilerContents.prototype.start=function(){this.state=GrahamTechnology.util.ProfilerContents.RUNNING;this.startTime=new Date()};GrahamTechnology.util.ProfilerContents.prototype.stop=function(){this.endTime=new Date();this.state=GrahamTechnology.util.ProfilerContents.STOPPED};GrahamTechnology.util.ProfilerContents.prototype.getExecutionTime=function(){return(this.endTime-this.startTime)};GrahamTechnology.util.ProfilerContents.prototype.getStartTime=function(){return this.startTime};GrahamTechnology.util.ProfilerContents.prototype.getEndTime=function(){return this.endTime};GrahamTechnology.util.ProfilerContents.prototype.getState=function(){return this.state};GrahamTechnology.util.ProfilerContents.prototype.getMessage=function(){return this.msg};GrahamTechnology.util.ProfilerContents.RUNNING="Running";GrahamTechnology.util.ProfilerContents.STOPPED="Stopped";GrahamTechnology.ui.Panel=function(b,a){GrahamTechnology.ui.Panel.superclass.constructor.call(this,b,a)};YAHOO.extend(GrahamTechnology.ui.Panel,YAHOO.widget.Panel,{init:function(b,a){GrahamTechnology.ui.Panel.superclass.init.call(this,b,a)},show:function(){this.hideEvent.unsubscribe(this.blur);this.dragEvent.subscribe(function(){try{this.iframe.focus()}catch(a){logger.log("The component ["+this.id+"] cannot be given focus","error","GrahamTechnology.ui.Panel.dragEvent")}});GrahamTechnology.ui.Panel.superclass.show.call(this)},setTabLoop:function(){},setFirstLastFocusable:function(){GrahamTechnology.ui.Panel.superclass.setFirstLastFocusable.call(this)},getConstrainedX:function(b){var d=YAHOO.util.Dom,c=YAHOO.widget.Overlay.VIEWPORT_OFFSET,e=this.element.offsetWidth,a=d.getDocumentWidth();var f=GrahamTechnology.ui.Panel.superclass.getConstrainedX.call(this,b);if(f+(e+c)>a){f=a-(e+c);if(f<c){f=c}}return f},getConstrainedY:function(a){var d=YAHOO.util.Dom,c=YAHOO.widget.Overlay.VIEWPORT_OFFSET,b=this.element.offsetHeight,f=d.getDocumentHeight();var e=GrahamTechnology.ui.Panel.superclass.getConstrainedY.call(this,a);if(e+(b+c)>f){e=f-(b+c);if(e<c){e=c}}return e},initEvents:function(){GrahamTechnology.ui.Panel.superclass.initEvents.call(this);this.beforeCloseEvent=this.createEvent("beforeClose");this.beforeCloseEvent.signature=YAHOO.util.CustomEvent.LIST},_doClose:function(a){YAHOO.util.Event.preventDefault(a);this.beforeCloseEvent.fire()},sizeMask:function(){GrahamTechnology.ui.Panel.superclass.sizeMask.call(this);var a=YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8;if(!a){this.mask.style.position="fixed"}},_createHiddenFocusElement:function(){},_onElementFocus:function(a){if(!GrahamTechnology.DOM.getElementById("mce-modal-block")){GrahamTechnology.ui.Panel.superclass._onElementFocus.call(this,a)}}});GrahamTechnology.Client=GrahamTechnology.Client||{};GrahamTechnology.Client.History=function(){if(window.history&&history.pushState){History.normalizeHash=function(b){var a=b.replace(/#.*/,"");return a}}else{History.getShortUrl=function(c){var b=c,d=History.getBaseUrl(),a=History.getRootUrl();if(History.emulated.pushState){b=b.replace(d,"")}b=b.replace(a,"/");b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"");return b}}History.unescapeString=function(a){return decodeURIComponent(a)};History.isTraditionalAnchor=function(a){return false};jQuery(window).unbind("beforeunload",History.clearAllIntervals);jQuery(window).unbind("unload",History.clearAllIntervals);History.clearAllIntervals=function(){if(!History.emulated.hashChange){var b,a=History.intervalList;if(typeof a!=="undefined"&&a!==null){for(b=0;b<a.length;b++){clearInterval(a[b])}History.intervalList=null}}};History.Adapter.bind(window,"beforeunload",History.clearAllIntervals);History.Adapter.bind(window,"unload",History.clearAllIntervals);$(document).ready(function(){var a="popchange";if(navigator.userAgent.indexOf("Firefox/4")!==-1){a="statechange"}else{if(navigator.userAgent.indexOf("Trident/6")){a="popstate"}}History.Adapter.bind(window,a,function(){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("PopChange Event Fired","debug","History.Adapter.bind.popchange")}browserHistory.postHistoryEvent()});History.Adapter.bind(window,"hashchange",function(){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("HashChange Event Fired","debug","History.Adapter.bin.hashchange")}browserHistory.postHistoryEvent()});browserHistory.postHistoryEvent()})};GrahamTechnology.Client.History.prototype=function(){};GrahamTechnology.Client.History.prototype.forward=function(){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Going Forward in Browser History","debug","GrahamTechnology.Client.History.forward")}History.forward()};GrahamTechnology.Client.History.prototype.back=function(){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Going Backward in Browser History","debug","GrahamTechnology.Client.History.back")}History.back()};GrahamTechnology.Client.History.prototype.postHistoryEvent=function(){var a=this.getState();if(a!==""){if(a!==this.currentState){this.currentState=a;if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Posting History Event With State: "+a,"debug","GrahamTechnology.Client.History.postHistoryEvent")}clientAPI.postBrowserHistoryEvent(null,GrahamTechnology.grasp.EvtType.EVENT_HISTORY_JUMP,a);this.trackPageView()}}a=null};GrahamTechnology.Client.History.prototype.pushState=function(c,b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Pushing State: "+b,"debug","GrahamTechnology.Client.History.pushState")}if(GrahamTechnology.Base.isUndefinedOrNull(a)){logger.log("Updating Current State: "+b,"debug","GrahamTechnology.Client.History.pushState");this.currentState=decodeURIComponent(b)}History.pushState(null,c,this.createStateUrl(b));if(GrahamTechnology.Base.isUndefinedOrNull(a)){this.trackPageView()}};GrahamTechnology.Client.History.prototype.replaceState=function(b,a){if(GrahamTechnology.util.AJAXProperties.enableVerboseLogging){logger.log("Replacing State: "+a,"debug","GrahamTechnology.Client.History.pushState")}this.currentState=decodeURIComponent(a);History.replaceState(null,b,this.createStateUrl(a))};GrahamTechnology.Client.History.prototype.getState=function(){var a;a=History.getState().url;if(a.indexOf("!")!=-1){a=a.substring(a.indexOf("!")+1,a.length)}else{a=""}return a};GrahamTechnology.Client.History.prototype.createStateUrl=function(b){var a=window.location.href;a=a.replace(window.location.hash,"");if(window.history&&history.pushState){a=a+"#!"+b}else{a="!"+b}return a};GrahamTechnology.Client.History.prototype.trackPageView=function(){if(this.analyticsRef){if(this.analyticsRef.trackPageView){var a=History.getState();var b=a.url.replace(History.getRootUrl(),"");this.analyticsRef.trackPageView(b)}}};GrahamTechnology.Client.History.prototype.analyticsRef;GrahamTechnology.Client.History.prototype.currentState;var browserHistory=new GrahamTechnology.Client.History();GrahamTechnology.ui.AbstractComponent=function(a){this.enabled=undefined;this.compParent=null;this.FG_color="black";this.BG_color="white";this.visible=null;this.mnemonic=null;this.hideClass="GTNone";this.hideUnderPopup=false;this.additionalClasses="";this.gainFocusEventEnabled=null;this.initialiseComponent=function(){};this.id=a||"";this.glassID=this.id+"_Glass";this.getComponentName=function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.id)){var b=this.id.indexOf("_");if(b>-1){return this.id.substring(b+1)}}return this.id};this.envelopeID=function(){return YAHOO.util.Dom.get(this.id+"_envelope")};this.destroy=function(){this.unregisterDisplayMessageHandler();if(this._elem){this._elem=null}};this.setFG_Color=function(b){this.element().style.color=b;this.FG_color=b};this.setBG_Color=function(b){this.element().style.background=b;this.BG_color=b};this.setWidth=function(c){var b=this.element();b.style.width=c+"px"};this.width=function(){var c=this.element();var b=c.offsetWidth;if(b&&b!="NaN"){return b}return parseInt(GrahamTechnology.DOM.Element.getComputedStyle(c,"width"),10)};this.setHeight=function(b){var c=this.element();c.style.height=b+"px"};this.height=function(){var b=this.element();return parseInt(GrahamTechnology.DOM.Element.getComputedStyle(b,"height"),10)};this.setLeft=function(b){this.getComponentParent();if(this.compParent){this.compParent.style.left=b+"px"}};this.left=function(){this.getComponentParent();if(this.compParent){return parseInt(GrahamTechnology.DOM.Element.getComputedStyle(this.compParent,"left"),10)}};this.setTop=function(b){this.getComponentParent();if(this.compParent){this.compParent.style.top=b+"px"}};this.top=function(){this.getComponentParent();if(this.compParent){return parseInt(GrahamTechnology.DOM.Element.getComputedStyle(this.compParent,"top"),10)}};this.enable=function(c){if((GrahamTechnology.Base.isUndefinedOrNull(c))){this.enabled=true}if(this.enabled){logger.log("Enable "+this.id,"info","AbstractComponent.enable");var b=this.element();if(!GrahamTechnology.Base.isUndefinedOrNull(b)){b.disabled=false}}};this.disable=function(c){if(GrahamTechnology.Base.isUndefinedOrNull(c)){this.enabled=false}logger.log("Disable "+this.id,"info","AbstractComponent.disable");var b=this.element();if(b){GrahamTechnology.DOM.Element.updateAttributes(b,{disabled:true})}};this.show=function(c){if((GrahamTechnology.Base.isUndefinedOrNull(c))){this.visible=true}if(this.visible){logger.log("Show "+this.id,"info","AbstractComponent.show");var b=this.element();if(!GrahamTechnology.Base.isUndefinedOrNull(b)){GrahamTechnology.DOM.Element.removeClass(b,this.hideClass);GrahamTechnology.DOM.Element.addClass(b,"GTDisplay")}}};this.hide=function(c){if((GrahamTechnology.Base.isUndefinedOrNull(c))){this.visible=false}logger.log("Hide "+this.id,"info","AbstractComponent.hide");var b=this.element();if(!GrahamTechnology.Base.isUndefinedOrNull(b)){GrahamTechnology.DOM.Element.addClass(b,this.hideClass);GrahamTechnology.DOM.Element.removeClass(b,"GTDisplay")}};this.isHidden=function(){var b=this.element();var c=$(b).is(":hidden");return c};this.element=function(){this._elem=GrahamTechnology.DOM.getElementById(this.id);return this._elem};this.createEventData=function(){logger.log("This component "+a+" does not support postEvent","error","GrahamTechnology.ui.AbstractComponent.postEvent")};this.refresh=function(){};this.performFocus=function(){try{this.element().focus()}catch(b){logger.log("The component ["+this.id+"] cannot be given focus (possibly hidden or disabled)","error","GrahamTechnology.ui.AbstractComponent.performFocus")}};this.performBlur=function(){try{this.element().blur()}catch(b){logger.log("The component ["+this.id+"] cannot be blurred from (possibly hidden or disabled)","error","GrahamTechnology.ui.AbstractComponent.performBlur")}};this.getComponentParent=function(){if(GrahamTechnology.Base.isUndefinedOrNull(this.compParent)){var b=this.element().parentNode;while(!YAHOO.util.Dom.hasClass(b,"GTPositional")){b=b.parentNode}this.compParent=b}};this.addGlass=function(){var b=this.element();if(b&&GrahamTechnology.Base.isUndefinedOrNull(YAHOO.util.Dom.get(this.glassID))){var c=GrahamTechnology.DOM.createElement("div",{id:this.glassID,"class":"GTInvisibleGlass",style:{position:"absolute",left:0,top:0,width:"100%",height:b.offsetHeight+"px",zIndex:99}});GrahamTechnology.DOM.appendChildElements(b,c)}};this.updateGlass=function(){var c=YAHOO.util.Dom.get(this.glassID);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){var b=this.element();if(!GrahamTechnology.Base.isUndefinedOrNull(b.scrollHeight)){c.style.height=b.scrollHeight+"px"}else{c.style.height=b.offsetHeight+"px"}}};this.removeGlass=function(){if(YAHOO.util.Dom.get(this.glassID)){GrahamTechnology.DOM.Element.removeById(this.glassID)}};this.setTabIndex=function(c){if(this.TabIndex==c){return}this.TabIndex=c;if(GrahamTechnology.Base.isUndefinedOrNull(this.OriginalTabIndex)){this.OriginalTabIndex=c}var b=this.element();if(this.ComponentType!=GrahamTechnology.grasp.ComponentType.FormHolder&&this.ComponentType!=GrahamTechnology.grasp.ComponentType.TabbedFormHolder){YAHOO.util.Dom.setAttribute(b,"tabIndex",parseInt(c+"",10))}};this.getTabIndex=function(){return this.TabIndex};this.getKernelColumn=function(){};this.setProperties=function(b){for(key in b){this[key]=b[key]}};this.updateInnerLayout=function(){};this.bindScriptText=function(){YAHOO.util.Event.on(this.id,"focus",this.setScriptText,this,true);YAHOO.util.Event.on(this.id,"blur",this.clearScriptText,this,true)};this.setScriptText=function(){var b=GrahamTechnology.ui.Form.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.ScriptTextComponent);for(var c in b){var e=b[c];if(e.Scope==0){var d=YAHOO.util.Dom.get(e.id);d.innerHTML=this.ScriptText}}};this.clearScriptText=function(){var b=GrahamTechnology.ui.Form.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.ScriptTextComponent);for(var c in b){var e=b[c];if(e.Scope==0){var d=YAHOO.util.Dom.get(e.id);d.innerHTML=""}}};this.clearField=function(){};this.onSizeChange=function(){this.updateGlass();GrahamTechnology.ui.Form.fireComponentResize(this.FormID,this.ObjectID,this.id)};this.listenerList={};this.registerListener=function(b,d){if(GrahamTechnology.Base.isUndefinedOrNull(this.listenerList[b])){this.listenerList[b]=[]}var c=this.listenerList[b];c[c.length]=d};this.fireEvent=function(b){var d=this.listenerList[b];if(!GrahamTechnology.Base.isUndefinedOrNull(d)){for(var c=0;c<d.length;c++){d[c].handleEvent(b)}}};this.isListenerActive=function(b){return false};this.isTinyMCE=function(){return !GrahamTechnology.Base.isUndefinedOrNull(this.tinyMCEInitialised)};this.disableAccessKey=function(){var b=this.element();var c=YAHOO.util.Dom.getAttribute(b,"accessKey");if(c!=null){this.mnemonic=c;b.removeAttribute("accessKey")}};this.enableAccessKey=function(){var b=this.element();if(this.mnemonic!=null){YAHOO.util.Dom.setAttribute(b,"accessKey",this.mnemonic)}};this.unregisterDisplayMessageHandler=function(){GrahamTechnology.ui.DisplayMessage.unregisterHandler(this.id)};this.isInPopupForm=function(){return GrahamTechnology.ui.Form.getFirstFormID()!=this.TopLevelFormID};this.performStyleAction=function(b){this.setAdditionalStyles(this.id,b)};this.setAdditionalStyles=function(e,d){YAHOO.util.Dom.removeClass(e,this.additionalClasses);YAHOO.util.Dom.addClass(e,d);if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.util.AJAXSessionProperties.logicalSessionID)){var b=YAHOO.util.Dom.getStyle(e,"background-image");if(b&&!(b=="none")){if(b.indexOf(GrahamTechnology.util.AJAXConstants.URI.UNIFIED_SERVLET)==-1){if(b.substr(0,3).toLowerCase()==="url"){b=b.substring(4,b.length-1);if(b[0]==='"'||b[0]==="'"){b=b.substring(1,b.length-1)}}b=$("<a/>").attr("href",b)[0].pathname;if(b[0]!=="/"){b="/"+b}for(var c in GrahamTechnology.util.AJAXConstants.URI){if(b.indexOf(GrahamTechnology.util.AJAXConstants.URI[c])==0){b=b.substr((GrahamTechnology.util.AJAXConstants.URI[c]).length);break}}b="url("+GrahamTechnology.util.constructFullImageURL(b)+")"}YAHOO.util.Dom.setStyle(e,"background-image",b)}}this.additionalClasses=d};this.registerDisplayMessageHandler=function(){var b=GrahamTechnology.ui.DisplayMessage.Handler.FormControl.createHandler(this.id);GrahamTechnology.ui.DisplayMessage.registerHandler(this.id,b)}};GrahamTechnology.ui.Placeholder={};GrahamTechnology.ui.cancelEvent=function(a){if(a.preventDefault){a.preventDefault()}else{if(a.returnValue){a.returnValue=false}}return false};GrahamTechnology.ui.requireGlassFix=(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8);GrahamTechnology.ui.focus=function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(a)){var c=YAHOO.util.Dom.get(a);if(!GrahamTechnology.Base.isUndefinedOrNull(c)&&c.enabled&&c.visible){try{c.focus()}catch(b){logger.log("The component ["+c.id+"] cannot be given focus (possibly hidden or disabled)","error","GrahamTechnology.ui.TimeInputField.focusOnField")}}}};GrahamTechnology.ui.alert=function(b,a){alert(b);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){var c=YAHOO.util.Dom.get(a);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){c.blur();setTimeout('GrahamTechnology.ui.focus("'+a+'")',1)}}};GrahamTechnology.ui.delayedFocusAction=null;GrahamTechnology.ui.PopupPanelPool=function(){this.queue=new GrahamTechnology.util.Queue();this.get=function(){if(this.getLength()==0){return null}logger.log("Get popup from pool. Queue length :"+this.getLength(),"info","PopupFramePool.get");return this.queue.pop()};this.put=function(a){this.queue.push(a);logger.log("Return popup to pool. Queue length :"+this.getLength(),"info","PopupFramePool.put")};this.getLength=function(){return this.queue.getLength()}};GrahamTechnology.ui.PopupPanelWrapper=function(b,a){this.formID=b;this.panel=a;this.getPanel=function(){return this.panel};this.getFormID=function(){return this.formID}};GrahamTechnology.ui.FormInstance=function(a){this.formID=a;this.isPopup=false;this.autoSizePopupWidth=false;this.autoSizePopupHeight=false;this.width=null;this.height=null;this.dynamic=false;this.currentTabIndex=0;this.currentlyFocusedElement;this.components={};this.popupform=null;this.popupformWrapper;this.optionLists={};this.renderedOptionLists={};this.renderedOptionListWidths={};this.getPopupPanelPool=function(){return GrahamTechnology.ui.Form.popupPanelPool};this.getOptionList=function(b){return this.optionLists[b]};this.setTitle=function(b){if(this.isPopup){var c=YAHOO.util.Dom.get("popup_"+this.formID+"_window_h");if(!GrahamTechnology.Base.isUndefinedOrNull(c)){c.innerHTML=b}}else{document.title=b}};this.setBG_Color=function(c){if(this.isPopup){var b=YAHOO.util.Dom.get("pnf"+this.formID+"_pane0");if(!GrahamTechnology.Base.isUndefinedOrNull(b)){b.style.background=c}}else{document.body.bgColor=c}};this.setFG_Color=function(){};this.raise=function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.popupform)){this.getOverlayManager().bringToTop(this.popupform);this.getOverlayManager().focus(this.popupform)}};this.lower=function(){};this.setPageTitle=function(b){GrahamTechnology.ui.Form.setPageTitle(this.extractPopupTitle(b))};this.extractPopupTitle=function(c){var b=YAHOO.util.Dom.get(c);var d="";if(!GrahamTechnology.Base.isUndefinedOrNull(b)){d=b.innerHTML}return d};this.popup=function(){if(this.isPopup){if(GrahamTechnology.util.RenderingEngines.isAppleWebKit()){YAHOO.util.Dom.getElementsByClassName("tab-contents","div",null,function(w){w.style.overflow="hidden"})}var t=this.getPopupPanelPool().get();var f=this.getOverlayManager();this.currentlyFocusedElement=GrahamTechnology.ui.Form.getFocusedComponent();var r;var j;var p;var o=this.autoSizePopupWidth&&!(GrahamTechnology.util.RenderingEngines.isIE_6()||GrahamTechnology.util.RenderingEngines.isIE_7()||GrahamTechnology.util.RenderingEngines.isIE_9());if(o){r="auto"}else{r=this.width+"px"}if(this.autoSizePopupHeight){j="auto";p="auto"}else{p=this.height+"px";j=(parseInt(this.height,10)+25)+"px"}var n;GrahamTechnology.ui.Form.disableAllRogueComponents();GrahamTechnology.ui.Form.disableAllAccessKeys(a);GrahamTechnology.ui.Form.disableTinyMCETabIndexes(a);GrahamTechnology.ui.Form.showElseHideComponentsWithHideUnderPopup(a,false);if(GrahamTechnology.HotKeyEventManager){GrahamTechnology.HotKeyEventManager.disableHotKeys()}if(!t){n="popup_"+a+"_window";this.popupform=this.createPopup(n,{fixedcenter:true,constraintoviewport:true,width:r,height:j,modal:this.modal,close:this.closable,zIndex:100,visible:false,autofillheight:null,iframe:true,monitorresize:false});this.popupform.unsubscribe("show",this.popupform.focusFirst);this.popupformWrapper=new GrahamTechnology.ui.PopupPanelWrapper(this.formID,this.popupform);this.popupform.createHeader=function k(){var w=document.createElement("h1");GrahamTechnology.DOM.Element.setClass(w,Yahoo.widget.Module.CSS_HEADER);return w};f.register(this.popupform)}else{n="popup_"+t.getFormID()+"_window";this.popupformWrapper=t;this.popupform=t.getPanel();this.popupform.cfg.setProperty("width",r);this.popupform.cfg.setProperty("height",j);this.popupform.cfg.setProperty("modal",this.modal);this.popupform.cfg.setProperty("close",this.closable)}this.popupform.beforeCloseEvent.subscribe(this.closeButtonClicked,this,true);this.popupform.setHeader(this.retrieveHeader());if(this.dynamic){this.popupform.setBody(this.retrieveBody())}this.popupform.render("popups");if(this.formClassName){var c=YAHOO.util.Dom.get(n);YAHOO.util.Dom.addClass(c.parentElement,this.formClassName)}GrahamTechnology.DOM.Element.removeById("popup_"+this.formID);var g=GrahamTechnology.DOM.getElementById(n);var s=GrahamTechnology.DOM.getFirstElementByTagAndClass(g,"div","bd");if(s){s.style.height=p;var v="popup_"+a+"_body";s.id=v;var b=GrahamTechnology.ui.DisplayMessage.Handler.Form.createHandler(a,v);var q=GrahamTechnology.ui.DisplayMessage.getFormHandlerId(a);GrahamTechnology.ui.DisplayMessage.registerHandler(q,b)}var e=YAHOO.util.Dom.getDocumentWidth();if(o&&this.popupform.element.offsetWidth+50>e){this.popupform.cfg.setProperty("width",(e-50)+"px")}this.popupform.show();f.bringToTop(this.popupform);var u=n+"_h";GrahamTechnology.ui.Form.pushTitle(document.title);this.setPageTitle(u);GrahamTechnology.ui.Form.setMainFormVisiblity(false);if(!(this.autoSizePopupWidth||this.autoSizePopupHeight)){var l=YAHOO.util.Dom.getElementBy(function(){return true},"form",n);l.style.height=p;GrahamTechnology.ui.SnSResize(l)}else{GrahamTechnology.ui.getSnSResizeEvent().fire()}if(!this.dynamic&&GrahamTechnology.util.RenderingEngines.isIE()){var m=GrahamTechnology.ui.Form.Form[this.formID].components;for(var d in m){if(m[d].ComponentType==GrahamTechnology.grasp.ComponentType.FormParagraph){var h=YAHOO.util.Dom.get("iFrame_"+d);if(!GrahamTechnology.Base.isUndefinedOrNull(h)){h.src=h.src}}}}GrahamTechnology.ui.Form.playSound(GrahamTechnology.util.AJAXConstants.AccesibleConstants.LOADED,false)}};this.closeButtonClicked=function(b){YAHOO.util.Event.preventDefault(b);clientAPI.postPopdownFormCommand(this.formID)};this.focusFirstTabbableElement=function(){if(this.isPopup){var c=GrahamTechnology.ui.Form.getRegisteredFormSortedComponentsForForm(a,a);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){for(var f in c){var b=GrahamTechnology.ui.Form.getRegisteredComponent(c[f]);if(GrahamTechnology.util.isComponentFocusable(b)){try{b.performFocus()}catch(d){logger.log("The component ["+b.id+"] cannot be given focus (possibly hidden or disabled)","error","GrahamTechnology.ui.FormInstance.popup")}break}}}}};this.retrievePopupElement=function(){return YAHOO.util.Dom.get("popup_"+this.formID)};this.retrieveHeader=function(){var c=this.retrievePopupElement();if(c){var b=GrahamTechnology.DOM.getFirstElementByTagAndClass(c,"h1","hd");if(!b){return""}}else{return""}if(GrahamTechnology.util.RenderingEngines.isIE()){return b.innerHTML}if(GrahamTechnology.Base.isUndefinedOrNull(b.firstChild)){return""}else{return b.firstChild}};this.retrieveBody=function(){var d=this.retrievePopupElement();var c=GrahamTechnology.DOM.getFirstElementByTagAndClass(d,"div","bd");var b=GrahamTechnology.DOM.getFirstElementByTagAndClass(c,"form",null);if(!b){return null}if(GrahamTechnology.util.RenderingEngines.isIE()){return'<form onsubmit="return false;">'+b.innerHTML+"</form>"}return b};this.popdown=function(){if(!this.isPopup){logger.log("Refresh Base Form :"+this.formID,"info","CommandAction.performAction");GrahamTechnology.action.Refresh=true}else{if(GrahamTechnology.util.RenderingEngines.isAppleWebKit()){YAHOO.util.Dom.getElementsByClassName("tab-contents","div",null,function(h){h.style.overflow="auto"})}for(var c in this.components){GrahamTechnology.ui.Form.unregister(this.formID,c)}delete GrahamTechnology.ui.Form.Form[this.formID];if(this.popupform){var g=this.popupform.focusableElements;this.popupform.hide();this.popupform.beforeCloseEvent.unsubscribe(this.closeButtonClicked,this);if(this.formClassName){var b=this.getPopupPanelPool().get();var e;if(!b){e="popup_"+a+"_window"}else{e="popup_"+b.getFormID()+"_window"}var d=YAHOO.util.Dom.get(e);YAHOO.util.Dom.removeClass(d.parentElement,this.formClassName)}this.getPopupPanelPool().put(this.popupformWrapper);GrahamTechnology.DOM.Element.remove(this.popupform.element);this.focusToInputElement(g)}var f=GrahamTechnology.ui.DisplayMessage.getFormHandlerId(a);GrahamTechnology.ui.DisplayMessage.unregisterHandler(f)}GrahamTechnology.ui.Form.enableAllRogueComponents();GrahamTechnology.ui.Form.enableAllAccessKeys();GrahamTechnology.ui.Form.enableTinyMCETabIndexes();GrahamTechnology.ui.Form.setMainFormVisiblity(true);GrahamTechnology.ui.Form.showElseHideComponentsWithHideUnderPopup(a,true);if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.HotKeyEventManager)){GrahamTechnology.HotKeyEventManager.enableHotKeys()}this.returnFocusToCurrentComponent();GrahamTechnology.ui.Form.setPageTitle(GrahamTechnology.ui.Form.popTitle())};this.focusToInputElement=function(c){if(GrahamTechnology.util.RenderingEngines.isIE()){for(var b in c){if(c[b].tagName.toLowerCase()=="input"){try{c[b].focus();break}catch(d){}}}}};this.returnFocusToCurrentComponent=function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.currentlyFocusedElement)){var c=YAHOO.util.Dom.get(this.currentlyFocusedElement);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){try{c.focus()}catch(b){logger.log("The component ["+c.id+"] cannot be given focus (possibly hidden or disabled)","error","GrahamTechnology.ui.FormInstance.returnFocusToCurrentComponent")}}}};this.getOverlayManager=function(){if(GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.overlayManager)){GrahamTechnology.ui.Form.overlayManager=new YAHOO.widget.OverlayManager()}return GrahamTechnology.ui.Form.overlayManager};this.getPanelElement=function(){if(!this.isPopup){return new Array()}var d=YAHOO.util.Dom.get("popup_"+this.formID);var e=new Array();function b(g){return(g.type!=="hidden")}var f=YAHOO.widget.Panel.FOCUSABLE;for(var c=0;c<f.length;c++){e=e.concat(YAHOO.util.Dom.getElementsBy(b,f[c],d))}return e};this.removeElementFromFocusHandler=function(b){if(GrahamTechnology.Base.isUndefinedOrNull(this.popupform)||!this.modal||GrahamTechnology.Base.isUndefinedOrNull(b)||b.length==0){return}var e=this.popupform.focusableElements;for(var d=0;d<b.length;d++){for(var c=0;c<e.length;c++){if(b[d]==e[c]){e.splice(c,1);YAHOO.util.Event.removeListener(b[d],"focus",this.popupform._onElementFocus);break}}}}};GrahamTechnology.ui.InformationPopup=function(){this.text="";this.foreground="#000000";this.background="#FFFFFF";this.modal=false;this.closable=true;this.config={fixedcenter:true,constraintoviewport:true,zIndex:1000,visible:false};this.getHeader=function(){return this.getTitle()+" &nbsp; &nbsp; &nbsp;"};this.getBody=function(){return'<div style="padding: 5px; background-color:'+this.background+"; color:"+this.foreground+';">'+this.text.replaceAll("\n","<br/>")+'<br/><br/><div id="'+this.getButtonsID()+'" align="center">'+this.getButtonsMarkup()+"</div></div></div>"};this.prepareDOM=function(){var a=this.getContainer();a.innerHTML='<div id="'+this.getWindowID()+'" ></div>'};this.popup=function(){this.prepareDOM();var a=this.getPopupPanelPool().get();var c=this.getOverlayManager();var b=this.getWindowID();if(!a){this.popupform=new GrahamTechnology.ui.Panel(b,this.config);this.popupformWrapper=new GrahamTechnology.ui.PopupPanelWrapper(this.getContainerID(),this.popupform);c.register(this.popupform)}else{this.popupformWrapper=a;this.popupform=a.getPanel();this.popupform.cfg.setProperty("modal",this.modal);this.popupform.cfg.setProperty("close",this.closable)}this.popupform.setHeader(this.getHeader());this.popupform.setBody(this.getBody());this.popupform.render(this.getContainerID());this.registerEvents();this.popupform.show();GrahamTechnology.ui.Form.setMainFormVisiblity(false)};this.getPopupPanelPool=function(){return GrahamTechnology.ui.Form.popupDialoguePanelPool};this.getOverlayManager=function(){if(GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.overlayManager)){GrahamTechnology.ui.Form.overlayManager=new YAHOO.widget.OverlayManager()}return GrahamTechnology.ui.Form.overlayManager};this.registerEvents=function(){this.registerShowEvent();this.registerHideEvent()};this.registerShowEvent=function(){var a=this;this.popupform.showEvent.subscribe(a.centreButtons,a,true);this.popupform.showEvent.subscribe(a.focusOnPopup,a,true)};this.registerHideEvent=function(){this.popupform.hideEvent.subscribe(clientAPI.postMessagePopdownCommand,clientAPI,true)};this.unregisterEvents=function(){this.unregisterShowEvent();this.unregisterHideEvent()};this.unregisterShowEvent=function(){var a=this;this.popupform.showEvent.unsubscribe(a.centreButtons,a);this.popupform.showEvent.unsubscribe(a.focusOnPopup,a)};this.unregisterHideEvent=function(){this.popupform.hideEvent.unsubscribe(clientAPI.postMessagePopdownCommand,clientAPI)};this.centreButtons=function(){var a=YAHOO.util.Dom.get(this.getButtonsID());a.style.width=a.offsetWidth+"px"};this.focusOnPopup=function(){var a=GrahamTechnology.DOM.getElementsByIdTagAndClass(this.getButtonsID(),"button",null);if(a.length>0){try{a[0].focus()}catch(b){}}};this.popdown=function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.popupform)){this.popupform.hide();this.unregisterEvents();this.getPopupPanelPool().put(this.popupformWrapper);this.removeDomElements();this.popupform=null;this.popupformWrapper=null}this.getContainer().innerHTML="";GrahamTechnology.ui.Form.setMainFormVisiblity(true)};this.removeDomElements=function(){GrahamTechnology.DOM.Element.remove(this.popupform.element)};this.getContainer=function(){var a=YAHOO.util.Dom.get(this.getContainerID());if(!a){a=GrahamTechnology.DOM.createElement("div",{id:this.getContainerID(),style:{zIndex:1002}});GrahamTechnology.DOM.appendChildElements(document.body,a)}return a};this.getContainerID=function(){return"information"};this.getWindowID=function(){return this.getContainerID()+"_window"};this.getButtonsID=function(){return this.getWindowID()+"_buttons"};this.getTitle=function(){return"Information"};this.getButtonsMarkup=function(){return'<button onclick="jsInformation().popdown();">OK</button>'}};GrahamTechnology.ui.AffirmationPopup=function(){this.posText="Yes";this.posForeground="";this.posBackground="";this.negText="No";this.negForeground="";this.negBackground="";this.title=null;this.modal=true;this.closable=false;this.config={fixedcenter:true,constraintoviewport:true,modal:true,close:false,visible:false,zIndex:1000};this.registerHideEvent=function(){};this.unregisterHideEvent=function(){};this.getContainerID=function(){return"affirmation"};this.getTitle=function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.title)&&this.title!=""){return this.title}else{return"Question"}};this.getButtonsMarkup=function(){var c="";if(this.posText!=""){c='<button onclick="clientAPI.postAffirmationCommand(true);" style="background-color:'+this.posBackground+"; color:"+this.posForeground+';">'+this.posText+"</button>"}var a="";if(this.negText!=""){a='<button onclick="clientAPI.postAffirmationCommand(false);" style="background-color:'+this.negBackground+"; color:"+this.negForeground+';">'+this.negText+"</button>"}var b="";if(this.posText!=""&&this.negText!=""){b=" &nbsp; &nbsp; "}return c+b+a}};this.GrahamTechnology.ui.Popup=function(){this.createPopup=function(c,b){var a=new GrahamTechnology.ui.Panel(c,b);return a}};GrahamTechnology.ui.FormInstance.prototype=new GrahamTechnology.ui.Popup();GrahamTechnology.ui.InformationPopup.prototype=new GrahamTechnology.ui.Popup();GrahamTechnology.ui.AffirmationPopup.prototype=new GrahamTechnology.ui.InformationPopup();GrahamTechnology.ui.Form={StartTime:0,EndTime:0,Glass:{},Form:{},ComponentsNotReady:[],tabOrders:{},allPanes:{},allPaneIDsArray:[],coverAllGlass:null,glassAnimationImg:null,loadingImageTimer:null,allRogueComponents:null,disableFlag:false,missingImageStartTime:0,infoPopup:null,affiPopup:null,visibleFormIDs:null,activeImageTimeout:null,CHANGING_VISIBILITY_EVENT:"changingVisibilityEvent",onVisibilityChange:new YAHOO.util.CustomEvent(this.CHANGING_VISIBILITY_EVENT),title:new Array(),popupPanelPool:new GrahamTechnology.ui.PopupPanelPool(),popupDialoguePanelPool:new GrahamTechnology.ui.PopupPanelPool(),dirtyTextField:null,isLargeUpdate:false,tempResizeHandler:null,tempOnscrollHandler:null,activityImage:null,setPageTitle:function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(a)){document.title=a}},pushTitle:function(a){this.title[this.title.length]=a},popTitle:function(){var a="";if(this.title.length>0){a=this.title[this.title.length-1];delete this.title[this.title.length-1];this.title.length--}return a},registerPane:function(j,o,q,m,k,h,g,f){if(!GrahamTechnology.Base.isUndefinedOrNull(this.allPanes[o])){return}var e=true;var n=null;var c=0;var p=0;var b=false;var l=false;var a=false;if(!GrahamTechnology.Base.isUndefinedOrNull(q)){if(typeof q=="boolean"){e=q;a=m}else{if(typeof q=="object"){n=q;if(!GrahamTechnology.Base.isUndefinedOrNull(m)){c=m}if(!GrahamTechnology.Base.isUndefinedOrNull(k)){p=k}if(!GrahamTechnology.Base.isUndefinedOrNull(h)){b=h}if(!GrahamTechnology.Base.isUndefinedOrNull(g)){l=g}if(!GrahamTechnology.Base.isUndefinedOrNull(f)){a=f}}}}var d=new GrahamTechnology.ui.Pane(j,o,e,c,p,b,l,a);gtResize.checkPaneInit(d,n);this.allPanes[o]=d;this.allPaneIDsArray.push(o);return d},checkActionPerformed:function(c,d){var a=this.ComponentsNotReady.length;while(a--){var b=this.ComponentsNotReady[a];var e;if(b){e=b.id}if(e===c||e===d){b.callee.apply(b.context,b.args);this.ComponentsNotReady.splice(a,1)}}},findLongestIndex:function(a){var b=0;var d=0;for(var c=0;c<a.length;c++){var e=a[c];if(e.length>d){b=c;d=e.length}}return b},registerOptionList:function(k){var f=k;var c=f.formID;var h=f.optionListID;var a=f.pleaseSelectText;var d=f.values_Transportables;var j=new Array();for(var e=0;e<d.length;e++){var g=d[e];j[e]=g.value}var b=this.getForm(c);b.optionLists[h]={values:j,pleaseSelectText:a,longestIndex:this.findLongestIndex(j)};delete b.renderedOptionLists[h]},createPaneSplitter:function(b,a,c){var d=this.allPanes[b];d.siblingID=a;d.createPaneSplitter(c)},updateScrollablePanes:function(a){this.allPanes[a].fixScrollableDiv(0,0)},getChildPanes:function(d){var a={};for(var c=0;c<this.allPaneIDsArray.length;c++){var b=this.allPaneIDsArray[c];var e=this.allPanes[b];if(!GrahamTechnology.Base.isUndefinedOrNull(e)){if(e.parentPaneID==d){a[b]=e}}}return a},getPanesForFormID:function(d){var b=new Array();for(var a in this.allPanes){var c=this.allPanes[a];if(!GrahamTechnology.Base.isUndefinedOrNull(c)&&c.formID==d){b[b.length]=c}}return b},getRootPane:function(c){for(var a in this.allPanes){var b=this.allPanes[a];if(!GrahamTechnology.Base.isUndefinedOrNull(b)&&GrahamTechnology.Base.isUndefinedOrNull(b.parentPaneID)&&b.formID==c){return b}}},getInfo:function(){if(GrahamTechnology.Base.isUndefinedOrNull(this.infoPopup)){this.infoPopup=new GrahamTechnology.ui.InformationPopup()}return this.infoPopup},closeInfo:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.infoPopup)){this.infoPopup.popdown();this.infoPopup=null}},popupInfo:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.infoPopup)){this.infoPopup.popup()}},getAffi:function(){if(GrahamTechnology.Base.isUndefinedOrNull(this.affiPopup)){this.affiPopup=new GrahamTechnology.ui.AffirmationPopup()}return this.affiPopup},closeAffi:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.affiPopup)){this.affiPopup.popdown();this.affiPopup=null}},popupAffi:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.affiPopup)){this.affiPopup.popup()}},isUnfetchedTab:function(c){var a=this.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.TabbedFormHolder);for(var b in a){if(a[b].isUnfetchedTab(c)){return true}}return false},replacePopupFormContent:function(d,e){var b=YAHOO.util.Dom.get("popup_"+d);if(GrahamTechnology.Base.isUndefinedOrNull(b)){b=GrahamTechnology.DOM.createElement("div",{id:"popup_"+d});GrahamTechnology.DOM.appendChildElements("popups",b)}else{}var c=/<script[^>]*>([\s\S]+?)<\/script>/gi;var a=c.exec(e);b.innerHTML=e.replace(a[1],"");if(GrahamTechnology.util.Browsers.isFirefox()&&YAHOO.env.ua.gecko<4){c.lastIndex=0}return a[1]},evaluatePopupFormInitialisationScript:function(scriptElements){var formInstanceText=scriptElements;formInstanceText=formInstanceText.substring(0,formInstanceText.indexOf(";")+1);scriptElements=scriptElements.replace(formInstanceText,"");eval(formInstanceText);var formInstancePropertiesText=scriptElements;if(formInstancePropertiesText&&formInstancePropertiesText.indexOf("jsFormInstance")!=-1){formInstancePropertiesText=formInstancePropertiesText.substring(formInstancePropertiesText.indexOf("jsFormInstance"),formInstancePropertiesText.length);scriptElements=scriptElements.replace(formInstancePropertiesText,"");eval(formInstancePropertiesText);formInstancePropertiesText=null}formInstanceText=null;return scriptElements},evaluatePopupFormContent:function(scriptElements){eval(scriptElements)},processAllPopupForms:function(){for(var c in this.Form){var b=this.Form[c].getPanelElement();for(var a in this.Form){if(a!=c){this.Form[a].removeElementFromFocusHandler(b)}}this.Form[c].popup()}this.popupInfo();this.popupAffi()},getLastModalPopupFormID:function(){var a=this.getTopFormIDs();var b=-1;for(var c=0;c<a.length;c++){var e=a[c];var d=this.Form[e];if(d.modal){if(e>b){b=e}}}return b},getNumModalPopupForms:function(){var a=this.getTopFormIDs();var b=0;for(var c=0;c<a.length;c++){var e=a[c];var d=this.Form[e];if(d.modal){b++}}return b},isVisibleFormID:function(b){if(GrahamTechnology.Base.isUndefinedOrNull(this.visibleFormIDs)){this.visibleFormIDs=this.getVisibleFormIDs()}var c=this.visibleFormIDs;for(var a=0;a<c.length;a++){if(b==c[a]){return true}}return false},getVisibleFormIDs:function(){var h={};var a={};for(var d in this.Form){h[d]={};a[d]=h[d];for(var e in this.Form[d].components){if(e!=null&&e!="id"){var k=this.Form[d].components[e];if(k.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder||k.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder||k.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){var m=k.FormID;var f=new Array();if(k.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){f=k.getOpenFormIDs()}else{if(k.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder){f.push(k.getVisibleFormID())}else{f.push(k.getInnerFormID())}}for(var g in f){var j=f[g];var l;if(GrahamTechnology.Base.isUndefinedOrNull(a[m])){l={};a[m]=l}else{l=a[m]}var c;if(GrahamTechnology.Base.isUndefinedOrNull(a[j])){c={};a[j]=c}else{c=a[j]}l[j]=c}}}}}function n(o,p){for(var q in p){o.push(q);n(o,p[q])}}var b=new Array();n(b,h);return b},getAllInnerFormIDs:function(g){var d=this.getRegisteredFormComponentsForForm(g);var f=new Array();f.push(g);for(var b in d){var a=d[b];if(a.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){var e=this.getAllInnerFormIDs(a.InnerFormID);for(var c in e){f.push(e[c])}}else{if(a.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder||a.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){for(var h in a.formIDs){var e=this.getAllInnerFormIDs(a.formIDs[h]);for(var c in e){f.push(e[c])}}}}}return f},getAllRegisteredActiveComponentsForForm:function(g){var d=this.getRegisteredFormComponentsForForm(g);var f=new Array();for(var c=0;c<d.length;c++){f[f.length]=d[c];var b=d[c];if(b.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){var e=this.getAllRegisteredActiveComponentsForForm(b.InnerFormID);for(var a=0;a<e.length;a++){f[f.length]=e[a]}}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder){var e=this.getAllRegisteredActiveComponentsForForm(b.formIDs[b.ActiveTabIndex]);for(var a=0;a<e.length;a++){f[f.length]=e[a]}}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){for(var h in b.formIDs){var e=this.getAllRegisteredFormComponentsForForm(b.formIDs[h]);for(var a=0;a<e.length;a++){f[f.length]=e[a]}}}}}}return f},getAllRegisteredFormComponentsForForm:function(g){var d=this.getRegisteredFormComponentsForForm(g);var f=new Array();for(var c=0;c<d.length;c++){f[f.length]=d[c];var b=d[c];if(b.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){var e=this.getAllRegisteredFormComponentsForForm(b.InnerFormID);for(var a=0;a<e.length;a++){f[f.length]=e[a]}}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder||b.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){for(var h in b.formIDs){var e=this.getAllRegisteredFormComponentsForForm(b.formIDs[h]);for(var a=0;a<e.length;a++){f[f.length]=e[a]}}}}}return f},getFormHolderWithInnerFormID:function(e){for(var c in this.Form){for(var b in this.Form[c].components){if(b!=null&&b!="id"){var a=this.Form[c].components[b];if(a.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){if(a.InnerFormID==e){return a}}else{if(a.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder||a.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){for(var d in a.formIDs){if(a.formIDs[d]==e){return a}}}}}}}return null},getForm:function(a){if(GrahamTechnology.Base.isUndefinedOrNull(this.Form[a])){this.Form[a]=new GrahamTechnology.ui.FormInstance(a)}return this.Form[a]},getFormComponentDimensions:function(f,b){var e={};var d=false;if(!GrahamTechnology.Base.isUndefinedOrNull(b)){d=true}var c=this.getForm(f);for(var a in c.components){if((d&&c[a].id==b)||!d){var g=c.components[a].element().parentNode;while(!GrahamTechnology.DOM.Element.hasClass(g,"GTPositional")){g=g.parentNode}e[c.components[a].id]={};e[c.components[a].id].x=parseInt(GrahamTechnology.DOM.Element.getComputedStyle(g,"left"),10);e[c.components[a].id].y=parseInt(GrahamTechnology.DOM.Element.getComputedStyle(g,"top"),10);e[c.components[a].id].x1=e[c.components[a].id].x+c.components[a].width();e[c.components[a].id].y1=e[c.components[a].id].y+c.components[a].height()}}return e},getRegisteredComponentIDByObjectId:function(e,d){for(var c in this.Form){for(var b in this.Form[c].components){var a=this.Form[c].components[b];if(e==a.ObjectID&&d==a.FormID){return b}}}return null},getRegisteredComponents:function(d){var c=null;var e={};for(var b in this.Form){for(var a in this.Form[b].components){c=this.Form[b].components[a];if(c.ComponentType==d){e[a]=c}}}return e},getFocusedComponent:function(){var a=null;var b=document.activeElement;if(!GrahamTechnology.Base.isUndefinedOrNull(b)){if(!GrahamTechnology.Base.isUndefinedOrNull(b.id+"")){a=b.id+""}}return a},getTopFormIDs:function(){var a=new Array();var b=0;for(var c in this.Form){a[b]=c;b++}return a},getRegisteredComponent:function(a){var b=null;for(var c in this.Form){b=this.Form[c].components[a];if(!GrahamTechnology.Base.isUndefinedOrNull(b)){break}else{b=null}}return b},retrieveComponentInfo:function(a){var c={};var b=this.getRegisteredComponent(a);if(GrahamTechnology.Base.isUndefinedOrNull(b)){c=null}else{c.FormID=b.FormID;c.ObjectID=b.ObjectID;c.ComponentType=b.ComponentType}return c},getFirstFormID:function(){for(var a in this.Form){return a}},getRegisteredPane:function(a){return this.allPanes[a]},getRegisteredFormSortedComponentsForForm:function(g,b){var e=-1;if(GrahamTechnology.Base.isUndefinedOrNull(b)||GrahamTechnology.Base.isUndefinedOrNull(this.Form[b])){e=this.getFirstFormID()}else{e=b}var f=new Array();var a=0;for(var d in this.Form[e].components){var c=this.Form[e].components[d];if(c.FormID==g){if(c.TabIndexInForm>0){f[c.TabIndexInForm]=c.id}}}return f},updateTabOrder:function(){var b=1;logger.log("Updating Tab Order","info","Form.updateTabOrder");for(var a in this.Form){var e=this.Form[a];if(e.isPopup){e.popupform.innerElement.tabIndex=b++}b=this.updateTabOrderOnForm(a,a,b);var d=this.getForm(a);d.currentTabIndex=b}if(GrahamTechnology.Base.isUndefinedOrNull(document.activeElement)){var c=YAHOO.util.Dom.getElementsBy(function(f){return f.tabIndex===1},null,document.forms[0]);if(c.length===1){GrahamTechnology.ui.setFocus(c[0].id)}}},updateTabOrderForFPLinks:function(c,a){if(GrahamTechnology.util.AJAXProperties.accessibilityOn){var b=YAHOO.util.Dom.get(c.id);b.tabIndex=a;a++}var f=YAHOO.util.Dom.getElementsBy(new Function("return true;"),"a",c.id);if(!GrahamTechnology.Base.isUndefinedOrNull(f)){for(var e=0;e<f.length;e++){if(!GrahamTechnology.Base.isUndefinedOrNull(f[e])){f[e].tabIndex=a;a++}}}var d=YAHOO.util.Dom.get("iFrame_"+c.id);if(!GrahamTechnology.Base.isUndefinedOrNull(d)){d.tabIndex=a;a++}return a},updateTabOrderForDateComponent:function(d,a){var e=YAHOO.util.Dom.get(d.id);if(!GrahamTechnology.Base.isUndefinedOrNull(e)){e.tabIndex=a;a++}var b=YAHOO.util.Dom.get(d.id+"_checkbox");if(!GrahamTechnology.Base.isUndefinedOrNull(b)){b.tabIndex=a;a++}var c=YAHOO.util.Dom.get(d.id+"_button");if(!GrahamTechnology.Base.isUndefinedOrNull(c)){c.tabIndex=a;a++}return a},updateTabOrderForTFHButtons:function(k,j,d){var b=0;for(var g=0;g<k.formIDs.length;g++){var c=k.formIDs[g];var e=k.id+"tag"+b;var a=YAHOO.util.Dom.get(e);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.tabIndex=d;d++;var f=k.getTabButtonNameProperty(g);var h=YAHOO.util.Dom.get(f);if(!GrahamTechnology.Base.isUndefinedOrNull(h)){h.tabIndex=d;d++}innerFormID=k.formIDs[b];if(k.isOpenTab(b)){d=this.updateTabOrderOnForm(innerFormID,j,d)}b++}}return d},updateTabOrderForAccordionFH:function(c,b,a){a=c.updateTabOrder(b,a);return a},updateTabOrderForListBoxRows:function(j,c){var l=YAHOO.util.Dom.get(j.id);if(!GrahamTechnology.util.AJAXProperties.accessibilityOn){var a=YAHOO.util.Dom.get(l.id+"_filter");if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.tabIndex=c;c++}j.setTableBodyTabIndex(c);c=c+(GrahamTechnology.util.RenderingEngines.isIE()?2:1);return c}j.startTabIndex=c;var d=!GrahamTechnology.Base.isUndefinedOrNull(j.myDataTable)&&j.paginatedList;var a=YAHOO.util.Dom.get(l.id+"_filter");var b=j.filterBottom;if(d){var f=j.visibleRows*(j.columns.length+1);var e=c+f+1;if(!GrahamTechnology.Base.isUndefinedOrNull(a)){e++}if(j.reservedTabOrder){return e}}if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&!b){a.tabIndex=c;c++}var k=YAHOO.util.Dom.getElementsByClassName("tabbable",null,l,null);for(var g=0;g<k.length;g++){var h=k[g];if(!GrahamTechnology.Base.isUndefinedOrNull(h)){h.tabIndex=c;c++}}if(!GrahamTechnology.Base.isUndefinedOrNull(a)&&b){a.tabIndex=c;c++}if(d){c=e}return c},updateTabOrderForTree:function(d,a){var c=YAHOO.widget.TreeView.getTree(d.id);if(!GrahamTechnology.Base.isUndefinedOrNull(c)){var e=c.root.getChildrenEl();var b;if(!GrahamTechnology.util.AJAXProperties.accessibilityOn){b=GrahamTechnology.DOM.getFirstElementByTagAndClass(e,"span",null)}else{var f=GrahamTechnology.DOM.getFirstElementByTagAndClass(e,"td","ygtvcontent");if(!GrahamTechnology.Base.isUndefinedOrNull(f)){b=GrahamTechnology.DOM.getFirstElementByTagAndClass(f,"a",null)}}if(!GrahamTechnology.Base.isUndefinedOrNull(b)){if(d.enabled){b.tabIndex=a}else{b.tabIndex=-1}if(a>=0){d.actualTabIndex=a;d.focusableElement=b;a++}}}return a},updateTabOrderForCustomContainers:function(b,a){var c=YAHOO.util.Dom.get(b.id+"_anchor");if(!GrahamTechnology.Base.isUndefinedOrNull(c)){c.tabIndex=a;a++}return a},updateTabOrderOnForm:function(f,c,a){logger.log("Getting Components Within Form with id: "+f,"info","Form.getComponentsWithinForm");var e=this.getRegisteredFormSortedComponentsForForm(f,c);for(var g=1;g<e.length;g++){var b=this.getRegisteredComponent(e[g]);var d;if(!GrahamTechnology.Base.isUndefinedOrNull(b)){if(b.ComponentType==GrahamTechnology.grasp.ComponentType.TabbedFormHolder){a=this.updateTabOrderForTFHButtons(b,c,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.AccordionFormHolder){a=this.updateTabOrderForAccordionFH(b,c,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.Listbox){a=this.updateTabOrderForListBoxRows(b,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.Tree){a=this.updateTabOrderForTree(b,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.Date){a=this.updateTabOrderForDateComponent(b,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.FormParagraph){a=this.updateTabOrderForFPLinks(b,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.CustomContainer){a=this.updateTabOrderForCustomContainers(b,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.FormHolder){d=b.InnerFormID;logger.log("Get components on form id: "+d+" in FormHolder: "+b.id,"info","Form.getComponentsWithinForm");a=this.updateTabOrderOnForm(d,c,a)}else{if(b.ComponentType==GrahamTechnology.grasp.ComponentType.CustomComponent){a=b.setCustomComponentTabIndex(a)}else{b.setTabIndex(a);a++}}}}}}}}}}}return a},isContentsValid:function(){var e=this.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.Textfield);for(var c in e){var b=e[c];var a=b.TestRegExpFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(a)){var d=window[a]();if(d!=""){return[b.getComponentName(),b.id,b.Value]}}}return""},hasRegisteredFormComponents:function(c){for(var b in this.Form[c].components){var a=this.Form[c].components[b];if(a.FormID==c){return true}}return false},getRegisteredFormComponentsForForm:function(f){var e=new Array();var a=0;for(var d in this.Form){for(var c in this.Form[d].components){var b=this.Form[d].components[c];if(b.FormID==f){e[a]=b;a++}}}return e},getFormDimensions:function(d){var a={x:9999,y:9999,x1:-1,y1:-1};var c=this.getFormComponentDimensions(d);for(var b in c){if(c[b].x<a.x){a.x=c[b].x}if(c[b].y<a.y){a.y=c[b].y}if(c[b].x1>a.x1){a.x1=c[b].x1}if(c[b].y1>a.y1){a.y1=c[b].y1}}a.x1-=a.x;a.y1-=a.y;return a},registerComponentProperties:function(e,a,c){var d=this.getForm(e);var b=d.components[a];if(!GrahamTechnology.Base.isUndefinedOrNull(c)&&!GrahamTechnology.Base.isUndefinedOrNull(b)){b.setProperties(c)}},register:function(e,a,h){var b=null;var g=null;var f=true;this.visibleFormIDs=null;if(!GrahamTechnology.Base.isUndefinedOrNull(h)){if(typeof h=="number"){b=h}else{if(typeof h=="object"){g=h}}}var k={};var c=this.getForm(e);var d=GrahamTechnology.grasp.ComponentType;if(GrahamTechnology.Base.isUndefinedOrNull(b)){k=GrahamTechnology.util.ComponentInfo.getComponentInfoValues(a)}else{k.compType=b}switch(parseInt(k.compType,10)){case d.Button:c.components[a]=new GrahamTechnology.ui.Button(a);f=false;break;case d.Checkbox:c.components[a]=new GrahamTechnology.ui.Checkbox(a);break;case d.Combo:c.components[a]=new GrahamTechnology.ui.Combo(a);break;case d.Listbox:c.components[a]=new GrahamTechnology.ui.ListboxComponent(a);break;case d.OptionMenu:c.components[a]=new GrahamTechnology.ui.OptionMenu(a);break;case d.PopdownCombo:c.components[a]=new GrahamTechnology.ui.PopdownCombo(a);break;case d.Spinner:c.components[a]=new GrahamTechnology.ui.Spinner(a);break;case d.RadioButton:c.components[a]=new GrahamTechnology.ui.RadioButton(a);break;case d.Textfield:c.components[a]=new GrahamTechnology.ui.TextField(a);break;case d.ActiveXControl:c.components[a]=new GrahamTechnology.ui.ActiveXControl(a);break;case d.TextLabel:c.components[a]=new GrahamTechnology.ui.TextLabel(a);f=false;break;case d.ImageLabel:c.components[a]=new GrahamTechnology.ui.ImageLabel(a);break;case d.Tree:c.components[a]=new GrahamTechnology.ui.Tree(a);break;case d.FormParagraph:c.components[a]=new GrahamTechnology.ui.FormParagraph(a);break;case d.WebLink:c.components[a]=new GrahamTechnology.ui.WebLink(a);f=false;break;case d.Date:c.components[a]=new GrahamTechnology.ui.Date(a);break;case d.TabbedFormHolder:c.components[a]=new GrahamTechnology.ui.TabbedFormHolder(a);f=false;break;case d.AccordionFormHolder:c.components[a]=new GrahamTechnology.ui.AccordionFormHolder(a);f=false;break;case d.FormHolder:c.components[a]=new GrahamTechnology.ui.FormHolder(a);f=false;break;case d.GraphicBox:c.components[a]=new GrahamTechnology.ui.GraphicBox(a);break;case d.RadioGroup:c.components[a]=new GrahamTechnology.ui.RadioGroup(a);break;case d.Timer:c.components[a]=new GrahamTechnology.ui.Timer(a);break;case d.MenuButton:c.components[a]=new GrahamTechnology.ui.MenuButton(a);break;case d.TimeInputField:c.components[a]=new GrahamTechnology.ui.TimeInputField(a);break;case d.ScriptTextComponent:c.components[a]=new GrahamTechnology.ui.ScriptTextComponent(a);break;case d.GraphicLine:c.components[a]=new GrahamTechnology.ui.GraphicLine(a);f=false;break;case d.CustomComponent:c.components[a]=new GrahamTechnology.ui.CustomComponent(a);break;case d.CustomContainer:c.components[a]=new GrahamTechnology.ui.CustomContainer(a);f=false;break;case d.UNIDENTIFIED:logger.log("Request for registering unidentified component with id :"+a,"error","Form.register");break}if(!GrahamTechnology.Base.isUndefinedOrNull(g)&&!GrahamTechnology.Base.isUndefinedOrNull(c.components[a])){c.components[a].setProperties(g)}if(!GrahamTechnology.Base.isUndefinedOrNull(c.components[a])&&this.canHaveScriptText(parseInt(k.compType,10))&&!GrahamTechnology.Base.isUndefinedOrNull(c.components[a].ScriptText)&&c.components[a].ScriptText.length>0){c.components[a].bindScriptText()}var j=c.components[a];if(GrahamTechnology.util.AJAXProperties.useincrementalLoading){GrahamTechnology.ui.Form.checkActionPerformed(e,a)}if(!GrahamTechnology.Base.isUndefinedOrNull(j)){j.initialiseComponent();if(f){j.registerDisplayMessageHandler()}}},canHaveScriptText:function(b){var a=GrahamTechnology.grasp.ComponentType;return b!=a.TextLabel&&b!=a.ImageLabel&&b!=a.GraphicBox&&b!=a.ScriptTextComponent&&b!=a.RadioGroup&&b!=a.FormHolder},unregister:function(e,a){this.visibleFormIDs=null;if(GrahamTechnology.Base.isUndefinedOrNull(a)){delete this.Form[e]}else{var c=this.getForm(e);var j=c.components[a];if(GrahamTechnology.Base.isUndefinedOrNull(j)){delete this.Form[e]}else{var f=c.components[a].ComponentType;if(f==GrahamTechnology.grasp.ComponentType.RadioButton){var d=GrahamTechnology.ui.Form.getRegisteredComponent(a,e);var k=d.RadioGroup.toString();for(var h in c[k]){if(c.components[k][h]==a){var g=true;delete c.components[k][h];for(var b in c.components[k]){if(!GrahamTechnology.Base.isUndefinedOrNull(GrahamTechnology.ui.Form.getRegisteredComponent(c.components[k][b],e))){g=false;break}}}}delete c.components[d];if(g){delete c.components[k]}}else{if(f==GrahamTechnology.grasp.ComponentType.Textfield){this.unregisterTextFieldValidationFunctions(c.components[a])}}c.components[a].destroy();delete c.components[a]}}},unregisterTextFieldValidationFunctions:function(b){if(GrahamTechnology.Base.isUndefinedOrNull(b)){return}var d=b.OnBlurFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(d)){if(GrahamTechnology.util.RenderingEngines.isIE()){window[d]=void 0}else{delete window[d]}}var c=b.OnKeyFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(c)){if(GrahamTechnology.util.RenderingEngines.isIE()){window[c]=void 0}else{delete window[c]}}var a=b.TestRegExpFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(a)){if(GrahamTechnology.util.RenderingEngines.isIE()){window[a]=void 0}else{delete window[a]}}var e=b.PrepareValidationFunctionName;if(!GrahamTechnology.Base.isUndefinedOrNull(e)){if(GrahamTechnology.util.RenderingEngines.isIE()){window[e]=void 0}else{delete window[e]}}},enable:function(a){GrahamTechnology.Event.unbind(document.body,"keydown");clientAPI.updateProgressIndicator("end");if(GrahamTechnology.Base.isUndefinedOrNull(a)){this.enableAllForms()}else{this.enableForm(a)}this.playSound(GrahamTechnology.util.AJAXConstants.AccesibleConstants.LOADED,this.isLargeUpdate);if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){GrahamTechnology.multiwindow.enable()}},playSound:function(b,a){var c=YAHOO.util.Dom.get("bgsound");if(!GrahamTechnology.Base.isUndefinedOrNull(c)){if(a){this.isLargeUpdate=false;c.loop=2;c.playcount=2}else{c.loop=1;c.playcount=1}c.src=GrahamTechnology.util.constructFullResourceURL(GrahamTechnology.util.AJAXConstants.AccesibleConstants.SOUNDPATH+b);this.playSoundForFirefoxBrowser(c)}},playSoundForFirefoxBrowser:function(a){if(GrahamTechnology.util.Browsers.isFirefox()){if(!GrahamTechnology.Base.isUndefinedOrNull(a)){document.body.removeChild(a);document.body.appendChild(a)}}},enableSounds:function(){var a=YAHOO.util.Dom.get("bgsound-disabled");if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.id="bgsound"}},disableSounds:function(){var a=YAHOO.util.Dom.get("bgsound");if(!GrahamTechnology.Base.isUndefinedOrNull(a)){a.id="bgsound-disabled"}},enableAllForms:function(){for(var a in this.Form){this.enableForm(a)}},enableForm:function(b){this.setServerIdleImage();if(!this.disableFlag){return}else{this.disableFlag=false}clearTimeout(this.loadingImageTimer);if(!GrahamTechnology.Base.isUndefinedOrNull(this.activeImageTimeout)){clearTimeout(this.activeImageTimeout)}this.activeImageTimeout=null;var d=this.Glass[b];if(GrahamTechnology.Base.isUndefinedOrNull(d)){var c=this.stopTimer();if((c<0)||(c>GrahamTechnology.util.AJAXConstants.Glass.MINIMUM_GLASS_TIME_OUT)){this.normaliseForm(b)}else{var a=parseInt(GrahamTechnology.util.AJAXConstants.Glass.MINIMUM_GLASS_TIME_OUT,10)-parseInt(c,10);GrahamTechnology.profile.setProfilingTimeout(function(){this.normaliseForm()},GrahamTechnology.ui.Form,a,"Form.enableForm GrahamTechnology.ui.Form.normaliseForm()")}}else{GrahamTechnology.DOM.Element.remove(this.Glass[b]);delete this.Glass[b]}this.resetRogueComponentsArray()},normaliseForm:function(f){clearTimeout(this.makeGlassVisibleTimeout);this.makeGlassVisibleTimeout=null;if(!GrahamTechnology.util.AJAXProperties.imageGlassRemoval){var e=true;if(this.missingImageStartTime>0){var c=new Date();var b=((parseInt(c.getTime(),10))-(parseInt(this.missingImageStartTime,10)));if(b>=parseInt(GrahamTechnology.util.AJAXConstants.Glass.MAXIMUM_WAIT_FOR_IMAGE_LOAD,10)){logger.log("Images are taking too long to load - removing glass","warn","ui.normaliseForm");e=false}}if(e){var g=document.images;for(var d=0;d<g.length;d++){if(g[d].src!=""&&!g[d].complete){logger.log("Image "+g[d].className+" is NOT loaded yet - leaving glass in place.","info","ui.normaliseForm");GrahamTechnology.profile.setProfilingTimeout(function(){this.normaliseForm()},GrahamTechnology.ui.Form,parseInt(GrahamTechnology.util.AJAXConstants.Glass.RETRY_WAIT_FOR_IMAGE_LOAD,10),"Form.normaliseForm GrahamTechnology.ui.Form.normaliseForm()");if(this.missingImageStartTime<=0){var c=new Date();this.missingImageStartTime=c.getTime()}return}}}this.missingImageStartTime=0}if(YAHOO.env.ua.ie==6){window.onresize=this.tempResizeHandler;this.tempResizeHandler=null;window.onscroll=this.tempOnscrollHandler;this.tempOnscrollHandler=null}if(GrahamTechnology.Base.isUndefinedOrNull(f)){this.showAllRogueComponents();this.enableAllRogueComponents()}else{if(GrahamTechnology.util.RenderingEngines.isIE_6()){var a=GrahamTechnology.ui.Form.getLastModalPopupFormID();if(a==-1){this.showRogueComponent(f);this.enableRogueComponent(f)}}else{this.showRogueComponent(f);this.enableRogueComponent(f)}}GrahamTechnology.DOM.Element.updateAttributes(this.coverAllGlass,{"class":"GTInvisibleGlass",style:{display:"none"}})},resetRogueComponentsArray:function(){this.allRogueComponents=null},hideAllRogueComponents:function(){if(GrahamTechnology.ui.requireGlassFix){var a=this.getTopFormIDs();for(var b=0;b<a.length;b++){this.hideRogueComponent(a[b])}}},hideRogueComponent:function(b){var c=this.getRogueComponents(b);for(var a=0;a<this.allRogueComponents.length;a++){c[a].hide(true)}},hideInnerRogueComponents:function(c){var b=this.getInnerRogueComponents(c);for(var a=0;a<b.length;a++){b[a].hide(true)}},showAllRogueComponents:function(){if(GrahamTechnology.ui.requireGlassFix){var a=this.getTopFormIDs();for(var b=0;b<a.length;b++){this.showRogueComponent(a[b])}}},showRogueComponent:function(b){var c=this.getRogueComponents(b);for(var a=0;a<this.allRogueComponents.length;a++){if(c[a]!=null){c[a].show(true)}}},showInnerRogueComponents:function(c){var b=this.getInnerRogueComponents(c);for(var a=0;a<b.length;a++){if(b[a]!=null){b[a].show(true)}}},enableAllRogueComponents:function(){if(GrahamTechnology.ui.requireGlassFix){var a=this.getTopFormIDs();for(var b=0;b<a.length;b++){this.enableRogueComponent(a[b])}}},enableRogueComponent:function(b){var c=this.getRogueComponents(b);for(var a=0;a<this.allRogueComponents.length;a++){if(c[a]!=null){c[a].enable(true)}}},disableAllRogueComponents:function(){if(GrahamTechnology.ui.requireGlassFix){for(var a in this.Form){this.disableRogueComponent(a)}}},disableRogueComponent:function(b){var c=this.getRogueComponents(b);for(var a=0;a<this.allRogueComponents.length;a++){if(!GrahamTechnology.Base.isUndefinedOrNull(c[a])){c[a].disable(true)}}},getInnerRogueComponents:function(g){var f=new Array();var e=this.getRegisteredFormComponentsForForm(g);var a=0;for(var d in e){if(d!=null&&d!="id"){var c=e[d];var b=GrahamTechnology.grasp.ComponentType;switch(parseInt(c.ComponentType,10)){case b.Combo:case b.OptionMenu:f[a]=c;a++;break;case b.Date:if(c.dateWidgetType=="Combo"){f[a]=c;a++}break;case b.UNIDENTIFIED:logger.log("Request for disabling unidentified component with id :"+componentID,"error","Form.disableInnerRogueComponent");break}}}return f},getRogueComponents:function(e){if(this.allRogueComponents==null||this.allRogueComponents.length<=0){var a=0;this.allRogueComponents=new Array();for(var d in this.Form[e].components){if(d!=null&&d!="id"){var c=this.Form[e].components[d];var b=GrahamTechnology.grasp.ComponentType;switch(parseInt(c.ComponentType,10)){case b.Combo:case b.OptionMenu:this.allRogueComponents[a]=c;a++;break;case b.Date:if(c.dateWidgetType=="Combo"){this.allRogueComponents[a]=c;a++}break;case b.UNIDENTIFIED:logger.log("Request for disabling unidentified component with id :"+componentID,"error","Form.disableRogueComponent");break}}}}return this.allRogueComponents},getLastFormID:function(){var b=this.getTopFormIDs();var a=b.length;return a==0?-1:b[a-1]},disableAllAccessKeysForForm:function(d){if(GrahamTechnology.Base.isUndefinedOrNull(d)||GrahamTechnology.util.Browsers.isIE()){return}var c=this.getAllRegisteredActiveComponentsForForm(d);for(var b in c){var a=c[b];if(this.hasAccessKey(a)){a.disableAccessKey()}}},enableAllAccessKeysForForm:function(d){if(GrahamTechnology.Base.isUndefinedOrNull(d)||GrahamTechnology.util.Browsers.isIE()){return}var c=this.getAllRegisteredActiveComponentsForForm(d);for(var b in c){var a=c[b];if(this.hasAccessKey(a)&&!a.isHidden()){a.enableAccessKey()}}},disableAllAccessKeys:function(a){if(GrahamTechnology.Base.isUndefinedOrNull(a)){a=this.getLastFormID()}for(var b in this.Form){if(b!=a){this.disableAllAccessKeysForForm(b)}}},enableAllAccessKeys:function(){var a=this.getLastFormID();for(var b in this.Form){this.enableAllAccessKeysForForm(b)}},disableTinyMCETabIndexes:function(c){if(GrahamTechnology.Base.isUndefinedOrNull(c)){c=this.getLastFormID()}for(var d in this.Form){if(d!=c){var e=GrahamTechnology.ui.Form.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.Textfield);for(var b in e){var a=e[b];if(a.isTinyMCE()){a.disableTabIndex()}}}}},enableTinyMCETabIndexes:function(c){var c=this.getLastFormID();for(var d in this.Form){if(d==c){var e=GrahamTechnology.ui.Form.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.Textfield);for(var b in e){var a=e[b];if(a.isTinyMCE()){a.enableTabIndex()}}}}},hasAccessKey:function(b){var a=GrahamTechnology.grasp.ComponentType;switch(parseInt(b.ComponentType,10)){case a.RadioButton:case a.Checkbox:case a.Button:case a.TextLabel:case a.TabbedFormHolder:case a.MenuButton:case a.CustomComponent:return true;break}return false},disableKeys:function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(a.keyCode)){if(a.keyCode!=116){a.preventDefault()}}},disable:function(a){this.disableFlag=true;GrahamTechnology.Event.bind(document.body,"keydown",GrahamTechnology.ui.Form.disableKeys);if(!GrahamTechnology.Base.isUndefinedOrNull(a)){this.disableForm(a)}else{this.disableAllForms()}if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){GrahamTechnology.multiwindow.disable()}},disableForm:function(b){var a=this.getFormDimensions(b);this.Glass[b]=GrahamTechnology.DOM.createElement("div",{"class":"GTInvisibleGlass",style:{position:"absolute",left:a.x,top:a.y,width:a.x1,height:a.y1,"min-height":"100%",zIndex:8000}});GrahamTechnology.DOM.appendChildElements(document.body,this.Glass[b])},getPageSizeWithScroll:function(){var a=document;return{width:self.innerWidth||(a.documentElement.clientWidth||a.body.clientWidth),height:self.innerHeight||(a.documentElement.clientHeight||a.body.clientHeight)}},getDocumentSize:function(){return{width:GrahamTechnology.ui.Form.getDocWidth(),height:GrahamTechnology.ui.Form.getDocHeight()}},getDocHeight:function(){var a=document;return Math.max(Math.max(a.body.clientHeight,a.documentElement.clientHeight))},getDocWidth:function(){var a=document;return Math.max(Math.max(a.body.clientWidth,a.documentElement.clientWidth))},disableAllForms:function(){GrahamTechnology.DOM.Element.updateAttributes(this.coverAllGlass,{style:{display:"block"}});if(YAHOO.env.ua.ie===6){this.tempResizeHandler=window.onresize;this.tempOnscrollHandler=window.onscroll;window.onresize=function(){if(GrahamTechnology.ui.Form.tempResizeHandler!=null){GrahamTechnology.ui.Form.tempResizeHandler()}var a=GrahamTechnology.ui.Form.getDocumentSize();GrahamTechnology.ui.Form.coverAllGlass.style.width=(a.width);GrahamTechnology.ui.Form.coverAllGlass.style.height=a.height};window.onscroll=function(){if(GrahamTechnology.ui.Form.tempOnscrollHandler!=null){GrahamTechnology.ui.Form.tempOnscrollHandler()}var a=document;GrahamTechnology.ui.Form.coverAllGlass.style.top=(a.body.scrollTop||a.documentElement.scrollTop);GrahamTechnology.ui.Form.coverAllGlass.style.left=(a.body.scrollLeft||a.documentElement.scrollLeft)}}this.updateCoverClassPositioning();this.makeGlassVisibleTimeout=setTimeout("GrahamTechnology.DOM.Element.updateAttributes(GrahamTechnology.ui.Form.coverAllGlass, {'class' : 'GTGlass'})",750);this.disableAllRogueComponents()},initialiseCoverAllGlass:function(){this.coverAllGlass=GrahamTechnology.DOM.getElementById("GTMainGlass");this.glassAnimationImg=GrahamTechnology.DOM.getFirstElementByTagAndClass(GrahamTechnology.ui.Form.coverAllGlass,"img",null);var a="";if(GrahamTechnology.util.AJAXProperties.loadingImage!=""){a=GrahamTechnology.util.AJAXProperties.loadingImage}else{a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.GLASS_LOADING_ANIMATION_FILENAME)}this.glassAnimationImg.alt="PageLoading";if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8){this.glassAnimationImg=GrahamTechnology.DOM.Element.updateAttributes(this.glassAnimationImg,{src:a})}else{this.glassAnimationImg=GrahamTechnology.DOM.Element.updateAttributes(this.glassAnimationImg,{src:a})}this.updateCoverClassPositioning()},updateCoverClassPositioning:function(){if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8){var a=this.getDocumentSize();var b=document;this.coverAllGlass=GrahamTechnology.DOM.Element.updateAttributes(this.coverAllGlass,{style:{position:"absolute",left:(b.body.scrollLeft||b.documentElement.scrollLeft),top:(b.body.scrollTop||b.documentElement.scrollTop),width:a.width+"px",height:a.height+"px",zIndex:8000}});this.glassAnimationImg=GrahamTechnology.DOM.Element.updateAttributes(this.glassAnimationImg,{style:{position:"absolute",left:this.getImageCentreX(this.getLoadingImageWidth())+"px",top:this.getImageCentreY(this.getLoadingImageHeight())+"px",zIndex:8001}})}else{this.coverAllGlass=GrahamTechnology.DOM.Element.updateAttributes(this.coverAllGlass,{style:{position:"fixed",left:0,top:0,right:0,bottom:0,zIndex:8000}});this.glassAnimationImg=GrahamTechnology.DOM.Element.updateAttributes(this.glassAnimationImg,{style:{position:"fixed",left:"50%",top:"50%","margin-left":"-"+(this.getLoadingImageWidth()/2)+"px","margin-top":"-"+(this.getLoadingImageHeight()/2)+"px",zIndex:8001}})}},startTimer:function(){var a=new Date();this.StartTime=a.getTime()},stopTimer:function(){var a=-1;if(this.StartTime>0){var b=new Date();this.EndTime=b.getTime();a=((parseInt(this.EndTime,10))-(parseInt(this.StartTime,10)));this.EndTime=0;this.StartTime=0}return a},onActiveImageTimeout:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.activeImageTimeout)){this.playSound(GrahamTechnology.util.AJAXConstants.AccesibleConstants.LOADING,false)}},addServerStateCSS:function(){var a="";if(GrahamTechnology.util.AJAXProperties.serverActiveImage!==""){a=GrahamTechnology.util.AJAXProperties.serverActiveImage}else{if(GrahamTechnology.util.browserSupportsAnimatedPNG()){a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.SERVER_ACTIVE_IMAGE_APNG_FILENAME)}else{a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.SERVER_ACTIVE_IMAGE_FILENAME)}}var b='.serverActive {\nbackground-image: url("'+a+'");\n}\n\n';if(GrahamTechnology.util.AJAXProperties.serverIdleImage!==""){a=GrahamTechnology.util.AJAXProperties.serverIdleImage}else{a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.SERVER_IDLE_IMAGE_FILENAME)}b+='.serverIdle {\nbackground-image: url("'+a+'");\n}';YAHOO.util.StyleSheet(b)},setServerActiveImage:function(){this.updateServerActivityImage("serverActive");this.activeImageTimeout=setTimeout("GrahamTechnology.ui.Form.onActiveImageTimeout();",GrahamTechnology.util.AJAXConstants.Glass.INVISIBLE_GLASS_TIME_OUT_WITHOUT_ACTIVITY_IMAGE)},setServerIdleImage:function(){if(!GrahamTechnology.Base.isUndefinedOrNull(this.activeImageTimeout)){clearTimeout(this.activeImageTimeout)}if(GrahamTechnology.Base.isUndefinedOrNull(this.activityImage)){this.activityImage=GrahamTechnology.DOM.getElementById(GrahamTechnology.util.AJAXConstants.Glass.ACTIVITY_IMAGE_ID);if(!GrahamTechnology.Base.isUndefinedOrNull(this.activityImage)){this.addServerStateCSS()}}this.activeImageTimeout=null;this.updateServerActivityImage("serverIdle")},updateServerActivityImage:function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(this.activityImage)){if(a==="serverIdle"){GrahamTechnology.DOM.Element.removeClass(this.activityImage,"serverActive");GrahamTechnology.DOM.Element.addClass(this.activityImage,a)}else{GrahamTechnology.DOM.Element.removeClass(this.activityImage,"serverIdle");GrahamTechnology.DOM.Element.addClass(this.activityImage,a)}}},getInnerWidth:function(){var a=0;if(!GrahamTechnology.Base.isUndefinedOrNull(self.innerWidth)){a=self.innerWidth}else{if(!GrahamTechnology.Base.isUndefinedOrNull(document.body)){a=document.body.clientWidth}}return a},getInnerHeight:function(){var a=0;if(!GrahamTechnology.Base.isUndefinedOrNull(self.innerHeight)){a=self.innerHeight}else{if(!GrahamTechnology.Base.isUndefinedOrNull(document.body)){a=document.body.clientHeight}}return a},getScrollOffsetX:function(){var a=0;if(!GrahamTechnology.Base.isUndefinedOrNull(self.pageXOffset)){a=self.pageXOffset}else{if(!GrahamTechnology.Base.isUndefinedOrNull(document.body)){a=document.body.scrollLeft}}return a},getScrollOffsetY:function(){var a=0;if(!GrahamTechnology.Base.isUndefinedOrNull(self.pageYOffset)){a=self.pageYOffset}else{if(!GrahamTechnology.Base.isUndefinedOrNull(document.body)){a=document.body.scrollTop}}return a},getImageCentreX:function(a){var b=(this.getInnerWidth()/2)+this.getScrollOffsetX();var c=a/2;return b-c},getImageCentreY:function(a){var b=(this.getInnerHeight()/2)+this.getScrollOffsetY();var d=a/2;var c=b-d;return c},getLoadingImageHeight:function(){var a="";if(GrahamTechnology.util.AJAXProperties.loadingImage!==""){a=GrahamTechnology.util.AJAXProperties.loadingImage}else{a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.GLASS_LOADING_ANIMATION_FILENAME)}var b=GrahamTechnology.DOM.createElement("IMG",{src:a});return b.height},getLoadingImageWidth:function(){var a="";if(GrahamTechnology.util.AJAXProperties.loadingImage!==""){a=GrahamTechnology.util.AJAXProperties.loadingImage}else{a=GrahamTechnology.util.constructFullLoadingImageURL(GrahamTechnology.util.AJAXConstants.Glass.GLASS_LOADING_ANIMATION_FILENAME)}var b=GrahamTechnology.DOM.createElement("IMG",{src:a});return b.width},onLoadingTimeout:function(a){if(!GrahamTechnology.Base.isUndefinedOrNull(this.activeImageTimeout)){this.playSound(GrahamTechnology.util.AJAXConstants.AccesibleConstants.LOADING,false);if(!GrahamTechnology.Base.isUndefinedOrNull(this.activeImageTimeout)){this.startLoadingTimeout(GrahamTechnology.util.AJAXConstants.Glass.INVISIBLE_GLASS_TIME_OUT/2)}}},startLoadingTimeout:function(a){this.activeImageTimeout=setTimeout("GrahamTechnology.ui.Form.onLoadingTimeout();",a)},showLoadingImage:function(a){this.startLoadingTimeout(1);this.startTimer();this.hideAllRogueComponents();if(GrahamTechnology.Base.isUndefinedOrNull(a)){if(GrahamTechnology.multiwindow.currentWindowIsPrimary()){GrahamTechnology.multiwindow.showLoadingImage()}else{GrahamTechnology.multiwindow.showLoadingImageParentWindow()}}},clearForm:function(d){var c=new Array();if(GrahamTechnology.Base.isUndefinedOrNull(d)){d=this.getFirstFormID()}var c=this.getRegisteredFormComponentsForForm(d);for(var b in c){var a=c[b];if((a.FormID==d)&&(!GrahamTechnology.Base.isUndefinedOrNull(a.clearField))){a.clearField()}}},mainFormVisible:true,isMainFormVisible:function(){return this.mainFormVisible},setMainFormVisiblity:function(c){if(GrahamTechnology.util.AJAXProperties.accessibilityOn){var a=GrahamTechnology.DOM.getFirstElementByTagAndClass(null,"form",null);var b=GrahamTechnology.DOM.getFirstElementByTagAndClass(a,"div",null);if(c){a.setAttribute("aria-hidden","false");a.setAttribute("aria-disabled","false");GrahamTechnology.DOM.Element.show(b);this.getComponentResizeEvent().fire();this.getMainFormVisibilityEvent().fire()}else{a.setAttribute("aria-hidden","true");a.setAttribute("aria-disabled","true");GrahamTechnology.DOM.Element.hide(b)}this.mainFormVisible=c}},mainFormVisibilityEvent:null,getMainFormVisibilityEvent:function(){if(this.mainFormVisibilityEvent==null){this.mainFormVisibilityEvent=new YAHOO.util.CustomEvent("Main Form Visibility")}return this.mainFormVisibilityEvent},componentResizeEvent:null,getComponentResizeEvent:function(){if(this.componentResizeEvent==null){this.componentResizeEvent=new YAHOO.util.CustomEvent("Component Resize")}return this.componentResizeEvent},fireComponentResize:function(c,a,b){this.getComponentResizeEvent().fire({formId:c,objectId:a,componentId:b})},sendUnsentComponentValues:function(){if(!GrahamTechnology.util.AJAXProperties.ajaxOn){return}var b=getComponentWithFocus();if(b){var a=GrahamTechnology.ui.Form.getRegisteredComponent(b);if(a){GrahamTechnology.ui.Form.sendFocusEvent(a);GrahamTechnology.ui.Form.sendValueChangedEvent(a)}}},sendFocusEvent:function(b){var a=b.gainFocusEventEnabled;if(a!=null&&!a){clientAPI.postEvent(b.id,GrahamTechnology.grasp.EvtType.EVENT_GAIN_FOCUS)}},sendValueChangedEvent:function(a){a.performBlur()},setContextMenuHandler:function(a){if(a=="ENABLED"){document.oncontextmenu=null}else{if(a=="DISABLED"){document.oncontextmenu=function(){return false}}else{document.oncontextmenu=function(){var c=GrahamTechnology.ui.Form.getRegisteredComponents(GrahamTechnology.grasp.ComponentType.Timer);for(var b in c){return false}return true}}}},addSessionResumeListeners:function(){$(document).bind("click mousemove scroll keypress tap touchstart",function(){GrahamTechnology.action.refresh(true)})},showElseHideComponentsWithHideUnderPopup:function(e,d){var c=-1;for(var f in this.Form){if(this.hasRegisteredFormComponents(f)){if(f==e){break}c=f}}if(c>=0){for(var b in this.Form[c].components){if(b!=null&&b!="id"){var a=this.Form[c].components[b];if(a.hideUnderPopup){if(d==true){a.show(true)}else{a.hide(true)}}}}}}};