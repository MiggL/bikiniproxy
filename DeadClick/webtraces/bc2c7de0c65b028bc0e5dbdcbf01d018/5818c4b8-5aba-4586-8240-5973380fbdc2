!function(e,t){"use strict";function i(e,t){this.timestamp=e,this.requestId=t}function n(e,t,n,r,o){i.call(this,e,t),this.type=ue,this.displayType=n,this.userId=r,this.productId=o}function r(e,t,n,r,o){if(!o)throw new Error('Product No Content event must define an "productId" parameter to be recorded.');i.call(this,e,t),this.type=he,this.displayType=n,this.userId=r,this.productId=o}function o(e,t,n){if(!n)throw new Error('Page Viewable Impression event must define an "elapsedTime" parameter to be recorded.');i.call(this,e,t),this.type="pvi",this.elapsedTime=n}function a(e,t,n,r){if(!n)throw new Error('Item Click event must define an "itemId" parameter to be recorded.');i.call(this,e,t),this.type=fe,this.itemId=n,this.position=r}function s(e,t,n,r,o){if(!r)throw new Error('Item Hover event must define an "itemId" parameter to be recorded.');if(!n)throw new Error('Item Hover event must define an "elapsedTime" parameter to be recorded.');i.call(this,e,t),this.type=me,this.elapsedTime=n,this.itemId=r,this.position=o}function c(e,t,n,r,o){if(!r)throw new Error('Item Viewable Impression event must define an "itemId" parameter to be recorded.');if(!n)throw new Error('Item Viewable Impression event must define an "elapsedTime" parameter to be recorded.');i.call(this,e,t),this.type="ivi",this.elapsedTime=n,this.itemId=r,this.position=o}function d(e,t,n,r,o,a){if(!n)throw new Error('Product Click event must define an "itemId" parameter to be recorded.');if(!r)throw new Error('Product Click event must define an "productId" parameter to be recorded.');i.call(this,e,t),this.type=ye,this.itemId=n,this.productId=r,this.productStyleId=o,this.position=a}function l(e,t,n,r,o,a,s){if(!r)throw new Error('Product Hover event must define an "itemId" parameter to be recorded.');if(!n)throw new Error('Product Hover event must define an "elapsedTime" parameter to be recorded.');if(!o)throw new Error('Product Hover event must define an "productId" parameter to be recorded.');i.call(this,e,t),this.type="prh",this.elapsedTime=n,this.itemId=r,this.productId=o,this.productStyleId=a,this.position=s}function p(e,t,n,r,o,a,s){if(!r)throw new Error('Product Viewable Impression event must define an "itemId" parameter to be recorded.');if(!n)throw new Error('Product Viewable Impression event must define an "elapsedTime" parameter to be recorded.');if(!o)throw new Error('Product Viewable Impression event must define an "productId" parameter to be recorded.');i.call(this,e,t),this.type="prvi",this.elapsedTime=n,this.itemId=r,this.productId=o,this.productStyleId=a,this.position=s}function u(){e.visibilityState?(this.visibilityChangeEvent="visibilitychange",this.hidden="hidden"):e.webkitVisibilityState?(this.visibilityChangeEvent="webkitvisibilitychange",this.hidden="webkitHidden"):e.mozVisibilityState?(this.visibilityChangeEvent="mozvisibilitychange",this.hidden="mozHidden"):e.msVisibilityState&&(this.visibilityChangeEvent="msvisibilitychange",this.hidden="msHidden")}function h(e,t,i,n){this.item=e,this.itemId=t,this.timestamp=i,this.key=n}function m(){this.containerViewableStartTimes={}}function f(){this.containerHoverStartTimes={}}function y(){}function v(){this.isFanreelContainerVisible=!1}var w,I,b,g,T,C,E,x,k,V,j,S,H,q,P,_,R,U,F,O,z,A,L,M,Q,K,D,W,B,G,N,J,X=[],Y=[],Z=0,$=!0,ee=0,te=new y,ie=new f,ne=new m,re=new u,oe=new y,ae=new f,se=new m,ce="https://",de="api.curalate.com",le="v1",pe="v1:",ue="pi",he="pinc",me="ih",fe="ic",ye="prc",ve="crl8.fpcuid",we="pdp.",Ie={},be="rid=",ge="iid=",Te="prid=",Ce="dt=",Ee="data-curalate-view-tracking",xe="data-curalate-display-type",ke="data-curalate-item-click",Ve="data-curalate-item-id",je="data-curalate-item-position",Se="data-curalate-product-click",He="data-curalate-product-id",qe="data-curalate-product-style-id",Pe="data-curalate-product-position",_e=1e3,Re=15,Ue=1050,Fe=1e3,Oe=30,ze=1e3,Ae=1e4,Le=500,Me=31536e6,Qe="*[data-curalate-item-container]",Ke="*["+ke+"]",De="*[data-curalate-product-container]",We="*["+Se+"]";Ie[ue]="reel.impression",Ie[me]="item.hover",Ie[fe]="item.click",Ie[ye]="item.shop",S=function(t){for(var i=t+"=",n=e.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(i))return o.substring(i.length,o.length)}return""},j=function(t){var i=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"===e?t:3&t|8;return i.toString(16)})},n=S(t),r=n?n:i(),o=new Date;o.setTime(o.getTime()+Me);var a,s=o.toGMTString(),c=e.domain.split(".");a=-1!==["co","com"].indexOf(c[c.length-2])?"."+c.slice(-3).join("."):"."+c.slice(-2).join(".");var d=t+"="+r+";expires="+s+";domain="+a+";path=/";return e.cookie=d,r},k=j(ve),O=e.referrer,P=function(e){var t,i=S("crl8.exprmt.reel."+e).split("-");return t=2===i.length?{eid:i[0],vid:i[1]}:""},I=function(e){var t,i,n=1,r=7,o=e,a=o.split(".");return a.length<2?!1:(t=parseInt(a[0],10),i=parseInt(a[1],10),t>n||t==n&&i>=r)},w=function(){return(new Date).getTime()},b=function(e,i,n){var r;return function(){function o(){n||e.apply(a,s),r=null}var a=this,s=arguments;r?t.clearTimeout(r):n&&e.apply(a,s),r=t.setTimeout(o,i||100)}},g=function(e){X.push(e),X.length>=Re&&L()},V=function(e){var t,i=w();ee&&(t=i-ee,t>=ze&&g(new o(i,z,t)),e&&(ee=i)),ie.flushEvents(e),ne.flushEvents(e),ae.flushEvents(e),se.flushEvents(e)},L=function(e){var i,n=ce+de+"/"+le+"/reels/"+F+"/events.jsonp?";0!==X.length&&(i=X[0].requestId,n+="rid="+i,n+="&fpcuid="+k,n+="&ref="+encodeURIComponent(A(O)),H=P(q),H&&(n+="&eid="+H.eid,n+="&vid="+H.vid),J.each(X,function(e,t){n+="&e="+encodeURIComponent(t.serialize(i)),M(t)}),J.ajax({url:n,dataType:"jsonp",timeout:2e3}).complete(function(i){t.console&&i&&i.errors&&J.each(i.errors,function(e,i){t.console.error("Error at position: "+i.position+": "+i.errorMessage)}),e&&e()}),X=[])},E=function(e){var t,e=J(e);return(t=e.attr(Ee))?t:(Z++,e.attr(Ee,Z),Z)},M=function(e){if(t.Curalate&&t.Curalate.cfgTraffic){var i,n,r=t.Curalate.cfgTraffic;Y.length&&(J.each(Y,function(e,t){n=t.displayType?encodeURIComponent(t.displayType):"",i=encodeURIComponent(t.requestId),W(t,r,i,n)}),Y=[]),Ie[e.type]&&(n=e.displayType?encodeURIComponent(e.displayType):"",i=encodeURIComponent(e.requestId),B(e,r,i,n),W(e,r,i,n))}else Ie[e.type]&&Y.push(e)},Q=function(e,t,i,n){var r=[];return e&&r.push(be+e),t&&r.push(ge+t),i&&r.push(Te+i),n&&r.push(Ce+n),pe+r.join("&")},W=function(e,t,i,n){var r,o,a,s,c,d,l=e.type,p="curalate.fanreel."+F,u=e.elapsedTime;(t.ga||t._gaq)&&(l===ue?a=Q(i,"","",n):(r=e.itemId?encodeURIComponent(e.itemId):"",o=e.productId?encodeURIComponent(e.productId):"",s=Q("",r,"",n),(l===fe||l===ye)&&(c=Q("",r,"",n)),l===ye&&(d=Q("",r,o,n))),d&&D(t,p,Ie[ye],d,u,!1),c&&D(t,p,Ie[fe],c,u,!1),s&&D(t,p,Ie[me],s,u,!1),a&&D(t,p,Ie[ue],a,u,!0))},D=function(e,i,n,r,o,a){try{e._gaq?e._gaq.push(["_trackEvent",i,n,r,o]):e.ga&&e.ga("send","event",i,n,r,o,{nonInteraction:a})}catch(s){t.console&&t.console.log&&console.log("Unable to send GA traffic event: "+s.message)}},K=function(e,t,i,n){var r,o,a,s;a="https://www.facebook.com/tr?id="+e+"&ev="+t,a+="&cd[reel_id]="+F,a+="&cd[curalate_channel]=fanreel",n&&(a+="&cd[curalate_display_type]="+n),i&&(s=J.map(i.content_ids,function(e){return encodeURIComponent('"'+e+'"')}).join(),a+="&cd[content_type]="+encodeURIComponent(i.content_type),a+="&cd[content_ids]=["+s+"]",a+="&cd[currency]="+encodeURIComponent(i.currency),a+="&cd[value]="+encodeURIComponent(i.value)),r=J("body"),o=J('<img width="1" height="1" style="display:none" src="'+a+'"/>'),r.append(o)},B=function(e,t,i,n){!G&&t.omni&&T&&T.c&&e.type!==ue&&(G=Q(i,"","",n),t.omni.send(T,G))},x=function(i){var n=i.getBoundingClientRect(),r=n.bottom-n.top,o=n.right-n.left,a=r*o,s={height:t.innerHeight||e.documentElement.clientHeight||e.body.clientHeight,width:t.innerWidth||e.documentElement.clientWidth||e.body.clientWidth},c={height:0,width:0};return 0===r||0===o||"none"===i.style.display||"hidden"===i.style.visibility?!1:n.top>s.height?!1:n.bottom<0?!1:(c.height=n.top>0?r-Math.max(n.bottom-s.height,0):r+n.top,n.left>s.width?!1:n.right<0?!1:(c.width=n.left>0?o-Math.max(n.right-s.width,0):o+n.left,c.width*c.height>=a/2||c.width*c.height/(s.width*s.height)>=.5))},A=function(e){return e.replace?e.replace(/\|/g,""):e},i.prototype.serialize=function(e){var t;if(!this.timestamp)throw new Error("Tracking event must define a 'timestamp' field in order to be recorded.");if(!this.requestId)throw new Error("Tracking event must define a 'requestId' field in order to be recorded.");if(!this.type)throw new Error("Tracking event must define a 'type' field in order to be recorded.");return t="t:"+A(this.type)+"|ts:"+A(this.timestamp),this.requestId!=e&&(t+="|rid:"+A(this.requestId)),this.elapsedTime&&(t+="|et:"+A(this.elapsedTime)),this.itemId&&(t+="|iid:"+A(this.itemId)),this.productId&&(t+="|pid:"+A(this.productId)),this.productStyleId&&(t+="|psid:"+A(this.productStyleId)),this.position&&(t+="|pos:"+A(this.position)),this.userId&&(t+="|uid:"+A(this.userId)),this.displayType&&(t+="|dt:"+A(this.displayType)),t},n.prototype=Object.create(i.prototype),r.prototype=Object.create(i.prototype),o.prototype=Object.create(i.prototype),a.prototype=Object.create(i.prototype),s.prototype=Object.create(i.prototype),c.prototype=Object.create(i.prototype),d.prototype=Object.create(i.prototype),l.prototype=Object.create(i.prototype),p.prototype=Object.create(i.prototype),u.prototype.init=function(t){var i=this;e.addEventListener(this.visibilityChangeEvent,function(){t(!e[i.hidden])},!0)},m.prototype.init=function(e,t){this.selector=e,this.viewableImpressionCallback=t},m.prototype.checkVisibility=function(){var e=this;J(e.selector).each(function(t,i){var n,r,o,a,s=J(i).attr(Ve),c=x(i),d=w();o=E(i),a=e.containerViewableStartTimes[o],n=!a&&c,r=a&&!c,n?e.setItemVisible(new h(i,s,d,o)):r&&e.setItemHidden(new h(i,s,d,o))})},m.prototype.setItemVisible=function(e){this.containerViewableStartTimes[e.key]=e},m.prototype.setItemHidden=function(e){var t=this,i=t.containerViewableStartTimes[e.key].timestamp,n=i?e.timestamp-i:ze;n>=ze&&t.viewableImpressionCallback(e.timestamp,e.itemId,e.item,n),delete t.containerViewableStartTimes[e.key]},m.prototype.flushEvents=function(e){var t=this,i=w();J.each(t.containerViewableStartTimes,function(n,r){var o=new h(r.item,r.itemId,i,r.key);t.setItemHidden(o),e&&(t.containerViewableStartTimes[o.key]=o)})},f.prototype.init=function(e,t){var i=this;i.hoverCompletedCallback=t,i.selector=e,N.on("mouseover mouseout",i.selector,function(e){var t=J(e.currentTarget),n=t.attr(Ve),r=w();switch(e.type){case"mouseover":i.hoverItem(new h(t,n,r));break;case"mouseout":i.unhoverItem(new h(t,n,r))}})},f.prototype.hoverItem=function(e){this.containerHoverStartTimes[e.itemId]=e},f.prototype.unhoverItem=function(e){if(this.containerHoverStartTimes[e.itemId]){var t=this.containerHoverStartTimes[e.itemId].timestamp,i=t?e.timestamp-t:Fe;i>=Fe&&this.hoverCompletedCallback(e.timestamp,e.itemId,e.item,i),delete this.containerHoverStartTimes[e.itemId]}},f.prototype.flushEvents=function(e){var t=this,i=w();J.each(t.containerHoverStartTimes,function(n,r){var o=new h(r.item,r.itemId,i);t.unhoverItem(o),e&&(t.containerHoverStartTimes[o.itemId]=o)})},y.prototype.init=function(i,n){J(e).on("mousedown",i,function(e){var i,r=J(e.currentTarget),o=r.attr(Ve),a=r.is("a"),s="undefined"!=typeof r.attr(Se),c="undefined"!=typeof r.attr(ke),d="_blank"===r.attr("target"),l=w();n(r,o,l),i=r.attr("href"),(s||c)&&V();var p=1===e.which&&!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey);s&&a&&i&&p?(e.preventDefault(),d?(L(),t.open(i,"_blank")):L(function(){t.location.href=i})):(c||s)&&L()})},v.prototype.init=function(i){var n=this;if(!i)throw new Error('Curalate Fanreel Analytics must be initialized with a "config" parameter.');if(!i.fanreelId)throw new Error('Curalate Fanreel Analytics config must be initialized with a "fanreelId" parameter.');if(!i.containerId)throw new Error('Curalate Fanreel Analytics config must be initialized with a "containerId" parameter.');if(!i.requestId)throw new Error('Curalate Fanreel Analytics config must be initialized with a "requestId" parameter.');if(i.jQuery&&I(i.jQuery.fn.jquery))J=i.jQuery,U(n,i);else{var r=e.createElement("script");r.type="text/javascript",r.src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js",r.readyState?r.onreadystatechange=function(){("loaded"===r.readyState||"complete"===r.readyState)&&(r.onreadystatechange=null,J=t.jQuery.noConflict(!0),U(n,i))}:r.onload=function(){J=t.jQuery.noConflict(!0),U(n,i)},e.getElementsByTagName("head")[0].appendChild(r)}},U=function(i,u){var h,m,f,y,v,I,E,k,j,S,H,P,U,O,A,M,Q,D=u.userId,W=null;F=u.fanreelId,z=u.requestId,T=u.eVars,C=u.facebookAnalytics,M=!u.noContent,Q=u.pdpProductId,N=J(e),A=J(u.containerId),h=u.displayType||A.attr(xe),q=Q?we+F:F,v=function(){m||(j(),H(),E(),m=t.setInterval(function(){O(),V(!0),L()},Ae))},I=function(e){m&&(L(),e||S(),k(),t.clearInterval(m),m=null)},E=function(){W||(W=t.setInterval(function(){O()},Le))},k=function(){W&&(t.clearInterval(W),W=null)},M?(x(A[0])&&(i.isFanreelContainerVisible=!0,ee=w()),te.init(Qe+", "+Ke,function(e,t,i){var n=e.attr(Ve),r=e.attr(je);g(new a(i,z,n,r))}),oe.init(We,function(e,t,i){var n=e.attr(Ve),r=e.attr(He),o=e.attr(qe),a=e.attr(Pe);g(new d(i,z,n,r,o,a))}),ie.init(Qe,function(e,t,i,n){var r=i.attr(je);g(new s(e,z,n,t,r))}),ae.init(De,function(e,t,i,n){var r=i.attr(He),o=i.attr(qe),a=i.attr(Pe);g(new l(e,z,n,t,r,o,a))}),ne.init(Qe,function(e,t,i,n){var r=J(i).attr(je);g(new c(e,z,n,t,r))}),se.init(De,function(e,t,i,n){var r=J(i).attr(He),o=J(i).attr(qe),a=J(i).attr(Pe);g(new p(e,z,n,t,r,o,a))}),g(new n(w(),z,h,D,Q)),V(!0),L()):Q&&(g(new r(w(),z,h,D,Q)),V(!0),L()),O=b(function(){var e,n,r,a=i.isFanreelContainerVisible,s=w();i.isFanreelContainerVisible=x(A[0]),e=!a&&i.isFanreelContainerVisible,n=a&&!i.isFanreelContainerVisible,e?(ee=s,C&&C.enableFacebookPixel&&K(C.facebookPixelId,"PageView",null,h),$&&($=!1,t.setTimeout(function(){V(!0),L()},Ue))):n&&(r=ee?s-ee:ze,r>=ze&&g(new o(s,z,r)),ee=0),ne.checkVisibility(),se.checkVisibility()},50,!1),H=function(){J(t).on("load ready resize scroll",function(){O()})},R=function(){_++,_>=Oe&&!y&&(P(!0),y=!0)},j=function(){f||(_=0,y=!1,f=t.setInterval(R,_e),J(t).on("mousemove keypress",function(){y&&U(),_=0,y=!1}))},S=function(){f&&(t.clearInterval(f),J(t).off("mousemove keypress"),f=null)},U=function(){v(),O()},P=function(e){V(),i.isFanreelContainerVisible=!1,I(e)},M&&(re.init(function(e){e?U():P()}),t.addEventListener?(t.addEventListener("focus",U,!0),t.addEventListener("blur",function(e){e.target===t&&P()},!0),t.addEventListener("beforeunload",P)):(e.attachEvent("onfocusin",U),e.attachEvent("onfocusout",function(e){e.target===t&&P()}),e.attachEvent("beforeunload",P)),v())},v.prototype.recordConversion=function(){console.warn("This has been deprecated since 3/21/2017")},t.fanreelAnalytics=new v}(document,window);