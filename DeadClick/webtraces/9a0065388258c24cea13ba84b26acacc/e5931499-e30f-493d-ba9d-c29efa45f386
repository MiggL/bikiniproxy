define(["jquery","wcs.context","pubsub"],function(c,a,b){(function(g,f,d,i){var e="utilityNavCart";var h=function(k,j){this.element=k;this.options=j;this.metadata=g(this.element).data("cart-options")};h.prototype={defaults:{replaceSelector:".topnav-cart-qty",classHasProducts:"has-products"},init:function(){console.log("initilizing cart count");this.config=g.extend({},this.defaults,this.options,this.metadata);var j=this;j.events();return j.update()},events:function(){var j=this;g.pubsub("subscribe","SHOPCART_UPDATED",function(k,l){j.update()})},update:function(){var j=this;return j.updateDisplay(j.getCount())},getCount:function(){var j=Number(a.getShoppingCart().quantity);return(isNaN(j))?0:j},updateDisplay:function(k){var j=this,l=g(j.config.replaceSelector,j.element);l.text(k);l.removeClass("hide");if(k>0){g(j.element).addClass(j.config.classHasProducts)}else{g(j.element).removeClass(j.config.classHasProducts)}j.config.replaced=true;return j}};h.defaults=h.prototype.defaults;g.fn.utilityNavCart=function(j){return this.each(function(){var k=g(this).data(e);if(!k){k=new h(this,j).init();g(this).data(e,k)}})}})(jQuery,window,document)});