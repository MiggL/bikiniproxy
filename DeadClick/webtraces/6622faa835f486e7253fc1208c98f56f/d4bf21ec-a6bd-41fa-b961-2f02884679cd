/* repo: local-health-directories/release-cf-overlay@5.20.0-2232-gd118995 - Package Version: 5.20.0 - 2018-02-12 02:32 pm - User:  */
define("location_validation-lite",["tooltips/1/tooltips","type_ahead"],function(a,b){"use strict";var c,d=(webmd.object(a),webmd.object(b)),e=webmd.url.getHostname(),f="";return e.indexOf("webmd.com")===-1&&(f=e.indexOf("medscape.com")>-1?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://www.webmd.com")),c={usStateList:[{name:"Alabama",abbreviation:"AL",capital:"Montgomery"},{name:"Alaska",abbreviation:"AK",capital:"Juneau"},{name:"Arizona",abbreviation:"AZ",capital:"Phoenix"},{name:"Arkansas",abbreviation:"AR",capital:"Little Rock"},{name:"California",abbreviation:"CA",capital:"Sacramento"},{name:"Colorado",abbreviation:"CO",capital:"Denver"},{name:"Connecticut",abbreviation:"CT",capital:"Hartford"},{name:"Delaware",abbreviation:"DE",capital:"Dover"},{name:"District Of Columbia",abbreviation:"DC",capital:"Washington"},{name:"Florida",abbreviation:"FL",capital:"Tallahassee"},{name:"Georgia",abbreviation:"GA",capital:"Atlanta"},{name:"Hawaii",abbreviation:"HI",capital:"Honolulu"},{name:"Idaho",abbreviation:"ID",capital:"Boise"},{name:"Illinois",abbreviation:"IL",capital:"Springfield"},{name:"Indiana",abbreviation:"IN",capital:"Indianapolis"},{name:"Iowa",abbreviation:"IA",capital:"Des Moines"},{name:"Kansas",abbreviation:"KS",capital:"Topeka"},{name:"Kentucky",abbreviation:"KY",capital:"Frankfort"},{name:"Louisiana",abbreviation:"LA",capital:"Baton Rouge"},{name:"Maine",abbreviation:"ME",capital:"Augusta"},{name:"Maryland",abbreviation:"MD",capital:"Annapolis"},{name:"Massachusetts",abbreviation:"MA",capital:"Boston"},{name:"Michigan",abbreviation:"MI",capital:"Lansing"},{name:"Minnesota",abbreviation:"MN",capital:"Saint Paul"},{name:"Mississippi",abbreviation:"MS",capital:"Jackson"},{name:"Missouri",abbreviation:"MO",capital:"Jefferson City"},{name:"Montana",abbreviation:"MT",capital:"Helena"},{name:"Nebraska",abbreviation:"NE",capital:"Lincoln"},{name:"Nevada",abbreviation:"NV",capital:"Carson City"},{name:"New Hampshire",abbreviation:"NH",capital:"Concord"},{name:"New Jersey",abbreviation:"NJ",capital:"Trenton"},{name:"New Mexico",abbreviation:"NM",capital:"Santa Fe"},{name:"New York",abbreviation:"NY",capital:"Albany"},{name:"North Carolina",abbreviation:"NC",capital:"Raleigh"},{name:"North Dakota",abbreviation:"ND",capital:"Bismarck"},{name:"Ohio",abbreviation:"OH",capital:"Columbus"},{name:"Oklahoma",abbreviation:"OK",capital:"Oklahoma City"},{name:"Oregon",abbreviation:"OR",capital:"Salem"},{name:"Pennsylvania",abbreviation:"PA",capital:"Harrisburg"},{name:"Puerto Rico",abbreviation:"PR",capital:"San Juan"},{name:"Rhode Island",abbreviation:"RI",capital:"Providence"},{name:"South Carolina",abbreviation:"SC",capital:"Columbia"},{name:"South Dakota",abbreviation:"SD",capital:"Pierre"},{name:"Tennessee",abbreviation:"TN",capital:"Nashville"},{name:"Texas",abbreviation:"TX",capital:"Austin"},{name:"Utah",abbreviation:"UT",capital:"Salt Lake City"},{name:"Vermont",abbreviation:"VT",capital:"Montpelier"},{name:"Virginia",abbreviation:"VA",capital:"Richmond"},{name:"Washington",abbreviation:"WA",capital:"Olympia"},{name:"West Virginia",abbreviation:"WV",capital:"Charleston"},{name:"Wisconsin",abbreviation:"WI",capital:"Madison"},{name:"Wyoming",abbreviation:"WY",capital:"Cheyenne"}],loc:{city:"",state:"",zip:"",lat:"",lon:""},options:{form:null,metric:"uk",vertical:!1},defaultLocation:{city:"New York",state:"NY",zip:"",lat:"",lon:""},init:function(a){webmd.debug("=|=|= Location: Initialize",a);var b=this;b.settings=$.extend(b.options,a,!0),b.settings.field=b.settings.field||$("#loc"),b.settings.page=b.settings.page||b.settings.field.closest("form"),"text"===b.settings.field.attr("type")&&(b.typeaheadcs=webmd.object(d),b.typeaheadcs.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,name:"locationcs-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:27,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.typeahead=webmd.object(d),b.typeahead.init({baseurl:webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,name:"location-"+b.settings.field.attr("id"),selector:"#"+b.settings.field.attr("id"),numvalid:!0,params:{s:24,sz:10,metadata:"zip,city,state,county,lat,lon"},select:function(a){b.follow(a)}}),b.settings.field.on("results-returned",function(a,c,d,e){var f,g=0;c.indexOf("locationcs")<0&&(g=1),b.ta||(b.ta=[]),b.ta[g]=e,"undefined"!=typeof b.ta[0]&&"undefined"!=typeof b.ta[1]&&(f=b.ta[0].length>0?b.ta[0]:b.ta[1],b.render(d,f,$(this)))}),b.settings.field.on("clear-type-ahead",function(a){"undefined"!=typeof b.settings.customAnimation?b.settings.customAnimation("close",b.settings.field.siblings(".typeahead.location")):$("#locationtypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})}))},error:function(a,b){webmd.debug("=|=|= Location: Public Error",a,b),this._error(a,b)},find:function(a){webmd.debug("=|=|= Location: Geo Locate",a);var b,c=this;"undefined"!=typeof pd_loc&&"internal"!==pd_loc.zip&&""!==pd_loc.zip?c.update(pd_loc):navigator.geolocation?(navigator.geolocation.getCurrentPosition(function(b){webmd.debug("=|=|= Location: User Located: ",b),c._fetchLocation(b.coords.latitude,b.coords.longitude,a)},function(b){webmd.debug("=|=|= Location: ERROR: User doesn't want to share.",b),a&&a.error&&a.error("ERROR: User doesn't want to share.")}),$("html").hasClass("browserFF")&&(b=setTimeout(function(){!c.loc.zip&&a&&a.error&&a.error("ERROR: User doesn't want to share or didn't see the prompt.")},2e3))):(webmd.debug("=|=|= Location: ERROR: Browser does not support geolocation."),a&&a.error&&a.error("ERROR: Browser does not support geolocation."))},follow:function(a,b){webmd.debug("=|=|= Location: Follow Type-Ahead",a);var c=this,d=a.data("location").split(","),e={city:d[0],state:d[1],zip:d[2],lat:d[3],lon:d[4],s:null};c.t&&clearTimeout(c.t),b&&b.preventDefault(),c.settings.field.trigger("clear-type-ahead"),c._update(e)},render:function(a,b,c){webmd.debug("=|=|= Location: Render Type-Ahead",a,b,c);var d,e=this,f=c.outerWidth()-2,g=$('<div id="locationtypeahead" class="typeahead location location-'+e.settings.field.attr("id")+" locationcs-"+e.settings.field.attr("id")+'" />'),h=$('<ul id="loc_list" data-metrics-module="'+e.settings.metric+'-lo-ta" />'),i='<li><a href="javascript://" data-location="{city},{state},{zip},{lat},{lon}" data-metrics-link="{i}">{loc}</a></li>',j=function(a,b){var c,d=function(a,b,c){var d,e,f;return f=b.toLowerCase().indexOf(c.toLowerCase()),d=a.toLowerCase().indexOf(c.toLowerCase()),a.indexOf("<strong>")>-1&&"<strong>".indexOf(c.toLowerCase())>-1&&(d=a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-2].length+9*(a.toLowerCase().split("</strong>").length-1)+a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-1].indexOf(c.toLowerCase())),e=d+c.length,(0===f||1===f)&&b.toString().indexOf("<strong>")<0?a.substring(0,d)+"<strong>"+a.substring(d,e)+"</strong>"+a.substring(e):a};return $(a.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){c=this,$(b.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString())),this.indexOf("'/")>-1&&$(this.toString().replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString()))})})}),a};e.ta=[],$(b).each(function(b,c){c.zip||(isNaN(c.id)?c.zip="":c.zip=c.id),c.i=b+1,c.loc=j(String(c.city+", "+c.state+" "+c.zip),a),d=webmd.substitute(i,c),h.append(d)}),c.siblings(".typeahead.location").length>0?c.siblings(".typeahead.location").find("ul").html(h.html()):(g.append(h),g.css({display:"none",width:f+"px"}),e.settings.vertical?(g.addClass("vertical"),g.css({bottom:Number(c.closest("form").outerHeight()-c.position().top)+"px",left:c.position().left+"px"})):g.css({top:Number(c.position().top+c.outerHeight())+"px",left:c.position().left+"px"}),c.after(g)),c.siblings(".typeahead.location:hidden").length>0&&c.siblings(".typeahead.location").find("li").length>0?("undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("open",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").slideDown("fast"),c.trigger("render-type-ahead")):c.siblings(".typeahead.location").find("li").length>0&&"undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("open",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").find("li").length<1&&(webmd.debug("Trigger"),c.trigger("clear-type-ahead")),c.siblings(".typeahead.location").find("a").off().on("click",function(a){"undefined"!=typeof e.settings.customAnimation?e.settings.customAnimation("close",c.siblings(".typeahead.location")):c.siblings(".typeahead.location").slideUp("fast"),e.follow($(this),a)})},reset:function(){this.loc={city:"",state:"",zip:"",lat:"",lon:"",s:null},$(this.settings.field).trigger("location-reset")},update:function(a){webmd.debug("=|=|= Location: Public Update"),this._update(a)},validateField:function(a,b,c){webmd.debug("=|=|= Location: Validate Field",a,b,c);var d,e,f,g,h=this,i="",j="",k="",l="The location you tried did not return a result. Please enter a valid 5-digit ZIP Code.",m="Please enter a valid 5-digit ZIP Code.",n=a,o="";if(n.attr("placeholder")!==n.val()&&(o=$.trim(n.val().replace(/,/g," "))),!(o.length&&o.length>1&&"text"===n.attr("type")))return"state"===n.attr("id")?(j=n.val(),i=h._getStateCapital(j),h._verify({loc:{city:i,state:j},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}}),!0):(h._error(n,m),h.submitting=!1,!1);if(!isNaN(parseFloat(o))&&isFinite(o)&&(k=o),!k){for(d=o.split(" "),e=0;e<d.length;e++)""===d[e]&&d.splice(e,1);for(e=d.length-1;e>0;e--)f=h._getStateAbbreviation($.trim(d[e])),""!==f?(d.splice(e,1),j=f):isNaN(d[e])||(k=d[e],d.splice(e,1));if(j||(g=$.trim(d[d.length-2]+" "+d[d.length-1]),f=h._getStateAbbreviation(g),""!==f&&(j=f,d.splice(d.length-2,2))),i=d.join(" ").toLowerCase(),!j||!i)return h._error(n,l),h.submitting=!1,!1}if("undefined"!=typeof k&&k!==h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()!==h.loc.state.toLowerCase()||"undefined"!=typeof i&&i.toLowerCase()!==h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase())webmd.debug("=|=|= Location: VERIFY"),h._verify({loc:{city:i,state:j,zip:k},success:function(){h.submitting=!1},error:function(a){return b||(h._error(n,l),n.focus()),h.submitting=!1,!1}});else if(!c&&h.settings.revert&&("undefined"!=typeof k&&k===h.loc.zip||"undefined"!=typeof i&&i.toLowerCase()===h.loc.city.toLowerCase()&&"undefined"!=typeof j&&j.toLowerCase()===h.loc.state.toLowerCase()))webmd.debug("=|=|= Location: SAME LOCATION"),h.settings.revert();else{if(!c||!h.settings.revert)return!0;h.settings.revert()}},_error:function(a,b){webmd.debug("=|=|= Location: Error Tooltip",a,b),a.data("wtip")?($(".perr .wtip-content").html(b),a.webmdTooltip("show")):a.on("keyup blur",function(a){$(this).val().length>0&&13!==a.keyCode&&$(this).trigger("hidetooltip")}).webmdTooltip({classType:"perr",content:{text:b||null},show:{when:{event:""},ready:!0},hide:{when:{event:"hidetooltip"}}})},_fetchLocation:function(a,b,c){webmd.debug("=|=|= Location: Get Location Info",a,b,c);var d,e,f,g=this;$.ajax({url:"https://api.tiles.mapbox.com/v3/webmd.map-c3xkh4lq/geocode/"+b+","+a+".jsonp",dataType:"jsonp",jsonpCallback:"grid",success:function(c){webmd.debug("=|=|= Location: User Located, refined: ",c),c=c.results[0],"United States of America"===c[c.length-1].name||"United States"===c[c.length-1].name?(webmd.debug("=|=|= Location: Get Location Info: UPDATE",c),$.each(c,function(a,b){switch(b.type){case"city":d=b.name;break;case"province":e=b.name;break;case"zipcode":f=b.name}}),g._update({city:d,state:g._getStateAbbreviation(e),zip:f,lat:a,lon:b})):webmd.debug("=|=|= Location: ERROR: User Located, outside of USA: ",c)},error:function(a,b,d){webmd.debug("=|=|= Location: ERROR: AJAX: ",a,b,d),c&&c.error&&c.error("ERROR: AJAX: "+a+" | "+b+" | "+d)}})},_getStateAbbreviation:function(a){webmd.debug("=|=|= Location: Get State Abbreviation",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].abbreviation:""},_getStateCapital:function(a){webmd.debug("=|=|= Location: Get State Capital",a);var b=2===a.length?"abbreviation":"name",c=$.grep(this.usStateList,function(c){return c[b].toLowerCase()===a.toLowerCase()});return 1===c.length?c[0].capital:""},_update:function(a){webmd.debug("=|=|= Location: Update/Set Location",a);var b=this;"object"==typeof a&&(this.loc=webmd.object(this.loc,a),b.submitting=!1,!this.loc.zip||this.loc.city&&this.loc.state?this.loc.s?(b.returned=!1,b.settings.field.trigger("hidetooltip").trigger("location-update",a),b.settings.field.closest("form").trigger("location-update",a),$('.lhd-finder form input[name="loc"]').trigger("hidetooltip").trigger("location-update",a),$(".lhd-finder form").trigger("location-update",a)):this._verify():this._verify({loc:{zip:this.loc.zip}}))},_verify:function(a){webmd.debug("=|=|= Location: Verify Location Info",a);var b=this,c=webmd.url.getHostname().indexOf("doctor.")>-1?webmd.url.addLifecycleAndEnv("//doctor.webmd.com"):f,d=c+"/api/directories/Service.svc/geolocation?city={city}&state={state}&zip={zip}";a||(a={}),!a.loc&&b.loc?a.loc=b.loc:a.loc||(a.loc=b.defaultLocation),webmd.object.exists("loc.city",a)&&"winston salem"===a.loc.city.toLowerCase()&&(a.loc.city="Winston-Salem"),$.ajax({url:webmd.substitute(d,{city:a.loc.city||"",state:a.loc.state||"",zip:a.loc.zip||""}),dataType:"json",success:function(c){c=c.data,c&&c.City&&c.State?(webmd.debug("=|=|= Location: Verify Location Info: UPDATE",c),c.City===b.loc.city&&c.State===b.loc.state&&c.Zip===b.loc.zip&&b.loc.s?$(b.settings.form[0]).trigger("location-update",a):b._update({city:c.City||"",state:c.State||"",zip:c.Zip||"",lat:c.Latitude||"",lon:c.Longitude||"",s:c.DMAId||"none"}),a.success&&a.success(c)):a.error?a.error(c):b.settings?(webmd.debug("=|=|= Location: Verify Location Info: AJAX",b.settings),b.validateField(b.settings.field)):webmd.debug("=|=|= Location: Verify Location Info: ERROR",c)},error:function(b,c,d){webmd.debug("=|=|= Location: Geocode API call failed: ",c,d,b),a&&a.error&&a.error({jqXHR:b,textStatus:c,errorThrown:d})}})}},webmd.object(c)}),define("type_ahead",function(){"use strict";var a;return a={results:[],init:function(a){webmd.debug("=+=+= Type-Ahead: Initialize",a);var b,c,d,e=this,f={name:"default",num:3,numvalid:!1,parsequery:function(a){return{q:a}},selector:".type-ahead",trigger:"keyup focus focusin",url:"/api/qrl/LookupService.ashx",dataType:"json",params:{sz:5,q:"",metadata:""}};e.settings=$.extend(f,a,!0),e.$el=$(e.settings.selector),e.results[e.settings.name]=[],$(e.settings.selector).on(e.settings.trigger+" type-ahead",function(a){$(this).val().length<1?($(this).attr("autocomplete","off"),$(this).trigger("clear-type-ahead")):"undefined"!=typeof e.query&&$(this).val().toLowerCase().length>0&&$(this).val().toLowerCase()===e.query.toLowerCase()?e.$el.trigger("results-returned",[e.settings.name,e.query,e.results[e.settings.name][e.query]]):!webmd.object.exists("settings.params.s",e)||e.query&&$(this).val().toLowerCase()===e.query.toLowerCase()?$(this).val().toLowerCase()===e.query.toLowerCase()&&$(this).siblings(".typeahead."+e.settings.name+":hidden").length>0&&e.results[e.settings.name][e.query.toLowerCase()].length>0&&($(this).siblings(".typeahead."+e.settings.name+":hidden").slideDown("fast"),$(this).siblings(".typeahead."+e.settings.name+":hidden").closest("form").find("select").css("visibility","hidden")):(e.t&&clearTimeout(e.t),$(this).val().replace(/[^a-zA-Z0-9]/g," ").length>=e.settings.num||e.settings.numvalid&&!isNaN($(this).val())&&$(this).val().length>=1?(b=e.settings.parsequery($(this).val()),e.t=setTimeout(function(){e.get(b)},500)):$(this).trigger("clear-type-ahead"))}),$(e.settings.selector).on("blur",function(){c=this,e.stay||(d=setTimeout(function(){$(c).trigger("clear-type-ahead")},500))}),$(e.settings.selector).data("key")||$(e.settings.selector).on("keydown",function(a){if(40===a.which)e.stay=!0,e.move(1);else if(38===a.which)e.stay=!0,e.move(-1);else if(27===a.which)$(this).trigger("clear-type-ahead");else if((13===a.which||32===a.which)&&$(this).siblings(".typeahead."+e.settings.name).find("a.highlight").length>0)return a.preventDefault(),e.settings.select&&e.settings.select($(this).siblings(".typeahead."+e.settings.name).find("a.highlight"),a),e.settings.special&&e.settings.special(a),!1}).attr("data-key","true")},fetch:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Fetch",a,this.settings);var b=this;return b.index=-1,b.request&&b.request.abort(),b.query=webmd.url.getParam("q",a),b.results[b.settings.name][b.query]?(b.render(b.results[b.settings.name][b.query]),!1):void(b.request=$.ajax({url:a,dataType:b.settings.dataType,success:function(a){a=b.parse(a),b.results[b.settings.name][b.query]||(b.results[b.settings.name][b.query]=a),b.render(a)},error:function(a,c,d){webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": API call failed: ",b.query,c,d,a),b.results[b.settings.name][b.query]=[],b.render([])}}))},get:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Get",a,this.settings);var b=this,c=$.extend(b.settings.params,a,!0),d=b.settings.baseurl+b.settings.url;b.settings.parseparams&&(c=b.settings.parseparams(c)),c.s?($.each(c,function(a,b){d=webmd.url.setParam(a,b,d)}),b.fetch(d)):(webmd.debug("=+=+= Type-Ahead "+(b.settings.name||"uk")+": ERROR: No source",c),b.$el.trigger("results-returned",[b.settings.name,b.query,[]]))},move:function(a){webmd.debug("=+=+= Type-Ahead: Move Selection",a,this.index);var b=this;"undefined"==typeof b.index&&(b.index=-1),b.index=b.index+a,b.index>=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length?b.index=0:b.index<0&&(b.index=$(".typeahead."+b.settings.name+" li:not(.hidden) a").length-1),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("a").removeClass("highlight"),$(b.settings.selector).siblings(".typeahead."+b.settings.name).find("li:not(.hidden) a:eq("+b.index+")").addClass("highlight")},parse:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Parse",a);var b=this,c=a.types.length>0?a.types[0].references:[];return b.settings.parseresult&&(c=b.settings.parseresult(c)),c},render:function(a){webmd.debug("=+=+= Type-Ahead "+(this.settings.name||"uk")+": Render",a);var b=this;b.$el.trigger("results-returned",[b.settings.name,b.query,a])}},webmd.object(a)}),webmd.debug("2-23-2017 3:00 PM - sprint-41"),$(function(){"use strict";var a=["location_validation-lite","type_ahead","pdmodules/1/sponsorship","//api.mapbox.com/mapbox.js/v2.3.0/mapbox.js","css!//api.mapbox.com/mapbox.js/v2.3.0/mapbox.css"];$("html").hasClass("ua_type_mobile")||a.push("tooltips/1/tooltips"),require(a,function(a,b,c){var d=webmd.object({},{cookieId:"pdInfo",load:!0,metric:"pd",mobile:$("html").hasClass("ua_type_mobile"),tablet:$("html").hasClass("thin"),iphone:$("html").hasClass("ua_device_iphone"),init:function(){webmd.debug("=/=/= PhysicianDirectory: Initialize");var b,c,d=this,e=2;d.cacheElems(),d.mobile?"seo"===d.dom.section&&$(".seo-lists > .alpha-wheel").length>0&&$(".seo-lists > div:not(.alpha-wheel) ul li.alpha-a:last").css("border","0"):$("#s4 .pane").each(function(){$(this).outerHeight()>10?$(this).css({background:"#fff",border:"1px solid #ededed",margin:"0 0 16px"}):$(this).css({background:"none",border:"0",margin:"0"})}),d.mobile&&"ratings"===d.dom.cur||(webmd.debug("-----> LHD: DISABLE FORM <-----"),d.dom.page.find("form input").attr("disabled","disabled")),d.dom.medscape||d.dom.syn||(webmd.ads.refresh.defaults.params=$.extend(webmd.ads.refresh.defaults.params,d.ads()),webmd.ads.refresh(webmd.ads.refresh.defaults.params)),d.bindings(),"seo"===d.dom.section&&"results"===d.dom.pagetype&&"insurance"!==this.dom.seosection?("doctor"===d.dom.seosection&&(e+=2),webmd.url.clear().split(".com/")[1].split("/")[e]&&a.update({city:webmd.url.clear().split(".com/")[1].split("/")[e].replace(/-/g," "),state:a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[e-1].replace(/-/g," "))})):"seo"===d.dom.section&&"results"===d.dom.pagetype&&(d.dom.syn&&(e+=1),webmd.url.clear().split(".com/")[1].split("/")[e]&&a.update({city:a._getStateCapital(webmd.url.clear().split(".com/")[1].split("/")[e].replace(/-/g," ")),state:a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[e].replace(/-/g," "))})),""===a.loc.city&&(d.dom.cookie&&d.dom.cookie.geo?d.checkCookie():"results"===d.dom.pagetype&&(d.dom.query.city||d.dom.query.zip)?d.getQueryString():("undefined"==typeof pd_loc||"internal"===pd_loc.zip)&&"profile"===d.dom.pagetype?a.update({zip:d.dom.page.find(".mail-address span").data("zip")}):a.find({error:function(b){a.update({zip:"10001"})}})),"results"===d.dom.pagetype||"profile"===d.dom.pagetype?d.dom.syn||d.dom.medscape||"insurance"===d.dom.seosection||"insurance"===d.dom.section||d.map.init(d):(d.dom.subsection&&"glossary"===d.dom.subsection||"seo"===d.dom.section&&"insurance"!==d.dom.seosection||(d.dom.page.find(".masthead, .directory").addClass("landing"),$(".pd-nav.collapsed").remove()),d.dom.page.find(".rrmap").hide(),d.dom.drSrch.find(":input").each(function(a){$.inArray($(this).attr("name"),["city","state","zip","lat","lon","loc","so"])<0&&"undefined"!=typeof $(this).attr("name")&&($("html").hasClass("browserIE")&&!$("html").hasClass("browserIE_10")&&""!==$(this).attr("placeholder")?$(this).val($(this).attr("placeholder")):$(this).val(""))}),"doctor"===d.dom.section?d.dom.subsection&&"glossary"===d.dom.subsection||"seo"===d.dom.section||d.dom.drSrch.closest(".search-area, .pd-search-form").addClass("landing"):"pharmacy"===d.dom.section?($("#landing-zone").html($(".city-container").addClass("landing")),d.formatColumns(d.dom.page.find(".city-container ul:visible:not(.alpha-wheel ul)"),2),d.dom.phSrch.closest(".search-area").addClass("landing")):"hospital"===d.dom.section?($("#landing-zone").html($(".city-container").addClass("landing")),d.formatColumns(d.dom.page.find(".city-container ul:visible:not(.alpha-wheel ul)"),2),d.dom.hpSrch.closest(".search-area").addClass("landing")):"insurance"!==d.dom.section&&"insurance"!==d.dom.seosection||d.dom.inSrch.find(".search-area").addClass("landing")),"doctor"===d.dom.section||"doctor"===d.dom.seosection?d.dom.page.find("li.doctor").hide():"pharmacy"===d.dom.section||"pharmacy"===d.dom.seosection?d.dom.page.find("li.pharmacy").hide():"hospital"===d.dom.section||"hospital"===d.dom.seosection?d.dom.page.find("li.hospital").hide():"insurance"!==d.dom.section&&"insurance"!==d.dom.seosection||d.dom.page.find("li.insurance").hide(),d.dom.page.find(".pd-nav.collapsed").css("display","block"),"results"===d.dom.pagetype&&(d.dom.page.find(".results-map:visible, .results-list .results:visible").length>1&&d.dom.page.find(".results-map").hide(),"mapView"===webmd.url.getHash()&&d.toggleMapView("view-map"),"insurance"!==d.dom.seosection&&d.dom.page.find(".results .result:not(.column-header)").length<10&&d.dom.page.find(".result-count").text().indexOf(" of ")<0&&d.dom.page.find(".results .result:last").css("border-bottom",0),d.mobile||"insurance"===d.dom.seosection||(d.tablet?require([image_server_url+"/webmd/consumer_assets/site_images/physician_directory/jquery.ui.touch-punch.js"],function(){d.distanceSlider()}):d.distanceSlider()),webmd.object.exists("dom.cookie.ratings",d)&&$.each(d.dom.cookie.ratings,function(a,b){d.dom.page.find("."+a).hide()}),d.ratings.halfStars(d),d.dom.page.find(".featured").length>0&&(d.dom.page.find(".ad-results").remove(),d.addSponsorAttribution(d.dom.page.find(".featured")),d.mobile?d.dom.page.find(".results-list").before(d.dom.page.find(".featured")):d.dom.page.find(".results-page > .results").prepend(d.dom.page.find(".featured")),"mapView"!==webmd.url.getHash()?d.dom.page.find(".featured").show():d.dom.page.find(".featured").hide())),"profile"===d.dom.pagetype&&("doctor"===d.dom.section&&"practice"!==d.dom.subsection&&d.dom.page.find(".rr-locations").find(".rr-locations-header, .rr-locations-list").show(),webmd.url.getParam("d")&&("overview"===d.dom.cur||"pharmacy"===d.dom.section&&"directions"===d.dom.cur)&&(b=webmd.url.clear().split("/")[4].replace("-overview",""),c=d.dom.cookie.d||{},c[b]=webmd.url.getParam("d"),d.updateCookie("d",c)),"doctor"===d.dom.section&&d.ratings.init(d),d.distance(),webmd.object.exists("dom.cookie.results."+d.dom.section,d)&&d.dom.page.find(".search_results").show(),"practice"===d.dom.subsection&&d.dom.page.find("#s5").css("margin-top","-"+d.dom.page.find(".profile-content.about").outerHeight()+"px"),"hospital"===d.dom.section&&"directions"===d.dom.cur&&$(".rr-locations").remove(),"hospital"!==d.dom.section||"physicians"!==d.dom.cur||d.mobile||d.specialtyDisplay(),!webmd.object.exists("dom.cookie.results."+d.dom.section,d)&&!d.mobile&&$(".breadcrumb").length>0&&$(".breadcrumb").html($(".breadcrumb").html().split(" | ")[1]),d.dom.page.find(".nav-links .back").length>0&&d.dom.page.find(".nav-links .back").attr("href",d.dom.cookie.results.insurance).show(),d.addSponsorAttribution(d.dom.page.find(".profile-gen"))),"seo"===d.dom.section||d.mobile&&"landing"===d.dom.pagetype?"doctor"===d.dom.seosection&&d.dom.page.find(".city-container").hide():d.dom.page.find(".seo-footer").hide(),"profile"===d.dom.pagetype&&"practice"===d.dom.subsection&&$("#s4").css({"margin-top":"-"+(d.dom.page.find(".about").innerHeight()+17)+"px"}),"insurance"!==d.dom.section&&"insurance"!==d.dom.seosection||(d.updateCookie("form",d.dom.query),d.tablet&&d.dom.page.find(".search-area input[type=submit]").val("Find Plan"),d.loadStates(d.dom.geoSrch),d.dom.page.find('.alpha-wheel a[href*="find-health-insurance"]').each(function(a,b){b.href=webmd.url.deleteParam("state",d.updateSearchQuery(b.href,!0)),b.href=webmd.url.deleteParam("type",b.href)})),"glossary"===d.dom.subsection&&webmd.url.getHash()&&webmd.url.getHash().indexOf("spec-")>-1&&$('.alpha-wheel a[href="#'+webmd.url.getHash()+'"]').trigger("click"),d.mobile&&d.mobileModifications(),d.dom.syn&&d.synModifications(),d.dom.medscape&&d.medscapeModifications(),d.dom.page.find('a[href*="https://connect.webmd"]').each(function(){this.href=webmd.url.addLifecycleAndEnv(this.href)}),d.dom.page.find('a[href*="/click?"]').each(function(){$(this).attr("href",webmd.url.addLifecycleAndEnv($(this).attr("href")).replace("dev01","preview").replace("perf","staging").replace("qa01","staging"))}),d.mobile||$("#s4 .pane").each(function(){$(this).outerHeight()>10?$(this).css({background:"#fff",border:"1px solid #ededed",margin:"0 0 16px"}):$(this).css({background:"none",border:"0",margin:"0"})}),d.resizeImages()},ads:function(){webmd.debug("=/=/= PhysicianDirectory: Ads config, and omniture",this.dom);var b=this,d={pt:window.s_topic.length>0?Number(window.s_topic):1680,app:webmd.adappid,pd_city:a.loc.city.replace(/\s/gi,"+").toLowerCase(),pd_state:a.loc.state.toLowerCase(),pd_zip:a.loc.zip,uri:"/"+encodeURI(webmd.url.clear().replace("https://"+webmd.url.getHostname()+"/","")||"default")};return d.uri=d.uri.replace(/\//gi,"%2f"),"undefined"!=typeof specialty&&(s_md.prop55=specialty,"results"===b.dom.pagetype||"seo"===b.dom.section?d.pd_spec=b.stripUnderscores(specialty):"profile"===b.dom.pagetype&&(d.pd_prof=b.stripUnderscores(specialty))),webmd.ads.refresh.defaults.selector+=", #trackingAd_1x1, #bottom_ad, #top_ad","undefined"!=typeof c&&c.getProfile(b.dom)&&(d=c.check(d,b.dom)),$("[data-sponid]").length>0&&(d.pd_spon=$("[data-sponid]").data("sponid")),webmd.ads2&&webmd.ads2.isInitialized()&&webmd.ads2.setPageTarget(d),d},addTag:function(b,c){webmd.debug("=-=-=-=-=-=-=-=-=-=-> ADD TAG: ",c,b.text());var d,e=this,f=webmd.url.deleteParam("pagenumber",window.location.href),g="doctor"===e.dom.section||"seo"===e.dom.section&&"doctor"===e.dom.seosection?"/results":"/"+(e.dom.seosection||e.dom.section)+"/results",h='<li title="{title}"">{filter} <a href="{url}" data-metrics-module-"'+e.metric+'-srch" data-metrics-link="tag">x</a></li>',i={title:b.text().indexOf(" (")>-1?b.text().replace(" "+b.find("span").text(),""):b.text(),filter:b.text().indexOf(" (")>-1?b.text().replace(" "+b.find("span").text(),""):b.text(),url:webmd.url.deleteParam(c,f)};"seo"===e.dom.section&&"insurance"!==e.dom.seosection&&(i.url=e.updateSearchQuery(g,!0,"seoLoc"),"sd"===c?i.url=webmd.url.deleteParam("sd",i.url):"cond"===c?i.url=webmd.url.deleteParam("cond",i.url):"proc"===c?i.url=webmd.url.deleteParam("proc",i.url):"distance"===c&&(i.url=webmd.url.deleteParam("distance",i.url))),"sd"===c&&(i.title&&i.filter||(i.title=e.dom.page.find(".search-header h4 strong.hdr-specialty").text(),i.filter=e.dom.page.find(".search-header h4 strong.hdr-specialty").text()),i.url=webmd.url.deleteParam("tname",i.url)),"distance"===c&&(b.val()?(i.filter="within "+b.val()+" miles","1"===b.val()&&(i.filter="within "+b.val()+" mile"),"25"===b.val()&&(i.url=webmd.url.setParam("distance",250,e.updateSearchQuery(g,!0)))):i.filter="within any miles",i.title=i.filter),"h"===c&&webmd.url.getParam("h")&&webmd.url.getParam("h").indexOf(",")>-1&&(d="",$.each(webmd.url.getParam("h").split(","),function(){this.toString()!==b.find("input").val()&&(d.length>0&&(d+=","),d+=this.toString())}),i.url=webmd.url.setParam("h",d,i.url)),"plantype"===c&&webmd.url.getParam("plantype")&&webmd.url.getParam("plantype").indexOf(",")>-1&&(d="",$.each(webmd.url.getParam("plantype").split(","),function(){this.toString()!==b.find("input").val()&&(d.length>0&&(d+=","),d+=this.toString())}),i.url=webmd.url.setParam("plantype",d,i.url)),"hp"===c&&b.length>1&&(i.title=e.dom.page.find(".search-header h4 strong.hdr-insurance").text(),i.filter=e.dom.page.find(".search-header h4 strong.hdr-insurance").text()),"cond"===c&&b.length>1&&(i.title=e.dom.page.find(".search-header h4 strong.hdr-condition").text(),i.filter=e.dom.page.find(".search-header h4 strong.hdr-condition").text()),"proc"===c&&b.length>1&&(i.title=e.dom.page.find(".search-header h4 strong.hdr-procedure").text(),i.filter=e.dom.page.find(".search-header h4 strong.hdr-procedure").text()),"type"===c&&(i.filter=b.text(),i.title=i.filter),i.filter.length>20&&(i.filter=i.filter.substring(0,17)+"..."),"seo"===e.dom.section&&"insurance"!==e.dom.seosection&&(i.url=webmd.url.setParam("city",a.loc.city,i.url),i.url=webmd.url.setParam("state",a.loc.state,i.url),i.url=webmd.url.setParam("zip",a.loc.zip,i.url),i.url=webmd.url.setParam("lat",a.loc.lat,i.url),i.url=webmd.url.setParam("lon",a.loc.lon,i.url)),e.dom.page.find(".search-tags ul").append(webmd.substitute(h,i))},addTags:function(){var a,b,c,d,e=this,f=["sd","hp","cond","proc","gender","distance","h","years","newpat","open24","hclinic","ht","plantype","accreditation"],g=["sd","cond","proc","distance","type","namestart"];9!==webmd.url.clear().split("/").length&&11!==webmd.url.clear().split("/").length||g.push("hp"),e.dom.page.find(".search-tags ul").html(""),$.each(f,function(h){c=String(this),d=e.dom.cookie.form[c],"distance"!==c||""!==d&&d!==!1||(d=25),"seo"===e.dom.section&&$.inArray(c,g)<0&&"insurance"!==e.dom.seosection?e.dom.cookie.form[c]=null:d!==!1&&""!==d&&"undefined"!=typeof d&&$.inArray(c,f)>-1&&(b=e.dom.page.find(".filters input[name="+c+"][type=hidden], .filters :input[name="+c+"]:checked, .ins-form :input[name="+c+"]"),webmd.debug("Tag input: ",b.attr("name")),1===b.length?(a=b.siblings("ul").find("a:visible:not(.clear, .view)"),a.text()||(a=b.closest("label")),"distance"===c&&(b.val(d),a=b),"type"===c&&(b.val(d),a=b.find("option[value="+d+"]")),a.text()||"distance"===c||"plantype"===c?e.addTag(a,c):(webmd.debug("TRY AGAIN: ",c),
"sd"===c&&e.addTag(a,c))):b.length>0&&$.each(b,function(a){$(this).closest("label").length>0&&e.addTag($(this).closest("label"),c)}))})},addSponsorAttribution:function(a){var b=this;require(["pdmodules/1/finder-sponsorship"],function(c){var d,e,f,g,h,i,j,k=function(d,k){d&&c[d]?"true"===c[d].customLink?(f=a.find(".sponsor-logo a").attr("data-npi"),b.mobile?(g=b.dom.page.find(".address a").html(),h=g.substring(g.length-5,g.length)):h=b.dom.page.find('.address-block span[itemprop="postalCode"]').html(),e=$('<li class="custom-link" data-metrics-module="pd-hd"></li>'),i=webmd.substitute(c[d].linkUrl,{npi:f,zip:h}),c[d].linkText&&(i?e.append('<a href="'+webmd.url.addLifecycleAndEnv("https://www.webmd.com")+"/click?url="+encodeURI(i)+'" data-metrics-link="txt">'+c[d].linkText+"</a>"):e.append(c[d].linkText)),c[d].image&&(i?e.append('<a href="'+webmd.url.addLifecycleAndEnv("https://www.webmd.com")+"/click?url="+encodeURI(i)+'" data-metrics-link="img"><img src="'+image_server_url+c[d].image+'" alt="'+c[d].brandText+'" /></a>'):e.append('<img src="'+image_server_url+c[d].image+'" alt="'+c[d].brandText+'" />')),webmd.externalLinks.reformatLinks(e.find("a")),e.length>0&&(b.dom.page.find(".contact").length>0?b.dom.page.find(".contact").append(e):b.mobile&&"profile"===b.dom.pagetype&&a.append(e))):(c[d].linkText?(k.find("a").text(c[d].linkText),c[d].linkUrl?(k.find("a").attr("href",c[d].linkUrl),c[d].linkUrl.indexOf("webmd.com")>-1?k.find("a").on("click",function(){return sl(this,"sp","disclaimer")}):k.find("a").on("click",function(){return sl(this,"nw","disclaimer")})):(k.find("a").before("<span>"+k.find("a").html()+"</span>"),k.find("a").remove())):"results"===b.dom.pagetype&&c[d].brandText&&c[d].brandText.length>0?(j=$("<p><u><span>From our sponsor</span></u> </p>"),c[d.linkUrl]?(j.append("<a>"+c[d].brandText+"</a>"),j.find("a").on("click",function(){return sl(this,"","pd-brand")})):j.append(c[d].brandText),k.prepend(j),k.find("img").remove()):k.find("a").remove(),k.find("img").length>0&&(c[d].image?(k.find("img").attr("src",image_server_url+c[d].image),k.find("img").attr("alt",c[d].brandText)):c[d].brandText?(k.find("img").after("<span>"+c[d].brandText+"</span>"),k.find("img").remove()):k.find("img").remove()),k.show()):k.remove()};a.find(".sponsor-logo").each(function(){d=$(this).closest(".result").data("sponid")||a.find("[data-sponid]").data("sponid"),"results"!==b.dom.pagetype?d&&c[d]&&c[d].image?k(d,$(this)):$(this).remove():k(d,$(this))})})},bindings:function(){webmd.debug("=/=/= PhysicianDirectory: Bindings");var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=this,s=!1;if(r.dom.page.find(".results .result li a, .results .result p a, .results .result .star-rating a").on("click",function(a){r.bypass=!0}),r.dom.page.find(".results .result:not(.column-header)").on("click",function(a){var b=webmd.metrics._getMetricsValue($(this).find("h2 a")),c=b||r.metric+"-feat-s";r.bypass||"results"!==r.dom.pagetype||(wmdTrack(webmd.metrics._getMetricsValue($(this).find("h2 a"))),r.updateCookie("icd",r.getIds($(this).find("h2 a"),c.split("_")[0])),window.location.href=$(this).find("h2 a").attr("href"))}),r.dom.page.find(".lnkInsurance").on("click",function(a){a.preventDefault(),webmd.overlay.open({html:'<div class="popup_530_rdr"><h1 style="color:#88A906">About Health Insurance</h1><p>The Health Insurance Affiliations are not intended to be a comprehensive representation of the physician\'s insurance plan participation. The list is primarily HMO plans and includes only a few PPO, POS or other insurance plan types. Health Insurance plan affiliations change frequently and should be verified with the physician\'s office or your health insurance provider.</p></div>'})}),r.dom.page.find(".filters .view a").on("click",function(a){a.preventDefault(),r.toggleMapView($(this).attr("class"))}),$(".filters .back a, .breadcrumb .back").on("click",function(a){a.preventDefault(),$(this).hasClass("back")?wmdTrack(r.metric+"-brdcrmb_br"):wmdTrack(r.metric+"-back-results"),window.location.href=r.dom.cookie.results[r.dom.section]}),r.dom.page.find(".filters .filter a, .filters .sort a, .filters .modify a").on("click",function(a){a.preventDefault(),wmdPageLink(r.metric+"-"+$(this).closest("li").attr("class").replace("right ","")),r.dom.page.find(".modifications ."+$(this).closest("li").attr("class")).show(),r.dom.page.find(".results-list, .ad-results").addClass("transparent")}),r.dom.page.find(".search-area form .sort input, .sort input").on("click",function(b){b.preventDefault();var c,d,e,f=document.location.href;switch($(this).val()){case"distance":c="dist";break;case"condition":c="cond";break;case"procedure":c="proc";break;case"plantype":c="type";break;case"rating":c="rt";break;default:c=$(this).val()}$(this).attr("selected")||("seo"===r.dom.section&&"insurance"!==r.dom.seosection?("seo"===r.dom.section&&webmd.url.clear().split(".com/")[1].split("/").length>2&&("doctor"===r.dom.seosection?(d=webmd.url.clear().split(".com/")[1].split("/")[4].replace(/-/g," "),e=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "))):(d=webmd.url.clear().split(".com/")[1].split("/")[2].replace(/-/g," "),e=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[1].replace(/-/g," ")))),f="doctor"===r.dom.seosection?"/results":"/"+r.dom.seosection+"/results",f=r.updateSearchQuery(f,!1,"seoLoc"),f=webmd.url.setParam("city",d,f),f=webmd.url.setParam("state",e,f),r.dom.cookie.form.sd?(f=webmd.url.setParam("sd",r.dom.cookie.form.sd,f),f=webmd.url.setParam("tname",r.dom.cookie.form.tname,f)):r.dom.cookie.form.proc?f=webmd.url.setParam("proc",r.dom.cookie.form.proc,f):r.dom.cookie.form.cond&&(f=webmd.url.setParam("cond",r.dom.cookie.form.cond,f))):"seo"===r.dom.section&&(f=f.split("/alpha")[0],f=webmd.url.deleteParam("state",r.updateSearchQuery(f,!1))),f=webmd.url.setParam("so",$(this).val().toLowerCase(),webmd.url.deleteParam("pagenumber",f)),wmdTrack(r.metric+"-sort_"+c),document.location.href=f)}),r.dom.page.find(".emaillink, .contact .email a").on("click",function(a){var b,c,d,e,f;a.preventDefault(),b="email_asset_overlay/1/email_asset_overlay",c=function(){require([b],function(a){a.open({assetTitle:document.title,type:"pd_emailafriend",params:{a:d,b:e,c:f}})},function(a){webmd.overlay.alert("Unable to send email:<br/>Could not load email form.")})},d=webmd.url.clear().slice(webmd.url.clear().indexOf(".com")+4),e="-377149454",f=r.dom.page.find("#profile-details h2, .profile-gen h2, .profile_general h1").html().replace(/&nbsp;/gi," "),require.defined(b)?c():webmd.overlay.open({html:'<div class="loading_large" style="margin:30px"></div>',onComplete:function(){c()}})}),r.dom.page.find(".officeseperator .expand, .officedetail .expand, .detail .expand").each(function(a){$(this).on("click",function(b){b.preventDefault(),wmdPageLink(r.metric+"-off-hrs_"+(a+1)),$(this).hasClass("open")?($(this).removeClass("open").siblings(".expandablecontainer").hide(),$(this).find("i").removeClass("icon-arrow-up").addClass("icon-arrow-down")):($(this).addClass("open").siblings(".expandablecontainer").show(),$(this).find("i").removeClass("icon-arrow-down").addClass("icon-arrow-up")),$(this).closest(".detail").hasClass("open")?$(this).closest(".detail").removeClass("open"):$(this).closest(".detail").addClass("open"),"doctor"===r.dom.section||"seo"===r.dom.section})}),r.dom.page.find(".view-all a").on("click",function(a){$(this).attr("href").indexOf("alpha")===-1&&(a.preventDefault(),$(this).hasClass("open")?(wmdPageLink(r.metric+"-phys_less"),$(this).html('<i class="expandableicon" />View All Physicians').removeClass("open").closest("li").siblings(".visible").toggleClass("hidden visible")):(wmdPageLink(r.metric+"-phys_all"),$(this).html('<i class="expandableicon" />View Less Physicians').addClass("open").closest("li").siblings(".hidden").toggleClass("hidden visible")))}),r.dom.page.find(".specialties a").each(function(a){$(this).on("click",function(b){b.preventDefault(),wmdPageLink(r.metric+"-spec_"+(a+1)),r.specialtyDisplay(webmd.url.getHash(this.href))})}),r.dom.page.find(".hospital-footer a").each(function(a){$(this).on("click",function(a){if(a.preventDefault(),!$(this).hasClass("off")){var b=webmd.url.getHash(this.href);r.specialtyDisplay(b)}})}),r.dom.page.find(".alpha-nav li a").on("click",function(a){a.preventDefault(),r.dom.page.find(".alpha-nav li.active").removeClass("active"),$(this).closest("li").addClass("active"),r.dom.page.find(".specialty-list:visible").hide(),r.dom.page.find("."+webmd.url.getHash(this.href)).show()}),r.dom.page.find(".filters a:not(.clear, .clearall, .view)").on("click",function(a){a.preventDefault(),r.mobile||$(this).closest("li").hasClass("selected")||r.filter($(this),a)}),r.dom.page.find(".clearall").on("click",function(b){var c=window.location.href,d=["ln","name","hname","city","state","zip","lat","lon","type","namestart"];b.preventDefault(),wmdTrack(r.metric+"-srch_clear"),$.each(webmd.url.getParams(),function(a,b){$.inArray(a,d)===-1&&(c=webmd.url.deleteParam(a,c))}),"seo"===r.dom.section&&"insurance"!==r.dom.seosection&&(webmd.url.clear().split(".com/")[1].split("/").length>4?(k=webmd.url.clear().split(".com/")[1].split("/")[4].replace(/-/g," "),l=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "))):(k=webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "),l=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[2].replace(/-/g," "))),c=r.updateSearchQuery(webmd.url.addLifecycleAndEnv("https://doctor.webmd.com/results"),!1,"seoLoc"),c=webmd.url.setParam("city",k,c),c=webmd.url.setParam("state",l,c),c=webmd.url.deleteParam("sd",c),c=webmd.url.deleteParam("tname",c),c=webmd.url.deleteParam("hp",c)),window.location.href.toString()!==c&&(window.location.href=c)}),r.dom.page.find(".view:not(.profile-content .view, .rr-locations .view)").on("click",function(a){a.preventDefault(),r.mobile||(r.viewToggle($(this)),"doctor"===r.dom.section||"seo"===r.dom.section)}),r.dom.page.find(".profile-content .view, .bio .view, #associates .view, .callout .view").on("click",function(a){$(this).attr("href").indexOf("javascript")>-1&&($(this).text().indexOf("More")>-1?($(this).attr("onclick")&&$(this).attr("onclick",$(this).attr("onclick").replace("less","more")),$(this).attr("data-metrics-link")&&$(this).data("metrics-link","more"),$(this).closest("ul").find(".hidden").removeClass("hidden").addClass("showing"),$(this).siblings(".hidden").removeClass("hidden").addClass("showing"),$(this).addClass("shown").text($(this).text().replace("More","Less"))):($(this).attr("onclick")&&$(this).attr("onclick",$(this).attr("onclick").replace("more","less")),$(this).attr("data-metrics-link")&&$(this).data("metrics-link","less"),$(this).closest("ul").find(".showing").removeClass("showing").addClass("hidden"),$(this).siblings(".showing").removeClass("showing").addClass("hidden"),$(this).removeClass("shown").text($(this).text().replace("Less","More"))),$(this).data("click")&&(wmdPageLink($(this).data("click")),$(this).text().indexOf("More")>-1?$(this).data("click",$(this).data("click").replace("less","more")):$(this).data("click",$(this).data("click").replace("more","less"))))}),r.dom.page.find(".quick-tips a").on("click",function(a){webmd.url.clear(this.href)===webmd.url.clear()&&wmdPageLink(webmd.metrics._getMetricsValue($(this)))}),r.dom.page.find(".expandable").on("click",function(a){var b=$(this),c=300,d=r.metric,e=r.dom.page.find(".results-sort .expandable").length>0&&r.dom.page.find(".results-sort .expandable").position().top+10;"lcl"===r.metric&&("doctor"===r.dom.seosection?d="pd":"hospital"===r.dom.seosection?d="hp":"pharmacy"===r.dom.seosection&&(d="ph")),e?b.hasClass("expanded")?(wmdPageLink(d+"-filter_close"),r.dom.page.find(".filters").animate({width:"0"},.6*c,function(){$(this).removeClass("expanded").css({top:"auto"}),r.dom.page.find(".expandable").removeClass("expanded")})):(wmdPageLink(d+"-filter_open"),r.dom.page.find(".filters").css({top:e+"px"}),r.dom.page.find(".filters").addClass("expanded").animate({width:"220px"},c,function(){r.dom.page.find(".expandable").addClass("expanded")})):(a.preventDefault(),$(this).closest("div").hide(),r.dom.page.find(".results-list, .ad-results").removeClass("transparent"))}),r.dom.page.find(".top-specialties .alpha-wheel a:not(.disabled)").on("click",function(a){$(".top-specialties .alpha-wheel a.selected").removeClass("selected"),$(".city-lists div:visible").hide(),$(this).closest("li").hasClass("top-link")?($(this).addClass("selected"),$(".top-cities").show(),wmdPageLink("lcl-cty-alpha_top")):($(this).addClass("selected"),$(".letter-"+$(this).text().toLowerCase()).show(),wmdPageLink("lcl-cty-alpha_"+$(this).text().toLowerCase())),r.tablet&&r.formatColumns(r.dom.page.find(".top-specialties ul:visible:not(.alpha-wheel ul)"),2)}),r.dom.page.find(".glossary .alpha-wheel a, .glossary dl dd a").on("click",function(a){a.preventDefault(),$(this).hasClass("disabled")||($(".glossary .alpha-wheel a.selected").removeClass("selected"),$('.alpha-wheel a[href="#'+webmd.url.getHash(this.href)+'"]').addClass("selected"),r.dom.page.find("dl:not(.hidden)").addClass("hidden"),document.location=webmd.url.setHash(webmd.url.getHash(this.href)),$("#"+webmd.url.getHash(this.href)).removeClass("hidden"),window.scrollTo(0,$("#chrome").position().top),"doctor"===r.dom.section||"seo"===r.dom.section)}),r.dom.page.find(".seo-lists .alpha-wheel ul a").on("click",function(a){a.preventDefault();var b=$(".seo-lists").hasClass("seo-conditions")?"cond":$(".seo-lists").hasClass("seo-procedures")?"proc":$(".seo-lists").hasClass("seo-specialties")?"spec":"cty",c=$(this).text().toLowerCase();if(!$(this).hasClass("disabled"))if(r.mobile){if($(this).text().indexOf("-")>-1||$(this).text().indexOf("Top")>-1){if($(this).hasClass("active"))return;$(".seo-lists .alpha-wheel .wheel-header .active").removeClass("active"),$(this).closest("li").addClass("active"),$(this).text().indexOf("Top")>-1?($(".seo-lists .seo-list .top-cities").css("margin-top","-45px"),$(".seo-lists > div:not(.alpha-wheel) ul li:not(.alpha-top)").hide(),$(".seo-lists > div:not(.alpha-wheel) ul li.alpha-top").show(),c="top"):$(".seo-lists .seo-list .top-cities").css("margin-top","0"),$(".seo-lists .alpha-wheel .wheel-content li:not(.alpha_"+c+")").hide(),$(".seo-lists .alpha-wheel .wheel-content li.alpha_"+c).show()}else $(".seo-lists .alpha-wheel .wheel-content .active").removeClass("active"),$(this).closest("li").addClass("active"),$(".seo-lists > div:not(.alpha-wheel) ul li:not(.alpha-"+c+")").hide(),$(".seo-lists > div:not(.alpha-wheel) ul li.alpha-"+c+":last").css("border","0"),$(".seo-lists > div:not(.alpha-wheel) ul li.alpha-"+c).show();wmdPageLink("lcl-"+b+"-alpha_"+c)}else $(".seo-lists .alpha-wheel a.selected").removeClass("selected"),$(this).addClass("selected"),"All"!==$(this).text()?($(".seo-lists > div:not(.alpha-wheel) ul").css("width","100%"),$(".seo-lists > div:not(.alpha-wheel) ul li:not(.alpha-"+c+")").hide(),$(".seo-lists > div:not(.alpha-wheel) ul li.alpha-"+c).show(),r.formatColumns(r.dom.page.find(".seo-lists ul:visible:not(.alpha-wheel ul)"),1),wmdPageLink("lcl-"+b+"-alpha_"+c)):($(".seo-lists > div:not(.alpha-wheel) ul").css("width","46.5%"),$(".seo-lists > div:not(.alpha-wheel) ul li").show(),r.formatColumns(r.dom.page.find(".seo-lists ul:visible:not(.alpha-wheel ul)"),2,2),wmdPageLink("lcl-"+b+"-alpha_all"))}),r.dom.page.find(".back-to-top").on("click",function(a){window.scrollTo(0,$("#chrome").position().top)}),r.dom.page.find("a.book-appt").off().on("click",function(a){a.preventDefault();var b,c,d=webmd.metrics._getMetricsValue($(this))||r.metric+"-appt_bk";return wmdPageLink(d,{contextData:{"wb.icd":r.getIds($(this),r.metric+"-appt")}}),$("#legal-overlay").length>0&&"connect"!==$(this).data("service")&&"unknown"!==$(this).data("service")?(r.mobile||$("#legal-overlay").find("iframe").attr("src",this.href),$("#legal-overlay .legal-content").addClass($(this).data("service")),b=this.href,c={html:$("#legal-overlay").html(),width:r.mobile?"90%":702,onComplete:function(){$(".continue a").attr("href",b).on("click",function(){webmd.overlay.close()})},onLoad:function(){r.mobile||$(".legal-content iframe").attr("src",b),$("#webmdHoverClose").html("X")},onOpen:function(){r.mobile||$(".legal-content iframe").attr("src",b)}},webmd.overlay.open(c)):window.open(this.href,"_blank"),!1}),r.dom.page.find(".ratings-inst-link").on("click",function(a){a.preventDefault();var b=(this.href,{html:'<div class="rating-overlay"><h4>Physician Ratings</h4><p>With over 70 million monthly users, WebMD is a great place to get positive exposure.</p><ul><li><strong>Encourage patients to rate you at <a href="/" data-metrics-module="pd-promo">doctor.webmd.com</a></strong><br />Having more ratings is a great way to ensure a balanced perspective.</li><li><strong>Make sure patients know you\'ve listened to their concerns </strong><br />Ensuring patients feel heard is critical to positive ratings.</li><li><strong>Enhance Your WebMD Profile</strong><br />Add a photo, professional and practice information to your WebMD profile.</li></ul><a href="'+webmd.url.addLifecycleAndEnv("https://connect.webmd.com/p/dashboard/")+"?claim=true&amp;lhdpid="+r.dom.page.find(".profile-content, .profile-content").data("guid")+'" target="_blank" onclick="wmdPageLink(\'pd-gen_clm\');" class="rate-doctor orange-btn">Enhance Your Profile</a></div>',width:r.mobile?"90%":575,onLoad:function(){$("#webmdHoverClose").html("X")}});return wmdPageLink("pd-rate_prm"),webmd.overlay.open(b),!1}),r.dom.page.find(".rt-header:not(.disabled)").each(function(a){$(this).on("click",function(b){b.preventDefault(),wmdPageLink(r.metric+"-ratings_"+(a+1)),$(this).closest("li").hasClass("open")?$(this).closest("li").removeClass("open"):$(this).closest("li").addClass("open")})}),r.dom.page.find(".profile-gen a.phone").off().on("click",function(a){var b=webmd.metrics._getMetricsValue($(this))||r.metric+"-gen-info_ph";wmdPageLink(b,{contextData:{"wb.icd":r.getIds($(this),r.metric+"-gen-info")}})}),r.dom.page.find(".featured .results a.phone").each(function(a){$(this).off().on("click",function(b){r.bypass=!0;var c=webmd.metrics._getMetricsValue($(this))||r.metric+"-feat-ph_"+(a+1);wmdPageLink(c,{contextData:{"wb.icd":r.getIds($(this),c.split("_")[0])}})})}),r.dom.page.find(".featured .results h2 > a").off().on("click",function(a){var b=webmd.metrics._getMetricsValue($(this))||r.metric+"-feat-s";r.updateCookie("icd",r.getIds($(this),b.split("_")[0]))}),r.dom.page.find(".pagination select").on("change",function(a){wmdTrack(r.metric+"-pagenum_"+$(this).val()),window.location.href=webmd.url.setParam("pagenumber",$(this).val(),webmd.url.deleteParam("pagenumber"))}),r.dom.page.find(".alpha-wheel select").on("change",function(a){wmdTrack("lcl-alpha_"+$(this).val()),"results"===r.dom.pagetype?(i="all"===$(this).val()?webmd.url.clear().split("/alpha/")[0]:webmd.url.clear().split("/alpha/")[0]+"/alpha/"+$(this).val(),"insurance"===r.dom.seosection&&(i=webmd.url.deleteParam("state",r.updateSearchQuery(i,!1)))):i=$(this).val(),window.location.href=i}),r.dom.page.find(".header select, .results-sort select").on("change",function(b){var c,d,e,f=document.location.href;switch($(this).val()){case"distance":c="dist";break;case"condition":c="cond";break;case"procedure":c="proc";break;case"plantype":c="type";break;case"rating":c="rt";break;default:c=$(this).val()}"seo"===r.dom.section&&"insurance"!==r.dom.seosection?("seo"===r.dom.section&&webmd.url.clear().split(".com/")[1].split("/").length>2&&("doctor"===r.dom.seosection?(d=webmd.url.clear().split(".com/")[1].split("/")[4].replace(/-/g," "),e=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "))):(d=webmd.url.clear().split(".com/")[1].split("/")[2].replace(/-/g," "),e=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[1].replace(/-/g," ")))),f="doctor"===r.dom.seosection?"/results":"/"+r.dom.seosection+"/results",f=r.updateSearchQuery(f,!1,"seoLoc"),f=webmd.url.setParam("city",d,f),f=webmd.url.setParam("state",e,f),r.dom.cookie.form.sd?(f=webmd.url.setParam("sd",r.dom.cookie.form.sd,f),f=webmd.url.setParam("tname",r.dom.cookie.form.tname,f)):r.dom.cookie.form.proc?f=webmd.url.setParam("proc",r.dom.cookie.form.proc,f):r.dom.cookie.form.cond&&(f=webmd.url.setParam("cond",r.dom.cookie.form.cond,f))):"seo"===r.dom.section&&(f=f.split("/alpha")[0],f=webmd.url.deleteParam("state",r.updateSearchQuery(f,!1))),f=webmd.url.setParam("so",$(this).val().toLowerCase(),webmd.url.deleteParam("pagenumber",f)),wmdTrack(r.metric+"-sort_"+c),document.location.href=f}),r.dom.page.find("#practicelocations, #office-loc").on("change",function(){var a=$(this).val().split("|"),b=r.iphone?"https://maps.apple":"https://maps.google";b+=".com/maps?q="+a[2]+"@"+a[0]+","+a[1],$(this).siblings("p").find("a").attr("href",b),r.map.changeMarker(r,$(this).prop("selectedIndex")+1,a)}),r.dom.page.find(".specialties").on("change",function(a){var b=$(this).find("option[value="+$(this).val()+"]").data("num")?Number($(this).find("option[value="+$(this).val()+"]").data("num")):0;wmdPageLink(r.metric+"-spec_"+(b+1)),r.specialtyDisplay($(this).val())}),r.dom.page.find(".hp").on("change",function(a){if("insurance"===r.dom.cur){var b=window.specialty,c=r.dom.medscape?"/results":r.dom.syn?"/syn/results":webmd.url.addLifecycleAndEnv("https://doctor.webmd.com/results");c=r.updateSearchQuery(c),"undefined"!=typeof b&&b&&(c=webmd.url.setParam("sd",String(b).split("_")[1],c)),c=webmd.url.setParam("city",r.dom.page.find(".address-block").data("area").split(",")[0],c),c=webmd.url.setParam("state",r.dom.page.find(".address-block").data("area").split(",")[1],c),c=webmd.url.setParam("zip",r.dom.page.find(".address-block").data("zip"),c),c=webmd.url.setParam("distance","250",c),c=webmd.url.deleteParam("lat",webmd.url.deleteParam("lon",c)),window.location.href=webmd.url.setParam("hp",$(this).val(),c)}}),r.dom.page.find(".filters :input, .filter :input").on("change",function(a){r.filter($(this),a)}),r.dom.page.find(".ins-form select:not(.namestart)").on("change",function(b){r.dom.cookie.form[$(this).attr("class")]=$(this).val(),r.ncqaPlans({state:r.dom.page.find(".state").val()||a.loc.state,type:r.dom.page.find(".type").val()})}),r.dom.drSrch.off("submit").on("submit",function(b){return g=$(this),h=g.find("[name=loc]").val(),h.indexOf(", ")<0||h.split(", ")[0]!==a.loc.city||h.split(", ")[1].substring(0,h.split(", ")[1].lastIndexOf(" "))!==a.loc.state||a.loc.zip&&Number(h.split(", ")[1].substring(h.split(", ")[1].lastIndexOf(" ")))!==Number(a.loc.zip)?(r.dom.geoSrch.on("location-update",function(){g.submit()}),a.validateField(r.dom.geoSrch),!1):(wmdTrack("pd-srch_sub"),r.validateDoctorForm($(this),b))}),r.dom.geoSrch.on("focus",function(a){r.locationChange=!0,r.locationValue=$(this).val()}).on("blur",function(a){r.locationValue===$(this).val()&&(r.locationChange=!1)}),r.dom.phSrch.off("submit").on("submit",function(b){return g=$(this),h=g.find("[name=loc]").val(),h.indexOf(", ")<0||h.split(", ")[0]!==a.loc.city||h.split(", ")[1].substring(0,h.split(", ")[1].lastIndexOf(" "))!==a.loc.state||a.loc.zip&&Number(h.split(", ")[1].substring(h.split(", ")[1].lastIndexOf(" ")))!==Number(a.loc.zip)?(r.dom.geoSrch.on("location-update",function(){g.submit()}),a.validateField(r.dom.geoSrch),!1):(wmdTrack("ph-srch_sub"),r.validatePharmacyForm($(this)))}),r.dom.hpSrch.off("submit").on("submit",function(b){return g=$(this),h=g.find("[name=loc]").val(),h.indexOf(", ")<0||h.split(", ")[0]!==a.loc.city||h.split(", ")[1].substring(0,h.split(", ")[1].lastIndexOf(" "))!==a.loc.state||a.loc.zip&&Number(h.split(", ")[1].substring(h.split(", ")[1].lastIndexOf(" ")))!==Number(a.loc.zip)?(r.dom.geoSrch.on("location-update",function(){g.submit()}),a.validateField(r.dom.geoSrch),!1):(wmdTrack("hp-srch_sub"),r.validateHospitalForm($(this)))}),r.dom.inSrch.off("submit").on("submit",function(a){return wmdTrack("in-srch_sub"),r.validateInsuranceForm($(this))}),r.dom.page.find("#visitorAddress").on("submit",function(a){if(a.preventDefault(),r.validateVisitorForm($(this))){wmdPageLink(r.metric+"-prfl_drct");var b={add:$(this).find("#txtAddress").val(),city:$(this).find("#txtCity").val(),state:$(this).find("#ddState").val(),zip:$(this).find("#txtZip").val()};r.map.getDirections(r,b)}}),r.dom.page.find(".profile-content.ratings .star, .section-content .ratings .star").closest("i").on("click",function(a){if(!r.ratings.noshow){var b=$(this).closest(".rating");webmd.object.exists("ratings.disable",r.dom.cookie)&&r.dom.cookie.disable||(i=webmd.url.getHash($(this).find("a").attr("href")),i=Number(i.substring(i.length-1)),b.closest("form").find(".error").remove(),b.find(".rating > i").each(function(a){r.ratings.selectedClass(a,i,this)}),"ratings"!==r.dom.cur||r.dom.page.find(".profile-content, .section-content").hasClass("editing")?b.closest(".profile-content, .section-content").length>0&&(b.find(".your-rating").length<1&&(b.find(".clear").length<1?(b.find("i:not(.icon-star):not(.icon-halfstar):last").after('<a href="javascript://" class="clear" title="Clear Rating"><span>X</span></a>'),b.find(".clear").on("click",function(a){$(this).closest(".rating").find(".description").text("Rate"),$(this).closest(".rating").find("i.selected").removeClass("selected half"),$(this).closest(".rating").find("input").val(0),$(this).hide()})):b.find(".clear").show()),b.find("input").val(i)):r.ratings.editView(r,!1,webmd.url.getHash($(this).find("a").attr("href"))))}}),r.dom.page.find(".profile-content.ratings .star, .section-content .ratings .star").closest("i").on("hover",function(a){if(!r.ratings.noshow){var b=Number($(this).closest(".rating").find("input").val()),c=$(this).closest(".rating").find(".description");isNaN(b)&&(b=0),(!r.dom.page.find(".profile-content, .section-content").hasClass("editing")||$(this).closest(".profile-content, .section-content").length<1)&&(b=$(this).closest(".rating").data("rating")||0),i=webmd.url.getHash($(this).find("a").attr("href")),i=Number(i.substring(i.length-1)),"mouseleave"===a.type?c.text(r.ratings.getDesc(b)):c.text(r.ratings.getDesc(i)),$(this).closest(".rating").find("i:not(.icon-star):not(.icon-halfstar)").each(function(c){$(this).removeClass("selected"),"mouseleave"===a.type?($(this).removeClass("hover"),j=b-c,c<=Math.ceil(b)&&j>=.25?c===Math.ceil(b)&&j<.75&&j>=.25?$(this).addClass("selected"):$(this).addClass("selected"):$(this).removeClass("selected")):c<i&&$(this).addClass("hover")})}}),r.dom.page.find(".rate-doctor, .special > a, .star-rating > a").on("click",function(a){"ratings"===r.dom.cur&&(a.preventDefault(),r.ratings.editView(r))}),r.dom.page.find(".cancel-rate").on("click",function(a){"ratings"===r.dom.cur&&(a.preventDefault(),r.ratings.clearView(r))}),r.dom.page.find("select[name=l-q1-s]").on("change",function(a){$(this).closest(".rating").find("input[type=hidden]").val($(this).val())}),r.dom.page.find("select[name=l-q0], select[name=l-q1]").on("change",function(a){r.dom.page.find(".practice").attr("data-pracid",$(this).val()),r.ratings.pracid="prac_"+$(this).val(),r.ratings.get(r,"practice",r.ratings.pracid),"undefined"!=typeof reguserid&&(webmd.debug("USER SIGNED IN"),r.ratings.getUserRating(r,[r.ratings.pracid],!0))}),r.dom.geoSrch.on("location-update",function(){webmd.debug("=/=/= PhysicianDirectory: Location Updated! (event triggered)"),r.dom.geoSrch.val(a.loc.city+", "+a.loc.state+" "+a.loc.zip),r.locationChange=!1,delete a.loc.so,r.setForm(a.loc,s),r.resetTypeahead(),r.updateCookie("geo",a.loc),r.distance(),r.dom.page.find("header nav").show(),"directions"===r.dom.cur&&r.loadDirectionForm(r.dom.page.find("#visitorAddress")),r.tablet&&"doctor"!==r.dom.section&&"insurance"!==r.dom.seosection&&("seo"===r.dom.section&&"landing"===r.dom.pagetype?r.formatColumns(r.dom.page.find(".top-specialties ul:visible:not(.alpha-wheel ul)"),2):r.tablet&&"landing"===r.dom.pagetype&&r.formatColumns(r.dom.page.find(".city_container_rdr .city_list ul"),4)),("seo"===r.dom.section&&(s||"landing"===r.dom.pagetype||"refined"!==r.dom.seo)||"seo"!==r.dom.section)&&(webmd.debug("-----> ENABLE FORM <-----"),r.dom.page.find("form input").removeAttr("disabled")),"results"===r.dom.pagetype&&s&&r.dom.query.city!==a.loc.city&&r.dom.query.state!==a.loc.state&&r.dom.query.zip!==a.loc.zip?"pharmacy"===r.dom.section||"seo"===r.dom.section&&"pharmacy"===r.dom.seosection?"seo"!==r.dom.section||"results"!==r.dom.pagetype||r.seo?r.dom.phSrch.submit():r.seo=!0:"hospital"===r.dom.section||"seo"===r.dom.section&&"hospital"===r.dom.seosection?"seo"!==r.dom.section||"results"!==r.dom.pagetype||r.seo?r.dom.hpSrch.submit():r.seo=!0:"seo"!==r.dom.section||"results"!==r.dom.pagetype||r.seo?r.dom.drSrch.submit():r.seo=!0:"profile"===r.dom.pagetype&&s?(r.dom.cookie.d={},r.updateCookie("d",r.dom.cookie.d)):s=!0}),r.dom.geoSrch.on("location-reset",function(){webmd.debug("=/=/= PhysicianDirectory: Location Reset! (event triggered)"),r.dom.geoSrch.val(""),r.dom.cookie.d={},r.updateCookie("d",r.dom.cookie.d),r.resetTypeahead(),r.updateCookie("geo",a.loc),r.setForm(a.loc),r.distance(),r.dom.page.find(".geolocation_area").removeClass("located").addClass("default"),r.dom.page.find(".geo_content h4 span").html("Unknown"),r.dom.page.find(".identified").hide(),r.dom.page.find("header nav").hide()}),r.dom.page.find(".geo_content a, .geo_content h4").on("click",function(a){r.dom.page.find("header nav").hide()}),r.dom.page.find("#hp, #h").on("mousedown",function(a){"None"!==$(this).find("option:first-child").text()&&$(this).find("option:first-child").text("None")}).on("blur change",function(a){"None"===$(this).find("option:first-child").text()&&$(this).find("option:first-child").text($(this).find("option:first-child").data("default"))}),a.init({error:r.errorTooltip,form:r.dom.geoSrch,field:"insurance"===r.dom.section||"insurance"===r.dom.seosection?$(".ins-form .state"):null,metric:r.metric,mobile:r.mobile,revert:function(){r.dom.geoSrch.val(a.loc.city+", "+a.loc.state+" "+a.loc.zip),r.locationChange=!1},callback:{error:function(b){r.mobile&&a.reset()}}}),"doctor"===r.dom.section||"seo"===r.dom.section&&"doctor"===r.dom.seosection?(c={baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#ln",name:"doctor",params:{s:50,sz:10,metadata:"lname,fname,mname,degree,prvid,city,state,specialty,locationid",city:a.loc.city,state:a.loc.state,zip:a.loc.zip,useSynonyms:!0},parseparams:function(b){return b.city=a.loc.city,b.state=a.loc.state,b.zip=a.loc.zip,b},select:function(a,b){return b.preventDefault(),a.attr("href").indexOf("/results?")>-1?(r.populateForm(a),r.dom.page.find("#ln").blur(),!1):void r.followTypeahead(a)}},r.doct_typeahead=webmd.object(b),r.doct_typeahead.init(c),d={baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#ln",name:"specialty",params:{s:20,sz:10,useSynonyms:!0}},r.spec_typeahead=webmd.object(b),r.spec_typeahead.init(d),e={baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#ln",name:"condition",params:{s:19,sz:10,useSynonyms:!0}},r.cond_typeahead=webmd.object(b),r.cond_typeahead.init(e),f={baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#ln",name:"procedure",params:{s:18,sz:10,useSynonyms:!0}},r.proc_typeahead=webmd.object(b),r.proc_typeahead.init(f),r.dom.page.find("#ln").on("results-returned",function(b,c,d,e){var f;r.ta||(r.ta={}),r.ta[c]=e,d&&r.ta.doctor&&r.ta.specialty&&r.ta.condition&&r.ta.procedure&&(f=d.split("-")[0]===a.loc.state.toLowerCase()&&d.split("-")[1]===a.loc.city.toLowerCase()?d.replace(d.split("-")[0]+"-"+d.split("-")[1]+"-",""):d,r.renderPhysicianTA(f,r.ta));
}),r.dom.page.find("#ln").on("clear-type-ahead",function(a){$("#physiciantypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})})):"pharmacy"===r.dom.section||"seo"===r.dom.section&&"pharmacy"===r.dom.seosection?(r.phar_typeahead=webmd.object(b),r.phar_typeahead.init({baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#name",name:"pharmacy",params:{s:51,sz:10,metadata:"name,city,state",city:a.loc.city,state:a.loc.state,zip:a.loc.zip},parseparams:function(b){return b.city=a.loc.city,b.state=a.loc.state,b.zip=a.loc.zip,b},select:function(a){r.followTypeahead(a)},special:function(a){r.checkTypeahead($("#name").val(),a)}}),r.dom.page.find("#name").on("results-returned",function(a,b,c,d){r.ta||(r.ta={}),r.ta[b]=d,r.renderTypeAhead(c,r.ta,"pharmacy")}),r.dom.page.find("#name").on("clear-type-ahead",function(a){$("#pharmacytypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})})):("hospital"===r.dom.section||"seo"===r.dom.section&&"hospital"===r.dom.seosection)&&(r.hosp_typeahead=webmd.object(b),r.hosp_typeahead.init({baseurl:r.dom.medscape?webmd.url.addLifecycleAndEnv("https://directory.medscape.com"):webmd.url.addLifecycleAndEnv("https://doctor.webmd.com"),selector:"#hname",name:"hospital",params:{s:52,sz:10,metadata:"name,city,state",city:a.loc.city,state:a.loc.state,zip:a.loc.zip},parseparams:function(b){return b.city=a.loc.city,b.state=a.loc.state,b.zip=a.loc.zip,b},select:function(a){r.followTypeahead(a)},special:function(a){r.checkTypeahead($("#hname").val(),a)}}),r.dom.page.find("#hname").on("results-returned",function(a,b,c,d){r.ta||(r.ta={}),r.ta[b]=d,r.renderTypeAhead(c,r.ta,"hospital")}),r.dom.page.find("#hname").on("clear-type-ahead",function(a){$("#hospitaltypeahead").slideUp("fast",function(){$(this).closest("form").find("select").css("visibility","visible")})})),$("html").hasClass("browserIE")&&!$("html").hasClass("browserIE_10")&&$("[placeholder]").each(function(){$(this).val($(this).attr("placeholder"))}).on("focusin",function(){$(this).attr("placeholder")===$(this).val()&&$(this).val("")}).on("focusout",function(){""!==$(this).val()&&null!==$(this).val()||$(this).val($(this).attr("placeholder"))}),m='<div class="perc-exp"><p class="topchoice"><i><b /></i>A Commonly Treats icon may appear next to some conditions that a physician treats.</p><p>This appears if the physician treats a high number of patients for the condition as a proportion of all patients they treat. Physicians are compared to their peers in their metropolitan area. These numbers may not represent a complete set of data for every physician.</p></div>',n='<div class="perc-exp"><p class="topchoice"><i><b /></i>A Commonly Performs icon may appear next to some procedures that a physician performs.</p><p>This icon appears if the physician performs a high number of procedures when compared to their peers in their metropolitan area. These numbers may not represent a complete set of data for every physician.</p></div>',o='<div class="perc-exp"><p>Content under this heading is from or created on behalf of the named sponsor. This content is not subject to the WebMD Editorial Policy and is not reviewed by the WebMD Editorial department for accuracy, objectivity or balance.</p></div>',r.mobile){r.dom.page.find(".profile .profile-content .conditions .subheader i").on("click",function(){webmd.overlay.open({width:"250px",html:m,onLoad:function(){$("#webmdHoverClose").text("X")}})}),r.dom.page.find(".profile .profile-content .procedures .subheader i").on("click",function(){webmd.overlay.open({width:"250px",html:n,onLoad:function(){$("#webmdHoverClose").text("X")}})});var t=function(){r.dom.page.find(".results .result .sponsor-logo p span").on("click",function(a){a.stopPropagation(),webmd.overlay.open({width:"250px",html:o,onLoad:function(){$("#webmdHoverClose").text("X")}})})},u=setInterval(function(){t(),r.dom.page.find(".results .result .sponsor-logo p span").length&&clearInterval(u)},1e3);r.dom.page.find(".filter input[type=submit]").on("click",function(b){if(webmd.debug("UPDATE RESULTS!!!!!!!!!",r.dom),i=webmd.url.clear(),"seo"===r.dom.section){if(0===r.dom.page.find(".filter input:not([type=submit]):checked").length&&2===r.dom.page.find('.filter select option:selected[value!=""]').length&&r.dom.page.find('.filter select.hp option:selected[value!=""]').length>0&&r.dom.page.find('.filter select[name=sd] option:selected[value!=""], .filter select[name=cond] option:selected[value!=""], .filter select[name=proc] option:selected[value!=""]').length>0)return i.split(".com/")[1].split("/").length>5&&(i=i.split(".com/")[0]+".com/"+i.split(".com/")[1].split("/")[0]+"/"+i.split(".com/")[1].split("/")[1]+"/"+i.split(".com/")[1].split("/")[2]+"/"+i.split(".com/")[1].split("/")[3]+"/"+i.split(".com/")[1].split("/")[4]),void(window.location=i+"/"+r.dom.page.find('.filter select.hp option:selected[value!=""]').data("slug"));"insurance"!==r.dom.seosection&&(i="/results","doctor"!==r.dom.seosection&&(i="/"+r.dom.seosection+i))}r.dom.page.find("h4[data-id]").data("key")&&(i=webmd.url.setParam(r.dom.page.find("h4[data-id]").data("key"),r.dom.page.find("h4[data-id]").data("id"),i),i=webmd.url.setParam("tname",r.dom.page.find("h4[data-id]").text(),i)),"insurance"!==r.dom.seosection?(i=webmd.url.setParam("city",a.loc.city,i),i=webmd.url.setParam("state",a.loc.state,i),i=webmd.url.setParam("zip",a.loc.zip,i),i=webmd.url.setParam("lat",a.loc.lat,i),i=webmd.url.setParam("lon",a.loc.lon,i)):(i=webmd.url.deleteParam("state",window.location.href),i=webmd.url.deleteParam("plantype",i)),r.dom.page.find(".filter input:not([type=submit])").each(function(a){"undefined"!=typeof this.name&&"plantype"!==this.name?i=webmd.url.setParam(this.name,$(this).is(":checked")?$(this).is(":checked"):"",i):"plantype"===this.name&&$(this).is(":checked")&&(i=webmd.url.setParam(this.name,"undefined"!=typeof webmd.url.getParam("plantype",i)?webmd.url.getParam("plantype",i)+","+$(this).val():$(this).val(),i))}),r.dom.page.find(".filter select").each(function(){"undefined"!=typeof this.name&&(i=webmd.url.setParam(this.name,$(this).val(),i))}),i=webmd.url.deleteParam("pagenumber",i),$.each(webmd.url.getParams(i),function(a,b){b.toString().length<1&&(i=webmd.url.deleteParam(a,i))}),wmdTrack(r.metric+"srch_sub"),window.location=i})}else{$(window).on("resize.responsive",function(){webmd.useragent.isThin()&&!r.tablet?(webmd.debug("Change to Thin",r.dom.section),r.tablet=!0,"landing"===r.dom.pagetype&&("seo"===r.dom.section?r.formatColumns(r.dom.page.find(".top-specialties ul:visible:not(.alpha-wheel ul)"),2):"doctor"!==r.dom.section&&r.formatColumns(r.dom.page.find(".city_container_rdr .city_list ul"),4))):!webmd.useragent.isThin()&&r.tablet&&(webmd.debug("Change to Core",r.dom.section),r.tablet=!1,"landing"===r.dom.pagetype&&("seo"===r.dom.section?r.formatColumns(r.dom.page.find(".top-specialties ul:visible:not(.alpha-wheel ul)"),3):"doctor"!==r.dom.section&&r.formatColumns(r.dom.page.find(".city_container_rdr .city_list ul"),5))),"doctor"!==r.dom.section&&"seo"!==r.dom.section||"profile"===r.dom.pagetype&&"practice"===r.dom.subsection&&$("#s4").css({"margin-top":"-"+(r.dom.page.find(".about").innerHeight()+17)+"px"})}),p=!1,q={classType:"experienceTips",position:{corner:{target:"top",tooltip:"left"},adjust:{x:20,y:-3}},show:{when:{event:"mouseover click"}}},r.tablet&&(p=!0),r.dom.page.find(".profile .profile-content .conditions .subheader i").webmdTooltip($.extend(q,{content:{prerender:!0,button:p,text:m}})),r.dom.page.find(".profile .profile-content .procedures .subheader i").webmdTooltip($.extend(q,{content:{prerender:!0,button:p,text:n}}));var v=function(){r.dom.page.find(".results .result .sponsor-logo p span").webmdTooltip($.extend(q,{content:{prerender:!0,button:p,text:o}}))},w=setInterval(function(){v(),r.dom.page.find(".results .result .sponsor-logo p span").length&&clearInterval(w)},1e3)}},getIds:function(a,b){webmd.debug("=/=/= PhysicianDirectory: Get IDs for Metrics",a,b);var c,d=this,e=null;return a&&(c="results"===d.dom.pagetype?"undefined"!=typeof a.closest(".result[data-provid]").data("provid")?a.closest(".result[data-provid]"):a:d.dom.page.find("[data-provid]"),e=b+"_",e+=c.data("provid"),c.data("sponid")&&(e+="-",e+=c.data("sponid"))),e},cacheElems:function(){webmd.debug("=/=/= PhysicianDirectory: Cache elements");var a=this,b=webmd.url.clear();if(a.dom={drSrch:$("#pdSearch"),phSrch:$("#phSearch"),hpSrch:$("#hsSearch"),inSrch:$("#inSearch"),geoSrch:$("#pdGeolocation, .geo_form, #loc, .ins-form .state"),filters:$("form.filters"),page:$("#chrome, #middleContent_fmt"),cookie:webmd.cookie.getJson(a.cookieId,{scramble:!0})},b.indexOf("/syn/")>-1&&(a.dom.syn=!0,a.ratings.disable(a)),document.domain.indexOf("medscape")>-1&&(a.dom.medscape=!0,$(".pd-header .pd-nav a").each(function(){this.href=this.href.replace("home","")}),$(".pd-header .pd-nav").show(),a.ratings.disable(a)),b.indexOf("/pharmacy/")>-1?(a.dom.section="pharmacy",a.metric="ph"):b.indexOf("/find-a-pharmacy")>-1?(a.dom.section="seo",a.dom.seosection="pharmacy",a.metric="lcl","seo"===a.dom.section&&a.updateCookie("form",{})):b.indexOf("/hospital/")>-1?(a.dom.section="hospital",a.metric="hp"):b.indexOf("/find-a-hospital")>-1?(a.dom.section="seo",a.dom.seosection="hospital",a.metric="lcl","seo"===a.dom.section&&a.updateCookie("form",{})):b.indexOf("/insurance/")>-1?(a.dom.section="insurance",a.metric="in"):b.indexOf("/find-health-insurance")>-1?(a.dom.section="seo",a.dom.seosection="insurance",a.metric="in","seo"===a.dom.section&&a.updateCookie("form",{})):b.indexOf("/find-a-doctor")>-1?(a.dom.section="seo",a.dom.seosection="doctor",a.metric="lcl","seo"===a.dom.section&&a.updateCookie("form",{})):b.indexOf("/practice/")>-1?(a.dom.section="doctor",a.dom.subsection="practice",a.metric="pd-pr"):b.indexOf("/specialties")>-1?(a.dom.section="doctor",a.dom.subsection="glossary"):a.dom.section="doctor",b.indexOf("/results")>-1||b.indexOf("/find-health-insurance/")>-1&&b.split("/find-health-insurance/")[1].split("/").length>1)a.dom.pagetype="results",a.dom.cur="results",a.dom.results=b.slice(b.indexOf(".com/")+4),b.indexOf("/find-health-insurance/")>-1&&(a.dom.seo="state");else if((b.indexOf("/doctor/")>-1||b.indexOf("/practice/")>-1)&&b.indexOf("/home")!==b.length-5)a.dom.pagetype="profile",b.indexOf("-directions")>-1?a.dom.cur="directions":b.indexOf("-appointments")>-1?a.dom.cur="appointments":b.indexOf("-conditions-procedures")>-1?a.dom.cur="experience":b.indexOf("-ratings")>-1?a.dom.cur="ratings":b.indexOf("-insurance")>-1?a.dom.cur="insurance":a.dom.cur="overview";else if(b.indexOf("/pharmacy/")>-1&&b.indexOf("/home")!==b.length-5)a.dom.pagetype="profile",a.dom.cur="directions";else if(b.indexOf("/hospital/")>-1&&b.indexOf("/home")!==b.length-5)a.dom.pagetype="profile",b.indexOf("-directions")>-1?a.dom.cur="directions":b.indexOf("-physicians")>-1?a.dom.cur="physicians":a.dom.cur="overview";else if(b.indexOf("/insurance/")>-1)a.dom.pagetype="profile",a.dom.cur="ratings";else if(b.indexOf("/find-a-doctor")>-1)if(b.split(".com/")[1].split("/").length<4)switch(a.dom.pagetype="landing",a.dom.cur="landing",b.split(".com/")[1].split("/").length){case 1:a.dom.seo="landing";break;case 2:a.dom.seo="specialty";break;case 3:a.dom.seo="state";break;case 4:a.dom.seo="city"}else switch(a.dom.pagetype="results",a.dom.cur="results",b.split(".com/")[1].split("/").length){case 4:a.dom.seo="physician";break;case 5:a.dom.seo="refined"}else if(b.indexOf("/find-a-hospital")>-1||b.indexOf("/find-a-pharmacy")>-1)if(b.split(".com/")[1].split("/").length<3)switch(a.dom.pagetype="landing",a.dom.cur="landing",b.split(".com/")[1].split("/").length){case 1:a.dom.seo="state";break;case 2:a.dom.seo="city"}else switch(a.dom.pagetype="results",a.dom.cur="results",b.split(".com/")[1].split("/").length){case 3:b.indexOf("/find-a-hospital")>-1?a.dom.seo="hospital":b.indexOf("/find-a-pharmacy")>-1&&(a.dom.seo="pharmacy");break;case 4:a.dom.seo="refined"}else a.dom.pagetype="landing",a.dom.cur="landing",b.indexOf("/find-health-insurance")>-1&&(a.dom.seo="landing"),a.dom.cookie.form={},a.updateCookie("form",{});"seo"===a.dom.section&&"insurance"!==a.dom.seosection&&(a.dom.cookie.form||(a.dom.cookie.form={}),$.each(a.dom.cookie.form,function(b,c){$.inArray(b,["city","state","zip","lat","lon"])===-1&&(a.dom.cookie.form[b]="")})),a.dom.prev=a.getPrev(),a.dom.page.find(".physician_directory_ctr, .directory").addClass(a.dom.section),a.dom.query=a.updateQueryFormat(webmd.url.getParams()),!a.dom.query.city&&!a.dom.query.zip&&a.dom.cookie&&a.dom.cookie.form&&"insurance"!==a.dom.seosection&&(a.dom.query=$.extend(a.dom.cookie.form,a.dom.query)),webmd.debug("=-=-= DOM: ",a.dom)},checkCookie:function(){webmd.debug("=/=/= PhysicianDirectory: Check Cookie");var b=this,c=b.dom.cookie.geo||{};(c.city.length>0||c.zip.length>0)&&(webmd.debug("=/=/= PhysicianDirectory: Update Location from Cookie",c),a.update({city:c.city,state:c.state,zip:c.zip,lat:c.lat,lon:c.lon,s:c.s}))},checkTypeahead:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory: Check Typeahead",a);var d,e=this,f=!1;if($(".typeahead a").each(function(){d=$(this),a.toLowerCase().replace(/\*/g,"")===d.text().toLowerCase()&&(b&&b.preventDefault(),f=!0,e.followTypeahead(d))}),!f&&c)return c()},distance:function(){var b=this;webmd.debug("=/=/= PhysicianDirectory: Distance","profile"===b.dom.pagetype,b.dom.cookie.d),"profile"===b.dom.pagetype&&b.dom.cookie.d&&b.dom.cookie.d[webmd.url.clear().split("/")[4].replace("-"+b.dom.cur,"")]&&(webmd.debug("=/=/= PhysicianDirectory: Distance"),b.dom.page.find("span.miles").html(b.dom.cookie.d[webmd.url.clear().split("/")[4].replace("-"+b.dom.cur,"")]),b.dom.page.find("span.zip").html(a.loc.zip||a.loc.city+", "+a.loc.state),b.dom.page.find("span.miles").closest("li").show())},distanceSlider:function(){webmd.debug("=/=/= PhysicianDirectory: Distance Slider",this.dom.page.find(".distance").val());var a=this,b=function(b,c,d){var e=a.dom.page.find(".filters .ui-slider-handle"),f=e.closest("fieldset").find("p:first");c||(c=a.dom.page.find(".filters .ui-slider-handle").attr("style")?a.dom.page.find(".filters .ui-slider-handle").attr("style").replace("left: ","").replace(";",""):"10%"),5e3===b?(b="any",e.closest("div").css("background-image","none")):(e.closest("div").css("background-image","-webkit-gradient(linear, left top, right top, color-stop(0%,#ee5600), color-stop("+c+",#ee5600), color-stop("+c+",#f9f9f9), color-stop(100%,#f9f9f9))"),e.closest("div").css("background-image","-webkit-linear-gradient(left, #ee5600 0%, #ee5600 "+c+", #f9f9f9 "+c+", #f9f9f9 100%)"),e.closest("div").css("background-image","-moz-linear-gradient(left, #ee5600 0%, #ee5600 "+c+", #f9f9f9 "+c+", #f9f9f9 100%)"),e.closest("div").css("background-image","-o-linear-gradient(left, #ee5600 0%, #ee5600 "+c+", #f9f9f9 "+c+", #f9f9f9 100%)"),e.closest("div").css("background-image","linear-gradient(to right, #ee5600 0%, #ee5600 "+c+", #f9f9f9 "+c+", #f9f9f9 100%)")),f.find(".miles").html(b),1===b?f.html(f.html().replace("miles<","mile<")):f.html(f.html().replace("mile<","miles<")),d||(a.dom.cookie.form.distance=b,a.dom.page.find(".distance").val(b))},c={min:1,max:250,step:1,value:25,slide:function(a,c){b(c.value,null,!0)}};"25"!==a.dom.page.find(".distance").val()?c.value=Number(a.dom.page.find(".distance").val()):webmd.url.getParam("distance")&&("any"===webmd.url.getParam("distance")?c.value=250:isNaN(webmd.url.getParam("distance"))?c.value=25:c.value=Number(webmd.url.getParam("distance"))),a.dom.page.find(".slider").length>0&&a.dom.page.find(".slider").slider(c),25!==c.value&&b(c.value),a.dom.page.find(".slider").on("slidechange",function(c,d){d.value!==Number(a.dom.cookie.form.distance)&&(b(d.value),a.dom.page.find(".distance").val(d.value),a.filter(a.dom.page.find(".distance[type=hidden]"),c,d.value))})},filter:function(b,c,d){webmd.debug("=/=/= PhysicianDirectory: Filter",b,this.dom.cookie.form);var e,f,g,h,i,j,k=this,l=["years","sd","cond","proc","hp","h","ht","plantype"],m={distance:"srch-dist",newpat:"srch-anp",years:"srch-yp",gender:"srch-g",sd:"srch-spec",cond:"srch-cond",proc:"srch-proc",hp:"srch-ins",h:"srch-ha",medicare:"srch-mcare",medicaid:"srch-mcaid",open24:"srch-24",hclinic:"srch-hc",ht:"srch-ht",plantype:"srch-typ",accreditation:"srch-acred"};c.preventDefault(),k.mobile&&l.push("distance"),"seo"===k.dom.section&&webmd.url.clear().split(".com/")[1].split("/").length>3&&(i=webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "),j=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[2].replace(/-/g," "))),webmd.object.exists("dom.cookie.form",k)||webmd.object.set("dom.cookie.form",{},k),(webmd.url.getParam("sg",b.attr("href"))||k.mobile&&"sd"===b.attr("name"))&&(k.dom.cookie.form.sd="",!k.dom.cookie.form.tname&&webmd.url.getParam("tname")&&(k.dom.cookie.form.tname=webmd.url.getParam("tname")),!k.dom.cookie.form.tname||k.dom.cookie.form.ln!==k.dom.cookie.form.tname&&k.dom.cookie.form.ln!==k.dom.cookie.form.tname[0]||(k.dom.cookie.form.ln="",k.dom.cookie.form.tname="")),b.attr("href")&&$.each(webmd.url.getParams(b.attr("href")),function(a,b){k.dom.cookie.form[a]=b,m[a]&&!f&&(e=a,f=m[e])}),b.attr("name")&&"slidechange"!==c.type&&("h"!==b.attr("name")||""===k.dom.cookie.form.h||k.mobile?k.dom.cookie.form[b.attr("name")]=b.attr("value"):k.dom.cookie.form.h+=","+$(".h").val(),m[b.attr("name")]&&!f&&(e=b.attr("name"),f=m[e])),"checkbox"!==b.attr("type")&&"hidden"!==b.attr("type")||(h=b.val(),"checkbox"===b.attr("type")&&(h=b.attr("checked")?b.val()||"true":""),k.dom.cookie.form[b.attr("name")]=h,m[b.attr("name")]&&(f=m[b.attr("name")],"gender"===b.attr("name")&&(f+="female"===b.val()?"f":"m"),b.attr("checked")||"slidechange"===c.type||(f+="_unck"),"slidechange"===c.type&&d&&(f+="_"+d))),k.mobile&&"gender"===b.attr("name")&&(f+=b.val().toLowerCase()),k.updateCookie("form",k.dom.cookie.form),"checkbox"===b.attr("type")?(g="seo"===k.dom.section&&"insurance"!==k.dom.seosection?"doctor"===k.dom.seosection?k.updateSearchQuery("/results",!0):k.updateSearchQuery("/"+k.dom.seosection+"/results",!0):window.location.href,"h"===e&&webmd.url.getParam("h")&&(""===h?h=webmd.url.getParam("h").replace(b.val(),""):h+=","+webmd.url.getParam("h")),"gender"===e&&(h=1===k.dom.page.find(":checkbox[name=gender]:checked").length?k.dom.page.find(":checkbox[name=gender]:checked").val():""),"plantype"===e&&webmd.url.getParam("plantype")&&(""===h?(h=decodeURIComponent(webmd.url.getParam("plantype").replace(b.val(),"")),0===h.indexOf(",")&&(h=h.substring(1)),h.lastIndexOf(",")===h.length-1&&(h=h.substring(0,h.length-1)),h=h.replace(/,,/g,",")):h+=","+webmd.url.getParam("plantype")),g=webmd.url.deleteParam("loc",webmd.url.deleteParam("pagenumber",g)),g=webmd.url.setParam(e,h,g).replace("%2C",",")):g=b.attr("name")?"seo"===k.dom.section&&"insurance"!==k.dom.seosection?"doctor"===k.dom.seosection?k.updateSearchQuery("/results",!0):k.updateSearchQuery("/"+k.dom.seosection+"/results",!0):k.updateSearchQuery(k.dom.results||"/results",!0):"seo"!==k.dom.section||e?k.updateSearchQuery(b,!0):b.attr("href"),"undefined"!=typeof f&&($.inArray(e,l)>-1&&(h=k.dom.cookie.form[e].toString(),"distance"===e&&"5000"===h&&(h="any"),h.length>0&&(f+="_"+h)),f=k.metric+"-"+f,k.mobile?wmdPageLink(f):wmdTrack(f)),"seo"===k.dom.section&&(g=k.updateSearchQuery(g,!1,"seoLoc")),"insurance"!==k.dom.section&&"insurance"!==k.dom.seosection||(g=webmd.url.deleteParam("state",webmd.url.deleteParam("type",g))),k.mobile||(window.location.href=g)},followTypeahead:function(a){webmd.debug("=/=/= PhysicianDirectory: Follow Typeahead",a);var b=this;(a.closest("ul").hasClass("specialty")||a.closest("ul").hasClass("condition")||a.closest("ul").hasClass("procedure"))&&(b.setFormData(),webmd.object.exists("dom.cookie.form",b)||webmd.object.set("dom.cookie.form",{},b),$.each(b.dom.cookie.form,function(a,c){$.inArray(a,["ln","city","state","zip","lat","lon"])===-1&&(b.dom.cookie.form[a]="")}),b.dom.cookie.form.ln=a.text(),b.dom.cookie.form.tname=a.text(),b.updateCookie("form",b.dom.cookie.form)),wmdTrack(webmd.metrics._getMetricsValue(a)),window.location.href=b.updateSearchQuery(a,"ta")},formatColumns:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory: Format Columns",a,b);var d=0,e=$("<ul/>"),f=$("<div/>"),g=a.find("li"),h=a.parent();c||(c=0),$.each(g,function(a){d++,e.append($(this)),d!==Math.round(g.length/b)+c&&a!==g.length-1||(f.append(e),e=$("<ul/>"),d=0)}),h.html(f.html())},formatSpecialties:function(a,b){webmd.debug("=/=/= PhysicianDirectory: Format Specialties",a,b);var c=a.closest("ul:not(.sublist)"),d=a.closest("ul").closest("li");c.find(".clear").length<1&&(d.removeClass("selected").find("a:not(.selected a)").prepend("&lt; ").css({"padding-left":"20px","text-indent":"-11px"}),d.siblings("li").hide(),c.prepend(b),a.closest("ul.sublist").show(),a.find("ul.sublist").css("padding-left","20px").show()),c.find(".clear").closest("li").removeClass("hidden")},formatHospitals:function(){webmd.debug("=/=/= PhysicianDirectory: Format Hospitals");var a,b=this,c=0;if(b.dom.page.find(".h input:checked").each(function(a){$(this).closest("li").addClass("selected").removeClass("hidden"),0===a?$(this).closest("ul").prepend($(this).closest("li")):$(this).closest("ul").find("li:eq("+(a-1)+")").after($(this).closest("li"))}),b.dom.page.find(".h li.multi:visible").length>5&&(c=b.dom.page.find(".h li.multi:visible").length-5,b.dom.page.find(".h li.multi:not(.selected):visible").length>0))for(a=0;a<c;a++)b.dom.page.find(".h li.multi:not(.selected):visible:last").addClass("hidden")},getInsurance:function(a){webmd.debug("=/=/= PhysicianDirectory: Get Insurance List",a);var b=this,c="/api/directories/Service.svc/insurance?city={city}&state={state}&zip={zip}",d=$(".hp"),e='<option id="{id}" value="{value}">{name}</option>';(a.zip||a.city&&a.state)&&$.ajax({url:webmd.substitute(c,{city:a.city||"",state:a.state||"",zip:a.zip||""}),dataType:"json",success:function(a){if(webmd.debug("=/=/= PhysicianDirectory: Insurance",a),"ok"===a.status){a=a.data;var c=function(a){var b=[];return $.each(a,function(a,c){""!==this.ID&&b.push(this)}),b},f=c(a),g=function(a,c){var d=c.attr("class");$(c).each(function(){var c=$(this),f=0;c.removeAttr("disabled"),c.find("option").removeAttr("disabled").attr("selected","selected"),$.each(a,function(a,g){var h=$(webmd.substitute(e,{id:d+"-"+g.Id,cl:d,value:g.Id,name:g.Name}));"results"===b.dom.pagetype&&(g.ID===webmd.url.getParam(d)||webmd.url.getParam(d)&&$.inArray(g.ID,webmd.url.getParam(d).split(","))>-1||g.ID===b.dom.query[d]||b.dom.query[d]&&$.inArray(g.ID,b.dom.query[d].toString().split(","))>-1)?(h.attr("selected","selected"),c.append(h)):(f++,c.append(h))})})};d.length>0&&(d.find("option[id]").remove(),f.length>0?g(f,d):d.attr("disabled","disabled").closest("fieldset").hide())}},error:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory: ERROR: AJAX:",a,b,c)}})},getPrev:function(){webmd.debug("=/=/= PhysicianDirectory: Get and Set Prev Locations for sections");var a=this,b=a.dom.section,c={doctor:"/",pharmacy:"/pharmacy/home",hospital:"/hospital/home"};return a.dom.cookie&&a.dom.cookie.urls&&$.extend(c,a.dom.cookie.urls),"seo"===a.dom.section&&(b=a.dom.seosection),"results"===a.dom.pagetype&&a.dom.cookie&&(a.dom.cookie.results||(a.dom.cookie.results={}),a.dom.cookie.results[b]!==window.location.href&&a.setResults(window.location.href,b)),c[a.dom.section]!==window.location.href&&(c[a.dom.section]=window.location.href,a.updateCookie("urls",c)),c},getQueryString:function(){webmd.debug("=/=/= PhysicianDirectory: Get from Query String");var b=this;a.update({city:b.dom.query.city||"",state:b.dom.query.state||"",zip:b.dom.query.zip||"",lat:b.dom.query.lat||"",lon:b.dom.query.lon||"",s:webmd.object.exists("dom.cookie.geo.zip",b)&&b.dom.cookie.geo.zip===b.dom.query.zip?b.dom.cookie.geo.s:null})},highlightString:function(a,b){var c,d=function(a,b,c){var d,e,f;return f=b.toLowerCase().indexOf(c.toLowerCase()),d=a.toLowerCase().indexOf(c.toLowerCase()),a.indexOf("<strong>")>-1&&"<strong>".indexOf(c.toLowerCase())>-1&&(d=a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-2].length+9*(a.toLowerCase().split("</strong>").length-1)+a.toLowerCase().split("</strong>")[a.toLowerCase().split("</strong>").length-1].indexOf(c.toLowerCase())),e=d+c.length,(0===f||1===f)&&b.toString().indexOf("<strong>")<0?a.substring(0,d)+"<strong>"+a.substring(d,e)+"</strong>"+a.substring(e):a};return $(a.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){c=this,$(b.replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString())),this.indexOf("'/")>-1&&$(this.toString().replace(/[^a-zA-Z0-9]/g," ").split(" ")).each(function(){this.length>0&&(a=d(a,c,this.toString()),c=d(c,c,this.toString()))})})}),a},loadStates:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Load States list into:",b);var d='<option value="{abbreviation}"{selected}>{name}</option>',e=["DC","PR"];$.each(a.usStateList,function(){(c&&$.inArray(this.abbreviation,e)===-1||!c)&&(this.selected=this.abbreviation===a.loc.state?' selected="selected"':"",b.append(webmd.substitute(d,this)))})},loadDirectionForm:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Load Directions Form");var d=this,e=Number(webmd.url.getParam("pos"))-1||0;b.find("#ddState option").length<2&&d.loadStates(b.find("#ddState")),a.loc.zip&&""!==a.loc.zip&&b.find("#txtZip").val(a.loc.zip),a.loc.city&&""!==a.loc.city&&b.find("#txtCity").val(a.loc.city),a.loc.state&&""!==a.loc.state&&b.find("#ddState").val(a.loc.state.toUpperCase()),b.find("#txtAddress").val(""),c&&$("#practicelocations, #office-loc").val($("#practicelocations, #office-loc").find("option:eq("+e+")").val()).change()},medscapeModifications:function(){webmd.debug("MEDSCAPE MODIFICATIONS");var a=this;"profile"===a.dom.pagetype&&("pharmacy"===a.dom.section||"hospital"===a.dom.section&&"directions"===a.dom.cur)&&a.noRightRail(),a.dom.page.find(".profile-content a").each(function(){this.href.indexOf("/click?")>-1&&$(this).contents().unwrap()}),"results"!==a.dom.pagetype&&"profile"!==a.dom.pagetype||a.map.init(a),a.dom.page.find(".pd-nav .insurance").remove(),a.mobile&&a.dom.page.find(".pd-nav li").css({width:"50%","margin-left":0,"margin-right":0}).find("a:not(.collapsed a)").css("min-height","55px")},mobileModifications:function(){webmd.debug("=#=#= Mobile PhysicianDirectory: Modifications");var a=this,b="",c=1,d="Doctor";$('.nav_menus a[href*=".webmd.com"]:not(a[href*="doctor.webmd.com"])').each(function(){$(this).attr("href").indexOf("member")<0&&$(this).attr("href").indexOf(".m.")<0&&$(this).attr("href",$(this).attr("href").replace(".webmd.com",".m.webmd.com"))}),$("form.search_form").each(function(){this.action=webmd.url.addLifecycleAndEnv("//www.m.webmd.com")+this.action.split("webmd.com")[1]}),a.dom.page.find(".other-specialists a").each(function(){$(this).attr("onclick",$(this).attr("onclick").replace("-rr","")),$(this).attr("data-metrics-module")&&$(this).data("metrics-module",$(this).data("metrics-module").replace("-rr",""))}),a.iphone&&a.dom.page.find("a.map-trigger").each(function(){this.href.indexOf("maps.google")>-1&&(this.href=this.href.replace("maps.google","maps.apple"))}),"pharmacy"===a.dom.section?d="Pharmacy":"hospital"===a.dom.section&&(d="Hospital"),webmd.url.getParam("pagenumber")&&(c=Number(webmd.url.getParam("pagenumber")),c>10&&(c=1)),"landing"===a.dom.pagetype&&"seo"!==a.dom.section||(a.dom.page.find(".pd-nav.collapsed ."+a.dom.section+", .pd-nav.collapsed ."+a.dom.seosection).addClass("active"),a.dom.page.find(".pd-nav.collapsed").show()),"landing"===a.dom.pagetype?a.dom.page.find(".physician_directory_ctr .search-area").removeClass("collapsed"):"results"===a.dom.pagetype?(isNaN(a.dom.page.find(".results-list .results").data("num"))?a.dom.page.find(".pages, .filters .filter, .filters .modify").show():(a.dom.page.find(".pages, .filters .filter, .filters .modify").show(),"mapView"===webmd.url.getHash()?a.dom.page.find(".filters .list").show():a.dom.page.find(".filters .map, .filters .sort").show()),("doctor"===a.dom.section||"seo"===a.dom.section&&"doctor"===a.dom.seosection)&&a.dom.page.find(".search-area").after($("#ContentPane7 .content-section"))):"profile"===a.dom.pagetype&&(webmd.object.exists("map.locations[0].address[0]",a)?(b=a.iphone?"https://maps.apple":"https://maps.google",b+=".com/maps?q="+a.map.locations[0].address[0].replace("[br]",", ")+"@"+a.map.locations[0].lat+","+a.map.locations[0].lon):a.map.locations.length>1&&(b=a.iphone?"https://maps.apple":"https://maps.google",b+=".com/maps?q="+a.map.locations[1].address[0].replace("[br]",", ")+"@"+a.map.locations[1].lat+","+a.map.locations[1].lon),a.dom.page.find(".pages").html("&nbsp;"),a.dom.page.find(".filters li.map a").html("<i></i>Full Map").off("click").attr("href",b).closest(".map").addClass("right"),a.dom.page.find(".filters li.map a").off(),a.dom.page.find(".filters li.map a").on("click",function(a){window.location.href=this.href}),a.dom.page.find(".pages, .filters li.map").show(),webmd.object.exists("dom.cookie.results."+a.dom.section,a)&&a.dom.page.find(".filters .back").show()),a.setProps({})},ncqaPlans:function(a){webmd.debug("=/=/= PhysicianDirectory: NCQA",a);var b=this,c="/api/directories/service.svc/ncqasearch?pagesize=2000&out=name,id,plantype&retfacet=false&type={type}&state={state}",d=$(".namestart"),e='<option value="{name}">{name} - {plantype}</option>';a.state&&$.ajax({url:webmd.substitute(c,{state:a.state,type:a.type||""}),dataType:"json",success:function(a){if(webmd.debug("=/=/= PhysicianDirectory: NCQA Success",a),"ok"===a.status){a=a.data.Items;var c=function(a){var b=[];return $.each(a,function(a,c){""!==this.ID&&b.push(this)}),b},f=c(a),g=function(a,c){var d=c.attr("class");$(c).each(function(){var c=$(this);c.removeAttr("disabled"),c.find("option:not(:first-child)").remove(),$.each(a,function(a,f){var g=function(a){var b="";return $.each(a,function(a,c){a>0&&(b+=", "),b+=c}),b},h=g(f.PlanType),i=$(webmd.substitute(e,{plantype:h,name:f.Name}));"results"!==b.dom.pagetype&&"profile"!==b.dom.pagetype||f.Name!==webmd.url.getParam(d)&&f.Name!==b.dom.query[d]?c.append(i):(i.attr("selected","selected"),c.append(i))})})};g(f,d),b.setFormData()}},error:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory: ERROR: AJAX:",a,b,c)}})},noRightRail:function(){var a=this;a.rightRailRemoved=!0,a.mobile||$("#s3").addClass("norr")},populateForm:function(a){webmd.debug("=/=/= PhysicianDirectory: Populate Form from Type-Ahead",a);var b=this;b.dom.drSrch.find(".sd").length<1&&b.dom.drSrch.prepend('<input type="hidden" name="sd" class="sd" value="" />'),a.text().length>0&&(b.dom.page.find("#ln").val(a.text()),b.dom.page.find(".sd").val(a.data("spcid")),b.dom.page.find(".cond").val(a.data("cndid")),b.dom.page.find(".proc").val(a.data("prcid")),b.setFormData())},renderPhysicianTA:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Render Physician Type-Ahead",b,c);var d,e,f,g,h,i,j=this,k="",l=0,m=[],n=0,o=$("#ln"),p=o.closest("fieldset").outerWidth()-10,q=$('<div id="physiciantypeahead" class="typeahead specialty doctor condition procedure" />'),r=$('<ul id="doctor_list" class="doctor" />'),s=$('<ul id="specialty_list" class="specialty" />'),t=$('<ul id="condition_list" class="condition" />'),u=$('<ul id="procedure_list" class="procedure" />'),v={core:{doctor:'<li><a href="{syn}/doctor/{url}" data-metrics-module="'+j.metric+'-dr-ta" data-metrics-link="{i}">{name}{degree}; {specialty}{city},&nbsp;{state}</a></li>',specialty:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&sd={spcid}&tname={tname}" data-metrics-module="'+j.metric+'-sp-ta" data-metrics-link="{i}" data-spcid="{spcid}">{spc}</a></li>',condition:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&cond={cndid}&tname={tname}" data-metrics-module="'+j.metric+'-cd-ta" data-metrics-link="{h}" data-cndid="{cndid}">{cond}</a></li>',
procedure:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&proc={prcid}&tname={tname}" data-metrics-module="'+j.metric+'-pr-ta" data-metrics-link="{g}" data-prcid="{prcid}">{proc}</a></li>'},mobile:{doctor:'<li><a href="{syn}/doctor/{url}" data-metrics-module="'+j.metric+'-dr-ta" data-metrics-link="{i}">{name}{degree}</a></li>',specialty:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&sd={spcid}&tname={tname}" data-metrics-module="'+j.metric+'-sp-ta" data-metrics-link="{i}" data-spcid="{spcid}">{spc}</a></li>',condition:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&cond={cndid}&tname={tname}" data-metrics-module="'+j.metric+'-cd-ta" data-metrics-link="{h}" data-cndid="{cndid}">{cond}</a></li>',procedure:'<li><a href="{syn}/results?city='+a.loc.city+"&state="+a.loc.state+"&zip="+a.loc.zip+"&lat="+a.loc.lat+"&lon="+a.loc.lon+'&proc={prcid}&tname={tname}" data-metrics-module="'+j.metric+'-pr-ta" data-metrics-link="{g}" data-prcid="{prcid}">{proc}</a></li>'}},w=function(a){var b=(a.fname+"-"+a.lname+"-"+a.degree+"-"+a.prvid+"-overview?lid="+a.locationid).toLowerCase().replace(/ /g,"-").replace(/--/g,"-");return b};switch(d=j.mobile?v.mobile:v.core,$.each(c,function(a){$(this).length>0&&(n+=$(this).length,m.push($(this).length))}),m.length){case 4:e=2;break;case 3:e=3;break;case 2:e=5;break;default:e=10}n<11&&(e=10),j.ta={},$(c.doctor).each(function(a){if(a<e){var c=webmd.object(this);this.prvid=this.id,c.syn=j.dom.syn?"/syn":"",c.addClass="",c.i=a+1,c.url=w(this),c.mname?c.mname=c.mname+". ":c.mname="",c.degree?c.degree=", "+c.degree.replace(/ {1,};/g,", "):c.degree="",c.specialty&&(c.specialty.indexOf(";")>-1&&(c.specialty=c.specialty.replace(/;/g,", ")),c.specialty+="; "),c.fname=j.highlightString(c.fname,b),c.lname=j.highlightString(c.lname,b),c.name=c.fname+" "+c.mname+c.lname,f=webmd.substitute(d.doctor,c),r.append(f)}}),$(c.specialty).each(function(a){a<e&&(this.spc=this.text,this.spcid=this.id,this.syn=j.dom.syn?"/syn":"",this.addClass="",this.i=a+1,this.tname=encodeURI(this.spc).replace("&","%26").replace("/","%2F"),this.spc=j.highlightString(this.spc,b),g=webmd.substitute(d.specialty,this),s.append(g))}),$(c.condition).each(function(a){a<e&&(this.cond=this.text,this.cndid=this.id,this.syn=j.dom.syn?"/syn":"",this.addClass="",this.h=a+1,this.tname=encodeURI(this.cond).replace("&","%26").replace("/","%2F"),this.cond=j.highlightString(this.cond,b),h=webmd.substitute(d.condition,this),t.append(h))}),$(c.procedure).each(function(a){a<e&&(this.proc=this.text,this.prcid=this.id,this.syn=j.dom.syn?"/syn":"",this.addClass="",this.g=a+1,this.tname=encodeURI(this.proc).replace("&","%26").replace("/","%2F"),this.proc=j.highlightString(this.proc,b),i=webmd.substitute(d.procedure,this),u.append(i))}),c.doctor&&c.doctor.length>0&&(a.loc.city&&(k+=a.loc.city),a.loc.state&&(k+=", "+a.loc.state),a.loc.zip&&(k+=" "+a.loc.zip),k.length>0?q.append('<h3 class="doctor">Physicians near '+k+":</h3>"):q.append('<h3 class="doctor">Physicians:</h3>'),q.append(r)),c.specialty&&c.specialty.length>0&&(q.append('<h3 class="specialty">Specialties:</h3>'),q.append(s)),c.condition&&c.condition.length>0&&(q.append('<h3 class="condition">Conditions:</h3>'),q.append(t)),c.procedure&&c.procedure.length>0&&(q.append('<h3 class="procedure">Procedures:</h3>'),q.append(u)),j.mobile&&(p-=175),$("form #physiciantypeahead").length>0?$("form #physiciantypeahead").html(q.html()):(q.css({display:"none",width:p+"px",top:Number(o.position().top+o.outerHeight())+"px",left:o.position().left+"px"}),o.after(q)),$("form #physiciantypeahead .specialty a, form #physiciantypeahead .condition a, form #physiciantypeahead .procedure a").on("click",function(a){a.preventDefault(),j.populateForm($(this))}),c.doctor&&c.doctor.length<1?($("form #physiciantypeahead").find(".doctor").hide(),l++):$("form #physiciantypeahead").find(".doctor").show(),c.specialty&&c.specialty.length<1?($("form #physiciantypeahead").find(".specialty").hide(),l++):$("form #physiciantypeahead").find(".specialty").show(),c.condition&&c.condition.length<1?($("form #physiciantypeahead").find(".condition").hide(),l++):$("form #physiciantypeahead").find(".condition").show(),c.procedure&&c.procedure.length<1?($("form #physiciantypeahead").find(".procedure").hide(),l++):$("form #physiciantypeahead").find(".procedure").show(),$("form #physiciantypeahead:hidden").length>0&&$("form #physiciantypeahead").find("li").length>0?($("form #physiciantypeahead").slideDown("fast"),$("form #physiciantypeahead").closest("form").find("select").css("visibility","hidden")):$("form #physiciantypeahead").find("li").length<1&&o.trigger("clear-type-ahead"),j.mobile&&window.scrollTo(0,o.closest("form").position().top+15),o.trigger("results-rendered")},renderTypeAhead:function(b,c,d){webmd.debug("=/=/= PhysicianDirectory: Render Type-Ahead",b,c,d);var e,f,g=this,h=$("#name, #hname"),i=h.outerWidth()+150,j=$('<div id="'+d+'typeahead" class="typeahead '+d+'" />'),k=$('<ul id="'+d+'_list" />'),l="pharmacy"===d?"Pharmacies":"Hospitals",m={core:{pharmacy:'<li><a href="{syn}/pharmacy/{url}" data-metrics-module'+g.metric+'-ph-ta" data-metrics-link="{i}">{name}; {city},&nbsp;{state}</a></li>',hospital:'<li><a href="{syn}/hospital/{url}" data-metrics-module'+g.metric+'-hp-ta" data-metrics-link="{i}">{name}; {city},&nbsp;{state}</a></li>'},mobile:{pharmacy:'<li><a href="{syn}/pharmacy/{url}" data-metrics-module'+g.metric+'-ph-ta" data-metrics-link="{i}">{name}</a></li>',hospital:'<li><a href="{syn}/hospital/{url}" data-metrics-module'+g.metric+'-hp-ta" data-metrics-link="{i}">{name}</a></li>'}},n=function(a){var b="hospital"===d?"-overview":"",c=(a.name+"-"+a.city+"-"+a.state+"-"+a.id+b).toLowerCase().replace(/[^a-zA-Z0-9 \-]/g,"").replace(/ /g,"-").replace(/--/g,"-");return c};e=g.mobile?m.mobile:m.core,g.ta={},$(c[d]).each(function(a){var c=webmd.object(this);c.val&&c.id&&(c.syn=g.dom.syn?"/syn":"",c.i=a+1,c.name=c.val,c.url=n(c),c.name=g.highlightString(c.name,b),f=webmd.substitute(e[d],c),k.append(f))}),$("form #"+d+"typeahead").length>0?$("#"+d+"_list").html(k.html()):(g.mobile||(a.loc.city?j.append("<h3>"+l+" near "+a.loc.city+", "+a.loc.state+" "+a.loc.zip+":</h3>"):j.append("<h3>"+l+":</h3>")),j.append(k),g.mobile&&(i-=175),j.css({display:"none",width:i+"px",top:Number(h.position().top+h.outerHeight())+"px",left:h.position().left+"px"}),h.after(j)),$("form #"+d+"typeahead:hidden").length>0&&$("form #"+d+"typeahead").find("li").length>0?($("form #"+d+"typeahead").slideDown("fast"),$("form #"+d+"typeahead").closest("form").find("select").css("visibility","hidden")):$("form #"+d+"typeahead").find("li").length<1&&h.trigger("clear-type-ahead"),h.trigger("results-rendered")},resetTypeahead:function(){var b=this;"doctor"===b.dom.section?($("#physiciantypeahead h3.doctor").html("Physicians near "+a.loc.city+", "+a.loc.state+" "+a.loc.zip+":"),b.doct_typeahead.results.doctor=[],b.doct_typeahead.query="",b.spec_typeahead.results.specialty=[],b.spec_typeahead.query="",$("#physiciantypeahead").hide()):"pharmacy"===b.dom.section?($("#pharmacytypeahead h3").html("Pharmacies near "+a.loc.city+", "+a.loc.state+" "+a.loc.zip+":"),b.phar_typeahead.results.pharmacy=[],b.phar_typeahead.query=""):"hospital"===b.dom.section&&($("#hospitaltypeahead h3").html("Hospitals near "+a.loc.city+", "+a.loc.state+" "+a.loc.zip+":"),b.hosp_typeahead.results.hospital=[],b.hosp_typeahead.query="")},resizeColumns:function(a){webmd.debug("=/=/= PhysicianDirectory: Resize column heights",$("#s3").innerHeight(),$("#s4").height())},resizeImages:function(){var a,b=this,c=function(a){var b,c;$(a).closest("div").find(".featured").length>0?(b=$(a).closest("div").find(".featured"),c=b.height()+Number(b.css("margin-top").replace(/\D/g,""))+Number(b.css("margin-bottom").replace(/\D/g,"")),$(a).closest("div").find(".featured").width($(a).width())):c=$(a).height()<$(a).width()/2?$(a).width()/2:0,$(a).closest("div").height($(a).height()+c)};b.count||(b.count=0),b.dom.page.find("img.image").length<1&&b.count<10?(b.count++,setTimeout(function(){b.resizeImages()},500)):(b.count||(b.count=0),b.dom.page.find("img.image").each(function(d,e){if(a=$(e).closest("div"),$(e).width()>0&&$(e).height()>0&&a.width()>0&&a.height()>0)a.width()<Number(a.css("max-width").replace(/\D/g,""))&&a.width(Number(a.css("max-width").replace(/\D/g,""))),a.height()<Number(a.css("max-height").replace(/\D/g,""))&&a.height(Number(a.css("max-height").replace(/\D/g,""))),$(e).width()!==a.width()||$(e).height()!==a.height()?$(e).width()>$(e).height()||$(e).width()===$(e).height()?($(e).width(a.width()),$(e).width()>$(e).height()&&c(e)):$(e).width()<$(e).height()&&$(e).height(a.height()):$(e).height()<a.height()&&c(e);else if(b.count<10)return b.count++,setTimeout(function(){b.resizeImages()},500),!1}))},selectedFilter:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Set Selected Filter",b,c,this.metric);var d=this,e=window.location.href,f=d.metric+"-srch-uk_clear",g=c.closest("li"),h=$('<li><a href="javascript://" class="clear" /></li>');g.addClass("selected").removeClass("hidden"),"medicare"!==b&&"medicaid"!==b&&g.siblings("li:not(.view)").addClass("hidden"),"sd"===b||"sg"===b?(h.find("a").html("&lt; All Specialties"),f=d.metric+"-srch-spec_clear"):"cond"===b?(g.closest("ul").siblings("ul").hide(),h.find("a").html("&lt; All Conditions"),f=d.metric+"-srch-cond_clear"):"proc"===b?(g.closest("ul").siblings("ul").hide(),h.find("a").html("&lt; All Procedures"),f=d.metric+"-srch-proc_clear"):"hp"===b?(g.closest("ul").siblings("ul").hide(),h.find("a").html("&lt; All Insurance Plans"),f=d.metric+"-srch-ins_clear"):"years"===b?(h.find("a").html("&lt; All Years in Practice"),f=d.metric+"-srch-yp_clear"):"ht"===b?(h.find("a").html("&lt; All Hospital Types"),f=d.metric+"-srch-ht_clear"):h.find("a").html("&lt; All"),h.find("a").on("click",function(c){wmdTrack(f),"seo"!==d.dom.section||"sd"!==b&&"cond"!==b&&"proc"!==b?"seo"===d.dom.section&&"hp"===b&&(e=e.split("/")[0]+"/"+e.split("/")[1]+"/"+e.split("/")[2]+"/"+e.split("/")[3]+"/"+e.split("/")[4]+"/"+e.split("/")[5]+"/"+e.split("/")[6]+"/"+e.split("/")[7]):e=d.updateSearchQuery("/results",!0,"seoLoc"),"seo"===d.dom.section&&"hp"!==b&&(e=webmd.url.setParam("city",a.loc.city,e),e=webmd.url.setParam("state",a.loc.state,e),e=webmd.url.setParam("zip",a.loc.zip,e),e=webmd.url.setParam("lat",a.loc.lat,e),e=webmd.url.setParam("lon",a.loc.lon,e),"sd"!==b&&"sg"!==b||(e=webmd.url.deleteParam("sd",e),e=webmd.url.deleteParam("sg",e),e=webmd.url.deleteParam("tname",e))),e=webmd.url.deleteParam("pagenumber",e),window.location.href=webmd.url.deleteParam(b,e)}),"sd"===b||"sg"===b?"sg"===b&&webmd.url.getParam("sd")?webmd.debug("Don't highlight group"):d.formatSpecialties(g,h):"medicare"!==b&&"medicaid"!==b&&g.closest("ul").prepend(h)},setForm:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Set Form",b,c);var d,e,f=this,g=["sd","sg","cond","proc","hp","medicare","medicaid","years","ht","type","namestart"];b.so||f.dom.query.so||(b.so="",f.mobile&&"landing"!==f.dom.pagetype&&(f.dom.page.find('[name="so"]:disabled').length>0||0===f.dom.page.find('[name="so"][value="conditions"], [name="so"][value="procedures"]').length?"seo"===f.dom.section?b.so="name":b.so="distance":f.dom.page.find('[name="so"][value="conditions"]').length>0?b.so="conditions":f.dom.page.find('[name="so"][value="procedures"]').length>0&&(b.so="procedures"))),"doctor"===f.dom.section&&"insurance"===f.dom.cur&&("insurance"===f.dom.cur&&!f.mobile&&f.dom.page.find(".address-block").length>0?f.getInsurance({city:f.dom.page.find(".address-block").data("area").split(",")[0],state:f.dom.page.find(".address-block").data("area").split(",")[1],zip:f.dom.page.find(".address-block").data("zip")}):f.getInsurance(a.loc)),c||(b=$.extend(f.dom.query,b)),"seo"===f.dom.section&&"insurance"!==f.dom.seosection?(f.mobile&&(webmd.url.clear().split(".com/")[1].split("/").length>3&&("specialty"===webmd.url.clear().split(".com/")[1].split("/")[1]?f.dom.cookie.form.sd=f.dom.page.find("select[name=sd] option[data-slug="+webmd.url.clear().split(".com/")[1].split("/")[2]+"]").val():"condition"===webmd.url.clear().split(".com/")[1].split("/")[1]?f.dom.cookie.form.cond=f.dom.page.find("select[name=cond] option[data-slug="+webmd.url.clear().split(".com/")[1].split("/")[2]+"]").val():"procedure"===webmd.url.clear().split(".com/")[1].split("/")[1]&&(f.dom.cookie.form.proc=f.dom.page.find("select[name=proc] option[data-slug="+webmd.url.clear().split(".com/")[1].split("/")[2]+"]").val())),webmd.url.clear().split(".com/")[1].split("/").length>5&&(f.dom.cookie.form.hp=f.dom.page.find("option[data-slug="+webmd.url.clear().split(".com/")[1].split("/")[5]+"]").val())),f.updateCookie("form",f.dom.cookie.form),f.dom.page.find(":input[type!=radio]").each(function(){"undefined"!=typeof f.dom.cookie.form[$(this).attr("name")]&&$(this).val(f.dom.cookie.form[$(this).attr("name")])})):!c&&"seo"===f.dom.section&&webmd.url.clear().split(".com/")[1].split("/").length>1&&webmd.url.clear().split(".com/")[1].split("/")[1].length>0&&(f.dom.syn&&"undefined"!=typeof webmd.url.clear().split(".com/")[1].split("/")[2]&&webmd.url.clear().split(".com/")[1].split("/")[2].length>0?f.dom.cookie.form.type=webmd.url.clear().split(".com/")[1].split("/")[2]:f.dom.syn||(f.dom.cookie.form.type=webmd.url.clear().split(".com/")[1].split("/")[1]),f.dom.page.find("select[name=type]").val(f.dom.cookie.form.type)),f.dom.page.find(":input").each(function(){var a=$(this).attr("name");"undefined"!=typeof b[a]&&"distance"!==a&&("loc"===a||"pagesize"===a||"string"!=typeof b[a]||(""===$(this).val()||null===$(this).val()||$(this).val()===$(this).attr("placeholder")||""!==b[a]&&null!==b[a])&&""===b[a]||("radio"!==$(this).attr("type")&&"checkbox"!==$(this).attr("type")?b[a].indexOf(",")>-1&&"h"===$(this).attr("class")?$(this).val(b[a].split(",")):$(this).val(b[a].replace(/\*/g,"")):$(this).val()===b[a]||b[a].indexOf(",")>-1&&$.inArray($(this).val(),b[a].split(","))>-1?($(this).attr("checked","checked").closest("li").addClass("selected"),"distance"===a&&$(this).closest("label").addClass("selected")):"gender"===a&&""===b[a]||"distance"===a&&"25"===$(this).val()||"years"===a&&""===$(this).val()||($(this).removeAttr("checked").closest("li").removeClass("selected"),"distance"===a&&$(this).closest("label").removeClass("selected"))))}),f.setFormData(),"seo"===f.dom.section&&webmd.url.clear().split(".com/")[1].split("/").length>3&&(d=webmd.url.clear().split(".com/")[1].split("/")[3].replace(/-/g," "),e=a._getStateAbbreviation(webmd.url.clear().split(".com/")[1].split("/")[2].replace(/-/g," "))),f.mobile||f.dom.page.find(".filters a:not(.clear, .clearall, .view)").each(function(){var a=$(this),b=a.text().replace(" "+$(this).find("span").text(),"").toLowerCase().replace(/[^a-zA-Z0-9 \-]/g,"").replace(/ /g,"-").replace(/--/g,"-").replace(/--/g,"-");$.each(webmd.url.getParams(a.attr("href")),function(b,c){$.inArray(b,g)>-1&&c.toString()===webmd.url.getParam(b)&&("sg"===b&&a.closest(".sublist").length>0?webmd.debug("Don't highlight sublist with group id"):f.selectedFilter(b,a)),"seo"===f.dom.section&&f.dom.page.find("h4").data("key")===b&&f.dom.page.find("h4").data("id").toString()===c.toString()&&f.selectedFilter(b,a)}),"seo"===f.dom.section&&$.each(webmd.url.clear().split("/"),function(c,d){if(8===c&&b===d)f.selectedFilter("hp",a),f.dom.cookie.form.hp=a.data("id");else if(5===c)switch(webmd.url.clear().split("/")[4]){case"specialty":"undefined"==typeof a.closest("ul").attr("class")&&(b===d?(f.selectedFilter("sd",a),f.dom.cookie.form.sd=webmd.url.getParam("sd",a.attr("href")),f.dom.cookie.form.tname=webmd.url.getParam("tname",a.attr("href"))):"undefined"!=typeof webmd.url.getParam("sd",a.attr("href"))&&"undefined"!=typeof f.dom.page.find("h4[data-id]").data("id")&&Number(webmd.url.getParam("sd",a.attr("href")))===Number(f.dom.page.find("h4[data-id]").data("id"))&&(f.selectedFilter("sd",a),f.dom.cookie.form.sd=Number(f.dom.page.find("h4[data-id]").data("id")),f.dom.cookie.form.tname=f.dom.page.find("h4[data-id]").text()));break;case"condition":"cond"===a.closest("ul").attr("class")&&(b===d?(f.selectedFilter("cond",a),f.dom.cookie.form.cond=webmd.url.getParam("cond",a.attr("href"))):"undefined"!=typeof webmd.url.getParam("cond",a.attr("href"))&&"undefined"!=typeof Number(f.dom.page.find("h4[data-id]").data("id"))&&Number(webmd.url.getParam("cond",a.attr("href")))===Number(f.dom.page.find("h4[data-id]").data("id"))&&(f.selectedFilter("cond",a),f.dom.cookie.form.cond=Number(f.dom.page.find("h4[data-id]").data("id"))));break;case"procedure":"proc"===a.closest("ul").attr("class")&&(b===d?(f.selectedFilter("proc",a),f.dom.cookie.form.proc=webmd.url.getParam("proc",a.attr("href"))):"undefined"!=typeof webmd.url.getParam("proc",a.attr("href"))&&"undefined"!=typeof Number(f.dom.page.find("h4[data-id]").data("id"))&&Number(webmd.url.getParam("proc",a.attr("href")))===Number(f.dom.page.find("h4[data-id]").data("id"))&&(f.selectedFilter("proc",a),f.dom.cookie.form.proc=f.dom.page.find("h4[data-id]").data("id")))}}),a.closest("ul").hasClass("hp")&&"seo"===f.dom.section||("seo"===f.dom.section?a.attr("href",f.updateSearchQuery(a.attr("href"),!0,"seoLoc")):a.attr("href",f.updateSearchQuery(a.attr("href"),!0,!0)))}),f.dom.page.find(".filters ul").each(function(){$(this).find(".view").length>0&&$(this).find(".hidden").length<1&&$(this).find(".view").hide()}),"doctor"!==f.dom.section||"results"!==f.dom.pagetype||f.mobile||f.formatHospitals(),f.mobile||"results"!==f.dom.pagetype||f.addTags(),"insurance"!==f.dom.section&&"insurance"!==f.dom.seosection||f.dom.page.find(".namestart option").length<2&&f.ncqaPlans({state:f.dom.page.find(".state").val()||a.loc.state,type:f.dom.page.find(".type").val()})},setFormData:function(){webmd.debug("=/=/= PhysicianDirectory: Set Form Cookie Data");var a=this,b={},c=["ln","tname","sd","cond","proc","sg","cd","hp","h","city","state","zip","lat","lon","open24","name","hname","ht","gender","distance","years","newpat","medicare","medicaid","so","type","namestart","state"];a.dom.page.find(":input").each(function(){"radio"!==$(this).attr("type")&&"checkbox"!==$(this).attr("type")&&$.inArray($(this).attr("name"),c)>-1?b[$(this).attr("name")]=$(this).val():"radio"!==$(this).attr("type")&&"checkbox"!==$(this).attr("type")||"checked"!==$(this).attr("checked")?"checkbox"!==$(this).attr("type")||b[$(this).attr("name")]||(b[$(this).attr("name")]=!1):b[$(this).attr("name")]&&"so"!==$(this).attr("name")&&"distance"!==$(this).attr("name")?b[$(this).attr("name")]+=","+$(this).val():b[$(this).attr("name")]=$(this).val()}),b.gender&&b.gender.indexOf(",")>-1&&($.inArray("male",b.gender.split(","))>-1&&$.inArray("female",b.gender.split(","))>-1?b.gender="":b.gender=b.gender.split(",")[0]),"insurance"!==a.dom.section&&"insurance"!==a.dom.seosection||b.namestart&&!(b.namestart.length<1)||(b.namestart=a.dom.query.namestart),a.setProps(b),a.updateCookie("form",b)},setProps:function(b){webmd.debug("=/=/= PhysicianDirectory: Set Omniture Props",b);var c,d,e,f=this,g="pd-pr"===f.metric?"pd_":f.metric+"_",h=function(a){return a.replace(/[\_\-]/g," ")};if("undefined"!=typeof s_md&&("results"===f.dom.pagetype&&("doctor"===f.dom.section||"seo"===f.dom.section&&"doctor"===f.dom.seosection?(b.ln?g+=h(b.ln):b.tname&&(g+=h(b.tname)),"true"===webmd.url.getParam("cf")&&(f.dom.page.find(".results .result").length<1?s_md.contextData["wb.pdcf"]="0":s_md.contextData["wb.pdcf"]="1")):"hospital"===f.dom.section||"seo"===f.dom.section&&"hospital"===f.dom.seosection?b.hname&&(g+=h(b.hname)):("pharmacy"===f.dom.section||"seo"===f.dom.section&&"pharmacy"===f.dom.seosection)&&b.name&&(g+=h(b.name)),g.length>4&&(g+="-"+(a.loc.zip||a.loc.city+","+a.loc.state),s_md.prop10=g)),"profile"===f.dom.pagetype&&(e=f.dom.page.find("[data-area]").data("area")||"missing",d=f.dom.page.find(".header h1").text()||"missing",f.mobile&&(d=f.dom.page.find(".profile-gen h2").text()||"missing"),"doctor"===f.dom.section&&"practice"!==f.dom.subsection&&(c="pdprfdr",e=f.dom.page.find("[data-provid]").data("provid")||"missing"),"practice"===f.dom.subsection&&(c="pdprfpr",e=f.dom.page.find("[data-pracid]").data("pracid")||"missing"),"hospital"===f.dom.section&&(c="pdprfhp"),"pharmacy"===f.dom.section&&(c="pdprfph"),"insurance"===f.dom.section&&(c="pdprfin",e=f.dom.page.find("[data-planid]").data("planid")||"missing"),s_md.contextData["wb.dpgstem"]=f.setPageNameVariable(c,d,e)),f.dom.cookie.icd&&(s_md.contextData["wb.icd"]=f.dom.cookie.icd),f.load)){if(s_md.prop10.length>0&&webmd.debug("===== Search keyword:",g,s_md.prop10),f.dom.page.find(".book-appt[data-provid]").length>0&&(s_md.contextData["wb.pdpvid"]=f.getProvIds(f.dom.page.find(".book-appt[data-provid]"))),f.dom.page.find(".featured .result[data-provid]:not([data-sponid])").length>0&&(s_md.contextData["wb.pdfeat"]=f.getProvIds(f.dom.page.find(".featured .result[data-provid]:not([data-sponid])"))),f.dom.page.find(".results-page > .results > ul .result[data-provid][data-sponid], .results-list > .results > .result[data-provid][data-sponid]").length>0&&(s_md.contextData["wb.pdspon"]=f.getProvIds(f.dom.page.find(".results-page > .results > ul .result[data-provid][data-sponid], .results-list > .results > .result[data-provid][data-sponid]"))),f.load=!1,webmd.debug("=/=/= PhysicianDirectory - Search provider ids:",s_md.contextData["wb.pdpvid"]),webmd.debug("=====> PAGEVIEW <=====",s_md.contextData),wmdPageview(s_pagename),f.dom.page.find(".featured .result[data-provid][data-sponid]").length>0){var i="pd",j=i+"-feat-s-imp",k=f.dom.page.find(".featured .result[data-provid][data-sponid]"),l=f.getProvIdsAsArray(k),m=f.dom.page.find("[data-provid][data-sponid]").data("sponid");webmd.debug("Module Impression Call to track Featured Sponsored Providers loads up in the Search Results Page",s_md.contextData),wmdPageLink(j,{contextData:{"wb.pdfesp":f.getProvIds(k),"wb.pddoc":i+"_"+l.join("_"),"wb.icd":j+"_"+l.join(":")+"-"+m}})}f.dom.cookie.icd&&(f.dom.cookie.icd=null,f.updateCookie("icd",null))}},setPageNameVariable:function(a,b,c){var d,e,f=this,g=function(a){for("doctor"===f.dom.section&&(a=a.split(",")[0],a.indexOf(".")>-1&&(a=a.substring(a.indexOf(".")+2))),a=a.replace(/[^a-zA-Z0-9 \-]/g,""),a=a.replace(/ /g,"-");a.indexOf("--")>-1;)a=a.replace(/--/g,"-");return a.toLowerCase()};return isNaN(c)&&(c=c.replace(/,/g," "),c=g(c)),e=g(b),d=a+"_"+e+" ["+c+"]"},getProvIds:function(a){var b=null;return a.length>0&&(b="",a.each(function(a,c){a>0&&(b+="|"),b+="p-"+$(c).data("provid")})),b},getProvIdsAsArray:function(a){var b=[];return a.length>0&&a.each(function(a,c){b.push($(c).data("provid"))}),b},setPagination:function(a){webmd.debug("=/=/= PhysicianDirectory: Set Pagination Hash",a),$(".results-list_footer .pagination a").each(function(){this.href=webmd.url.setHash(a,this.href)})},setResults:function(a,b){var c=this;b||(b=c.dom.section),c.dom.cookie.results[b]=a,c.updateCookie("results",c.dom.cookie.results)},specialtyDisplay:function(a){webmd.debug("=/=/= HospitalDirectory: Display for Specialties on Physician Directory Profile Page",a);var b,c=this,d=1;a||(webmd.url.getHash().length>0&&c.dom.page.find("."+webmd.url.getHash().split("_")[0]).length>0?(a=webmd.url.getHash(),"next"!==a.split("_")[1]&&"prev"!==a.split("_")[1]||(a=a.split("_")[0])):a=$(c.dom.page.find("section.specialty")[0]).data("specialty")),a.indexOf("_")>-1&&(d="next"===a.split("_")[1]?Number($(c.dom.page.find("section.specialty."+a.split("_")[0]+" ul.pag-"+a.split("_")[0]+" a.on")).data("page"))+1:"prev"===a.split("_")[1]?Number($(c.dom.page.find("section.specialty."+a.split("_")[0]+" ul.pag-"+a.split("_")[0]+" a.on")).data("page"))-1:Number(a.split("_")[1]),a=a.split("_")[0]),b=d>1?a+"_"+d:a,"undefined"!=typeof a&&(webmd.url.getHash()!==b&&(window.location.href=webmd.url.setHash("#"+b,window.location.href)),c.dom.page.find("#"+a+", section.specialty."+a+', .specialties a[href="#'+a+'"]').hasClass("active")||(c.dom.page.find("section.specialty.active, .specialties a.active").removeClass("active"),c.dom.page.find("#"+a+", section.specialty."+a+', .specialties a[href="#'+a+'"]').addClass("active"),c.dom.page.find(".specialties").val(a)),c.specialtyPagination(a,d))},specialtyPagination:function(a,b){webmd.debug("=/=/= HospitalDirectory: Pagination",a,b);var c,d,e=this,f=e.dom.page.find("section.specialty."+a),g=f.find("ul:not(.pag-"+a+")"),h=f.find("ul.pag-"+a+" a").length,i=g.length,j=1,k=i<10?i:10;(b>i||isNaN(b))&&(b=1,window.location.href=webmd.url.setHash("#"+a,window.location.href)),c=20*b-19,d=20*b,b>6&&(j=b-5,k=b+4),b>i-5&&(j=i-9,k=i),b===k&&(d=g.find("a").length),g.each(function(a){b!==a+1?$(this).is(":visible")&&$(this).hide():$(this).show()}),f.find("ul.pag-"+a+" a").each(function(a){b!==a?$(this).removeClass("on"):$(this).addClass("on"),0===a&&1===b||a===h-1&&b===h-2?$(this).addClass("off"):$(this).removeClass("off"),0!==a&&a!==h-1&&(a>=j&&a<=k?$(this).removeClass("hidden"):$(this).addClass("hidden"))}),f.find(".hospital-footer .pages .start").html(c),f.find(".hospital-footer .pages .end").html(d)},stripUnderscores:function(a){return a.length>0&&("_"===a.charAt(0)&&(a=a.substring(1)),"_"===a.charAt(a.length-1)&&(a=a.substring(0,a.length-1)),a=a.replace("_",",")),a},synModifications:function(){webmd.debug("SYNDICATION MODIFICATIONS");var a,b=this;"profile"===b.dom.pagetype&&("pharmacy"===b.dom.section||"hospital"===b.dom.section&&"directions"===b.dom.cur)&&b.noRightRail(),b.dom.page.find(".book, .renew, .msg, .results .connect-services").show(),b.dom.page.find("[data-service]").each(function(){"docasap"===$(this).data("service")&&$(this).remove()}),"results"!==b.dom.pagetype&&"profile"!==b.dom.pagetype||b.map.init(b),b.dom.page.find("a").each(function(){this.href.indexOf("www.webmd.com")>-1||this.href.indexOf("webmd.com")<0||this.href.indexOf("/click?")>-1||this.href.indexOf("maps.")>-1||this.href.indexOf("connect.")>-1||this.href&&this.href.indexOf("/syn/")<0&&this.href.toString()!==window.location.toString()+"#"&&this.href.indexOf("javascript")<0&&this.href.indexOf("tel:")<0&&(a=this.href.split(".com")[1]?this.href.split(".com")[1]:"/home","/"===a&&(a="/home"),this.href="/syn"+a)}),b.dom.page.find("form").each(function(){this.action&&this.action.indexOf("/syn/")<0&&(a=this.action.split(".com")[1]?this.action.split(".com")[1]:"/home","/"===a&&(a="/home"),this.action="/syn"+a)}),b.mobile&&$("body").css("padding-top","0")},toggleMapView:function(a){var b=this;b.dom.page.find(".results-area .featured, .results:not(.directory), .results-map").toggle(),b.mobile&&b.dom.page.find(".pagination").toggle(),$("#thirdCol_area .detail-map").toggle(),"view-map"===a?(wmdPageLink(b.metric+"-map-view"),window.location.href=webmd.url.setHash("mapView"),b.setPagination("mapView"),b.setResults(window.location.href),b.dom.page.find(".filters .list").show(),b.dom.page.find(".filters .map, .alpha-wheel").hide(),!b.map.el.cwmap&&$(".cwmap").length>0&&b.map.buildMap("cwmap",b)):(wmdPageLink(b.metric+"-list-view"),window.location.href=webmd.url.setHash("listView"),b.setPagination(""),b.dom.page.find(".filters .map, .alpha-wheel").show(),b.dom.page.find(".filters .list").hide(),b.setResults(window.location.href),!b.map.el.rlMap&&$("#rlMap").length>0&&b.map.buildMap("rlMap",b))},updateCookie:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Update Cookie",b,c);var d=this,e=Number((new Date).getFullYear())+10;(webmd.object.exists("loc.zip",a)&&a.loc.zip.length>0||webmd.object.exists("loc.city",a)&&a.loc.city.length>0)&&(d.dom.cookie[b]=c,webmd.cookie.setJson(d.cookieId,d.dom.cookie,{scramble:!0,domain:webmd.url.getSLD(),expires:new Date("January 1, "+e+" 00:00:00")})),webmd.debug("End update cookie")},updateQueryFormat:function(a){return $.each(a,function(b,c){"object"==typeof c&&(a[b]=c[0].toString()),"specialty"!==b||a.sd||(a.sd=c[0].toString()),"tname"!==b||a.ln||(a.ln=c[0].toString()),"distance"===b&&""===c[0]&&(a.distance=25)}),a},updateSearchQuery:function(a,b,c){c||webmd.debug("=/=/= PhysicianDirectory: Update Link Query Params",a,b);var d=this,e="string"==typeof a?a:a.attr("href"),f=webmd.url.getParams(e),g=["ln","sd","sg","cond","proc","tname"],h=["city","state","zip","lat","lon"];return!d.dom.cookie.form||"seoLoc"===c&&e.indexOf("?")===-1||($.each(d.dom.cookie.form,function(a,c){"ln"!==a||c!==d.dom.page.find("[name=ln]").attr("placeholder")&&c!==d.dom.cookie.form.tname||(c=""),null!==c&&c!==!1&&void 0!==c&&"undefined"!==c||(c=""),$.inArray(a,g)!==-1||b?!f[a]&&b&&"pagenumber"!==a&&("ta"!==b||$.inArray(a,h)!==-1||"landing"===d.dom.pagetype&&"hp"===a||(e=webmd.url.deleteParam(a,e)),e=""===c||"ln"===a&&d.dom.cookie.form.tname&&(c===d.dom.cookie.form.tname||c===d.dom.cookie.form.tname[0])?webmd.url.deleteParam(a,e):webmd.url.setParam(a,c,e)):f[a]||(e=""===c?webmd.url.deleteParam(a,e):webmd.url.setParam(a,c,e))}),"insurance"!==d.dom.section&&"insurance"!==d.dom.seosection||(e=webmd.url.deleteParam("city",e),e=webmd.url.deleteParam("zip",e),e=webmd.url.deleteParam("lat",e),e=webmd.url.deleteParam("lon",e))),e.replace("undefined","")},validateDoctorForm:function(b,c){webmd.debug("=/=/= PhysicianDirectory: Validate Doctor Form",b,b.find("[name=ln]").val(),this.mobile);var d,e,f=this;return f.locationChange?(webmd.debug("Location is being changed."),!1):($("#physiciantypeahead a").each(function(){d=this.href,$.each(a.loc,function(a,b){d=webmd.url.setParam(a,b,d)}),this.href=d}),(b.find("[name=ln]").val()===b.find("[name=ln]").attr("placeholder")||b.find("[name=ln]").val().length<1&&!f.mobile)&&(b.find("[name=ln]").val(""),b.find("[name=sd]").val("")),b.find("[name=ln]").val().length>2&&$("#physiciantypeahead").length<1?($("#ln").trigger("type-ahead"),f.stop=!1,$("#ln").on("results-rendered",function(){f.stop||($(this).trigger("clear-type-ahead"),b.submit(),f.stop=!0)}),!1):b.find("[name=ln]").val().length>0&&(e=/^[\w '.,()\-\&\/]+$/,!e.test(b.find("[name=ln]").val()))?(a.error(b.find("[name=ln]"),"This field can only contain letters, numbers, spaces and select special characters."),!1):""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?f.mobile&&("doctor"===f.dom.section||"seo"===f.dom.section||b.find(".modify").is(":visible"))||!f.mobile?f.checkTypeahead($("#ln").val(),c,function(){return(f.mobile&&b.find(".modify").is(":visible")||!f.mobile)&&(b.find(".filter :input").val(""),$.each(f.dom.cookie.form,function(a,b){$.inArray(a,["ln","city","state","zip","lat","lon"])===-1&&(f.dom.cookie.form[a]="")})),f.dom.cookie.form.ln=b.find("[name=ln]").val(),f.setForm(f.dom.cookie.form),f.setFormData(),!0}):(b.find("[name=ln]").val()===f.dom.query.tname&&b.find("[name=ln]").val(""),f.dom.cookie.form.ln=b.find("[name=ln]").val(),f.setForm(f.dom.cookie.form),f.setFormData(),!0):(webmd.object.exists("loc.city",a)&&""!==a.loc.city&&b.find("[name=city]").val(a.loc.city||""),webmd.object.exists("loc.state",a)&&""!==a.loc.state&&b.find("[name=state]").val(a.loc.state||""),webmd.object.exists("loc.zip",a)&&""!==a.loc.zip&&b.find("[name=zip]").val(a.loc.zip||""),""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?((f.mobile&&b.find(".modify").is(":visible")||!f.mobile)&&(b.find(".filter :input").val(""),$.each(f.dom.cookie.form,function(a,b){$.inArray(a,["ln","city","state","zip","lat","lon"])===-1&&(f.dom.cookie.form[a]="")})),f.dom.cookie.form.ln=b.find("[name=ln]").val(),f.setForm(f.dom.cookie.form),f.setFormData(),!0):(f.dom.geoSrch.on("location-update",function(){b.submit()}),a.validateField(f.dom.geoSrch),!1)))},validateHospitalForm:function(b){webmd.debug("=/=/= HospitalDirectory: Validate Search Form",b);var c=this,d=b.find("[name=loc]").val(),e=/^[\w '#@()\-\&]+$/,f=function(){return(c.mobile&&b.find(".modify").is(":visible")||!c.mobile)&&(b.find(".filter :input").val(""),
$.each(c.dom.cookie.form,function(a,b){$.inArray(a,["hname","city","state","zip","lat","lon"])===-1&&(c.dom.cookie.form[a]="")})),c.dom.cookie.form.hname=b.find("[name=hname]").val(),c.setForm(c.dom.cookie.form),c.setFormData(),!0};return d.indexOf(", ")<0||d.split(", ")[0]!==a.loc.city||d.split(", ")[1].substring(0,d.split(", ")[1].lastIndexOf(" "))!==a.loc.state||Number(d.split(", ")[1].substring(d.split(", ")[1].lastIndexOf(" ")))!==Number(a.loc.zip)?(webmd.debug("UPDATE Location"),c.dom.geoSrch.on("location-update",function(){b.submit()}),a.validateField(c.dom.geoSrch),!1):(b.find("[name=hname]").val()===b.find("[name=hname]").attr("placeholder")&&b.find("[name=hname]").val(""),b.find("[name=hname]").val().length>0&&!e.test(b.find("[name=hname]").val())?(a.error(b.find("[name=hname]"),"Hospital name can only contain letters, numbers, spaces and select special characters."),!1):""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?f():(webmd.object.exists("loc.city",a)&&""!==a.loc.city&&b.find("[name=city]").val(a.loc.city),webmd.object.exists("loc.state",a)&&""!==a.loc.state&&b.find("[name=state]").val(a.loc.state),webmd.object.exists("loc.zip",a)&&""!==a.loc.zip&&b.find("[name=zip]").val(a.loc.zip),""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?f():(c.dom.geoSrch.on("location-update",function(){b.submit()}),a.validateField(c.dom.geoSrch),!1)))},validateInsuranceForm:function(a){webmd.debug("=/=/= InsuranceDirectory: Validate Search Form",a);var b=this,c=decodeURIComponent(a.attr("action")),d=a.find("[name=state] :selected").text().toLowerCase().replace(/ /g,"-"),e=a.find("[name=type] :selected").val();return(b.mobile&&a.find(".modify").is(":visible")||!b.mobile)&&(a.find(".filter :input").val(""),$.each(b.dom.cookie.form,function(a,c){$.inArray(a,["type","state","namestart"])===-1&&(b.dom.cookie.form[a]="")})),b.dom.cookie.form.namestart=a.find("[name=namestart]").val(),b.dom.cookie.form.type=a.find("[name=type]").val(),b.dom.cookie.form.state=a.find("[name=state]").val(),b.setForm(b.dom.cookie.form),a.attr("action",webmd.substitute(c,{state:d,type:e})),b.dom.cookie.form.namestart.length>0&&a.attr("action",webmd.url.setParam("namestart",b.dom.cookie.form.namestart,a.attr("action"))),window.location=a.attr("action"),!1},validatePharmacyForm:function(b){webmd.debug("=/=/= PharmacyDirectory: Validate Search Form",b);var c=this,d=b.find("[name=loc]").val(),e=/^[\w '#@()\-\&]+$/,f=function(){return(c.mobile&&b.find(".modify").is(":visible")||!c.mobile)&&(b.find(".filter :input").val(""),$.each(c.dom.cookie.form,function(a,b){$.inArray(a,["name","city","state","zip","lat","lon"])===-1&&(c.dom.cookie.form[a]="")})),c.dom.cookie.form.name=b.find("[name=name]").val(),c.setForm(c.dom.cookie.form),!0};return d.indexOf(", ")<0||d.split(", ")[0]!==a.loc.city||d.split(", ")[1].substring(0,d.split(", ")[1].lastIndexOf(" "))!==a.loc.state||Number(d.split(", ")[1].substring(d.split(", ")[1].lastIndexOf(" ")))!==Number(a.loc.zip)?(webmd.debug("UPDATE Location"),c.dom.geoSrch.on("location-update",function(){b.submit()}),a.validateField(c.dom.geoSrch),!1):(b.find("[name=name]").val()===b.find("[name=name]").attr("placeholder")&&b.find("[name=name]").val(""),"np"===b.find("[name=open24]").val()?b.find("[name=open24]").val(""):"on"===b.find("[name=open24]").val()&&b.find("[name=open24]").val("true"),b.find("[name=name]").val().length>0&&!e.test(b.find("[name=name]").val())?(a.error(b.find("[name=name]"),"Pharmacy name can only contain letters, numbers, spaces and select special characters."),!1):""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?f():(webmd.object.exists("loc.city",a)&&""!==a.loc.city&&b.find("[name=city]").val(a.loc.city),webmd.object.exists("loc.state",a)&&""!==a.loc.state&&b.find("[name=state]").val(a.loc.state),webmd.object.exists("loc.zip",a)&&""!==a.loc.zip&&b.find("[name=zip]").val(a.loc.zip),""!==b.find("[name=zip]").val()||""!==b.find("[name=city]").val()&&""!==b.find("[name=state]").val()?f():(c.dom.geoSrch.on("location-update",function(){b.submit()}),a.validateField(c.dom.geoSrch),!1)))},validateVisitorForm:function(b){webmd.debug("=/=/= PhysicianDirectory: Validate Visitor Directions Form",b);var c,d=/^[\w ]+$/;if(!b.find("#txtAddress").val()||""===b.find("#txtAddress").val())return a.error(b.find("#txtAddress"),"Please enter an address or intersection."),!1;if(b.find("#txtZip").val()&&""!==b.find("#txtZip").val()){if(c=b.find("#txtZip").val(),isNaN(c)||5!==c.length)return a.error(b.find("#txtZip"),"Please enter a 5-digit numeric ZIP code."),!1}else{if(!b.find("#txtCity").val()||""===b.find("#txtCity").val())return b.find("#ddState").val()&&""!==b.find("#ddState").val()?(a.error(b.find("#txtCity"),"Please enter a city or ZIP code."),!1):(a.error(b.find("#txtCity"),"Please enter a city and state or a ZIP code."),!1);if(!d.test(b.find("#txtCity").val()))return a.error(b.find("#txtCity"),"City can only contain letters, numbers and spaces."),!1;if(!b.find("#ddState").val()||""===b.find("#ddState").val())return a.error(b.find("#ddState"),"Please select a state."),!1}return!0},viewToggle:function(a){var b=this,c="spec";a.closest("ul").hasClass("h")?c="ha":a.closest("ul").hasClass("hp")?c="ins":a.closest("ul").hasClass("proc")?c="proc":a.closest("ul").hasClass("cond")?c="cond":a.closest("ul").hasClass("ht")&&(c="ht"),a.closest("li").siblings(".hidden").length>0?(a.html("<em>-</em> View Less"),wmdPageLink(b.metric+"-srch-"+c+"_all")):(a.html("<em>+</em> View All"),wmdPageLink(b.metric+"-srch-"+c+"_less")),a.closest("li").siblings(".hidden, .showing").toggleClass("hidden showing")},ratings:{api:"/api/ratings/service/RatingsService.svc/",provid:"prov_",pracid:"prac_",route:{save:"SaveRating",get:"GetRatingBreakDownByCriteria?appName={appName}&primaryId={primaryId}",getUserRating:"GetUserReview?appName={appName}&primaryId={primaryId}&username={reguserid}"},data:[],userData:[],userRating:!1,cap:5,today:(new Date).getDate()+"-"+((new Date).getMonth()+1)+"-"+(new Date).getFullYear(),init:function(a){webmd.debug("=*=*= LHD Ratings: Initialize",a.dom.cookie.ratings);var b=this,c=webmd.url.getHash();b.provid+=a.dom.page.find(".provider").data("provid"),b.pracid+=a.dom.page.find(".practice").data("pracid"),("submit"!==c&&"rate"!==c||a.dom.medscape||a.dom.syn)&&(b.get(a,"provider",b.provid,!0),"ratings"===a.dom.cur&&b.get(a,"practice",b.pracid,!0)),"undefined"!=typeof reguserid&&(webmd.debug("=*=*= LHD Ratings: USER SIGNED IN"),"ratings"===a.dom.cur?b.getUserRating(a,[b.provid,b.pracid]):"overview"===a.dom.cur&&b.getUserRating(a,[b.provid])),a.dom.medscape||a.dom.syn||(a.dom.cookie.ratings?b.userRating=a.dom.cookie.ratings[b.provid]:"rate"!==c&&c.indexOf("-q")<0&&(!a.dom.cookie.tooltip||a.dom.cookie.tooltip!==b.today)&&b.toolTip(a)),b.$content=a.dom.page.find(".profile-content.ratings, .ratings .section-content"),webmd.debug("User Rating:",b.userRating,a.dom.cookie),b.userRating&&b.userRating.disable&&"undefined"==typeof reguserid?b.disable(a):(a.dom.medscape||a.dom.syn||(a.dom.page.find(".profile-gen .p-q1 > a, .rate-doctor, .star-rating > a:not(.more-info)").show(),b.$content.removeClass("disabled")),"ratings"===a.dom.cur&&("submit"===c&&"undefined"!=typeof reguserid?(webmd.debug("=*=*= LHD Ratings: AUTO-SUBMIT"),b.populateForm(a),b.editView(a),setTimeout(function(){b.$content.find("form").trigger("submit")},1e3)):("rate"===c||c.indexOf("-q")>-1)&&b.editView(a,!0)))},clearData:function(a,b){webmd.debug("=*=*= LHD Ratings: Clear Ratings Data",b);var c=a.dom.page.find(".ratings."+("provider"===b?"physician":"office"));c.find("input[type=hidden]").each(function(a,b){$($(b).closest(".rating")).attr("data-rating",0),$($(b).closest(".rating")).data("rating",0)}),"provider"===b&&(a.dom.page.find(".overall .rating").attr("data-rating",0),a.dom.page.find(".overall .rating").data("rating",0))},clearSection:function(a,b){webmd.debug("=*=*= LHD Ratings: Clear Ratings",b);var c,d=this,e=a.dom.page.find(".ratings."+("provider"===b?"physician":"office"));e.find("input[type=hidden]").each(function(b,c){$(c).val(0),$(c).closest(".rating").attr("data-rating",""),$(c).closest(".rating").data("rating",""),$(c).closest(".rating").find(".selected").removeClass("selected half"),"l-q1"===c.name&&(d.$content.hasClass("editing")?$(c).closest(".rating").find("a:not(.ui-slider-handle)").text("Rate"):$(c).closest(".rating").find("a:not(.ui-slider-handle)").text("Under 15 Minutes"),a.mobile||(a.dom.page.find(".slider").length<1&&d.slider(a),a.dom.medscape||a.dom.syn||a.dom.page.find(".slider").slider("value",0)),a.dom.page.find(".ratings.location .rating-count").text(""))}),"provider"===b&&(c=a.dom.page.find(".ratings form .p-q1 .rating input"),$(c).val(0),$(c).closest(".rating").attr("data-rating",""),$(c).closest(".rating").data("rating",""),$(c).closest(".rating").find(".selected").removeClass("selected half"))},clearView:function(a){webmd.debug("=*=*= LHD Ratings: Clear Edit View");window.location=webmd.url.clear()},confirmRating:function(a){webmd.debug("=*=*= LHD Ratings: Confirm Rating");var b=this,c=$('<section class="rating-confirm" />'),d=b.$content.find(".header .subheader").text().replace("'s Rating","").replace("Rate ","");a.dom.page.find(".rating-confirm").length<1&&(a.mobile?(d=b.$content.find("h4").text().replace("'s Rating","").replace("Rate ",""),c=$('<div class="section-content rating-confirm" />'),c.append("<h4>Thank You for Rating "+d+"</h4>")):c.append('<div class="header"><h3 class="subheader">Thank You for Rating '+d+"</h3></div>"),c.append('<p class="content">Your input will be included in '+d+"'s ratings.</p>"),c.append($('<a href="#confirm" class="orange-btn rating-confirm">OK</a>').on("click",function(b){b.preventDefault(),wmdPageLink(a.metric+"-rate_cfm"),a.ratings.clearView(a)})),a.mobile?(b.$content.addClass("rating-form").hide(),b.$content.after(c)):(b.$content.find("section").addClass("rating-form").hide(),b.$content.find("section").after(c))),wmdPageLink(a.metric+"-rate_scfm"),window.scrollTo(0,$(".rating-confirm").position().top-50)},disable:function(a,b){webmd.debug("=*=*= LHD Ratings: Disable",b);var c=this;a.dom.page.find(".profile-gen .p-q1 > a, .rate-doctor, .star-rating > a:not(.rating-count, .more-info)").hide(),this.noshow=!0,c.$content&&c.$content.addClass("disabled")},duplicateRating:function(a){webmd.debug("=*=*= LHD Ratings: Duplicate Rating");var b=this,c=$('<section class="rating-dupe" />'),d=b.$content.find(".header .subheader").text().replace("'s Rating","").replace("Rate ","");a.dom.page.find(".rating-dupe").length<1&&(a.mobile?(d=b.$content.find("h4").text().replace("'s Rating","").replace("Rate ",""),c=$('<div class="section-content rating-dupe" />'),c.append("<h4>We're Sorry</h4>")):c.append('<div class="header"><h3 class="subheader">We\'re Sorry</h3></div>'),c.append('<p class="content">You have already rated '+d+". You cannot submit multiple ratings for the same doctor.</p>"),c.append($('<a href="#dupe" class="orange-btn rating-dupe">OK</a>').on("click",function(b){b.preventDefault(),wmdPageLink(a.metric+"-rate_dup"),a.ratings.clearView(a)})),a.mobile?(b.$content.addClass("rating-form").hide(),b.$content.after(c)):(b.$content.find("section").addClass("rating-form").hide(),b.$content.find("section").after(c))),window.scrollTo(0,$(".rating-dupe").position().top-50)},edit:function(a,b){webmd.debug("=*=*= LHD Ratings: Edit",this.provid,this.pracid,b);var c=this,d=!1,e=!1,f={},g=webmd.url.getHash(),h={appName:"lhd",review:{PrimaryId:c.provid,UserName:"undefined"!=typeof reguserid?reguserid:"anon_"+(new Date).getTime(),DisplayName:"",IsAnonymous:!1,IsActive:!0}},i={appName:"lhd_practice",review:{PrimaryId:c.pracid,SecondaryId:c.provid,UserName:"undefined"!=typeof reguserid?reguserid:"anon_"+(new Date).getTime(),DisplayName:"",IsAnonymous:!1,IsActive:!0,RatingCriteria5:"1"}},j=function(){webmd.debug("Submit Ratings",h,i),webmd.debug("Provider Request:",h),$.ajax({url:c.api+c.route.save,type:"POST",contentType:"application/json",dataType:"json",data:webmd.json.stringify(h),success:function(b){webmd.debug("Provider:",b),a.dom.cookie.ratings[c.provid].disable=!0,a.dom.cookie.ratings[c.provid].submit=!1,a.updateCookie("ratings",a.dom.cookie.ratings),d?(webmd.debug("Practice Request:",i),$.ajax({url:c.api+c.route.save,type:"POST",contentType:"application/json",dataType:"json",data:webmd.json.stringify(i),success:function(b){webmd.debug("Practice:",b),c.confirmRating(a)},error:function(b,d,e){webmd.debug("ERROR:",b,d,e),c.confirmRating(a)}})):c.confirmRating(a)},error:function(b,d,e){webmd.debug("ERROR:",b,d,e),a.dom.cookie.ratings[c.provid].disable=!0,a.dom.cookie.ratings[c.provid].submit=!1,a.updateCookie("ratings",a.dom.cookie.ratings),c.duplicateRating(a)}})},k=function(b){f[c.provid]={submit:b,provData:h,pracData:i},f=webmd.object(a.dom.cookie.ratings,f),a.updateCookie("ratings",f)};$(b).find("input[type=submit]").attr("disabled","disabled"),$.each($(b).find("input[type=hidden], select"),function(a,b){b.name.indexOf("p-q1")>-1&&"0"===b.value?(webmd.debug("Required Error",b.name),e=!0):b.value>0&&("p-q1"===b.name&&$(b).closest("form").find(".error").remove(),b.name.indexOf("p-")>-1?h.review["RatingCriteria"+b.name.replace("p-q","")]=b.value:b.name.indexOf("l-")>-1&&("l-q0"===b.name&&(i.review.PrimaryId="prac_"+b.value),i.review["RatingCriteria"+b.name.replace("l-q","")]=b.value,d=!0))}),e&&"submit"===g?webmd.debug("ERROR"):e?e&&($(".p-q1").closest("div").find(".error").length<1&&$(".p-q1").closest("div").find(".subheader").append('<span class="error">Required</span>'),$(".overall.p-q1").siblings(".error").length<1&&a.dom.page.find(".editing .overall.p-q1").before('<p class="error">Please enter an overall rating to submit.</p>'),$(b).find("input[type=submit]").removeAttr("disabled"),window.scrollTo(0,a.dom.page.find(".editing").position().top-50)):(c.userData[c.provid]&&(h.review.UserReviewId=c.userData[c.provid].reviewId),c.userData[c.pracid]&&d&&(i.review.UserReviewId=c.userData[c.pracid].reviewId),"undefined"==typeof reguserid&&"undefined"!=typeof c.data[c.provid]&&!isNaN(Number(c.data[c.provid].count))&&c.data[c.provid].count>=c.cap?(k(!0),window.location=webmd.url.addLifecycleAndEnv("https://member.webmd.com/")+"?appid=43&returl="+encodeURIComponent(webmd.url.clear()+"#submit")):c.$content.hasClass("update")?webmd.overlay.confirm({text:"<h4>Update Rating?</h4><p>You have previously rated this physician. Your new rating will update your previous rating.</p>",ok:"UPDATE RATING",okSizeClass:"webmd-btn-l",width:a.mobile?"90%":"50%",callback:function(b){b?(wmdPageLink(a.metric+"-rate_upd"),k(!1),j()):(wmdPageLink(a.metric+"-rate_cnl"),c.clearView(a))}}):(k(!1),j()))},editView:function(a,b,c){if(webmd.debug("=*=*= LHD Ratings: Switch to Edit View",this.noshow,b,c),!this.noshow){var d,e=this,f=c||webmd.url.getHash(),g=e.$content.addClass("editing"),h=g.find(a.mobile?"h4":"h3"),i=e.$content.hasClass("update"),j="Rate "+h.text().replace("'s Rating","");b||(i?wmdPageLink(a.metric+"-rate_edit"):wmdPageLink(a.metric+"-rate_btn")),a.dom.page.find(".profile-gen .p-q1 > a, .rate-doctor, .star-rating > a").hide(),h.text(j),a.mobile?(g.find(".special > a").hide(),g.find(".special > div").show()):a.tablet?require([image_server_url+"/webmd/consumer_assets/site_images/physician_directory/jquery.ui.touch-punch.js"],function(){e.slider(a)}):e.slider(a),f&&"rate"!==f&&(d=g.find("."+f.split("-")[0]+"-"+f.split("-")[1]+" .rating"),d.find("input").val(f.split("-")[2]),d.find(".rating > i").each(function(a){e.selectedClass(a,f.split("-")[2],this)}),d.find(".description").text(e.getDesc(Number(f.split("-")[2])))),a.dom.cookie.ratings&&a.dom.cookie.ratings[e.provid]&&a.dom.cookie.ratings[e.provid].submit&&e.populateForm(a),e.selectStars(a,g),g.find(".rating").each(function(a,b){$(b).find("input").val()<1?$(b).find("i.selected").removeClass("selected"):$(b).find(".clear").length<1&&$(b).find(".your-rating").length<1?($(b).find("i:not(.icon-star):not(.icon-halfstar):last").after('<a href="javascript://" class="clear" title="Clear Rating"><span>X</span></a>'),$(b).find(".clear").on("click",function(a){$(this).closest(".rating").find(".description").text("Rate"),$(this).closest(".rating").find("i.selected").removeClass("selected"),$(this).closest(".rating").find("input").val(0),$(this).hide()})):$(b).find(".clear").show()}),g.find(".half").each(function(){$(this).find(".icon-halfstar").remove(),$(this).removeClass("half")}),g.find("form").on("submit",function(b){b.preventDefault(),e.edit(a,this)}),g.find("form .submit-rate").on("click",function(a){wmdPageLink($(this).data("metrics"))}),a.mobile&&window.scrollTo(0,g.closest("section").position().top)}},get:function(a,b,c,d){webmd.debug("=*=*= LHD Ratings: Get Ratings",b,c);var e=this,f="practice"===b?"lhd_practice":"lhd",g=webmd.substitute(e.route.get,{appName:f,primaryId:c});c||(c=a.dom.page.find(".provider").data("provid")),"practice"===b&&(g+="&secondaryId="+e.provid),$.ajax({url:e.api+g,dataType:"json",success:function(f){e.data[c]=e.process(f.data),e.render(a,b,e.data[c],c,d)},error:function(a,b,c){webmd.debug("ERROR:",a,b,c)}})},getDesc:function(a){switch(a){case 1:return"Poor";case 2:return"Fair";case 3:return"Good";case 4:return"Very Good";case 5:return"Excellent";default:return"Rate"}},getUserRating:function(a,b,c){webmd.debug("=*=*= LHD Ratings: Get User's Rating",b,reguserid);var d,e,f=this,g="lhd";"object"!=typeof b&&(b=[b]),$.each(b,function(b,c){g=c.indexOf("prac")>-1?"lhd_practice":"lhd",d=webmd.substitute(f.route.getUserRating,{appName:g,primaryId:c,reguserid:reguserid}),c.indexOf("prac")>-1&&(d+="&secondaryId="+f.provid),$.ajax({url:f.api+d,dataType:"json",success:function(b){webmd.debug("USER:",b),b.data?(f.userRating||(f.userRating={}),f.userData[c]=f.process(b.data,"user"),f.userRating[c]=f.process(b.data,"user"),f.renderUserRatings(a,f.userData[c])):c.indexOf("prac")>-1&&"submit"!==webmd.url.getHash()&&a.dom.page.find(".ratings.office input[type=hidden]").each(function(b,d){$(d).closest(".rating").find(".your-rating").remove(),"l-q1"===d.name&&(f.$content.hasClass("editing")?(f.clearSection(a,"practice"),$(d).closest(".rating").find("a:not(.ui-slider-handle)").text("Rate")):(c=Number($(d).closest(".rating").data("rating")),e=Math.round(c)+" Minutes",c<15?e="Under 15 Minutes":60===c?e="1 Hour":c>60&&(e="Over 1 Hour"),$(d).closest(".rating").find("a:not(.ui-slider-handle)").text(e)))})},error:function(a,b,c){webmd.debug("ERROR:",a,b,c)}})})},halfStars:function(a){webmd.debug("=*=*= LHD Ratings: Half Stars",a),a.dom.page.find(".half").each(function(a,b){$(b).find(".icon-halfstar").length<1&&$(b).find(".icon-star").after('<i class="icon-halfstar" />')})},populateForm:function(a){webmd.debug("=*=*= LHD Ratings: Populate Form",this.userRating);var b=this;"undefined"!=typeof b.userRating&&($.each(b.$content.find("form input[type=hidden]"),function(a,c){c.name.indexOf("p-")>-1&&"undefined"!=typeof b.userRating.provData?c.value=b.userRating.provData.review["RatingCriteria"+c.name.replace("p-q","")]:c.name.indexOf("l-")>-1&&"undefined"!=typeof b.userRating.pracData&&(c.value=b.userRating.pracData.review["RatingCriteria"+c.name.replace("l-q","")]),"undefined"===c.value&&(c.value="0")}),"undefined"!=typeof b.userRating.pracData&&webmd.object.exists("userRating.pracData.review.PrimaryId",b)&&b.$content.find("form select[name=l-q0]").val(b.userRating.pracData.review.PrimaryId.replace("prac_","")))},process:function(a,b){webmd.debug("=*=*= LHD Ratings: Process Ratings Data",a);var c=[];return a||(a={}),"user"!==b&&(c.count=0),$.each(a,function(a,d){"user"===b?a.indexOf("RatingCriteria")>-1?c[a.replace("RatingCriteria","")]=d:"UserReviewId"===a?c.reviewId=d:"PrimaryId"===a&&(c.type=d.indexOf("prac")>-1?"practice":"provider"):d.AverageScore>0&&(c[d.CriteriaId]=d.AverageScore,(d.PrimaryId.indexOf("prac_")>-1&&5===d.CriteriaId||d.PrimaryId.indexOf("prac_")===-1&&1===d.CriteriaId)&&(c.count=d.RatingCount))}),c},render:function(a,b,c,d,e){webmd.debug("=*=*= LHD Ratings: Render Ratings",b,d,c,e);var f,g,h,i=this;"undefined"!=typeof e&&e||i.clearSection(a,b),$.each(c,function(e,j){j&&(f="."+("practice"===b?"l":"p")+"-q"+e,a.dom.page.find(f+" .rating").attr("data-rating",j),a.dom.page.find(f+" .rating").data("rating",j),("ratings"!==a.dom.cur||"ratings"===a.dom.cur&&(!i.$content.hasClass("editing")||i.$content.hasClass("editing")&&i.userData[d]))&&a.dom.page.find(f+" .rating").each(function(a){$(this).find("i:not(a > i)").each(function(a){$(this).removeClass("half"),i.selectedClass(a,j,this)})}),".p-q1"===f&&(a.dom.page.find(".quick-tips "+f+" .rating").each(function(a){$(this).find("i:not(a > i)").each(function(a){$(this).removeClass("half"),i.selectedClass(a,j,this)})}),h=a.dom.page.find(f+" .rating").closest("div"),g=c.count+" Rating",c.count>1&&(g+="s"),h.find(".subheader").append('<br /><small class="rating-count">'+g+"</small>"),i.$content.hasClass("update")||h.find("a:not(.star, .clear)").text("Rate This Doctor"),h.find(".rating-count").length<1&&h.find("a:not(.star, .clear)").before('<span class="rating-count">'+g+"</span><br />"),a.mobile&&h.css("width","100%")),".l-q1"===f&&(g=Math.round(j)+" Minutes",j<15?g="Under 15 Minutes":60===j?g="1 Hour":j>60&&(g="Over 1 Hour"),a.dom.page.find(f+" .rating > a").text(g)))}),i.halfStars(a),c.length<1&&(i.clearSection(a,b),i.clearData(a,b),"provider"===b&&a.dom.page.find(".p-q1 .rating i.selected").removeClass("selected half"),"provider"===b&&"overview"===a.dom.cur&&(webmd.debug("ADD LINK FOR RATINGS",a.dom.page.find(".ratings.overall.p-q1 .subheader")),a.dom.page.find(".ratings.overall.p-q1 .subheader").append("<br />"),a.dom.page.find(".star-rating a:not(.star)").clone(!0).appendTo(a.dom.page.find(".ratings.overall.p-q1 .subheader"))))},renderUserRatings:function(a,b){webmd.debug("=*=*= LHD Ratings: Render User's Ratings",b);var c,d,e=this,f=b.type,g=!1;"practice"!==f&&f||a.dom.page.find(".ratings .office .rating").each(function(a,b){$(b).hasClass("special")&&$(b).find(".your-rating").siblings("br").remove(),$(b).find(".your-rating").remove()}),$.each(b,function(b,h){h&&(c="."+("practice"===f?"l":"p")+"-q"+b,a.dom.page.find(".ratings "+c+" .rating").each(function(b){".l-q1"===c?(d=h<15?"Under 15 Minutes":h>60?"Over 1 Hour":60===h?"1 Hour":h+" Minutes",$(this).find("br").length<1&&$(this).append("<br />"),$(this).append('<span class="your-rating">Your Selection: '+d+"</span>"),$(this).find("select").val(h),$(this).find('select [value="0"]').remove(),"undefined"!=typeof e.sliderElement&&e.sliderElement.slider("value",h)):($(this).append('<span class="your-rating">Your Rating: '+h+" Star"+(h>1?"s":"")+"</span>"),$(this).children("i").each(function(a){e.selectedClass(a,Number($(this).closest(".rating").data("rating")),this)})),"submit"!==webmd.url.getHash()&&$(this).find("input").val(h),"ratings"===a.dom.cur&&e.$content.hasClass("editing")&&$(this).children("i").each(function(a){e.selectedClass(a,h,this)})}),g=!0)}),g&&("provider"===f&&a.dom.page.find(".star-rating > a, .rate-doctor").text("Edit Rating"),e.$content.addClass("update"))},selectedClass:function(a,b,c){var d=0;a<Math.ceil(b)?(d=b-a,d<.75&&d>=.25?$(c).addClass("selected half"):d>=.75&&$(c).addClass("selected")):$(c).removeClass("selected half")},selectStars:function(a,b){var c,d=this;b.find(".rating").each(function(a,b){c=$(b).find("input").val(),$(b).find("i:not(.icon-star, .icon-halfstar)").each(function(a,b){d.selectedClass(a,c,b)})}),d.halfStars(a)},slider:function(a){webmd.debug("=*=*= LHD Ratings: Wait Time Slider");var b=this,c=function(c,d){var e,f=a.dom.page.find(".ratings .ui-slider-handle"),g=f.closest(".special-input").find(".description"),h=0;c<5?c=5:f.closest("li").find(".error").remove(),d||(d=a.dom.page.find(".ratings .ui-slider-handle").attr("style")?Number(a.dom.page.find(".ratings .ui-slider-handle").attr("style").replace("left: ","").replace("%;","")):h,d<h&&(a.dom.page.find(".ratings .ui-slider-handle").css("left",h+"%"),d=h),d+="%"),f.closest("div").css("background-image","-webkit-gradient(linear, left top, right top, color-stop(0%,#edc430), color-stop("+d+",#edc430), color-stop("+d+",#d7d7d7), color-stop(100%,#d7d7d7))"),f.closest("div").css("background-image","-webkit-linear-gradient(left, #edc430 0%, #edc430 "+d+", #f9f9f9 "+d+", #f9f9f9 100%)"),f.closest("div").css("background-image","-moz-linear-gradient(left, #edc430 0%, #edc430 "+d+", #f9f9f9 "+d+", #f9f9f9 100%)"),f.closest("div").css("background-image","-o-linear-gradient(left, #edc430 0%, #edc430 "+d+", #f9f9f9 "+d+", #f9f9f9 100%)"),f.closest("div").css("background-image","linear-gradient(to right, #edc430 0%, #edc430 "+d+", #f9f9f9 "+d+", #f9f9f9 100%)"),5===c?b.$content.hasClass("update")?(e="Under 15 Minutes",c=10):(e="Rate",c=0):e=10===c?"Under 15 Minutes":65===c?"Over 1 Hour":60===c?"1 Hour":c+" Minutes",g.text(e),0===c&&(c=""),f.closest(".rating").find("input").val(c)},d={min:5,max:65,step:5,value:5,slide:function(a,b){c(b.value,null,!0)}};a.dom.page.find(".slider").closest(".rating").find("input").val()>0&&(d.value=a.dom.page.find(".slider").closest(".rating").find("input").val()),a.dom.page.find(".slider").length>0&&(b.sliderElement=a.dom.page.find(".slider").slider(d),c(d.value)),a.dom.page.find(".slider").on("slidechange",function(a,b){c(b.value)})},toolTip:function(a){var b=this,c=function(b){var c=$(this).is(":visible"),d=a.tablet?"390px":"500px";c?$(this).animate({width:"1px"},b,function(){$(this).hide()}):($(this).css("width","1px").show(),$(this).animate({width:d},b,function(){$(this).css("overflow","visible")}))},d=$('<div class="rating-tip star-rating"><h4><span>Is this your provider?</span> <span>Submit a rating today.</span></h4><p>Click anywhere you see a star rating or the button below.</p><i class="arrow" /></div>');setTimeout(function(){b.userRating||(d.prepend(a.dom.page.find(".profile-gen .star-rating .rating, .profile-gen .star-rating .rating").clone()),d.find(".half").each(function(){$(this).find(".icon-halfstar").remove(),$(this).removeClass("half")}),d.find(".star").each(function(){this.href+="#rate"}),d.append(a.dom.page.find(".profile-gen .star-rating > a, .profile-gen .star-rating > a").clone().addClass("orange-btn")),d.find("a").on("click",function(c){"ratings"===a.dom.cur&&(c.preventDefault(),b.editView(a),a.mobile?webmd.overlay.close():a.dom.page.find(".profile-gen .star-rating .rating").webmdTooltip("hide"))}),a.mobile?webmd.overlay.open({width:"250px",html:d,onLoad:function(){$("#webmdHoverClose").text("X")}}):a.dom.page.find(".profile-gen .star-rating .rating").webmdTooltip({content:{text:d,button:!0},position:{corner:{target:"right",tooltip:"top"},adjust:{x:20,y:12},type:"absolute"},classType:"tooltipRating",show:{when:{event:"none"},effect:{type:c,length:1e3},ready:!0},hide:{when:{event:"none"},effect:{type:c,length:500},fixed:!0}}),a.updateCookie("tooltip",b.today))},1e3)}},map:{start:{},end:{},el:{},marks:{},markerLayer:{},points:{},locations:[],templates:{results:{hoverMultiTitle:'<div class="map-desc"><h4>{practice}</h4><p>{address}</p></div>',hoverMultiDesc:'<div class="map-desc"><p><a href="{url}" data-metrics-module="{metric}" data-metrics-link="{index}" title="View Full Profile"><strong>{name}</strong></a></p></div>',hoverDesc:'<div class="map-desc"><h4><a href="{url}" data-metrics-module="{metric}" data-metrics-link="{index}" title="View Full Profile">{name}</a></h4><p>{practice}{address}</p></div>',otherDesc:'<div class="map-desc"><h4><a href="{url}" data-metrics-module="{metric}" data-metrics-link="{index}" title="View Full Profile">{practice}</a></h4><p>{address}</p></div>'},profile:{hoverDesc:'<div class="map-desc"><h4><a href="{url}" data-metrics-module="{metric}" data-metrics-link="{index}" title="Get Directions">{practice}</a></h4><p>{address}</p></div>',otherDesc:'<div class="map-desc"><h4>{practice}</h4><p>{address}</p></div>',rrLoc:'<div class="rr-location-info"><h4><a href="{url2}" data-metrics-module="{metric}" data-metrics-link="{index}" class="link-header">{practice}</a></h4><p class="address">{address}</p><p class="telephone">{phone}</p><div class="dir-button"><a href="{url}" data-metrics-module="{metric}" data-metrics-link="d{index}" class="directions">Directions</a><a href="{url2}" data-metrics-module="{metric}" data-metric-link="o{index}" class="office-info">Office Information</a></div></div>'}},init:function(b){webmd.debug("=/=/= PhysicianDirectory - MAP: Initialize");var c,e=this;e.area=e.defineArea(b),c=function(){e.locations=e.getLocations(b),$(".cwmap").length>0&&e.buildMap("cwmap",d),$(".rrmap").length>0&&e.buildMap("rrmap",d),!b.mobile&&"directions"===b.dom.cur&&$(".cwmap").length>0&&b.loadDirectionForm(b.dom.page.find("#visitorAddress"),!0)},a.loc.lat||a.loc.lon?c():a._verify({success:function(d){a.loc={city:d.City,state:d.State,zip:d.PostalCode,lat:d.Latitude,lon:d.Longitude,s:d.QrlSourceId},b.updateCookie("geo",a.loc),c()}})},bindTooltips:function(a){webmd.debug("=/=/= PhysicianDirectory - MAP: Bind Tooltips: ",a),a.on("layeradd",function(a){a.layer.bindPopup(a.layer.feature.properties.html,{closeButton:!1}),a.layer.setIcon(L.icon(a.layer.feature.properties.icon))}),a.on("mouseover",function(a){a.layer.openPopup()})},buildMap:function(b,c,d){webmd.debug("=/=/= PhysicianDirectory - MAP: Build Map: ",b);var e,f=this,g=10;"undefined"==typeof L.mapbox.accessToken&&(L.mapbox.accessToken="pk.eyJ1Ijoid2VibWQiLCJhIjoidnRRSElFMCJ9.ur57klMqDUOs3ChcCZaqsA"),$("."+b).attr("id",b),e=L.mapbox.map(b,"webmd.i49og87k").setView([a.loc.lat,a.loc.lon],g),f.el[b]=e,d||(d=f.locations),f.setPins(c,e,d,b)},changeMarker:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory - MAP: Change marker",b,c);var d=this,e=d.locations;e[b];d.setPins(a,d.el.cwmap,e,"cwmap",b)},defineArea:function(b,c){webmd.debug("=/=/= PhysicianDirectory - MAP: Define Area");var d={city:"",state:"",zip:""};return(b||c)&&(c&&c.city&&c.state&&c.zip?d=c:b&&b.dom.page.find("[data-area]").data("area")?(d.city=$.trim(b.dom.page.find("[data-area]").data("area").split(",")[0]),d.state=$.trim(b.dom.page.find("[data-area]").data("area").split(",")[1])):b&&a.loc.city?(d.city=a.loc.city,d.state=a.loc.state,d.zip=a.loc.zip):webmd.debug("=/=/= PhysicianDirectory - MAP: ERROR: No area")),d},formatTime:function(a){webmd.debug("=/=/= PhysicianDirectory - MAP: Format Time: ",a);var b,c,d,e="";return a%60>30?a=a-a%60+60:a-=a%60,b=a/60,b>60&&(c=(b-b%60)/60,b%=60),c>24&&(d=(c-c%24)/24,c%=24),d>0&&(e+=d+" days",(c>0||b>0)&&(e+=", ")),c>0&&(e+=c+" hours",b>0&&(e+=", ")),b>0&&(e+=b+" minutes"),e},getDirections:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory - MAP: Get Directions: ",b,c,this);var d,e=this,f=function(a){var b="";return $.each(a,function(a,c){c.length>0&&(b.length>0&&(b+=", "),b+=c)}),b=encodeURI(b)},g=function(a){var b=[];return $.each(a,function(a){b.push({lat:this[1],lon:this[0]})}),b};c||(c=e.el.cwmap),d="https://api.tiles.mapbox.com/geocoding/v5/mapbox.places/"+f(b)+".json?access_token="+L.mapbox.accessToken,e.start=b,$.ajax({url:d,dataType:"json",success:function(b){e.start.lat=b.features[0].center[1],e.start.lon=b.features[0].center[0],e.start.geoAddress=b.features[0].place_name,d="https://api.tiles.mapbox.com/v4/directions/mapbox.driving/"+e.start.lon+","+e.start.lat+";"+e.end.lon+","+e.end.lat+".json?access_token="+L.mapbox.accessToken,$.ajax({url:d,dataType:"json",success:function(b){if(webmd.debug("=/=/= PhysicianDirectory - MAP: Driving Directions",b),b.routes&&b.routes.length>0){var d,f=[];f=g(b.routes[0].geometry.coordinates),d={color:"#0193ce",lineCap:"round",opacity:.75,weight:8},e.polyline||(e.polyline=L.polyline(f,d)),e.polyline.setLatLngs(f),e.polyline=e.polyline.addTo(c),e.setStartEndPins(a,c),e.writeTurnByTurnDirections(a,b.routes[0]),setTimeout(function(){c.fitBounds(e.polyline.getBounds(),{padding:[20,20]})},500)}},error:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory - MAP: ERROR: AJAX:",a,b,c);
}})},error:function(a,b,c){webmd.debug("=/=/= PhysicianDirectory - MAP: ERROR: AJAX:",a,b,c)}})},getLocations:function(b){webmd.debug("=/=/= PhysicianDirectory - MAP: Get Locations");var c,d,e=[],f=[],g=[];return f.push(webmd.object(a.loc,{area:!0})),b&&b.dom.page.find("[data-locations]").length>0?b.dom.page.find("[data-locations]").each(function(){c=$(this).data("locations"),$.each(c.split("|"),function(){this.length>0&&e.push(this)})}):b&&b.dom.page.find("[data-location]").length>0&&b.dom.page.find("[data-location]").each(function(){$(this).data("location").length>0&&(d=$(this).data("location"),"results"===b.dom.pagetype&&(d+="::"+$(this).closest("li").find("h2 a").attr("href")+"::"+$(this).find("span").html()),e.push(d))}),$.each(e,function(a){var c=this.toString().split("::"),d=$("#profile-nav .overview a").attr("href")||window.location.href,e="",h={lat:Number(c[0]),lon:Number(c[1]),address:[c[2]],practice:[c[3]],name:[c[4]&&c[4].length>0?c[4]:b.dom.page.find(".profile_general .header h1, .profile-gen .header h1, #profile-details h2").text()],url:[c[5]||d.replace("overview","directions")],num:[c[6]||0]};"doctor"!==b.dom.section&&"hospital"!==b.dom.section||"profile"!==b.dom.pagetype||(h.phone=[c[7]||""],h.url[0]=webmd.url.setParam("pos",a+1,h.url[0])),b.dom.syn&&(h.url[0]="/syn"+h.url[0]),e=h.lat+"-"+h.lon,isNaN(h.lat)||isNaN(h.lon)||"0-0"===e?webmd.debug("=/=/= PhysicianDirectory - MAP: Get Locations: ERROR - Invalid lat/lon values"):$.inArray(e,g)>-1&&f[$.inArray(e,g)+1].name?(f[$.inArray(e,g)+1].name.push(h.name[0]),f[$.inArray(e,g)+1].url.push(h.url[0]),f[$.inArray(e,g)+1].address.push(h.address[0]),f[$.inArray(e,g)+1].practice.push(h.practice[0])):(g.push(e),f.push(h))}),f},setPins:function(a,b,c,d,e){webmd.debug("=/=/= PhysicianDirectory - MAP: Set Pushpins",a,c);var f=this,g=0,h=a.metric+"-get-drct";"cwmap"===d?h=a.metric+"-srch-map":"pharmacy"===a.dom.section?h=a.metric+"-get-phrm":"hospital"===a.dom.section&&"results"===a.dom.pagetype&&(h=a.metric+"-get-hosp"),f.markerLayer[d]||(f.markerLayer[d]=L.mapbox.featureLayer().addTo(b)),e||(e=Number(webmd.url.getParam("pos"))||1),f.marks[d]={type:"FeatureCollection",features:[]},$.each(c,function(b){var c,i,j,k,l,m,n,o="",p=this,q=[Number(p.lat),Number(p.lon)],r=("c_"+q.toString().replace(/[().,]/g,"").replace(/ /g,"_").replace(/-/g,"n"),0),s={},t=!a.mobile&&"profile"===a.dom.pagetype&&!p.area&&"cwmap"===d,u=t&&e===b;p.url&&p.url.length>1&&t&&$.each(p.url,function(a,b){e===Number(webmd.url.getParam("pos",b))&&(n=Number(webmd.url.getParam("pos",b)),u=!0,$.each(p,function(b,c){"object"==typeof c&&(p[b]=[c[a]])}))}),p.area&&"cwmap"===d&&"directions"===a.dom.cur||(u||"rrmap"===d||"cwmap"===d&&a.mobile)&&(a.mobile||p.num&&0!==p.num&&"undefined"!==p.num[0]&&0!==p.num[0]||(p.num=""),u&&(f.end=p),p.area?(p.zip||(p.zip=""),o="<div class='map-desc map-area'><h4>"+p.city+", "+p.state+" "+p.zip+"</h4></div>",i=image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/area-icon-google.png"):i=image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/map-icon-google.png",a.mobile||p.area||(p.practice.length>1?(c="doctor"===a.dom.section||"seo"===a.dom.section?f.templates.results.hoverMultiDesc:f.templates[a.dom.pagetype].otherDesc,$.each(p.practice,function(a){l={name:p.name[a],url:webmd.url.clear(p.url[a]),metric:h},s[this.toString()]||(s[this.toString()]={i:a,practice:this.toString(),address:p.address[a].replace("[br]","<br />"),doctors:[]}),s[this.toString()].doctors.push(l)}),$.each(s,function(d){if("doctor"===a.dom.section||"seo"===a.dom.section)if("profile"===a.dom.pagetype){var e=p.url[0],g={practice:"<strong><em>"+this.practice+"</em></strong><br/>",address:this.address.replace("[br]","<br />"),index:this.i+1,i:this.i+1,metric:h,url:webmd.url.setParam("pos",this.i+1,e)};c=f.templates[a.dom.pagetype].hoverDesc,o+=webmd.substitute(c,g)}else o+=webmd.substitute(f.templates.results.hoverMultiTitle,this),$.each(this.doctors,function(a){this.index=b+1+"-"+(a+1),this.i=b+1,o+=webmd.substitute(c,this)});else j=$.extend(this,this.doctors[0]),j.index=b+1+"-"+(r+1),j.i=b+1,o+=webmd.substitute(c,j),r++})):(k="pharmacy"!==a.dom.section&&"profile"===a.dom.pagetype?p.url[0].replace(p.url[0].slice(webmd.url.clear(p.url[0]).lastIndexOf("-")),"-directions"):p.url[0],l={name:p.name[0],practice:p.practice[0].length>0?"<strong><em>"+p.practice[0]+"</em></strong><br/>":"",address:p.address[0].replace("[br]","<br />"),index:b+1,i:b+1,metric:h,url:webmd.url.setParam("pos",webmd.url.getParam("pos",p.url[0]),k)},c="pharmacy"!==a.dom.section?f.templates[a.dom.pagetype].hoverDesc:f.templates[a.dom.pagetype].otherDesc,o+=webmd.substitute(c,l))),f.marks[d].features.push({type:"Feature",geometry:{type:"Point",coordinates:[Number(p.lon),Number(p.lat)]},properties:{title:"1",html:o,"marker-color":p.area?"#666":"#3789b9",icon:{iconUrl:i,iconSize:p.area?[23,34]:[20,31],iconAnchor:p.area?[23,34]:[20,31],popupAnchor:p.area?[-12,-34]:[-10,-31],className:"dot"}}})),t||a.mobile||"profile"!==a.dom.pagetype||p.area||"practice"===a.dom.subsection||(m="overview","doctor"===a.dom.section&&"practice"!==a.dom.subsection&&(m="appointments"),g++,$.each(p.practice,function(b){if(b>0&&g++,g<3){var c={practice:p.practice[b],address:p.address[b].replace("[br]","<br />"),phone:p.phone[0]||"",url:webmd.url.clear(p.url[b])+"?pos="+g,url2:webmd.url.clear(p.url[b].replace("directions",m))+"#loc"+g,index:g,metric:a.metric+"-rr-loc"};"hospital"===a.dom.section&&(c.url2=c.url),$("#s4 .rr-locations-list .view").attr("href",webmd.url.clear(c.url2)).before(webmd.substitute(f.templates.profile.rrLoc,c))}}),$("#s4 .results-count").text("("+g+")"))}),f.bindTooltips(f.markerLayer[d]),f.markerLayer[d].setGeoJSON(f.marks[d]),setTimeout(function(){b.fitBounds(f.markerLayer[d].getBounds(),{padding:[10,10]})},500),"doctor"===a.dom.section&&"profile"===a.dom.pagetype&&"practice"!==a.dom.subsection?g<3?($("#s4 .view").remove(),$("#s4 .rr-locations .rr-locations-list .rr-location-info:last-child").css("border","0")):$("#s4 .view").on("click",function(){wmdTrack(a.metric+"-rr-loc_more")}):"hospital"===a.dom.section&&"profile"===a.dom.pagetype&&($("#s4 .rr-locations-header h3").html("Hospital Location").closest("div").show(),$("#s4 .view, #s4 .rr-locations .rr-locations-list .rr-location-info .dir-button a:not(:first-child)").remove(),$("#s4 .rr-locations .rr-locations-list .rr-location-info:last-child").css("border","0"),$("#s4 .rr-locations .rr-location-info a").each(function(){this.href=webmd.url.clear(this.href)}),$("#s4 .rr-locations .rr-locations-list").show())},setStartEndPins:function(a,b){webmd.debug("=/=/= PhysicianDirectory - MAP: Add pins for start and end: ",b);var c=this,d={practice:"<strong><em>Starting Location:</em></strong><br/>",address:c.start.add+"<br />"+c.start.city+", "+c.start.state+" "+c.start.zip},e={};c.markerLayer.cwmap||(c.markerLayer.cwmap=L.mapbox.featureLayer().addTo(b)),c.start.address=c.start.geoAddress||d.address,e.practice="<strong><em>"+c.end.practice+"</em></strong><br/>",e.address=c.end.address[0].replace("[br]","<br />"),e.index=c.end.i+1,e.i=c.end.i+1,e.metric=a.metric+"-srch-map",e.url=webmd.url.setParam("pos",c.end.i+1,c.end.url[0]),c.marks.cwmap={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[Number(c.start.lon),Number(c.start.lat)]},properties:{title:"Start",html:webmd.substitute(c.templates[a.dom.pagetype].otherDesc,d),"marker-color":"#3789b9",icon:{iconUrl:image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/map-start-icon-google.png",iconSize:[20,31],iconAnchor:[20,31],popupAnchor:[-10,-31],className:"dot"}}},{type:"Feature",geometry:{type:"Point",coordinates:[Number(c.end.lon),Number(c.end.lat)]},properties:{title:"End",html:webmd.substitute(c.templates[a.dom.pagetype].hoverDesc,e),"marker-color":"#3789b9",icon:{iconUrl:image_server_url+"/webmd/consumer_assets/site_images/physician_directory/images/map-end-icon-google.png",iconSize:[20,31],iconAnchor:[20,31],popupAnchor:[-10,-31],className:"dot"}}}]},c.bindTooltips(c.markerLayer.cwmap),c.markerLayer.cwmap.setGeoJSON(c.marks.cwmap)},writeTurnByTurnDirections:function(a,b){webmd.debug("=/=/= PhysicianDirectory - MAP: Write out Directions",a,b,this.start);var c,d=this,e=function(a){return a||(a=0),(Math.round(621371e-9*a*10)/10).toFixed(1)},f={startingAddress:d.start.address.replace("<br />",", "),endingAddress:d.end.address[0].replace("[br]",", "),time:d.formatTime(b.duration),miles:e(b.distance),turns:""},g='<div class="mapDrivingDirections"><h3>Driving Directions</h3><ul><li><strong class="dstart">Start:</strong> {startingAddress}</li><li><strong class="end">End:</strong> {endingAddress}</li><li><strong>Total Estimated Time:</strong> {time}</li><li><strong>Total Miles:</strong> {miles}</li></ul><table border="0" cellpadding="0" cellspacing="0"><thead><tr><th class="direction">Directions</th><th class="distance">Miles</th></tr></thead><tbody>{turns}</tbbody></table></div>',h='<tr><td class="direction"><strong class="dirHeader">{i}:</strong> {instruction}</td><td class="distance">{distance}</td></tr>';1!==f.miles?f.miles+=" miles":f.miles+=" mile",$.each(b.steps,function(a,b){c={i:a+1,instruction:b.maneuver.instruction,distance:e(b.distance)},f.turns+=webmd.substitute(h,c)}),a.dom.page.find(".mapdirections").html(webmd.substitute(g,f)).show()}}});("undefined"!=typeof s_pagename&&(s_pagename.indexOf("/home")>-1||s_pagename.indexOf("/results")>-1||s_pagename.indexOf("/profile")>-1||s_pagename.indexOf("/pharmacy")>-1||s_pagename.indexOf("/hospital")>-1||s_pagename.indexOf("/find-a-doctor")>-1||s_pagename.indexOf("/find-a-hospital")>-1||s_pagename.indexOf("/find-a-pharmacy")>-1||s_pagename.indexOf("/find-health-insurance")>-1||s_pagename.indexOf("/insurance")>-1||s_pagename.indexOf("/practice")>-1||s_pagename.indexOf("/specialties")>-1)||window.location.href.toString().indexOf("preview.aspx")>-1)&&d.init()})});var s_channel_super_portal=s_channel_super_portal||"",s_unique_id=s_unique_id||"",s_channel_health=s_channel_health||"physicianfinder",s_site=s_site||"core",s_not_pageview="y",s_topic=s_topic||"";document.location.href.indexOf("/pharmacy/")>-1?s_channel_health="pharmacyfinder":document.location.href.indexOf("/hospital/")>-1&&(s_channel_health="hospitalfinder"),webmd.ads2&&webmd.ads2.disableInitialLoad(),webmd.adappid=26;var urls=["https://doctor.webmd.com/","https://doctor.dev01.webmd.com/","https://doctor.dev02.webmd.com/","https://doctor.qa01.webmd.com/","https://doctor.qa00.webmd.com/","https://doctor.perf.webmd.com/"];$.inArray(webmd.url.clear(),urls)>-1&&(webmd.debug("=-=-= LHD: Restrict right rail ad size to 300x250"),webmd.ads2.sizes[121]=[300,250]),"undefined"!=typeof wmdPageLink&&"undefined"!=typeof wmdTrack&&"undefined"!=typeof wmdPageview||(wmdPageLink=window.wmdPageLink||function(){},wmdTrack=window.wmdTrack||function(){},wmdPageview=window.wmdPageview||function(){});